webpackJsonp([13],{

/***/ 1006:
/* no static exports found */
/* all exports used */
/*!********************************************************!*\
  !*** ./src/components/exception/dropdownexception.tsx ***!
  \********************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar _this = this;\r\nvar React = __webpack_require__(/*! react */ 0);\r\nvar localeStore = __webpack_require__(/*! ../../stores/locale/localestore */ 226);\r\nvar classNames = __webpack_require__(/*! classnames */ 39);\r\n/* tslint:disable:variable-name */\r\nvar DropDownException = function (props) {\r\n    var isOpen = props.isOpen ? 'open' : 'close';\r\n    var description = '';\r\n    var checkBox = React.createElement(\"input\", { type: 'radio', \"aria-label\": 'exception', value: 'selected', id: 'exceptionType' + props.id, key: props.id, name: 'exceptionType', checked: props.isChecked });\r\n    if (props.isDisabled) {\r\n        checkBox = React.createElement(\"input\", { type: 'radio', \"aria-label\": 'exception', value: 'selected', id: 'exceptionType' + props.id, key: props.id, name: 'exceptionType', disabled: true });\r\n    }\r\n    if (props.description === '') {\r\n        description = localeStore.instance.TranslateText('generic.exception-types.' + props.id + '.details');\r\n    }\r\n    else {\r\n        description = props.description;\r\n    }\r\n    return (React.createElement(\"div\", { className: 'exception-type-menu-item menu-item panel ' + isOpen, role: 'menuitem' },\r\n        checkBox,\r\n        React.createElement(\"label\", { onClick: props.onClick.bind(_this, props.id, props.isDisabled) },\r\n            React.createElement(\"span\", { className: 'radio-ui' }),\r\n            React.createElement(\"span\", { className: 'label-text' }, localeStore.instance.TranslateText('generic.exception-types.' + props.id + '.name'))),\r\n        React.createElement(\"span\", { className: 'sprite-icon info-round-icon panel-link', onClick: props.showExceptionDesc.bind(_this, props.id, isOpen) }),\r\n        React.createElement(\"div\", { className: 'menu-callout' }),\r\n        React.createElement(\"div\", { className: 'panel-content exception-type-info padding-all-15', \"aria-hidden\": 'true' },\r\n            React.createElement(\"div\", { className: 'info-item' }, description),\r\n            React.createElement(\"div\", { className: 'info-item' }, props.blockerDescription))));\r\n};\r\nmodule.exports = DropDownException;\r\n/* tslint:enable */ \r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTAwNi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2V4Y2VwdGlvbi9kcm9wZG93bmV4Y2VwdGlvbi50c3g/NDhmMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgcHVyZVJlbmRlckNvbXBvbmVudCA9IHJlcXVpcmUoJy4uL2Jhc2UvcHVyZXJlbmRlcmNvbXBvbmVudCcpO1xyXG5pbXBvcnQgZW51bXMgPSByZXF1aXJlKCcuLi91dGlsaXR5L2VudW1zJyk7XHJcbmltcG9ydCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XHJcbmltcG9ydCBsb2NhbGVTdG9yZSA9IHJlcXVpcmUoJy4uLy4uL3N0b3Jlcy9sb2NhbGUvbG9jYWxlc3RvcmUnKTtcclxubGV0IGNsYXNzTmFtZXMgPSByZXF1aXJlKCdjbGFzc25hbWVzJyk7XHJcblxyXG5pbnRlcmZhY2UgRHJvcERvd25JdGVtcyB7XHJcbiAgICBpZDogbnVtYmVyO1xyXG4gICAga2V5OiBzdHJpbmc7XHJcbiAgICBpc09wZW46IGJvb2xlYW47XHJcbiAgICBpc0NoZWNrZWQ6IGJvb2xlYW47XHJcbiAgICBvbkNsaWNrOiBGdW5jdGlvbjtcclxuICAgIHNob3dFeGNlcHRpb25EZXNjOiBGdW5jdGlvbjtcclxuICAgIGlzRGlzYWJsZWQ6IGJvb2xlYW47XHJcbiAgICBkZXNjcmlwdGlvbjogc3RyaW5nO1xyXG4gICAgYmxvY2tlckRlc2NyaXB0aW9uOiBzdHJpbmc7XHJcbn1cclxuXHJcbi8qIHRzbGludDpkaXNhYmxlOnZhcmlhYmxlLW5hbWUgKi9cclxuXHJcbmNvbnN0IERyb3BEb3duRXhjZXB0aW9uOlxyXG4gICAgUmVhY3QuU3RhdGVsZXNzQ29tcG9uZW50PERyb3BEb3duSXRlbXM+ID1cclxuICAgIChwcm9wczogRHJvcERvd25JdGVtcykgPT4ge1xyXG4gICAgICAgIGxldCBpc09wZW46IHN0cmluZyA9IHByb3BzLmlzT3BlbiA/ICdvcGVuJyA6ICdjbG9zZSc7XHJcbiAgICAgICAgbGV0IGRlc2NyaXB0aW9uOiBzdHJpbmcgPSAnJztcclxuXHJcbiAgICAgICAgbGV0IGNoZWNrQm94OiBKU1guRWxlbWVudCA9IDwgaW5wdXQgdHlwZT0gJ3JhZGlvJyBhcmlhLWxhYmVsPSdleGNlcHRpb24nXHJcbiAgICAgICAgICAgIHZhbHVlPSAnc2VsZWN0ZWQnIGlkPSB7J2V4Y2VwdGlvblR5cGUnICsgcHJvcHMuaWR9IGtleT0ge3Byb3BzLmlkfVxyXG4gICAgICAgICAgICBuYW1lPSdleGNlcHRpb25UeXBlJyBjaGVja2VkPSB7cHJvcHMuaXNDaGVja2VkfS8+O1xyXG5cclxuICAgICAgICBpZiAocHJvcHMuaXNEaXNhYmxlZCkge1xyXG4gICAgICAgICAgICBjaGVja0JveCA9IDwgaW5wdXQgdHlwZT0gJ3JhZGlvJyBhcmlhLWxhYmVsPSdleGNlcHRpb24nIHZhbHVlPSAnc2VsZWN0ZWQnIGlkPSB7J2V4Y2VwdGlvblR5cGUnICsgcHJvcHMuaWR9IGtleT0ge3Byb3BzLmlkfVxyXG4gICAgICAgICAgICAgICAgbmFtZT0gJ2V4Y2VwdGlvblR5cGUnIGRpc2FibGVkLz47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAocHJvcHMuZGVzY3JpcHRpb24gPT09ICcnKSB7XHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uID0gbG9jYWxlU3RvcmUuaW5zdGFuY2UuVHJhbnNsYXRlVGV4dCgnZ2VuZXJpYy5leGNlcHRpb24tdHlwZXMuJyArIHByb3BzLmlkICsgJy5kZXRhaWxzJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZGVzY3JpcHRpb24gPSBwcm9wcy5kZXNjcmlwdGlvbjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXsnZXhjZXB0aW9uLXR5cGUtbWVudS1pdGVtIG1lbnUtaXRlbSBwYW5lbCAnICsgaXNPcGVufSByb2xlPSdtZW51aXRlbSc+XHJcbiAgICAgICAgICAgICAgICB7Y2hlY2tCb3h9XHJcbiAgICAgICAgICAgICAgICA8bGFiZWwgb25DbGljaz17cHJvcHMub25DbGljay5iaW5kKHRoaXMsIHByb3BzLmlkLCBwcm9wcy5pc0Rpc2FibGVkKSB9PlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0ncmFkaW8tdWknPjwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J2xhYmVsLXRleHQnPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7IGxvY2FsZVN0b3JlLmluc3RhbmNlLlRyYW5zbGF0ZVRleHQoJ2dlbmVyaWMuZXhjZXB0aW9uLXR5cGVzLicgKyBwcm9wcy5pZCArICcubmFtZScpIH1cclxuICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSdzcHJpdGUtaWNvbiBpbmZvLXJvdW5kLWljb24gcGFuZWwtbGluaydcclxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXtwcm9wcy5zaG93RXhjZXB0aW9uRGVzYy5iaW5kKHRoaXMsIHByb3BzLmlkLCBpc09wZW4pIH0+PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J21lbnUtY2FsbG91dCc+PC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncGFuZWwtY29udGVudCBleGNlcHRpb24tdHlwZS1pbmZvIHBhZGRpbmctYWxsLTE1JyBhcmlhLWhpZGRlbj0ndHJ1ZSc+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2luZm8taXRlbSc+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgZGVzY3JpcHRpb24gfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdpbmZvLWl0ZW0nPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7cHJvcHMuYmxvY2tlckRlc2NyaXB0aW9ufVxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcblxyXG4gICAgfTtcclxuXHJcbmV4cG9ydCA9IERyb3BEb3duRXhjZXB0aW9uO1xyXG5cclxuLyogdHNsaW50OmVuYWJsZSAqL1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vc291cmNlLW1hcC1sb2FkZXIhLi9zcmMvY29tcG9uZW50cy9leGNlcHRpb24vZHJvcGRvd25leGNlcHRpb24udHN4Il0sIm1hcHBpbmdzIjoiO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFjQTtBQUVBO0FBR0E7QUFDQTtBQUVBO0FBSUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFPQTtBQUVBO0FBRUE7Iiwic291cmNlUm9vdCI6IiJ9");

/***/ }),

/***/ 1007:
/* no static exports found */
/* all exports used */
/*!************************************************************!*\
  !*** ./src/components/exception/exceptionactionbutton.tsx ***!
  \************************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar React = __webpack_require__(/*! react */ 0);\r\n/**\r\n * exception action button contain exception action such as Escalate, Resolve, Close.\r\n * @param props\r\n */\r\nvar exceptionActionButton = function (props) {\r\n    return (React.createElement(\"a\", { className: 'exception-close-link', id: props.id, onClick: function () { props.onActionException(); } },\r\n        React.createElement(\"span\", { className: props.className }),\r\n        React.createElement(\"span\", { className: 'exception-close-text dim-text' }, props.content)));\r\n};\r\nmodule.exports = exceptionActionButton;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTAwNy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2V4Y2VwdGlvbi9leGNlcHRpb25hY3Rpb25idXR0b24udHN4PzBjMDAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcclxuaW1wb3J0IGxvY2FsZVN0b3JlID0gcmVxdWlyZSgnLi4vLi4vc3RvcmVzL2xvY2FsZS9sb2NhbGVzdG9yZScpO1xyXG5cclxuaW50ZXJmYWNlIEV4Y2VwdGlvbkFjdGlvbkJ1dHRvblByb3BzIGV4dGVuZHMgTG9jYWxlU2VsZWN0aW9uQmFzZSwgUHJvcHNCYXNlIHtcclxuICAgIGNvbnRlbnQ/OiBzdHJpbmc7XHJcbiAgICBjbGFzc05hbWU/OiBzdHJpbmc7XHJcbiAgICBvbkFjdGlvbkV4Y2VwdGlvbj86IEZ1bmN0aW9uO1xyXG59XHJcblxyXG4vKipcclxuICogZXhjZXB0aW9uIGFjdGlvbiBidXR0b24gY29udGFpbiBleGNlcHRpb24gYWN0aW9uIHN1Y2ggYXMgRXNjYWxhdGUsIFJlc29sdmUsIENsb3NlLlxyXG4gKiBAcGFyYW0gcHJvcHNcclxuICovXHJcbmNvbnN0IGV4Y2VwdGlvbkFjdGlvbkJ1dHRvbjogUmVhY3QuU3RhdGVsZXNzQ29tcG9uZW50PEV4Y2VwdGlvbkFjdGlvbkJ1dHRvblByb3BzPiA9IChwcm9wczogRXhjZXB0aW9uQWN0aW9uQnV0dG9uUHJvcHMpID0+IHtcclxuXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICAgIDxhIGNsYXNzTmFtZT0nZXhjZXB0aW9uLWNsb3NlLWxpbmsnXHJcbiAgICAgICAgICAgIGlkPXtwcm9wcy5pZH1cclxuICAgICAgICAgICAgb25DbGljaz17KCkgPT4geyBwcm9wcy5vbkFjdGlvbkV4Y2VwdGlvbigpOyB9fT5cclxuICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPXtwcm9wcy5jbGFzc05hbWV9Pjwvc3Bhbj5cclxuICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSdleGNlcHRpb24tY2xvc2UtdGV4dCBkaW0tdGV4dCc+XHJcbiAgICAgICAgICAgICAgICB7cHJvcHMuY29udGVudH1cclxuICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgIDwvYT5cclxuICAgICk7XHJcbn07XHJcblxyXG5leHBvcnQgPSBleGNlcHRpb25BY3Rpb25CdXR0b247XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9zb3VyY2UtbWFwLWxvYWRlciEuL3NyYy9jb21wb25lbnRzL2V4Y2VwdGlvbi9leGNlcHRpb25hY3Rpb25idXR0b24udHN4Il0sIm1hcHBpbmdzIjoiO0FBQUE7QUFTQTs7O0FBR0E7QUFDQTtBQUVBO0FBSUE7QUFDQTtBQUtBO0FBRUE7Iiwic291cmNlUm9vdCI6IiJ9");

/***/ }),

/***/ 1008:
/* no static exports found */
/* all exports used */
/*!***************************************************!*\
  !*** ./src/components/exception/exceptionbase.ts ***!
  \***************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar pureRenderComponent = __webpack_require__(/*! ../base/purerendercomponent */ 227);\r\nvar enums = __webpack_require__(/*! ../utility/enums */ 225);\r\nvar popupHelper = __webpack_require__(/*! ../utility/popup/popuphelper */ 288);\r\nvar exceptionStore = __webpack_require__(/*! ../../stores/exception/exceptionstore */ 277);\r\nvar exceptionActionCreator = __webpack_require__(/*! ../../actions/exception/exceptionactioncreator */ 428);\r\nvar markingActionCreator = __webpack_require__(/*! ../../actions/marking/markingactioncreator */ 246);\r\nvar keyDownHelper = __webpack_require__(/*! ../../utility/generic/keydownhelper */ 258);\r\nvar ExceptionBase = /** @class */ (function (_super) {\r\n    __extends(ExceptionBase, _super);\r\n    /**\r\n     * Constructor ExceptionBase\r\n     * @param props\r\n     * @param state\r\n     */\r\n    function ExceptionBase(props, state) {\r\n        var _this = _super.call(this, props, state) || this;\r\n        _this.navigateTo = enums.SaveAndNavigate.none;\r\n        _this._questionName = '';\r\n        _this._questionId = undefined;\r\n        _this._markSchemeGroup = undefined;\r\n        /**\r\n         * Method fired when the exception panel is minimized.\r\n         */\r\n        _this.onMinimize = function () {\r\n            keyDownHelper.instance.Activate(enums.MarkEntryDeactivator.Exception);\r\n            exceptionActionCreator.exceptionWindowAction(enums.ExceptionViewAction.Minimize);\r\n        };\r\n        /**\r\n         * Method fired when the exception panel is maximized.\r\n         */\r\n        _this.onMaximize = function () {\r\n            keyDownHelper.instance.DeActivate(enums.MarkEntryDeactivator.Exception);\r\n            if (_this.props.isNewException && _this.refs.commentTextBox !== undefined) {\r\n                _this.refs.commentTextBox.focus();\r\n            }\r\n            exceptionActionCreator.exceptionWindowAction(enums.ExceptionViewAction.Maximize);\r\n        };\r\n        /**\r\n         * Reset message panel and close\r\n         */\r\n        _this.resetAndCloseExceptionPanel = function () {\r\n            _this.props.closeExceptionPanel();\r\n        };\r\n        /**\r\n         * Method fired when discard message is confirmed.\r\n         */\r\n        _this.onDiscardExceptionConfirmed = function () {\r\n            // Close the Message Panel.\r\n            _this.resetAndCloseExceptionPanel();\r\n            // on message close navigate away from response scenario\r\n            if (_this.navigateTo !== enums.SaveAndNavigate.none && _this.navigateTo !== enums.SaveAndNavigate.exceptionWithInResponse) {\r\n                // if navigate away from Resposne then close the response and move to worklist.\r\n                popupHelper.navigateAway(_this.navigateTo);\r\n                _this.navigateTo = enums.SaveAndNavigate.none;\r\n            }\r\n            if (exceptionStore.instance.navigateFrom === enums.SaveAndNavigate.submit) {\r\n                markingActionCreator.saveAndNavigate(enums.SaveAndNavigate.submit);\r\n            }\r\n        };\r\n        /**\r\n         * Method fired when discard exception is cancelled.\r\n         */\r\n        _this.onDiscardExceptionCancelled = function () {\r\n            if (_this.props.isExceptionPanelEdited) {\r\n                _this.props.validateException(null, false);\r\n            }\r\n            // reset navigate away from response\r\n            _this.navigateTo = enums.SaveAndNavigate.none;\r\n        };\r\n        return _this;\r\n    }\r\n    return ExceptionBase;\r\n}(pureRenderComponent));\r\nmodule.exports = ExceptionBase;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTAwOC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2V4Y2VwdGlvbi9leGNlcHRpb25iYXNlLnRzP2UwNjEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHB1cmVSZW5kZXJDb21wb25lbnQgPSByZXF1aXJlKCcuLi9iYXNlL3B1cmVyZW5kZXJjb21wb25lbnQnKTtcclxuaW1wb3J0IFJlYWN0RG9tID0gcmVxdWlyZSgncmVhY3QtZG9tJyk7XHJcbmltcG9ydCBlbnVtcyA9IHJlcXVpcmUoJy4uL3V0aWxpdHkvZW51bXMnKTtcclxuaW1wb3J0IGxvY2FsZVN0b3JlID0gcmVxdWlyZSgnLi4vLi4vc3RvcmVzL2xvY2FsZS9sb2NhbGVzdG9yZScpO1xyXG5pbXBvcnQgcG9wdXBIZWxwZXIgPSByZXF1aXJlKCcuLi91dGlsaXR5L3BvcHVwL3BvcHVwaGVscGVyJyk7XHJcbmltcG9ydCBwb3BVcERpc3BsYXlBY3Rpb25DcmVhdG9yID0gcmVxdWlyZSgnLi4vLi4vYWN0aW9ucy9wb3B1cGRpc3BsYXkvcG9wdXBkaXNwbGF5YWN0aW9uY3JlYXRvcicpO1xyXG5pbXBvcnQgZXhjZXB0aW9uU3RvcmUgPSByZXF1aXJlKCcuLi8uLi9zdG9yZXMvZXhjZXB0aW9uL2V4Y2VwdGlvbnN0b3JlJyk7XHJcbmltcG9ydCBleGNlcHRpb25BY3Rpb25DcmVhdG9yID0gcmVxdWlyZSgnLi4vLi4vYWN0aW9ucy9leGNlcHRpb24vZXhjZXB0aW9uYWN0aW9uY3JlYXRvcicpO1xyXG5pbXBvcnQgbWFya2luZ0FjdGlvbkNyZWF0b3IgPSByZXF1aXJlKCcuLi8uLi9hY3Rpb25zL21hcmtpbmcvbWFya2luZ2FjdGlvbmNyZWF0b3InKTtcclxuaW1wb3J0IGtleURvd25IZWxwZXIgPSByZXF1aXJlKCcuLi8uLi91dGlsaXR5L2dlbmVyaWMva2V5ZG93bmhlbHBlcicpO1xyXG5cclxuY2xhc3MgRXhjZXB0aW9uQmFzZSBleHRlbmRzIHB1cmVSZW5kZXJDb21wb25lbnQ8YW55LCBhbnk+IHtcclxuICAgIC8qKiByZWZzICovXHJcbiAgICBwdWJsaWMgcmVmczoge1xyXG4gICAgICAgIFtrZXk6IHN0cmluZ106IChFbGVtZW50KTtcclxuICAgICAgICBjb21tZW50VGV4dEJveDogKEhUTUxJbnB1dEVsZW1lbnQpO1xyXG4gICAgfTtcclxuXHJcbiAgICBwcm90ZWN0ZWQgbmF2aWdhdGVUbzogZW51bXMuU2F2ZUFuZE5hdmlnYXRlID0gZW51bXMuU2F2ZUFuZE5hdmlnYXRlLm5vbmU7XHJcbiAgICBwcm90ZWN0ZWQgX3F1ZXN0aW9uTmFtZTogc3RyaW5nID0gJyc7XHJcblx0cHJvdGVjdGVkIF9xdWVzdGlvbklkOiBudW1iZXIgPSB1bmRlZmluZWQ7XHJcblx0cHJvdGVjdGVkIF9tYXJrU2NoZW1lR3JvdXA6IG51bWJlciA9IHVuZGVmaW5lZDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbnN0cnVjdG9yIEV4Y2VwdGlvbkJhc2VcclxuICAgICAqIEBwYXJhbSBwcm9wc1xyXG4gICAgICogQHBhcmFtIHN0YXRlXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKHByb3BzOiBhbnksIHN0YXRlOiBhbnkpIHtcclxuICAgICAgICBzdXBlcihwcm9wcywgc3RhdGUpO1xyXG4gICAgfVxyXG5cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNZXRob2QgZmlyZWQgd2hlbiB0aGUgZXhjZXB0aW9uIHBhbmVsIGlzIG1pbmltaXplZC5cclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIG9uTWluaW1pemUgPSAoKSA9PiB7XHJcbiAgICAgICAga2V5RG93bkhlbHBlci5pbnN0YW5jZS5BY3RpdmF0ZShlbnVtcy5NYXJrRW50cnlEZWFjdGl2YXRvci5FeGNlcHRpb24pO1xyXG4gICAgICAgIGV4Y2VwdGlvbkFjdGlvbkNyZWF0b3IuZXhjZXB0aW9uV2luZG93QWN0aW9uKGVudW1zLkV4Y2VwdGlvblZpZXdBY3Rpb24uTWluaW1pemUpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIE1ldGhvZCBmaXJlZCB3aGVuIHRoZSBleGNlcHRpb24gcGFuZWwgaXMgbWF4aW1pemVkLlxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgb25NYXhpbWl6ZSA9ICgpID0+IHtcclxuICAgICAgICBrZXlEb3duSGVscGVyLmluc3RhbmNlLkRlQWN0aXZhdGUoZW51bXMuTWFya0VudHJ5RGVhY3RpdmF0b3IuRXhjZXB0aW9uKTtcclxuICAgICAgICBpZiAodGhpcy5wcm9wcy5pc05ld0V4Y2VwdGlvbiAmJiB0aGlzLnJlZnMuY29tbWVudFRleHRCb3ggIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLnJlZnMuY29tbWVudFRleHRCb3guZm9jdXMoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZXhjZXB0aW9uQWN0aW9uQ3JlYXRvci5leGNlcHRpb25XaW5kb3dBY3Rpb24oZW51bXMuRXhjZXB0aW9uVmlld0FjdGlvbi5NYXhpbWl6ZSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVzZXQgbWVzc2FnZSBwYW5lbCBhbmQgY2xvc2VcclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIHJlc2V0QW5kQ2xvc2VFeGNlcHRpb25QYW5lbCA9ICgpOiB2b2lkID0+IHtcclxuICAgICAgICB0aGlzLnByb3BzLmNsb3NlRXhjZXB0aW9uUGFuZWwoKTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNZXRob2QgZmlyZWQgd2hlbiBkaXNjYXJkIG1lc3NhZ2UgaXMgY29uZmlybWVkLlxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgb25EaXNjYXJkRXhjZXB0aW9uQ29uZmlybWVkID0gKCkgPT4ge1xyXG4gICAgICAgIC8vIENsb3NlIHRoZSBNZXNzYWdlIFBhbmVsLlxyXG4gICAgICAgIHRoaXMucmVzZXRBbmRDbG9zZUV4Y2VwdGlvblBhbmVsKCk7XHJcbiAgICAgICAgLy8gb24gbWVzc2FnZSBjbG9zZSBuYXZpZ2F0ZSBhd2F5IGZyb20gcmVzcG9uc2Ugc2NlbmFyaW9cclxuICAgICAgICBpZiAodGhpcy5uYXZpZ2F0ZVRvICE9PSBlbnVtcy5TYXZlQW5kTmF2aWdhdGUubm9uZSAmJiB0aGlzLm5hdmlnYXRlVG8gIT09IGVudW1zLlNhdmVBbmROYXZpZ2F0ZS5leGNlcHRpb25XaXRoSW5SZXNwb25zZSkge1xyXG4gICAgICAgICAgICAvLyBpZiBuYXZpZ2F0ZSBhd2F5IGZyb20gUmVzcG9zbmUgdGhlbiBjbG9zZSB0aGUgcmVzcG9uc2UgYW5kIG1vdmUgdG8gd29ya2xpc3QuXHJcbiAgICAgICAgICAgIHBvcHVwSGVscGVyLm5hdmlnYXRlQXdheSh0aGlzLm5hdmlnYXRlVG8pO1xyXG4gICAgICAgICAgICB0aGlzLm5hdmlnYXRlVG8gPSBlbnVtcy5TYXZlQW5kTmF2aWdhdGUubm9uZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChleGNlcHRpb25TdG9yZS5pbnN0YW5jZS5uYXZpZ2F0ZUZyb20gPT09IGVudW1zLlNhdmVBbmROYXZpZ2F0ZS5zdWJtaXQpIHtcclxuICAgICAgICAgICAgbWFya2luZ0FjdGlvbkNyZWF0b3Iuc2F2ZUFuZE5hdmlnYXRlKGVudW1zLlNhdmVBbmROYXZpZ2F0ZS5zdWJtaXQpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNZXRob2QgZmlyZWQgd2hlbiBkaXNjYXJkIGV4Y2VwdGlvbiBpcyBjYW5jZWxsZWQuXHJcbiAgICAgKi9cclxuICAgIHByb3RlY3RlZCBvbkRpc2NhcmRFeGNlcHRpb25DYW5jZWxsZWQgPSAoKSA9PiB7XHJcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuaXNFeGNlcHRpb25QYW5lbEVkaXRlZCkge1xyXG4gICAgICAgICAgICB0aGlzLnByb3BzLnZhbGlkYXRlRXhjZXB0aW9uKG51bGwsIGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gcmVzZXQgbmF2aWdhdGUgYXdheSBmcm9tIHJlc3BvbnNlXHJcbiAgICAgICAgdGhpcy5uYXZpZ2F0ZVRvID0gZW51bXMuU2F2ZUFuZE5hdmlnYXRlLm5vbmU7XHJcbiAgICB9O1xyXG5cclxufVxyXG5cclxuZXhwb3J0ID0gRXhjZXB0aW9uQmFzZTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L3NvdXJjZS1tYXAtbG9hZGVyIS4vc3JjL2NvbXBvbmVudHMvZXhjZXB0aW9uL2V4Y2VwdGlvbmJhc2UudHMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBWUE7Ozs7QUFJQTtBQUNBO0FBQUE7QUFWQTtBQUNBO0FBQ0E7QUFDQTtBQWFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUF6REE7QUEyREE7QUFBQTtBQUVBOyIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),

/***/ 1009:
/* no static exports found */
/* all exports used */
/*!**************************************************************!*\
  !*** ./src/components/exception/exceptioncommenthistory.tsx ***!
  \**************************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar enums = __webpack_require__(/*! ../utility/enums */ 225);\r\nvar React = __webpack_require__(/*! react */ 0);\r\nvar classNames = __webpack_require__(/*! classnames */ 39);\r\nvar messageHelper = __webpack_require__(/*! ../utility/message/messagehelper */ 283);\r\nvar localeStore = __webpack_require__(/*! ../../stores/locale/localestore */ 226);\r\n/* tslint:disable:variable-name */\r\nvar ExceptionCommentHistory = function (props) {\r\n    return (React.createElement(\"div\", { key: props.key, className: classNames('exception-history-item') },\r\n        React.createElement(\"div\", { className: 'exception-history-item-header' },\r\n            React.createElement(\"div\", { className: 'exception-history-item-left item-title' },\r\n                React.createElement(\"span\", { className: 'exception-examiner', id: 'exception_commentedby' + props.id }, props.commentedBy),\r\n                React.createElement(\"span\", { className: 'exception-history-status', id: 'exception_status' + props.id },\r\n                    \"(\",\r\n                    localeStore.instance.\r\n                        TranslateText('generic.exception-statuses.' +\r\n                        enums.getEnumString(enums.ExceptionStatus, props.exceptionStatus).toLowerCase()),\r\n                    \") \")),\r\n            React.createElement(\"div\", { className: 'exception-history-item-right' },\r\n                React.createElement(\"div\", { className: 'exception-history-tem-date' }, messageHelper.getDateToDisplay(props.updatedDate)))),\r\n        React.createElement(\"div\", { className: 'exception-history-item-content', id: 'exception_comments' + props.id }, props.comments)));\r\n};\r\nmodule.exports = ExceptionCommentHistory;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTAwOS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2V4Y2VwdGlvbi9leGNlcHRpb25jb21tZW50aGlzdG9yeS50c3g/Mjc1NCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZW51bXMgPSByZXF1aXJlKCcuLi91dGlsaXR5L2VudW1zJyk7XHJcbmltcG9ydCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XHJcbmxldCBjbGFzc05hbWVzID0gcmVxdWlyZSgnY2xhc3NuYW1lcycpO1xyXG5pbXBvcnQgbWVzc2FnZUhlbHBlciA9IHJlcXVpcmUoJy4uL3V0aWxpdHkvbWVzc2FnZS9tZXNzYWdlaGVscGVyJyk7XHJcbmltcG9ydCBsb2NhbGVTdG9yZSA9IHJlcXVpcmUoJy4uLy4uL3N0b3Jlcy9sb2NhbGUvbG9jYWxlc3RvcmUnKTtcclxuXHJcbi8qIHRzbGludDpkaXNhYmxlOnZhcmlhYmxlLW5hbWUgKi9cclxuXHJcblxyXG5jb25zdCBFeGNlcHRpb25Db21tZW50SGlzdG9yeTpcclxuICAgIFJlYWN0LlN0YXRlbGVzc0NvbXBvbmVudDx7XHJcbiAgICAgICAgY29tbWVudGVkQnk6IHN0cmluZywgaXNFc2NhbGF0ZWQ6IGJvb2xlYW4sIHVwZGF0ZWREYXRlOiBzdHJpbmcsIGNvbW1lbnRzOiBzdHJpbmdcclxuICAgICAgICAsIGV4Y2VwdGlvblN0YXR1czogbnVtYmVyLCBrZXk6IHN0cmluZywgaWQ6IG51bWJlclxyXG4gICAgfT4gPVxyXG4gICAgKHByb3BzOiB7XHJcbiAgICAgICAgY29tbWVudGVkQnk6IHN0cmluZywgaXNFc2NhbGF0ZWQ6IGJvb2xlYW4sIHVwZGF0ZWREYXRlOiBzdHJpbmcsIGNvbW1lbnRzOiBzdHJpbmcsXHJcbiAgICAgICAgZXhjZXB0aW9uU3RhdHVzOiBudW1iZXIsIGtleTogc3RyaW5nLCBpZDogbnVtYmVyXHJcbiAgICB9KSA9PiB7XHJcbiAgICAgICAgcmV0dXJuICg8ZGl2IGtleT17cHJvcHMua2V5fSBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ2V4Y2VwdGlvbi1oaXN0b3J5LWl0ZW0nKSB9PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZXhjZXB0aW9uLWhpc3RvcnktaXRlbS1oZWFkZXInPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2V4Y2VwdGlvbi1oaXN0b3J5LWl0ZW0tbGVmdCBpdGVtLXRpdGxlJz5cclxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J2V4Y2VwdGlvbi1leGFtaW5lcicgaWQ9IHsnZXhjZXB0aW9uX2NvbW1lbnRlZGJ5JyArIHByb3BzLmlkfT5cclxuICAgICAgICAgICAgICAgICAgICB7cHJvcHMuY29tbWVudGVkQnl9XHJcbiAgICAgICAgICAgICAgICAgICAgPC9zcGFuPjxzcGFuIGNsYXNzTmFtZT0nZXhjZXB0aW9uLWhpc3Rvcnktc3RhdHVzJyBpZD0geydleGNlcHRpb25fc3RhdHVzJyArIHByb3BzLmlkfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgKHtsb2NhbGVTdG9yZS5pbnN0YW5jZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRyYW5zbGF0ZVRleHQoJ2dlbmVyaWMuZXhjZXB0aW9uLXN0YXR1c2VzLicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW51bXMuZ2V0RW51bVN0cmluZyhlbnVtcy5FeGNlcHRpb25TdGF0dXMsIHByb3BzLmV4Y2VwdGlvblN0YXR1cykudG9Mb3dlckNhc2UoKSl9KSA8L3NwYW4+PC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZXhjZXB0aW9uLWhpc3RvcnktaXRlbS1yaWdodCc+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2V4Y2VwdGlvbi1oaXN0b3J5LXRlbS1kYXRlJz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgeyBtZXNzYWdlSGVscGVyLmdldERhdGVUb0Rpc3BsYXkocHJvcHMudXBkYXRlZERhdGUpIH1cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2V4Y2VwdGlvbi1oaXN0b3J5LWl0ZW0tY29udGVudCdcclxuICAgICAgICAgICAgICAgIGlkPSB7J2V4Y2VwdGlvbl9jb21tZW50cycgKyBwcm9wcy5pZH0+XHJcbiAgICAgICAgICAgICAgICB7cHJvcHMuY29tbWVudHN9XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcblxyXG4gICAgfTtcclxuXHJcbmV4cG9ydCA9IEV4Y2VwdGlvbkNvbW1lbnRIaXN0b3J5O1xyXG5cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9zb3VyY2UtbWFwLWxvYWRlciEuL3NyYy9jb21wb25lbnRzL2V4Y2VwdGlvbi9leGNlcHRpb25jb21tZW50aGlzdG9yeS50c3giXSwibWFwcGluZ3MiOiI7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBS0E7QUFPQTtBQUVBOyIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),

/***/ 1010:
/* no static exports found */
/* all exports used */
/*!********************************************************!*\
  !*** ./src/components/exception/exceptiontypeinfo.tsx ***!
  \********************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar React = __webpack_require__(/*! react */ 0);\r\nvar ReactDom = __webpack_require__(/*! react-dom */ 6);\r\nvar pureRenderComponent = __webpack_require__(/*! ../base/purerendercomponent */ 227);\r\nvar enums = __webpack_require__(/*! ../utility/enums */ 225);\r\nvar localeStore = __webpack_require__(/*! ../../stores/locale/localestore */ 226);\r\nvar classNames = __webpack_require__(/*! classnames */ 39);\r\nvar ExceptionActionButton = __webpack_require__(/*! ./exceptionactionbutton */ 1007);\r\nvar markerOperationModeFactory = __webpack_require__(/*! ../utility/markeroperationmode/markeroperationmodefactory */ 232);\r\n/* tslint:disable:variable-name */\r\nvar ExceptionTypeInfo = /** @class */ (function (_super) {\r\n    __extends(ExceptionTypeInfo, _super);\r\n    /**\r\n     * Constructor ExceptionTypeInfo\r\n     * @param props\r\n     * @param state\r\n     */\r\n    function ExceptionTypeInfo(props, state) {\r\n        var _this = _super.call(this, props, state) || this;\r\n        //exception description callout padding\r\n        _this._calloutPadding = 6;\r\n        // Set the default states\r\n        _this.state = {\r\n            showExceptionDescription: false\r\n        };\r\n        _this.showExceptionDescription = _this.showExceptionDescription.bind(_this);\r\n        return _this;\r\n    }\r\n    /**\r\n     * Component will receive props\r\n     */\r\n    ExceptionTypeInfo.prototype.componentWillReceiveProps = function () {\r\n        //close the description when the component recieves new props\r\n        this.setState({\r\n            showExceptionDescription: false\r\n        });\r\n    };\r\n    /**\r\n     * Component did mount\r\n     */\r\n    ExceptionTypeInfo.prototype.componentDidMount = function () {\r\n        //set type call out style based in the exception name width\r\n        this._exceptionTypeSpanWidth = ReactDom.findDOMNode(this.refs.caption).getBoundingClientRect().width;\r\n    };\r\n    /**\r\n     * Component did update\r\n     */\r\n    ExceptionTypeInfo.prototype.componentDidUpdate = function () {\r\n        //set tyhe call out style based in the exception name width\r\n        this._exceptionTypeSpanWidth = ReactDom.findDOMNode(this.refs.caption).getBoundingClientRect().width;\r\n    };\r\n    /**\r\n     * Render\r\n     */\r\n    ExceptionTypeInfo.prototype.render = function () {\r\n        //setting callout style\r\n        var styleCallout = {\r\n            left: this._exceptionTypeSpanWidth + this._calloutPadding\r\n        };\r\n        var closeException = (!markerOperationModeFactory.operationMode.isTeamManagementMode &&\r\n            this.props.status === enums.ExceptionStatus.Resolved ?\r\n            React.createElement(ExceptionActionButton, { id: 'exception_action_close', key: 'exception_action_close', content: localeStore.instance.TranslateText('generic.response.view-exception-panel.' +\r\n                    enums.ExceptionActionType[enums.ExceptionActionType.Close]), className: 'sprite-icon tick-round-icon', onActionException: this.props.onActionException.bind(this, enums.ExceptionActionType.Close) })\r\n            : null);\r\n        var escalateException = (this.props.isExceptionActionAvailable &&\r\n            (this.props.alternativeEscalationPoint !==\r\n                enums.EscalationPoint.None || !this.props.isPE) ? React.createElement(ExceptionActionButton, { id: 'exception_action_escalate', key: 'exception_action_escalate', content: localeStore.instance.TranslateText('generic.response.view-exception-panel.' +\r\n                enums.ExceptionActionType[enums.ExceptionActionType.Escalate]), className: 'sprite-icon round-arrow-up-icon', onActionException: this.props.onActionException.bind(this, enums.ExceptionActionType.Escalate) })\r\n            : null);\r\n        var resolveException = (this.props.isExceptionActionAvailable ? React.createElement(ExceptionActionButton, { id: 'exception_action_resolve', key: 'exception_action_resolve', content: localeStore.instance.TranslateText('generic.response.view-exception-panel.' +\r\n                enums.ExceptionActionType[enums.ExceptionActionType.Resolve]), className: 'sprite-icon round-arrow-down-icon', onActionException: this.props.onActionException.bind(this, enums.ExceptionActionType.Resolve) })\r\n            : null);\r\n        var actionException = (React.createElement(\"div\", { className: 'exception-header-right' },\r\n            escalateException,\r\n            resolveException,\r\n            closeException));\r\n        return (React.createElement(\"div\", { className: classNames('exception-detail-header  panel', this.state.showExceptionDescription ? 'open' : ''), key: 'key_' + this.props.id },\r\n            React.createElement(\"div\", { className: 'exception-header-row' },\r\n                React.createElement(\"div\", { className: 'exception-header-left' },\r\n                    React.createElement(\"div\", { className: 'exception-type' },\r\n                        React.createElement(\"span\", { ref: 'caption', className: 'exception-type-caption' }, localeStore.instance.TranslateText('generic.exception-types.' +\r\n                            this.props.exceptionTypeId + '.name')),\r\n                        React.createElement(\"span\", { className: 'sprite-icon info-round-icon panel-link', onClick: this.showExceptionDescription }))),\r\n                React.createElement(\"div\", { className: classNames('exception-header-right exception-status-holder dim-text ', this.props.status === enums.ExceptionStatus.Resolved ? 'resolved' : '') },\r\n                    React.createElement(\"div\", { className: 'exception-status' },\r\n                        React.createElement(\"div\", { className: 'exception-status-text', id: 'current_exception_status' }, localeStore.instance.TranslateText('generic.exception-statuses.' +\r\n                            enums.getEnumString(enums.ExceptionStatus, this.props.status).toLowerCase()))))),\r\n            React.createElement(\"div\", { style: styleCallout, className: 'menu-callout' }),\r\n            React.createElement(\"div\", { className: 'panel-content exception-type-info padding-all-15', \"aria-hidden\": 'true' }, localeStore.instance.TranslateText('generic.exception-types.' + this.props.exceptionTypeId + '.details')),\r\n            React.createElement(\"div\", { className: 'exception-header-row' },\r\n                React.createElement(\"div\", { className: 'exception-header-left' },\r\n                    React.createElement(\"div\", { className: 'exception-question' },\r\n                        React.createElement(\"span\", { className: 'dim-text' }, localeStore.instance.TranslateText('marking.response.question')),\r\n                        React.createElement(\"span\", { className: 'question-name' }, this.props.questionName))),\r\n                actionException)));\r\n    };\r\n    /**\r\n     * function to open/close info button\r\n     */\r\n    ExceptionTypeInfo.prototype.showExceptionDescription = function () {\r\n        this.setState({\r\n            showExceptionDescription: this.state.showExceptionDescription === false ? true : false\r\n        });\r\n    };\r\n    return ExceptionTypeInfo;\r\n}(pureRenderComponent));\r\nmodule.exports = ExceptionTypeInfo;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTAxMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2V4Y2VwdGlvbi9leGNlcHRpb250eXBlaW5mby50c3g/ZWIxZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xyXG5pbXBvcnQgUmVhY3REb20gPSByZXF1aXJlKCdyZWFjdC1kb20nKTtcclxuaW1wb3J0IHB1cmVSZW5kZXJDb21wb25lbnQgPSByZXF1aXJlKCcuLi9iYXNlL3B1cmVyZW5kZXJjb21wb25lbnQnKTtcclxuaW1wb3J0IGVudW1zID0gcmVxdWlyZSgnLi4vdXRpbGl0eS9lbnVtcycpO1xyXG5pbXBvcnQgbG9jYWxlU3RvcmUgPSByZXF1aXJlKCcuLi8uLi9zdG9yZXMvbG9jYWxlL2xvY2FsZXN0b3JlJyk7XHJcbmxldCBjbGFzc05hbWVzID0gcmVxdWlyZSgnY2xhc3NuYW1lcycpO1xyXG5pbXBvcnQgRXhjZXB0aW9uQWN0aW9uQnV0dG9uID0gcmVxdWlyZSgnLi9leGNlcHRpb25hY3Rpb25idXR0b24nKTtcclxuaW1wb3J0IG1hcmtlck9wZXJhdGlvbk1vZGVGYWN0b3J5ID0gcmVxdWlyZSgnLi4vdXRpbGl0eS9tYXJrZXJvcGVyYXRpb25tb2RlL21hcmtlcm9wZXJhdGlvbm1vZGVmYWN0b3J5Jyk7XHJcblxyXG5pbnRlcmZhY2UgRXhjZXB0aW9uSW5mb0l0ZW1zIHtcclxuICAgIGV4Y2VwdGlvblR5cGVJZDogbnVtYmVyO1xyXG4gICAgc3RhdHVzOiBudW1iZXI7XHJcbiAgICBtYXJrU2NoZW1lSWQ6IG51bWJlcjtcclxuICAgIGtleTogc3RyaW5nO1xyXG4gICAgaWQ6IHN0cmluZztcclxuICAgIG9uQWN0aW9uRXhjZXB0aW9uOiBGdW5jdGlvbjtcclxuICAgIGlzRXhjZXB0aW9uQWN0aW9uQXZhaWxhYmxlOiBib29sZWFuO1xyXG4gICAgYWx0ZXJuYXRpdmVFc2NhbGF0aW9uUG9pbnQ6IG51bWJlcjtcclxuICAgIGlzUEU6IGJvb2xlYW47XHJcbiAgICBxdWVzdGlvbk5hbWU6IHN0cmluZztcclxufVxyXG5cclxuaW50ZXJmYWNlIFN0YXRlIHtcclxuICAgIHNob3dFeGNlcHRpb25EZXNjcmlwdGlvbj86IGJvb2xlYW47XHJcbn1cclxuXHJcbi8qIHRzbGludDpkaXNhYmxlOnZhcmlhYmxlLW5hbWUgKi9cclxuXHJcbmNsYXNzIEV4Y2VwdGlvblR5cGVJbmZvIGV4dGVuZHMgcHVyZVJlbmRlckNvbXBvbmVudDxhbnksIGFueT4gIHtcclxuICAgIC8qKiByZWZzICovXHJcbiAgICBwdWJsaWMgcmVmczoge1xyXG4gICAgICAgIFtrZXk6IHN0cmluZ106IChFbGVtZW50KTtcclxuICAgICAgICBjYXB0aW9uOiAoSFRNTElucHV0RWxlbWVudCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vZXhjZXB0aW9uIG5hbWUgc3BhbiB3aWR0aFxyXG4gICAgcHJpdmF0ZSBfZXhjZXB0aW9uVHlwZVNwYW5XaWR0aDogbnVtYmVyO1xyXG4gICAgLy9leGNlcHRpb24gZGVzY3JpcHRpb24gY2FsbG91dCBwYWRkaW5nXHJcbiAgICBwcml2YXRlIF9jYWxsb3V0UGFkZGluZzogbnVtYmVyID0gNjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbnN0cnVjdG9yIEV4Y2VwdGlvblR5cGVJbmZvXHJcbiAgICAgKiBAcGFyYW0gcHJvcHNcclxuICAgICAqIEBwYXJhbSBzdGF0ZVxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9wczogRXhjZXB0aW9uSW5mb0l0ZW1zLCBzdGF0ZTogU3RhdGUpIHtcclxuICAgICAgICBzdXBlcihwcm9wcywgc3RhdGUpO1xyXG5cclxuICAgICAgICAvLyBTZXQgdGhlIGRlZmF1bHQgc3RhdGVzXHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgICAgICAgc2hvd0V4Y2VwdGlvbkRlc2NyaXB0aW9uOiBmYWxzZVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuc2hvd0V4Y2VwdGlvbkRlc2NyaXB0aW9uID0gdGhpcy5zaG93RXhjZXB0aW9uRGVzY3JpcHRpb24uYmluZCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbXBvbmVudCB3aWxsIHJlY2VpdmUgcHJvcHNcclxuICAgICAqL1xyXG4gICAgcHVibGljIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMoKSB7XHJcbiAgICAgICAgLy9jbG9zZSB0aGUgZGVzY3JpcHRpb24gd2hlbiB0aGUgY29tcG9uZW50IHJlY2lldmVzIG5ldyBwcm9wc1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBzaG93RXhjZXB0aW9uRGVzY3JpcHRpb246IGZhbHNlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb21wb25lbnQgZGlkIG1vdW50XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBjb21wb25lbnREaWRNb3VudCgpIHtcclxuICAgICAgICAvL3NldCB0eXBlIGNhbGwgb3V0IHN0eWxlIGJhc2VkIGluIHRoZSBleGNlcHRpb24gbmFtZSB3aWR0aFxyXG4gICAgICAgIHRoaXMuX2V4Y2VwdGlvblR5cGVTcGFuV2lkdGggPSBSZWFjdERvbS5maW5kRE9NTm9kZSh0aGlzLnJlZnMuY2FwdGlvbikuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb21wb25lbnQgZGlkIHVwZGF0ZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgY29tcG9uZW50RGlkVXBkYXRlKCkge1xyXG4gICAgICAgIC8vc2V0IHR5aGUgY2FsbCBvdXQgc3R5bGUgYmFzZWQgaW4gdGhlIGV4Y2VwdGlvbiBuYW1lIHdpZHRoXHJcbiAgICAgICAgdGhpcy5fZXhjZXB0aW9uVHlwZVNwYW5XaWR0aCA9IFJlYWN0RG9tLmZpbmRET01Ob2RlKHRoaXMucmVmcy5jYXB0aW9uKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZW5kZXJcclxuICAgICAqL1xyXG4gICAgcHVibGljIHJlbmRlcigpOiBKU1guRWxlbWVudCB7XHJcbiAgICAgICAgLy9zZXR0aW5nIGNhbGxvdXQgc3R5bGVcclxuICAgICAgICBsZXQgc3R5bGVDYWxsb3V0OiBSZWFjdC5DU1NQcm9wZXJ0aWVzID0ge1xyXG4gICAgICAgICAgICBsZWZ0OiB0aGlzLl9leGNlcHRpb25UeXBlU3BhbldpZHRoICsgdGhpcy5fY2FsbG91dFBhZGRpbmdcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBsZXQgY2xvc2VFeGNlcHRpb24gPSAoIW1hcmtlck9wZXJhdGlvbk1vZGVGYWN0b3J5Lm9wZXJhdGlvbk1vZGUuaXNUZWFtTWFuYWdlbWVudE1vZGUgJiZcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5zdGF0dXMgPT09IGVudW1zLkV4Y2VwdGlvblN0YXR1cy5SZXNvbHZlZCA/XHJcbiAgICAgICAgICAgIDxFeGNlcHRpb25BY3Rpb25CdXR0b25cclxuICAgICAgICAgICAgICAgIGlkPXsnZXhjZXB0aW9uX2FjdGlvbl9jbG9zZSd9XHJcbiAgICAgICAgICAgICAgICBrZXk9eydleGNlcHRpb25fYWN0aW9uX2Nsb3NlJ31cclxuICAgICAgICAgICAgICAgIGNvbnRlbnQ9e2xvY2FsZVN0b3JlLmluc3RhbmNlLlRyYW5zbGF0ZVRleHQoJ2dlbmVyaWMucmVzcG9uc2Uudmlldy1leGNlcHRpb24tcGFuZWwuJyArXHJcbiAgICAgICAgICAgICAgICAgICAgZW51bXMuRXhjZXB0aW9uQWN0aW9uVHlwZVtlbnVtcy5FeGNlcHRpb25BY3Rpb25UeXBlLkNsb3NlXSl9XHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9eydzcHJpdGUtaWNvbiB0aWNrLXJvdW5kLWljb24nfVxyXG4gICAgICAgICAgICAgICAgb25BY3Rpb25FeGNlcHRpb249e3RoaXMucHJvcHMub25BY3Rpb25FeGNlcHRpb24uYmluZCh0aGlzLCBlbnVtcy5FeGNlcHRpb25BY3Rpb25UeXBlLkNsb3NlKX0gLz5cclxuICAgICAgICAgICAgOiBudWxsKTtcclxuXHJcbiAgICAgICAgbGV0IGVzY2FsYXRlRXhjZXB0aW9uID0gKHRoaXMucHJvcHMuaXNFeGNlcHRpb25BY3Rpb25BdmFpbGFibGUgJiZcclxuICAgICAgICAgICAgKHRoaXMucHJvcHMuYWx0ZXJuYXRpdmVFc2NhbGF0aW9uUG9pbnQgIT09XHJcbiAgICAgICAgICAgICAgICBlbnVtcy5Fc2NhbGF0aW9uUG9pbnQuTm9uZSB8fCAhdGhpcy5wcm9wcy5pc1BFKSA/IDxFeGNlcHRpb25BY3Rpb25CdXR0b25cclxuICAgICAgICAgICAgICAgIGlkPSdleGNlcHRpb25fYWN0aW9uX2VzY2FsYXRlJ1xyXG4gICAgICAgICAgICAgICAga2V5PSdleGNlcHRpb25fYWN0aW9uX2VzY2FsYXRlJ1xyXG4gICAgICAgICAgICAgICAgY29udGVudD17bG9jYWxlU3RvcmUuaW5zdGFuY2UuVHJhbnNsYXRlVGV4dCgnZ2VuZXJpYy5yZXNwb25zZS52aWV3LWV4Y2VwdGlvbi1wYW5lbC4nICtcclxuICAgICAgICAgICAgICAgICAgICBlbnVtcy5FeGNlcHRpb25BY3Rpb25UeXBlW2VudW1zLkV4Y2VwdGlvbkFjdGlvblR5cGUuRXNjYWxhdGVdKX1cclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nc3ByaXRlLWljb24gcm91bmQtYXJyb3ctdXAtaWNvbidcclxuICAgICAgICAgICAgICAgIG9uQWN0aW9uRXhjZXB0aW9uPXt0aGlzLnByb3BzLm9uQWN0aW9uRXhjZXB0aW9uLmJpbmQodGhpcywgZW51bXMuRXhjZXB0aW9uQWN0aW9uVHlwZS5Fc2NhbGF0ZSl9IC8+XHJcbiAgICAgICAgICAgIDogbnVsbCk7XHJcblxyXG4gICAgICAgIGxldCByZXNvbHZlRXhjZXB0aW9uID0gKHRoaXMucHJvcHMuaXNFeGNlcHRpb25BY3Rpb25BdmFpbGFibGUgPyA8RXhjZXB0aW9uQWN0aW9uQnV0dG9uXHJcbiAgICAgICAgICAgIGlkPSdleGNlcHRpb25fYWN0aW9uX3Jlc29sdmUnXHJcbiAgICAgICAgICAgIGtleT0nZXhjZXB0aW9uX2FjdGlvbl9yZXNvbHZlJ1xyXG4gICAgICAgICAgICBjb250ZW50PXtsb2NhbGVTdG9yZS5pbnN0YW5jZS5UcmFuc2xhdGVUZXh0KCdnZW5lcmljLnJlc3BvbnNlLnZpZXctZXhjZXB0aW9uLXBhbmVsLicgK1xyXG4gICAgICAgICAgICAgICAgZW51bXMuRXhjZXB0aW9uQWN0aW9uVHlwZVtlbnVtcy5FeGNlcHRpb25BY3Rpb25UeXBlLlJlc29sdmVdKX1cclxuICAgICAgICAgICAgY2xhc3NOYW1lPSdzcHJpdGUtaWNvbiByb3VuZC1hcnJvdy1kb3duLWljb24nXHJcbiAgICAgICAgICAgIG9uQWN0aW9uRXhjZXB0aW9uPXt0aGlzLnByb3BzLm9uQWN0aW9uRXhjZXB0aW9uLmJpbmQodGhpcywgZW51bXMuRXhjZXB0aW9uQWN0aW9uVHlwZS5SZXNvbHZlKX0gLz5cclxuICAgICAgICAgICAgOiBudWxsKTtcclxuXHJcbiAgICAgICAgbGV0IGFjdGlvbkV4Y2VwdGlvbiA9ICg8ZGl2IGNsYXNzTmFtZT0nZXhjZXB0aW9uLWhlYWRlci1yaWdodCc+XHJcbiAgICAgICAgICAgIHtlc2NhbGF0ZUV4Y2VwdGlvbn1cclxuICAgICAgICAgICAge3Jlc29sdmVFeGNlcHRpb259XHJcbiAgICAgICAgICAgIHtjbG9zZUV4Y2VwdGlvbn1cclxuICAgICAgICA8L2Rpdj4pO1xyXG5cclxuICAgICAgICByZXR1cm4gKDxkaXYgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdleGNlcHRpb24tZGV0YWlsLWhlYWRlciAgcGFuZWwnLFxyXG4gICAgICAgICAgICB0aGlzLnN0YXRlLnNob3dFeGNlcHRpb25EZXNjcmlwdGlvbiA/ICdvcGVuJyA6ICcnKX0ga2V5PXsna2V5XycgKyB0aGlzLnByb3BzLmlkfT5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2V4Y2VwdGlvbi1oZWFkZXItcm93Jz5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdleGNlcHRpb24taGVhZGVyLWxlZnQnPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdleGNlcHRpb24tdHlwZSc+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIHJlZj17J2NhcHRpb24nfSBjbGFzc05hbWU9J2V4Y2VwdGlvbi10eXBlLWNhcHRpb24nPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2xvY2FsZVN0b3JlLmluc3RhbmNlLlRyYW5zbGF0ZVRleHQoJ2dlbmVyaWMuZXhjZXB0aW9uLXR5cGVzLicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuZXhjZXB0aW9uVHlwZUlkICsgJy5uYW1lJyl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSdzcHJpdGUtaWNvbiBpbmZvLXJvdW5kLWljb24gcGFuZWwtbGluaycgb25DbGljaz17dGhpcy5zaG93RXhjZXB0aW9uRGVzY3JpcHRpb259PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+PC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdleGNlcHRpb24taGVhZGVyLXJpZ2h0IGV4Y2VwdGlvbi1zdGF0dXMtaG9sZGVyIGRpbS10ZXh0ICcsXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5zdGF0dXMgPT09IGVudW1zLkV4Y2VwdGlvblN0YXR1cy5SZXNvbHZlZCA/ICdyZXNvbHZlZCcgOiAnJyl9PlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdleGNlcHRpb24tc3RhdHVzJz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2V4Y2VwdGlvbi1zdGF0dXMtdGV4dCcgaWQ9J2N1cnJlbnRfZXhjZXB0aW9uX3N0YXR1cyc+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bG9jYWxlU3RvcmUuaW5zdGFuY2UuVHJhbnNsYXRlVGV4dCgnZ2VuZXJpYy5leGNlcHRpb24tc3RhdHVzZXMuJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW51bXMuZ2V0RW51bVN0cmluZyhlbnVtcy5FeGNlcHRpb25TdGF0dXMsIHRoaXMucHJvcHMuc3RhdHVzKS50b0xvd2VyQ2FzZSgpKX08L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiBzdHlsZT17c3R5bGVDYWxsb3V0fSBjbGFzc05hbWU9J21lbnUtY2FsbG91dCc+PC9kaXY+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdwYW5lbC1jb250ZW50IGV4Y2VwdGlvbi10eXBlLWluZm8gcGFkZGluZy1hbGwtMTUnIGFyaWEtaGlkZGVuPSd0cnVlJz5cclxuICAgICAgICAgICAgICAgIHtsb2NhbGVTdG9yZS5pbnN0YW5jZS5UcmFuc2xhdGVUZXh0KCdnZW5lcmljLmV4Y2VwdGlvbi10eXBlcy4nICsgdGhpcy5wcm9wcy5leGNlcHRpb25UeXBlSWQgKyAnLmRldGFpbHMnKX1cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdleGNlcHRpb24taGVhZGVyLXJvdyc+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZXhjZXB0aW9uLWhlYWRlci1sZWZ0Jz5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZXhjZXB0aW9uLXF1ZXN0aW9uJz48c3BhbiBjbGFzc05hbWU9J2RpbS10ZXh0Jz5cclxuICAgICAgICAgICAgICAgICAgICAgICAge2xvY2FsZVN0b3JlLmluc3RhbmNlLlRyYW5zbGF0ZVRleHRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICgnbWFya2luZy5yZXNwb25zZS5xdWVzdGlvbicpfTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSdxdWVzdGlvbi1uYW1lJz57dGhpcy5wcm9wcy5xdWVzdGlvbk5hbWV9PC9zcGFuPjwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICB7YWN0aW9uRXhjZXB0aW9ufVxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj4pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogZnVuY3Rpb24gdG8gb3Blbi9jbG9zZSBpbmZvIGJ1dHRvblxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHNob3dFeGNlcHRpb25EZXNjcmlwdGlvbigpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgc2hvd0V4Y2VwdGlvbkRlc2NyaXB0aW9uOiB0aGlzLnN0YXRlLnNob3dFeGNlcHRpb25EZXNjcmlwdGlvbiA9PT0gZmFsc2UgPyB0cnVlIDogZmFsc2VcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5leHBvcnQgPSBFeGNlcHRpb25UeXBlSW5mbztcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L3NvdXJjZS1tYXAtbG9hZGVyIS4vc3JjL2NvbXBvbmVudHMvZXhjZXB0aW9uL2V4Y2VwdGlvbnR5cGVpbmZvLnRzeCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBbUJBO0FBRUE7QUFBQTtBQVlBOzs7O0FBSUE7QUFDQTtBQUFBO0FBUkE7QUFDQTtBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBSUE7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUlBO0FBR0E7QUFFQTtBQUlBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBR0E7QUFFQTtBQUNBO0FBRUE7QUFJQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFHQTtBQUVBO0FBR0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9");

/***/ }),

/***/ 459:
/* no static exports found */
/* all exports used */
/*!********************************************************************!*\
  !*** ./src/components/utility/message/messagetranslationhelper.ts ***!
  \********************************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar localeStore = __webpack_require__(/*! ../../../stores/locale/localestore */ 226);\r\nvar stringHelper = __webpack_require__(/*! ../../../utility/generic/stringhelper */ 254);\r\nvar messageHelper = __webpack_require__(/*! ./messagehelper */ 283);\r\nvar constants = __webpack_require__(/*! ../constants */ 241);\r\nvar messageTranslationHandlerConstants = __webpack_require__(/*! ../messagetranslationhandlerconstants */ 520);\r\nvar enums = __webpack_require__(/*! ../enums */ 225);\r\nvar MessageTranslationHelper = /** @class */ (function () {\r\n    function MessageTranslationHelper() {\r\n    }\r\n    /**\r\n     * This method will return the translated content for translatable system messages from language json file other wise it will return\r\n     * the normal message contents.\r\n     * @param message\r\n     */\r\n    MessageTranslationHelper.getTranslatedContent = function (message) {\r\n        var translatedMessageContent;\r\n        // if examBodyMessageTypeId is null then return loaded subject and content\r\n        if (!message.examBodyMessageTypeId || message.examBodyMessageTypeId === enums.SystemMessage.None) {\r\n            translatedMessageContent = {\r\n                subject: message.subject,\r\n                content: message.messageBody,\r\n                firstLine: message.examinerMessageBodyFirstLine\r\n            };\r\n        }\r\n        else {\r\n            translatedMessageContent = this.translate(message.examBodyMessageTypeId, this.getParameterForMessageTranslation(message));\r\n            if (translatedMessageContent.subject === undefined || translatedMessageContent.content === undefined) {\r\n                translatedMessageContent.subject = message.subject;\r\n                translatedMessageContent.content = message.messageBody;\r\n                translatedMessageContent.firstLine = message.examinerMessageBodyFirstLine;\r\n            }\r\n        }\r\n        return translatedMessageContent;\r\n    };\r\n    /**\r\n     * Returns the translated message contents\r\n     * @param systemMessageType\r\n     * @param parameters: string array for replacing place holders\r\n     */\r\n    MessageTranslationHelper.translate = function (systemMessageType, parameters) {\r\n        var subject;\r\n        var content;\r\n        if (systemMessageType !== null && systemMessageType !== enums.SystemMessage.None) {\r\n            // if system message is Automated marker message and metadata is offHold then we have to display offHold message content\r\n            var contentKey = systemMessageType === enums.SystemMessage.AutomatedMarkerMessage ?\r\n                parameters[1].trim() === 'OnHold' ? '.content-removed' : parameters[1].trim() === 'Removed' ?\r\n                    '.content-permanently-removed' : '.content-replaced' : '.content';\r\n            subject = stringHelper.format(localeStore.instance.TranslateText('messaging.system-messages.' + systemMessageType + '.subject'), parameters);\r\n            content = stringHelper.format(localeStore.instance.TranslateText('messaging.system-messages.' + systemMessageType + contentKey), parameters);\r\n        }\r\n        return { subject: subject, content: content, firstLine: this.getMessageBodyFirstLine(content) };\r\n    };\r\n    /**\r\n     * Return the from examiner name or 'System Message' text\r\n     * @param message\r\n     */\r\n    MessageTranslationHelper.getExaminerName = function (message) {\r\n        var examinerFullName;\r\n        var systemMessageType = !message.examBodyMessageTypeId ? enums.SystemMessage.None :\r\n            message.examBodyMessageTypeId;\r\n        // system messages having their From username shown as system message\r\n        switch (systemMessageType) {\r\n            case enums.SystemMessage.AutomaticSamplingCompleted:\r\n            case enums.SystemMessage.DeAllocationRemarkResponseRemoved:\r\n            case enums.SystemMessage.MarkingInstructionUpdated:\r\n            case enums.SystemMessage.MarkingInstructionUploaded:\r\n            case enums.SystemMessage.RIGRemoved:\r\n            case enums.SystemMessage.RemarkDeleted:\r\n            case enums.SystemMessage.GracePeriodUpdate:\r\n            case enums.SystemMessage.RefreshMarkingTargets:\r\n                examinerFullName = localeStore.instance.TranslateText('messaging.message-lists.message-detail.system-message');\r\n                break;\r\n            default:\r\n                examinerFullName = message.examinerDetails.fullName;\r\n        }\r\n        return examinerFullName;\r\n    };\r\n    /**\r\n     * This method will returns the build replacing parameters\r\n     * @param message: message contents\r\n     */\r\n    MessageTranslationHelper.getParameterForMessageTranslation = function (message) {\r\n        var parameters = new Array();\r\n        var systemMessageType = !message.examBodyMessageTypeId ? enums.SystemMessage.None :\r\n            message.examBodyMessageTypeId;\r\n        switch (systemMessageType) {\r\n            // QIG\r\n            case enums.SystemMessage.AutoApprovedMarker:\r\n            case enums.SystemMessage.AutoApprovedReviewer:\r\n            case enums.SystemMessage.AutoApprovedSystem:\r\n            case enums.SystemMessage.ConditionallyApprovedMarker:\r\n            case enums.SystemMessage.ConditionallyApprovedReviewer:\r\n            case enums.SystemMessage.ConditionallyApprovedSystem:\r\n            case enums.SystemMessage.AutoSuspendMarker:\r\n            case enums.SystemMessage.AutoSuspendReviewer:\r\n            case enums.SystemMessage.CheckMyMarks:\r\n            case enums.SystemMessage.LockedExaminerWithDrawn:\r\n                parameters.push(messageHelper.getDisplayText(message));\r\n                break;\r\n            case enums.SystemMessage.MarkingInstructionUpdated:\r\n            case enums.SystemMessage.MarkingInstructionUploaded:\r\n                parameters.push(this.getMarkingInstructionParameters(message));\r\n                break;\r\n            // Display ID\r\n            case enums.SystemMessage.AutomatedMarkerMessage:\r\n            case enums.SystemMessage.ZoningExceptionRaised:\r\n            case enums.SystemMessage.ZoningExceptionResolved:\r\n                parameters.push(this.getDisplayId(message));\r\n                parameters.push(message.bodyMetadata);\r\n                break;\r\n            case enums.SystemMessage.CandidateFeedUpdated:\r\n                parameters.push(this.getDisplayId(message));\r\n                break;\r\n            // QIG and DisplayId\r\n            case enums.SystemMessage.RIGRemoved:\r\n                parameters.push(this.getDisplayId(message));\r\n                // pushing the qig name\r\n                parameters.push(messageHelper.getDisplayText(message));\r\n                break;\r\n            // QIG and Targets\r\n            case enums.SystemMessage.RefreshMarkingTargets:\r\n                parameters.push(messageHelper.getDisplayText(message));\r\n                // pushing targets\r\n                var targets = this.getTargets(message);\r\n                parameters.push(targets);\r\n                break;\r\n            case enums.SystemMessage.GracePeriodUpdate:\r\n                parameters.push(messageHelper.getDisplayText(message));\r\n                // pushing grace period details\r\n                var gracePeriodDetails = new Array();\r\n                gracePeriodDetails = this.getGracePeriodDetails(message);\r\n                for (var i = 0; i < gracePeriodDetails.length; i++) {\r\n                    parameters.push(gracePeriodDetails[i]);\r\n                }\r\n                break;\r\n            // Approval status required current, from and to\r\n            case enums.SystemMessage.IndirectSubordinateStatusUpdate:\r\n                // pushing approval status\r\n                var statusDetails = new Array();\r\n                statusDetails = this.getStatus(message);\r\n                for (var i = 0; i < statusDetails.length; i++) {\r\n                    parameters.push(statusDetails[i]);\r\n                }\r\n                break;\r\n            // DisplayID and question item.\r\n            case enums.SystemMessage.RemarkDeleted:\r\n                parameters.push(this.getDisplayId(message));\r\n                // push mark scheme group name\r\n                parameters.push(messageHelper.getMarkSchemeGroupName(message));\r\n                break;\r\n            case enums.SystemMessage.DeAllocationRemarkResponseRemoved:\r\n                // pushing the qig name\r\n                parameters.push(messageHelper.getDisplayText(message));\r\n                break;\r\n            case enums.SystemMessage.MarksChecked:\r\n                parameters.push(messageHelper.getMarkSchemeGroupName(message));\r\n                break;\r\n            case enums.SystemMessage.RemarkRequestedCompleted:\r\n                // parameters are not required as per current template\r\n                break;\r\n            // 9 - Message Template is not available\r\n            case enums.SystemMessage.RefreshQuestionPaperStructure:\r\n            // 15 - Message Template is not available\r\n            case enums.SystemMessage.AutomaticSamplingCompleted:\r\n            // 27 - Message Template is not available\r\n            case enums.SystemMessage.TakeResponse:\r\n                // pushing take response details\r\n                var takeResponseDetails = new Array();\r\n                takeResponseDetails = this.getMetaDataDetails(message);\r\n                for (var i = 0; i < takeResponseDetails.length; i++) {\r\n                    parameters.push(takeResponseDetails[i]);\r\n                }\r\n                break;\r\n        }\r\n        return parameters;\r\n    };\r\n    /**\r\n     * Returns message body first line based on the no of words\r\n     * @param messageBody\r\n     * @param noOfWords\r\n     */\r\n    MessageTranslationHelper.getMessageBodyFirstLine = function (messageBody) {\r\n        var messageBodyFirstLine = '';\r\n        if (messageBody !== undefined || messageBody !== '') {\r\n            messageBodyFirstLine = messageBody.split(' ', constants.MAX_MESSAGE_BODY_FIRST_LINE_WORDS).join(' ');\r\n        }\r\n        return messageBodyFirstLine;\r\n    };\r\n    /**\r\n     * Get targets from message metadata for RefreshMarkingTargets system message\r\n     * Marking Target update handler\r\n     * @param message\r\n     */\r\n    MessageTranslationHelper.getTargets = function (message) {\r\n        var targetCollection = new Array();\r\n        var bodyMetaParameters = this.getMessageBodyMetaParameters(message, ';', '=');\r\n        var targets = bodyMetaParameters[messageTranslationHandlerConstants.TARGETS_DICTIONARY].split(',');\r\n        var target;\r\n        for (var i = 0; i < targets.length; i++) {\r\n            if (targets[i] !== '') {\r\n                target = targets[i].replace('TargetType_', '');\r\n                switch (target) {\r\n                    case 'STMStandardisationMarking':\r\n                        target = 'ES_TeamApproval';\r\n                        break;\r\n                    case 'SecondStandardisation':\r\n                        target = 'SecondStandardisation';\r\n                        break;\r\n                    case 'Live':\r\n                        target = 'LiveMarking';\r\n                        break;\r\n                    case 'Standardisation':\r\n                        target = 'Approval';\r\n                        break;\r\n                    default:\r\n                        break;\r\n                }\r\n                targetCollection.push(localeStore.instance.TranslateText('generic.marking-modes.' + target));\r\n            }\r\n        }\r\n        var remarkTargets = bodyMetaParameters[messageTranslationHandlerConstants.REMARKTARGETS_DICTIONARY].split(',');\r\n        for (var i = 0; i < remarkTargets.length; i++) {\r\n            if (remarkTargets[i] !== '') {\r\n                targetCollection.push(localeStore.instance.TranslateText('generic.remark-types.long-names.' + remarkTargets[i]));\r\n            }\r\n        }\r\n        // return comma seperated targets\r\n        return targetCollection.join(', ');\r\n    };\r\n    /**\r\n     * Get Indirect Subordinate status from message metadata for IndirectSubordinateStatusUpdate system message\r\n     * IndirectSubordinateStatusUpdateHandler\r\n     * @param message\r\n     */\r\n    MessageTranslationHelper.getStatus = function (message) {\r\n        var targetCollection = new Array();\r\n        var bodyMetaParameters = this.getMessageBodyMetaParameters(message, ';', '=');\r\n        var markerName = bodyMetaParameters[messageTranslationHandlerConstants.MARKER];\r\n        targetCollection.push(markerName);\r\n        var oldApprovalStatus = parseInt(bodyMetaParameters[messageTranslationHandlerConstants.OLD_STATUS]);\r\n        targetCollection.push(localeStore.instance.TranslateText('generic.approval-statuses.' +\r\n            enums.getEnumString(enums.ExaminerApproval, oldApprovalStatus)));\r\n        var newApprovalStatus = parseInt(bodyMetaParameters[messageTranslationHandlerConstants.NEW_STATUS]);\r\n        targetCollection.push(localeStore.instance.TranslateText('generic.approval-statuses.' +\r\n            enums.getEnumString(enums.ExaminerApproval, newApprovalStatus)));\r\n        return targetCollection;\r\n    };\r\n    /**\r\n     * get details from the body metadata string.\r\n     * @param message\r\n     */\r\n    MessageTranslationHelper.getMetaDataDetails = function (message) {\r\n        var dataCollection = new Array();\r\n        var metaDataDetails = this.getMessageBodyMetaParameters(message, '#', ':');\r\n        if (metaDataDetails) {\r\n            var displayID = parseFloat(metaDataDetails[messageTranslationHandlerConstants.DISPLAY_ID]);\r\n            dataCollection.push(displayID.toString());\r\n            var worklistType = metaDataDetails[messageTranslationHandlerConstants.WORKLIST_TYPE];\r\n            dataCollection.push(worklistType.toString());\r\n            var exceptionType = metaDataDetails[messageTranslationHandlerConstants.EXCEPTION_TYPE];\r\n            dataCollection.push(exceptionType.toString());\r\n            var seniorExaminerName = metaDataDetails[messageTranslationHandlerConstants.SENIOR_EXAMINER_NAME];\r\n            dataCollection.push(seniorExaminerName.toString());\r\n        }\r\n        return dataCollection;\r\n    };\r\n    /**\r\n     * Get Grace period details from message metadata for grace period update system message\r\n     * IndirectSubordinateStatusUpdateHandler\r\n     * @param message\r\n     */\r\n    MessageTranslationHelper.getGracePeriodDetails = function (message) {\r\n        var targetCollection = new Array();\r\n        var bodyMetaParameters = this.getMessageBodyMetaParameters(message, ';', '=');\r\n        var oldGracePeriod = parseFloat(bodyMetaParameters[messageTranslationHandlerConstants.OLD_GRACE_PERIOD]);\r\n        targetCollection.push(oldGracePeriod.toString());\r\n        var newGracePeriod = parseFloat(bodyMetaParameters[messageTranslationHandlerConstants.NEW_GRACE_PERIOD]);\r\n        targetCollection.push(newGracePeriod.toString());\r\n        return targetCollection;\r\n    };\r\n    /**\r\n     * This method will process message metadata string\r\n     * @param message\r\n     */\r\n    MessageTranslationHelper.getMessageBodyMetaParameters = function (message, splitter1, splitter2) {\r\n        var bodyMetaParameters = new Object();\r\n        if (message.bodyMetadata != null && message.bodyMetadata !== undefined) {\r\n            var pairs = message.bodyMetadata.split(splitter1);\r\n            for (var i = 0; i < pairs.length; i++) {\r\n                if (pairs[i].trim().length === 0) {\r\n                    continue;\r\n                }\r\n                var bits = pairs[i].split(splitter2);\r\n                if (bits.length < 2 || bits[0].length === 0) {\r\n                    continue;\r\n                }\r\n                bodyMetaParameters[bits[0]] = bits[1];\r\n            }\r\n        }\r\n        return bodyMetaParameters;\r\n    };\r\n    /**\r\n     * This will return the displayId with prefix '6'\r\n     * @param message\r\n     */\r\n    MessageTranslationHelper.getDisplayId = function (message) {\r\n        return '6' + message.relatedResponseDisplayId.toString();\r\n    };\r\n    /**\r\n     * This will return string for particular enum value from resource file\r\n     * @param sampleReivewComment\r\n     */\r\n    MessageTranslationHelper.getCustomEnumString = function (sampleReivewComment, buttonType) {\r\n        switch (buttonType) {\r\n            case enums.ButtonType.Sampling:\r\n                return localeStore.instance.\r\n                    TranslateText('team-management.response.supervisor-sampling-comments.' + sampleReivewComment);\r\n            case enums.ButtonType.SetAsReviewed:\r\n                return localeStore.instance.\r\n                    TranslateText('team-management.response.review-comments.' + sampleReivewComment);\r\n        }\r\n    };\r\n    /**\r\n     * gets the message body parameters for marking instructions file upload mandatory message\r\n     * @param message\r\n     */\r\n    MessageTranslationHelper.getMarkingInstructionParameters = function (message) {\r\n        var bodyMetaData = message.bodyMetadata.split('|');\r\n        // if message body metadata has 4 items then it is in QIG level, and has one more parameter to represent QIG name\r\n        if (bodyMetaData.length === 4) {\r\n            return (bodyMetaData[0] + ' - ' + bodyMetaData[1] + ' - ' + bodyMetaData[2]);\r\n        }\r\n        else if (bodyMetaData.length === 3) {\r\n            return (bodyMetaData[0] + ' - ' + bodyMetaData[1]);\r\n        }\r\n    };\r\n    return MessageTranslationHelper;\r\n}());\r\nmodule.exports = MessageTranslationHelper;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDU5LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvdXRpbGl0eS9tZXNzYWdlL21lc3NhZ2V0cmFuc2xhdGlvbmhlbHBlci50cz9mYjNlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBsb2NhbGVoZWxwZXIgPSByZXF1aXJlKCcuLi8uLi8uLi91dGlsaXR5L2xvY2FsZS9sb2NhbGVoZWxwZXInKTtcclxuaW1wb3J0IGxvY2FsZVN0b3JlID0gcmVxdWlyZSgnLi4vLi4vLi4vc3RvcmVzL2xvY2FsZS9sb2NhbGVzdG9yZScpO1xyXG5pbXBvcnQgc3RyaW5nSGVscGVyID0gcmVxdWlyZSgnLi4vLi4vLi4vdXRpbGl0eS9nZW5lcmljL3N0cmluZ2hlbHBlcicpO1xyXG5pbXBvcnQgbWVzc2FnZUhlbHBlciA9IHJlcXVpcmUoJy4vbWVzc2FnZWhlbHBlcicpO1xyXG5pbXBvcnQgY29uc3RhbnRzID0gcmVxdWlyZSgnLi4vY29uc3RhbnRzJyk7XHJcbmltcG9ydCBtZXNzYWdlVHJhbnNsYXRpb25IYW5kbGVyQ29uc3RhbnRzID0gcmVxdWlyZSgnLi4vbWVzc2FnZXRyYW5zbGF0aW9uaGFuZGxlcmNvbnN0YW50cycpO1xyXG5pbXBvcnQgZW51bXMgPSByZXF1aXJlKCcuLi9lbnVtcycpO1xyXG5cclxuY2xhc3MgTWVzc2FnZVRyYW5zbGF0aW9uSGVscGVyIHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgbWV0aG9kIHdpbGwgcmV0dXJuIHRoZSB0cmFuc2xhdGVkIGNvbnRlbnQgZm9yIHRyYW5zbGF0YWJsZSBzeXN0ZW0gbWVzc2FnZXMgZnJvbSBsYW5ndWFnZSBqc29uIGZpbGUgb3RoZXIgd2lzZSBpdCB3aWxsIHJldHVyblxyXG4gICAgICogdGhlIG5vcm1hbCBtZXNzYWdlIGNvbnRlbnRzLlxyXG4gICAgICogQHBhcmFtIG1lc3NhZ2VcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBnZXRUcmFuc2xhdGVkQ29udGVudChtZXNzYWdlOiBNZXNzYWdlKTogVHJhbnNsYXRlZE1lc3NhZ2VDb250ZW50IHtcclxuICAgICAgICBsZXQgdHJhbnNsYXRlZE1lc3NhZ2VDb250ZW50OiBUcmFuc2xhdGVkTWVzc2FnZUNvbnRlbnQ7XHJcbiAgICAgICAgLy8gaWYgZXhhbUJvZHlNZXNzYWdlVHlwZUlkIGlzIG51bGwgdGhlbiByZXR1cm4gbG9hZGVkIHN1YmplY3QgYW5kIGNvbnRlbnRcclxuICAgICAgICBpZiAoIW1lc3NhZ2UuZXhhbUJvZHlNZXNzYWdlVHlwZUlkIHx8IG1lc3NhZ2UuZXhhbUJvZHlNZXNzYWdlVHlwZUlkID09PSBlbnVtcy5TeXN0ZW1NZXNzYWdlLk5vbmUpIHtcclxuICAgICAgICAgICAgdHJhbnNsYXRlZE1lc3NhZ2VDb250ZW50ID0ge1xyXG4gICAgICAgICAgICAgICAgc3ViamVjdDogbWVzc2FnZS5zdWJqZWN0LFxyXG4gICAgICAgICAgICAgICAgY29udGVudDogbWVzc2FnZS5tZXNzYWdlQm9keSxcclxuICAgICAgICAgICAgICAgIGZpcnN0TGluZTogbWVzc2FnZS5leGFtaW5lck1lc3NhZ2VCb2R5Rmlyc3RMaW5lXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdHJhbnNsYXRlZE1lc3NhZ2VDb250ZW50ID0gdGhpcy50cmFuc2xhdGUobWVzc2FnZS5leGFtQm9keU1lc3NhZ2VUeXBlSWQsIHRoaXMuZ2V0UGFyYW1ldGVyRm9yTWVzc2FnZVRyYW5zbGF0aW9uKG1lc3NhZ2UpKTtcclxuICAgICAgICAgICAgaWYgKHRyYW5zbGF0ZWRNZXNzYWdlQ29udGVudC5zdWJqZWN0ID09PSB1bmRlZmluZWQgfHwgdHJhbnNsYXRlZE1lc3NhZ2VDb250ZW50LmNvbnRlbnQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgdHJhbnNsYXRlZE1lc3NhZ2VDb250ZW50LnN1YmplY3QgPSBtZXNzYWdlLnN1YmplY3Q7XHJcbiAgICAgICAgICAgICAgICB0cmFuc2xhdGVkTWVzc2FnZUNvbnRlbnQuY29udGVudCA9IG1lc3NhZ2UubWVzc2FnZUJvZHk7XHJcbiAgICAgICAgICAgICAgICB0cmFuc2xhdGVkTWVzc2FnZUNvbnRlbnQuZmlyc3RMaW5lID0gbWVzc2FnZS5leGFtaW5lck1lc3NhZ2VCb2R5Rmlyc3RMaW5lO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdHJhbnNsYXRlZE1lc3NhZ2VDb250ZW50O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgdHJhbnNsYXRlZCBtZXNzYWdlIGNvbnRlbnRzXHJcbiAgICAgKiBAcGFyYW0gc3lzdGVtTWVzc2FnZVR5cGVcclxuICAgICAqIEBwYXJhbSBwYXJhbWV0ZXJzOiBzdHJpbmcgYXJyYXkgZm9yIHJlcGxhY2luZyBwbGFjZSBob2xkZXJzXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgc3RhdGljIHRyYW5zbGF0ZShzeXN0ZW1NZXNzYWdlVHlwZTogZW51bXMuU3lzdGVtTWVzc2FnZSwgcGFyYW1ldGVyczogc3RyaW5nW10pOiBUcmFuc2xhdGVkTWVzc2FnZUNvbnRlbnQge1xyXG4gICAgICAgIGxldCBzdWJqZWN0OiBzdHJpbmc7XHJcbiAgICAgICAgbGV0IGNvbnRlbnQ6IHN0cmluZztcclxuICAgICAgICBpZiAoc3lzdGVtTWVzc2FnZVR5cGUgIT09IG51bGwgJiYgc3lzdGVtTWVzc2FnZVR5cGUgIT09IGVudW1zLlN5c3RlbU1lc3NhZ2UuTm9uZSkge1xyXG4gICAgICAgICAgICAvLyBpZiBzeXN0ZW0gbWVzc2FnZSBpcyBBdXRvbWF0ZWQgbWFya2VyIG1lc3NhZ2UgYW5kIG1ldGFkYXRhIGlzIG9mZkhvbGQgdGhlbiB3ZSBoYXZlIHRvIGRpc3BsYXkgb2ZmSG9sZCBtZXNzYWdlIGNvbnRlbnRcclxuICAgICAgICAgICAgbGV0IGNvbnRlbnRLZXk6IHN0cmluZyA9IHN5c3RlbU1lc3NhZ2VUeXBlID09PSBlbnVtcy5TeXN0ZW1NZXNzYWdlLkF1dG9tYXRlZE1hcmtlck1lc3NhZ2UgP1xyXG4gICAgICAgICAgICAgICAgcGFyYW1ldGVyc1sxXS50cmltKCkgPT09ICdPbkhvbGQnID8gJy5jb250ZW50LXJlbW92ZWQnIDogcGFyYW1ldGVyc1sxXS50cmltKCkgPT09ICdSZW1vdmVkJyA/XHJcbiAgICAgICAgICAgICAgICAgICAgJy5jb250ZW50LXBlcm1hbmVudGx5LXJlbW92ZWQnIDogJy5jb250ZW50LXJlcGxhY2VkJyA6ICcuY29udGVudCc7XHJcblxyXG4gICAgICAgICAgICBzdWJqZWN0ID0gc3RyaW5nSGVscGVyLmZvcm1hdChcclxuICAgICAgICAgICAgICAgIGxvY2FsZVN0b3JlLmluc3RhbmNlLlRyYW5zbGF0ZVRleHQoJ21lc3NhZ2luZy5zeXN0ZW0tbWVzc2FnZXMuJyArIHN5c3RlbU1lc3NhZ2VUeXBlICsgJy5zdWJqZWN0JyksXHJcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnRlbnQgPSBzdHJpbmdIZWxwZXIuZm9ybWF0KFxyXG4gICAgICAgICAgICAgICAgbG9jYWxlU3RvcmUuaW5zdGFuY2UuVHJhbnNsYXRlVGV4dCgnbWVzc2FnaW5nLnN5c3RlbS1tZXNzYWdlcy4nICsgc3lzdGVtTWVzc2FnZVR5cGUgKyBjb250ZW50S2V5KSxcclxuICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHsgc3ViamVjdDogc3ViamVjdCwgY29udGVudDogY29udGVudCwgZmlyc3RMaW5lOiB0aGlzLmdldE1lc3NhZ2VCb2R5Rmlyc3RMaW5lKGNvbnRlbnQpIH07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm4gdGhlIGZyb20gZXhhbWluZXIgbmFtZSBvciAnU3lzdGVtIE1lc3NhZ2UnIHRleHRcclxuICAgICAqIEBwYXJhbSBtZXNzYWdlXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0RXhhbWluZXJOYW1lKG1lc3NhZ2U6IE1lc3NhZ2UpIHtcclxuICAgICAgICBsZXQgZXhhbWluZXJGdWxsTmFtZTogc3RyaW5nO1xyXG4gICAgICAgIGxldCBzeXN0ZW1NZXNzYWdlVHlwZTogZW51bXMuU3lzdGVtTWVzc2FnZSA9ICFtZXNzYWdlLmV4YW1Cb2R5TWVzc2FnZVR5cGVJZCA/IGVudW1zLlN5c3RlbU1lc3NhZ2UuTm9uZSA6XHJcbiAgICAgICAgICAgIG1lc3NhZ2UuZXhhbUJvZHlNZXNzYWdlVHlwZUlkO1xyXG4gICAgICAgIC8vIHN5c3RlbSBtZXNzYWdlcyBoYXZpbmcgdGhlaXIgRnJvbSB1c2VybmFtZSBzaG93biBhcyBzeXN0ZW0gbWVzc2FnZVxyXG4gICAgICAgIHN3aXRjaCAoc3lzdGVtTWVzc2FnZVR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSBlbnVtcy5TeXN0ZW1NZXNzYWdlLkF1dG9tYXRpY1NhbXBsaW5nQ29tcGxldGVkOlxyXG4gICAgICAgICAgICBjYXNlIGVudW1zLlN5c3RlbU1lc3NhZ2UuRGVBbGxvY2F0aW9uUmVtYXJrUmVzcG9uc2VSZW1vdmVkOlxyXG4gICAgICAgICAgICBjYXNlIGVudW1zLlN5c3RlbU1lc3NhZ2UuTWFya2luZ0luc3RydWN0aW9uVXBkYXRlZDpcclxuICAgICAgICAgICAgY2FzZSBlbnVtcy5TeXN0ZW1NZXNzYWdlLk1hcmtpbmdJbnN0cnVjdGlvblVwbG9hZGVkOlxyXG4gICAgICAgICAgICBjYXNlIGVudW1zLlN5c3RlbU1lc3NhZ2UuUklHUmVtb3ZlZDpcclxuICAgICAgICAgICAgY2FzZSBlbnVtcy5TeXN0ZW1NZXNzYWdlLlJlbWFya0RlbGV0ZWQ6XHJcbiAgICAgICAgICAgIGNhc2UgZW51bXMuU3lzdGVtTWVzc2FnZS5HcmFjZVBlcmlvZFVwZGF0ZTpcclxuICAgICAgICAgICAgY2FzZSBlbnVtcy5TeXN0ZW1NZXNzYWdlLlJlZnJlc2hNYXJraW5nVGFyZ2V0czpcclxuICAgICAgICAgICAgICAgIGV4YW1pbmVyRnVsbE5hbWUgPSBsb2NhbGVTdG9yZS5pbnN0YW5jZS5UcmFuc2xhdGVUZXh0KCdtZXNzYWdpbmcubWVzc2FnZS1saXN0cy5tZXNzYWdlLWRldGFpbC5zeXN0ZW0tbWVzc2FnZScpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBleGFtaW5lckZ1bGxOYW1lID0gbWVzc2FnZS5leGFtaW5lckRldGFpbHMuZnVsbE5hbWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZXhhbWluZXJGdWxsTmFtZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgbWV0aG9kIHdpbGwgcmV0dXJucyB0aGUgYnVpbGQgcmVwbGFjaW5nIHBhcmFtZXRlcnNcclxuICAgICAqIEBwYXJhbSBtZXNzYWdlOiBtZXNzYWdlIGNvbnRlbnRzXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgc3RhdGljIGdldFBhcmFtZXRlckZvck1lc3NhZ2VUcmFuc2xhdGlvbihtZXNzYWdlOiBNZXNzYWdlKTogc3RyaW5nW10ge1xyXG4gICAgICAgIGxldCBwYXJhbWV0ZXJzID0gbmV3IEFycmF5PHN0cmluZz4oKTtcclxuICAgICAgICBsZXQgc3lzdGVtTWVzc2FnZVR5cGU6IGVudW1zLlN5c3RlbU1lc3NhZ2UgPSAhbWVzc2FnZS5leGFtQm9keU1lc3NhZ2VUeXBlSWQgPyBlbnVtcy5TeXN0ZW1NZXNzYWdlLk5vbmUgOlxyXG4gICAgICAgICAgICBtZXNzYWdlLmV4YW1Cb2R5TWVzc2FnZVR5cGVJZDtcclxuICAgICAgICBzd2l0Y2ggKHN5c3RlbU1lc3NhZ2VUeXBlKSB7XHJcbiAgICAgICAgICAgIC8vIFFJR1xyXG4gICAgICAgICAgICBjYXNlIGVudW1zLlN5c3RlbU1lc3NhZ2UuQXV0b0FwcHJvdmVkTWFya2VyOlxyXG4gICAgICAgICAgICBjYXNlIGVudW1zLlN5c3RlbU1lc3NhZ2UuQXV0b0FwcHJvdmVkUmV2aWV3ZXI6XHJcbiAgICAgICAgICAgIGNhc2UgZW51bXMuU3lzdGVtTWVzc2FnZS5BdXRvQXBwcm92ZWRTeXN0ZW06XHJcbiAgICAgICAgICAgIGNhc2UgZW51bXMuU3lzdGVtTWVzc2FnZS5Db25kaXRpb25hbGx5QXBwcm92ZWRNYXJrZXI6XHJcbiAgICAgICAgICAgIGNhc2UgZW51bXMuU3lzdGVtTWVzc2FnZS5Db25kaXRpb25hbGx5QXBwcm92ZWRSZXZpZXdlcjpcclxuICAgICAgICAgICAgY2FzZSBlbnVtcy5TeXN0ZW1NZXNzYWdlLkNvbmRpdGlvbmFsbHlBcHByb3ZlZFN5c3RlbTpcclxuICAgICAgICAgICAgY2FzZSBlbnVtcy5TeXN0ZW1NZXNzYWdlLkF1dG9TdXNwZW5kTWFya2VyOlxyXG4gICAgICAgICAgICBjYXNlIGVudW1zLlN5c3RlbU1lc3NhZ2UuQXV0b1N1c3BlbmRSZXZpZXdlcjpcclxuICAgICAgICAgICAgY2FzZSBlbnVtcy5TeXN0ZW1NZXNzYWdlLkNoZWNrTXlNYXJrczpcclxuICAgICAgICAgICAgY2FzZSBlbnVtcy5TeXN0ZW1NZXNzYWdlLkxvY2tlZEV4YW1pbmVyV2l0aERyYXduOlxyXG4gICAgICAgICAgICAgICAgcGFyYW1ldGVycy5wdXNoKG1lc3NhZ2VIZWxwZXIuZ2V0RGlzcGxheVRleHQobWVzc2FnZSkpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgZW51bXMuU3lzdGVtTWVzc2FnZS5NYXJraW5nSW5zdHJ1Y3Rpb25VcGRhdGVkOlxyXG4gICAgICAgICAgICBjYXNlIGVudW1zLlN5c3RlbU1lc3NhZ2UuTWFya2luZ0luc3RydWN0aW9uVXBsb2FkZWQ6XHJcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLnB1c2godGhpcy5nZXRNYXJraW5nSW5zdHJ1Y3Rpb25QYXJhbWV0ZXJzKG1lc3NhZ2UpKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAvLyBEaXNwbGF5IElEXHJcbiAgICAgICAgICAgIGNhc2UgZW51bXMuU3lzdGVtTWVzc2FnZS5BdXRvbWF0ZWRNYXJrZXJNZXNzYWdlOlxyXG4gICAgICAgICAgICBjYXNlIGVudW1zLlN5c3RlbU1lc3NhZ2UuWm9uaW5nRXhjZXB0aW9uUmFpc2VkOlxyXG4gICAgICAgICAgICBjYXNlIGVudW1zLlN5c3RlbU1lc3NhZ2UuWm9uaW5nRXhjZXB0aW9uUmVzb2x2ZWQ6XHJcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLnB1c2godGhpcy5nZXREaXNwbGF5SWQobWVzc2FnZSkpO1xyXG4gICAgICAgICAgICAgICAgcGFyYW1ldGVycy5wdXNoKG1lc3NhZ2UuYm9keU1ldGFkYXRhKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIGVudW1zLlN5c3RlbU1lc3NhZ2UuQ2FuZGlkYXRlRmVlZFVwZGF0ZWQ6XHJcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLnB1c2godGhpcy5nZXREaXNwbGF5SWQobWVzc2FnZSkpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIC8vIFFJRyBhbmQgRGlzcGxheUlkXHJcbiAgICAgICAgICAgIGNhc2UgZW51bXMuU3lzdGVtTWVzc2FnZS5SSUdSZW1vdmVkOlxyXG4gICAgICAgICAgICAgICAgcGFyYW1ldGVycy5wdXNoKHRoaXMuZ2V0RGlzcGxheUlkKG1lc3NhZ2UpKTtcclxuICAgICAgICAgICAgICAgIC8vIHB1c2hpbmcgdGhlIHFpZyBuYW1lXHJcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLnB1c2gobWVzc2FnZUhlbHBlci5nZXREaXNwbGF5VGV4dChtZXNzYWdlKSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgLy8gUUlHIGFuZCBUYXJnZXRzXHJcbiAgICAgICAgICAgIGNhc2UgZW51bXMuU3lzdGVtTWVzc2FnZS5SZWZyZXNoTWFya2luZ1RhcmdldHM6XHJcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLnB1c2gobWVzc2FnZUhlbHBlci5nZXREaXNwbGF5VGV4dChtZXNzYWdlKSk7XHJcbiAgICAgICAgICAgICAgICAvLyBwdXNoaW5nIHRhcmdldHNcclxuICAgICAgICAgICAgICAgIGxldCB0YXJnZXRzOiBzdHJpbmcgPSB0aGlzLmdldFRhcmdldHMobWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLnB1c2godGFyZ2V0cyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBlbnVtcy5TeXN0ZW1NZXNzYWdlLkdyYWNlUGVyaW9kVXBkYXRlOlxyXG4gICAgICAgICAgICAgICAgcGFyYW1ldGVycy5wdXNoKG1lc3NhZ2VIZWxwZXIuZ2V0RGlzcGxheVRleHQobWVzc2FnZSkpO1xyXG4gICAgICAgICAgICAgICAgLy8gcHVzaGluZyBncmFjZSBwZXJpb2QgZGV0YWlsc1xyXG4gICAgICAgICAgICAgICAgbGV0IGdyYWNlUGVyaW9kRGV0YWlsczogQXJyYXk8c3RyaW5nPiA9IG5ldyBBcnJheTxzdHJpbmc+KCk7XHJcbiAgICAgICAgICAgICAgICBncmFjZVBlcmlvZERldGFpbHMgPSB0aGlzLmdldEdyYWNlUGVyaW9kRGV0YWlscyhtZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZ3JhY2VQZXJpb2REZXRhaWxzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1ldGVycy5wdXNoKGdyYWNlUGVyaW9kRGV0YWlsc1tpXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgLy8gQXBwcm92YWwgc3RhdHVzIHJlcXVpcmVkIGN1cnJlbnQsIGZyb20gYW5kIHRvXHJcbiAgICAgICAgICAgIGNhc2UgZW51bXMuU3lzdGVtTWVzc2FnZS5JbmRpcmVjdFN1Ym9yZGluYXRlU3RhdHVzVXBkYXRlOlxyXG4gICAgICAgICAgICAgICAgLy8gcHVzaGluZyBhcHByb3ZhbCBzdGF0dXNcclxuICAgICAgICAgICAgICAgIGxldCBzdGF0dXNEZXRhaWxzOiBBcnJheTxzdHJpbmc+ID0gbmV3IEFycmF5PHN0cmluZz4oKTtcclxuICAgICAgICAgICAgICAgIHN0YXR1c0RldGFpbHMgPSB0aGlzLmdldFN0YXR1cyhtZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RhdHVzRGV0YWlscy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMucHVzaChzdGF0dXNEZXRhaWxzW2ldKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAvLyBEaXNwbGF5SUQgYW5kIHF1ZXN0aW9uIGl0ZW0uXHJcbiAgICAgICAgICAgIGNhc2UgZW51bXMuU3lzdGVtTWVzc2FnZS5SZW1hcmtEZWxldGVkOlxyXG4gICAgICAgICAgICAgICAgcGFyYW1ldGVycy5wdXNoKHRoaXMuZ2V0RGlzcGxheUlkKG1lc3NhZ2UpKTtcclxuICAgICAgICAgICAgICAgIC8vIHB1c2ggbWFyayBzY2hlbWUgZ3JvdXAgbmFtZVxyXG4gICAgICAgICAgICAgICAgcGFyYW1ldGVycy5wdXNoKG1lc3NhZ2VIZWxwZXIuZ2V0TWFya1NjaGVtZUdyb3VwTmFtZShtZXNzYWdlKSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBlbnVtcy5TeXN0ZW1NZXNzYWdlLkRlQWxsb2NhdGlvblJlbWFya1Jlc3BvbnNlUmVtb3ZlZDpcclxuICAgICAgICAgICAgICAgIC8vIHB1c2hpbmcgdGhlIHFpZyBuYW1lXHJcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLnB1c2gobWVzc2FnZUhlbHBlci5nZXREaXNwbGF5VGV4dChtZXNzYWdlKSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgZW51bXMuU3lzdGVtTWVzc2FnZS5NYXJrc0NoZWNrZWQ6XHJcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLnB1c2gobWVzc2FnZUhlbHBlci5nZXRNYXJrU2NoZW1lR3JvdXBOYW1lKG1lc3NhZ2UpKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSBlbnVtcy5TeXN0ZW1NZXNzYWdlLlJlbWFya1JlcXVlc3RlZENvbXBsZXRlZDpcclxuICAgICAgICAgICAgICAgIC8vIHBhcmFtZXRlcnMgYXJlIG5vdCByZXF1aXJlZCBhcyBwZXIgY3VycmVudCB0ZW1wbGF0ZVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAvLyA5IC0gTWVzc2FnZSBUZW1wbGF0ZSBpcyBub3QgYXZhaWxhYmxlXHJcbiAgICAgICAgICAgIGNhc2UgZW51bXMuU3lzdGVtTWVzc2FnZS5SZWZyZXNoUXVlc3Rpb25QYXBlclN0cnVjdHVyZTpcclxuICAgICAgICAgICAgLy8gMTUgLSBNZXNzYWdlIFRlbXBsYXRlIGlzIG5vdCBhdmFpbGFibGVcclxuICAgICAgICAgICAgY2FzZSBlbnVtcy5TeXN0ZW1NZXNzYWdlLkF1dG9tYXRpY1NhbXBsaW5nQ29tcGxldGVkOlxyXG4gICAgICAgICAgICAvLyAyNyAtIE1lc3NhZ2UgVGVtcGxhdGUgaXMgbm90IGF2YWlsYWJsZVxyXG4gICAgICAgICAgICBjYXNlIGVudW1zLlN5c3RlbU1lc3NhZ2UuVGFrZVJlc3BvbnNlOlxyXG4gICAgICAgICAgICAgICAgLy8gcHVzaGluZyB0YWtlIHJlc3BvbnNlIGRldGFpbHNcclxuICAgICAgICAgICAgICAgIGxldCB0YWtlUmVzcG9uc2VEZXRhaWxzOiBBcnJheTxzdHJpbmc+ID0gbmV3IEFycmF5PHN0cmluZz4oKTtcclxuICAgICAgICAgICAgICAgIHRha2VSZXNwb25zZURldGFpbHMgPSB0aGlzLmdldE1ldGFEYXRhRGV0YWlscyhtZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGFrZVJlc3BvbnNlRGV0YWlscy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMucHVzaCh0YWtlUmVzcG9uc2VEZXRhaWxzW2ldKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHBhcmFtZXRlcnM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIG1lc3NhZ2UgYm9keSBmaXJzdCBsaW5lIGJhc2VkIG9uIHRoZSBubyBvZiB3b3Jkc1xyXG4gICAgICogQHBhcmFtIG1lc3NhZ2VCb2R5XHJcbiAgICAgKiBAcGFyYW0gbm9PZldvcmRzXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgc3RhdGljIGdldE1lc3NhZ2VCb2R5Rmlyc3RMaW5lKG1lc3NhZ2VCb2R5OiBzdHJpbmcpIHtcclxuICAgICAgICBsZXQgbWVzc2FnZUJvZHlGaXJzdExpbmU6IHN0cmluZyA9ICcnO1xyXG4gICAgICAgIGlmIChtZXNzYWdlQm9keSAhPT0gdW5kZWZpbmVkIHx8IG1lc3NhZ2VCb2R5ICE9PSAnJykge1xyXG4gICAgICAgICAgICBtZXNzYWdlQm9keUZpcnN0TGluZSA9IG1lc3NhZ2VCb2R5LnNwbGl0KCcgJywgY29uc3RhbnRzLk1BWF9NRVNTQUdFX0JPRFlfRklSU1RfTElORV9XT1JEUykuam9pbignICcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2VCb2R5Rmlyc3RMaW5lO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCB0YXJnZXRzIGZyb20gbWVzc2FnZSBtZXRhZGF0YSBmb3IgUmVmcmVzaE1hcmtpbmdUYXJnZXRzIHN5c3RlbSBtZXNzYWdlXHJcbiAgICAgKiBNYXJraW5nIFRhcmdldCB1cGRhdGUgaGFuZGxlclxyXG4gICAgICogQHBhcmFtIG1lc3NhZ2VcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgZ2V0VGFyZ2V0cyhtZXNzYWdlOiBNZXNzYWdlKTogc3RyaW5nIHtcclxuICAgICAgICBsZXQgdGFyZ2V0Q29sbGVjdGlvbjogQXJyYXk8c3RyaW5nPiA9IG5ldyBBcnJheTxzdHJpbmc+KCk7XHJcbiAgICAgICAgbGV0IGJvZHlNZXRhUGFyYW1ldGVycyA9IHRoaXMuZ2V0TWVzc2FnZUJvZHlNZXRhUGFyYW1ldGVycyhtZXNzYWdlLCAnOycsICc9Jyk7XHJcbiAgICAgICAgbGV0IHRhcmdldHM6IEFycmF5PHN0cmluZz4gPSBib2R5TWV0YVBhcmFtZXRlcnNbbWVzc2FnZVRyYW5zbGF0aW9uSGFuZGxlckNvbnN0YW50cy5UQVJHRVRTX0RJQ1RJT05BUlldLnNwbGl0KCcsJyk7XHJcbiAgICAgICAgbGV0IHRhcmdldDogc3RyaW5nO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGFyZ2V0cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAodGFyZ2V0c1tpXSAhPT0gJycpIHtcclxuICAgICAgICAgICAgICAgIHRhcmdldCA9IHRhcmdldHNbaV0ucmVwbGFjZSgnVGFyZ2V0VHlwZV8nLCAnJyk7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ1NUTVN0YW5kYXJkaXNhdGlvbk1hcmtpbmcnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQgPSAnRVNfVGVhbUFwcHJvdmFsJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnU2Vjb25kU3RhbmRhcmRpc2F0aW9uJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0ID0gJ1NlY29uZFN0YW5kYXJkaXNhdGlvbic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ0xpdmUnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQgPSAnTGl2ZU1hcmtpbmcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlICdTdGFuZGFyZGlzYXRpb24nOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQgPSAnQXBwcm92YWwnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRhcmdldENvbGxlY3Rpb24ucHVzaChsb2NhbGVTdG9yZS5pbnN0YW5jZS5UcmFuc2xhdGVUZXh0KCdnZW5lcmljLm1hcmtpbmctbW9kZXMuJyArIHRhcmdldCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgcmVtYXJrVGFyZ2V0czogQXJyYXk8c3RyaW5nPiA9IGJvZHlNZXRhUGFyYW1ldGVyc1ttZXNzYWdlVHJhbnNsYXRpb25IYW5kbGVyQ29uc3RhbnRzLlJFTUFSS1RBUkdFVFNfRElDVElPTkFSWV0uc3BsaXQoJywnKTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlbWFya1RhcmdldHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKHJlbWFya1RhcmdldHNbaV0gIT09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICB0YXJnZXRDb2xsZWN0aW9uLnB1c2gobG9jYWxlU3RvcmUuaW5zdGFuY2UuVHJhbnNsYXRlVGV4dCgnZ2VuZXJpYy5yZW1hcmstdHlwZXMubG9uZy1uYW1lcy4nICsgcmVtYXJrVGFyZ2V0c1tpXSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyByZXR1cm4gY29tbWEgc2VwZXJhdGVkIHRhcmdldHNcclxuICAgICAgICByZXR1cm4gdGFyZ2V0Q29sbGVjdGlvbi5qb2luKCcsICcpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBJbmRpcmVjdCBTdWJvcmRpbmF0ZSBzdGF0dXMgZnJvbSBtZXNzYWdlIG1ldGFkYXRhIGZvciBJbmRpcmVjdFN1Ym9yZGluYXRlU3RhdHVzVXBkYXRlIHN5c3RlbSBtZXNzYWdlXHJcbiAgICAgKiBJbmRpcmVjdFN1Ym9yZGluYXRlU3RhdHVzVXBkYXRlSGFuZGxlclxyXG4gICAgICogQHBhcmFtIG1lc3NhZ2VcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgZ2V0U3RhdHVzKG1lc3NhZ2U6IE1lc3NhZ2UpIHtcclxuICAgICAgICBsZXQgdGFyZ2V0Q29sbGVjdGlvbjogQXJyYXk8c3RyaW5nPiA9IG5ldyBBcnJheTxzdHJpbmc+KCk7XHJcbiAgICAgICAgbGV0IGJvZHlNZXRhUGFyYW1ldGVycyA9IHRoaXMuZ2V0TWVzc2FnZUJvZHlNZXRhUGFyYW1ldGVycyhtZXNzYWdlLCAnOycsICc9Jyk7XHJcbiAgICAgICAgbGV0IG1hcmtlck5hbWU6IHN0cmluZyA9IGJvZHlNZXRhUGFyYW1ldGVyc1ttZXNzYWdlVHJhbnNsYXRpb25IYW5kbGVyQ29uc3RhbnRzLk1BUktFUl07XHJcbiAgICAgICAgdGFyZ2V0Q29sbGVjdGlvbi5wdXNoKG1hcmtlck5hbWUpO1xyXG5cclxuICAgICAgICBsZXQgb2xkQXBwcm92YWxTdGF0dXM6IG51bWJlciA9IHBhcnNlSW50KGJvZHlNZXRhUGFyYW1ldGVyc1ttZXNzYWdlVHJhbnNsYXRpb25IYW5kbGVyQ29uc3RhbnRzLk9MRF9TVEFUVVNdKTtcclxuICAgICAgICB0YXJnZXRDb2xsZWN0aW9uLnB1c2gobG9jYWxlU3RvcmUuaW5zdGFuY2UuVHJhbnNsYXRlVGV4dCgnZ2VuZXJpYy5hcHByb3ZhbC1zdGF0dXNlcy4nICtcclxuICAgICAgICAgICAgZW51bXMuZ2V0RW51bVN0cmluZyhlbnVtcy5FeGFtaW5lckFwcHJvdmFsLCBvbGRBcHByb3ZhbFN0YXR1cykpKTtcclxuXHJcbiAgICAgICAgbGV0IG5ld0FwcHJvdmFsU3RhdHVzOiBudW1iZXIgPSBwYXJzZUludChib2R5TWV0YVBhcmFtZXRlcnNbbWVzc2FnZVRyYW5zbGF0aW9uSGFuZGxlckNvbnN0YW50cy5ORVdfU1RBVFVTXSk7XHJcbiAgICAgICAgdGFyZ2V0Q29sbGVjdGlvbi5wdXNoKGxvY2FsZVN0b3JlLmluc3RhbmNlLlRyYW5zbGF0ZVRleHQoJ2dlbmVyaWMuYXBwcm92YWwtc3RhdHVzZXMuJyArXHJcbiAgICAgICAgICAgIGVudW1zLmdldEVudW1TdHJpbmcoZW51bXMuRXhhbWluZXJBcHByb3ZhbCwgbmV3QXBwcm92YWxTdGF0dXMpKSk7XHJcblxyXG4gICAgICAgIHJldHVybiB0YXJnZXRDb2xsZWN0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogZ2V0IGRldGFpbHMgZnJvbSB0aGUgYm9keSBtZXRhZGF0YSBzdHJpbmcuXHJcbiAgICAgKiBAcGFyYW0gbWVzc2FnZVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHN0YXRpYyBnZXRNZXRhRGF0YURldGFpbHMobWVzc2FnZTogTWVzc2FnZSkge1xyXG4gICAgICAgIGxldCBkYXRhQ29sbGVjdGlvbjogQXJyYXk8c3RyaW5nPiA9IG5ldyBBcnJheTxzdHJpbmc+KCk7XHJcbiAgICAgICAgbGV0IG1ldGFEYXRhRGV0YWlscyA9IHRoaXMuZ2V0TWVzc2FnZUJvZHlNZXRhUGFyYW1ldGVycyhtZXNzYWdlLCAnIycsICc6Jyk7XHJcbiAgICAgICAgaWYgKG1ldGFEYXRhRGV0YWlscykge1xyXG4gICAgICAgICAgICBsZXQgZGlzcGxheUlEOiBudW1iZXIgPSBwYXJzZUZsb2F0KG1ldGFEYXRhRGV0YWlsc1ttZXNzYWdlVHJhbnNsYXRpb25IYW5kbGVyQ29uc3RhbnRzLkRJU1BMQVlfSURdKTtcclxuICAgICAgICAgICAgZGF0YUNvbGxlY3Rpb24ucHVzaChkaXNwbGF5SUQudG9TdHJpbmcoKSk7XHJcblxyXG4gICAgICAgICAgICBsZXQgd29ya2xpc3RUeXBlOiBzdHJpbmcgPSBtZXRhRGF0YURldGFpbHNbbWVzc2FnZVRyYW5zbGF0aW9uSGFuZGxlckNvbnN0YW50cy5XT1JLTElTVF9UWVBFXTtcclxuICAgICAgICAgICAgZGF0YUNvbGxlY3Rpb24ucHVzaCh3b3JrbGlzdFR5cGUudG9TdHJpbmcoKSk7XHJcblxyXG4gICAgICAgICAgICBsZXQgZXhjZXB0aW9uVHlwZTogc3RyaW5nID0gbWV0YURhdGFEZXRhaWxzW21lc3NhZ2VUcmFuc2xhdGlvbkhhbmRsZXJDb25zdGFudHMuRVhDRVBUSU9OX1RZUEVdO1xyXG4gICAgICAgICAgICBkYXRhQ29sbGVjdGlvbi5wdXNoKGV4Y2VwdGlvblR5cGUudG9TdHJpbmcoKSk7XHJcblxyXG4gICAgICAgICAgICBsZXQgc2VuaW9yRXhhbWluZXJOYW1lOiBzdHJpbmcgPSBtZXRhRGF0YURldGFpbHNbbWVzc2FnZVRyYW5zbGF0aW9uSGFuZGxlckNvbnN0YW50cy5TRU5JT1JfRVhBTUlORVJfTkFNRV07XHJcbiAgICAgICAgICAgIGRhdGFDb2xsZWN0aW9uLnB1c2goc2VuaW9yRXhhbWluZXJOYW1lLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZGF0YUNvbGxlY3Rpb247XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgR3JhY2UgcGVyaW9kIGRldGFpbHMgZnJvbSBtZXNzYWdlIG1ldGFkYXRhIGZvciBncmFjZSBwZXJpb2QgdXBkYXRlIHN5c3RlbSBtZXNzYWdlXHJcbiAgICAgKiBJbmRpcmVjdFN1Ym9yZGluYXRlU3RhdHVzVXBkYXRlSGFuZGxlclxyXG4gICAgICogQHBhcmFtIG1lc3NhZ2VcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgZ2V0R3JhY2VQZXJpb2REZXRhaWxzKG1lc3NhZ2U6IE1lc3NhZ2UpIHtcclxuICAgICAgICBsZXQgdGFyZ2V0Q29sbGVjdGlvbjogQXJyYXk8c3RyaW5nPiA9IG5ldyBBcnJheTxzdHJpbmc+KCk7XHJcbiAgICAgICAgbGV0IGJvZHlNZXRhUGFyYW1ldGVycyA9IHRoaXMuZ2V0TWVzc2FnZUJvZHlNZXRhUGFyYW1ldGVycyhtZXNzYWdlLCAnOycsICc9Jyk7XHJcblxyXG4gICAgICAgIGxldCBvbGRHcmFjZVBlcmlvZDogbnVtYmVyID0gcGFyc2VGbG9hdChib2R5TWV0YVBhcmFtZXRlcnNbbWVzc2FnZVRyYW5zbGF0aW9uSGFuZGxlckNvbnN0YW50cy5PTERfR1JBQ0VfUEVSSU9EXSk7XHJcbiAgICAgICAgdGFyZ2V0Q29sbGVjdGlvbi5wdXNoKG9sZEdyYWNlUGVyaW9kLnRvU3RyaW5nKCkpO1xyXG5cclxuICAgICAgICBsZXQgbmV3R3JhY2VQZXJpb2Q6IG51bWJlciA9IHBhcnNlRmxvYXQoYm9keU1ldGFQYXJhbWV0ZXJzW21lc3NhZ2VUcmFuc2xhdGlvbkhhbmRsZXJDb25zdGFudHMuTkVXX0dSQUNFX1BFUklPRF0pO1xyXG4gICAgICAgIHRhcmdldENvbGxlY3Rpb24ucHVzaChuZXdHcmFjZVBlcmlvZC50b1N0cmluZygpKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRhcmdldENvbGxlY3Rpb247XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIG1ldGhvZCB3aWxsIHByb2Nlc3MgbWVzc2FnZSBtZXRhZGF0YSBzdHJpbmdcclxuICAgICAqIEBwYXJhbSBtZXNzYWdlXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgc3RhdGljIGdldE1lc3NhZ2VCb2R5TWV0YVBhcmFtZXRlcnMobWVzc2FnZTogTWVzc2FnZSwgc3BsaXR0ZXIxOiBzdHJpbmcsIHNwbGl0dGVyMjogc3RyaW5nKTogT2JqZWN0IHtcclxuICAgICAgICBsZXQgYm9keU1ldGFQYXJhbWV0ZXJzID0gbmV3IE9iamVjdCgpO1xyXG4gICAgICAgIGlmIChtZXNzYWdlLmJvZHlNZXRhZGF0YSAhPSBudWxsICYmIG1lc3NhZ2UuYm9keU1ldGFkYXRhICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgbGV0IHBhaXJzOiBBcnJheTxzdHJpbmc+ID0gbWVzc2FnZS5ib2R5TWV0YWRhdGEuc3BsaXQoc3BsaXR0ZXIxKTtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYWlycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHBhaXJzW2ldLnRyaW0oKS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgYml0czogQXJyYXk8c3RyaW5nPiA9IHBhaXJzW2ldLnNwbGl0KHNwbGl0dGVyMik7XHJcbiAgICAgICAgICAgICAgICBpZiAoYml0cy5sZW5ndGggPCAyIHx8IGJpdHNbMF0ubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgYm9keU1ldGFQYXJhbWV0ZXJzW2JpdHNbMF1dID0gYml0c1sxXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGJvZHlNZXRhUGFyYW1ldGVycztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgd2lsbCByZXR1cm4gdGhlIGRpc3BsYXlJZCB3aXRoIHByZWZpeCAnNidcclxuICAgICAqIEBwYXJhbSBtZXNzYWdlXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgc3RhdGljIGdldERpc3BsYXlJZChtZXNzYWdlOiBNZXNzYWdlKSB7XHJcbiAgICAgICAgcmV0dXJuICc2JyArIG1lc3NhZ2UucmVsYXRlZFJlc3BvbnNlRGlzcGxheUlkLnRvU3RyaW5nKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIHdpbGwgcmV0dXJuIHN0cmluZyBmb3IgcGFydGljdWxhciBlbnVtIHZhbHVlIGZyb20gcmVzb3VyY2UgZmlsZVxyXG4gICAgICogQHBhcmFtIHNhbXBsZVJlaXZld0NvbW1lbnRcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBnZXRDdXN0b21FbnVtU3RyaW5nKHNhbXBsZVJlaXZld0NvbW1lbnQ6IG51bWJlciwgYnV0dG9uVHlwZTogZW51bXMuQnV0dG9uVHlwZSkge1xyXG4gICAgICAgIHN3aXRjaCAoYnV0dG9uVHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlIGVudW1zLkJ1dHRvblR5cGUuU2FtcGxpbmc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbG9jYWxlU3RvcmUuaW5zdGFuY2UuXHJcbiAgICAgICAgICAgICAgICAgICAgVHJhbnNsYXRlVGV4dCgndGVhbS1tYW5hZ2VtZW50LnJlc3BvbnNlLnN1cGVydmlzb3Itc2FtcGxpbmctY29tbWVudHMuJyArIHNhbXBsZVJlaXZld0NvbW1lbnQpO1xyXG4gICAgICAgICAgICBjYXNlIGVudW1zLkJ1dHRvblR5cGUuU2V0QXNSZXZpZXdlZDpcclxuICAgICAgICAgICAgICAgIHJldHVybiBsb2NhbGVTdG9yZS5pbnN0YW5jZS5cclxuICAgICAgICAgICAgICAgICAgICBUcmFuc2xhdGVUZXh0KCd0ZWFtLW1hbmFnZW1lbnQucmVzcG9uc2UucmV2aWV3LWNvbW1lbnRzLicgKyBzYW1wbGVSZWl2ZXdDb21tZW50KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBnZXRzIHRoZSBtZXNzYWdlIGJvZHkgcGFyYW1ldGVycyBmb3IgbWFya2luZyBpbnN0cnVjdGlvbnMgZmlsZSB1cGxvYWQgbWFuZGF0b3J5IG1lc3NhZ2VcclxuICAgICAqIEBwYXJhbSBtZXNzYWdlXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgc3RhdGljIGdldE1hcmtpbmdJbnN0cnVjdGlvblBhcmFtZXRlcnMobWVzc2FnZTogTWVzc2FnZSk6IHN0cmluZyB7XHJcbiAgICAgICAgbGV0IGJvZHlNZXRhRGF0YTogc3RyaW5nW10gPSBtZXNzYWdlLmJvZHlNZXRhZGF0YS5zcGxpdCgnfCcpO1xyXG5cclxuICAgICAgICAvLyBpZiBtZXNzYWdlIGJvZHkgbWV0YWRhdGEgaGFzIDQgaXRlbXMgdGhlbiBpdCBpcyBpbiBRSUcgbGV2ZWwsIGFuZCBoYXMgb25lIG1vcmUgcGFyYW1ldGVyIHRvIHJlcHJlc2VudCBRSUcgbmFtZVxyXG4gICAgICAgIGlmIChib2R5TWV0YURhdGEubGVuZ3RoID09PSA0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoYm9keU1ldGFEYXRhWzBdICsgJyAtICcgKyBib2R5TWV0YURhdGFbMV0gKyAnIC0gJyArIGJvZHlNZXRhRGF0YVsyXSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChib2R5TWV0YURhdGEubGVuZ3RoID09PSAzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoYm9keU1ldGFEYXRhWzBdICsgJyAtICcgKyBib2R5TWV0YURhdGFbMV0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0ID0gTWVzc2FnZVRyYW5zbGF0aW9uSGVscGVyO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vc291cmNlLW1hcC1sb2FkZXIhLi9zcmMvY29tcG9uZW50cy91dGlsaXR5L21lc3NhZ2UvbWVzc2FnZXRyYW5zbGF0aW9uaGVscGVyLnRzIl0sIm1hcHBpbmdzIjoiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQWtYQTtBQWhYQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFJQTtBQUdBO0FBRUE7QUFDQTtBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFHQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBR0E7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBOyIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),

/***/ 462:
/* no static exports found */
/* all exports used */
/*!***********************************************!*\
  !*** ./src/components/message/messagebase.ts ***!
  \***********************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar pureRenderComponent = __webpack_require__(/*! ../base/purerendercomponent */ 227);\r\nvar enums = __webpack_require__(/*! ../utility/enums */ 225);\r\nvar localeStore = __webpack_require__(/*! ../../stores/locale/localestore */ 226);\r\nvar messagingActionCreator = __webpack_require__(/*! ../../actions/messaging/messagingactioncreator */ 268);\r\nvar popupHelper = __webpack_require__(/*! ../utility/popup/popuphelper */ 288);\r\nvar popUpDisplayActionCreator = __webpack_require__(/*! ../../actions/popupdisplay/popupdisplayactioncreator */ 328);\r\nvar qigStore = __webpack_require__(/*! ../../stores/qigselector/qigstore */ 230);\r\nvar messageStore = __webpack_require__(/*! ../../stores/message/messagestore */ 240);\r\nvar worklistStore = __webpack_require__(/*! ../../stores/worklist/workliststore */ 231);\r\nvar qualityfeedbackHelper = __webpack_require__(/*! ../../utility/qualityfeedback/qualityfeedbackhelper */ 309);\r\nvar messageHelper = __webpack_require__(/*! ../utility/message/messagehelper */ 283);\r\nvar markerOperationModeFactory = __webpack_require__(/*! ../utility/markeroperationmode/markeroperationmodefactory */ 232);\r\nvar teamManagementActionCreator = __webpack_require__(/*! ../../actions/teammanagement/teammanagementactioncreator */ 263);\r\nvar applicationStore = __webpack_require__(/*! ../../stores/applicationoffline/applicationstore */ 247);\r\nvar Immutable = __webpack_require__(/*! immutable */ 40);\r\nvar MessageBase = /** @class */ (function (_super) {\r\n    __extends(MessageBase, _super);\r\n    /**\r\n     * @constructor\r\n     */\r\n    function MessageBase(props, state) {\r\n        var _this = _super.call(this, props, state) || this;\r\n        _this.isSelectedItemClicked = false;\r\n        _this.navigateTo = enums.SaveAndNavigate.none;\r\n        _this.msgEditorId = 'msg-tinymce-editor';\r\n        _this._boundHandleOnClick = null;\r\n        _this.isSubordinateSelected = false;\r\n        _this.sendMessageActionInProgress = false;\r\n        _this.messageType = enums.MessageType.None;\r\n        /**\r\n         * Callback function for dropdown select\r\n         */\r\n        _this.onSelect = function (selectedItem, event) {\r\n            _this.priorityDropDownSelectedItem = selectedItem;\r\n            _this.setState({ renderedOn: Date.now() });\r\n        };\r\n        /**\r\n         *  Callback function for dropdown click\r\n         */\r\n        _this.onDropDownClick = function (dropDown) {\r\n            _this.clickedDropDown = dropDown;\r\n            _this.isSelectedItemClicked = true;\r\n            if (_this.clickedDropDown === enums.DropDownType.Priority) {\r\n                _this.isQigDropDownOpen = undefined;\r\n                _this.isDropDownOpen = _this.isDropDownOpen === undefined ? true : !_this.isDropDownOpen;\r\n            }\r\n            else if (_this.clickedDropDown === enums.DropDownType.QIG) {\r\n                _this.isDropDownOpen = undefined;\r\n                _this.isQigDropDownOpen = _this.isQigDropDownOpen === undefined ? true : !_this.isQigDropDownOpen;\r\n            }\r\n            _this.setState({ renderedOn: Date.now() });\r\n        };\r\n        /**\r\n         * Handle click events on the window and collapse priority selection dropdown\r\n         * @param {any} source - The source element\r\n         */\r\n        _this.handleOnClick = function () {\r\n            if (!_this.isSelectedItemClicked && ((_this.isDropDownOpen !== undefined && _this.isDropDownOpen)\r\n                || (_this.isQigDropDownOpen !== undefined && _this.isQigDropDownOpen))) {\r\n                // collapse the priority dropdown\r\n                _this.isDropDownOpen = false;\r\n                _this.isQigDropDownOpen = false;\r\n                _this.setState({ renderedOn: Date.now() });\r\n            }\r\n            else {\r\n                _this.isSelectedItemClicked = false;\r\n            }\r\n        };\r\n        /**\r\n         *  This will return the localised string for message priority dropdown\r\n         */\r\n        _this.getPriorityDropDownItem = function (dropDownItem) {\r\n            var localisedDropDownItem;\r\n            switch (dropDownItem) {\r\n                case enums.MessagePriority.Important:\r\n                    localisedDropDownItem = localeStore.instance.TranslateText('messaging.compose-message.priority.important');\r\n                    break;\r\n                case enums.MessagePriority.Mandatory:\r\n                    localisedDropDownItem = localeStore.instance.TranslateText('messaging.compose-message.priority.mandatory');\r\n                    break;\r\n                default:\r\n                    localisedDropDownItem = localeStore.instance.TranslateText('messaging.compose-message.priority.standard');\r\n                    break;\r\n            }\r\n            return localisedDropDownItem;\r\n        };\r\n        /**\r\n         * Method fired when the message is closed.\r\n         */\r\n        _this.onMessageClose = function () {\r\n            // Show discard message if content edited; or just close the panel.\r\n            if (_this.isMessagePanelEdited) {\r\n                messagingActionCreator.messageAction(enums.MessageViewAction.Maximize);\r\n                if (_this.navigateTo === enums.SaveAndNavigate.newMessageButtonClick\r\n                    || _this.navigateTo === enums.SaveAndNavigate.toReplyMessage\r\n                    || _this.navigateTo === enums.SaveAndNavigate.toForwardMessage) {\r\n                    popUpDisplayActionCreator.popUpDisplay(enums.PopUpType.DiscardOnNewMessageButtonClick, enums.PopUpActionType.Show, enums.SaveAndNavigate.none, {\r\n                        popupContent: localeStore.instance.TranslateText('messaging.compose-message.discard-message-dialog.body-start-new-message-while-composing')\r\n                    });\r\n                }\r\n                else if (_this.navigateTo === enums.SaveAndNavigate.toNewResponseMessageCompose) {\r\n                    popUpDisplayActionCreator.popUpDisplay(enums.PopUpType.DiscardOnNewMessageButtonClick, enums.PopUpActionType.Show, enums.SaveAndNavigate.none, {\r\n                        popupContent: localeStore.instance.TranslateText('marking.response.discard-message-or-exception-dialog.body')\r\n                    });\r\n                }\r\n                else {\r\n                    var messageType = _this.navigateTo !== enums.SaveAndNavigate.none\r\n                        ? enums.PopUpType.DiscardMessageNavigateAway : enums.PopUpType.DiscardMessage;\r\n                    popUpDisplayActionCreator.popUpDisplay(messageType, enums.PopUpActionType.Show, messageStore.instance.navigateFrom, {\r\n                        popupContent: (_this.navigateTo === enums.SaveAndNavigate.messageWithInResponse ?\r\n                            localeStore.instance.TranslateText('marking.response.discard-message-or-exception-dialog.body') : undefined)\r\n                    });\r\n                }\r\n            }\r\n            else if (_this.navigateTo !== enums.SaveAndNavigate.none && _this.navigateTo !== enums.SaveAndNavigate.messageWithInResponse\r\n                && _this.navigateTo !== enums.SaveAndNavigate.newMessageButtonClick) {\r\n                // hide the message panel and navigate away\r\n                _this.onDiscardMessageConfirmed();\r\n            }\r\n            else if (_this.navigateTo === enums.SaveAndNavigate.newMessageButtonClick) {\r\n                _this.navigateTo = enums.SaveAndNavigate.none;\r\n                _this.isMessagePopupMinimized = false;\r\n                _this.setState({ renderedOn: Date.now() });\r\n            }\r\n            else {\r\n                // Close the Message Panel.\r\n                _this.resetAndCloseMessagePanel();\r\n                _this.navigateTo = enums.SaveAndNavigate.none;\r\n            }\r\n        };\r\n        /**\r\n         * Navigate away from current response.\r\n         */\r\n        _this.onNavigateAwayFromResponse = function (navigateTo) {\r\n            _this.navigateTo = navigateTo;\r\n            _this.onMessageClose();\r\n        };\r\n        /**\r\n         * Reset message panel and close\r\n         */\r\n        _this.resetAndCloseMessagePanel = function () {\r\n            _this.priorityDropDownSelectedItem = enums.MessagePriority.Standard;\r\n            _this.toFieldValues = null;\r\n            _this.toFieldIds = null;\r\n            _this.messageSubject = '';\r\n            _this.messageBody = '';\r\n            _this.isDropDownOpen = undefined;\r\n            _this.isQigDropDownOpen = undefined;\r\n            _this.props.closeMessagePanel(_this.navigateTo);\r\n            _this.selectedQigItemId = undefined;\r\n            _this.questionPaperPartId = undefined;\r\n            messageHelper.handleSubjectChange(_this.messageSubject);\r\n            _this.sendMessageActionInProgress = false;\r\n            // updating message component with default values\r\n            // this enable or Disable send button will call setState\r\n            _this.enableDisableSendButton();\r\n            // Need to Update the UI (Subject box in the message, after closing the message : Bug 28224\r\n            _this.setState({ renderedOn: Date.now() });\r\n        };\r\n        /**\r\n         * Method fired when discard message is confirmed.\r\n         */\r\n        _this.onDiscardMessageConfirmed = function (actionFromCombinedPopup, navigateTo) {\r\n            if (actionFromCombinedPopup === void 0) { actionFromCombinedPopup = false; }\r\n            if (navigateTo === void 0) { navigateTo = enums.SaveAndNavigate.none; }\r\n            // If message panel is not edited, no need to change the UI while logout\r\n            if (_this.isMessagePanelEdited) {\r\n                // Close the Message Panel.\r\n                _this.resetAndCloseMessagePanel();\r\n            }\r\n            else if (!_this.isMessagePanelEdited && _this.navigateTo === enums.SaveAndNavigate.newMessageButtonClick) {\r\n                messagingActionCreator.messageAction(enums.MessageViewAction.Open);\r\n            }\r\n            else {\r\n                _this.resetAndCloseMessagePanel();\r\n            }\r\n            // on message close navigate away from response scenario\r\n            if (_this.navigateTo !== enums.SaveAndNavigate.none && _this.navigateTo !== enums.SaveAndNavigate.messageWithInResponse\r\n                && _this.navigateTo !== enums.SaveAndNavigate.toNewResponseMessageCompose &&\r\n                !(_this.navigateTo === enums.SaveAndNavigate.toResponse && qualityfeedbackHelper.isResponseNavigationBlocked())) {\r\n                if (_this.navigateTo === enums.SaveAndNavigate.toSupervisorRemark) {\r\n                    // Response Going from readonly mode to marking. Reset the message related values from response screen.\r\n                    _this.resetAndCloseMessagePanel();\r\n                }\r\n                // if navigate away from Resposne then close the response and move to worklist.\r\n                popupHelper.navigateAway(_this.navigateTo);\r\n            }\r\n            else if (actionFromCombinedPopup) {\r\n                popupHelper.navigateAway(navigateTo);\r\n            }\r\n            _this.navigateTo = enums.SaveAndNavigate.none;\r\n        };\r\n        /**\r\n         * Method fired when discard message is cancelled.\r\n         */\r\n        _this.onDiscardMessageCancelled = function () {\r\n            // reset navigate away from response\r\n            _this.navigateTo = enums.SaveAndNavigate.none;\r\n            messageHelper.handleSubjectChange(_this.messageSubject);\r\n        };\r\n        /**\r\n         * Handles changes in the message panel subject section.\r\n         * @param e\r\n         */\r\n        _this.handleSubjectChange = function (subject) {\r\n            _this.messageSubject = subject;\r\n            _this.enableDisableSendButton();\r\n            messageHelper.handleSubjectChange(subject);\r\n            _this.setState({ renderedOn: Date.now() });\r\n        };\r\n        /**\r\n         * Enable and disable send button on tinyMCE editor change.\r\n         */\r\n        _this.toggleSaveButtonState = function () {\r\n            _this.enableDisableSendButton();\r\n        };\r\n        /**\r\n         * Method fired when the message panel is minimized.\r\n         */\r\n        _this.onMinimize = function () {\r\n            messagingActionCreator.messageAction(enums.MessageViewAction.Minimize);\r\n        };\r\n        /**\r\n         * Method fired when the message panel is maximized.\r\n         */\r\n        _this.onMaximize = function () {\r\n            messagingActionCreator.messageAction(enums.MessageViewAction.Maximize);\r\n        };\r\n        /**\r\n         * This method will call on message send button click\r\n         */\r\n        _this.onMessageSend = function (messageType) {\r\n            _this.enableDisableSendButton();\r\n            var candidateScriptId = undefined;\r\n            var markGroupId = undefined;\r\n            var esMarkGroupId = undefined;\r\n            _this.messageBody = tinymce.get(_this.msgEditorId).getContent();\r\n            switch (messageType) {\r\n                case enums.MessageType.ResponseCompose:\r\n                case enums.MessageType.ResponseReply:\r\n                case enums.MessageType.ResponseForward:\r\n                    // selected Qig id for compose message in response screen\r\n                    _this.selectedQigItemId = qigStore.instance.selectedQIGForMarkerOperation.markSchemeGroupId;\r\n                    _this.questionPaperPartId = qigStore.instance.selectedQIGForMarkerOperation.questionPaperPartId;\r\n                    var openedResponseDetails = _this.props.responseId ?\r\n                        markerOperationModeFactory.operationMode.openedResponseDetails(_this.props.responseId.toString()) : null;\r\n                    var isEsResponse = (worklistStore.instance.currentWorklistType === enums.WorklistType.standardisation\r\n                        || worklistStore.instance.currentWorklistType === enums.WorklistType.practice ||\r\n                        worklistStore.instance.currentWorklistType === enums.WorklistType.secondstandardisation\r\n                        || markerOperationModeFactory.operationMode.isStandardisationSetupMode) ? true : false;\r\n                    if (openedResponseDetails) {\r\n                        candidateScriptId = openedResponseDetails.candidateScriptId;\r\n                        if (markerOperationModeFactory.operationMode.isStandardisationSetupMode) {\r\n                            esMarkGroupId = openedResponseDetails.esMarkGroupId;\r\n                        }\r\n                        else {\r\n                            markGroupId = isEsResponse ? undefined : openedResponseDetails.markGroupId;\r\n                            esMarkGroupId = isEsResponse ? openedResponseDetails.markGroupId : undefined;\r\n                        }\r\n                    }\r\n                    break;\r\n                // Not setting candidateScriptId, markGroupId, esMarkGroupId if composing message from response and worklist\r\n                // since not associated with any particular response.\r\n                case enums.MessageType.InboxCompose:\r\n                case enums.MessageType.WorklistCompose:\r\n                    break;\r\n                default:\r\n                    var currentMessageDetails = _this.props.selectedMsgDetails;\r\n                    if (currentMessageDetails !== undefined && currentMessageDetails !== null) {\r\n                        candidateScriptId = currentMessageDetails.candidateScriptId;\r\n                        markGroupId = currentMessageDetails.markGroupId;\r\n                        esMarkGroupId = currentMessageDetails.esMarkGroupId;\r\n                    }\r\n                    break;\r\n            }\r\n            // fetching currently selected qig's examiner roleId\r\n            var examinerRoleId = 0;\r\n            var msg = messageStore.instance.messagesMarkSchemes;\r\n            if (msg) {\r\n                msg.forEach(function (message) {\r\n                    if (message.markSchemeGroupId === _this.selectedQigItemId) {\r\n                        examinerRoleId = message.examinerRoleId;\r\n                    }\r\n                });\r\n            }\r\n            var toTeam = messageStore.instance.teamDetails ? messageStore.instance.teamDetails.team.toTeam : false;\r\n            messagingActionCreator.sendExaminerMessage(_this.toFieldIds, _this.messageBody, _this.messageSubject, _this.questionPaperPartId, _this.props.responseId, _this.priorityDropDownSelectedItem, _this.selectedQigItemId, candidateScriptId, markGroupId, esMarkGroupId, toTeam, examinerRoleId);\r\n        };\r\n        /**\r\n         * Navigating away from message panel when the pop up is opened\r\n         */\r\n        _this.onNavigateFromMessagePanel = function (messageNavigationArguments) {\r\n            if (messageNavigationArguments.hasMessageContainsDirtyValue === undefined) {\r\n                // Should be possible to open the response, If the message composed from Team management\r\n                if (_this.isMessagePanelEdited) {\r\n                    messagingActionCreator.messageAction(enums.MessageViewAction.Maximize);\r\n                    // To maximise the message panel when the discard popup is shown\r\n                    _this.isMessagePopupMinimized = false;\r\n                    _this.setState({ renderedOn: Date.now() });\r\n                    messageNavigationArguments.hasMessageContainsDirtyValue = true;\r\n                    messagingActionCreator.canMessageNavigate(messageNavigationArguments);\r\n                }\r\n                else if (!messageNavigationArguments.canNavigate) {\r\n                    messagingActionCreator.messageAction(enums.MessageViewAction.Close);\r\n                    messageNavigationArguments.hasMessageContainsDirtyValue = false;\r\n                    if (messageNavigationArguments.navigateTo === enums.MessageNavigation.newException) {\r\n                        _this.navigateTo = enums.SaveAndNavigate.newExceptionButtonClick;\r\n                    }\r\n                    else if (messageNavigationArguments.navigateTo === enums.MessageNavigation.exceptionWithInResponse) {\r\n                        _this.navigateTo = enums.SaveAndNavigate.exceptionWithInResponse;\r\n                    }\r\n                    else if (messageNavigationArguments.navigateTo === enums.MessageNavigation.newExceptionFromMediaErrorDialog) {\r\n                        _this.navigateTo = enums.SaveAndNavigate.newExceptionFromMediaErrorDialog;\r\n                    }\r\n                    _this.resetAndCloseMessagePanel();\r\n                    messageNavigationArguments.canNavigate = true;\r\n                    messagingActionCreator.canMessageNavigate(messageNavigationArguments);\r\n                }\r\n            }\r\n            else if (messageNavigationArguments.hasMessageContainsDirtyValue && messageNavigationArguments.canNavigate) {\r\n                _this.isMessagePopupMinimized = false;\r\n                if (messageNavigationArguments.navigateTo === enums.MessageNavigation.newException) {\r\n                    _this.navigateTo = enums.SaveAndNavigate.newExceptionButtonClick;\r\n                }\r\n                else if (messageNavigationArguments.navigateTo === enums.MessageNavigation.exceptionWithInResponse) {\r\n                    _this.navigateTo = enums.SaveAndNavigate.exceptionWithInResponse;\r\n                }\r\n                else if (messageNavigationArguments.navigateTo === enums.MessageNavigation.newExceptionFromMediaErrorDialog) {\r\n                    _this.navigateTo = enums.SaveAndNavigate.newExceptionFromMediaErrorDialog;\r\n                }\r\n                _this.resetAndCloseMessagePanel();\r\n            }\r\n        };\r\n        /**\r\n         * checks whether the supervisor examiner is valid to send a message or not\r\n         */\r\n        _this.messageSendValidationCheck = function (messageType) {\r\n            _this.sendMessageActionInProgress = true;\r\n            _this.messageType = messageType;\r\n            // While in SEP view we need to check whether the supervisor examiner is valid to send a message to subordinate examiner\r\n            if (markerOperationModeFactory.operationMode.isHelpExaminersView) {\r\n                _this.enableDisableSendButton();\r\n                var dataCollection = new Array();\r\n                var examinerSEPAction = {\r\n                    examinerRoleId: qigStore.instance.selectedQIGForMarkerOperation.examinerRoleId,\r\n                    markSchemeGroupId: qigStore.instance.getSelectedQIGForTheLoggedInUser.markSchemeGroupId,\r\n                    requestedByExaminerRoleId: qigStore.instance.getSelectedQIGForTheLoggedInUser.examinerRoleId\r\n                };\r\n                dataCollection.push(examinerSEPAction);\r\n                var examinerSEPActions = Immutable.List(dataCollection);\r\n                var doSEPApprovalManagementActionArgument = {\r\n                    actionIdentifier: enums.SEPAction.SendMessage,\r\n                    examiners: examinerSEPActions\r\n                };\r\n                teamManagementActionCreator.ExecuteApprovalManagementAction(doSEPApprovalManagementActionArgument);\r\n            }\r\n            else {\r\n                _this.onMessageSend(_this.messageType);\r\n            }\r\n        };\r\n        /**\r\n         * To check whether the examiner is valid to send a message\r\n         */\r\n        _this.examinerValidation = function (actionIdentifier) {\r\n            // No need to handle, If user clicks help examiners and immidietly navigated to inbox\r\n            if (_this.props.messageType === enums.MessageType.InboxCompose) {\r\n                return;\r\n            }\r\n            // If there is no failure code then the supervisor examiner is valid to send a message\r\n            if (actionIdentifier === enums.SEPAction.SendMessage) {\r\n                _this.onMessageSend(_this.messageType);\r\n            }\r\n        };\r\n        /**\r\n         * enable send button state on offline\r\n         */\r\n        _this.onOnlineStatusChanged = function () {\r\n            if (!applicationStore.instance.isOnline) {\r\n                _this.toggleSaveButtonState();\r\n            }\r\n        };\r\n        _this.priorityDropDownSelectedItem = enums.MessagePriority.Standard;\r\n        _this.isSendButtonDisabled = true;\r\n        _this.messageSubject = '';\r\n        _this.messageBody = '';\r\n        _this._boundHandleOnClick = _this.handleOnClick.bind(_this);\r\n        _this.isSubordinateSelected = false;\r\n        return _this;\r\n    }\r\n    Object.defineProperty(MessageBase.prototype, \"isMessagePanelEdited\", {\r\n        /**\r\n         * Returns a boolean indicating whether the message panel is edited.\r\n         */\r\n        get: function () {\r\n            return messageHelper.isMessagePanelEdited(this.props.messageType, this.toFieldValues, this.toFieldIds);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Sets the enable/disable status of send button.\r\n     */\r\n    MessageBase.prototype.enableDisableSendButton = function () {\r\n        var currentSendButtonStatusAfterChange = true;\r\n        var activeEditorgetContentLength = 0;\r\n        // if sending message is in progress no need to execute logic to enabling/ disabling button\r\n        if (!this.sendMessageActionInProgress) {\r\n            var activeEditor = tinymce.get(this.msgEditorId);\r\n            //Defect Id:48277 First time active Editor does not contains 'Body' Then throws exception 'Body Undefined'\r\n            if (activeEditor && activeEditor.contentDocument != null) {\r\n                activeEditorgetContentLength = activeEditor.getContent({ format: 'text' }).trim().length;\r\n            }\r\n            if (this.props.messageType === enums.MessageType.InboxCompose ||\r\n                this.props.messageType === enums.MessageType.ResponseCompose\r\n                || this.props.messageType === enums.MessageType.WorklistCompose ||\r\n                this.props.messageType === enums.MessageType.ResponseReply\r\n                || this.props.messageType === enums.MessageType.ResponseForward ||\r\n                this.props.messageType === enums.MessageType.TeamCompose) {\r\n                currentSendButtonStatusAfterChange = !(this.messageSubject.trim().length > 0 &&\r\n                    (this.toFieldIds && this.toFieldIds.length > 0)\r\n                    && (this.toFieldValues && this.toFieldValues.length > 0)\r\n                    && (activeEditorgetContentLength > 0 ||\r\n                        messageHelper._isPasteEnabled));\r\n            }\r\n            else if (this.props.messageType === enums.MessageType.InboxForward ||\r\n                this.props.messageType === enums.MessageType.InboxReply) {\r\n                currentSendButtonStatusAfterChange = !(this.messageSubject.trim().length > 0\r\n                    && (this.toFieldIds && this.toFieldIds.length > 0)\r\n                    && (this.toFieldValues && this.toFieldValues.length > 0)\r\n                    && this.selectedQigItemId > 1\r\n                    && (activeEditorgetContentLength > 0\r\n                        || messageHelper._isPasteEnabled));\r\n            }\r\n        }\r\n        else {\r\n            // disable send button when send message action is in progress if the application is online\r\n            currentSendButtonStatusAfterChange = applicationStore.instance.isOnline;\r\n        }\r\n        if (this.isSendButtonDisabled !== currentSendButtonStatusAfterChange) {\r\n            this.isSendButtonDisabled = currentSendButtonStatusAfterChange;\r\n            // It is noticed due to render in same time, state change not happening. Add some extra time for rendering.\r\n            this.setState({ renderedOn: Date.now() + 10 });\r\n        }\r\n        // Reset setPasteEnabledAction as false after the paste action fired.\r\n        messageHelper.setPasteEnabledAction(false);\r\n    };\r\n    return MessageBase;\r\n}(pureRenderComponent));\r\nmodule.exports = MessageBase;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDYyLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvbWVzc2FnZS9tZXNzYWdlYmFzZS50cz84MDA0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBwdXJlUmVuZGVyQ29tcG9uZW50ID0gcmVxdWlyZSgnLi4vYmFzZS9wdXJlcmVuZGVyY29tcG9uZW50Jyk7XHJcbmltcG9ydCBSZWFjdERvbSA9IHJlcXVpcmUoJ3JlYWN0LWRvbScpO1xyXG5pbXBvcnQgZW51bXMgPSByZXF1aXJlKCcuLi91dGlsaXR5L2VudW1zJyk7XHJcbmltcG9ydCBsb2NhbGVTdG9yZSA9IHJlcXVpcmUoJy4uLy4uL3N0b3Jlcy9sb2NhbGUvbG9jYWxlc3RvcmUnKTtcclxuaW1wb3J0IGV4YW1pbmVyU3RvcmUgPSByZXF1aXJlKCcuLi8uLi9zdG9yZXMvbWFya2VyaW5mb3JtYXRpb24vZXhhbWluZXJzdG9yZScpO1xyXG5pbXBvcnQgbWVzc2FnaW5nQWN0aW9uQ3JlYXRvciA9IHJlcXVpcmUoJy4uLy4uL2FjdGlvbnMvbWVzc2FnaW5nL21lc3NhZ2luZ2FjdGlvbmNyZWF0b3InKTtcclxuaW1wb3J0IHBvcHVwSGVscGVyID0gcmVxdWlyZSgnLi4vdXRpbGl0eS9wb3B1cC9wb3B1cGhlbHBlcicpO1xyXG5pbXBvcnQgcG9wVXBEaXNwbGF5QWN0aW9uQ3JlYXRvciA9IHJlcXVpcmUoJy4uLy4uL2FjdGlvbnMvcG9wdXBkaXNwbGF5L3BvcHVwZGlzcGxheWFjdGlvbmNyZWF0b3InKTtcclxuaW1wb3J0IHFpZ1N0b3JlID0gcmVxdWlyZSgnLi4vLi4vc3RvcmVzL3FpZ3NlbGVjdG9yL3FpZ3N0b3JlJyk7XHJcbmltcG9ydCBtZXNzYWdlU3RvcmUgPSByZXF1aXJlKCcuLi8uLi9zdG9yZXMvbWVzc2FnZS9tZXNzYWdlc3RvcmUnKTtcclxuaW1wb3J0IGh0bWxVdGlsaXRpZXMgPSByZXF1aXJlKCcuLi8uLi91dGlsaXR5L2dlbmVyaWMvaHRtbHV0aWxpdGllcycpO1xyXG5pbXBvcnQgd29ya2xpc3RTdG9yZSA9IHJlcXVpcmUoJy4uLy4uL3N0b3Jlcy93b3JrbGlzdC93b3JrbGlzdHN0b3JlJyk7XHJcbmltcG9ydCByZXNwb25zZVN0b3JlID0gcmVxdWlyZSgnLi4vLi4vc3RvcmVzL3Jlc3BvbnNlL3Jlc3BvbnNlc3RvcmUnKTtcclxuaW1wb3J0IG1hcmtpbmdBY3Rpb25DcmVhdG9yID0gcmVxdWlyZSgnLi4vLi4vYWN0aW9ucy9tYXJraW5nL21hcmtpbmdhY3Rpb25jcmVhdG9yJyk7XHJcbmltcG9ydCBxdWFsaXR5ZmVlZGJhY2tIZWxwZXIgPSByZXF1aXJlKCcuLi8uLi91dGlsaXR5L3F1YWxpdHlmZWVkYmFjay9xdWFsaXR5ZmVlZGJhY2toZWxwZXInKTtcclxuaW1wb3J0IG1lc3NhZ2VIZWxwZXIgPSByZXF1aXJlKCcuLi91dGlsaXR5L21lc3NhZ2UvbWVzc2FnZWhlbHBlcicpO1xyXG5pbXBvcnQgbWFya2VyT3BlcmF0aW9uTW9kZUZhY3RvcnkgPSByZXF1aXJlKCcuLi91dGlsaXR5L21hcmtlcm9wZXJhdGlvbm1vZGUvbWFya2Vyb3BlcmF0aW9ubW9kZWZhY3RvcnknKTtcclxuaW1wb3J0IHRlYW1NYW5hZ2VtZW50QWN0aW9uQ3JlYXRvciA9IHJlcXVpcmUoJy4uLy4uL2FjdGlvbnMvdGVhbW1hbmFnZW1lbnQvdGVhbW1hbmFnZW1lbnRhY3Rpb25jcmVhdG9yJyk7XHJcbmltcG9ydCBhcHBsaWNhdGlvblN0b3JlID0gcmVxdWlyZSgnLi4vLi4vc3RvcmVzL2FwcGxpY2F0aW9ub2ZmbGluZS9hcHBsaWNhdGlvbnN0b3JlJyk7XHJcbmltcG9ydCBJbW11dGFibGUgPSByZXF1aXJlKCdpbW11dGFibGUnKTtcclxuXHJcbmRlY2xhcmUgbGV0IHRpbnltY2U6IGFueTtcclxuXHJcbmNsYXNzIE1lc3NhZ2VCYXNlIGV4dGVuZHMgcHVyZVJlbmRlckNvbXBvbmVudDxhbnksIGFueT4ge1xyXG5cclxuICAgIHByb3RlY3RlZCBpc1NlbmRCdXR0b25EaXNhYmxlZDogYm9vbGVhbjtcclxuICAgIHByb3RlY3RlZCB0b0ZpZWxkSWRzOiBBcnJheTxudW1iZXI+O1xyXG4gICAgcHJvdGVjdGVkIHRvRmllbGRWYWx1ZXM6IEFycmF5PHN0cmluZz47XHJcbiAgICBwcm90ZWN0ZWQgc2VsZWN0ZWRRaWdJdGVtSWQ6IG51bWJlcjtcclxuICAgIHByb3RlY3RlZCBzZWxlY3RlZFFpZzogc3RyaW5nO1xyXG4gICAgcHJvdGVjdGVkIHF1ZXN0aW9uUGFwZXJQYXJ0SWQ6IG51bWJlcjtcclxuICAgIHByb3RlY3RlZCBtZXNzYWdlU3ViamVjdDogc3RyaW5nO1xyXG4gICAgcHJvdGVjdGVkIG1lc3NhZ2VCb2R5OiBzdHJpbmc7XHJcbiAgICBwcm90ZWN0ZWQgaXNEcm9wRG93bk9wZW46IGJvb2xlYW47XHJcbiAgICBwcm90ZWN0ZWQgaXNRaWdEcm9wRG93bk9wZW46IGJvb2xlYW47XHJcbiAgICBwcm90ZWN0ZWQgcHJpb3JpdHlEcm9wRG93blNlbGVjdGVkSXRlbTogZW51bXMuTWVzc2FnZVByaW9yaXR5O1xyXG4gICAgcHJvdGVjdGVkIGlzU2VsZWN0ZWRJdGVtQ2xpY2tlZDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgcHJvdGVjdGVkIG5hdmlnYXRlVG86IGVudW1zLlNhdmVBbmROYXZpZ2F0ZSA9IGVudW1zLlNhdmVBbmROYXZpZ2F0ZS5ub25lO1xyXG4gICAgcHJvdGVjdGVkIG1zZ0VkaXRvcklkOiBzdHJpbmcgPSAnbXNnLXRpbnltY2UtZWRpdG9yJztcclxuICAgIHByb3RlY3RlZCBfYm91bmRIYW5kbGVPbkNsaWNrOiBFdmVudExpc3RlbmVyT2JqZWN0ID0gbnVsbDtcclxuICAgIHByb3RlY3RlZCBjbGlja2VkRHJvcERvd246IGVudW1zLkRyb3BEb3duVHlwZTtcclxuICAgIHByb3RlY3RlZCBpc01lc3NhZ2VQb3B1cE1pbmltaXplZDogYm9vbGVhbjtcclxuICAgIHByb3RlY3RlZCBpc1N1Ym9yZGluYXRlU2VsZWN0ZWQ6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIHByb3RlY3RlZCBzZW5kTWVzc2FnZUFjdGlvbkluUHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIHByb3RlY3RlZCBtZXNzYWdlVHlwZTogZW51bXMuTWVzc2FnZVR5cGUgPSBlbnVtcy5NZXNzYWdlVHlwZS5Ob25lO1xyXG5cclxuICAgIC8qKiByZWZzICovXHJcbiAgICBwdWJsaWMgcmVmczoge1xyXG4gICAgICAgIFtrZXk6IHN0cmluZ106IChFbGVtZW50KTtcclxuICAgICAgICBtc2dFZGl0b3I6IChIVE1MRGl2RWxlbWVudCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGNvbnN0cnVjdG9yXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKHByb3BzOiBhbnksIHN0YXRlOiBhbnkpIHtcclxuICAgICAgICBzdXBlcihwcm9wcywgc3RhdGUpO1xyXG5cclxuICAgICAgICB0aGlzLnByaW9yaXR5RHJvcERvd25TZWxlY3RlZEl0ZW0gPSBlbnVtcy5NZXNzYWdlUHJpb3JpdHkuU3RhbmRhcmQ7XHJcbiAgICAgICAgdGhpcy5pc1NlbmRCdXR0b25EaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5tZXNzYWdlU3ViamVjdCA9ICcnO1xyXG4gICAgICAgIHRoaXMubWVzc2FnZUJvZHkgPSAnJztcclxuICAgICAgICB0aGlzLl9ib3VuZEhhbmRsZU9uQ2xpY2sgPSB0aGlzLmhhbmRsZU9uQ2xpY2suYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLmlzU3Vib3JkaW5hdGVTZWxlY3RlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2FsbGJhY2sgZnVuY3Rpb24gZm9yIGRyb3Bkb3duIHNlbGVjdFxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgb25TZWxlY3QgPSAoc2VsZWN0ZWRJdGVtOiBlbnVtcy5NZXNzYWdlUHJpb3JpdHksIGV2ZW50OiBhbnkpOiB2b2lkID0+IHtcclxuICAgICAgICB0aGlzLnByaW9yaXR5RHJvcERvd25TZWxlY3RlZEl0ZW0gPSBzZWxlY3RlZEl0ZW07XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHJlbmRlcmVkT246IERhdGUubm93KCkgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogIENhbGxiYWNrIGZ1bmN0aW9uIGZvciBkcm9wZG93biBjbGlja1xyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgb25Ecm9wRG93bkNsaWNrID0gKGRyb3BEb3duOiBlbnVtcy5Ecm9wRG93blR5cGUpOiB2b2lkID0+IHtcclxuICAgICAgICB0aGlzLmNsaWNrZWREcm9wRG93biA9IGRyb3BEb3duO1xyXG4gICAgICAgIHRoaXMuaXNTZWxlY3RlZEl0ZW1DbGlja2VkID0gdHJ1ZTtcclxuICAgICAgICBpZiAodGhpcy5jbGlja2VkRHJvcERvd24gPT09IGVudW1zLkRyb3BEb3duVHlwZS5Qcmlvcml0eSkge1xyXG4gICAgICAgICAgICB0aGlzLmlzUWlnRHJvcERvd25PcGVuID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB0aGlzLmlzRHJvcERvd25PcGVuID0gdGhpcy5pc0Ryb3BEb3duT3BlbiA9PT0gdW5kZWZpbmVkID8gdHJ1ZSA6ICF0aGlzLmlzRHJvcERvd25PcGVuO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5jbGlja2VkRHJvcERvd24gPT09IGVudW1zLkRyb3BEb3duVHlwZS5RSUcpIHtcclxuICAgICAgICAgICAgdGhpcy5pc0Ryb3BEb3duT3BlbiA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgdGhpcy5pc1FpZ0Ryb3BEb3duT3BlbiA9IHRoaXMuaXNRaWdEcm9wRG93bk9wZW4gPT09IHVuZGVmaW5lZCA/IHRydWUgOiAhdGhpcy5pc1FpZ0Ryb3BEb3duT3BlbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHJlbmRlcmVkT246IERhdGUubm93KCkgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGFuZGxlIGNsaWNrIGV2ZW50cyBvbiB0aGUgd2luZG93IGFuZCBjb2xsYXBzZSBwcmlvcml0eSBzZWxlY3Rpb24gZHJvcGRvd25cclxuICAgICAqIEBwYXJhbSB7YW55fSBzb3VyY2UgLSBUaGUgc291cmNlIGVsZW1lbnRcclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIGhhbmRsZU9uQ2xpY2sgPSAoKTogYW55ID0+IHtcclxuICAgICAgICBpZiAoIXRoaXMuaXNTZWxlY3RlZEl0ZW1DbGlja2VkICYmICgodGhpcy5pc0Ryb3BEb3duT3BlbiAhPT0gdW5kZWZpbmVkICYmIHRoaXMuaXNEcm9wRG93bk9wZW4pXHJcbiAgICAgICAgICAgIHx8ICh0aGlzLmlzUWlnRHJvcERvd25PcGVuICE9PSB1bmRlZmluZWQgJiYgdGhpcy5pc1FpZ0Ryb3BEb3duT3BlbikpKSB7XHJcbiAgICAgICAgICAgIC8vIGNvbGxhcHNlIHRoZSBwcmlvcml0eSBkcm9wZG93blxyXG4gICAgICAgICAgICB0aGlzLmlzRHJvcERvd25PcGVuID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuaXNRaWdEcm9wRG93bk9wZW4gPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHJlbmRlcmVkT246IERhdGUubm93KCkgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5pc1NlbGVjdGVkSXRlbUNsaWNrZWQgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogIFRoaXMgd2lsbCByZXR1cm4gdGhlIGxvY2FsaXNlZCBzdHJpbmcgZm9yIG1lc3NhZ2UgcHJpb3JpdHkgZHJvcGRvd25cclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIGdldFByaW9yaXR5RHJvcERvd25JdGVtID0gKGRyb3BEb3duSXRlbTogZW51bXMuTWVzc2FnZVByaW9yaXR5KTogc3RyaW5nID0+IHtcclxuICAgICAgICBsZXQgbG9jYWxpc2VkRHJvcERvd25JdGVtOiBzdHJpbmc7XHJcblxyXG4gICAgICAgIHN3aXRjaCAoZHJvcERvd25JdGVtKSB7XHJcbiAgICAgICAgICAgIGNhc2UgZW51bXMuTWVzc2FnZVByaW9yaXR5LkltcG9ydGFudDpcclxuICAgICAgICAgICAgICAgIGxvY2FsaXNlZERyb3BEb3duSXRlbSA9IGxvY2FsZVN0b3JlLmluc3RhbmNlLlRyYW5zbGF0ZVRleHQoJ21lc3NhZ2luZy5jb21wb3NlLW1lc3NhZ2UucHJpb3JpdHkuaW1wb3J0YW50Jyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBlbnVtcy5NZXNzYWdlUHJpb3JpdHkuTWFuZGF0b3J5OlxyXG4gICAgICAgICAgICAgICAgbG9jYWxpc2VkRHJvcERvd25JdGVtID0gbG9jYWxlU3RvcmUuaW5zdGFuY2UuVHJhbnNsYXRlVGV4dCgnbWVzc2FnaW5nLmNvbXBvc2UtbWVzc2FnZS5wcmlvcml0eS5tYW5kYXRvcnknKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgbG9jYWxpc2VkRHJvcERvd25JdGVtID0gbG9jYWxlU3RvcmUuaW5zdGFuY2UuVHJhbnNsYXRlVGV4dCgnbWVzc2FnaW5nLmNvbXBvc2UtbWVzc2FnZS5wcmlvcml0eS5zdGFuZGFyZCcpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBsb2NhbGlzZWREcm9wRG93bkl0ZW07XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogTWV0aG9kIGZpcmVkIHdoZW4gdGhlIG1lc3NhZ2UgaXMgY2xvc2VkLlxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgb25NZXNzYWdlQ2xvc2UgPSAoKSA9PiB7XHJcbiAgICAgICAgLy8gU2hvdyBkaXNjYXJkIG1lc3NhZ2UgaWYgY29udGVudCBlZGl0ZWQ7IG9yIGp1c3QgY2xvc2UgdGhlIHBhbmVsLlxyXG4gICAgICAgIGlmICh0aGlzLmlzTWVzc2FnZVBhbmVsRWRpdGVkKSB7XHJcbiAgICAgICAgICAgIG1lc3NhZ2luZ0FjdGlvbkNyZWF0b3IubWVzc2FnZUFjdGlvbihlbnVtcy5NZXNzYWdlVmlld0FjdGlvbi5NYXhpbWl6ZSk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm5hdmlnYXRlVG8gPT09IGVudW1zLlNhdmVBbmROYXZpZ2F0ZS5uZXdNZXNzYWdlQnV0dG9uQ2xpY2tcclxuICAgICAgICAgICAgICAgIHx8IHRoaXMubmF2aWdhdGVUbyA9PT0gZW51bXMuU2F2ZUFuZE5hdmlnYXRlLnRvUmVwbHlNZXNzYWdlXHJcbiAgICAgICAgICAgICAgICB8fCB0aGlzLm5hdmlnYXRlVG8gPT09IGVudW1zLlNhdmVBbmROYXZpZ2F0ZS50b0ZvcndhcmRNZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICAgICBwb3BVcERpc3BsYXlBY3Rpb25DcmVhdG9yLnBvcFVwRGlzcGxheShlbnVtcy5Qb3BVcFR5cGUuRGlzY2FyZE9uTmV3TWVzc2FnZUJ1dHRvbkNsaWNrLFxyXG4gICAgICAgICAgICAgICAgICAgIGVudW1zLlBvcFVwQWN0aW9uVHlwZS5TaG93LFxyXG4gICAgICAgICAgICAgICAgICAgIGVudW1zLlNhdmVBbmROYXZpZ2F0ZS5ub25lLFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9wdXBDb250ZW50OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhbGVTdG9yZS5pbnN0YW5jZS5UcmFuc2xhdGVUZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoJ21lc3NhZ2luZy5jb21wb3NlLW1lc3NhZ2UuZGlzY2FyZC1tZXNzYWdlLWRpYWxvZy5ib2R5LXN0YXJ0LW5ldy1tZXNzYWdlLXdoaWxlLWNvbXBvc2luZycpXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5uYXZpZ2F0ZVRvID09PSBlbnVtcy5TYXZlQW5kTmF2aWdhdGUudG9OZXdSZXNwb25zZU1lc3NhZ2VDb21wb3NlKSB7XHJcbiAgICAgICAgICAgICAgICBwb3BVcERpc3BsYXlBY3Rpb25DcmVhdG9yLnBvcFVwRGlzcGxheShlbnVtcy5Qb3BVcFR5cGUuRGlzY2FyZE9uTmV3TWVzc2FnZUJ1dHRvbkNsaWNrLFxyXG4gICAgICAgICAgICAgICAgICAgIGVudW1zLlBvcFVwQWN0aW9uVHlwZS5TaG93LFxyXG4gICAgICAgICAgICAgICAgICAgIGVudW1zLlNhdmVBbmROYXZpZ2F0ZS5ub25lLFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9wdXBDb250ZW50OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhbGVTdG9yZS5pbnN0YW5jZS5UcmFuc2xhdGVUZXh0KCdtYXJraW5nLnJlc3BvbnNlLmRpc2NhcmQtbWVzc2FnZS1vci1leGNlcHRpb24tZGlhbG9nLmJvZHknKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbGV0IG1lc3NhZ2VUeXBlOiBlbnVtcy5Qb3BVcFR5cGUgPSB0aGlzLm5hdmlnYXRlVG8gIT09IGVudW1zLlNhdmVBbmROYXZpZ2F0ZS5ub25lXHJcbiAgICAgICAgICAgICAgICAgICAgPyBlbnVtcy5Qb3BVcFR5cGUuRGlzY2FyZE1lc3NhZ2VOYXZpZ2F0ZUF3YXkgOiBlbnVtcy5Qb3BVcFR5cGUuRGlzY2FyZE1lc3NhZ2U7XHJcbiAgICAgICAgICAgICAgICBwb3BVcERpc3BsYXlBY3Rpb25DcmVhdG9yLnBvcFVwRGlzcGxheShcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlVHlwZSxcclxuICAgICAgICAgICAgICAgICAgICBlbnVtcy5Qb3BVcEFjdGlvblR5cGUuU2hvdyxcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlU3RvcmUuaW5zdGFuY2UubmF2aWdhdGVGcm9tLFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9wdXBDb250ZW50OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5uYXZpZ2F0ZVRvID09PSBlbnVtcy5TYXZlQW5kTmF2aWdhdGUubWVzc2FnZVdpdGhJblJlc3BvbnNlID9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsZVN0b3JlLmluc3RhbmNlLlRyYW5zbGF0ZVRleHQoJ21hcmtpbmcucmVzcG9uc2UuZGlzY2FyZC1tZXNzYWdlLW9yLWV4Y2VwdGlvbi1kaWFsb2cuYm9keScpIDogdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLm5hdmlnYXRlVG8gIT09IGVudW1zLlNhdmVBbmROYXZpZ2F0ZS5ub25lICYmIHRoaXMubmF2aWdhdGVUbyAhPT0gZW51bXMuU2F2ZUFuZE5hdmlnYXRlLm1lc3NhZ2VXaXRoSW5SZXNwb25zZVxyXG4gICAgICAgICAgICAmJiB0aGlzLm5hdmlnYXRlVG8gIT09IGVudW1zLlNhdmVBbmROYXZpZ2F0ZS5uZXdNZXNzYWdlQnV0dG9uQ2xpY2spIHtcclxuICAgICAgICAgICAgLy8gaGlkZSB0aGUgbWVzc2FnZSBwYW5lbCBhbmQgbmF2aWdhdGUgYXdheVxyXG4gICAgICAgICAgICB0aGlzLm9uRGlzY2FyZE1lc3NhZ2VDb25maXJtZWQoKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMubmF2aWdhdGVUbyA9PT0gZW51bXMuU2F2ZUFuZE5hdmlnYXRlLm5ld01lc3NhZ2VCdXR0b25DbGljaykge1xyXG4gICAgICAgICAgICB0aGlzLm5hdmlnYXRlVG8gPSBlbnVtcy5TYXZlQW5kTmF2aWdhdGUubm9uZTtcclxuICAgICAgICAgICAgdGhpcy5pc01lc3NhZ2VQb3B1cE1pbmltaXplZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgcmVuZGVyZWRPbjogRGF0ZS5ub3coKSB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBDbG9zZSB0aGUgTWVzc2FnZSBQYW5lbC5cclxuICAgICAgICAgICAgdGhpcy5yZXNldEFuZENsb3NlTWVzc2FnZVBhbmVsKCk7XHJcbiAgICAgICAgICAgIHRoaXMubmF2aWdhdGVUbyA9IGVudW1zLlNhdmVBbmROYXZpZ2F0ZS5ub25lO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBOYXZpZ2F0ZSBhd2F5IGZyb20gY3VycmVudCByZXNwb25zZS5cclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIG9uTmF2aWdhdGVBd2F5RnJvbVJlc3BvbnNlID0gKG5hdmlnYXRlVG86IGVudW1zLlNhdmVBbmROYXZpZ2F0ZSkgPT4ge1xyXG4gICAgICAgIHRoaXMubmF2aWdhdGVUbyA9IG5hdmlnYXRlVG87XHJcbiAgICAgICAgdGhpcy5vbk1lc3NhZ2VDbG9zZSgpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlc2V0IG1lc3NhZ2UgcGFuZWwgYW5kIGNsb3NlXHJcbiAgICAgKi9cclxuICAgIHByb3RlY3RlZCByZXNldEFuZENsb3NlTWVzc2FnZVBhbmVsID0gKCk6IHZvaWQgPT4ge1xyXG4gICAgICAgIHRoaXMucHJpb3JpdHlEcm9wRG93blNlbGVjdGVkSXRlbSA9IGVudW1zLk1lc3NhZ2VQcmlvcml0eS5TdGFuZGFyZDtcclxuICAgICAgICB0aGlzLnRvRmllbGRWYWx1ZXMgPSBudWxsO1xyXG4gICAgICAgIHRoaXMudG9GaWVsZElkcyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5tZXNzYWdlU3ViamVjdCA9ICcnO1xyXG4gICAgICAgIHRoaXMubWVzc2FnZUJvZHkgPSAnJztcclxuICAgICAgICB0aGlzLmlzRHJvcERvd25PcGVuID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHRoaXMuaXNRaWdEcm9wRG93bk9wZW4gPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5wcm9wcy5jbG9zZU1lc3NhZ2VQYW5lbCh0aGlzLm5hdmlnYXRlVG8pO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRRaWdJdGVtSWQgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5xdWVzdGlvblBhcGVyUGFydElkID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIG1lc3NhZ2VIZWxwZXIuaGFuZGxlU3ViamVjdENoYW5nZSh0aGlzLm1lc3NhZ2VTdWJqZWN0KTtcclxuICAgICAgICB0aGlzLnNlbmRNZXNzYWdlQWN0aW9uSW5Qcm9ncmVzcyA9IGZhbHNlO1xyXG4gICAgICAgIC8vIHVwZGF0aW5nIG1lc3NhZ2UgY29tcG9uZW50IHdpdGggZGVmYXVsdCB2YWx1ZXNcclxuICAgICAgICAvLyB0aGlzIGVuYWJsZSBvciBEaXNhYmxlIHNlbmQgYnV0dG9uIHdpbGwgY2FsbCBzZXRTdGF0ZVxyXG4gICAgICAgIHRoaXMuZW5hYmxlRGlzYWJsZVNlbmRCdXR0b24oKTtcclxuXHJcbiAgICAgICAgLy8gTmVlZCB0byBVcGRhdGUgdGhlIFVJIChTdWJqZWN0IGJveCBpbiB0aGUgbWVzc2FnZSwgYWZ0ZXIgY2xvc2luZyB0aGUgbWVzc2FnZSA6IEJ1ZyAyODIyNFxyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyByZW5kZXJlZE9uOiBEYXRlLm5vdygpIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIE1ldGhvZCBmaXJlZCB3aGVuIGRpc2NhcmQgbWVzc2FnZSBpcyBjb25maXJtZWQuXHJcbiAgICAgKi9cclxuICAgIHByb3RlY3RlZCBvbkRpc2NhcmRNZXNzYWdlQ29uZmlybWVkID0gKGFjdGlvbkZyb21Db21iaW5lZFBvcHVwOiBib29sZWFuID0gZmFsc2UsXHJcbiAgICAgICAgbmF2aWdhdGVUbzogZW51bXMuU2F2ZUFuZE5hdmlnYXRlID0gZW51bXMuU2F2ZUFuZE5hdmlnYXRlLm5vbmUpID0+IHtcclxuICAgICAgICAvLyBJZiBtZXNzYWdlIHBhbmVsIGlzIG5vdCBlZGl0ZWQsIG5vIG5lZWQgdG8gY2hhbmdlIHRoZSBVSSB3aGlsZSBsb2dvdXRcclxuICAgICAgICBpZiAodGhpcy5pc01lc3NhZ2VQYW5lbEVkaXRlZCkge1xyXG4gICAgICAgICAgICAvLyBDbG9zZSB0aGUgTWVzc2FnZSBQYW5lbC5cclxuICAgICAgICAgICAgdGhpcy5yZXNldEFuZENsb3NlTWVzc2FnZVBhbmVsKCk7XHJcbiAgICAgICAgfSBlbHNlIGlmICghdGhpcy5pc01lc3NhZ2VQYW5lbEVkaXRlZCAmJiB0aGlzLm5hdmlnYXRlVG8gPT09IGVudW1zLlNhdmVBbmROYXZpZ2F0ZS5uZXdNZXNzYWdlQnV0dG9uQ2xpY2spIHtcclxuICAgICAgICAgICAgbWVzc2FnaW5nQWN0aW9uQ3JlYXRvci5tZXNzYWdlQWN0aW9uKGVudW1zLk1lc3NhZ2VWaWV3QWN0aW9uLk9wZW4pO1xyXG5cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnJlc2V0QW5kQ2xvc2VNZXNzYWdlUGFuZWwoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIG9uIG1lc3NhZ2UgY2xvc2UgbmF2aWdhdGUgYXdheSBmcm9tIHJlc3BvbnNlIHNjZW5hcmlvXHJcbiAgICAgICAgaWYgKHRoaXMubmF2aWdhdGVUbyAhPT0gZW51bXMuU2F2ZUFuZE5hdmlnYXRlLm5vbmUgJiYgdGhpcy5uYXZpZ2F0ZVRvICE9PSBlbnVtcy5TYXZlQW5kTmF2aWdhdGUubWVzc2FnZVdpdGhJblJlc3BvbnNlXHJcbiAgICAgICAgICAgICYmIHRoaXMubmF2aWdhdGVUbyAhPT0gZW51bXMuU2F2ZUFuZE5hdmlnYXRlLnRvTmV3UmVzcG9uc2VNZXNzYWdlQ29tcG9zZSAmJlxyXG4gICAgICAgICAgICAhKHRoaXMubmF2aWdhdGVUbyA9PT0gZW51bXMuU2F2ZUFuZE5hdmlnYXRlLnRvUmVzcG9uc2UgJiYgcXVhbGl0eWZlZWRiYWNrSGVscGVyLmlzUmVzcG9uc2VOYXZpZ2F0aW9uQmxvY2tlZCgpKSkge1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMubmF2aWdhdGVUbyA9PT0gZW51bXMuU2F2ZUFuZE5hdmlnYXRlLnRvU3VwZXJ2aXNvclJlbWFyaykge1xyXG4gICAgICAgICAgICAgICAgLy8gUmVzcG9uc2UgR29pbmcgZnJvbSByZWFkb25seSBtb2RlIHRvIG1hcmtpbmcuIFJlc2V0IHRoZSBtZXNzYWdlIHJlbGF0ZWQgdmFsdWVzIGZyb20gcmVzcG9uc2Ugc2NyZWVuLlxyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNldEFuZENsb3NlTWVzc2FnZVBhbmVsKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIGlmIG5hdmlnYXRlIGF3YXkgZnJvbSBSZXNwb3NuZSB0aGVuIGNsb3NlIHRoZSByZXNwb25zZSBhbmQgbW92ZSB0byB3b3JrbGlzdC5cclxuICAgICAgICAgICAgcG9wdXBIZWxwZXIubmF2aWdhdGVBd2F5KHRoaXMubmF2aWdhdGVUbyk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChhY3Rpb25Gcm9tQ29tYmluZWRQb3B1cCkge1xyXG4gICAgICAgICAgICBwb3B1cEhlbHBlci5uYXZpZ2F0ZUF3YXkobmF2aWdhdGVUbyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLm5hdmlnYXRlVG8gPSBlbnVtcy5TYXZlQW5kTmF2aWdhdGUubm9uZTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgYm9vbGVhbiBpbmRpY2F0aW5nIHdoZXRoZXIgdGhlIG1lc3NhZ2UgcGFuZWwgaXMgZWRpdGVkLlxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgZ2V0IGlzTWVzc2FnZVBhbmVsRWRpdGVkKCkge1xyXG4gICAgICAgIHJldHVybiBtZXNzYWdlSGVscGVyLmlzTWVzc2FnZVBhbmVsRWRpdGVkKHRoaXMucHJvcHMubWVzc2FnZVR5cGUsIHRoaXMudG9GaWVsZFZhbHVlcywgdGhpcy50b0ZpZWxkSWRzKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIE1ldGhvZCBmaXJlZCB3aGVuIGRpc2NhcmQgbWVzc2FnZSBpcyBjYW5jZWxsZWQuXHJcbiAgICAgKi9cclxuICAgIHByb3RlY3RlZCBvbkRpc2NhcmRNZXNzYWdlQ2FuY2VsbGVkID0gKCkgPT4ge1xyXG4gICAgICAgIC8vIHJlc2V0IG5hdmlnYXRlIGF3YXkgZnJvbSByZXNwb25zZVxyXG4gICAgICAgIHRoaXMubmF2aWdhdGVUbyA9IGVudW1zLlNhdmVBbmROYXZpZ2F0ZS5ub25lO1xyXG4gICAgICAgIG1lc3NhZ2VIZWxwZXIuaGFuZGxlU3ViamVjdENoYW5nZSh0aGlzLm1lc3NhZ2VTdWJqZWN0KTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIYW5kbGVzIGNoYW5nZXMgaW4gdGhlIG1lc3NhZ2UgcGFuZWwgc3ViamVjdCBzZWN0aW9uLlxyXG4gICAgICogQHBhcmFtIGVcclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIGhhbmRsZVN1YmplY3RDaGFuZ2UgPSAoc3ViamVjdDogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgdGhpcy5tZXNzYWdlU3ViamVjdCA9IHN1YmplY3Q7XHJcbiAgICAgICAgdGhpcy5lbmFibGVEaXNhYmxlU2VuZEJ1dHRvbigpO1xyXG4gICAgICAgIG1lc3NhZ2VIZWxwZXIuaGFuZGxlU3ViamVjdENoYW5nZShzdWJqZWN0KTtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHsgcmVuZGVyZWRPbjogRGF0ZS5ub3coKSB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXRzIHRoZSBlbmFibGUvZGlzYWJsZSBzdGF0dXMgb2Ygc2VuZCBidXR0b24uXHJcbiAgICAgKi9cclxuICAgIHByb3RlY3RlZCBlbmFibGVEaXNhYmxlU2VuZEJ1dHRvbigpIHtcclxuICAgICAgICBsZXQgY3VycmVudFNlbmRCdXR0b25TdGF0dXNBZnRlckNoYW5nZTogYm9vbGVhbiA9IHRydWU7XHJcbiAgICAgICAgbGV0IGFjdGl2ZUVkaXRvcmdldENvbnRlbnRMZW5ndGggOiBudW1iZXIgPSAwO1xyXG4gICAgICAgIC8vIGlmIHNlbmRpbmcgbWVzc2FnZSBpcyBpbiBwcm9ncmVzcyBubyBuZWVkIHRvIGV4ZWN1dGUgbG9naWMgdG8gZW5hYmxpbmcvIGRpc2FibGluZyBidXR0b25cclxuICAgICAgICBpZiAoIXRoaXMuc2VuZE1lc3NhZ2VBY3Rpb25JblByb2dyZXNzKSB7XHJcbiAgICAgICAgICAgIGxldCBhY3RpdmVFZGl0b3IgPSB0aW55bWNlLmdldCh0aGlzLm1zZ0VkaXRvcklkKTtcclxuICAgICAgICAgICAgLy9EZWZlY3QgSWQ6NDgyNzcgRmlyc3QgdGltZSBhY3RpdmUgRWRpdG9yIGRvZXMgbm90IGNvbnRhaW5zICdCb2R5JyBUaGVuIHRocm93cyBleGNlcHRpb24gJ0JvZHkgVW5kZWZpbmVkJ1xyXG4gICAgICAgICAgICBpZiAoYWN0aXZlRWRpdG9yICYmIGFjdGl2ZUVkaXRvci5jb250ZW50RG9jdW1lbnQgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgYWN0aXZlRWRpdG9yZ2V0Q29udGVudExlbmd0aCA9IGFjdGl2ZUVkaXRvci5nZXRDb250ZW50KHsgZm9ybWF0OiAndGV4dCcgfSkudHJpbSgpLmxlbmd0aDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5tZXNzYWdlVHlwZSA9PT0gZW51bXMuTWVzc2FnZVR5cGUuSW5ib3hDb21wb3NlIHx8XHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLm1lc3NhZ2VUeXBlID09PSBlbnVtcy5NZXNzYWdlVHlwZS5SZXNwb25zZUNvbXBvc2VcclxuICAgICAgICAgICAgICAgIHx8IHRoaXMucHJvcHMubWVzc2FnZVR5cGUgPT09IGVudW1zLk1lc3NhZ2VUeXBlLldvcmtsaXN0Q29tcG9zZSB8fFxyXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5tZXNzYWdlVHlwZSA9PT0gZW51bXMuTWVzc2FnZVR5cGUuUmVzcG9uc2VSZXBseVxyXG4gICAgICAgICAgICAgICAgfHwgdGhpcy5wcm9wcy5tZXNzYWdlVHlwZSA9PT0gZW51bXMuTWVzc2FnZVR5cGUuUmVzcG9uc2VGb3J3YXJkIHx8XHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLm1lc3NhZ2VUeXBlID09PSBlbnVtcy5NZXNzYWdlVHlwZS5UZWFtQ29tcG9zZSkge1xyXG4gICAgICAgICAgICAgICAgY3VycmVudFNlbmRCdXR0b25TdGF0dXNBZnRlckNoYW5nZSA9ICEodGhpcy5tZXNzYWdlU3ViamVjdC50cmltKCkubGVuZ3RoID4gMCAmJlxyXG4gICAgICAgICAgICAgICAgICAgICh0aGlzLnRvRmllbGRJZHMgJiYgdGhpcy50b0ZpZWxkSWRzLmxlbmd0aCA+IDApXHJcbiAgICAgICAgICAgICAgICAgICAgJiYgKHRoaXMudG9GaWVsZFZhbHVlcyAmJiB0aGlzLnRvRmllbGRWYWx1ZXMubGVuZ3RoID4gMClcclxuICAgICAgICAgICAgICAgICAgICAmJiAoYWN0aXZlRWRpdG9yZ2V0Q29udGVudExlbmd0aCAgPiAwIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VIZWxwZXIuX2lzUGFzdGVFbmFibGVkKSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5tZXNzYWdlVHlwZSA9PT0gZW51bXMuTWVzc2FnZVR5cGUuSW5ib3hGb3J3YXJkIHx8XHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLm1lc3NhZ2VUeXBlID09PSBlbnVtcy5NZXNzYWdlVHlwZS5JbmJveFJlcGx5KSB7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50U2VuZEJ1dHRvblN0YXR1c0FmdGVyQ2hhbmdlID0gISh0aGlzLm1lc3NhZ2VTdWJqZWN0LnRyaW0oKS5sZW5ndGggPiAwXHJcbiAgICAgICAgICAgICAgICAgICAgJiYgKHRoaXMudG9GaWVsZElkcyAmJiB0aGlzLnRvRmllbGRJZHMubGVuZ3RoID4gMClcclxuICAgICAgICAgICAgICAgICAgICAmJiAodGhpcy50b0ZpZWxkVmFsdWVzICYmIHRoaXMudG9GaWVsZFZhbHVlcy5sZW5ndGggPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgICYmIHRoaXMuc2VsZWN0ZWRRaWdJdGVtSWQgPiAxXHJcbiAgICAgICAgICAgICAgICAgICAgJiYgKGFjdGl2ZUVkaXRvcmdldENvbnRlbnRMZW5ndGggID4gMFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB8fCBtZXNzYWdlSGVscGVyLl9pc1Bhc3RlRW5hYmxlZCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gZGlzYWJsZSBzZW5kIGJ1dHRvbiB3aGVuIHNlbmQgbWVzc2FnZSBhY3Rpb24gaXMgaW4gcHJvZ3Jlc3MgaWYgdGhlIGFwcGxpY2F0aW9uIGlzIG9ubGluZVxyXG4gICAgICAgICAgICBjdXJyZW50U2VuZEJ1dHRvblN0YXR1c0FmdGVyQ2hhbmdlID0gYXBwbGljYXRpb25TdG9yZS5pbnN0YW5jZS5pc09ubGluZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmlzU2VuZEJ1dHRvbkRpc2FibGVkICE9PSBjdXJyZW50U2VuZEJ1dHRvblN0YXR1c0FmdGVyQ2hhbmdlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaXNTZW5kQnV0dG9uRGlzYWJsZWQgPSBjdXJyZW50U2VuZEJ1dHRvblN0YXR1c0FmdGVyQ2hhbmdlO1xyXG5cclxuICAgICAgICAgICAgLy8gSXQgaXMgbm90aWNlZCBkdWUgdG8gcmVuZGVyIGluIHNhbWUgdGltZSwgc3RhdGUgY2hhbmdlIG5vdCBoYXBwZW5pbmcuIEFkZCBzb21lIGV4dHJhIHRpbWUgZm9yIHJlbmRlcmluZy5cclxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHJlbmRlcmVkT246IERhdGUubm93KCkgICsgMTAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBSZXNldCBzZXRQYXN0ZUVuYWJsZWRBY3Rpb24gYXMgZmFsc2UgYWZ0ZXIgdGhlIHBhc3RlIGFjdGlvbiBmaXJlZC5cclxuICAgICAgICBtZXNzYWdlSGVscGVyLnNldFBhc3RlRW5hYmxlZEFjdGlvbihmYWxzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBFbmFibGUgYW5kIGRpc2FibGUgc2VuZCBidXR0b24gb24gdGlueU1DRSBlZGl0b3IgY2hhbmdlLlxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgdG9nZ2xlU2F2ZUJ1dHRvblN0YXRlID0gKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuZW5hYmxlRGlzYWJsZVNlbmRCdXR0b24oKTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNZXRob2QgZmlyZWQgd2hlbiB0aGUgbWVzc2FnZSBwYW5lbCBpcyBtaW5pbWl6ZWQuXHJcbiAgICAgKi9cclxuICAgIHByb3RlY3RlZCBvbk1pbmltaXplID0gKCkgPT4ge1xyXG4gICAgICAgIG1lc3NhZ2luZ0FjdGlvbkNyZWF0b3IubWVzc2FnZUFjdGlvbihlbnVtcy5NZXNzYWdlVmlld0FjdGlvbi5NaW5pbWl6ZSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogTWV0aG9kIGZpcmVkIHdoZW4gdGhlIG1lc3NhZ2UgcGFuZWwgaXMgbWF4aW1pemVkLlxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgb25NYXhpbWl6ZSA9ICgpID0+IHtcclxuICAgICAgICBtZXNzYWdpbmdBY3Rpb25DcmVhdG9yLm1lc3NhZ2VBY3Rpb24oZW51bXMuTWVzc2FnZVZpZXdBY3Rpb24uTWF4aW1pemUpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgbWV0aG9kIHdpbGwgY2FsbCBvbiBtZXNzYWdlIHNlbmQgYnV0dG9uIGNsaWNrXHJcbiAgICAgKi9cclxuICAgIHByb3RlY3RlZCBvbk1lc3NhZ2VTZW5kID0gKG1lc3NhZ2VUeXBlOiBlbnVtcy5NZXNzYWdlVHlwZSkgPT4ge1xyXG4gICAgICAgIHRoaXMuZW5hYmxlRGlzYWJsZVNlbmRCdXR0b24oKTtcclxuICAgICAgICBsZXQgY2FuZGlkYXRlU2NyaXB0SWQ6IG51bWJlciA9IHVuZGVmaW5lZDtcclxuICAgICAgICBsZXQgbWFya0dyb3VwSWQ6IG51bWJlciA9IHVuZGVmaW5lZDtcclxuICAgICAgICBsZXQgZXNNYXJrR3JvdXBJZDogbnVtYmVyID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHRoaXMubWVzc2FnZUJvZHkgPSB0aW55bWNlLmdldCh0aGlzLm1zZ0VkaXRvcklkKS5nZXRDb250ZW50KCk7XHJcbiAgICAgICAgc3dpdGNoIChtZXNzYWdlVHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlIGVudW1zLk1lc3NhZ2VUeXBlLlJlc3BvbnNlQ29tcG9zZTpcclxuICAgICAgICAgICAgY2FzZSBlbnVtcy5NZXNzYWdlVHlwZS5SZXNwb25zZVJlcGx5OlxyXG4gICAgICAgICAgICBjYXNlIGVudW1zLk1lc3NhZ2VUeXBlLlJlc3BvbnNlRm9yd2FyZDpcclxuICAgICAgICAgICAgICAgIC8vIHNlbGVjdGVkIFFpZyBpZCBmb3IgY29tcG9zZSBtZXNzYWdlIGluIHJlc3BvbnNlIHNjcmVlblxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFFpZ0l0ZW1JZCA9IHFpZ1N0b3JlLmluc3RhbmNlLnNlbGVjdGVkUUlHRm9yTWFya2VyT3BlcmF0aW9uLm1hcmtTY2hlbWVHcm91cElkO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5xdWVzdGlvblBhcGVyUGFydElkID0gcWlnU3RvcmUuaW5zdGFuY2Uuc2VsZWN0ZWRRSUdGb3JNYXJrZXJPcGVyYXRpb24ucXVlc3Rpb25QYXBlclBhcnRJZDtcclxuICAgICAgICAgICAgICAgIGxldCBvcGVuZWRSZXNwb25zZURldGFpbHMgPSB0aGlzLnByb3BzLnJlc3BvbnNlSWQgP1xyXG4gICAgICAgICAgICAgICAgICAgIG1hcmtlck9wZXJhdGlvbk1vZGVGYWN0b3J5Lm9wZXJhdGlvbk1vZGUub3BlbmVkUmVzcG9uc2VEZXRhaWxzKHRoaXMucHJvcHMucmVzcG9uc2VJZC50b1N0cmluZygpKSA6IG51bGw7XHJcbiAgICAgICAgICAgICAgICBsZXQgaXNFc1Jlc3BvbnNlOiBib29sZWFuID0gKHdvcmtsaXN0U3RvcmUuaW5zdGFuY2UuY3VycmVudFdvcmtsaXN0VHlwZSA9PT0gZW51bXMuV29ya2xpc3RUeXBlLnN0YW5kYXJkaXNhdGlvblxyXG4gICAgICAgICAgICAgICAgICAgIHx8IHdvcmtsaXN0U3RvcmUuaW5zdGFuY2UuY3VycmVudFdvcmtsaXN0VHlwZSA9PT0gZW51bXMuV29ya2xpc3RUeXBlLnByYWN0aWNlIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgd29ya2xpc3RTdG9yZS5pbnN0YW5jZS5jdXJyZW50V29ya2xpc3RUeXBlID09PSBlbnVtcy5Xb3JrbGlzdFR5cGUuc2Vjb25kc3RhbmRhcmRpc2F0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgfHwgbWFya2VyT3BlcmF0aW9uTW9kZUZhY3Rvcnkub3BlcmF0aW9uTW9kZS5pc1N0YW5kYXJkaXNhdGlvblNldHVwTW9kZSkgPyB0cnVlIDogZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBpZiAob3BlbmVkUmVzcG9uc2VEZXRhaWxzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FuZGlkYXRlU2NyaXB0SWQgPSBvcGVuZWRSZXNwb25zZURldGFpbHMuY2FuZGlkYXRlU2NyaXB0SWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1hcmtlck9wZXJhdGlvbk1vZGVGYWN0b3J5Lm9wZXJhdGlvbk1vZGUuaXNTdGFuZGFyZGlzYXRpb25TZXR1cE1vZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXNNYXJrR3JvdXBJZCA9IG9wZW5lZFJlc3BvbnNlRGV0YWlscy5lc01hcmtHcm91cElkO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtHcm91cElkID0gaXNFc1Jlc3BvbnNlID8gdW5kZWZpbmVkIDogb3BlbmVkUmVzcG9uc2VEZXRhaWxzLm1hcmtHcm91cElkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlc01hcmtHcm91cElkID0gaXNFc1Jlc3BvbnNlID8gb3BlbmVkUmVzcG9uc2VEZXRhaWxzLm1hcmtHcm91cElkIDogdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAvLyBOb3Qgc2V0dGluZyBjYW5kaWRhdGVTY3JpcHRJZCwgbWFya0dyb3VwSWQsIGVzTWFya0dyb3VwSWQgaWYgY29tcG9zaW5nIG1lc3NhZ2UgZnJvbSByZXNwb25zZSBhbmQgd29ya2xpc3RcclxuICAgICAgICAgICAgLy8gc2luY2Ugbm90IGFzc29jaWF0ZWQgd2l0aCBhbnkgcGFydGljdWxhciByZXNwb25zZS5cclxuICAgICAgICAgICAgY2FzZSBlbnVtcy5NZXNzYWdlVHlwZS5JbmJveENvbXBvc2U6XHJcbiAgICAgICAgICAgIGNhc2UgZW51bXMuTWVzc2FnZVR5cGUuV29ya2xpc3RDb21wb3NlOlxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBsZXQgY3VycmVudE1lc3NhZ2VEZXRhaWxzOiBNZXNzYWdlRGV0YWlscyA9IHRoaXMucHJvcHMuc2VsZWN0ZWRNc2dEZXRhaWxzO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50TWVzc2FnZURldGFpbHMgIT09IHVuZGVmaW5lZCAmJiBjdXJyZW50TWVzc2FnZURldGFpbHMgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYW5kaWRhdGVTY3JpcHRJZCA9IGN1cnJlbnRNZXNzYWdlRGV0YWlscy5jYW5kaWRhdGVTY3JpcHRJZDtcclxuICAgICAgICAgICAgICAgICAgICBtYXJrR3JvdXBJZCA9IGN1cnJlbnRNZXNzYWdlRGV0YWlscy5tYXJrR3JvdXBJZDtcclxuICAgICAgICAgICAgICAgICAgICBlc01hcmtHcm91cElkID0gY3VycmVudE1lc3NhZ2VEZXRhaWxzLmVzTWFya0dyb3VwSWQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGZldGNoaW5nIGN1cnJlbnRseSBzZWxlY3RlZCBxaWcncyBleGFtaW5lciByb2xlSWRcclxuICAgICAgICBsZXQgZXhhbWluZXJSb2xlSWQ6IG51bWJlciA9IDA7XHJcbiAgICAgICAgbGV0IG1zZyA9IG1lc3NhZ2VTdG9yZS5pbnN0YW5jZS5tZXNzYWdlc01hcmtTY2hlbWVzO1xyXG4gICAgICAgIGlmIChtc2cpIHtcclxuICAgICAgICAgICAgbXNnLmZvckVhY2goKG1lc3NhZ2U6IE1lc3NhZ2luZ01hcmtTY2hlbWUpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLm1hcmtTY2hlbWVHcm91cElkID09PSB0aGlzLnNlbGVjdGVkUWlnSXRlbUlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXhhbWluZXJSb2xlSWQgPSBtZXNzYWdlLmV4YW1pbmVyUm9sZUlkO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IHRvVGVhbTogYm9vbGVhbiA9IG1lc3NhZ2VTdG9yZS5pbnN0YW5jZS50ZWFtRGV0YWlscyA/IG1lc3NhZ2VTdG9yZS5pbnN0YW5jZS50ZWFtRGV0YWlscy50ZWFtLnRvVGVhbSA6IGZhbHNlO1xyXG4gICAgICAgIG1lc3NhZ2luZ0FjdGlvbkNyZWF0b3Iuc2VuZEV4YW1pbmVyTWVzc2FnZSh0aGlzLnRvRmllbGRJZHMsXHJcbiAgICAgICAgICAgIHRoaXMubWVzc2FnZUJvZHksXHJcbiAgICAgICAgICAgIHRoaXMubWVzc2FnZVN1YmplY3QsXHJcbiAgICAgICAgICAgIHRoaXMucXVlc3Rpb25QYXBlclBhcnRJZCxcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5yZXNwb25zZUlkLFxyXG4gICAgICAgICAgICB0aGlzLnByaW9yaXR5RHJvcERvd25TZWxlY3RlZEl0ZW0sXHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRRaWdJdGVtSWQsXHJcbiAgICAgICAgICAgIGNhbmRpZGF0ZVNjcmlwdElkLFxyXG4gICAgICAgICAgICBtYXJrR3JvdXBJZCxcclxuICAgICAgICAgICAgZXNNYXJrR3JvdXBJZCxcclxuICAgICAgICAgICAgdG9UZWFtLFxyXG4gICAgICAgICAgICBleGFtaW5lclJvbGVJZCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogTmF2aWdhdGluZyBhd2F5IGZyb20gbWVzc2FnZSBwYW5lbCB3aGVuIHRoZSBwb3AgdXAgaXMgb3BlbmVkXHJcbiAgICAgKi9cclxuICAgIHByb3RlY3RlZCBvbk5hdmlnYXRlRnJvbU1lc3NhZ2VQYW5lbCA9IChtZXNzYWdlTmF2aWdhdGlvbkFyZ3VtZW50czogTWVzc2FnZU5hdmlnYXRpb25Bcmd1bWVudHMpID0+IHtcclxuICAgICAgICBpZiAobWVzc2FnZU5hdmlnYXRpb25Bcmd1bWVudHMuaGFzTWVzc2FnZUNvbnRhaW5zRGlydHlWYWx1ZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIC8vIFNob3VsZCBiZSBwb3NzaWJsZSB0byBvcGVuIHRoZSByZXNwb25zZSwgSWYgdGhlIG1lc3NhZ2UgY29tcG9zZWQgZnJvbSBUZWFtIG1hbmFnZW1lbnRcclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNNZXNzYWdlUGFuZWxFZGl0ZWQpIHtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2luZ0FjdGlvbkNyZWF0b3IubWVzc2FnZUFjdGlvbihlbnVtcy5NZXNzYWdlVmlld0FjdGlvbi5NYXhpbWl6ZSk7XHJcbiAgICAgICAgICAgICAgICAvLyBUbyBtYXhpbWlzZSB0aGUgbWVzc2FnZSBwYW5lbCB3aGVuIHRoZSBkaXNjYXJkIHBvcHVwIGlzIHNob3duXHJcbiAgICAgICAgICAgICAgICB0aGlzLmlzTWVzc2FnZVBvcHVwTWluaW1pemVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgcmVuZGVyZWRPbjogRGF0ZS5ub3coKSB9KTtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VOYXZpZ2F0aW9uQXJndW1lbnRzLmhhc01lc3NhZ2VDb250YWluc0RpcnR5VmFsdWUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnaW5nQWN0aW9uQ3JlYXRvci5jYW5NZXNzYWdlTmF2aWdhdGUobWVzc2FnZU5hdmlnYXRpb25Bcmd1bWVudHMpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFtZXNzYWdlTmF2aWdhdGlvbkFyZ3VtZW50cy5jYW5OYXZpZ2F0ZSkge1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnaW5nQWN0aW9uQ3JlYXRvci5tZXNzYWdlQWN0aW9uKGVudW1zLk1lc3NhZ2VWaWV3QWN0aW9uLkNsb3NlKTtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VOYXZpZ2F0aW9uQXJndW1lbnRzLmhhc01lc3NhZ2VDb250YWluc0RpcnR5VmFsdWUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlTmF2aWdhdGlvbkFyZ3VtZW50cy5uYXZpZ2F0ZVRvID09PSBlbnVtcy5NZXNzYWdlTmF2aWdhdGlvbi5uZXdFeGNlcHRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5hdmlnYXRlVG8gPSBlbnVtcy5TYXZlQW5kTmF2aWdhdGUubmV3RXhjZXB0aW9uQnV0dG9uQ2xpY2s7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG1lc3NhZ2VOYXZpZ2F0aW9uQXJndW1lbnRzLm5hdmlnYXRlVG8gPT09IGVudW1zLk1lc3NhZ2VOYXZpZ2F0aW9uLmV4Y2VwdGlvbldpdGhJblJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uYXZpZ2F0ZVRvID0gZW51bXMuU2F2ZUFuZE5hdmlnYXRlLmV4Y2VwdGlvbldpdGhJblJlc3BvbnNlO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtZXNzYWdlTmF2aWdhdGlvbkFyZ3VtZW50cy5uYXZpZ2F0ZVRvID09PSBlbnVtcy5NZXNzYWdlTmF2aWdhdGlvbi5uZXdFeGNlcHRpb25Gcm9tTWVkaWFFcnJvckRpYWxvZykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmF2aWdhdGVUbyA9IGVudW1zLlNhdmVBbmROYXZpZ2F0ZS5uZXdFeGNlcHRpb25Gcm9tTWVkaWFFcnJvckRpYWxvZztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMucmVzZXRBbmRDbG9zZU1lc3NhZ2VQYW5lbCgpO1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZU5hdmlnYXRpb25Bcmd1bWVudHMuY2FuTmF2aWdhdGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnaW5nQWN0aW9uQ3JlYXRvci5jYW5NZXNzYWdlTmF2aWdhdGUobWVzc2FnZU5hdmlnYXRpb25Bcmd1bWVudHMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmIChtZXNzYWdlTmF2aWdhdGlvbkFyZ3VtZW50cy5oYXNNZXNzYWdlQ29udGFpbnNEaXJ0eVZhbHVlICYmIG1lc3NhZ2VOYXZpZ2F0aW9uQXJndW1lbnRzLmNhbk5hdmlnYXRlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaXNNZXNzYWdlUG9wdXBNaW5pbWl6ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgaWYgKG1lc3NhZ2VOYXZpZ2F0aW9uQXJndW1lbnRzLm5hdmlnYXRlVG8gPT09IGVudW1zLk1lc3NhZ2VOYXZpZ2F0aW9uLm5ld0V4Y2VwdGlvbikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5uYXZpZ2F0ZVRvID0gZW51bXMuU2F2ZUFuZE5hdmlnYXRlLm5ld0V4Y2VwdGlvbkJ1dHRvbkNsaWNrO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKG1lc3NhZ2VOYXZpZ2F0aW9uQXJndW1lbnRzLm5hdmlnYXRlVG8gPT09IGVudW1zLk1lc3NhZ2VOYXZpZ2F0aW9uLmV4Y2VwdGlvbldpdGhJblJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5hdmlnYXRlVG8gPSBlbnVtcy5TYXZlQW5kTmF2aWdhdGUuZXhjZXB0aW9uV2l0aEluUmVzcG9uc2U7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobWVzc2FnZU5hdmlnYXRpb25Bcmd1bWVudHMubmF2aWdhdGVUbyA9PT0gZW51bXMuTWVzc2FnZU5hdmlnYXRpb24ubmV3RXhjZXB0aW9uRnJvbU1lZGlhRXJyb3JEaWFsb2cpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubmF2aWdhdGVUbyA9IGVudW1zLlNhdmVBbmROYXZpZ2F0ZS5uZXdFeGNlcHRpb25Gcm9tTWVkaWFFcnJvckRpYWxvZztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnJlc2V0QW5kQ2xvc2VNZXNzYWdlUGFuZWwoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogY2hlY2tzIHdoZXRoZXIgdGhlIHN1cGVydmlzb3IgZXhhbWluZXIgaXMgdmFsaWQgdG8gc2VuZCBhIG1lc3NhZ2Ugb3Igbm90XHJcbiAgICAgKi9cclxuICAgIHByb3RlY3RlZCBtZXNzYWdlU2VuZFZhbGlkYXRpb25DaGVjayA9IChtZXNzYWdlVHlwZTogZW51bXMuTWVzc2FnZVR5cGUpID0+IHtcclxuICAgICAgICB0aGlzLnNlbmRNZXNzYWdlQWN0aW9uSW5Qcm9ncmVzcyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5tZXNzYWdlVHlwZSA9IG1lc3NhZ2VUeXBlO1xyXG4gICAgICAgIC8vIFdoaWxlIGluIFNFUCB2aWV3IHdlIG5lZWQgdG8gY2hlY2sgd2hldGhlciB0aGUgc3VwZXJ2aXNvciBleGFtaW5lciBpcyB2YWxpZCB0byBzZW5kIGEgbWVzc2FnZSB0byBzdWJvcmRpbmF0ZSBleGFtaW5lclxyXG4gICAgICAgIGlmIChtYXJrZXJPcGVyYXRpb25Nb2RlRmFjdG9yeS5vcGVyYXRpb25Nb2RlLmlzSGVscEV4YW1pbmVyc1ZpZXcpIHtcclxuICAgICAgICAgICAgdGhpcy5lbmFibGVEaXNhYmxlU2VuZEJ1dHRvbigpO1xyXG4gICAgICAgICAgICBsZXQgZGF0YUNvbGxlY3Rpb246IEFycmF5PEV4YW1pbmVyRm9yU0VQQWN0aW9uPiA9IG5ldyBBcnJheTxFeGFtaW5lckZvclNFUEFjdGlvbj4oKTtcclxuICAgICAgICAgICAgbGV0IGV4YW1pbmVyU0VQQWN0aW9uOiBFeGFtaW5lckZvclNFUEFjdGlvbiA9IHtcclxuICAgICAgICAgICAgICAgIGV4YW1pbmVyUm9sZUlkOiBxaWdTdG9yZS5pbnN0YW5jZS5zZWxlY3RlZFFJR0Zvck1hcmtlck9wZXJhdGlvbi5leGFtaW5lclJvbGVJZCxcclxuICAgICAgICAgICAgICAgIG1hcmtTY2hlbWVHcm91cElkOiBxaWdTdG9yZS5pbnN0YW5jZS5nZXRTZWxlY3RlZFFJR0ZvclRoZUxvZ2dlZEluVXNlci5tYXJrU2NoZW1lR3JvdXBJZCxcclxuICAgICAgICAgICAgICAgIHJlcXVlc3RlZEJ5RXhhbWluZXJSb2xlSWQ6IHFpZ1N0b3JlLmluc3RhbmNlLmdldFNlbGVjdGVkUUlHRm9yVGhlTG9nZ2VkSW5Vc2VyLmV4YW1pbmVyUm9sZUlkXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGRhdGFDb2xsZWN0aW9uLnB1c2goZXhhbWluZXJTRVBBY3Rpb24pO1xyXG4gICAgICAgICAgICBsZXQgZXhhbWluZXJTRVBBY3Rpb25zID0gSW1tdXRhYmxlLkxpc3Q8RXhhbWluZXJGb3JTRVBBY3Rpb24+KGRhdGFDb2xsZWN0aW9uKTtcclxuICAgICAgICAgICAgbGV0IGRvU0VQQXBwcm92YWxNYW5hZ2VtZW50QWN0aW9uQXJndW1lbnQ6IERvU0VQQXBwcm92YWxNYW5hZ2VtZW50QWN0aW9uQXJndW1lbnQgPSB7XHJcbiAgICAgICAgICAgICAgICBhY3Rpb25JZGVudGlmaWVyOiBlbnVtcy5TRVBBY3Rpb24uU2VuZE1lc3NhZ2UsXHJcbiAgICAgICAgICAgICAgICBleGFtaW5lcnM6IGV4YW1pbmVyU0VQQWN0aW9uc1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0ZWFtTWFuYWdlbWVudEFjdGlvbkNyZWF0b3IuRXhlY3V0ZUFwcHJvdmFsTWFuYWdlbWVudEFjdGlvbihkb1NFUEFwcHJvdmFsTWFuYWdlbWVudEFjdGlvbkFyZ3VtZW50KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLm9uTWVzc2FnZVNlbmQodGhpcy5tZXNzYWdlVHlwZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRvIGNoZWNrIHdoZXRoZXIgdGhlIGV4YW1pbmVyIGlzIHZhbGlkIHRvIHNlbmQgYSBtZXNzYWdlXHJcbiAgICAgKi9cclxuICAgIHByb3RlY3RlZCBleGFtaW5lclZhbGlkYXRpb24gPSAoYWN0aW9uSWRlbnRpZmllcjogbnVtYmVyKSA9PiB7XHJcblxyXG4gICAgICAgIC8vIE5vIG5lZWQgdG8gaGFuZGxlLCBJZiB1c2VyIGNsaWNrcyBoZWxwIGV4YW1pbmVycyBhbmQgaW1taWRpZXRseSBuYXZpZ2F0ZWQgdG8gaW5ib3hcclxuICAgICAgICBpZiAodGhpcy5wcm9wcy5tZXNzYWdlVHlwZSA9PT0gZW51bXMuTWVzc2FnZVR5cGUuSW5ib3hDb21wb3NlKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIElmIHRoZXJlIGlzIG5vIGZhaWx1cmUgY29kZSB0aGVuIHRoZSBzdXBlcnZpc29yIGV4YW1pbmVyIGlzIHZhbGlkIHRvIHNlbmQgYSBtZXNzYWdlXHJcbiAgICAgICAgaWYgKGFjdGlvbklkZW50aWZpZXIgPT09IGVudW1zLlNFUEFjdGlvbi5TZW5kTWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbk1lc3NhZ2VTZW5kKHRoaXMubWVzc2FnZVR5cGUpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBlbmFibGUgc2VuZCBidXR0b24gc3RhdGUgb24gb2ZmbGluZVxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgb25PbmxpbmVTdGF0dXNDaGFuZ2VkID0gKCkgPT4ge1xyXG4gICAgICAgIGlmICghYXBwbGljYXRpb25TdG9yZS5pbnN0YW5jZS5pc09ubGluZSkge1xyXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZVNhdmVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9O1xyXG59XHJcbmV4cG9ydCA9IE1lc3NhZ2VCYXNlO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vc291cmNlLW1hcC1sb2FkZXIhLi9zcmMvY29tcG9uZW50cy9tZXNzYWdlL21lc3NhZ2ViYXNlLnRzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQUE7QUE2QkE7O0FBRUE7QUFDQTtBQUFBO0FBbkJBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBc0JBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUdBO0FBQ0E7QUFBQTtBQUNBO0FBSUE7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBU0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBbURBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVlBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFsY0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBMExBO0FBSEE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUFBO0FBc0JBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQTRMQTtBQUFBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9");

/***/ }),

/***/ 463:
/* no static exports found */
/* all exports used */
/*!**************************************************!*\
  !*** ./src/components/message/messageeditor.tsx ***!
  \**************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar React = __webpack_require__(/*! react */ 0);\r\nvar pureRenderComponent = __webpack_require__(/*! ../base/purerendercomponent */ 227);\r\nvar TINYMCE = __webpack_require__(/*! react-tinymce */ 45);\r\nvar messageStore = __webpack_require__(/*! ../../stores/message/messagestore */ 240);\r\nvar htmlUtilities = __webpack_require__(/*! ../../utility/generic/htmlutilities */ 243);\r\nvar urls = __webpack_require__(/*! ../../dataservices/base/urls */ 266);\r\nvar messageEditorConstants = __webpack_require__(/*! ../utility/messageeditorconstants */ 325);\r\nvar localeHelper = __webpack_require__(/*! ../../utility/locale/localehelper */ 281);\r\nvar messageHelper = __webpack_require__(/*! ../utility/message/messagehelper */ 283);\r\nvar MessageEditor = /** @class */ (function (_super) {\r\n    __extends(MessageEditor, _super);\r\n    /**\r\n     * Constructor messageeditor\r\n     * @param props\r\n     * @param state\r\n     */\r\n    function MessageEditor(props, state) {\r\n        var _this = _super.call(this, props, state) || this;\r\n        _this.isEditorInitialised = false;\r\n        _this.lastTap = 0;\r\n        _this.contentStyle = htmlUtilities.isIPadDevice ?\r\n            '.mce-content-body{word-break: break-word;font-family:' + messageEditorConstants.TINYMCE_DEFAULT_FONT +\r\n                '; font-size:' + messageEditorConstants.TINYMCE_DEFAULT_FONTSIZE + '; list-style-position: inside;}' + 'p{ margin:0; padding:0;}'\r\n            : htmlUtilities.isIE ? '.mce-content-body{font-family:' + messageEditorConstants.TINYMCE_DEFAULT_FONT +\r\n                '; font-size:' + messageEditorConstants.TINYMCE_DEFAULT_FONTSIZE + ';} p{ margin:0; padding:0;}' :\r\n                '.mce-content-body{font-family:' + messageEditorConstants.TINYMCE_DEFAULT_FONT +\r\n                    '; font-size:' + messageEditorConstants.TINYMCE_DEFAULT_FONTSIZE + '; list-style-position: inside; } p{ margin:0; padding:0;}';\r\n        /**\r\n         * This will block the double-tap zoom in ipad\r\n         */\r\n        _this.blockDoubleTapZoom = function (e) {\r\n            var currentTime = new Date().getTime();\r\n            var tapLength = currentTime - _this.lastTap;\r\n            if (tapLength < 500 && tapLength > 0) {\r\n                e.preventDefault();\r\n            }\r\n            _this.lastTap = currentTime;\r\n        };\r\n        /**\r\n         * This will block the pinch-to-zoom in ipad\r\n         */\r\n        _this.blockPinchToZoom = function (e) {\r\n            if (e.touches.length > 1) {\r\n                e.preventDefault();\r\n            }\r\n        };\r\n        _this.onKeyup = function (o, e) {\r\n            _this.props.toggleSaveButtonState();\r\n        };\r\n        _this.onEditorInit = function (o, e) {\r\n            _this.activeEditor.on('SetContent', _this.onSetContent);\r\n            // Set the height of the iFrame section in the tiny mce as 100% for supporting the height calculation in css.\r\n            document.getElementById('msg-tinymce-editor_ifr').style.height = '100%';\r\n            if (htmlUtilities.isIPadDevice) {\r\n                document.getElementById('msg-tinymce-editor_ifr').setAttribute('scrolling', 'no');\r\n            }\r\n            _this.isEditorInitialised = true;\r\n            if (htmlUtilities.isIPadDevice && htmlUtilities.getUserDevice().browser === 'Safari') {\r\n                e.getWin().document.documentElement.addEventListener('touchend', _this.blockDoubleTapZoom);\r\n                e.getWin().document.documentElement.addEventListener('touchstart', _this.blockPinchToZoom);\r\n            }\r\n        };\r\n        _this.onRemove = function (o, e) {\r\n            if (htmlUtilities.isIPadDevice && htmlUtilities.getUserDevice().browser === 'Safari') {\r\n                e.getWin().document.documentElement.removeEventListener('touchend', _this.blockDoubleTapZoom);\r\n                e.getWin().document.documentElement.removeEventListener('touchstart', _this.blockPinchToZoom);\r\n            }\r\n        };\r\n        /**\r\n         * Simulate window click while clicking on tinyMCE editor to close opened priority drop down and user option panel.\r\n         */\r\n        _this.onClick = function (o, e) {\r\n            // we have to close opened priority drop down and user options (logout options) while clicking on outside that. TinyMCE editor was\r\n            // preventing the click event to propagate outside so closing of those things are not happening while clicking on TinyMCE editor.\r\n            var event = document.createEvent('MouseEvents');\r\n            event.initMouseEvent('click', true, true, window, 0, 0, 0, 80, 20, false, false, false, false, 0, null);\r\n            window.dispatchEvent(event);\r\n        };\r\n        _this.onPaste = function (o, e) {\r\n            // find the clipboard data from any possible (window.clipboarddata is for ie)\r\n            var clipBoardData = (o.clipboardData || window.clipboardData ||\r\n                (o.originalEvent && o.originalEvent.clipboardData));\r\n            // set getdata argument - 'text' is only for ie11 and other device/browsers need 'text/plain'\r\n            var getDataArgument = htmlUtilities.isIE11 ? 'text' : 'text/plain';\r\n            // If you paste text into the editor with mouse by right- click\r\n            // TinyMCE's onPaste event is fired, but text is not available via .getContent().\r\n            // So that checking the clipboard data item when the user pasting the text via mouse by right- click.\r\n            if (clipBoardData && clipBoardData.getData(getDataArgument).trim() !== '') {\r\n                messageHelper.setPasteEnabledAction(true);\r\n            }\r\n            _this.props.toggleSaveButtonState();\r\n        };\r\n        /**\r\n         * This method will enable the send button when hyperlink is added.\r\n         */\r\n        _this.onSetContent = function (e) {\r\n            _this.props.toggleSaveButtonState();\r\n        };\r\n        /**\r\n         * This method will clear tinyMCE content\r\n         */\r\n        _this.onMessagePanelClose = function () {\r\n            _this.activeEditor.setContent('');\r\n        };\r\n        /**\r\n         * This method will set focus to tinyMCE editor\r\n         */\r\n        _this.setFocus = function () {\r\n            if (_this.state.scriptLoaded) {\r\n                if (_this.activeEditor && _this.isEditorInitialised && _this.props.hasFocus) {\r\n                    // this will set dom focus to tinymce editor\r\n                    _this.activeEditor.focus();\r\n                }\r\n            }\r\n        };\r\n        //initialize state\r\n        _this.state = {\r\n            scriptLoaded: false,\r\n            renderedOn: 0\r\n        };\r\n        _this.onRemove = _this.onRemove.bind(_this);\r\n        _this.onEditorInit = _this.onEditorInit.bind(_this);\r\n        _this.onSetContent = _this.onSetContent.bind(_this);\r\n        return _this;\r\n    }\r\n    /**\r\n     * Component did mount\r\n     */\r\n    MessageEditor.prototype.componentDidMount = function () {\r\n        messageStore.instance.addListener(messageStore.MessageStore.MESSAGE_CLOSE_EVENT, this.onMessagePanelClose);\r\n        this.setFocus();\r\n    };\r\n    /**\r\n     * Component will mount\r\n     */\r\n    MessageEditor.prototype.componentWillMount = function () {\r\n        var url = htmlUtilities.getFullUrl(urls.TINYMCE_URL);\r\n        // If tinyMCE script is not loaded then load that\r\n        if (!htmlUtilities.isScriptLoaded(url)) {\r\n            var script = document.createElement('script');\r\n            script.src = url;\r\n            script.async = true;\r\n            script.onload = (this.dependenciesLoaded.bind(this));\r\n            document.body.appendChild(script);\r\n        }\r\n        else {\r\n            this.dependenciesLoaded();\r\n        }\r\n    };\r\n    /**\r\n     * component will unmount\r\n     */\r\n    MessageEditor.prototype.componentWillUnmount = function () {\r\n        messageStore.instance.removeListener(messageStore.MessageStore.MESSAGE_CLOSE_EVENT, this.onMessagePanelClose);\r\n        if (tinymce.get(this.props.id)) {\r\n            tinymce.remove('#' + this.props.id);\r\n        }\r\n    };\r\n    /**\r\n     * Component did update\r\n     */\r\n    MessageEditor.prototype.componentDidUpdate = function () {\r\n        this.setFocus();\r\n    };\r\n    /**\r\n     * Render component\r\n     */\r\n    MessageEditor.prototype.render = function () {\r\n        if (this.state.scriptLoaded) {\r\n            var selectedLang = localeHelper.getAwardingBodyLocale(this.props.selectedLanguage);\r\n            var editorConfig = {\r\n                menubar: false,\r\n                statusbar: false,\r\n                renderedOn: Date.now(),\r\n                plugins: messageEditorConstants.TINYMCE_PLUGINS,\r\n                toolbar: messageEditorConstants.TINYMCE_TOOLBAR,\r\n                fontsize_formats: messageEditorConstants.TINYMCE_FONTSIZES,\r\n                font_formats: messageEditorConstants.TINYMCE_FONTS,\r\n                language: selectedLang,\r\n                browser_spellcheck: true,\r\n                content_style: this.contentStyle,\r\n                default_link_target: '_blank',\r\n                target_list: false,\r\n                invalid_elements: 'embed'\r\n            };\r\n            return (React.createElement(TINYMCE, { content: this.props.htmlContent, id: this.props.id, theme: messageEditorConstants.TINYMCE_THEME, config: editorConfig, onKeyup: this.onKeyup, onPaste: this.onPaste, onInit: this.onEditorInit, onClick: this.onClick, onRemove: this.onRemove }));\r\n        }\r\n        else {\r\n            //show loading icon if script is not loaded\r\n            return (React.createElement(\"div\", null));\r\n        }\r\n    };\r\n    /**\r\n     * Method to load dependencies\r\n     */\r\n    MessageEditor.prototype.dependenciesLoaded = function () {\r\n        if (this.props.isTinyMCELoaded) {\r\n            this.props.isTinyMCELoaded(true);\r\n        }\r\n        this.setState({ scriptLoaded: true });\r\n    };\r\n    Object.defineProperty(MessageEditor.prototype, \"activeEditor\", {\r\n        /**\r\n         * This method will return the active editor\r\n         */\r\n        get: function () {\r\n            return tinymce.get(this.props.id);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return MessageEditor;\r\n}(pureRenderComponent));\r\nmodule.exports = MessageEditor;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDYzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvbWVzc2FnZS9tZXNzYWdlZWRpdG9yLnRzeD9iOWI5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XHJcbmltcG9ydCBSZWFjdERPTSA9IHJlcXVpcmUoJ3JlYWN0LWRvbScpO1xyXG5pbXBvcnQgcHVyZVJlbmRlckNvbXBvbmVudCA9IHJlcXVpcmUoJy4uL2Jhc2UvcHVyZXJlbmRlcmNvbXBvbmVudCcpO1xyXG5jb25zdCBUSU5ZTUNFID0gcmVxdWlyZSgncmVhY3QtdGlueW1jZScpO1xyXG5pbXBvcnQgbWVzc2FnZVN0b3JlID0gcmVxdWlyZSgnLi4vLi4vc3RvcmVzL21lc3NhZ2UvbWVzc2FnZXN0b3JlJyk7XHJcbmltcG9ydCBsb2NhbGVTdG9yZSA9IHJlcXVpcmUoJy4uLy4uL3N0b3Jlcy9sb2NhbGUvbG9jYWxlc3RvcmUnKTtcclxuaW1wb3J0IGh0bWxVdGlsaXRpZXMgPSByZXF1aXJlKCcuLi8uLi91dGlsaXR5L2dlbmVyaWMvaHRtbHV0aWxpdGllcycpO1xyXG5pbXBvcnQgdXJscyA9IHJlcXVpcmUoJy4uLy4uL2RhdGFzZXJ2aWNlcy9iYXNlL3VybHMnKTtcclxuaW1wb3J0IG1lc3NhZ2VFZGl0b3JDb25zdGFudHMgPSByZXF1aXJlKCcuLi91dGlsaXR5L21lc3NhZ2VlZGl0b3Jjb25zdGFudHMnKTtcclxuZGVjbGFyZSBsZXQgdGlueW1jZTogYW55O1xyXG5pbXBvcnQgbG9jYWxlSGVscGVyID0gcmVxdWlyZSgnLi4vLi4vdXRpbGl0eS9sb2NhbGUvbG9jYWxlaGVscGVyJyk7XHJcbmltcG9ydCBtZXNzYWdlSGVscGVyID0gcmVxdWlyZSgnLi4vdXRpbGl0eS9tZXNzYWdlL21lc3NhZ2VoZWxwZXInKTtcclxuXHJcbmludGVyZmFjZSBQcm9wcyBleHRlbmRzIFByb3BzQmFzZSwgTG9jYWxlU2VsZWN0aW9uQmFzZSB7XHJcbiAgICBodG1sQ29udGVudDogc3RyaW5nO1xyXG4gICAgaGFzRm9jdXM6IGJvb2xlYW47XHJcbiAgICB0b2dnbGVTYXZlQnV0dG9uU3RhdGU6IEZ1bmN0aW9uO1xyXG4gICAgaXNUaW55TUNFTG9hZGVkPzogRnVuY3Rpb247XHJcbn1cclxuXHJcbmludGVyZmFjZSBTdGF0ZSB7XHJcbiAgICBzY3JpcHRMb2FkZWQ/OiBib29sZWFuO1xyXG4gICAgcmVuZGVyZWRPbj86IG51bWJlcjtcclxufVxyXG5cclxuXHJcbmNsYXNzIE1lc3NhZ2VFZGl0b3IgZXh0ZW5kcyBwdXJlUmVuZGVyQ29tcG9uZW50PFByb3BzLCBTdGF0ZT4ge1xyXG5cclxuICAgIHByaXZhdGUgaXNFZGl0b3JJbml0aWFsaXNlZDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBsYXN0VGFwOiBudW1iZXIgPSAwO1xyXG4gICAgcHJpdmF0ZSBjb250ZW50U3R5bGU6IHN0cmluZyA9IGh0bWxVdGlsaXRpZXMuaXNJUGFkRGV2aWNlID9cclxuICAgICAgICAnLm1jZS1jb250ZW50LWJvZHl7d29yZC1icmVhazogYnJlYWstd29yZDtmb250LWZhbWlseTonICsgbWVzc2FnZUVkaXRvckNvbnN0YW50cy5USU5ZTUNFX0RFRkFVTFRfRk9OVCArXHJcbiAgICAgICAgJzsgZm9udC1zaXplOicgKyBtZXNzYWdlRWRpdG9yQ29uc3RhbnRzLlRJTllNQ0VfREVGQVVMVF9GT05UU0laRSArICc7IGxpc3Qtc3R5bGUtcG9zaXRpb246IGluc2lkZTt9JyArICdweyBtYXJnaW46MDsgcGFkZGluZzowO30nXHJcbiAgICAgICAgOiBodG1sVXRpbGl0aWVzLmlzSUUgPyAnLm1jZS1jb250ZW50LWJvZHl7Zm9udC1mYW1pbHk6JyArIG1lc3NhZ2VFZGl0b3JDb25zdGFudHMuVElOWU1DRV9ERUZBVUxUX0ZPTlQgK1xyXG4gICAgICAgICAgICAnOyBmb250LXNpemU6JyArIG1lc3NhZ2VFZGl0b3JDb25zdGFudHMuVElOWU1DRV9ERUZBVUxUX0ZPTlRTSVpFICsgJzt9IHB7IG1hcmdpbjowOyBwYWRkaW5nOjA7fScgOlxyXG4gICAgICAgICAgICAnLm1jZS1jb250ZW50LWJvZHl7Zm9udC1mYW1pbHk6JyArIG1lc3NhZ2VFZGl0b3JDb25zdGFudHMuVElOWU1DRV9ERUZBVUxUX0ZPTlQgK1xyXG4gICAgICAgICAgICAnOyBmb250LXNpemU6JyArIG1lc3NhZ2VFZGl0b3JDb25zdGFudHMuVElOWU1DRV9ERUZBVUxUX0ZPTlRTSVpFICsgJzsgbGlzdC1zdHlsZS1wb3NpdGlvbjogaW5zaWRlOyB9IHB7IG1hcmdpbjowOyBwYWRkaW5nOjA7fSc7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb25zdHJ1Y3RvciBtZXNzYWdlZWRpdG9yXHJcbiAgICAgKiBAcGFyYW0gcHJvcHNcclxuICAgICAqIEBwYXJhbSBzdGF0ZVxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9wczogUHJvcHMsIHN0YXRlOiBTdGF0ZSkge1xyXG4gICAgICAgIHN1cGVyKHByb3BzLCBzdGF0ZSk7XHJcblxyXG4gICAgICAgIC8vaW5pdGlhbGl6ZSBzdGF0ZVxyXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgICAgICAgIHNjcmlwdExvYWRlZDogZmFsc2UsXHJcbiAgICAgICAgICAgIHJlbmRlcmVkT246IDBcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLm9uUmVtb3ZlID0gdGhpcy5vblJlbW92ZS5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMub25FZGl0b3JJbml0ID0gdGhpcy5vbkVkaXRvckluaXQuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLm9uU2V0Q29udGVudCA9IHRoaXMub25TZXRDb250ZW50LmJpbmQodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb21wb25lbnQgZGlkIG1vdW50XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBjb21wb25lbnREaWRNb3VudCgpIHtcclxuICAgICAgICBtZXNzYWdlU3RvcmUuaW5zdGFuY2UuYWRkTGlzdGVuZXIobWVzc2FnZVN0b3JlLk1lc3NhZ2VTdG9yZS5NRVNTQUdFX0NMT1NFX0VWRU5ULCB0aGlzLm9uTWVzc2FnZVBhbmVsQ2xvc2UpO1xyXG4gICAgICAgIHRoaXMuc2V0Rm9jdXMoKTtcclxuICAgIH1cclxuXHJcblx0LyoqXHJcblx0ICogQ29tcG9uZW50IHdpbGwgbW91bnRcclxuXHQgKi9cclxuICAgIHB1YmxpYyBjb21wb25lbnRXaWxsTW91bnQoKSB7XHJcbiAgICAgICAgbGV0IHVybDogc3RyaW5nID0gaHRtbFV0aWxpdGllcy5nZXRGdWxsVXJsKHVybHMuVElOWU1DRV9VUkwpO1xyXG4gICAgICAgIC8vIElmIHRpbnlNQ0Ugc2NyaXB0IGlzIG5vdCBsb2FkZWQgdGhlbiBsb2FkIHRoYXRcclxuICAgICAgICBpZiAoIWh0bWxVdGlsaXRpZXMuaXNTY3JpcHRMb2FkZWQodXJsKSkge1xyXG4gICAgICAgICAgICBjb25zdCBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcclxuICAgICAgICAgICAgc2NyaXB0LnNyYyA9IHVybDtcclxuICAgICAgICAgICAgc2NyaXB0LmFzeW5jID0gdHJ1ZTtcclxuICAgICAgICAgICAgc2NyaXB0Lm9ubG9hZCA9ICh0aGlzLmRlcGVuZGVuY2llc0xvYWRlZC5iaW5kKHRoaXMpKTtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzY3JpcHQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGVwZW5kZW5jaWVzTG9hZGVkKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogY29tcG9uZW50IHdpbGwgdW5tb3VudFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XHJcbiAgICAgICAgbWVzc2FnZVN0b3JlLmluc3RhbmNlLnJlbW92ZUxpc3RlbmVyKG1lc3NhZ2VTdG9yZS5NZXNzYWdlU3RvcmUuTUVTU0FHRV9DTE9TRV9FVkVOVCwgdGhpcy5vbk1lc3NhZ2VQYW5lbENsb3NlKTtcclxuXHJcbiAgICAgICAgaWYgKHRpbnltY2UuZ2V0KHRoaXMucHJvcHMuaWQpKSB7XHJcbiAgICAgICAgICAgIHRpbnltY2UucmVtb3ZlKCcjJyArIHRoaXMucHJvcHMuaWQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbXBvbmVudCBkaWQgdXBkYXRlXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBjb21wb25lbnREaWRVcGRhdGUoKSB7XHJcbiAgICAgICAgdGhpcy5zZXRGb2N1cygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhpcyB3aWxsIGJsb2NrIHRoZSBkb3VibGUtdGFwIHpvb20gaW4gaXBhZFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGJsb2NrRG91YmxlVGFwWm9vbSA9IChlOiBhbnkpOiB2b2lkID0+IHtcclxuICAgICAgICBsZXQgY3VycmVudFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcclxuICAgICAgICBsZXQgdGFwTGVuZ3RoID0gY3VycmVudFRpbWUgLSB0aGlzLmxhc3RUYXA7XHJcbiAgICAgICAgaWYgKHRhcExlbmd0aCA8IDUwMCAmJiB0YXBMZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5sYXN0VGFwID0gY3VycmVudFRpbWU7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhpcyB3aWxsIGJsb2NrIHRoZSBwaW5jaC10by16b29tIGluIGlwYWRcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBibG9ja1BpbmNoVG9ab29tID0gKGU6IGFueSk6IHZvaWQgPT4ge1xyXG4gICAgICAgIGlmIChlLnRvdWNoZXMubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlbmRlciBjb21wb25lbnRcclxuICAgICAqL1xyXG4gICAgcHVibGljIHJlbmRlcigpIHtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuc2NyaXB0TG9hZGVkKSB7XHJcbiAgICAgICAgICAgIGxldCBzZWxlY3RlZExhbmc6IHN0cmluZyA9IGxvY2FsZUhlbHBlci5nZXRBd2FyZGluZ0JvZHlMb2NhbGUodGhpcy5wcm9wcy5zZWxlY3RlZExhbmd1YWdlKTtcclxuICAgICAgICAgICAgbGV0IGVkaXRvckNvbmZpZyA9IHtcclxuICAgICAgICAgICAgICAgIG1lbnViYXI6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgc3RhdHVzYmFyOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIHJlbmRlcmVkT246IERhdGUubm93KCksXHJcbiAgICAgICAgICAgICAgICBwbHVnaW5zOiBtZXNzYWdlRWRpdG9yQ29uc3RhbnRzLlRJTllNQ0VfUExVR0lOUyxcclxuICAgICAgICAgICAgICAgIHRvb2xiYXI6IG1lc3NhZ2VFZGl0b3JDb25zdGFudHMuVElOWU1DRV9UT09MQkFSLFxyXG4gICAgICAgICAgICAgICAgZm9udHNpemVfZm9ybWF0czogbWVzc2FnZUVkaXRvckNvbnN0YW50cy5USU5ZTUNFX0ZPTlRTSVpFUyxcclxuICAgICAgICAgICAgICAgIGZvbnRfZm9ybWF0czogbWVzc2FnZUVkaXRvckNvbnN0YW50cy5USU5ZTUNFX0ZPTlRTLFxyXG4gICAgICAgICAgICAgICAgbGFuZ3VhZ2U6IHNlbGVjdGVkTGFuZyxcclxuICAgICAgICAgICAgICAgIGJyb3dzZXJfc3BlbGxjaGVjazogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGNvbnRlbnRfc3R5bGU6IHRoaXMuY29udGVudFN0eWxlLFxyXG4gICAgICAgICAgICAgICAgZGVmYXVsdF9saW5rX3RhcmdldDogJ19ibGFuaycsXHJcbiAgICAgICAgICAgICAgICB0YXJnZXRfbGlzdDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBpbnZhbGlkX2VsZW1lbnRzIDogJ2VtYmVkJ1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgPFRJTllNQ0VcclxuICAgICAgICAgICAgICAgICAgICBjb250ZW50PXt0aGlzLnByb3BzLmh0bWxDb250ZW50fVxyXG4gICAgICAgICAgICAgICAgICAgIGlkPXt0aGlzLnByb3BzLmlkfVxyXG4gICAgICAgICAgICAgICAgICAgIHRoZW1lPXttZXNzYWdlRWRpdG9yQ29uc3RhbnRzLlRJTllNQ0VfVEhFTUV9XHJcbiAgICAgICAgICAgICAgICAgICAgY29uZmlnPXtlZGl0b3JDb25maWd9XHJcbiAgICAgICAgICAgICAgICAgICAgb25LZXl1cD17dGhpcy5vbktleXVwfVxyXG4gICAgICAgICAgICAgICAgICAgIG9uUGFzdGU9e3RoaXMub25QYXN0ZX1cclxuICAgICAgICAgICAgICAgICAgICBvbkluaXQ9e3RoaXMub25FZGl0b3JJbml0fVxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMub25DbGlja31cclxuICAgICAgICAgICAgICAgICAgICBvblJlbW92ZT17dGhpcy5vblJlbW92ZX1cclxuICAgICAgICAgICAgICAgIC8+KTtcclxuXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy9zaG93IGxvYWRpbmcgaWNvbiBpZiBzY3JpcHQgaXMgbm90IGxvYWRlZFxyXG4gICAgICAgICAgICByZXR1cm4gKDxkaXY+PC9kaXY+KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNZXRob2QgdG8gbG9hZCBkZXBlbmRlbmNpZXNcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBkZXBlbmRlbmNpZXNMb2FkZWQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuaXNUaW55TUNFTG9hZGVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMuaXNUaW55TUNFTG9hZGVkKHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNldFN0YXRlKHsgc2NyaXB0TG9hZGVkOiB0cnVlIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb25LZXl1cCA9IChvOiBhbnksIGU6IGFueSkgPT4ge1xyXG4gICAgICAgIHRoaXMucHJvcHMudG9nZ2xlU2F2ZUJ1dHRvblN0YXRlKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHByaXZhdGUgb25FZGl0b3JJbml0ID0gKG86IGFueSwgZTogYW55KSA9PiB7XHJcbiAgICAgICAgdGhpcy5hY3RpdmVFZGl0b3Iub24oJ1NldENvbnRlbnQnLCB0aGlzLm9uU2V0Q29udGVudCk7XHJcblxyXG4gICAgICAgIC8vIFNldCB0aGUgaGVpZ2h0IG9mIHRoZSBpRnJhbWUgc2VjdGlvbiBpbiB0aGUgdGlueSBtY2UgYXMgMTAwJSBmb3Igc3VwcG9ydGluZyB0aGUgaGVpZ2h0IGNhbGN1bGF0aW9uIGluIGNzcy5cclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbXNnLXRpbnltY2UtZWRpdG9yX2lmcicpLnN0eWxlLmhlaWdodCA9ICcxMDAlJztcclxuICAgICAgICBpZiAoaHRtbFV0aWxpdGllcy5pc0lQYWREZXZpY2UpIHtcclxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21zZy10aW55bWNlLWVkaXRvcl9pZnInKS5zZXRBdHRyaWJ1dGUoJ3Njcm9sbGluZycsICdubycpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5pc0VkaXRvckluaXRpYWxpc2VkID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgaWYgKGh0bWxVdGlsaXRpZXMuaXNJUGFkRGV2aWNlICYmIGh0bWxVdGlsaXRpZXMuZ2V0VXNlckRldmljZSgpLmJyb3dzZXIgPT09ICdTYWZhcmknKSB7XHJcbiAgICAgICAgICAgIGUuZ2V0V2luKCkuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5ibG9ja0RvdWJsZVRhcFpvb20pO1xyXG4gICAgICAgICAgICBlLmdldFdpbigpLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdGhpcy5ibG9ja1BpbmNoVG9ab29tKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHByaXZhdGUgb25SZW1vdmUgPSAobzogYW55LCBlOiBhbnkpID0+IHtcclxuICAgICAgICBpZiAoaHRtbFV0aWxpdGllcy5pc0lQYWREZXZpY2UgJiYgaHRtbFV0aWxpdGllcy5nZXRVc2VyRGV2aWNlKCkuYnJvd3NlciA9PT0gJ1NhZmFyaScpIHtcclxuICAgICAgICAgICAgZS5nZXRXaW4oKS5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB0aGlzLmJsb2NrRG91YmxlVGFwWm9vbSk7XHJcbiAgICAgICAgICAgIGUuZ2V0V2luKCkuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCB0aGlzLmJsb2NrUGluY2hUb1pvb20pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTaW11bGF0ZSB3aW5kb3cgY2xpY2sgd2hpbGUgY2xpY2tpbmcgb24gdGlueU1DRSBlZGl0b3IgdG8gY2xvc2Ugb3BlbmVkIHByaW9yaXR5IGRyb3AgZG93biBhbmQgdXNlciBvcHRpb24gcGFuZWwuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgb25DbGljayA9IChvOiBhbnksIGU6IGFueSkgPT4ge1xyXG4gICAgICAgIC8vIHdlIGhhdmUgdG8gY2xvc2Ugb3BlbmVkIHByaW9yaXR5IGRyb3AgZG93biBhbmQgdXNlciBvcHRpb25zIChsb2dvdXQgb3B0aW9ucykgd2hpbGUgY2xpY2tpbmcgb24gb3V0c2lkZSB0aGF0LiBUaW55TUNFIGVkaXRvciB3YXNcclxuICAgICAgICAvLyBwcmV2ZW50aW5nIHRoZSBjbGljayBldmVudCB0byBwcm9wYWdhdGUgb3V0c2lkZSBzbyBjbG9zaW5nIG9mIHRob3NlIHRoaW5ncyBhcmUgbm90IGhhcHBlbmluZyB3aGlsZSBjbGlja2luZyBvbiBUaW55TUNFIGVkaXRvci5cclxuICAgICAgICBsZXQgZXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnTW91c2VFdmVudHMnKTtcclxuICAgICAgICBldmVudC5pbml0TW91c2VFdmVudCgnY2xpY2snLCB0cnVlLCB0cnVlLCB3aW5kb3csIDAsIDAsIDAsIDgwLCAyMCwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgZmFsc2UsIDAsIG51bGwpO1xyXG4gICAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcclxuICAgIH07XHJcblxyXG4gICAgcHJpdmF0ZSBvblBhc3RlID0gKG86IGFueSwgZTogYW55KSA9PiB7XHJcbiAgICAgICAgLy8gZmluZCB0aGUgY2xpcGJvYXJkIGRhdGEgZnJvbSBhbnkgcG9zc2libGUgKHdpbmRvdy5jbGlwYm9hcmRkYXRhIGlzIGZvciBpZSlcclxuICAgICAgICBsZXQgY2xpcEJvYXJkRGF0YTogYW55ID0gKG8uY2xpcGJvYXJkRGF0YSB8fCB3aW5kb3cuY2xpcGJvYXJkRGF0YSB8fFxyXG4gICAgICAgICAgICAoby5vcmlnaW5hbEV2ZW50ICYmIG8ub3JpZ2luYWxFdmVudC5jbGlwYm9hcmREYXRhKSk7XHJcblxyXG4gICAgICAgIC8vIHNldCBnZXRkYXRhIGFyZ3VtZW50IC0gJ3RleHQnIGlzIG9ubHkgZm9yIGllMTEgYW5kIG90aGVyIGRldmljZS9icm93c2VycyBuZWVkICd0ZXh0L3BsYWluJ1xyXG4gICAgICAgIGxldCBnZXREYXRhQXJndW1lbnQ6IHN0cmluZyA9IGh0bWxVdGlsaXRpZXMuaXNJRTExID8gJ3RleHQnIDogJ3RleHQvcGxhaW4nO1xyXG5cclxuICAgICAgICAvLyBJZiB5b3UgcGFzdGUgdGV4dCBpbnRvIHRoZSBlZGl0b3Igd2l0aCBtb3VzZSBieSByaWdodC0gY2xpY2tcclxuICAgICAgICAvLyBUaW55TUNFJ3Mgb25QYXN0ZSBldmVudCBpcyBmaXJlZCwgYnV0IHRleHQgaXMgbm90IGF2YWlsYWJsZSB2aWEgLmdldENvbnRlbnQoKS5cclxuICAgICAgICAvLyBTbyB0aGF0IGNoZWNraW5nIHRoZSBjbGlwYm9hcmQgZGF0YSBpdGVtIHdoZW4gdGhlIHVzZXIgcGFzdGluZyB0aGUgdGV4dCB2aWEgbW91c2UgYnkgcmlnaHQtIGNsaWNrLlxyXG4gICAgICAgIGlmIChjbGlwQm9hcmREYXRhICYmIGNsaXBCb2FyZERhdGEuZ2V0RGF0YShnZXREYXRhQXJndW1lbnQpLnRyaW0oKSAhPT0gJycpIHtcclxuICAgICAgICAgICAgbWVzc2FnZUhlbHBlci5zZXRQYXN0ZUVuYWJsZWRBY3Rpb24odHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucHJvcHMudG9nZ2xlU2F2ZUJ1dHRvblN0YXRlKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhpcyBtZXRob2Qgd2lsbCBlbmFibGUgdGhlIHNlbmQgYnV0dG9uIHdoZW4gaHlwZXJsaW5rIGlzIGFkZGVkLlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIG9uU2V0Q29udGVudCA9IChlOiBhbnkpID0+IHtcclxuICAgICAgICB0aGlzLnByb3BzLnRvZ2dsZVNhdmVCdXR0b25TdGF0ZSgpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgbWV0aG9kIHdpbGwgY2xlYXIgdGlueU1DRSBjb250ZW50XHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgb25NZXNzYWdlUGFuZWxDbG9zZSA9ICgpID0+IHtcclxuICAgICAgICB0aGlzLmFjdGl2ZUVkaXRvci5zZXRDb250ZW50KCcnKTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIG1ldGhvZCB3aWxsIHNldCBmb2N1cyB0byB0aW55TUNFIGVkaXRvclxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHNldEZvY3VzID0gKCkgPT4ge1xyXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLnNjcmlwdExvYWRlZCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5hY3RpdmVFZGl0b3IgJiYgdGhpcy5pc0VkaXRvckluaXRpYWxpc2VkICYmIHRoaXMucHJvcHMuaGFzRm9jdXMpIHtcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMgd2lsbCBzZXQgZG9tIGZvY3VzIHRvIHRpbnltY2UgZWRpdG9yXHJcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZUVkaXRvci5mb2N1cygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgbWV0aG9kIHdpbGwgcmV0dXJuIHRoZSBhY3RpdmUgZWRpdG9yXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZ2V0IGFjdGl2ZUVkaXRvcigpIHtcclxuICAgICAgICByZXR1cm4gdGlueW1jZS5nZXQodGhpcy5wcm9wcy5pZCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCA9IE1lc3NhZ2VFZGl0b3I7XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vc291cmNlLW1hcC1sb2FkZXIhLi9zcmMvY29tcG9uZW50cy9tZXNzYWdlL21lc3NhZ2VlZGl0b3IudHN4Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQWVBO0FBQUE7QUFZQTs7OztBQUlBO0FBQ0E7QUFBQTtBQWZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWdFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFxREE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUE5TUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBdUJBOztBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFhQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXVGQTtBQUhBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFBQTtBQUNBO0FBQUE7QUFFQTsiLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),

/***/ 464:
/* no static exports found */
/* all exports used */
/*!************************************************************!*\
  !*** ./src/components/message/messageprioritydropdown.tsx ***!
  \************************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar React = __webpack_require__(/*! react */ 0);\r\nvar classNames = __webpack_require__(/*! classnames */ 39);\r\nvar localeStore = __webpack_require__(/*! ../../stores/locale/localestore */ 226);\r\n/* tslint:disable:variable-name */\r\nvar ListItem = function (props) {\r\n    return React.createElement(\"li\", { role: 'menuitem' },\r\n        React.createElement(\"a\", { href: 'javascript:void(0)', onClick: function () { props.onSelect(props.item.id); } }, props.item.name));\r\n};\r\nvar List = function (props) { return (React.createElement(\"ul\", { id: props.id + '_drop-down-items', className: 'menu', role: 'menu', title: localeStore.instance.TranslateText('messaging.compose-message.priority.priority-tooltip'), \"aria-hidden\": 'true' }, props.items.map(function (item) { return (item !== null) ?\r\n    (React.createElement(ListItem, { key: 'key_drop_down_' + item.id, onSelect: props.onSelect, item: item })) :\r\n    null; }))); };\r\nvar DropDown = function (props) {\r\n    return (React.createElement(\"div\", { id: props.id + '_dropdown', className: classNames(props.className, { 'open': props.isOpen }, { 'close': props.isOpen === undefined ? false : !props.isOpen }), onClick: function () { props.onClick(props.dropDownType); } },\r\n        React.createElement(\"a\", { href: 'javascript:void(0)', id: props.id + '_component', className: 'menu-button' },\r\n            React.createElement(\"span\", { id: props.id + '_items' },\r\n                \" \",\r\n                props.selectedItem,\r\n                \" \"),\r\n            React.createElement(\"span\", { className: 'sprite-icon menu-arrow-icon' })),\r\n        React.createElement(List, { id: props.id, key: 'key_drop_down_items', onSelect: props.onSelect, items: props.items })));\r\n};\r\nmodule.exports = DropDown;\r\n/* tslint:enable */ \r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDY0LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvbWVzc2FnZS9tZXNzYWdlcHJpb3JpdHlkcm9wZG93bi50c3g/YTU0OSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZW51bXMgPSByZXF1aXJlKCcuLi91dGlsaXR5L2VudW1zJyk7XHJcbmltcG9ydCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XHJcbmxldCBjbGFzc05hbWVzID0gcmVxdWlyZSgnY2xhc3NuYW1lcycpO1xyXG5sZXQgbG9jYWxlU3RvcmUgPSByZXF1aXJlKCcuLi8uLi9zdG9yZXMvbG9jYWxlL2xvY2FsZXN0b3JlJyk7XHJcblxyXG5pbnRlcmZhY2UgSXRlbSB7XHJcbiAgICBpZDogZW51bXMuTWVzc2FnZVByaW9yaXR5O1xyXG4gICAgbmFtZTogc3RyaW5nO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgRHJvcERvd25JdGVtcyB7XHJcbiAgICBpZDogc3RyaW5nO1xyXG4gICAgZHJvcERvd25UeXBlOiBlbnVtcy5Ecm9wRG93blR5cGU7XHJcbiAgICBjbGFzc05hbWU6IHN0cmluZztcclxuICAgIGlzT3BlbjogYm9vbGVhbjtcclxuICAgIG9uQ2xpY2s6IEZ1bmN0aW9uO1xyXG4gICAgb25TZWxlY3Q6IEZ1bmN0aW9uO1xyXG4gICAgc2VsZWN0ZWRJdGVtOiBzdHJpbmc7XHJcbiAgICBpdGVtczogQXJyYXk8SXRlbT47XHJcbn1cclxuXHJcbi8qIHRzbGludDpkaXNhYmxlOnZhcmlhYmxlLW5hbWUgKi9cclxuXHJcbmNvbnN0IExpc3RJdGVtID0gKHByb3BzOiB7IG9uU2VsZWN0OiBGdW5jdGlvbiwgaXRlbTogSXRlbX0pID0+XHJcbiAgICA8bGkgcm9sZT0nbWVudWl0ZW0nPjxhIGhyZWY9J2phdmFzY3JpcHQ6dm9pZCgwKScgb25DbGljayA9IHsoKSA9PiB7IHByb3BzLm9uU2VsZWN0KHByb3BzLml0ZW0uaWQpOyB9IH0+eyBwcm9wcy5pdGVtLm5hbWUgfTwvYT48L2xpPjtcclxuY29uc3QgTGlzdCA9IChwcm9wczogeyBvblNlbGVjdDogRnVuY3Rpb24sIGl0ZW1zOiBBcnJheTxJdGVtPiwgaWQ6IHN0cmluZyB9KSA9PiAoXHJcbiAgICA8dWwgaWQ9e3Byb3BzLmlkICsgJ19kcm9wLWRvd24taXRlbXMnfSBjbGFzc05hbWU9J21lbnUnIHJvbGU9J21lbnUnXHJcbiAgICAgICAgdGl0bGU9e2xvY2FsZVN0b3JlLmluc3RhbmNlLlRyYW5zbGF0ZVRleHQoJ21lc3NhZ2luZy5jb21wb3NlLW1lc3NhZ2UucHJpb3JpdHkucHJpb3JpdHktdG9vbHRpcCcpfSBhcmlhLWhpZGRlbj0ndHJ1ZScgPlxyXG4gICAgICAgIHsgcHJvcHMuaXRlbXMubWFwKChpdGVtOiBJdGVtKSA9PiAoaXRlbSAhPT0gbnVsbCkgP1xyXG4gICAgICAgICAgICAoPExpc3RJdGVtIGtleT0geydrZXlfZHJvcF9kb3duXycgKyBpdGVtLmlkfSBvblNlbGVjdD0ge3Byb3BzLm9uU2VsZWN0fSBpdGVtPXsgaXRlbSB9IC8+KSA6XHJcbiAgICAgICAgICAgIG51bGwpIH1cclxuICAgIDwvdWw+XHJcbik7XHJcblxyXG5jb25zdCBEcm9wRG93biA9IChwcm9wczogRHJvcERvd25JdGVtcykgPT4ge1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgICA8ZGl2IGlkPXtwcm9wcy5pZCArICdfZHJvcGRvd24nfSBjbGFzc05hbWU9e2NsYXNzTmFtZXMocHJvcHMuY2xhc3NOYW1lLCB7ICdvcGVuJzogcHJvcHMuaXNPcGVuIH0sXHJcbiAgICAgICAgICAgIHsgJ2Nsb3NlJzogcHJvcHMuaXNPcGVuID09PSB1bmRlZmluZWQgPyBmYWxzZSA6ICFwcm9wcy5pc09wZW4gfSkgfSBvbkNsaWNrID0geyAoKSA9PiB7IHByb3BzLm9uQ2xpY2socHJvcHMuZHJvcERvd25UeXBlKTsgfSB9PlxyXG4gICAgICAgICAgICA8YSBocmVmPSdqYXZhc2NyaXB0OnZvaWQoMCknIGlkPXtwcm9wcy5pZCArICdfY29tcG9uZW50J30gY2xhc3NOYW1lPSdtZW51LWJ1dHRvbic+XHJcbiAgICAgICAgICAgICAgICA8c3BhbiBpZCA9IHtwcm9wcy5pZCArICdfaXRlbXMnfSA+IHsgcHJvcHMuc2VsZWN0ZWRJdGVtIH0gPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSdzcHJpdGUtaWNvbiBtZW51LWFycm93LWljb24nPjwvc3Bhbj5cclxuICAgICAgICAgICAgPC9hPlxyXG4gICAgICAgICAgICA8TGlzdCBpZD17cHJvcHMuaWR9IGtleT17J2tleV9kcm9wX2Rvd25faXRlbXMnfSAgb25TZWxlY3Q9IHtwcm9wcy5vblNlbGVjdH0gaXRlbXMgPSB7IHByb3BzLml0ZW1zIH0vPlxyXG4gICAgICAgIDwvZGl2Pik7XHJcbn07XHJcblxyXG5leHBvcnQgPSBEcm9wRG93bjtcclxuXHJcbi8qIHRzbGludDplbmFibGUgKi9cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L3NvdXJjZS1tYXAtbG9hZGVyIS4vc3JjL2NvbXBvbmVudHMvbWVzc2FnZS9tZXNzYWdlcHJpb3JpdHlkcm9wZG93bi50c3giXSwibWFwcGluZ3MiOiI7QUFDQTtBQUNBO0FBQ0E7QUFrQkE7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBSUE7QUFDQTtBQUlBO0FBQ0E7QUFHQTtBQUNBOztBQUFBO0FBQUE7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUVBOyIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),

/***/ 466:
/* no static exports found */
/* all exports used */
/*!********************************************!*\
  !*** ./src/components/message/subject.tsx ***!
  \********************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar React = __webpack_require__(/*! react */ 0);\r\nvar pureRenderComponent = __webpack_require__(/*! ../base/purerendercomponent */ 227);\r\nvar messageStore = __webpack_require__(/*! ../../stores/message/messagestore */ 240);\r\nvar htmlUtilities = __webpack_require__(/*! ../../utility/generic/htmlutilities */ 243);\r\nvar Subject = /** @class */ (function (_super) {\r\n    __extends(Subject, _super);\r\n    /**\r\n     * constructor\r\n     * @param props\r\n     * @param state\r\n     */\r\n    function Subject(props, state) {\r\n        var _this = _super.call(this, props, state) || this;\r\n        /**\r\n         * seting focus back to subject on message close for fixing cursor and onscreen keyboard displaying issue in ipad\r\n         * Defect: 24608\r\n         */\r\n        _this.closeMessage = function () {\r\n            if (_this.props.hasFocus && htmlUtilities.isIPadDevice) {\r\n                _this.setFocusOnSubject();\r\n                (_this.refs[_this.props.refName]).blur();\r\n            }\r\n            // close message callback function called\r\n            if (_this.props.callback) {\r\n                _this.props.callback();\r\n            }\r\n        };\r\n        /**\r\n         * This method will call on subject onChange event\r\n         */\r\n        _this.onChange = function (event) {\r\n            _this.props.onChange(event.target.value);\r\n        };\r\n        /**\r\n         * Set Focus to the input field if necessary\r\n         */\r\n        _this.setFocusOnSubject = function () {\r\n            if (_this.props.hasFocus) {\r\n                (_this.refs[_this.props.refName]).blur();\r\n                (_this.refs[_this.props.refName]).focus();\r\n            }\r\n        };\r\n        _this.onAnimationEnd = _this.onAnimationEnd.bind(_this);\r\n        return _this;\r\n    }\r\n    /**\r\n     * Event on animation end\r\n     * @param event\r\n     */\r\n    Subject.prototype.onAnimationEnd = function (event) {\r\n        // If any child element has triggered the transion-end ignore it\r\n        var element = event.srcElement || event.target;\r\n        if (element.id !== 'messaging-panel') {\r\n            return;\r\n        }\r\n        // setting scroll top - fix for ipad issue #49587\r\n        if (htmlUtilities.isIPadDevice) {\r\n            window.scrollTo(0, 0);\r\n            document.body.scrollTop = 0;\r\n        }\r\n        this.setFocusOnSubject();\r\n    };\r\n    /**\r\n     * Render method\r\n     */\r\n    Subject.prototype.render = function () {\r\n        return (React.createElement(\"div\", { className: this.props.outerClass },\r\n            React.createElement(\"input\", { type: 'text', ref: this.props.refName, id: this.props.id, \"aria-label\": 'Subject', placeholder: this.props.placeHolder, className: this.props.className, maxLength: this.props.maxLength, value: this.props.value, onInput: this.onChange })));\r\n    };\r\n    /**\r\n     * This function gets invoked when the component is about to be mounted\r\n     */\r\n    Subject.prototype.componentDidMount = function () {\r\n        messageStore.instance.addListener(messageStore.MessageStore.MESSAGE_CLOSE_EVENT, this.closeMessage);\r\n        // While creating a message from worklist and Inbox, set the focus to subject\r\n        messageStore.instance.addListener(messageStore.MessageStore.MESSAGE_OPEN_EVENT, this.setFocusOnSubject);\r\n        this.messagingPanel = document.getElementsByClassName('messaging-panel').item(0);\r\n        if (this.messagingPanel) {\r\n            // While creating a message inside the response, set the focus to subject\r\n            this.messagingPanel.addEventListener('transitionend', this.onAnimationEnd);\r\n        }\r\n        // While composing a message from Team management. Set focus to subject\r\n        this.setFocusOnSubject();\r\n    };\r\n    /**\r\n     * This function gets invoked when the component is about to be mounted\r\n     */\r\n    Subject.prototype.componentWillUnmount = function () {\r\n        messageStore.instance.removeListener(messageStore.MessageStore.MESSAGE_CLOSE_EVENT, this.closeMessage);\r\n        messageStore.instance.removeListener(messageStore.MessageStore.MESSAGE_OPEN_EVENT, this.setFocusOnSubject);\r\n        if (this.messagingPanel) {\r\n            this.messagingPanel.removeEventListener('transitionend', this.onAnimationEnd);\r\n        }\r\n    };\r\n    return Subject;\r\n}(pureRenderComponent));\r\nmodule.exports = Subject;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDY2LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvbWVzc2FnZS9zdWJqZWN0LnRzeD9hNzFhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XHJcbmltcG9ydCBSZWFjdERvbSA9IHJlcXVpcmUoJ3JlYWN0LWRvbScpO1xyXG5pbXBvcnQgcHVyZVJlbmRlckNvbXBvbmVudCA9IHJlcXVpcmUoJy4uL2Jhc2UvcHVyZXJlbmRlcmNvbXBvbmVudCcpO1xyXG5pbXBvcnQgZW51bXMgPSByZXF1aXJlKCcuLi91dGlsaXR5L2VudW1zJyk7XHJcbmltcG9ydCBtZXNzYWdlU3RvcmUgPSByZXF1aXJlKCcuLi8uLi9zdG9yZXMvbWVzc2FnZS9tZXNzYWdlc3RvcmUnKTtcclxuaW1wb3J0IGh0bWxVdGlsaXRpZXMgPSByZXF1aXJlKCcuLi8uLi91dGlsaXR5L2dlbmVyaWMvaHRtbHV0aWxpdGllcycpO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIGV4dGVuZHMgUHJvcHNCYXNlLCBMb2NhbGVTZWxlY3Rpb25CYXNlIHtcclxuICAgIG91dGVyQ2xhc3M6IHN0cmluZztcclxuICAgIHJlZk5hbWU6IHN0cmluZztcclxuICAgIGhhc0ZvY3VzOiBib29sZWFuO1xyXG4gICAgY2xhc3NOYW1lOiBzdHJpbmc7XHJcbiAgICBwbGFjZUhvbGRlcj86IHN0cmluZztcclxuICAgIG1heExlbmd0aDogbnVtYmVyO1xyXG4gICAgdmFsdWU6IHN0cmluZztcclxuICAgIG9uQ2hhbmdlOiBGdW5jdGlvbjtcclxuICAgIGNhbGxiYWNrPzogRnVuY3Rpb247XHJcbiAgICBpc1Zpc2libGU6IGJvb2xlYW47XHJcbn1cclxuXHJcbmNsYXNzIFN1YmplY3QgZXh0ZW5kcyBwdXJlUmVuZGVyQ29tcG9uZW50PFByb3BzLCBhbnk+IHtcclxuICAgIC8qIHByaXZhdGUgdmFyaWFibGUgdG8gbWFuYWdlIGV2ZW50IGxpc3RlbmVycyBmb3IgbWVzc2FnaW5nIHBhbmVsKi9cclxuICAgIHByaXZhdGUgbWVzc2FnaW5nUGFuZWw6IEVsZW1lbnQ7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBjb25zdHJ1Y3RvclxyXG4gICAgICogQHBhcmFtIHByb3BzXHJcbiAgICAgKiBAcGFyYW0gc3RhdGVcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IocHJvcHM6IFByb3BzLCBzdGF0ZTogYW55KSB7XHJcbiAgICAgICAgc3VwZXIocHJvcHMsIHN0YXRlKTtcclxuICAgICAgICB0aGlzLm9uQW5pbWF0aW9uRW5kID0gdGhpcy5vbkFuaW1hdGlvbkVuZC5iaW5kKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRXZlbnQgb24gYW5pbWF0aW9uIGVuZFxyXG4gICAgICogQHBhcmFtIGV2ZW50XHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgb25BbmltYXRpb25FbmQoZXZlbnQ6IEV2ZW50KSB7XHJcbiAgICAgICAgLy8gSWYgYW55IGNoaWxkIGVsZW1lbnQgaGFzIHRyaWdnZXJlZCB0aGUgdHJhbnNpb24tZW5kIGlnbm9yZSBpdFxyXG4gICAgICAgIGxldCBlbGVtZW50OiBhbnkgPSBldmVudC5zcmNFbGVtZW50IHx8IGV2ZW50LnRhcmdldDtcclxuICAgICAgICBpZiAoZWxlbWVudC5pZCAhPT0gJ21lc3NhZ2luZy1wYW5lbCcpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gc2V0dGluZyBzY3JvbGwgdG9wIC0gZml4IGZvciBpcGFkIGlzc3VlICM0OTU4N1xyXG4gICAgICAgIGlmIChodG1sVXRpbGl0aWVzLmlzSVBhZERldmljZSkge1xyXG4gICAgICAgICAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgMCk7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zZXRGb2N1c09uU3ViamVjdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVuZGVyIG1ldGhvZFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcmVuZGVyKCk6IEpTWC5FbGVtZW50IHtcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17dGhpcy5wcm9wcy5vdXRlckNsYXNzfT5cclxuICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSd0ZXh0JyByZWY9e3RoaXMucHJvcHMucmVmTmFtZX0gaWQ9e3RoaXMucHJvcHMuaWR9IGFyaWEtbGFiZWw9J1N1YmplY3QnXHJcbiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e3RoaXMucHJvcHMucGxhY2VIb2xkZXJ9IGNsYXNzTmFtZT17dGhpcy5wcm9wcy5jbGFzc05hbWV9XHJcbiAgICAgICAgICAgICAgICAgICAgbWF4TGVuZ3RoPXt0aGlzLnByb3BzLm1heExlbmd0aH0gdmFsdWU9e3RoaXMucHJvcHMudmFsdWV9IG9uSW5wdXQ9e3RoaXMub25DaGFuZ2V9IC8+XHJcbiAgICAgICAgICAgIDwvZGl2Pik7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIGdldHMgaW52b2tlZCB3aGVuIHRoZSBjb21wb25lbnQgaXMgYWJvdXQgdG8gYmUgbW91bnRlZFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgY29tcG9uZW50RGlkTW91bnQoKSB7XHJcbiAgICAgICAgbWVzc2FnZVN0b3JlLmluc3RhbmNlLmFkZExpc3RlbmVyKG1lc3NhZ2VTdG9yZS5NZXNzYWdlU3RvcmUuTUVTU0FHRV9DTE9TRV9FVkVOVCwgdGhpcy5jbG9zZU1lc3NhZ2UpO1xyXG5cclxuICAgICAgICAvLyBXaGlsZSBjcmVhdGluZyBhIG1lc3NhZ2UgZnJvbSB3b3JrbGlzdCBhbmQgSW5ib3gsIHNldCB0aGUgZm9jdXMgdG8gc3ViamVjdFxyXG4gICAgICAgIG1lc3NhZ2VTdG9yZS5pbnN0YW5jZS5hZGRMaXN0ZW5lcihtZXNzYWdlU3RvcmUuTWVzc2FnZVN0b3JlLk1FU1NBR0VfT1BFTl9FVkVOVCwgdGhpcy5zZXRGb2N1c09uU3ViamVjdCk7XHJcbiAgICAgICAgdGhpcy5tZXNzYWdpbmdQYW5lbCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ21lc3NhZ2luZy1wYW5lbCcpLml0ZW0oMCk7XHJcbiAgICAgICAgaWYgKHRoaXMubWVzc2FnaW5nUGFuZWwpIHtcclxuICAgICAgICAgICAgLy8gV2hpbGUgY3JlYXRpbmcgYSBtZXNzYWdlIGluc2lkZSB0aGUgcmVzcG9uc2UsIHNldCB0aGUgZm9jdXMgdG8gc3ViamVjdFxyXG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2luZ1BhbmVsLmFkZEV2ZW50TGlzdGVuZXIoJ3RyYW5zaXRpb25lbmQnLCB0aGlzLm9uQW5pbWF0aW9uRW5kKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFdoaWxlIGNvbXBvc2luZyBhIG1lc3NhZ2UgZnJvbSBUZWFtIG1hbmFnZW1lbnQuIFNldCBmb2N1cyB0byBzdWJqZWN0XHJcbiAgICAgICAgdGhpcy5zZXRGb2N1c09uU3ViamVjdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhpcyBmdW5jdGlvbiBnZXRzIGludm9rZWQgd2hlbiB0aGUgY29tcG9uZW50IGlzIGFib3V0IHRvIGJlIG1vdW50ZWRcclxuICAgICAqL1xyXG4gICAgcHVibGljIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xyXG4gICAgICAgIG1lc3NhZ2VTdG9yZS5pbnN0YW5jZS5yZW1vdmVMaXN0ZW5lcihtZXNzYWdlU3RvcmUuTWVzc2FnZVN0b3JlLk1FU1NBR0VfQ0xPU0VfRVZFTlQsIHRoaXMuY2xvc2VNZXNzYWdlKTtcclxuICAgICAgICBtZXNzYWdlU3RvcmUuaW5zdGFuY2UucmVtb3ZlTGlzdGVuZXIobWVzc2FnZVN0b3JlLk1lc3NhZ2VTdG9yZS5NRVNTQUdFX09QRU5fRVZFTlQsIHRoaXMuc2V0Rm9jdXNPblN1YmplY3QpO1xyXG4gICAgICAgIGlmICh0aGlzLm1lc3NhZ2luZ1BhbmVsKSB7XHJcbiAgICAgICAgICAgIHRoaXMubWVzc2FnaW5nUGFuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigndHJhbnNpdGlvbmVuZCcsIHRoaXMub25BbmltYXRpb25FbmQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIHNldGluZyBmb2N1cyBiYWNrIHRvIHN1YmplY3Qgb24gbWVzc2FnZSBjbG9zZSBmb3IgZml4aW5nIGN1cnNvciBhbmQgb25zY3JlZW4ga2V5Ym9hcmQgZGlzcGxheWluZyBpc3N1ZSBpbiBpcGFkXHJcbiAgICAgKiBEZWZlY3Q6IDI0NjA4XHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgY2xvc2VNZXNzYWdlID0gKCkgPT4ge1xyXG4gICAgICAgIGlmICh0aGlzLnByb3BzLmhhc0ZvY3VzICYmIGh0bWxVdGlsaXRpZXMuaXNJUGFkRGV2aWNlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0Rm9jdXNPblN1YmplY3QoKTtcclxuICAgICAgICAgICAgKCh0aGlzLnJlZnNbdGhpcy5wcm9wcy5yZWZOYW1lXSkgYXMgSFRNTElucHV0RWxlbWVudCkuYmx1cigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gY2xvc2UgbWVzc2FnZSBjYWxsYmFjayBmdW5jdGlvbiBjYWxsZWRcclxuICAgICAgICBpZiAodGhpcy5wcm9wcy5jYWxsYmFjaykge1xyXG4gICAgICAgICAgICB0aGlzLnByb3BzLmNhbGxiYWNrKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgbWV0aG9kIHdpbGwgY2FsbCBvbiBzdWJqZWN0IG9uQ2hhbmdlIGV2ZW50XHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgb25DaGFuZ2UgPSAoZXZlbnQ6IGFueSkgPT4ge1xyXG4gICAgICAgIHRoaXMucHJvcHMub25DaGFuZ2UoZXZlbnQudGFyZ2V0LnZhbHVlKTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgRm9jdXMgdG8gdGhlIGlucHV0IGZpZWxkIGlmIG5lY2Vzc2FyeVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHNldEZvY3VzT25TdWJqZWN0ID0gKCkgPT4ge1xyXG4gICAgICAgIGlmICh0aGlzLnByb3BzLmhhc0ZvY3VzKSB7XHJcbiAgICAgICAgICAgICgodGhpcy5yZWZzW3RoaXMucHJvcHMucmVmTmFtZV0pIGFzIEhUTUxJbnB1dEVsZW1lbnQpLmJsdXIoKTtcclxuICAgICAgICAgICAgKCh0aGlzLnJlZnNbdGhpcy5wcm9wcy5yZWZOYW1lXSkgYXMgSFRNTElucHV0RWxlbWVudCkuZm9jdXMoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCA9IFN1YmplY3Q7XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vc291cmNlLW1hcC1sb2FkZXIhLi9zcmMvY29tcG9uZW50cy9tZXNzYWdlL3N1YmplY3QudHN4Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBO0FBRUE7QUFFQTtBQUNBO0FBZUE7QUFBQTtBQUlBOzs7O0FBSUE7QUFDQTtBQUFBO0FBaUVBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTlGQTs7QUFDQTtBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFJQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWtDQTtBQUFBO0FBRUE7Iiwic291cmNlUm9vdCI6IiJ9");

/***/ }),

/***/ 489:
/* no static exports found */
/* all exports used */
/*!******************************************************!*\
  !*** ./src/components/message/messagerightpanel.tsx ***!
  \******************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar messageTranslationHelper = __webpack_require__(/*! ../utility/message/messagetranslationhelper */ 459);\r\nvar React = __webpack_require__(/*! react */ 0);\r\nvar MessagePriorityDescription = __webpack_require__(/*! ./messageprioritydescription */ 508);\r\nvar MessageDetailsSenderInfo = __webpack_require__(/*! ./messagedetailssenderinfo */ 506);\r\nvar MessageDetailsSenderDate = __webpack_require__(/*! ./messagedetailssenderdate */ 505);\r\nvar enums = __webpack_require__(/*! ../utility/enums */ 225);\r\nvar MessageActionMenu = __webpack_require__(/*! ./messageactionmenu */ 504);\r\nvar messageHelper = __webpack_require__(/*! ../utility/message/messagehelper */ 283);\r\nvar qigStore = __webpack_require__(/*! ../../stores/qigselector/qigstore */ 230);\r\nvar TINYMCE = __webpack_require__(/*! react-tinymce */ 45);\r\nvar classNames = __webpack_require__(/*! classnames */ 39);\r\n/**\r\n * Message Description Area\r\n * @param props\r\n */\r\nvar messageRightPanel = function (props) {\r\n    if (props.message === undefined || props.messageDetails == null) {\r\n        // Message is not yet selected. No Need to handle here.\r\n        return null;\r\n    }\r\n    if (qigStore.instance.isQIGHidden(props.message.markSchemeGroupId)) {\r\n        // No message in the right panel.\r\n        return null;\r\n    }\r\n    /**\r\n     * Make the string as html.\r\n     * @param messageContent\r\n     */\r\n    function createMarkup() {\r\n        // Defect 29714 fix\r\n        // styles applied from web assessor will apply to all elements in mark scheme panel\r\n        // to avoid that, render the mesage content in an iframe element\r\n        // Defect 29926, 29976, 29977 fix : remove html scripts in message body\r\n        var iframe = document.createElement('iframe');\r\n        iframe.id = 'msg-iframe_ifr';\r\n        iframe.style.height = '100%';\r\n        iframe.style.width = '100%';\r\n        iframe.style.display = 'block';\r\n        return { __html: iframe.outerHTML };\r\n    }\r\n    var translatedMessageContents = messageTranslationHelper.getTranslatedContent(props.message);\r\n    /**\r\n     * This method will returns the message body\r\n     */\r\n    function getMessageBody() {\r\n        // If selected message is a system message then returns the corresponding language json file entry\r\n        if (props.message.examBodyMessageTypeId != null && props.message.examBodyMessageTypeId !== enums.SystemMessage.None) {\r\n            return translatedMessageContents.content;\r\n        }\r\n        else {\r\n            return props.messageDetails.body;\r\n        }\r\n    }\r\n    /**\r\n     * This method will return the message actions\r\n     */\r\n    function getMessageActions() {\r\n        var messageActions = new Array();\r\n        // Add Reply action if and only if the reply field is null or true\r\n        if (props.message.canReply == null || props.message.canReply) {\r\n            messageActions.push(enums.MessageAction.Reply);\r\n        }\r\n        // Add forward action if isForwardButtonHidden field is false\r\n        if (!props.isForwardButtonHidden) {\r\n            messageActions.push(enums.MessageAction.Forward);\r\n        }\r\n        messageActions.push(enums.MessageAction.Delete);\r\n        return messageActions;\r\n    }\r\n    /**\r\n     * This method will return the selected Tab for linked messages and Message page\r\n     */\r\n    function getSelectedTab() {\r\n        // This will handle linked message folder types\r\n        if (props.selectedTab === enums.MessageFolderType.None) {\r\n            return props.message.messageFolderType;\r\n        }\r\n        else {\r\n            return props.selectedTab;\r\n        }\r\n    }\r\n    var editorConfig = {\r\n        readonly: 1,\r\n        menubar: false,\r\n        statusbar: false,\r\n        toolbar: false,\r\n        fontsize_formats: false,\r\n        font_formats: false,\r\n        valid_children: '+body[style]',\r\n        invalid_elements: 'embed'\r\n    };\r\n    if (tinymce.get('msg-tinymce_ifr')) {\r\n        tinymce.get('msg-tinymce_ifr').destroy();\r\n    }\r\n    /**\r\n     * This method will call on tinyMCE content setting\r\n     * @param o\r\n     * @param e\r\n     */\r\n    function setContent(o, e) {\r\n        messageHelper.addIFrameForMessageDetails(o, e);\r\n    }\r\n    var tinymceElement = React.createElement(TINYMCE, { content: getMessageBody(), Id: 'msg-tinymce_ifr', config: editorConfig, onSetContent: setContent });\r\n    return (React.createElement(\"div\", { className: classNames({ 'column-right message-expanded': props.selectedTab !== enums.MessageFolderType.None }, { 'messaging-content': props.selectedTab === enums.MessageFolderType.None }) },\r\n        React.createElement(\"div\", { className: classNames('msg-exp-wrapper', { 'wrapper': props.selectedTab !== enums.MessageFolderType.None }) },\r\n            React.createElement(\"div\", { className: 'msg-exp-header' },\r\n                React.createElement(\"div\", { className: 'msg-subject-wrap clearfix' },\r\n                    React.createElement(\"div\", { className: 'msg-subject' },\r\n                        React.createElement(\"h4\", { className: 'msg-subject-title', id: 'msg-det-sender-info-subject' }, translatedMessageContents.subject)))),\r\n            React.createElement(\"div\", { className: 'msg-exp-metainfo' },\r\n                React.createElement(\"div\", { className: 'col-wrap responsive-medium' },\r\n                    React.createElement(MessageActionMenu, { id: 'message-action-menu', key: 'key-message-action-menu', items: messageHelper.getMessageMenuActionItems(getSelectedTab(), getMessageActions()), onClick: function (messageAction) {\r\n                            props.onMessageMenuActionClickCallback(messageAction);\r\n                        } }),\r\n                    React.createElement(MessageDetailsSenderDate, { id: 'msg-det-sender-info', key: 'msg-det-sender-info', displayDate: props.message.displayDate })),\r\n                React.createElement(MessageDetailsSenderInfo, { id: 'msg-det-sender-info', key: 'msg-det-sender-info', selectedLanguage: props.selectedLanguage, message: props.message, messageDetails: props.messageDetails, selectedTab: props.selectedTab, onDisplayIdClick: props.onDisplayIdClick }),\r\n                React.createElement(MessagePriorityDescription, { selectedLanguage: props.selectedLanguage, id: 'msg-det-priority-desc', key: 'msg-det-priority-desc', messagePriorityName: props.message.priorityName })),\r\n            React.createElement(\"div\", { style: { display: 'none' } }, tinymceElement),\r\n            React.createElement(\"div\", { className: 'msg-exp-body', dangerouslySetInnerHTML: createMarkup() }))));\r\n};\r\nmodule.exports = messageRightPanel;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDg5LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvbWVzc2FnZS9tZXNzYWdlcmlnaHRwYW5lbC50c3g/N2FjZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbWVzc2FnZVRyYW5zbGF0aW9uSGVscGVyID0gcmVxdWlyZSgnLi4vdXRpbGl0eS9tZXNzYWdlL21lc3NhZ2V0cmFuc2xhdGlvbmhlbHBlcicpO1xyXG5pbXBvcnQgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xyXG4vKiB0c2xpbnQ6ZW5hYmxlOm5vLXVudXNlZC12YXJpYWJsZSAqL1xyXG5pbXBvcnQgcHVyZVJlbmRlckNvbXBvbmVudCA9IHJlcXVpcmUoJy4uL2Jhc2UvcHVyZXJlbmRlcmNvbXBvbmVudCcpO1xyXG5pbXBvcnQgTWVzc2FnZVByaW9yaXR5RGVzY3JpcHRpb24gPSByZXF1aXJlKCcuL21lc3NhZ2Vwcmlvcml0eWRlc2NyaXB0aW9uJyk7XHJcbmltcG9ydCBNZXNzYWdlRGV0YWlsc1NlbmRlckluZm8gPSByZXF1aXJlKCcuL21lc3NhZ2VkZXRhaWxzc2VuZGVyaW5mbycpO1xyXG5pbXBvcnQgTWVzc2FnZURldGFpbHNTZW5kZXJEYXRlID0gcmVxdWlyZSgnLi9tZXNzYWdlZGV0YWlsc3NlbmRlcmRhdGUnKTtcclxuaW1wb3J0IGVudW1zID0gcmVxdWlyZSgnLi4vdXRpbGl0eS9lbnVtcycpO1xyXG5pbXBvcnQgTWVzc2FnZUFjdGlvbk1lbnUgPSByZXF1aXJlKCcuL21lc3NhZ2VhY3Rpb25tZW51Jyk7XHJcbmltcG9ydCBsb2NhbGVTdG9yZSA9IHJlcXVpcmUoJy4uLy4uL3N0b3Jlcy9sb2NhbGUvbG9jYWxlc3RvcmUnKTtcclxuaW1wb3J0IG1lc3NhZ2VIZWxwZXIgPSByZXF1aXJlKCcuLi91dGlsaXR5L21lc3NhZ2UvbWVzc2FnZWhlbHBlcicpO1xyXG5pbXBvcnQgaHRtbFV0aWxpdGllcyA9IHJlcXVpcmUoJy4uLy4uL3V0aWxpdHkvZ2VuZXJpYy9odG1sdXRpbGl0aWVzJyk7XHJcbmltcG9ydCBxaWdTdG9yZSA9IHJlcXVpcmUoJy4uLy4uL3N0b3Jlcy9xaWdzZWxlY3Rvci9xaWdzdG9yZScpO1xyXG5jb25zdCBUSU5ZTUNFID0gcmVxdWlyZSgncmVhY3QtdGlueW1jZScpO1xyXG5sZXQgY2xhc3NOYW1lcyA9IHJlcXVpcmUoJ2NsYXNzbmFtZXMnKTtcclxuXHJcbmRlY2xhcmUgbGV0IHRpbnltY2U6IGFueTtcclxuaW50ZXJmYWNlIFByb3BzIGV4dGVuZHMgTG9jYWxlU2VsZWN0aW9uQmFzZSwgUHJvcHNCYXNlIHtcclxuICAgIG1lc3NhZ2U6IE1lc3NhZ2U7XHJcbiAgICBtZXNzYWdlRGV0YWlsczogTWVzc2FnZURldGFpbHM7XHJcbiAgICBzZWxlY3RlZFRhYjogZW51bXMuTWVzc2FnZUZvbGRlclR5cGU7XHJcbiAgICBpc0ZvcndhcmRCdXR0b25IaWRkZW46IGJvb2xlYW47XHJcbiAgICBvbk1lc3NhZ2VNZW51QWN0aW9uQ2xpY2tDYWxsYmFjaz86IEZ1bmN0aW9uO1xyXG4gICAgb25EaXNwbGF5SWRDbGljaz86IEZ1bmN0aW9uO1xyXG59XHJcblxyXG4vKipcclxuICogTWVzc2FnZSBEZXNjcmlwdGlvbiBBcmVhXHJcbiAqIEBwYXJhbSBwcm9wc1xyXG4gKi9cclxuY29uc3QgbWVzc2FnZVJpZ2h0UGFuZWwgPSAocHJvcHM6IFByb3BzKSA9PiB7XHJcblxyXG4gICAgaWYgKHByb3BzLm1lc3NhZ2UgPT09IHVuZGVmaW5lZCB8fCBwcm9wcy5tZXNzYWdlRGV0YWlscyA9PSBudWxsKSB7XHJcbiAgICAgICAgLy8gTWVzc2FnZSBpcyBub3QgeWV0IHNlbGVjdGVkLiBObyBOZWVkIHRvIGhhbmRsZSBoZXJlLlxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChxaWdTdG9yZS5pbnN0YW5jZS5pc1FJR0hpZGRlbihwcm9wcy5tZXNzYWdlLm1hcmtTY2hlbWVHcm91cElkKSkge1xyXG4gICAgICAgIC8vIE5vIG1lc3NhZ2UgaW4gdGhlIHJpZ2h0IHBhbmVsLlxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTWFrZSB0aGUgc3RyaW5nIGFzIGh0bWwuXHJcbiAgICAgKiBAcGFyYW0gbWVzc2FnZUNvbnRlbnRcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gY3JlYXRlTWFya3VwKCkge1xyXG4gICAgICAgIC8vIERlZmVjdCAyOTcxNCBmaXhcclxuICAgICAgICAvLyBzdHlsZXMgYXBwbGllZCBmcm9tIHdlYiBhc3Nlc3NvciB3aWxsIGFwcGx5IHRvIGFsbCBlbGVtZW50cyBpbiBtYXJrIHNjaGVtZSBwYW5lbFxyXG4gICAgICAgIC8vIHRvIGF2b2lkIHRoYXQsIHJlbmRlciB0aGUgbWVzYWdlIGNvbnRlbnQgaW4gYW4gaWZyYW1lIGVsZW1lbnRcclxuICAgICAgICAvLyBEZWZlY3QgMjk5MjYsIDI5OTc2LCAyOTk3NyBmaXggOiByZW1vdmUgaHRtbCBzY3JpcHRzIGluIG1lc3NhZ2UgYm9keVxyXG4gICAgICAgIGxldCBpZnJhbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpZnJhbWUnKTtcclxuICAgICAgICBpZnJhbWUuaWQgPSAnbXNnLWlmcmFtZV9pZnInO1xyXG4gICAgICAgIGlmcmFtZS5zdHlsZS5oZWlnaHQgPSAnMTAwJSc7XHJcbiAgICAgICAgaWZyYW1lLnN0eWxlLndpZHRoID0gJzEwMCUnO1xyXG4gICAgICAgIGlmcmFtZS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuXHJcbiAgICAgICAgcmV0dXJuIHsgX19odG1sOiBpZnJhbWUub3V0ZXJIVE1MIH07XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHRyYW5zbGF0ZWRNZXNzYWdlQ29udGVudHM6IFRyYW5zbGF0ZWRNZXNzYWdlQ29udGVudCA9IG1lc3NhZ2VUcmFuc2xhdGlvbkhlbHBlci5nZXRUcmFuc2xhdGVkQ29udGVudChwcm9wcy5tZXNzYWdlKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgbWV0aG9kIHdpbGwgcmV0dXJucyB0aGUgbWVzc2FnZSBib2R5XHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGdldE1lc3NhZ2VCb2R5KCkge1xyXG4gICAgLy8gSWYgc2VsZWN0ZWQgbWVzc2FnZSBpcyBhIHN5c3RlbSBtZXNzYWdlIHRoZW4gcmV0dXJucyB0aGUgY29ycmVzcG9uZGluZyBsYW5ndWFnZSBqc29uIGZpbGUgZW50cnlcclxuICAgICAgICBpZiAocHJvcHMubWVzc2FnZS5leGFtQm9keU1lc3NhZ2VUeXBlSWQgIT0gbnVsbCAmJiBwcm9wcy5tZXNzYWdlLmV4YW1Cb2R5TWVzc2FnZVR5cGVJZCAhPT0gZW51bXMuU3lzdGVtTWVzc2FnZS5Ob25lKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cmFuc2xhdGVkTWVzc2FnZUNvbnRlbnRzLmNvbnRlbnQ7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHByb3BzLm1lc3NhZ2VEZXRhaWxzLmJvZHk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhpcyBtZXRob2Qgd2lsbCByZXR1cm4gdGhlIG1lc3NhZ2UgYWN0aW9uc1xyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBnZXRNZXNzYWdlQWN0aW9ucygpOiBBcnJheTxlbnVtcy5NZXNzYWdlQWN0aW9uPiB7XHJcbiAgICAgICAgbGV0IG1lc3NhZ2VBY3Rpb25zOiBBcnJheTxlbnVtcy5NZXNzYWdlQWN0aW9uPiA9IG5ldyBBcnJheTxlbnVtcy5NZXNzYWdlQWN0aW9uPigpO1xyXG4gICAgICAgIC8vIEFkZCBSZXBseSBhY3Rpb24gaWYgYW5kIG9ubHkgaWYgdGhlIHJlcGx5IGZpZWxkIGlzIG51bGwgb3IgdHJ1ZVxyXG4gICAgICAgIGlmIChwcm9wcy5tZXNzYWdlLmNhblJlcGx5ID09IG51bGwgfHwgcHJvcHMubWVzc2FnZS5jYW5SZXBseSkge1xyXG4gICAgICAgICAgICBtZXNzYWdlQWN0aW9ucy5wdXNoKGVudW1zLk1lc3NhZ2VBY3Rpb24uUmVwbHkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQWRkIGZvcndhcmQgYWN0aW9uIGlmIGlzRm9yd2FyZEJ1dHRvbkhpZGRlbiBmaWVsZCBpcyBmYWxzZVxyXG4gICAgICAgIGlmICghcHJvcHMuaXNGb3J3YXJkQnV0dG9uSGlkZGVuKSB7XHJcbiAgICAgICAgICAgIG1lc3NhZ2VBY3Rpb25zLnB1c2goZW51bXMuTWVzc2FnZUFjdGlvbi5Gb3J3YXJkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbWVzc2FnZUFjdGlvbnMucHVzaChlbnVtcy5NZXNzYWdlQWN0aW9uLkRlbGV0ZSk7XHJcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2VBY3Rpb25zO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhpcyBtZXRob2Qgd2lsbCByZXR1cm4gdGhlIHNlbGVjdGVkIFRhYiBmb3IgbGlua2VkIG1lc3NhZ2VzIGFuZCBNZXNzYWdlIHBhZ2VcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gZ2V0U2VsZWN0ZWRUYWIoKTogZW51bXMuTWVzc2FnZUZvbGRlclR5cGUge1xyXG4gICAgICAgIC8vIFRoaXMgd2lsbCBoYW5kbGUgbGlua2VkIG1lc3NhZ2UgZm9sZGVyIHR5cGVzXHJcbiAgICAgICAgaWYgKHByb3BzLnNlbGVjdGVkVGFiID09PSBlbnVtcy5NZXNzYWdlRm9sZGVyVHlwZS5Ob25lKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBwcm9wcy5tZXNzYWdlLm1lc3NhZ2VGb2xkZXJUeXBlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBwcm9wcy5zZWxlY3RlZFRhYjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGVkaXRvckNvbmZpZyA9IHtcclxuICAgICAgICByZWFkb25seTogMSxcclxuICAgICAgICBtZW51YmFyOiBmYWxzZSxcclxuICAgICAgICBzdGF0dXNiYXI6IGZhbHNlLFxyXG4gICAgICAgIHRvb2xiYXI6IGZhbHNlLFxyXG4gICAgICAgIGZvbnRzaXplX2Zvcm1hdHM6IGZhbHNlLFxyXG4gICAgICAgIGZvbnRfZm9ybWF0czogZmFsc2UsXHJcbiAgICAgICAgdmFsaWRfY2hpbGRyZW46ICcrYm9keVtzdHlsZV0nLCAvL2FsbG93cyBzdHlsZSBlbGVtZW50IGluc2lkZSBib2R5IGVsZW1lbnQgdG8gc3VwcG9ydCBodG1sIG1lc3NhZ2VzIGZyb20gV2ViIGFzc2Vzc29yLFxyXG4gICAgICAgIGludmFsaWRfZWxlbWVudHMgOiAnZW1iZWQnXHJcbiAgICB9O1xyXG5cclxuICAgIGlmICh0aW55bWNlLmdldCgnbXNnLXRpbnltY2VfaWZyJykpIHtcclxuICAgICAgICB0aW55bWNlLmdldCgnbXNnLXRpbnltY2VfaWZyJykuZGVzdHJveSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhpcyBtZXRob2Qgd2lsbCBjYWxsIG9uIHRpbnlNQ0UgY29udGVudCBzZXR0aW5nXHJcbiAgICAgKiBAcGFyYW0gb1xyXG4gICAgICogQHBhcmFtIGVcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gc2V0Q29udGVudChvOiBhbnksIGU6IGFueSkge1xyXG4gICAgICAgIG1lc3NhZ2VIZWxwZXIuYWRkSUZyYW1lRm9yTWVzc2FnZURldGFpbHMobywgZSk7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHRpbnltY2VFbGVtZW50ID0gPFRJTllNQ0VcclxuICAgICAgICBjb250ZW50PXsgZ2V0TWVzc2FnZUJvZHkoKSB9XHJcbiAgICAgICAgSWQ9IHsnbXNnLXRpbnltY2VfaWZyJ31cclxuICAgICAgICBjb25maWc9e2VkaXRvckNvbmZpZ31cclxuICAgICAgICBvblNldENvbnRlbnQ9eyBzZXRDb250ZW50IH1cclxuICAgICAgICAvPjtcclxuXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc05hbWVzKFxyXG4gICAgICAgICAgICB7ICdjb2x1bW4tcmlnaHQgbWVzc2FnZS1leHBhbmRlZCc6IHByb3BzLnNlbGVjdGVkVGFiICE9PSBlbnVtcy5NZXNzYWdlRm9sZGVyVHlwZS5Ob25lIH0sXHJcbiAgICAgICAgICAgIHsgJ21lc3NhZ2luZy1jb250ZW50JzogcHJvcHMuc2VsZWN0ZWRUYWIgPT09IGVudW1zLk1lc3NhZ2VGb2xkZXJUeXBlLk5vbmUgfSkgfT5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ21zZy1leHAtd3JhcHBlcicsIHsgJ3dyYXBwZXInOiBwcm9wcy5zZWxlY3RlZFRhYiAhPT0gZW51bXMuTWVzc2FnZUZvbGRlclR5cGUuTm9uZSB9KSB9PlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J21zZy1leHAtaGVhZGVyJz5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbXNnLXN1YmplY3Qtd3JhcCBjbGVhcmZpeCc+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdtc2ctc3ViamVjdCc+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3NOYW1lPSdtc2ctc3ViamVjdC10aXRsZScgaWQ9J21zZy1kZXQtc2VuZGVyLWluZm8tc3ViamVjdCc+e3RyYW5zbGF0ZWRNZXNzYWdlQ29udGVudHMuc3ViamVjdH08L2g0PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J21zZy1leHAtbWV0YWluZm8nPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdjb2wtd3JhcCByZXNwb25zaXZlLW1lZGl1bSc+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxNZXNzYWdlQWN0aW9uTWVudVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQgPSAnbWVzc2FnZS1hY3Rpb24tbWVudSdcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleSA9ICdrZXktbWVzc2FnZS1hY3Rpb24tbWVudSdcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zID0geyBtZXNzYWdlSGVscGVyLmdldE1lc3NhZ2VNZW51QWN0aW9uSXRlbXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZ2V0U2VsZWN0ZWRUYWIoKSwgZ2V0TWVzc2FnZUFjdGlvbnMoKSkgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljayA9IHsgKG1lc3NhZ2VBY3Rpb246IGVudW1zLk1lc3NhZ2VBY3Rpb24pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wcy5vbk1lc3NhZ2VNZW51QWN0aW9uQ2xpY2tDYWxsYmFjayhtZXNzYWdlQWN0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gfSAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8TWVzc2FnZURldGFpbHNTZW5kZXJEYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZCA9ICdtc2ctZGV0LXNlbmRlci1pbmZvJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5ID0gJ21zZy1kZXQtc2VuZGVyLWluZm8nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5RGF0ZSA9IHtwcm9wcy5tZXNzYWdlLmRpc3BsYXlEYXRlfS8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPE1lc3NhZ2VEZXRhaWxzU2VuZGVySW5mb1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZCA9ICdtc2ctZGV0LXNlbmRlci1pbmZvJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXkgPSAnbXNnLWRldC1zZW5kZXItaW5mbydcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRMYW5ndWFnZSA9IHtwcm9wcy5zZWxlY3RlZExhbmd1YWdlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0ge3Byb3BzLm1lc3NhZ2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VEZXRhaWxzID0ge3Byb3BzLm1lc3NhZ2VEZXRhaWxzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZFRhYiA9IHtwcm9wcy5zZWxlY3RlZFRhYn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25EaXNwbGF5SWRDbGljayA9IHtwcm9wcy5vbkRpc3BsYXlJZENsaWNrfSAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDxNZXNzYWdlUHJpb3JpdHlEZXNjcmlwdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZExhbmd1YWdlID0ge3Byb3BzLnNlbGVjdGVkTGFuZ3VhZ2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkID0nbXNnLWRldC1wcmlvcml0eS1kZXNjJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXkgPSdtc2ctZGV0LXByaW9yaXR5LWRlc2MnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VQcmlvcml0eU5hbWUgPSB7cHJvcHMubWVzc2FnZS5wcmlvcml0eU5hbWV9IC8+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxkaXYgIHN0eWxlPXt7IGRpc3BsYXk6ICdub25lJyB9fT57dGlueW1jZUVsZW1lbnR9PC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbXNnLWV4cC1ib2R5J1xyXG4gICAgICAgICAgICAgICAgICAgIGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MID0ge2NyZWF0ZU1hcmt1cCgpfT5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICk7XHJcbn07XHJcblxyXG5leHBvcnQgPSBtZXNzYWdlUmlnaHRQYW5lbDtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L3NvdXJjZS1tYXAtbG9hZGVyIS4vc3JjL2NvbXBvbmVudHMvbWVzc2FnZS9tZXNzYWdlcmlnaHRwYW5lbC50c3giXSwibWFwcGluZ3MiOiI7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBWUE7OztBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBT0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBS0E7QUFRQTtBQU1BO0FBQ0E7QUFNQTtBQUVBOyIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),

/***/ 504:
/* no static exports found */
/* all exports used */
/*!******************************************************!*\
  !*** ./src/components/message/messageactionmenu.tsx ***!
  \******************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar React = __webpack_require__(/*! react */ 0);\r\nvar enums = __webpack_require__(/*! ../utility/enums */ 225);\r\nvar classNames = __webpack_require__(/*! classnames */ 39);\r\n/* tslint:disable:variable-name */\r\nvar MenuItem = function (props) {\r\n    return (React.createElement(\"li\", { className: props.item.name + '-msg' },\r\n        React.createElement(\"a\", { href: 'javascript:void(0)', onClick: function () { props.onClick(props.item.id); }, id: enums.getEnumString(enums.MessageAction, props.item.id).toLowerCase() + '-link' },\r\n            React.createElement(\"span\", { className: 'sprite-icon ' + props.item.icon },\r\n                \" \",\r\n                props.item.name),\r\n            \" \",\r\n            props.item.name,\r\n            \" \")));\r\n};\r\nvar MenuList = function (props) { return (React.createElement(\"ul\", { id: 'menu-action-items', className: 'msg-action-menu' }, props.items.map(function (item) { return React.createElement(MenuItem, { key: 'key-menu-lits-item-' + item.id, onClick: props.onClick, item: item }); }))); };\r\nvar MessageActionMenu = function (props) {\r\n    if (props.items === undefined) {\r\n        return null;\r\n    }\r\n    return (React.createElement(\"div\", { className: 'col-6-of-12 msg-actions text-right' },\r\n        React.createElement(MenuList, { key: 'key-menu-list', items: props.items, onClick: props.onClick })));\r\n};\r\nmodule.exports = MessageActionMenu;\r\n/* tslint:enable */ \r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTA0LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvbWVzc2FnZS9tZXNzYWdlYWN0aW9ubWVudS50c3g/NTNjMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xyXG5pbXBvcnQgZW51bXMgPSByZXF1aXJlKCcuLi91dGlsaXR5L2VudW1zJyk7XHJcbmxldCBjbGFzc05hbWVzID0gcmVxdWlyZSgnY2xhc3NuYW1lcycpO1xyXG5cclxuaW50ZXJmYWNlIE1lc3NhZ2VBY3Rpb25NZW51SXRlbXMgZXh0ZW5kcyBQcm9wc0Jhc2Uge1xyXG4gICAgb25DbGljazogRnVuY3Rpb247XHJcbiAgICBpdGVtczogQXJyYXk8TWVudUl0ZW0+O1xyXG59XHJcblxyXG5pbnRlcmZhY2UgTWVudUl0ZW0ge1xyXG4gICAgaWQ6IGVudW1zLk1lc3NhZ2VBY3Rpb247XHJcbiAgICBpY29uOiBzdHJpbmc7XHJcbiAgICBuYW1lOiBzdHJpbmc7XHJcbn1cclxuXHJcbi8qIHRzbGludDpkaXNhYmxlOnZhcmlhYmxlLW5hbWUgKi9cclxuXHJcbmNvbnN0IE1lbnVJdGVtID0gKHByb3BzOiB7IG9uQ2xpY2s6IEZ1bmN0aW9uLCBpdGVtOiBNZW51SXRlbSB9KSA9PlxyXG4gICAgKDxsaSBjbGFzc05hbWUgPSB7IHByb3BzLml0ZW0ubmFtZSArICctbXNnJyB9PlxyXG4gICAgICAgIDxhIGhyZWY9J2phdmFzY3JpcHQ6dm9pZCgwKScgb25DbGljayA9IHsoKSA9PiB7IHByb3BzLm9uQ2xpY2socHJvcHMuaXRlbS5pZCk7IH0gfVxyXG4gICAgICAgICAgICBpZCA9IHsgZW51bXMuZ2V0RW51bVN0cmluZyhlbnVtcy5NZXNzYWdlQWN0aW9uLCBwcm9wcy5pdGVtLmlkKS50b0xvd2VyQ2FzZSgpICsgJy1saW5rJyB9PlxyXG4gICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9eydzcHJpdGUtaWNvbiAnICsgcHJvcHMuaXRlbS5pY29uIH0+IHsgcHJvcHMuaXRlbS5uYW1lIH1cclxuICAgICAgICAgICAgPC9zcGFuPiB7IHByb3BzLml0ZW0ubmFtZSB9IDwvYT5cclxuICAgIDwvbGk+KTtcclxuXHJcbmNvbnN0IE1lbnVMaXN0ID0gKHByb3BzOiB7IG9uQ2xpY2s6IEZ1bmN0aW9uLCBpdGVtczogQXJyYXk8TWVudUl0ZW0+IH0pID0+IChcclxuICAgIDx1bCBpZD0nbWVudS1hY3Rpb24taXRlbXMnIGNsYXNzTmFtZT0nbXNnLWFjdGlvbi1tZW51Jz5cclxuICAgICAgICB7IHByb3BzLml0ZW1zLm1hcCgoaXRlbTogTWVudUl0ZW0pID0+IDxNZW51SXRlbSBrZXk9IHsgJ2tleS1tZW51LWxpdHMtaXRlbS0nICsgaXRlbS5pZCB9XHJcbiAgICAgICAgICAgIG9uQ2xpY2s9eyBwcm9wcy5vbkNsaWNrfSBpdGVtPSB7IGl0ZW0gfSAvPikgfVxyXG4gICAgPC91bD5cclxuKTtcclxuXHJcbmNvbnN0IE1lc3NhZ2VBY3Rpb25NZW51ID0gKHByb3BzOiBNZXNzYWdlQWN0aW9uTWVudUl0ZW1zKSA9PiB7XHJcbiAgICBpZiAocHJvcHMuaXRlbXMgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiAoPGRpdiBjbGFzc05hbWU9J2NvbC02LW9mLTEyIG1zZy1hY3Rpb25zIHRleHQtcmlnaHQnPlxyXG4gICAgICAgIDxNZW51TGlzdCBrZXk9eydrZXktbWVudS1saXN0J30gaXRlbXMgPSB7cHJvcHMuaXRlbXN9IG9uQ2xpY2sgPSB7cHJvcHMub25DbGlja30vPlxyXG4gICAgPC9kaXY+KTtcclxufTtcclxuXHJcbmV4cG9ydCA9IE1lc3NhZ2VBY3Rpb25NZW51O1xyXG5cclxuLyogdHNsaW50OmVuYWJsZSAqL1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vc291cmNlLW1hcC1sb2FkZXIhLi9zcmMvY29tcG9uZW50cy9tZXNzYWdlL21lc3NhZ2VhY3Rpb25tZW51LnRzeCJdLCJtYXBwaW5ncyI6IjtBQUFBO0FBQ0E7QUFDQTtBQWFBO0FBRUE7QUFDQTtBQUNBO0FBRUE7O0FBQUE7O0FBQ0E7QUFBQTtBQUpBO0FBT0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7Iiwic291cmNlUm9vdCI6IiJ9");

/***/ }),

/***/ 505:
/* no static exports found */
/* all exports used */
/*!*************************************************************!*\
  !*** ./src/components/message/messagedetailssenderdate.tsx ***!
  \*************************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar React = __webpack_require__(/*! react */ 0);\r\nvar messageHelper = __webpack_require__(/*! ../utility/message/messagehelper */ 283);\r\n/**\r\n * Message Details Send Date section which contains date and time of send message.\r\n * @param props\r\n */\r\nvar messageDetailsSenderDate = function (props) {\r\n    // Get the date format\r\n    var displayDate = messageHelper.getDateToDisplay(props.displayDate);\r\n    return (React.createElement(\"div\", { className: 'col-6-of-12 msg-sender-info' },\r\n        React.createElement(\"div\", { className: 'msg-time small-text dim-text', id: props.id + '-date' }, displayDate)));\r\n};\r\nmodule.exports = messageDetailsSenderDate;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTA1LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvbWVzc2FnZS9tZXNzYWdlZGV0YWlsc3NlbmRlcmRhdGUudHN4P2ZjMTciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcclxuaW1wb3J0IGVudW1zID0gcmVxdWlyZSgnLi4vdXRpbGl0eS9lbnVtcycpO1xyXG5pbXBvcnQgbWVzc2FnZUhlbHBlciA9IHJlcXVpcmUoJy4uL3V0aWxpdHkvbWVzc2FnZS9tZXNzYWdlaGVscGVyJyk7XHJcbmltcG9ydCBsb2NhbGVTdG9yZSA9IHJlcXVpcmUoJy4uLy4uL3N0b3Jlcy9sb2NhbGUvbG9jYWxlc3RvcmUnKTtcclxuaW1wb3J0IG1lc3NhZ2VUcmFuc2xhdGlvbkhlbHBlciA9IHJlcXVpcmUoJy4uL3V0aWxpdHkvbWVzc2FnZS9tZXNzYWdldHJhbnNsYXRpb25oZWxwZXInKTtcclxuaW1wb3J0IHFpZ1N0b3JlID0gcmVxdWlyZSgnLi4vLi4vc3RvcmVzL3FpZ3NlbGVjdG9yL3FpZ3N0b3JlJyk7XHJcblxyXG5pbnRlcmZhY2UgTWVzc2FnZURldGFpbHNTZW5kZXJEYXRlUHJvcHMgZXh0ZW5kcyBQcm9wc0Jhc2Uge1xyXG4gICAgZGlzcGxheURhdGU6IHN0cmluZztcclxufVxyXG5cclxuLyoqXHJcbiAqIE1lc3NhZ2UgRGV0YWlscyBTZW5kIERhdGUgc2VjdGlvbiB3aGljaCBjb250YWlucyBkYXRlIGFuZCB0aW1lIG9mIHNlbmQgbWVzc2FnZS5cclxuICogQHBhcmFtIHByb3BzXHJcbiAqL1xyXG5jb25zdCBtZXNzYWdlRGV0YWlsc1NlbmRlckRhdGU6IFJlYWN0LlN0YXRlbGVzc0NvbXBvbmVudDxNZXNzYWdlRGV0YWlsc1NlbmRlckRhdGVQcm9wcz4gPSAocHJvcHM6IE1lc3NhZ2VEZXRhaWxzU2VuZGVyRGF0ZVByb3BzKSA9PiB7XHJcblxyXG4gICAgLy8gR2V0IHRoZSBkYXRlIGZvcm1hdFxyXG4gICAgbGV0IGRpc3BsYXlEYXRlID0gbWVzc2FnZUhlbHBlci5nZXREYXRlVG9EaXNwbGF5KHByb3BzLmRpc3BsYXlEYXRlKTtcclxuXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdjb2wtNi1vZi0xMiBtc2ctc2VuZGVyLWluZm8nPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbXNnLXRpbWUgc21hbGwtdGV4dCBkaW0tdGV4dCcgaWQ9eyBwcm9wcy5pZCArICctZGF0ZSd9ID57ZGlzcGxheURhdGV9PC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICApO1xyXG59O1xyXG5cclxuZXhwb3J0ID0gbWVzc2FnZURldGFpbHNTZW5kZXJEYXRlO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vc291cmNlLW1hcC1sb2FkZXIhLi9zcmMvY29tcG9uZW50cy9tZXNzYWdlL21lc3NhZ2VkZXRhaWxzc2VuZGVyZGF0ZS50c3giXSwibWFwcGluZ3MiOiI7QUFBQTtBQUVBO0FBU0E7OztBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUdBO0FBRUE7Iiwic291cmNlUm9vdCI6IiJ9");

/***/ }),

/***/ 506:
/* no static exports found */
/* all exports used */
/*!*************************************************************!*\
  !*** ./src/components/message/messagedetailssenderinfo.tsx ***!
  \*************************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar React = __webpack_require__(/*! react */ 0);\r\nvar enums = __webpack_require__(/*! ../utility/enums */ 225);\r\nvar messageHelper = __webpack_require__(/*! ../utility/message/messagehelper */ 283);\r\nvar localeStore = __webpack_require__(/*! ../../stores/locale/localestore */ 226);\r\nvar MessageInfo = __webpack_require__(/*! ./messageinfo */ 507);\r\nvar stringHelper = __webpack_require__(/*! ../../utility/generic/stringhelper */ 254);\r\n/**\r\n * Message Details header section which contains time , sender name and associated response details\r\n * @param props\r\n */\r\nvar messageDetailsSenderInfo = function (props) {\r\n    /**\r\n     * Handles the Click Event of Display ID\r\n     */\r\n    var onDisplayIdClick = function () {\r\n        props.onDisplayIdClick();\r\n    };\r\n    /**\r\n     * Render Display Id as link Only If the examiner has access to view the script\r\n     */\r\n    var renderDisplayIDControl = function () {\r\n        if (props.selectedTab !== enums.MessageFolderType.None && props.selectedTab !== enums.MessageFolderType.Deleted &&\r\n            props.messageDetails.hasPermissionToDisplayId && props.messageDetails.hasPermissionInStdSetupWorklist) {\r\n            return React.createElement(\"a\", { onClick: onDisplayIdClick, id: props.id + '-response-id' },\r\n                messageHelper.getMarkingModeText(props.messageDetails.markingModeId, props.messageDetails.isElectronicStandardisationTeamMember),\r\n                getDisplayId());\r\n        }\r\n        else {\r\n            var displayIdNoLinkTooltip = stringHelper.format(localeStore.instance.TranslateText('assessor3.message.display-id-no-link-tooltip'), [String(String.fromCharCode(179))]);\r\n            return React.createElement(\"span\", { title: displayIdNoLinkTooltip, id: props.id + '-response-id-read-only' },\r\n                messageHelper.getMarkingModeText(props.messageDetails.markingModeId, props.messageDetails.isElectronicStandardisationTeamMember),\r\n                getDisplayId());\r\n        }\r\n    };\r\n    /**\r\n     * Show the displayId label only if there are any associated response with the message\r\n     */\r\n    var renderDisplayIDArea = function () {\r\n        var displayIdText = localeStore.instance.TranslateText('messaging.message-lists.message-detail.associated-response-id') + ' ';\r\n        if (props.messageDetails.displayId != null) {\r\n            return (React.createElement(\"div\", { className: 'msg-response-id', id: props.id + '-response-data' },\r\n                React.createElement(\"span\", { className: 'dim-text', id: props.id + '-response-text' }, displayIdText),\r\n                renderDisplayIDControl()));\r\n        }\r\n    };\r\n    /**\r\n     * to render message recipients list\r\n     */\r\n    var renderMessageRecipientList = function () {\r\n        if (props.message && props.message != null) {\r\n            return (React.createElement(MessageInfo, { id: 'msg-to', key: 'msg-to', selectedLanguage: props.selectedLanguage, message: props.message }));\r\n        }\r\n    };\r\n    return (React.createElement(\"div\", { className: 'msg-exp-metainfo-row2' },\r\n        renderMessageRecipientList(),\r\n        renderDisplayIDArea()));\r\n    /**\r\n     * This method will returns the displayId for system messages with prefix 6\r\n     */\r\n    function getDisplayId() {\r\n        // If selected message is a system message then returns displayId with prefix 6\r\n        if (props.message.examBodyMessageTypeId != null && props.message.examBodyMessageTypeId !== enums.SystemMessage.None) {\r\n            return '6' + props.messageDetails.displayId;\r\n        }\r\n        else {\r\n            return props.messageDetails.displayId;\r\n        }\r\n    }\r\n};\r\nmodule.exports = messageDetailsSenderInfo;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTA2LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvbWVzc2FnZS9tZXNzYWdlZGV0YWlsc3NlbmRlcmluZm8udHN4P2QwZmUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcclxuaW1wb3J0IGVudW1zID0gcmVxdWlyZSgnLi4vdXRpbGl0eS9lbnVtcycpO1xyXG5pbXBvcnQgbWVzc2FnZUhlbHBlciA9IHJlcXVpcmUoJy4uL3V0aWxpdHkvbWVzc2FnZS9tZXNzYWdlaGVscGVyJyk7XHJcbmltcG9ydCBsb2NhbGVTdG9yZSA9IHJlcXVpcmUoJy4uLy4uL3N0b3Jlcy9sb2NhbGUvbG9jYWxlc3RvcmUnKTtcclxuaW1wb3J0IG1lc3NhZ2VUcmFuc2xhdGlvbkhlbHBlciA9IHJlcXVpcmUoJy4uL3V0aWxpdHkvbWVzc2FnZS9tZXNzYWdldHJhbnNsYXRpb25oZWxwZXInKTtcclxuaW1wb3J0IE1lc3NhZ2VJbmZvID0gcmVxdWlyZSgnLi9tZXNzYWdlaW5mbycpO1xyXG5pbXBvcnQgcWlnU3RvcmUgPSByZXF1aXJlKCcuLi8uLi9zdG9yZXMvcWlnc2VsZWN0b3IvcWlnc3RvcmUnKTtcclxuaW1wb3J0IHN0cmluZ0hlbHBlciA9IHJlcXVpcmUoJy4uLy4uL3V0aWxpdHkvZ2VuZXJpYy9zdHJpbmdoZWxwZXInKTtcclxuXHJcbmludGVyZmFjZSBNZXNzYWdlRGV0YWlsc1NlbmRlckluZm9Qcm9wcyBleHRlbmRzIExvY2FsZVNlbGVjdGlvbkJhc2UsIFByb3BzQmFzZSB7XHJcbiAgICBtZXNzYWdlOiBNZXNzYWdlO1xyXG4gICAgbWVzc2FnZURldGFpbHM6IE1lc3NhZ2VEZXRhaWxzO1xyXG4gICAgb25EaXNwbGF5SWRDbGljaz86IEZ1bmN0aW9uO1xyXG4gICAgc2VsZWN0ZWRUYWI6IGVudW1zLk1lc3NhZ2VGb2xkZXJUeXBlO1xyXG59XHJcblxyXG4vKipcclxuICogTWVzc2FnZSBEZXRhaWxzIGhlYWRlciBzZWN0aW9uIHdoaWNoIGNvbnRhaW5zIHRpbWUgLCBzZW5kZXIgbmFtZSBhbmQgYXNzb2NpYXRlZCByZXNwb25zZSBkZXRhaWxzXHJcbiAqIEBwYXJhbSBwcm9wc1xyXG4gKi9cclxuY29uc3QgbWVzc2FnZURldGFpbHNTZW5kZXJJbmZvOiBSZWFjdC5TdGF0ZWxlc3NDb21wb25lbnQ8TWVzc2FnZURldGFpbHNTZW5kZXJJbmZvUHJvcHM+ID0gKHByb3BzOiBNZXNzYWdlRGV0YWlsc1NlbmRlckluZm9Qcm9wcykgPT4ge1xyXG4gICAgLyoqXHJcbiAgICAgKiBIYW5kbGVzIHRoZSBDbGljayBFdmVudCBvZiBEaXNwbGF5IElEXHJcbiAgICAgKi9cclxuICAgIGNvbnN0IG9uRGlzcGxheUlkQ2xpY2sgPSAoKSA9PiB7XHJcblxyXG4gICAgICAgIHByb3BzLm9uRGlzcGxheUlkQ2xpY2soKTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZW5kZXIgRGlzcGxheSBJZCBhcyBsaW5rIE9ubHkgSWYgdGhlIGV4YW1pbmVyIGhhcyBhY2Nlc3MgdG8gdmlldyB0aGUgc2NyaXB0XHJcbiAgICAgKi9cclxuICAgIGNvbnN0IHJlbmRlckRpc3BsYXlJRENvbnRyb2wgPSAoKSA9PiB7XHJcbiAgICAgICAgaWYgKHByb3BzLnNlbGVjdGVkVGFiICE9PSBlbnVtcy5NZXNzYWdlRm9sZGVyVHlwZS5Ob25lICYmIHByb3BzLnNlbGVjdGVkVGFiICE9PSBlbnVtcy5NZXNzYWdlRm9sZGVyVHlwZS5EZWxldGVkICYmXHJcbiAgICAgICAgICAgIHByb3BzLm1lc3NhZ2VEZXRhaWxzLmhhc1Blcm1pc3Npb25Ub0Rpc3BsYXlJZCAmJiBwcm9wcy5tZXNzYWdlRGV0YWlscy5oYXNQZXJtaXNzaW9uSW5TdGRTZXR1cFdvcmtsaXN0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiA8YSBvbkNsaWNrPXtvbkRpc3BsYXlJZENsaWNrfSBpZD17cHJvcHMuaWQgKyAnLXJlc3BvbnNlLWlkJ30+XHJcbiAgICAgICAgICAgICAgICB7bWVzc2FnZUhlbHBlci5nZXRNYXJraW5nTW9kZVRleHQocHJvcHMubWVzc2FnZURldGFpbHMubWFya2luZ01vZGVJZCxcclxuICAgICAgICAgICAgICAgICAgICBwcm9wcy5tZXNzYWdlRGV0YWlscy5pc0VsZWN0cm9uaWNTdGFuZGFyZGlzYXRpb25UZWFtTWVtYmVyKX1cclxuICAgICAgICAgICAgICAgIHtnZXREaXNwbGF5SWQoKX08L2E+O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGxldCBkaXNwbGF5SWROb0xpbmtUb29sdGlwID0gc3RyaW5nSGVscGVyLmZvcm1hdChcclxuICAgICAgICAgICAgICAgIGxvY2FsZVN0b3JlLmluc3RhbmNlLlRyYW5zbGF0ZVRleHQoJ2Fzc2Vzc29yMy5tZXNzYWdlLmRpc3BsYXktaWQtbm8tbGluay10b29sdGlwJyksXHJcbiAgICAgICAgICAgICAgICBbU3RyaW5nKFN0cmluZy5mcm9tQ2hhckNvZGUoMTc5KSldKTtcclxuICAgICAgICAgICAgcmV0dXJuIDxzcGFuIHRpdGxlPXtkaXNwbGF5SWROb0xpbmtUb29sdGlwfVxyXG4gICAgICAgICAgICAgICAgaWQ9e3Byb3BzLmlkICsgJy1yZXNwb25zZS1pZC1yZWFkLW9ubHknfT5cclxuICAgICAgICAgICAgICAgIHttZXNzYWdlSGVscGVyLmdldE1hcmtpbmdNb2RlVGV4dChwcm9wcy5tZXNzYWdlRGV0YWlscy5tYXJraW5nTW9kZUlkLFxyXG4gICAgICAgICAgICAgICAgICAgIHByb3BzLm1lc3NhZ2VEZXRhaWxzLmlzRWxlY3Ryb25pY1N0YW5kYXJkaXNhdGlvblRlYW1NZW1iZXIpfVxyXG4gICAgICAgICAgICAgICAge2dldERpc3BsYXlJZCgpfTwvc3Bhbj47XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFNob3cgdGhlIGRpc3BsYXlJZCBsYWJlbCBvbmx5IGlmIHRoZXJlIGFyZSBhbnkgYXNzb2NpYXRlZCByZXNwb25zZSB3aXRoIHRoZSBtZXNzYWdlXHJcbiAgICAgKi9cclxuICAgIGNvbnN0IHJlbmRlckRpc3BsYXlJREFyZWEgPSAoKSA9PiB7XHJcbiAgICAgICAgbGV0IGRpc3BsYXlJZFRleHQgPSBsb2NhbGVTdG9yZS5pbnN0YW5jZS5UcmFuc2xhdGVUZXh0KCdtZXNzYWdpbmcubWVzc2FnZS1saXN0cy5tZXNzYWdlLWRldGFpbC5hc3NvY2lhdGVkLXJlc3BvbnNlLWlkJykgKyAnICc7XHJcbiAgICAgICAgaWYgKHByb3BzLm1lc3NhZ2VEZXRhaWxzLmRpc3BsYXlJZCAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbXNnLXJlc3BvbnNlLWlkJyBpZD17IHByb3BzLmlkICsgJy1yZXNwb25zZS1kYXRhJ30+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSdkaW0tdGV4dCcgaWQ9eyBwcm9wcy5pZCArICctcmVzcG9uc2UtdGV4dCd9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7ZGlzcGxheUlkVGV4dH1cclxuICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAge3JlbmRlckRpc3BsYXlJRENvbnRyb2woKSB9XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogdG8gcmVuZGVyIG1lc3NhZ2UgcmVjaXBpZW50cyBsaXN0XHJcbiAgICAgKi9cclxuICAgIGNvbnN0IHJlbmRlck1lc3NhZ2VSZWNpcGllbnRMaXN0ID0gKCkgPT4ge1xyXG4gICAgICAgIGlmIChwcm9wcy5tZXNzYWdlICYmIHByb3BzLm1lc3NhZ2UgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gKDxNZXNzYWdlSW5mb1xyXG4gICAgICAgICAgICAgICAgaWQ9J21zZy10bydcclxuICAgICAgICAgICAgICAgIGtleSA9J21zZy10bydcclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkTGFuZ3VhZ2U9e3Byb3BzLnNlbGVjdGVkTGFuZ3VhZ2V9XHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0ge3Byb3BzLm1lc3NhZ2V9Lz5cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiAoXHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J21zZy1leHAtbWV0YWluZm8tcm93Mic+XHJcbiAgICAgICAgICAgIHtyZW5kZXJNZXNzYWdlUmVjaXBpZW50TGlzdCgpIH1cclxuICAgICAgICAgICAge3JlbmRlckRpc3BsYXlJREFyZWEoKSB9XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICApO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhpcyBtZXRob2Qgd2lsbCByZXR1cm5zIHRoZSBkaXNwbGF5SWQgZm9yIHN5c3RlbSBtZXNzYWdlcyB3aXRoIHByZWZpeCA2XHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGdldERpc3BsYXlJZCgpIHtcclxuICAgICAgICAvLyBJZiBzZWxlY3RlZCBtZXNzYWdlIGlzIGEgc3lzdGVtIG1lc3NhZ2UgdGhlbiByZXR1cm5zIGRpc3BsYXlJZCB3aXRoIHByZWZpeCA2XHJcbiAgICAgICAgaWYgKHByb3BzLm1lc3NhZ2UuZXhhbUJvZHlNZXNzYWdlVHlwZUlkICE9IG51bGwgJiYgcHJvcHMubWVzc2FnZS5leGFtQm9keU1lc3NhZ2VUeXBlSWQgIT09IGVudW1zLlN5c3RlbU1lc3NhZ2UuTm9uZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gJzYnICsgcHJvcHMubWVzc2FnZURldGFpbHMuZGlzcGxheUlkO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBwcm9wcy5tZXNzYWdlRGV0YWlscy5kaXNwbGF5SWQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59O1xyXG5cclxuZXhwb3J0ID0gbWVzc2FnZURldGFpbHNTZW5kZXJJbmZvO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vc291cmNlLW1hcC1sb2FkZXIhLi9zcmMvY29tcG9uZW50cy9tZXNzYWdlL21lc3NhZ2VkZXRhaWxzc2VuZGVyaW5mby50c3giXSwibWFwcGluZ3MiOiI7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFTQTs7O0FBR0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFHQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFHQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBSUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOyIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),

/***/ 507:
/* no static exports found */
/* all exports used */
/*!************************************************!*\
  !*** ./src/components/message/messageinfo.tsx ***!
  \************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar React = __webpack_require__(/*! react */ 0);\r\nvar pureRenderComponent = __webpack_require__(/*! ../base/purerendercomponent */ 227);\r\nvar enums = __webpack_require__(/*! ../utility/enums */ 225);\r\nvar localeStore = __webpack_require__(/*! ../../stores/locale/localestore */ 226);\r\nvar RecipientListToggle = __webpack_require__(/*! ./recipientlisttoggle */ 509);\r\nvar messageTranslationHelper = __webpack_require__(/*! ../utility/message/messagetranslationhelper */ 459);\r\nvar htmlUtilities = __webpack_require__(/*! ../../utility/generic/htmlutilities */ 243);\r\nvar classNames = __webpack_require__(/*! classnames */ 39);\r\nvar constants = __webpack_require__(/*! ../utility/constants */ 241);\r\nvar messageStore = __webpack_require__(/*! ../../stores/message/messagestore */ 240);\r\n/**\r\n * Message info section contain message type, recipients list and remaining recipients count.\r\n * @param props\r\n */\r\nvar MessageInfo = /** @class */ (function (_super) {\r\n    __extends(MessageInfo, _super);\r\n    /**\r\n     * @constructor\r\n     */\r\n    function MessageInfo(props, state) {\r\n        var _this = _super.call(this, props, state) || this;\r\n        // holds the remaining RecipientCount\r\n        _this.remainingRecipientCount = 0;\r\n        /**\r\n         * Handle toggle event of recipient list.\r\n         *\r\n         */\r\n        _this.onRecipientListToggle = function () {\r\n            _this.setState({\r\n                isExpanded: !_this.state.isExpanded,\r\n                isClassUpdated: _this.state.isClassUpdated\r\n            });\r\n        };\r\n        /**\r\n         * Calculate recipients count.\r\n         */\r\n        _this.calculateRecipientCount = function (event) {\r\n            if (event && (event.type === 'transitionend' || event.type === 'webkitTransitionEnd') && event.propertyName !== 'width') {\r\n                return;\r\n            }\r\n            if (_this.props.message &&\r\n                _this.props.message.messageFolderType === enums.MessageFolderType.Sent) {\r\n                var lastAddressItem = htmlUtilities.getElementsByClassName('first-row-last')[0];\r\n                if (lastAddressItem) {\r\n                    if (lastAddressItem.classList.contains('first-row-last')) {\r\n                        lastAddressItem.classList.remove('first-row-last');\r\n                    }\r\n                }\r\n                // If message send for an entire team then set remaining recipient count as 0.\r\n                if (_this.props.message.toTeam) {\r\n                    _this.remainingRecipientCount = 0;\r\n                    _this.setState({\r\n                        isExpanded: false,\r\n                        isClassUpdated: !_this.state.isClassUpdated\r\n                    });\r\n                }\r\n                else {\r\n                    var remainingRecipientCountUpdated = 0;\r\n                    var wrapperWidthParent = (htmlUtilities.getElementsByClassName('msg-to')[0]) ?\r\n                        htmlUtilities.getElementsByClassName('msg-to')[0].clientWidth : 0;\r\n                    var wrapperWidthTo = (htmlUtilities.getElementsByClassName('msg-to-label dim-text')[0]) ?\r\n                        htmlUtilities.getElementsByClassName('msg-to-label dim-text')[0].clientWidth : 0;\r\n                    var wrapperWidthMore = (htmlUtilities.getElementsByClassName('msg-to-expand-toggler')[0]) ?\r\n                        htmlUtilities.getElementsByClassName('msg-to-expand-toggler')[0].clientWidth : constants.RECIPIENT_MORE_LINK;\r\n                    var totalWidth = wrapperWidthParent - (wrapperWidthTo + wrapperWidthMore);\r\n                    _this.recipientListSpan = htmlUtilities.getElementsByClassName('msg-address');\r\n                    var spanwidth = 0;\r\n                    remainingRecipientCountUpdated = _this.remainingRecipientCount;\r\n                    for (var i = 0; i < _this.recipientListSpan.length; i++) {\r\n                        spanwidth += _this.recipientListSpan[i].clientWidth;\r\n                        if (i === _this.recipientListSpan.length - 1) {\r\n                            totalWidth = totalWidth + wrapperWidthMore;\r\n                        }\r\n                        if (spanwidth < totalWidth) {\r\n                            _this.remainingRecipientCount = 0;\r\n                        }\r\n                        else {\r\n                            if (i !== 0) {\r\n                                _this.recipientListSpan[i - 1].className += ' first-row-last';\r\n                            }\r\n                            if (_this.recipientListSpan.length === 1 && spanwidth === totalWidth) {\r\n                                _this.remainingRecipientCount = 0;\r\n                            }\r\n                            else {\r\n                                _this.remainingRecipientCount = _this.recipientListSpan.length - i;\r\n                            }\r\n                            break;\r\n                        }\r\n                    }\r\n                    if (remainingRecipientCountUpdated !== _this.remainingRecipientCount) {\r\n                        _this.setState({\r\n                            isExpanded: _this.state.isExpanded,\r\n                            isClassUpdated: !_this.state.isClassUpdated\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        _this.state = {\r\n            isExpanded: false,\r\n            isClassUpdated: false\r\n        };\r\n        _this.examiners = new Array();\r\n        _this.onRecipientListToggle = _this.onRecipientListToggle.bind(_this);\r\n        _this.calculateRecipientCount = _this.calculateRecipientCount.bind(_this);\r\n        _this.appendExaminerWithSemiColon();\r\n        return _this;\r\n    }\r\n    /**\r\n     * Render method\r\n     */\r\n    MessageInfo.prototype.render = function () {\r\n        var toRender;\r\n        if (this.props.message.messageFolderType === enums.MessageFolderType.Inbox) {\r\n            toRender = (React.createElement(\"div\", { className: 'msg-sender' },\r\n                React.createElement(\"div\", { className: 'dim-text msg-from-label', id: 'msg_from_label' }, localeStore.instance.TranslateText('messaging.message-lists.message-detail.' +\r\n                    enums.getEnumString(enums.MessageFolderType, this.props.message.messageFolderType).toLowerCase())),\r\n                React.createElement(\"div\", { className: 'msg-from-address', id: 'msg_from_address' }, messageTranslationHelper.getExaminerName(this.props.message))));\r\n        }\r\n        else {\r\n            this.appendExaminerWithSemiColon();\r\n            toRender = (React.createElement(\"div\", { className: classNames('msg-to', this.state.isExpanded ? 'expanded' : '') },\r\n                React.createElement(\"div\", { className: 'msg-to-label dim-text' }, localeStore.instance.TranslateText('messaging.message-lists.message-detail.' +\r\n                    enums.getEnumString(enums.MessageFolderType, this.props.message.messageFolderType).toLowerCase())),\r\n                React.createElement(\"div\", { className: 'msg-to-address', id: this.props.id }, !this.props.message.toTeam ?\r\n                    this.examiners.map(function (item) {\r\n                        return React.createElement(\"span\", { className: 'msg-address' }, item);\r\n                    }) :\r\n                    React.createElement(\"span\", { className: 'msg-address', id: 'msg-address-entire-team' }, localeStore.instance.TranslateText('messaging.compose-message.recipient-selector.entire-team'))),\r\n                React.createElement(RecipientListToggle, { id: 'msg-to-expand-toggler', key: 'msg-to-expand-toggler', selectedLanguage: this.props.selectedLanguage, remainingRecipientCount: this.remainingRecipientCount, onRecipientListToggleClick: this.onRecipientListToggle })));\r\n        }\r\n        return (toRender);\r\n    };\r\n    /**\r\n     * This function gets invoked when the component is about to be mounted\r\n     */\r\n    MessageInfo.prototype.componentDidMount = function () {\r\n        window.addEventListener('resize', this.calculateRecipientCount);\r\n        var messagePanel = document.getElementById('messaging-panel');\r\n        if (messagePanel) {\r\n            messagePanel.addEventListener('transitionend', this.calculateRecipientCount);\r\n            messagePanel.addEventListener('webkitTransitionEnd', this.calculateRecipientCount);\r\n        }\r\n        this.calculateRecipientCount();\r\n        messageStore.instance.addListener(messageStore.MessageStore.CALCULATE_RECIPIENT_COUNT_EVENT, this.calculateRecipientCount);\r\n    };\r\n    /**\r\n     * This function gets invoked when the component is about to be un mounted\r\n     */\r\n    MessageInfo.prototype.componentWillUnMount = function () {\r\n        window.removeEventListener('resize', this.calculateRecipientCount);\r\n        var messagePanel = document.getElementById('messaging-panel');\r\n        if (messagePanel) {\r\n            messagePanel.removeEventListener('transitionend', this.calculateRecipientCount);\r\n            messagePanel.removeEventListener('webkitTransitionEnd', this.calculateRecipientCount);\r\n        }\r\n        messageStore.instance.removeListener(messageStore.MessageStore.CALCULATE_RECIPIENT_COUNT_EVENT, this.calculateRecipientCount);\r\n    };\r\n    /**\r\n     * This function gets invoked when the component receives props\r\n     */\r\n    MessageInfo.prototype.componentWillReceiveProps = function (nextProps) {\r\n        if (this.props.message !== nextProps.message) {\r\n            this.remainingRecipientCount = 0;\r\n        }\r\n    };\r\n    /**\r\n     * append examiners with semicolon\r\n     */\r\n    MessageInfo.prototype.appendExaminerWithSemiColon = function (props) {\r\n        var _this = this;\r\n        var index = 0;\r\n        this.examiners = new Array();\r\n        var _props = props ? props : this.props;\r\n        if (_props.message && _props.message.toExaminerDetails != null) {\r\n            _props.message.toExaminerDetails.map(function (item) {\r\n                _this.examiners.push(item.fullName + ';');\r\n            });\r\n            index = this.examiners.length - 1;\r\n            // replacing semicolon for last item\r\n            if (index >= 0) {\r\n                this.examiners[index] = this.examiners[index].toString().replace(';', '');\r\n            }\r\n        }\r\n        else {\r\n            this.examiners.push(_props.message.examinerDetails.fullName);\r\n        }\r\n    };\r\n    return MessageInfo;\r\n}(pureRenderComponent));\r\nmodule.exports = MessageInfo;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTA3LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvbWVzc2FnZS9tZXNzYWdlaW5mby50c3g/YWIxYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xyXG5pbXBvcnQgUmVhY3Rkb20gPSByZXF1aXJlKCdyZWFjdC1kb20nKTtcclxuaW1wb3J0IHB1cmVSZW5kZXJDb21wb25lbnQgPSByZXF1aXJlKCcuLi9iYXNlL3B1cmVyZW5kZXJjb21wb25lbnQnKTtcclxuaW1wb3J0IGVudW1zID0gcmVxdWlyZSgnLi4vdXRpbGl0eS9lbnVtcycpO1xyXG5pbXBvcnQgbG9jYWxlU3RvcmUgPSByZXF1aXJlKCcuLi8uLi9zdG9yZXMvbG9jYWxlL2xvY2FsZXN0b3JlJyk7XHJcbmltcG9ydCBSZWNpcGllbnRMaXN0VG9nZ2xlID0gcmVxdWlyZSgnLi9yZWNpcGllbnRsaXN0dG9nZ2xlJyk7XHJcbmltcG9ydCBtZXNzYWdlVHJhbnNsYXRpb25IZWxwZXIgPSByZXF1aXJlKCcuLi91dGlsaXR5L21lc3NhZ2UvbWVzc2FnZXRyYW5zbGF0aW9uaGVscGVyJyk7XHJcbmltcG9ydCBodG1sVXRpbGl0aWVzID0gcmVxdWlyZSgnLi4vLi4vdXRpbGl0eS9nZW5lcmljL2h0bWx1dGlsaXRpZXMnKTtcclxubGV0IGNsYXNzTmFtZXMgPSByZXF1aXJlKCdjbGFzc25hbWVzJyk7XHJcbmltcG9ydCBjb25zdGFudHMgPSByZXF1aXJlKCcuLi91dGlsaXR5L2NvbnN0YW50cycpO1xyXG5pbXBvcnQgbWVzc2FnZVN0b3JlID0gcmVxdWlyZSgnLi4vLi4vc3RvcmVzL21lc3NhZ2UvbWVzc2FnZXN0b3JlJyk7XHJcbmludGVyZmFjZSBQcm9wcyBleHRlbmRzIExvY2FsZVNlbGVjdGlvbkJhc2UsIFByb3BzQmFzZSB7XHJcbiAgICBtZXNzYWdlOiBNZXNzYWdlO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgU3RhdGUge1xyXG4gICAgaXNFeHBhbmRlZDogYm9vbGVhbjtcclxuICAgIGlzQ2xhc3NVcGRhdGVkOiBib29sZWFuO1xyXG59XHJcblxyXG4vKipcclxuICogTWVzc2FnZSBpbmZvIHNlY3Rpb24gY29udGFpbiBtZXNzYWdlIHR5cGUsIHJlY2lwaWVudHMgbGlzdCBhbmQgcmVtYWluaW5nIHJlY2lwaWVudHMgY291bnQuXHJcbiAqIEBwYXJhbSBwcm9wc1xyXG4gKi9cclxuXHJcbmNsYXNzIE1lc3NhZ2VJbmZvIGV4dGVuZHMgcHVyZVJlbmRlckNvbXBvbmVudDxQcm9wcywgU3RhdGU+IHtcclxuXHJcbiAgICBwcml2YXRlIHJlY2lwaWVudExpc3RTcGFuOiBOb2RlTGlzdE9mPEVsZW1lbnQ+O1xyXG5cclxuICAgIC8vIGhvbGRzIHRoZSByZW1haW5pbmcgUmVjaXBpZW50Q291bnRcclxuICAgIHByaXZhdGUgcmVtYWluaW5nUmVjaXBpZW50Q291bnQ6IG51bWJlciA9IDA7XHJcblxyXG4gICAgLy8gaG9sZHMgdGhlIGV4YW1pbmVyTmFtZSB3aXRoIFNlbWlDb2xvblxyXG4gICAgcHJpdmF0ZSBleGFtaW5lcnM6IEFycmF5PHN0cmluZz47XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAY29uc3RydWN0b3JcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IocHJvcHM6IFByb3BzLCBzdGF0ZTogU3RhdGUpIHtcclxuICAgICAgICBzdXBlcihwcm9wcywgc3RhdGUpO1xyXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgICAgICAgIGlzRXhwYW5kZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICBpc0NsYXNzVXBkYXRlZDogZmFsc2VcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuZXhhbWluZXJzID0gbmV3IEFycmF5PHN0cmluZz4oKTtcclxuICAgICAgICB0aGlzLm9uUmVjaXBpZW50TGlzdFRvZ2dsZSA9IHRoaXMub25SZWNpcGllbnRMaXN0VG9nZ2xlLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5jYWxjdWxhdGVSZWNpcGllbnRDb3VudCA9IHRoaXMuY2FsY3VsYXRlUmVjaXBpZW50Q291bnQuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLmFwcGVuZEV4YW1pbmVyV2l0aFNlbWlDb2xvbigpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVuZGVyIG1ldGhvZFxyXG4gICAgICovXHJcblxyXG4gICAgcHVibGljIHJlbmRlcigpOiBKU1guRWxlbWVudCB7XHJcbiAgICAgICAgbGV0IHRvUmVuZGVyOiBKU1guRWxlbWVudDtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMucHJvcHMubWVzc2FnZS5tZXNzYWdlRm9sZGVyVHlwZSA9PT0gZW51bXMuTWVzc2FnZUZvbGRlclR5cGUuSW5ib3gpIHtcclxuICAgICAgICAgICAgdG9SZW5kZXIgPSAoXHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbXNnLXNlbmRlcic+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2RpbS10ZXh0IG1zZy1mcm9tLWxhYmVsJyBpZCA9ICdtc2dfZnJvbV9sYWJlbCc+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsZVN0b3JlLmluc3RhbmNlLlRyYW5zbGF0ZVRleHQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ21lc3NhZ2luZy5tZXNzYWdlLWxpc3RzLm1lc3NhZ2UtZGV0YWlsLicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVudW1zLmdldEVudW1TdHJpbmcoZW51bXMuTWVzc2FnZUZvbGRlclR5cGUsIHRoaXMucHJvcHMubWVzc2FnZS5tZXNzYWdlRm9sZGVyVHlwZSkudG9Mb3dlckNhc2UoKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdtc2ctZnJvbS1hZGRyZXNzJyBpZCA9ICdtc2dfZnJvbV9hZGRyZXNzJz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgeyBtZXNzYWdlVHJhbnNsYXRpb25IZWxwZXIuZ2V0RXhhbWluZXJOYW1lKHRoaXMucHJvcHMubWVzc2FnZSkgfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5hcHBlbmRFeGFtaW5lcldpdGhTZW1pQ29sb24oKTtcclxuICAgICAgICAgICAgdG9SZW5kZXIgPSAoXHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17Y2xhc3NOYW1lcygnbXNnLXRvJyxcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmlzRXhwYW5kZWQgPyAnZXhwYW5kZWQnIDogJycpIH0+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J21zZy10by1sYWJlbCBkaW0tdGV4dCc+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsZVN0b3JlLmluc3RhbmNlLlRyYW5zbGF0ZVRleHQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ21lc3NhZ2luZy5tZXNzYWdlLWxpc3RzLm1lc3NhZ2UtZGV0YWlsLicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVudW1zLmdldEVudW1TdHJpbmcoZW51bXMuTWVzc2FnZUZvbGRlclR5cGUsIHRoaXMucHJvcHMubWVzc2FnZS5tZXNzYWdlRm9sZGVyVHlwZSkudG9Mb3dlckNhc2UoKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdtc2ctdG8tYWRkcmVzcycgaWQ9e3RoaXMucHJvcHMuaWR9ID5cclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIXRoaXMucHJvcHMubWVzc2FnZS50b1RlYW0gP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXhhbWluZXJzLm1hcCgoaXRlbTogc3RyaW5nKSA9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J21zZy1hZGRyZXNzJz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtpdGVtfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+KSA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSdtc2ctYWRkcmVzcycgaWQ9ICdtc2ctYWRkcmVzcy1lbnRpcmUtdGVhbSc+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsZVN0b3JlLmluc3RhbmNlLlRyYW5zbGF0ZVRleHQoJ21lc3NhZ2luZy5jb21wb3NlLW1lc3NhZ2UucmVjaXBpZW50LXNlbGVjdG9yLmVudGlyZS10ZWFtJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxSZWNpcGllbnRMaXN0VG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkID0gJ21zZy10by1leHBhbmQtdG9nZ2xlcidcclxuICAgICAgICAgICAgICAgICAgICAgICAga2V5PSdtc2ctdG8tZXhwYW5kLXRvZ2dsZXInXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkTGFuZ3VhZ2U9e3RoaXMucHJvcHMuc2VsZWN0ZWRMYW5ndWFnZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVtYWluaW5nUmVjaXBpZW50Q291bnQgPSB7dGhpcy5yZW1haW5pbmdSZWNpcGllbnRDb3VudH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25SZWNpcGllbnRMaXN0VG9nZ2xlQ2xpY2sgPSB7dGhpcy5vblJlY2lwaWVudExpc3RUb2dnbGV9IC8+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgdG9SZW5kZXJcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhpcyBmdW5jdGlvbiBnZXRzIGludm9rZWQgd2hlbiB0aGUgY29tcG9uZW50IGlzIGFib3V0IHRvIGJlIG1vdW50ZWRcclxuICAgICAqL1xyXG5cclxuICAgIHB1YmxpYyBjb21wb25lbnREaWRNb3VudCgpIHtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5jYWxjdWxhdGVSZWNpcGllbnRDb3VudCk7XHJcbiAgICAgICAgbGV0IG1lc3NhZ2VQYW5lbDogSFRNTEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWVzc2FnaW5nLXBhbmVsJyk7XHJcbiAgICAgICAgaWYgKG1lc3NhZ2VQYW5lbCkge1xyXG4gICAgICAgICAgICBtZXNzYWdlUGFuZWwuYWRkRXZlbnRMaXN0ZW5lcigndHJhbnNpdGlvbmVuZCcsIHRoaXMuY2FsY3VsYXRlUmVjaXBpZW50Q291bnQpO1xyXG4gICAgICAgICAgICBtZXNzYWdlUGFuZWwuYWRkRXZlbnRMaXN0ZW5lcignd2Via2l0VHJhbnNpdGlvbkVuZCcsIHRoaXMuY2FsY3VsYXRlUmVjaXBpZW50Q291bnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNhbGN1bGF0ZVJlY2lwaWVudENvdW50KCk7XHJcbiAgICAgICAgbWVzc2FnZVN0b3JlLmluc3RhbmNlLmFkZExpc3RlbmVyKG1lc3NhZ2VTdG9yZS5NZXNzYWdlU3RvcmUuQ0FMQ1VMQVRFX1JFQ0lQSUVOVF9DT1VOVF9FVkVOVCwgdGhpcy5jYWxjdWxhdGVSZWNpcGllbnRDb3VudCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIGdldHMgaW52b2tlZCB3aGVuIHRoZSBjb21wb25lbnQgaXMgYWJvdXQgdG8gYmUgdW4gbW91bnRlZFxyXG4gICAgICovXHJcblxyXG4gICAgcHJpdmF0ZSBjb21wb25lbnRXaWxsVW5Nb3VudCgpIHtcclxuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5jYWxjdWxhdGVSZWNpcGllbnRDb3VudCk7XHJcbiAgICAgICAgbGV0IG1lc3NhZ2VQYW5lbDogSFRNTEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWVzc2FnaW5nLXBhbmVsJyk7XHJcbiAgICAgICAgaWYgKG1lc3NhZ2VQYW5lbCkge1xyXG4gICAgICAgICAgICBtZXNzYWdlUGFuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigndHJhbnNpdGlvbmVuZCcsIHRoaXMuY2FsY3VsYXRlUmVjaXBpZW50Q291bnQpO1xyXG4gICAgICAgICAgICBtZXNzYWdlUGFuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignd2Via2l0VHJhbnNpdGlvbkVuZCcsIHRoaXMuY2FsY3VsYXRlUmVjaXBpZW50Q291bnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBtZXNzYWdlU3RvcmUuaW5zdGFuY2UucmVtb3ZlTGlzdGVuZXIobWVzc2FnZVN0b3JlLk1lc3NhZ2VTdG9yZS5DQUxDVUxBVEVfUkVDSVBJRU5UX0NPVU5UX0VWRU5ULCB0aGlzLmNhbGN1bGF0ZVJlY2lwaWVudENvdW50KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgZnVuY3Rpb24gZ2V0cyBpbnZva2VkIHdoZW4gdGhlIGNvbXBvbmVudCByZWNlaXZlcyBwcm9wc1xyXG4gICAgICovXHJcblxyXG4gICAgcHVibGljIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzOiBQcm9wcykge1xyXG4gICAgICAgIGlmICh0aGlzLnByb3BzLm1lc3NhZ2UgIT09IG5leHRQcm9wcy5tZXNzYWdlKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVtYWluaW5nUmVjaXBpZW50Q291bnQgPSAwO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEhhbmRsZSB0b2dnbGUgZXZlbnQgb2YgcmVjaXBpZW50IGxpc3QuXHJcbiAgICAgKlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIG9uUmVjaXBpZW50TGlzdFRvZ2dsZSA9ICgpID0+IHtcclxuXHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIGlzRXhwYW5kZWQ6ICF0aGlzLnN0YXRlLmlzRXhwYW5kZWQsXHJcbiAgICAgICAgICAgIGlzQ2xhc3NVcGRhdGVkOiB0aGlzLnN0YXRlLmlzQ2xhc3NVcGRhdGVkXHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogYXBwZW5kIGV4YW1pbmVycyB3aXRoIHNlbWljb2xvblxyXG4gICAgICovXHJcblxyXG4gICAgcHJpdmF0ZSBhcHBlbmRFeGFtaW5lcldpdGhTZW1pQ29sb24ocHJvcHM/OiBQcm9wcykge1xyXG4gICAgICAgIGxldCBpbmRleDogbnVtYmVyID0gMDtcclxuICAgICAgICB0aGlzLmV4YW1pbmVycyA9IG5ldyBBcnJheTxzdHJpbmc+KCk7XHJcbiAgICAgICAgbGV0IF9wcm9wczogUHJvcHMgPSBwcm9wcyA/IHByb3BzIDogdGhpcy5wcm9wcztcclxuICAgICAgICBpZiAoX3Byb3BzLm1lc3NhZ2UgJiYgX3Byb3BzLm1lc3NhZ2UudG9FeGFtaW5lckRldGFpbHMgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICBfcHJvcHMubWVzc2FnZS50b0V4YW1pbmVyRGV0YWlscy5tYXAoKGl0ZW06IEV4YW1pbmVyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV4YW1pbmVycy5wdXNoKGl0ZW0uZnVsbE5hbWUgKyAnOycpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaW5kZXggPSB0aGlzLmV4YW1pbmVycy5sZW5ndGggLSAxO1xyXG5cclxuICAgICAgICAgICAgLy8gcmVwbGFjaW5nIHNlbWljb2xvbiBmb3IgbGFzdCBpdGVtXHJcbiAgICAgICAgICAgIGlmIChpbmRleCA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV4YW1pbmVyc1tpbmRleF0gPSB0aGlzLmV4YW1pbmVyc1tpbmRleF0udG9TdHJpbmcoKS5yZXBsYWNlKCc7JywgJycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5leGFtaW5lcnMucHVzaChfcHJvcHMubWVzc2FnZS5leGFtaW5lckRldGFpbHMuZnVsbE5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENhbGN1bGF0ZSByZWNpcGllbnRzIGNvdW50LlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGNhbGN1bGF0ZVJlY2lwaWVudENvdW50ID0gKGV2ZW50PzogYW55KTogdm9pZCA9PiB7XHJcbiAgICAgICAgaWYgKGV2ZW50ICYmIChldmVudC50eXBlID09PSAndHJhbnNpdGlvbmVuZCcgfHwgZXZlbnQudHlwZSA9PT0gJ3dlYmtpdFRyYW5zaXRpb25FbmQnKSAmJiBldmVudC5wcm9wZXJ0eU5hbWUgIT09ICd3aWR0aCcpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5wcm9wcy5tZXNzYWdlICYmXHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMubWVzc2FnZS5tZXNzYWdlRm9sZGVyVHlwZSA9PT0gZW51bXMuTWVzc2FnZUZvbGRlclR5cGUuU2VudCkge1xyXG4gICAgICAgICAgICBsZXQgbGFzdEFkZHJlc3NJdGVtID0gaHRtbFV0aWxpdGllcy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdmaXJzdC1yb3ctbGFzdCcpWzBdO1xyXG4gICAgICAgICAgICBpZiAobGFzdEFkZHJlc3NJdGVtKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobGFzdEFkZHJlc3NJdGVtLmNsYXNzTGlzdC5jb250YWlucygnZmlyc3Qtcm93LWxhc3QnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxhc3RBZGRyZXNzSXRlbS5jbGFzc0xpc3QucmVtb3ZlKCdmaXJzdC1yb3ctbGFzdCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBJZiBtZXNzYWdlIHNlbmQgZm9yIGFuIGVudGlyZSB0ZWFtIHRoZW4gc2V0IHJlbWFpbmluZyByZWNpcGllbnQgY291bnQgYXMgMC5cclxuICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMubWVzc2FnZS50b1RlYW0pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVtYWluaW5nUmVjaXBpZW50Q291bnQgPSAwO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgaXNFeHBhbmRlZDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgaXNDbGFzc1VwZGF0ZWQ6ICF0aGlzLnN0YXRlLmlzQ2xhc3NVcGRhdGVkXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGxldCByZW1haW5pbmdSZWNpcGllbnRDb3VudFVwZGF0ZWQ6IG51bWJlciA9IDA7XHJcbiAgICAgICAgICAgICAgICBsZXQgd3JhcHBlcldpZHRoUGFyZW50OiBudW1iZXIgPSAoaHRtbFV0aWxpdGllcy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdtc2ctdG8nKVswXSkgP1xyXG4gICAgICAgICAgICAgICAgICAgIGh0bWxVdGlsaXRpZXMuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnbXNnLXRvJylbMF0uY2xpZW50V2lkdGggOiAwO1xyXG4gICAgICAgICAgICAgICAgbGV0IHdyYXBwZXJXaWR0aFRvOiBudW1iZXIgPSAoaHRtbFV0aWxpdGllcy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdtc2ctdG8tbGFiZWwgZGltLXRleHQnKVswXSkgP1xyXG4gICAgICAgICAgICAgICAgICAgIGh0bWxVdGlsaXRpZXMuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnbXNnLXRvLWxhYmVsIGRpbS10ZXh0JylbMF0uY2xpZW50V2lkdGggOiAwO1xyXG4gICAgICAgICAgICAgICAgbGV0IHdyYXBwZXJXaWR0aE1vcmU6IG51bWJlciA9IChodG1sVXRpbGl0aWVzLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ21zZy10by1leHBhbmQtdG9nZ2xlcicpWzBdKSA/XHJcbiAgICAgICAgICAgICAgICAgICAgaHRtbFV0aWxpdGllcy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdtc2ctdG8tZXhwYW5kLXRvZ2dsZXInKVswXS5jbGllbnRXaWR0aCA6IGNvbnN0YW50cy5SRUNJUElFTlRfTU9SRV9MSU5LO1xyXG4gICAgICAgICAgICAgICAgbGV0IHRvdGFsV2lkdGg6IG51bWJlciA9IHdyYXBwZXJXaWR0aFBhcmVudCAtICh3cmFwcGVyV2lkdGhUbyArIHdyYXBwZXJXaWR0aE1vcmUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWNpcGllbnRMaXN0U3BhbiA9IGh0bWxVdGlsaXRpZXMuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnbXNnLWFkZHJlc3MnKTtcclxuICAgICAgICAgICAgICAgIGxldCBzcGFud2lkdGg6IG51bWJlciA9IDA7XHJcbiAgICAgICAgICAgICAgICByZW1haW5pbmdSZWNpcGllbnRDb3VudFVwZGF0ZWQgPSB0aGlzLnJlbWFpbmluZ1JlY2lwaWVudENvdW50O1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnJlY2lwaWVudExpc3RTcGFuLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3BhbndpZHRoICs9IHRoaXMucmVjaXBpZW50TGlzdFNwYW5baV0uY2xpZW50V2lkdGg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpID09PSB0aGlzLnJlY2lwaWVudExpc3RTcGFuLmxlbmd0aCAtIDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxXaWR0aCA9IHRvdGFsV2lkdGggKyB3cmFwcGVyV2lkdGhNb3JlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNwYW53aWR0aCA8IHRvdGFsV2lkdGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1haW5pbmdSZWNpcGllbnRDb3VudCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgIT09IDApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlY2lwaWVudExpc3RTcGFuW2kgLSAxXS5jbGFzc05hbWUgKz0gJyBmaXJzdC1yb3ctbGFzdCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmVjaXBpZW50TGlzdFNwYW4ubGVuZ3RoID09PSAxICYmIHNwYW53aWR0aCA9PT0gdG90YWxXaWR0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1haW5pbmdSZWNpcGllbnRDb3VudCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbWFpbmluZ1JlY2lwaWVudENvdW50ID0gdGhpcy5yZWNpcGllbnRMaXN0U3Bhbi5sZW5ndGggLSBpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChyZW1haW5pbmdSZWNpcGllbnRDb3VudFVwZGF0ZWQgIT09IHRoaXMucmVtYWluaW5nUmVjaXBpZW50Q291bnQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNFeHBhbmRlZDogdGhpcy5zdGF0ZS5pc0V4cGFuZGVkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0NsYXNzVXBkYXRlZDogIXRoaXMuc3RhdGUuaXNDbGFzc1VwZGF0ZWRcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn1cclxuZXhwb3J0ID0gTWVzc2FnZUluZm87XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9zb3VyY2UtbWFwLWxvYWRlciEuL3NyYy9jb21wb25lbnRzL21lc3NhZ2UvbWVzc2FnZWluZm8udHN4Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVUE7OztBQUdBO0FBRUE7QUFBQTtBQVVBOztBQUVBO0FBQ0E7QUFBQTtBQVRBO0FBQ0E7QUF5SEE7OztBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBeUJBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQW5OQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBRUE7O0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBSUE7QUFHQTtBQUtBO0FBQUE7QUFDQTtBQUNBO0FBR0E7QUFJQTtBQUdBO0FBR0E7QUFDQTtBQUFBO0FBR0E7QUFPQTtBQVFBO0FBQ0E7QUFHQTtBQUVBOztBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWNBOztBQUVBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFvRUE7QUFBQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),

/***/ 508:
/* no static exports found */
/* all exports used */
/*!***************************************************************!*\
  !*** ./src/components/message/messageprioritydescription.tsx ***!
  \***************************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar React = __webpack_require__(/*! react */ 0);\r\nvar enums = __webpack_require__(/*! ../utility/enums */ 225);\r\nvar localestore = __webpack_require__(/*! ../../stores/locale/localestore */ 226);\r\n/**\r\n * Priority Description for details\r\n * @param props\r\n */\r\nvar messagePriorityDescription = function (props) {\r\n    var messagePriorityName = props.messagePriorityName.toLowerCase();\r\n    if (messagePriorityName !== enums.getEnumString(enums.MessagePriority, enums.MessagePriority.Standard).toLocaleLowerCase()) {\r\n        return (React.createElement(\"div\", { className: 'msg-alert grey msg-important', id: props.id }, localestore.instance.TranslateText('messaging.message-lists.message-detail.high-' + messagePriorityName + '-banner')));\r\n    }\r\n    else {\r\n        return null;\r\n    }\r\n};\r\nmodule.exports = messagePriorityDescription;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTA4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvbWVzc2FnZS9tZXNzYWdlcHJpb3JpdHlkZXNjcmlwdGlvbi50c3g/Zjc2MSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xyXG5pbXBvcnQgZW51bXMgPSByZXF1aXJlKCcuLi91dGlsaXR5L2VudW1zJyk7XHJcbmltcG9ydCBsb2NhbGVzdG9yZSA9IHJlcXVpcmUoJy4uLy4uL3N0b3Jlcy9sb2NhbGUvbG9jYWxlc3RvcmUnKTtcclxuXHJcbmludGVyZmFjZSBNZXNzYWdlUHJpb3JpdHlEZXNjcmlwdGlvblByb3BzIGV4dGVuZHMgUHJvcHNCYXNlLCBMb2NhbGVTZWxlY3Rpb25CYXNlIHtcclxuICAgIG1lc3NhZ2VQcmlvcml0eU5hbWU6IHN0cmluZztcclxufVxyXG5cclxuLyoqXHJcbiAqIFByaW9yaXR5IERlc2NyaXB0aW9uIGZvciBkZXRhaWxzXHJcbiAqIEBwYXJhbSBwcm9wc1xyXG4gKi9cclxuY29uc3QgbWVzc2FnZVByaW9yaXR5RGVzY3JpcHRpb246IFJlYWN0LlN0YXRlbGVzc0NvbXBvbmVudDxNZXNzYWdlUHJpb3JpdHlEZXNjcmlwdGlvblByb3BzPiA9IChwcm9wczogTWVzc2FnZVByaW9yaXR5RGVzY3JpcHRpb25Qcm9wcykgPT4ge1xyXG4gICAgbGV0IG1lc3NhZ2VQcmlvcml0eU5hbWUgPSBwcm9wcy5tZXNzYWdlUHJpb3JpdHlOYW1lLnRvTG93ZXJDYXNlKCk7XHJcbiAgICBpZiAobWVzc2FnZVByaW9yaXR5TmFtZSAhPT0gZW51bXMuZ2V0RW51bVN0cmluZyhlbnVtcy5NZXNzYWdlUHJpb3JpdHksIGVudW1zLk1lc3NhZ2VQcmlvcml0eS5TdGFuZGFyZCkudG9Mb2NhbGVMb3dlckNhc2UoKSkge1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdtc2ctYWxlcnQgZ3JleSBtc2ctaW1wb3J0YW50JyBpZCA9IHtwcm9wcy5pZH0+XHJcbiAgICAgICAgICAgICAgICB7bG9jYWxlc3RvcmUuaW5zdGFuY2UuVHJhbnNsYXRlVGV4dCgnbWVzc2FnaW5nLm1lc3NhZ2UtbGlzdHMubWVzc2FnZS1kZXRhaWwuaGlnaC0nICsgbWVzc2FnZVByaW9yaXR5TmFtZSArICctYmFubmVyJyl9XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG59O1xyXG5cclxuZXhwb3J0ID0gbWVzc2FnZVByaW9yaXR5RGVzY3JpcHRpb247XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vc291cmNlLW1hcC1sb2FkZXIhLi9zcmMvY29tcG9uZW50cy9tZXNzYWdlL21lc3NhZ2Vwcmlvcml0eWRlc2NyaXB0aW9uLnRzeCJdLCJtYXBwaW5ncyI6IjtBQUFBO0FBQ0E7QUFDQTtBQU1BOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOyIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),

/***/ 509:
/* no static exports found */
/* all exports used */
/*!********************************************************!*\
  !*** ./src/components/message/recipientlisttoggle.tsx ***!
  \********************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar React = __webpack_require__(/*! react */ 0);\r\nvar localeStore = __webpack_require__(/*! ../../stores/locale/localestore */ 226);\r\n/**\r\n * RecipientListToggle contain the collpase or expan view with remaining count.\r\n * @param props\r\n */\r\nvar recipientListToggle = function (props) {\r\n    if (props.remainingRecipientCount > 0) {\r\n        return (React.createElement(\"a\", { className: 'msg-to-expand-toggler', id: props.id, onClick: function () { props.onRecipientListToggleClick(); } },\r\n            React.createElement(\"span\", { className: 'sender-count dim-text' },\r\n                \"+\",\r\n                props.remainingRecipientCount,\r\n                \" \",\r\n                localeStore.instance.TranslateText('messaging.message-lists.message-detail.more-recipients')),\r\n            React.createElement(\"span\", { className: 'expand-toggle-icon' },\r\n                React.createElement(\"span\", { className: 'sprite-icon menu-arrow-icon' }),\r\n                React.createElement(\"span\", { className: 'sprite-icon menu-arrow-icon' }))));\r\n    }\r\n    else {\r\n        return null;\r\n    }\r\n};\r\nmodule.exports = recipientListToggle;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTA5LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvbWVzc2FnZS9yZWNpcGllbnRsaXN0dG9nZ2xlLnRzeD8wNzI2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XHJcbmltcG9ydCBsb2NhbGVTdG9yZSA9IHJlcXVpcmUoJy4uLy4uL3N0b3Jlcy9sb2NhbGUvbG9jYWxlc3RvcmUnKTtcclxuXHJcbmludGVyZmFjZSBUb2dnbGVQcm9wcyBleHRlbmRzIExvY2FsZVNlbGVjdGlvbkJhc2UsIFByb3BzQmFzZSB7XHJcbiAgICByZW1haW5pbmdSZWNpcGllbnRDb3VudDogbnVtYmVyO1xyXG4gICAgb25SZWNpcGllbnRMaXN0VG9nZ2xlQ2xpY2s6IEZ1bmN0aW9uO1xyXG59XHJcblxyXG4vKipcclxuICogUmVjaXBpZW50TGlzdFRvZ2dsZSBjb250YWluIHRoZSBjb2xscGFzZSBvciBleHBhbiB2aWV3IHdpdGggcmVtYWluaW5nIGNvdW50LlxyXG4gKiBAcGFyYW0gcHJvcHNcclxuICovXHJcbmNvbnN0IHJlY2lwaWVudExpc3RUb2dnbGU6IFJlYWN0LlN0YXRlbGVzc0NvbXBvbmVudDxUb2dnbGVQcm9wcz4gPSAocHJvcHM6IFRvZ2dsZVByb3BzKSA9PiB7XHJcbiAgICBpZiAocHJvcHMucmVtYWluaW5nUmVjaXBpZW50Q291bnQgPiAwKSB7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPGEgY2xhc3NOYW1lPSdtc2ctdG8tZXhwYW5kLXRvZ2dsZXInIGlkPXtwcm9wcy5pZH0gb25DbGljaz17KCkgPT4geyBwcm9wcy5vblJlY2lwaWVudExpc3RUb2dnbGVDbGljaygpOyB9fT5cclxuICAgICAgICAgICAgICAgIDxzcGFuXHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdzZW5kZXItY291bnQgZGltLXRleHQnPlxyXG4gICAgICAgICAgICAgICAgICAgICt7cHJvcHMucmVtYWluaW5nUmVjaXBpZW50Q291bnR9IHtsb2NhbGVTdG9yZS5pbnN0YW5jZS5UcmFuc2xhdGVUZXh0KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnbWVzc2FnaW5nLm1lc3NhZ2UtbGlzdHMubWVzc2FnZS1kZXRhaWwubW9yZS1yZWNpcGllbnRzJyl9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSdleHBhbmQtdG9nZ2xlLWljb24nPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0nc3ByaXRlLWljb24gbWVudS1hcnJvdy1pY29uJz48L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSdzcHJpdGUtaWNvbiBtZW51LWFycm93LWljb24nPjwvc3Bhbj5cclxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgPC9hPlxyXG4gICAgICAgICk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG59O1xyXG5cclxuZXhwb3J0ID0gcmVjaXBpZW50TGlzdFRvZ2dsZTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L3NvdXJjZS1tYXAtbG9hZGVyIS4vc3JjL2NvbXBvbmVudHMvbWVzc2FnZS9yZWNpcGllbnRsaXN0dG9nZ2xlLnRzeCJdLCJtYXBwaW5ncyI6IjtBQUFBO0FBQ0E7QUFPQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTs7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUlBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTsiLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),

/***/ 520:
/* no static exports found */
/* all exports used */
/*!**********************************************************************!*\
  !*** ./src/components/utility/messagetranslationhandlerconstants.ts ***!
  \**********************************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar MessageTranslationHandlerConstants;\r\n(function (MessageTranslationHandlerConstants) {\r\n    // Keyword for the targets dictionary\r\n    MessageTranslationHandlerConstants.TARGETS_DICTIONARY = 'Targets';\r\n    // Keyword for the remark targets dictionary\r\n    MessageTranslationHandlerConstants.REMARKTARGETS_DICTIONARY = 'RemarkTargets';\r\n    // Keyword for the Marker name\r\n    MessageTranslationHandlerConstants.MARKER = 'marker';\r\n    // Keyword for the old approval status\r\n    MessageTranslationHandlerConstants.OLD_STATUS = 'oldStatus';\r\n    // Keyword for the new approval status\r\n    MessageTranslationHandlerConstants.NEW_STATUS = 'newStatus';\r\n    // Keyword for the old grace period\r\n    MessageTranslationHandlerConstants.OLD_GRACE_PERIOD = 'OldGracePeriod';\r\n    // Keyword for the new grace period\r\n    MessageTranslationHandlerConstants.NEW_GRACE_PERIOD = 'NewGracePeriod';\r\n    // Keyword for the display id\r\n    MessageTranslationHandlerConstants.DISPLAY_ID = 'DisplayID';\r\n    // Keyword for the worklist type\r\n    MessageTranslationHandlerConstants.WORKLIST_TYPE = 'WorklistType';\r\n    // Keyword for the execption type\r\n    MessageTranslationHandlerConstants.EXCEPTION_TYPE = 'ExceptionType';\r\n    // Keyword for the senior examiner name\r\n    MessageTranslationHandlerConstants.SENIOR_EXAMINER_NAME = 'SeniorExaminerName';\r\n})(MessageTranslationHandlerConstants || (MessageTranslationHandlerConstants = {}));\r\nmodule.exports = MessageTranslationHandlerConstants;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTIwLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvdXRpbGl0eS9tZXNzYWdldHJhbnNsYXRpb25oYW5kbGVyY29uc3RhbnRzLnRzP2U3OWIiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlIE1lc3NhZ2VUcmFuc2xhdGlvbkhhbmRsZXJDb25zdGFudHMge1xyXG4gICAgLy8gS2V5d29yZCBmb3IgdGhlIHRhcmdldHMgZGljdGlvbmFyeVxyXG4gICAgZXhwb3J0IGNvbnN0IFRBUkdFVFNfRElDVElPTkFSWSA9ICdUYXJnZXRzJztcclxuICAgIC8vIEtleXdvcmQgZm9yIHRoZSByZW1hcmsgdGFyZ2V0cyBkaWN0aW9uYXJ5XHJcbiAgICBleHBvcnQgY29uc3QgUkVNQVJLVEFSR0VUU19ESUNUSU9OQVJZID0gJ1JlbWFya1RhcmdldHMnO1xyXG4gICAgLy8gS2V5d29yZCBmb3IgdGhlIE1hcmtlciBuYW1lXHJcbiAgICBleHBvcnQgY29uc3QgTUFSS0VSID0gJ21hcmtlcic7XHJcbiAgICAvLyBLZXl3b3JkIGZvciB0aGUgb2xkIGFwcHJvdmFsIHN0YXR1c1xyXG4gICAgZXhwb3J0IGNvbnN0IE9MRF9TVEFUVVMgPSAnb2xkU3RhdHVzJztcclxuICAgIC8vIEtleXdvcmQgZm9yIHRoZSBuZXcgYXBwcm92YWwgc3RhdHVzXHJcbiAgICBleHBvcnQgY29uc3QgTkVXX1NUQVRVUyA9ICduZXdTdGF0dXMnO1xyXG4gICAgLy8gS2V5d29yZCBmb3IgdGhlIG9sZCBncmFjZSBwZXJpb2RcclxuICAgIGV4cG9ydCBjb25zdCBPTERfR1JBQ0VfUEVSSU9EID0gJ09sZEdyYWNlUGVyaW9kJztcclxuICAgIC8vIEtleXdvcmQgZm9yIHRoZSBuZXcgZ3JhY2UgcGVyaW9kXHJcbiAgICBleHBvcnQgY29uc3QgTkVXX0dSQUNFX1BFUklPRCA9ICdOZXdHcmFjZVBlcmlvZCc7XHJcbiAgICAvLyBLZXl3b3JkIGZvciB0aGUgZGlzcGxheSBpZFxyXG4gICAgZXhwb3J0IGNvbnN0IERJU1BMQVlfSUQgPSAnRGlzcGxheUlEJztcclxuICAgIC8vIEtleXdvcmQgZm9yIHRoZSB3b3JrbGlzdCB0eXBlXHJcbiAgICBleHBvcnQgY29uc3QgV09SS0xJU1RfVFlQRSA9ICdXb3JrbGlzdFR5cGUnO1xyXG4gICAgLy8gS2V5d29yZCBmb3IgdGhlIGV4ZWNwdGlvbiB0eXBlXHJcbiAgICBleHBvcnQgY29uc3QgRVhDRVBUSU9OX1RZUEUgPSAnRXhjZXB0aW9uVHlwZSc7XHJcbiAgICAvLyBLZXl3b3JkIGZvciB0aGUgc2VuaW9yIGV4YW1pbmVyIG5hbWVcclxuICAgIGV4cG9ydCBjb25zdCBTRU5JT1JfRVhBTUlORVJfTkFNRSA9ICdTZW5pb3JFeGFtaW5lck5hbWUnO1xyXG59XHJcbmV4cG9ydCA9IE1lc3NhZ2VUcmFuc2xhdGlvbkhhbmRsZXJDb25zdGFudHM7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9zb3VyY2UtbWFwLWxvYWRlciEuL3NyYy9jb21wb25lbnRzL3V0aWxpdHkvbWVzc2FnZXRyYW5zbGF0aW9uaGFuZGxlcmNvbnN0YW50cy50cyJdLCJtYXBwaW5ncyI6IjtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9");

/***/ }),

/***/ 545:
/* no static exports found */
/* all exports used */
/*!************************************************!*\
  !*** ./src/components/exception/exception.tsx ***!
  \************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("/* WEBPACK VAR INJECTION */(function($) {\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar React = __webpack_require__(/*! react */ 0);\r\nvar ExceptionBase = __webpack_require__(/*! ./exceptionbase */ 1008);\r\nvar exceptionStore = __webpack_require__(/*! ../../stores/exception/exceptionstore */ 277);\r\nvar DropDownException = __webpack_require__(/*! ./dropdownexception */ 1006);\r\nvar qigStore = __webpack_require__(/*! ../../stores/qigselector/qigstore */ 230);\r\nvar markingStore = __webpack_require__(/*! ../../stores/marking/markingstore */ 236);\r\nvar exceptionactionCreator = __webpack_require__(/*! ../../actions/exception/exceptionactioncreator */ 428);\r\nvar ExceptionTypeInfo = __webpack_require__(/*! ./exceptiontypeinfo */ 1010);\r\nvar ExceptionCommentHistory = __webpack_require__(/*! ./exceptioncommenthistory */ 1009);\r\nvar examinerStore = __webpack_require__(/*! ../../stores/markerinformation/examinerstore */ 259);\r\nvar enums = __webpack_require__(/*! ../utility/enums */ 225);\r\nvar scriptHelper = __webpack_require__(/*! ../../utility/script/scripthelper */ 499);\r\nvar localeStore = __webpack_require__(/*! ../../stores/locale/localestore */ 226);\r\nvar configurableCharacteristicsHelper = __webpack_require__(/*! ../../utility/configurablecharacteristic/configurablecharacteristicshelper */ 233);\r\nvar configurableCharacteristicsNames = __webpack_require__(/*! ../../utility/configurablecharacteristic/configurablecharacteristicsnames */ 234);\r\nvar exceptionHelper = __webpack_require__(/*! ../utility/exception/exceptionhelper */ 426);\r\nvar popUpDisplayActionCreator = __webpack_require__(/*! ../../actions/popupdisplay/popupdisplayactioncreator */ 328);\r\nvar responseStore = __webpack_require__(/*! ../../stores/response/responsestore */ 235);\r\nvar constants = __webpack_require__(/*! ../utility/constants */ 241);\r\nvar teamManagementStore = __webpack_require__(/*! ../../stores/teammanagement/teammanagementstore */ 245);\r\nvar deviceHelper = __webpack_require__(/*! ../../utility/touch/devicehelper */ 316);\r\nvar markerOperationModeFactory = __webpack_require__(/*! ../utility/markeroperationmode/markeroperationmodefactory */ 232);\r\nvar teamManagementActionCreator = __webpack_require__(/*! ../../actions/teammanagement/teammanagementactioncreator */ 263);\r\nvar navigationHelper = __webpack_require__(/*! ../utility/navigation/navigationhelper */ 248);\r\nvar worklistStore = __webpack_require__(/*! ../../stores/worklist/workliststore */ 231);\r\nvar eCourseWorkFileStore = __webpack_require__(/*! ../../stores/response/digital/ecourseworkfilestore */ 278);\r\nvar Exception = /** @class */ (function (_super) {\r\n    __extends(Exception, _super);\r\n    /**\r\n     * Constructor Exception\r\n     * @param props\r\n     * @param state\r\n     */\r\n    function Exception(props, state) {\r\n        var _this = _super.call(this, props, state) || this;\r\n        // indicates whether the exeptiontype information is visible\r\n        _this.exceptionTypeInfoClose = false;\r\n        // indicates whether the exeption action is available\r\n        _this.isExceptionActionAvailable = false;\r\n        //Exception type id of exception file access error\r\n        _this.selectedExceptionTypeId = 25;\r\n        //MarkSchemeGroupName of Qig in Whole Response\r\n        _this._markSchemeGroupName = null;\r\n        //MarkSchemeGroupid of Qig in Whole Response\r\n        _this._markSchemeGroupId = undefined;\r\n        //MarkGroupid of Qig in Whole Response\r\n        _this._markGroupId = undefined;\r\n        //ExaminerRoleId of Examiner in Qig in Whole Response\r\n        _this._examinerRoleId = undefined;\r\n        /**\r\n         * Get the exception details\r\n         */\r\n        _this.getExceptionData = function () {\r\n            //TODO -- Use the method in store to get selectedAudioVideo files\r\n            var selectedECourseWorkFiles = eCourseWorkFileStore.instance.getSelectedECourseWorkFiles();\r\n            var selectedFile = (selectedECourseWorkFiles) ? selectedECourseWorkFiles.filter(function (x) {\r\n                return (x.linkData.mediaType === enums.MediaType.Video || x.linkData.mediaType === enums.MediaType.Audio);\r\n            }).first() : undefined;\r\n            var filename = selectedFile.title;\r\n            var currentlySelectedExceptionType = _this.getExceptionTypeDetails(_this.selectedExceptionTypeId.toString());\r\n            _this.setState({\r\n                selectedExceptionTypeId: _this.selectedExceptionTypeId,\r\n                exceptionComment: filename + '\\n\\n' + _this.props.exceptionBody.replace(/<br\\/>/g, ''),\r\n                isSubmitButtonDisabled: (currentlySelectedExceptionType) ? false : true\r\n            });\r\n        };\r\n        _this.closeExceptionPanel = function () {\r\n            // Inorder to exclude the 'open' or 'class' from the exception type div.\r\n            if (_this.state.selectedExceptionTypeId === undefined && _this.state.exceptionComment === '') {\r\n                _this.setState({\r\n                    isExceptionTypeMenuSelected: false\r\n                });\r\n            }\r\n            _this.props.closeExceptionPanel();\r\n        };\r\n        /**\r\n         * Reset the scroll position for exception type list\r\n         */\r\n        _this.resetScroll = function () {\r\n            var exceptionTypeInfo = document.getElementsByClassName('exception-type-menu-item menu-item panel open')[0];\r\n            if (exceptionTypeInfo) {\r\n                $('#exceptionMenu').animate({ scrollTop: exceptionTypeInfo.offsetTop }, 1000);\r\n            }\r\n        };\r\n        /**\r\n         * Render the exception comment box.\r\n         * @param- event\r\n         */\r\n        _this.commentChanged = function (event) {\r\n            var exceptionComment = event.target.value;\r\n            _this.setState({\r\n                isSubmitButtonDisabled: _this.isValidException(true, exceptionComment, _this.state.selectedExceptionTypeId),\r\n                exceptionComment: exceptionComment\r\n            });\r\n            _this.props.validateException(_this.isValidException(false, exceptionComment, _this.state.selectedExceptionTypeId));\r\n        };\r\n        /**\r\n         * This method will validate whether or not the Exception Panel is edited\r\n         * @param- isSubmitButton\r\n         * @param- exceptionComment\r\n         * @param- exceptionTypeid\r\n         */\r\n        _this.isValidException = function (isSubmitButton, exceptionComment, exceptionTypeId) {\r\n            if (isSubmitButton) {\r\n                return !(exceptionComment.trim().length > 0 && exceptionTypeId !== undefined);\r\n            }\r\n            else {\r\n                return !(exceptionComment.trim().length > 0 || exceptionTypeId !== undefined);\r\n            }\r\n        };\r\n        /**\r\n         * Select changeRelatesto Items.\r\n         * @param- uniqueId\r\n         */\r\n        _this.changeRelatesTo = function (uniqueId) {\r\n            var exceptionComment = _this.state.exceptionComment;\r\n            _this.setState({\r\n                selectedRelatesTo: uniqueId,\r\n                selectedExceptionTypeId: undefined,\r\n                isSubmitButtonDisabled: _this.isValidException(true, exceptionComment, undefined),\r\n            });\r\n        };\r\n        /**\r\n         * Save exception Callback.\r\n         * @param- res\r\n         */\r\n        _this.raiseException = function (response) {\r\n            _this.props.closeExceptionPanel(response.success, response.createExceptionReturnErrorCode);\r\n        };\r\n        /**\r\n         * Method fired to close the exception panel.\r\n         */\r\n        _this.onExceptionPanelClose = function () {\r\n            _this.resetExceptionPanel();\r\n        };\r\n        /**\r\n         * Method fired to reset the exception panel.\r\n         */\r\n        _this.resetExceptionPanel = function () {\r\n            _this._questionId = undefined;\r\n            _this._markSchemeGroupId = undefined;\r\n            if (exceptionStore.instance.exceptionViewAction === enums.ExceptionViewAction.Open) {\r\n                _this._markSchemeGroupId = (_this.props.hasUnManagedSLAO\r\n                    || _this.props.hasUnmanagedImageZone) ? qigStore.instance.selectedQIGForMarkerOperation.markSchemeGroupId\r\n                    : markingStore.instance.selectedQIGMarkSchemeGroupId;\r\n                _this._markSchemeGroupName = responseStore.instance.isWholeResponse ? qigStore.instance.\r\n                    getMarkSchemeGroupName(_this._markSchemeGroupId) : null;\r\n                _this._markGroupId = markingStore.instance.getMarkGroupIdQIGtoRIGMap(_this._markSchemeGroupId);\r\n                if (_this.props.hasUnManagedSLAO || _this.props.hasUnmanagedImageZone) {\r\n                    _this._examinerRoleId = qigStore.instance.selectedQIGForMarkerOperation.examinerRoleId;\r\n                }\r\n                else {\r\n                    _this._examinerRoleId = markingStore.instance.selectedQIGExaminerRoleId;\r\n                }\r\n            }\r\n            _this.setState({\r\n                selectedExceptionTypeId: undefined,\r\n                showExceptionTypeclassName: 'close',\r\n                isSubmitButtonDisabled: true,\r\n                selectedRelatesTo: undefined,\r\n                exceptionComment: '',\r\n                renderedOn: Date.now(),\r\n                selectedExceptionDescriptionId: 0,\r\n                isExceptionTypeMenuSelected: false\r\n            });\r\n            if (_this.props.isFromMediaErrorDialog) {\r\n                _this.getExceptionData();\r\n            }\r\n            if (_this.props.isNewException && _this.refs.commentTextBox !== undefined && !deviceHelper.isTouchDevice()) {\r\n                _this.refs.commentTextBox.focus();\r\n            }\r\n        };\r\n        /**\r\n         * This method is handling the letious popup events.\r\n         */\r\n        _this.onPopUpDisplayEvent = function (popUpType, popUpActionType) {\r\n            switch (popUpType) {\r\n                case enums.PopUpType.DiscardException:\r\n                case enums.PopUpType.DiscardExceptionOnViewExceptionButtonClick:\r\n                case enums.PopUpType.DiscardOnNewExceptionButtonClick:\r\n                    if (popUpActionType === enums.PopUpActionType.Yes) {\r\n                        _this.resetExceptionPanel();\r\n                    }\r\n                    break;\r\n                case enums.PopUpType.CloseException:\r\n                    if (popUpActionType === enums.PopUpActionType.Yes) {\r\n                        _this.closeException();\r\n                    }\r\n                    break;\r\n            }\r\n        };\r\n        /**\r\n         * handle exception actions such as Escalate, Resolve, Close\r\n         */\r\n        _this.onActionException = function (exceptionActionType) {\r\n            if (exceptionActionType === enums.ExceptionActionType.Close) {\r\n                popUpDisplayActionCreator.popUpDisplay(enums.PopUpType.CloseException, enums.PopUpActionType.Show, enums.SaveAndNavigate.none, {\r\n                    popupContent: localeStore.instance.TranslateText('marking.response.close-exception-dialog.body')\r\n                });\r\n            }\r\n            else {\r\n                exceptionactionCreator.doVisibleExceptionActionPopup(true, exceptionActionType);\r\n            }\r\n        };\r\n        // Set the default states\r\n        _this.state = {\r\n            renderedOn: 0,\r\n            showExceptionTypeclassName: 'close',\r\n            isSubmitButtonDisabled: true,\r\n            exceptionComment: '',\r\n            isExceptionTypeMenuSelected: false\r\n        };\r\n        _this.commentChanged = _this.commentChanged.bind(_this);\r\n        _this.saveException = _this.saveException.bind(_this);\r\n        _this.showExceptionType = _this.showExceptionType.bind(_this);\r\n        _this.selectExceptionType = _this.selectExceptionType.bind(_this);\r\n        _this.showExceptionDescription = _this.showExceptionDescription.bind(_this);\r\n        _this.closeExceptionPanel = _this.closeExceptionPanel.bind(_this);\r\n        _this.onFocus = _this.onFocus.bind(_this);\r\n        _this.resetScroll = _this.resetScroll.bind(_this);\r\n        _this.onActionException = _this.onActionException.bind(_this);\r\n        _this.resetExceptionPanel = _this.resetExceptionPanel.bind(_this);\r\n        return _this;\r\n    }\r\n    /**\r\n     * Component did  mount\r\n     */\r\n    Exception.prototype.componentDidMount = function () {\r\n        exceptionStore.instance.addListener(exceptionStore.ExceptionStore.CLOSE_EXCEPTION_WINDOW, this.onExceptionPanelClose);\r\n        exceptionStore.instance.addListener(exceptionStore.ExceptionStore.EXCEPTION_DISCARD_POPUP_DISPLAY_EVENT, this.onPopUpDisplayEvent);\r\n        exceptionStore.instance.addListener(exceptionStore.ExceptionStore.OPEN_EXCEPTION_WINDOW, this.resetExceptionPanel);\r\n        exceptionStore.instance.addListener(exceptionStore.ExceptionStore.RAISE_EXCEPTION, this.raiseException);\r\n        exceptionStore.instance.addListener(exceptionStore.ExceptionStore.CLOSE_EXCEPTION, this.closeExceptionPanel);\r\n        exceptionStore.instance.addListener(exceptionStore.ExceptionStore.EXCEPTION_TYPE_SCROLL_RESET_ACTION, this.resetScroll);\r\n    };\r\n    /**\r\n     * Componet will unmount\r\n     */\r\n    Exception.prototype.componentWillUnmount = function () {\r\n        exceptionStore.instance.removeListener(exceptionStore.ExceptionStore.CLOSE_EXCEPTION_WINDOW, this.onExceptionPanelClose);\r\n        exceptionStore.instance.removeListener(exceptionStore.ExceptionStore.EXCEPTION_DISCARD_POPUP_DISPLAY_EVENT, this.onPopUpDisplayEvent);\r\n        if (exceptionStore.instance.exceptionViewAction !== enums.ExceptionViewAction.None) {\r\n            exceptionactionCreator.exceptionWindowAction(enums.ExceptionViewAction.None);\r\n        }\r\n        exceptionStore.instance.removeListener(exceptionStore.ExceptionStore.OPEN_EXCEPTION_WINDOW, this.resetExceptionPanel);\r\n        exceptionStore.instance.removeListener(exceptionStore.ExceptionStore.RAISE_EXCEPTION, this.raiseException);\r\n        exceptionStore.instance.removeListener(exceptionStore.ExceptionStore.CLOSE_EXCEPTION, this.closeExceptionPanel);\r\n        exceptionStore.instance.removeListener(exceptionStore.ExceptionStore.EXCEPTION_TYPE_SCROLL_RESET_ACTION, this.resetScroll);\r\n    };\r\n    /**\r\n     * Component did update\r\n     */\r\n    Exception.prototype.componentDidUpdate = function () {\r\n        //when exception is raised from error dialog, then the Entire Response radio button should be selected by default\r\n        //so setting selectedRelatesTo to 0\r\n        if (this.props.isFromMediaErrorDialog && this.state.selectedRelatesTo === undefined) {\r\n            this.setState({\r\n                selectedRelatesTo: 0\r\n            });\r\n        }\r\n    };\r\n    /**\r\n     * Render method\r\n     */\r\n    Exception.prototype.render = function () {\r\n        var panelContent;\r\n        if (this.props.exceptionData && this.props.exceptionData !== null\r\n            && !markerOperationModeFactory.operationMode.isStandardisationSetupMode) {\r\n            panelContent = this.exceptionPanelContent();\r\n        }\r\n        return (React.createElement(\"div\", { id: 'responseExceptionContainer', className: 'response-message response-exception-container' },\r\n            this.renderExceptionHeader(),\r\n            React.createElement(\"div\", { className: 'messaging-content' }, panelContent)));\r\n    };\r\n    /**\r\n     * Render Exception Header.\r\n     */\r\n    Exception.prototype.renderExceptionHeader = function () {\r\n        var headerDetails;\r\n        if (this.props.isNewException || !this.props.isExceptionPanelVisible) {\r\n            headerDetails = (React.createElement(\"h3\", { id: 'popup2TitleException', className: 'shift-left comp-msg-title' }, localeStore.instance.TranslateText('marking.response.exception-list-panel.raise-new-exception')));\r\n        }\r\n        else {\r\n            headerDetails = (React.createElement(\"h3\", { id: 'popup2TitleException', className: 'shift-left comp-msg-title' },\r\n                React.createElement(\"span\", { className: 'exceptionid-label' }, localeStore.instance.TranslateText('marking.response.view-exception-panel.header')),\r\n                React.createElement(\"span\", { className: 'exceptionid-colon' }, \": \"),\r\n                React.createElement(\"span\", { className: 'exception-id' }, constants.EXCEPTION_ID_PREFIX + this.props.exceptionDetails.uniqueId)));\r\n        }\r\n        return (React.createElement(\"div\", { className: 'response-msg-header clearfix' },\r\n            headerDetails,\r\n            this.props.isNewException || !this.props.isExceptionPanelVisible ?\r\n                (React.createElement(\"div\", { id: 'exception_submit_btn', className: 'shift-left comp-msg-butons' },\r\n                    React.createElement(\"button\", { id: 'submit_exception', className: 'button primary rounded', title: localeStore.instance.TranslateText('marking.response.raise-exception-panel.submit-button'), onClick: this.saveException, disabled: this.state.isSubmitButtonDisabled }, localeStore.instance.TranslateText('marking.response.raise-exception-panel.submit-button')))) : null,\r\n            teamManagementStore.instance.isRedirectFromException && this.props.isExceptionPanelVisible ?\r\n                (React.createElement(\"button\", { id: 'back_to_exception_btn', className: 'rounded back-exception-btn light', title: localeStore.instance.TranslateText('generic.response.exception-panel.back-to-exceptions'), onClick: this.navigatetoExceptionList }, localeStore.instance.TranslateText('generic.response.exception-panel.back-to-exceptions'))) : null,\r\n            React.createElement(\"div\", { className: 'shift-right minimize-message' },\r\n                React.createElement(\"a\", { className: 'minimize-message-link', title: localeStore.instance.TranslateText('messaging.compose-message.minimise-icon-tooltip'), onClick: this.onMinimize },\r\n                    React.createElement(\"span\", { className: 'minimize-icon lite' }, \"Minimize\")),\r\n                React.createElement(\"a\", { className: 'maximize-message-link', title: localeStore.instance.TranslateText('messaging.compose-message.maximise-icon-tooltip'), onClick: this.onMaximize },\r\n                    React.createElement(\"span\", { className: 'maxmize-icon lite' })),\r\n                !teamManagementStore.instance.isRedirectFromException ?\r\n                    React.createElement(\"a\", { className: 'close-message-link', title: localeStore.instance.TranslateText('messaging.compose-message.close-icon-tooltip'), onClick: this.closeExceptionPanel },\r\n                        React.createElement(\"span\", { className: 'close-icon lite' }, \"Close\")) : null)));\r\n    };\r\n    /**\r\n     * Render Exception Content.\r\n     */\r\n    Exception.prototype.exceptionPanelContent = function () {\r\n        var exceptionRelateWrap = (this.props.hasUnManagedSLAO || this.props.hasUnmanagedImageZone)\r\n            ? null :\r\n            (React.createElement(\"div\", { id: 'exceptionRelateWrap', className: 'exception-relate-wrap' },\r\n                React.createElement(\"div\", { className: 'dim-text exception-relate-label' },\r\n                    localeStore.instance.TranslateText('marking.response.raise-exception-panel.exception-relates-to-label'),\r\n                    \" \"),\r\n                this.renderExceptionRelatesTo()));\r\n        if (this.props.isNewException || !this.props.isExceptionPanelVisible) {\r\n            var newExceptionSubTitle = (this.props.hasUnManagedSLAO || this.props.hasUnmanagedImageZone)\r\n                ? localeStore.instance.TranslateText('marking.response.raise-exception-panel.new-exception-subtitle-has-unmanagedslao')\r\n                : localeStore.instance.TranslateText('marking.response.raise-exception-panel.exception-type-label');\r\n            return (React.createElement(\"div\", { className: 'exception-wrapper' },\r\n                exceptionRelateWrap,\r\n                React.createElement(\"div\", { className: 'exception-type-menu-wrap clearfix' },\r\n                    React.createElement(\"div\", { className: 'exception-reason-label dim-text' }, newExceptionSubTitle),\r\n                    this.renderExceptionTypes()),\r\n                this.renderExceptionMessage()));\r\n        }\r\n        else {\r\n            this.isExceptionActionAvailable = markerOperationModeFactory.operationMode.isTeamManagementMode &&\r\n                this.props.exceptionDetails.currentStatus === enums.ExceptionStatus.Open &&\r\n                examinerStore.instance.getMarkerInformation.examinerId === this.props.exceptionDetails.ownerExaminerId;\r\n            return (React.createElement(\"div\", { className: 'exception-wrapper' },\r\n                React.createElement(\"div\", { className: 'exception-detail-wrapper' },\r\n                    React.createElement(ExceptionTypeInfo, { id: 'exception-info', key: 'exception-info', selectedLanguage: this.props.selectedLanguage, exceptionTypeId: this.props.exceptionDetails.exceptionType, status: this.props.exceptionDetails.currentStatus, markSchemeId: this.props.exceptionDetails.markSchemeID, onActionException: this.onActionException, isExceptionActionAvailable: this.isExceptionActionAvailable, alternativeEscalationPoint: this.props.exceptionDetails.alternativeEscalationPoint, isPE: qigStore.instance.getSelectedQIGForTheLoggedInUser &&\r\n                            qigStore.instance.getSelectedQIGForTheLoggedInUser.role === enums.ExaminerRole.principalExaminer, questionName: this.props.exceptionDetails.markSchemeID === 0 ?\r\n                            (responseStore.instance.isWholeResponse ?\r\n                                qigStore.instance.getMarkSchemeGroupName(this.props.exceptionDetails.markSchemeGroupID)\r\n                                : 'Entire response') : markingStore.instance.toolTip(this.props.exceptionDetails.markSchemeID) }),\r\n                    this.renderExceptionCommentHistory())));\r\n        }\r\n    };\r\n    /**\r\n     * Render Exception Types.\r\n     */\r\n    Exception.prototype.renderExceptionTypes = function () {\r\n        var _this = this;\r\n        var dropdownclassName = 'dropdown-wrap exception-type option-menu-wrap shift-left ' +\r\n            (this.state.isExceptionTypeMenuSelected ? this.state.showExceptionTypeclassName : '');\r\n        var exceptionTypeDescription = '';\r\n        var isDisabled = false;\r\n        var exceptionTypes = exceptionHelper.sortExceptionTypes(exceptionStore.instance.getExceptionTypes);\r\n        var blockerDescription;\r\n        if (this.props.hasUnManagedSLAO) {\r\n            // for SLAO unmanaged scenario, expection type related to the Selected QIG should be displayed.\r\n            this._markSchemeGroupId = qigStore.instance.selectedQIGForMarkerOperation.markSchemeGroupId;\r\n        }\r\n        else if (this.props.currentQuestionItemInfo &&\r\n            this.props.currentQuestionItemInfo.markSchemeGroupId &&\r\n            this._markSchemeGroupId === undefined) {\r\n            this._markSchemeGroupId = this.props.currentQuestionItemInfo.markSchemeGroupId;\r\n        }\r\n        var toRender = exceptionTypes.map(function (exceptionType, index) {\r\n            if (exceptionType.markSchemeGroupId === _this._markSchemeGroupId) {\r\n                exceptionTypeDescription = '';\r\n                isDisabled = false;\r\n                // Disable already raised exception.\r\n                if (_this.props.exceptionData) {\r\n                    _this.props.exceptionData.map(function (data, index) {\r\n                        if (_this.state.selectedRelatesTo === 0) {\r\n                            if (data.markSchemeID === 0 && exceptionType.exceptionType === data.exceptionType\r\n                                && data.currentStatus !== enums.ExceptionStatus.Closed &&\r\n                                data.markSchemeGroupID === exceptionType.markSchemeGroupId) {\r\n                                exceptionTypeDescription = localeStore.instance.TranslateText('marking.response.raise-exception-panel.open-exception-exists-against-response');\r\n                                isDisabled = true;\r\n                            }\r\n                        }\r\n                        else {\r\n                            if (data.markSchemeID === 0 && exceptionType.exceptionType === data.exceptionType\r\n                                && data.currentStatus !== enums.ExceptionStatus.Closed && (data.markSchemeGroupID === exceptionType.markSchemeGroupId\r\n                                || _this.props.hasUnManagedSLAO || _this.props.hasUnmanagedImageZone)) {\r\n                                exceptionTypeDescription = localeStore.instance.TranslateText('marking.response.raise-exception-panel.open-exception-exists-against-response');\r\n                                isDisabled = true;\r\n                            }\r\n                            else if (data.markSchemeID === _this._questionId\r\n                                && exceptionType.exceptionType === data.exceptionType\r\n                                && data.currentStatus !== enums.ExceptionStatus.Closed) {\r\n                                exceptionTypeDescription = localeStore.instance.TranslateText('marking.response.raise-exception-panel.open-exception-exists-against-question');\r\n                                isDisabled = true;\r\n                            }\r\n                        }\r\n                    });\r\n                }\r\n                blockerDescription = exceptionHelper.getExceptionDescription(exceptionType, exceptionStore.instance.isExceptionBlocker(exceptionType.exceptionType));\r\n                return React.createElement(DropDownException, { id: exceptionType.exceptionType, key: exceptionType.exceptionType.toString(), isOpen: parseInt(_this.state.selectedExceptionDescriptionId) === exceptionType.exceptionType, isChecked: parseInt(_this.state.selectedExceptionTypeId) === exceptionType.exceptionType, onClick: _this.selectExceptionType, showExceptionDesc: _this.showExceptionDescription, isDisabled: isDisabled, description: exceptionTypeDescription, blockerDescription: blockerDescription });\r\n            }\r\n        });\r\n        var dropdownText = '';\r\n        var selectedExceptionType = this.getExceptionTypeDetails(this.state.selectedExceptionTypeId);\r\n        if (selectedExceptionType === null) {\r\n            dropdownText = localeStore.instance.TranslateText('marking.response.raise-exception-panel.select-exception-type-placeholder');\r\n        }\r\n        else {\r\n            dropdownText = localeStore.instance.TranslateText('generic.exception-types.' +\r\n                selectedExceptionType.exceptionType + '.name');\r\n        }\r\n        // reset the scroll position only after clicking the exceptiontype info icon\r\n        if (this.exceptionTypeInfoClose) {\r\n            exceptionactionCreator.setScrollForExceptionType();\r\n            this.exceptionTypeInfoClose = false;\r\n        }\r\n        return (React.createElement(\"div\", { className: dropdownclassName, onClick: this.showExceptionType },\r\n            React.createElement(\"a\", { id: 'exceptionSelected', className: 'menu-button exception-type-caption' },\r\n                React.createElement(\"span\", null, dropdownText),\r\n                React.createElement(\"span\", { className: 'sprite-icon menu-arrow-icon' })),\r\n            React.createElement(\"div\", { id: 'exceptionMenu', className: 'menu', role: 'menu', title: localeStore.instance.TranslateText('marking.response.raise-exception-panel.exception-type-tooltip'), \"aria-hidden\": 'true' },\r\n                React.createElement(\"div\", { className: 'exception-type-menu-content panel-group' }, toRender))));\r\n    };\r\n    /**\r\n     * Render the exception Relates to items.\r\n     */\r\n    Exception.prototype.renderExceptionRelatesTo = function () {\r\n        if (this.props.currentQuestionItemInfo &&\r\n            this.props.currentQuestionItemInfo.uniqueId) {\r\n            if (this._questionId === undefined) {\r\n                this._questionId = this.props.currentQuestionItemInfo.uniqueId;\r\n            }\r\n            this._questionName = localeStore.instance.TranslateText('marking.response.raise-exception-panel.selected-question')\r\n                + markingStore.instance.toolTip(this._questionId);\r\n        }\r\n        var selectedQuestionItem;\r\n        selectedQuestionItem = this.state.selectedRelatesTo === undefined ?\r\n            this._questionId : this.state.selectedRelatesTo;\r\n        return (React.createElement(\"div\", { className: 'exception-relate-option-wrap ' },\r\n            React.createElement(\"div\", { className: 'exception-relate-option' },\r\n                React.createElement(\"input\", { type: 'radio', value: 'selected', id: 'exceptionRelated1', name: 'exceptionRelated', defaultChecked: this.state.selectedRelatesTo !== 0, onChange: null }),\r\n                React.createElement(\"label\", { htmlFor: 'exceptionRelated1', onClick: selectedQuestionItem !== this._questionId ?\r\n                        this.changeRelatesTo.bind(this, this._questionId) : null },\r\n                    React.createElement(\"span\", { className: 'radio-ui' }),\r\n                    React.createElement(\"span\", { className: 'label-text' }, this._questionName))),\r\n            React.createElement(\"div\", { className: 'exception-relate-option' },\r\n                React.createElement(\"input\", { type: 'radio', value: 'selected', id: 'exceptionRelated2', name: 'exceptionRelated', defaultChecked: this.state.selectedRelatesTo === 0 }),\r\n                React.createElement(\"label\", { htmlFor: 'exceptionRelated2', onClick: selectedQuestionItem !== 0 ?\r\n                        this.changeRelatesTo.bind(this, 0) : null },\r\n                    React.createElement(\"span\", { className: 'radio-ui' }),\r\n                    React.createElement(\"span\", { className: 'label-text' }, responseStore.instance.isWholeResponse ? this._markSchemeGroupName\r\n                        : localeStore.instance.TranslateText('marking.response.raise-exception-panel.entire-response'))))));\r\n    };\r\n    /**\r\n     * Render the exception comment box.\r\n     */\r\n    Exception.prototype.renderExceptionMessage = function () {\r\n        return (React.createElement(\"div\", { className: 'exception-message-wrap' },\r\n            React.createElement(\"textarea\", { ref: 'commentTextBox', \"aria-label\": 'Exception', name: 'exception-msg', id: 'exceptionmsg', className: 'exception-message', placeholder: localeStore.instance.TranslateText('marking.response.raise-exception-panel.comment-placeholder'), onChange: this.commentChanged, value: this.state.exceptionComment, onFocus: this.onFocus })));\r\n    };\r\n    /**\r\n     * This method will call on focus of exception comment box text area\r\n     * @param e\r\n     */\r\n    Exception.prototype.onFocus = function (e) {\r\n        this.setState({\r\n            showExceptionTypeclassName: 'close'\r\n        });\r\n    };\r\n    /**\r\n     * Render the exception History.\r\n     */\r\n    Exception.prototype.renderExceptionCommentHistory = function () {\r\n        var commentDetails = this.props.exceptionDetails.exceptionComments;\r\n        var exceptionStatus = this.props.exceptionDetails.currentStatus;\r\n        var isEscalated = false;\r\n        var toRender = commentDetails.map(function (comment, index) {\r\n            if ((exceptionStatus === enums.ExceptionStatus.Open && index === 0) ||\r\n                (exceptionStatus === (enums.ExceptionStatus.Resolved || enums.ExceptionStatus.Closed) && index === 0) ||\r\n                (exceptionStatus === (enums.ExceptionStatus.Resolved || enums.ExceptionStatus.Closed) &&\r\n                    index === commentDetails.length - 1)) {\r\n                isEscalated = false;\r\n            }\r\n            else {\r\n                isEscalated = true;\r\n            }\r\n            return React.createElement(ExceptionCommentHistory, { key: 'comment-history' + index, commentedBy: comment.examinerName, isEscalated: isEscalated, updatedDate: comment.updatedDate, comments: comment.comment, exceptionStatus: comment.exceptionStatus, id: index });\r\n        });\r\n        return (React.createElement(\"div\", { className: 'exception-history-wrapper' }, toRender));\r\n    };\r\n    /**\r\n     * Navigate to the team Management ExceptionList\r\n     */\r\n    Exception.prototype.navigatetoExceptionList = function () {\r\n        teamManagementActionCreator.getTeamManagementOverviewCounts(teamManagementStore.instance.selectedExaminerRoleId, teamManagementStore.instance.selectedMarkSchemeGroupId);\r\n        teamManagementActionCreator.getUnactionedExceptions(qigStore.instance.selectedQIGForMarkerOperation.markSchemeGroupId, false, true);\r\n        navigationHelper.loadTeamManagement();\r\n    };\r\n    /**\r\n     * Save the Exception to Db.\r\n     */\r\n    Exception.prototype.saveException = function () {\r\n        this._scriptHelper = new scriptHelper();\r\n        var selectedExceptionType = this.getExceptionTypeDetails(this.state.selectedExceptionTypeId);\r\n        var isEbookMarking = configurableCharacteristicsHelper.getCharacteristicValue(configurableCharacteristicsNames.eBookmarking).toLowerCase() === 'true' ? true : false;\r\n        var comments = [{\r\n                comment: this.state.exceptionComment,\r\n                uniqueId: 0,\r\n                examinerID: examinerStore.instance.getMarkerInformation.examinerId,\r\n                escalationPoint: enums.EscalationPoint.None,\r\n                authorIsGroup: false,\r\n                updatedBy: ''\r\n            }];\r\n        var raiseExceptionParams = {\r\n            candidateScriptID: this._scriptHelper.getResponseData.candidateScriptId,\r\n            exceptionType: this.state.selectedExceptionTypeId,\r\n            markSchemeGroupID: this._markSchemeGroupId,\r\n            markGroupId: this._markGroupId,\r\n            isEBookMarking: isEbookMarking,\r\n            originatorExaminerId: examinerStore.instance.getMarkerInformation.examinerId,\r\n            questionPaperPartID: qigStore.instance.selectedQIGForMarkerOperation.questionPaperPartId,\r\n            ownerEscalationPoint: selectedExceptionType.ownerEscalationPoint,\r\n            exceptionComments: comments,\r\n            currentStatus: enums.ExceptionStatus.Open,\r\n            exceptionId: 0,\r\n            markSchemeID: this.state.selectedRelatesTo === undefined ?\r\n                this._questionId : this.state.selectedRelatesTo,\r\n            originatorExaminerRoleId: this._examinerRoleId,\r\n            ownerExaminerId: selectedExceptionType.ownerExaminerId,\r\n            uniqueId: 0,\r\n            displayId: responseStore.instance.selectedDisplayId,\r\n            examinerName: examinerStore.instance.getMarkerInformation.formattedExaminerName\r\n        };\r\n        this.setState({\r\n            isSubmitButtonDisabled: true,\r\n            exceptionComment: ''\r\n        }, function () {\r\n            // Call the raise exception Action.\r\n            exceptionactionCreator.raiseExceptionAction(raiseExceptionParams, worklistStore.instance.getResponseDetails(responseStore.instance.selectedDisplayId.toString()).markGroupId, qigStore.instance.selectedQIGForMarkerOperation.markSchemeGroupId);\r\n        });\r\n    };\r\n    /**\r\n     * Get the Exception type details.\r\n     */\r\n    Exception.prototype.getExceptionTypeDetails = function (exceptionTypeId) {\r\n        var exceptionTypes = exceptionStore.instance.getExceptionTypes;\r\n        var selectedExceptionType = null;\r\n        if (exceptionTypes) {\r\n            exceptionTypes.map(function (exceptionType) {\r\n                if (exceptionType.exceptionType === parseInt(exceptionTypeId)) {\r\n                    selectedExceptionType = exceptionType;\r\n                }\r\n            });\r\n        }\r\n        return selectedExceptionType;\r\n    };\r\n    /**\r\n     * Show ExceptionType Dropdown.\r\n     */\r\n    Exception.prototype.showExceptionType = function () {\r\n        this.setState({\r\n            isExceptionTypeMenuSelected: true,\r\n            showExceptionTypeclassName: this.state.showExceptionTypeclassName === 'close' ? 'open' : 'close'\r\n        });\r\n    };\r\n    /**\r\n     * Select the ExceptionType.\r\n     * @param- exceptionTypeid\r\n     * @param- isDisabled\r\n     * @param- event\r\n     */\r\n    Exception.prototype.selectExceptionType = function (exceptionTypeId, isDisabled, event) {\r\n        var exceptionComment = this.state.exceptionComment;\r\n        if (!isDisabled) {\r\n            this.setState({\r\n                selectedExceptionTypeId: exceptionTypeId,\r\n                isSubmitButtonDisabled: this.isValidException(true, exceptionComment, exceptionTypeId),\r\n                showExceptionTypeclassName: 'close'\r\n            });\r\n        }\r\n        this.props.validateException(this.isValidException(false, exceptionComment, exceptionTypeId));\r\n        event.stopPropagation();\r\n    };\r\n    /**\r\n     * Show the Exception Description.\r\n     * @param- exceptionTypeid\r\n     * @param- isOpen\r\n     * @param- event\r\n     */\r\n    Exception.prototype.showExceptionDescription = function (exceptionTypeId, isOpen, event) {\r\n        this.exceptionTypeInfoClose = isOpen !== 'open';\r\n        this.setState({\r\n            selectedExceptionDescriptionId: isOpen === 'open' ? 0 : exceptionTypeId\r\n        });\r\n        event.stopPropagation();\r\n    };\r\n    /**\r\n     * Update exception status to Db\r\n     */\r\n    Exception.prototype.closeException = function () {\r\n        var exceptionParams = {\r\n            uniqueId: this.props.exceptionDetails.uniqueId,\r\n            exceptionType: this.props.exceptionDetails.exceptionType,\r\n            currentStatus: enums.ExceptionStatus.Closed,\r\n            exceptionComments: null,\r\n            markSchemeID: this.props.exceptionDetails.markSchemeID,\r\n            ownerEscalationPoint: this.props.exceptionDetails.ownerEscalationPoint,\r\n            ownerExaminerId: this.props.exceptionDetails.ownerExaminerId,\r\n            markGroupId: this.props.exceptionDetails.markGroupId,\r\n            candidateScriptID: this.props.exceptionDetails.candidateScriptID,\r\n            markSchemeGroupID: this.props.exceptionDetails.markSchemeGroupID,\r\n            questionPaperPartID: this.props.exceptionDetails.questionPaperPartID,\r\n            originatorExaminerId: this.props.exceptionDetails.originatorExaminerId,\r\n            isEBookMarking: this.props.exceptionDetails.iseBookMarking\r\n        };\r\n        /* Defect 46286 - Exception count is not getting updated once after closing the exception.\r\n           To fix the issue by clearing the worklist cache after closing the exception.So it required worklist type, response mode,\r\n           remark request type as the exception argument */\r\n        var exceptionActionParams = {\r\n            exception: exceptionParams,\r\n            actionType: enums.ExceptionActionType.Close,\r\n            requestedByExaminerRoleId: qigStore.instance.selectedQIGForMarkerOperation.examinerRoleId,\r\n            qigId: qigStore.instance.selectedQIGForMarkerOperation.markSchemeGroupId,\r\n            worklistType: worklistStore.instance.currentWorklistType,\r\n            responseMode: worklistStore.instance.getResponseMode,\r\n            remarkRequestType: worklistStore.instance.getRemarkRequestType,\r\n            displayId: responseStore.instance.selectedDisplayId.toString(),\r\n        };\r\n        exceptionactionCreator.updateExceptionStatus(exceptionActionParams);\r\n    };\r\n    return Exception;\r\n}(ExceptionBase));\r\nmodule.exports = Exception;\r\n\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! jquery */ 42)))//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTQ1LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvZXhjZXB0aW9uL2V4Y2VwdGlvbi50c3g/NmMwNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xyXG5pbXBvcnQgRXhjZXB0aW9uQmFzZSA9IHJlcXVpcmUoJy4vZXhjZXB0aW9uYmFzZScpO1xyXG5pbXBvcnQgZXhjZXB0aW9uU3RvcmUgPSByZXF1aXJlKCcuLi8uLi9zdG9yZXMvZXhjZXB0aW9uL2V4Y2VwdGlvbnN0b3JlJyk7XHJcbmltcG9ydCBEcm9wRG93bkV4Y2VwdGlvbiA9IHJlcXVpcmUoJy4vZHJvcGRvd25leGNlcHRpb24nKTtcclxuaW1wb3J0IHFpZ1N0b3JlID0gcmVxdWlyZSgnLi4vLi4vc3RvcmVzL3FpZ3NlbGVjdG9yL3FpZ3N0b3JlJyk7XHJcbmltcG9ydCBtYXJraW5nU3RvcmUgPSByZXF1aXJlKCcuLi8uLi9zdG9yZXMvbWFya2luZy9tYXJraW5nc3RvcmUnKTtcclxuaW1wb3J0IGV4Y2VwdGlvbmFjdGlvbkNyZWF0b3IgPSByZXF1aXJlKCcuLi8uLi9hY3Rpb25zL2V4Y2VwdGlvbi9leGNlcHRpb25hY3Rpb25jcmVhdG9yJyk7XHJcbmltcG9ydCBFeGNlcHRpb25UeXBlSW5mbyA9IHJlcXVpcmUoJy4vZXhjZXB0aW9udHlwZWluZm8nKTtcclxuaW1wb3J0IEV4Y2VwdGlvbkNvbW1lbnRIaXN0b3J5ID0gcmVxdWlyZSgnLi9leGNlcHRpb25jb21tZW50aGlzdG9yeScpO1xyXG5pbXBvcnQgZXhhbWluZXJTdG9yZSA9IHJlcXVpcmUoJy4uLy4uL3N0b3Jlcy9tYXJrZXJpbmZvcm1hdGlvbi9leGFtaW5lcnN0b3JlJyk7XHJcbmltcG9ydCBlbnVtcyA9IHJlcXVpcmUoJy4uL3V0aWxpdHkvZW51bXMnKTtcclxuaW1wb3J0IHBvcHVwSGVscGVyID0gcmVxdWlyZSgnLi4vdXRpbGl0eS9wb3B1cC9wb3B1cGhlbHBlcicpO1xyXG5pbXBvcnQgc2NyaXB0SGVscGVyID0gcmVxdWlyZSgnLi4vLi4vdXRpbGl0eS9zY3JpcHQvc2NyaXB0aGVscGVyJyk7XHJcbmltcG9ydCBsb2NhbGVTdG9yZSA9IHJlcXVpcmUoJy4uLy4uL3N0b3Jlcy9sb2NhbGUvbG9jYWxlc3RvcmUnKTtcclxuaW1wb3J0IGNvbmZpZ3VyYWJsZUNoYXJhY3RlcmlzdGljc0hlbHBlciA9IHJlcXVpcmUoJy4uLy4uL3V0aWxpdHkvY29uZmlndXJhYmxlY2hhcmFjdGVyaXN0aWMvY29uZmlndXJhYmxlY2hhcmFjdGVyaXN0aWNzaGVscGVyJyk7XHJcbmltcG9ydCBjb25maWd1cmFibGVDaGFyYWN0ZXJpc3RpY3NOYW1lcyA9IHJlcXVpcmUoJy4uLy4uL3V0aWxpdHkvY29uZmlndXJhYmxlY2hhcmFjdGVyaXN0aWMvY29uZmlndXJhYmxlY2hhcmFjdGVyaXN0aWNzbmFtZXMnKTtcclxuaW1wb3J0IGV4Y2VwdGlvbkhlbHBlciA9IHJlcXVpcmUoJy4uL3V0aWxpdHkvZXhjZXB0aW9uL2V4Y2VwdGlvbmhlbHBlcicpO1xyXG5pbXBvcnQgbWVzc2FnaW5nQWN0aW9uQ3JlYXRvciA9IHJlcXVpcmUoJy4uLy4uL2FjdGlvbnMvbWVzc2FnaW5nL21lc3NhZ2luZ2FjdGlvbmNyZWF0b3InKTtcclxuaW1wb3J0IHBvcFVwRGlzcGxheUFjdGlvbkNyZWF0b3IgPSByZXF1aXJlKCcuLi8uLi9hY3Rpb25zL3BvcHVwZGlzcGxheS9wb3B1cGRpc3BsYXlhY3Rpb25jcmVhdG9yJyk7XHJcbmltcG9ydCByZXNwb25zZVN0b3JlID0gcmVxdWlyZSgnLi4vLi4vc3RvcmVzL3Jlc3BvbnNlL3Jlc3BvbnNlc3RvcmUnKTtcclxuaW1wb3J0IGNvbnN0YW50cyA9IHJlcXVpcmUoJy4uL3V0aWxpdHkvY29uc3RhbnRzJyk7XHJcbmltcG9ydCByZXNwb25zZUhlbHBlciA9IHJlcXVpcmUoJy4uL3V0aWxpdHkvcmVzcG9uc2VoZWxwZXIvcmVzcG9uc2VoZWxwZXInKTtcclxuaW1wb3J0IHRlYW1NYW5hZ2VtZW50U3RvcmUgPSByZXF1aXJlKCcuLi8uLi9zdG9yZXMvdGVhbW1hbmFnZW1lbnQvdGVhbW1hbmFnZW1lbnRzdG9yZScpO1xyXG5pbXBvcnQgY3VycmVudFF1ZXN0aW9uSXRlbUluZm8gPSByZXF1aXJlKCcuLi8uLi9hY3Rpb25zL21hcmtpbmcvY3VycmVudHF1ZXN0aW9uaXRlbWluZm8nKTtcclxuaW1wb3J0IGRldmljZUhlbHBlciA9IHJlcXVpcmUoJy4uLy4uL3V0aWxpdHkvdG91Y2gvZGV2aWNlaGVscGVyJyk7XHJcbmltcG9ydCBtYXJrZXJPcGVyYXRpb25Nb2RlRmFjdG9yeSA9IHJlcXVpcmUoJy4uL3V0aWxpdHkvbWFya2Vyb3BlcmF0aW9ubW9kZS9tYXJrZXJvcGVyYXRpb25tb2RlZmFjdG9yeScpO1xyXG5pbXBvcnQgdGVhbU1hbmFnZW1lbnRBY3Rpb25DcmVhdG9yID0gcmVxdWlyZSgnLi4vLi4vYWN0aW9ucy90ZWFtbWFuYWdlbWVudC90ZWFtbWFuYWdlbWVudGFjdGlvbmNyZWF0b3InKTtcclxuaW1wb3J0IG5hdmlnYXRpb25IZWxwZXIgPSByZXF1aXJlKCcuLi91dGlsaXR5L25hdmlnYXRpb24vbmF2aWdhdGlvbmhlbHBlcicpO1xyXG5pbXBvcnQgd29ya2xpc3RTdG9yZSA9IHJlcXVpcmUoJy4uLy4uL3N0b3Jlcy93b3JrbGlzdC93b3JrbGlzdHN0b3JlJyk7XHJcbmltcG9ydCBlQ291cnNlV29ya0ZpbGVTdG9yZSA9IHJlcXVpcmUoJy4uLy4uL3N0b3Jlcy9yZXNwb25zZS9kaWdpdGFsL2Vjb3Vyc2V3b3JrZmlsZXN0b3JlJyk7XHJcbmltcG9ydCBlQ291cnNld29ya0ZpbGUgPSByZXF1aXJlKCcuLi8uLi9zdG9yZXMvcmVzcG9uc2UvZGlnaXRhbC90eXBpbmdzL2NvdXJzZXdvcmtmaWxlJyk7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMgZXh0ZW5kcyBQcm9wc0Jhc2UsIExvY2FsZVNlbGVjdGlvbkJhc2Uge1xyXG4gICAgaXNPcGVuPzogYm9vbGVhbjtcclxuICAgIHJlc3BvbnNlSWQ/OiBudW1iZXI7XHJcbiAgICBxdWVzdGlvbklkPzogbnVtYmVyO1xyXG4gICAgY2xvc2VFeGNlcHRpb25QYW5lbDogRnVuY3Rpb247XHJcbiAgICBpc05ld0V4Y2VwdGlvbjogYm9vbGVhbjtcclxuICAgIGV4Y2VwdGlvbkRldGFpbHM6IEV4Y2VwdGlvbkRldGFpbHM7XHJcbiAgICBleGNlcHRpb25EYXRhOiBJbW11dGFibGUuTGlzdDxFeGNlcHRpb25EZXRhaWxzPjtcclxuICAgIGlzRXhjZXB0aW9uUGFuZWxWaXNpYmxlOiBib29sZWFuO1xyXG4gICAgaGFzVW5NYW5hZ2VkU0xBTzogYm9vbGVhbjtcclxuICAgIGN1cnJlbnRRdWVzdGlvbkl0ZW1JbmZvOiBjdXJyZW50UXVlc3Rpb25JdGVtSW5mbztcclxuICAgIGlzRnJvbU1lZGlhRXJyb3JEaWFsb2c6IGJvb2xlYW47XHJcbiAgICBleGNlcHRpb25Cb2R5OiBzdHJpbmc7XHJcbiAgICBoYXNVbm1hbmFnZWRJbWFnZVpvbmU6IGJvb2xlYW47XHJcbn1cclxuXHJcbmludGVyZmFjZSBTdGF0ZSB7XHJcbiAgICByZW5kZXJlZE9uPzogbnVtYmVyO1xyXG4gICAgc2hvd0V4Y2VwdGlvblR5cGVjbGFzc05hbWU/OiBzdHJpbmc7XHJcbiAgICBzZWxlY3RlZEV4Y2VwdGlvblR5cGVJZD86IG51bWJlcjtcclxuICAgIHNlbGVjdGVkRXhjZXB0aW9uRGVzY3JpcHRpb25JZD86IG51bWJlcjtcclxuICAgIHNlbGVjdGVkUmVsYXRlc1RvPzogbnVtYmVyO1xyXG4gICAgaXNTdWJtaXRCdXR0b25EaXNhYmxlZD86IGJvb2xlYW47XHJcbiAgICBleGNlcHRpb25Db21tZW50Pzogc3RyaW5nO1xyXG4gICAgaXNFeGNlcHRpb25UeXBlTWVudVNlbGVjdGVkPzogYm9vbGVhbjtcclxufVxyXG5cclxuXHJcbmNsYXNzIEV4Y2VwdGlvbiBleHRlbmRzIEV4Y2VwdGlvbkJhc2Uge1xyXG5cclxuXHJcbiAgICBwcml2YXRlIF9zY3JpcHRIZWxwZXI6IHNjcmlwdEhlbHBlcjtcclxuXHJcbiAgICAvLyBpbmRpY2F0ZXMgd2hldGhlciB0aGUgZXhlcHRpb250eXBlIGluZm9ybWF0aW9uIGlzIHZpc2libGVcclxuICAgIHByaXZhdGUgZXhjZXB0aW9uVHlwZUluZm9DbG9zZTogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgLy8gaW5kaWNhdGVzIHdoZXRoZXIgdGhlIGV4ZXB0aW9uIGFjdGlvbiBpcyBhdmFpbGFibGVcclxuICAgIHByaXZhdGUgaXNFeGNlcHRpb25BY3Rpb25BdmFpbGFibGU6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIC8vRXhjZXB0aW9uIHR5cGUgaWQgb2YgZXhjZXB0aW9uIGZpbGUgYWNjZXNzIGVycm9yXHJcbiAgICBwcml2YXRlIHNlbGVjdGVkRXhjZXB0aW9uVHlwZUlkOiBudW1iZXIgPSAyNTtcclxuICAgIC8vTWFya1NjaGVtZUdyb3VwTmFtZSBvZiBRaWcgaW4gV2hvbGUgUmVzcG9uc2VcclxuICAgIHByaXZhdGUgX21hcmtTY2hlbWVHcm91cE5hbWU6IHN0cmluZyA9IG51bGw7XHJcbiAgICAvL01hcmtTY2hlbWVHcm91cGlkIG9mIFFpZyBpbiBXaG9sZSBSZXNwb25zZVxyXG4gICAgcHJpdmF0ZSBfbWFya1NjaGVtZUdyb3VwSWQ6IG51bWJlciA9IHVuZGVmaW5lZDtcclxuICAgIC8vTWFya0dyb3VwaWQgb2YgUWlnIGluIFdob2xlIFJlc3BvbnNlXHJcbiAgICBwcml2YXRlIF9tYXJrR3JvdXBJZDogbnVtYmVyID0gdW5kZWZpbmVkO1xyXG4gICAgLy9FeGFtaW5lclJvbGVJZCBvZiBFeGFtaW5lciBpbiBRaWcgaW4gV2hvbGUgUmVzcG9uc2VcclxuICAgIHByaXZhdGUgX2V4YW1pbmVyUm9sZUlkOiBudW1iZXIgPSB1bmRlZmluZWQ7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb25zdHJ1Y3RvciBFeGNlcHRpb25cclxuICAgICAqIEBwYXJhbSBwcm9wc1xyXG4gICAgICogQHBhcmFtIHN0YXRlXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKHByb3BzOiBQcm9wcywgc3RhdGU6IFN0YXRlKSB7XHJcbiAgICAgICAgc3VwZXIocHJvcHMsIHN0YXRlKTtcclxuXHJcbiAgICAgICAgLy8gU2V0IHRoZSBkZWZhdWx0IHN0YXRlc1xyXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgICAgICAgIHJlbmRlcmVkT246IDAsXHJcbiAgICAgICAgICAgIHNob3dFeGNlcHRpb25UeXBlY2xhc3NOYW1lOiAnY2xvc2UnLFxyXG4gICAgICAgICAgICBpc1N1Ym1pdEJ1dHRvbkRpc2FibGVkOiB0cnVlLFxyXG4gICAgICAgICAgICBleGNlcHRpb25Db21tZW50OiAnJyxcclxuICAgICAgICAgICAgaXNFeGNlcHRpb25UeXBlTWVudVNlbGVjdGVkOiBmYWxzZVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuY29tbWVudENoYW5nZWQgPSB0aGlzLmNvbW1lbnRDaGFuZ2VkLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5zYXZlRXhjZXB0aW9uID0gdGhpcy5zYXZlRXhjZXB0aW9uLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5zaG93RXhjZXB0aW9uVHlwZSA9IHRoaXMuc2hvd0V4Y2VwdGlvblR5cGUuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLnNlbGVjdEV4Y2VwdGlvblR5cGUgPSB0aGlzLnNlbGVjdEV4Y2VwdGlvblR5cGUuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLnNob3dFeGNlcHRpb25EZXNjcmlwdGlvbiA9IHRoaXMuc2hvd0V4Y2VwdGlvbkRlc2NyaXB0aW9uLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5jbG9zZUV4Y2VwdGlvblBhbmVsID0gdGhpcy5jbG9zZUV4Y2VwdGlvblBhbmVsLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5vbkZvY3VzID0gdGhpcy5vbkZvY3VzLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5yZXNldFNjcm9sbCA9IHRoaXMucmVzZXRTY3JvbGwuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLm9uQWN0aW9uRXhjZXB0aW9uID0gdGhpcy5vbkFjdGlvbkV4Y2VwdGlvbi5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMucmVzZXRFeGNlcHRpb25QYW5lbCA9IHRoaXMucmVzZXRFeGNlcHRpb25QYW5lbC5iaW5kKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ29tcG9uZW50IGRpZCAgbW91bnRcclxuICAgICAqL1xyXG4gICAgcHVibGljIGNvbXBvbmVudERpZE1vdW50KCkge1xyXG4gICAgICAgIGV4Y2VwdGlvblN0b3JlLmluc3RhbmNlLmFkZExpc3RlbmVyKGV4Y2VwdGlvblN0b3JlLkV4Y2VwdGlvblN0b3JlLkNMT1NFX0VYQ0VQVElPTl9XSU5ET1csIHRoaXMub25FeGNlcHRpb25QYW5lbENsb3NlKTtcclxuICAgICAgICBleGNlcHRpb25TdG9yZS5pbnN0YW5jZS5hZGRMaXN0ZW5lcihleGNlcHRpb25TdG9yZS5FeGNlcHRpb25TdG9yZS5FWENFUFRJT05fRElTQ0FSRF9QT1BVUF9ESVNQTEFZX0VWRU5ULCB0aGlzLm9uUG9wVXBEaXNwbGF5RXZlbnQpO1xyXG4gICAgICAgIGV4Y2VwdGlvblN0b3JlLmluc3RhbmNlLmFkZExpc3RlbmVyKGV4Y2VwdGlvblN0b3JlLkV4Y2VwdGlvblN0b3JlLk9QRU5fRVhDRVBUSU9OX1dJTkRPVywgdGhpcy5yZXNldEV4Y2VwdGlvblBhbmVsKTtcclxuICAgICAgICBleGNlcHRpb25TdG9yZS5pbnN0YW5jZS5hZGRMaXN0ZW5lcihleGNlcHRpb25TdG9yZS5FeGNlcHRpb25TdG9yZS5SQUlTRV9FWENFUFRJT04sIHRoaXMucmFpc2VFeGNlcHRpb24pO1xyXG4gICAgICAgIGV4Y2VwdGlvblN0b3JlLmluc3RhbmNlLmFkZExpc3RlbmVyKGV4Y2VwdGlvblN0b3JlLkV4Y2VwdGlvblN0b3JlLkNMT1NFX0VYQ0VQVElPTiwgdGhpcy5jbG9zZUV4Y2VwdGlvblBhbmVsKTtcclxuICAgICAgICBleGNlcHRpb25TdG9yZS5pbnN0YW5jZS5hZGRMaXN0ZW5lcihleGNlcHRpb25TdG9yZS5FeGNlcHRpb25TdG9yZS5FWENFUFRJT05fVFlQRV9TQ1JPTExfUkVTRVRfQUNUSU9OLCB0aGlzLnJlc2V0U2Nyb2xsKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbXBvbmV0IHdpbGwgdW5tb3VudFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XHJcbiAgICAgICAgZXhjZXB0aW9uU3RvcmUuaW5zdGFuY2UucmVtb3ZlTGlzdGVuZXIoZXhjZXB0aW9uU3RvcmUuRXhjZXB0aW9uU3RvcmUuQ0xPU0VfRVhDRVBUSU9OX1dJTkRPVywgdGhpcy5vbkV4Y2VwdGlvblBhbmVsQ2xvc2UpO1xyXG4gICAgICAgIGV4Y2VwdGlvblN0b3JlLmluc3RhbmNlLnJlbW92ZUxpc3RlbmVyKGV4Y2VwdGlvblN0b3JlLkV4Y2VwdGlvblN0b3JlLkVYQ0VQVElPTl9ESVNDQVJEX1BPUFVQX0RJU1BMQVlfRVZFTlQsXHJcbiAgICAgICAgICAgIHRoaXMub25Qb3BVcERpc3BsYXlFdmVudCk7XHJcbiAgICAgICAgaWYgKGV4Y2VwdGlvblN0b3JlLmluc3RhbmNlLmV4Y2VwdGlvblZpZXdBY3Rpb24gIT09IGVudW1zLkV4Y2VwdGlvblZpZXdBY3Rpb24uTm9uZSkge1xyXG4gICAgICAgICAgICBleGNlcHRpb25hY3Rpb25DcmVhdG9yLmV4Y2VwdGlvbldpbmRvd0FjdGlvbihlbnVtcy5FeGNlcHRpb25WaWV3QWN0aW9uLk5vbmUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBleGNlcHRpb25TdG9yZS5pbnN0YW5jZS5yZW1vdmVMaXN0ZW5lcihleGNlcHRpb25TdG9yZS5FeGNlcHRpb25TdG9yZS5PUEVOX0VYQ0VQVElPTl9XSU5ET1csIHRoaXMucmVzZXRFeGNlcHRpb25QYW5lbCk7XHJcbiAgICAgICAgZXhjZXB0aW9uU3RvcmUuaW5zdGFuY2UucmVtb3ZlTGlzdGVuZXIoZXhjZXB0aW9uU3RvcmUuRXhjZXB0aW9uU3RvcmUuUkFJU0VfRVhDRVBUSU9OLCB0aGlzLnJhaXNlRXhjZXB0aW9uKTtcclxuICAgICAgICBleGNlcHRpb25TdG9yZS5pbnN0YW5jZS5yZW1vdmVMaXN0ZW5lcihleGNlcHRpb25TdG9yZS5FeGNlcHRpb25TdG9yZS5DTE9TRV9FWENFUFRJT04sIHRoaXMuY2xvc2VFeGNlcHRpb25QYW5lbCk7XHJcbiAgICAgICAgZXhjZXB0aW9uU3RvcmUuaW5zdGFuY2UucmVtb3ZlTGlzdGVuZXIoZXhjZXB0aW9uU3RvcmUuRXhjZXB0aW9uU3RvcmUuRVhDRVBUSU9OX1RZUEVfU0NST0xMX1JFU0VUX0FDVElPTiwgdGhpcy5yZXNldFNjcm9sbCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb21wb25lbnQgZGlkIHVwZGF0ZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgY29tcG9uZW50RGlkVXBkYXRlKCkge1xyXG4gICAgICAgIC8vd2hlbiBleGNlcHRpb24gaXMgcmFpc2VkIGZyb20gZXJyb3IgZGlhbG9nLCB0aGVuIHRoZSBFbnRpcmUgUmVzcG9uc2UgcmFkaW8gYnV0dG9uIHNob3VsZCBiZSBzZWxlY3RlZCBieSBkZWZhdWx0XHJcbiAgICAgICAgLy9zbyBzZXR0aW5nIHNlbGVjdGVkUmVsYXRlc1RvIHRvIDBcclxuICAgICAgICBpZiAodGhpcy5wcm9wcy5pc0Zyb21NZWRpYUVycm9yRGlhbG9nICYmIHRoaXMuc3RhdGUuc2VsZWN0ZWRSZWxhdGVzVG8gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkUmVsYXRlc1RvOiAwXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlbmRlciBtZXRob2RcclxuICAgICAqL1xyXG4gICAgcHVibGljIHJlbmRlcigpOiBKU1guRWxlbWVudCB7XHJcbiAgICAgICAgbGV0IHBhbmVsQ29udGVudDogSlNYLkVsZW1lbnQ7XHJcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuZXhjZXB0aW9uRGF0YSAmJiB0aGlzLnByb3BzLmV4Y2VwdGlvbkRhdGEgIT09IG51bGxcclxuICAgICAgICAgICAgJiYgIW1hcmtlck9wZXJhdGlvbk1vZGVGYWN0b3J5Lm9wZXJhdGlvbk1vZGUuaXNTdGFuZGFyZGlzYXRpb25TZXR1cE1vZGUpIHtcclxuICAgICAgICAgICAgcGFuZWxDb250ZW50ID0gdGhpcy5leGNlcHRpb25QYW5lbENvbnRlbnQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPGRpdiBpZD0ncmVzcG9uc2VFeGNlcHRpb25Db250YWluZXInIGNsYXNzTmFtZT0ncmVzcG9uc2UtbWVzc2FnZSByZXNwb25zZS1leGNlcHRpb24tY29udGFpbmVyJz5cclxuICAgICAgICAgICAgICAgIHt0aGlzLnJlbmRlckV4Y2VwdGlvbkhlYWRlcigpfVxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J21lc3NhZ2luZy1jb250ZW50Jz5cclxuICAgICAgICAgICAgICAgICAgICB7cGFuZWxDb250ZW50fVxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgdGhlIGV4Y2VwdGlvbiBkZXRhaWxzXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZ2V0RXhjZXB0aW9uRGF0YSA9ICgpID0+IHtcclxuICAgICAgICAvL1RPRE8gLS0gVXNlIHRoZSBtZXRob2QgaW4gc3RvcmUgdG8gZ2V0IHNlbGVjdGVkQXVkaW9WaWRlbyBmaWxlc1xyXG4gICAgICAgIGxldCBzZWxlY3RlZEVDb3Vyc2VXb3JrRmlsZXMgPSBlQ291cnNlV29ya0ZpbGVTdG9yZS5pbnN0YW5jZS5nZXRTZWxlY3RlZEVDb3Vyc2VXb3JrRmlsZXMoKTtcclxuICAgICAgICBsZXQgc2VsZWN0ZWRGaWxlID0gKHNlbGVjdGVkRUNvdXJzZVdvcmtGaWxlcykgPyBzZWxlY3RlZEVDb3Vyc2VXb3JrRmlsZXMuZmlsdGVyKCh4OiBlQ291cnNld29ya0ZpbGUpID0+XHJcbiAgICAgICAgICAgICh4LmxpbmtEYXRhLm1lZGlhVHlwZSA9PT0gZW51bXMuTWVkaWFUeXBlLlZpZGVvIHx8IHgubGlua0RhdGEubWVkaWFUeXBlID09PSBlbnVtcy5NZWRpYVR5cGUuQXVkaW8pKS5maXJzdCgpIDogdW5kZWZpbmVkO1xyXG4gICAgICAgIGxldCBmaWxlbmFtZSA9IHNlbGVjdGVkRmlsZS50aXRsZTtcclxuICAgICAgICBsZXQgY3VycmVudGx5U2VsZWN0ZWRFeGNlcHRpb25UeXBlOiBFeGNlcHRpb25UeXBlRGV0YWlscyA9IHRoaXMuZ2V0RXhjZXB0aW9uVHlwZURldGFpbHModGhpcy5zZWxlY3RlZEV4Y2VwdGlvblR5cGVJZC50b1N0cmluZygpKTtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgc2VsZWN0ZWRFeGNlcHRpb25UeXBlSWQ6IHRoaXMuc2VsZWN0ZWRFeGNlcHRpb25UeXBlSWQsXHJcbiAgICAgICAgICAgIGV4Y2VwdGlvbkNvbW1lbnQ6IGZpbGVuYW1lICsgJ1xcblxcbicgKyB0aGlzLnByb3BzLmV4Y2VwdGlvbkJvZHkucmVwbGFjZSgvPGJyXFwvPi9nLCAnJyksXHJcbiAgICAgICAgICAgIGlzU3VibWl0QnV0dG9uRGlzYWJsZWQ6IChjdXJyZW50bHlTZWxlY3RlZEV4Y2VwdGlvblR5cGUpID8gZmFsc2UgOiB0cnVlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZW5kZXIgRXhjZXB0aW9uIEhlYWRlci5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSByZW5kZXJFeGNlcHRpb25IZWFkZXIoKTogSlNYLkVsZW1lbnQge1xyXG4gICAgICAgIGxldCBoZWFkZXJEZXRhaWxzO1xyXG4gICAgICAgIGlmICh0aGlzLnByb3BzLmlzTmV3RXhjZXB0aW9uIHx8ICF0aGlzLnByb3BzLmlzRXhjZXB0aW9uUGFuZWxWaXNpYmxlKSB7XHJcbiAgICAgICAgICAgIGhlYWRlckRldGFpbHMgPSAoXHJcbiAgICAgICAgICAgICAgICA8aDMgaWQ9J3BvcHVwMlRpdGxlRXhjZXB0aW9uJyBjbGFzc05hbWU9J3NoaWZ0LWxlZnQgY29tcC1tc2ctdGl0bGUnPlxyXG4gICAgICAgICAgICAgICAgICAgIHtsb2NhbGVTdG9yZS5pbnN0YW5jZS5UcmFuc2xhdGVUZXh0KCdtYXJraW5nLnJlc3BvbnNlLmV4Y2VwdGlvbi1saXN0LXBhbmVsLnJhaXNlLW5ldy1leGNlcHRpb24nKX1cclxuICAgICAgICAgICAgICAgIDwvaDM+KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBoZWFkZXJEZXRhaWxzID0gKDxoMyBpZD0ncG9wdXAyVGl0bGVFeGNlcHRpb24nIGNsYXNzTmFtZT0nc2hpZnQtbGVmdCBjb21wLW1zZy10aXRsZSc+XHJcbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J2V4Y2VwdGlvbmlkLWxhYmVsJz5cclxuICAgICAgICAgICAgICAgICAgICB7bG9jYWxlU3RvcmUuaW5zdGFuY2UuVHJhbnNsYXRlVGV4dCgnbWFya2luZy5yZXNwb25zZS52aWV3LWV4Y2VwdGlvbi1wYW5lbC5oZWFkZXInKX1cclxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0nZXhjZXB0aW9uaWQtY29sb24nPjogPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSdleGNlcHRpb24taWQnPntjb25zdGFudHMuRVhDRVBUSU9OX0lEX1BSRUZJWCArIHRoaXMucHJvcHMuZXhjZXB0aW9uRGV0YWlscy51bmlxdWVJZH08L3NwYW4+PC9oMz4pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncmVzcG9uc2UtbXNnLWhlYWRlciBjbGVhcmZpeCc+XHJcbiAgICAgICAgICAgICAgICB7aGVhZGVyRGV0YWlsc31cclxuICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLmlzTmV3RXhjZXB0aW9uIHx8ICF0aGlzLnByb3BzLmlzRXhjZXB0aW9uUGFuZWxWaXNpYmxlID9cclxuICAgICAgICAgICAgICAgICAgICAoPGRpdiBpZD0nZXhjZXB0aW9uX3N1Ym1pdF9idG4nIGNsYXNzTmFtZT0nc2hpZnQtbGVmdCBjb21wLW1zZy1idXRvbnMnPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSdzdWJtaXRfZXhjZXB0aW9uJyBjbGFzc05hbWU9J2J1dHRvbiBwcmltYXJ5IHJvdW5kZWQnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17bG9jYWxlU3RvcmUuaW5zdGFuY2UuVHJhbnNsYXRlVGV4dCgnbWFya2luZy5yZXNwb25zZS5yYWlzZS1leGNlcHRpb24tcGFuZWwuc3VibWl0LWJ1dHRvbicpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5zYXZlRXhjZXB0aW9ufSBkaXNhYmxlZD17dGhpcy5zdGF0ZS5pc1N1Ym1pdEJ1dHRvbkRpc2FibGVkfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsb2NhbGVTdG9yZS5pbnN0YW5jZS5UcmFuc2xhdGVUZXh0KCdtYXJraW5nLnJlc3BvbnNlLnJhaXNlLWV4Y2VwdGlvbi1wYW5lbC5zdWJtaXQtYnV0dG9uJyl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PikgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAge3RlYW1NYW5hZ2VtZW50U3RvcmUuaW5zdGFuY2UuaXNSZWRpcmVjdEZyb21FeGNlcHRpb24gJiYgdGhpcy5wcm9wcy5pc0V4Y2VwdGlvblBhbmVsVmlzaWJsZSA/XHJcbiAgICAgICAgICAgICAgICAgICAgKDxidXR0b24gaWQ9J2JhY2tfdG9fZXhjZXB0aW9uX2J0bicgY2xhc3NOYW1lPSdyb3VuZGVkIGJhY2stZXhjZXB0aW9uLWJ0biBsaWdodCdcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2xvY2FsZVN0b3JlLmluc3RhbmNlLlRyYW5zbGF0ZVRleHQoJ2dlbmVyaWMucmVzcG9uc2UuZXhjZXB0aW9uLXBhbmVsLmJhY2stdG8tZXhjZXB0aW9ucycpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLm5hdmlnYXRldG9FeGNlcHRpb25MaXN0fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAge2xvY2FsZVN0b3JlLmluc3RhbmNlLlRyYW5zbGF0ZVRleHQoJ2dlbmVyaWMucmVzcG9uc2UuZXhjZXB0aW9uLXBhbmVsLmJhY2stdG8tZXhjZXB0aW9ucycpfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPikgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3NoaWZ0LXJpZ2h0IG1pbmltaXplLW1lc3NhZ2UnPlxyXG4gICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzTmFtZT0nbWluaW1pemUtbWVzc2FnZS1saW5rJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17bG9jYWxlU3RvcmUuaW5zdGFuY2UuVHJhbnNsYXRlVGV4dCgnbWVzc2FnaW5nLmNvbXBvc2UtbWVzc2FnZS5taW5pbWlzZS1pY29uLXRvb2x0aXAnKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5vbk1pbmltaXplfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSdtaW5pbWl6ZS1pY29uIGxpdGUnPk1pbmltaXplPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgICAgICAgICA8YSBjbGFzc05hbWU9J21heGltaXplLW1lc3NhZ2UtbGluaydcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2xvY2FsZVN0b3JlLmluc3RhbmNlLlRyYW5zbGF0ZVRleHQoJ21lc3NhZ2luZy5jb21wb3NlLW1lc3NhZ2UubWF4aW1pc2UtaWNvbi10b29sdGlwJyl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMub25NYXhpbWl6ZX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0nbWF4bWl6ZS1pY29uIGxpdGUnPjwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICA8L2E+XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAhdGVhbU1hbmFnZW1lbnRTdG9yZS5pbnN0YW5jZS5pc1JlZGlyZWN0RnJvbUV4Y2VwdGlvbiA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBjbGFzc05hbWU9J2Nsb3NlLW1lc3NhZ2UtbGluaydcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17bG9jYWxlU3RvcmUuaW5zdGFuY2UuVHJhbnNsYXRlVGV4dCgnbWVzc2FnaW5nLmNvbXBvc2UtbWVzc2FnZS5jbG9zZS1pY29uLXRvb2x0aXAnKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLmNsb3NlRXhjZXB0aW9uUGFuZWx9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0nY2xvc2UtaWNvbiBsaXRlJz5DbG9zZTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYT4gOiBudWxsXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY2xvc2VFeGNlcHRpb25QYW5lbCA9ICgpID0+IHtcclxuICAgICAgICAvLyBJbm9yZGVyIHRvIGV4Y2x1ZGUgdGhlICdvcGVuJyBvciAnY2xhc3MnIGZyb20gdGhlIGV4Y2VwdGlvbiB0eXBlIGRpdi5cclxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5zZWxlY3RlZEV4Y2VwdGlvblR5cGVJZCA9PT0gdW5kZWZpbmVkICYmIHRoaXMuc3RhdGUuZXhjZXB0aW9uQ29tbWVudCA9PT0gJycpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICBpc0V4Y2VwdGlvblR5cGVNZW51U2VsZWN0ZWQ6IGZhbHNlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnByb3BzLmNsb3NlRXhjZXB0aW9uUGFuZWwoKTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZW5kZXIgRXhjZXB0aW9uIENvbnRlbnQuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZXhjZXB0aW9uUGFuZWxDb250ZW50KCk6IEpTWC5FbGVtZW50IHtcclxuICAgICAgICBsZXQgZXhjZXB0aW9uUmVsYXRlV3JhcCA9ICh0aGlzLnByb3BzLmhhc1VuTWFuYWdlZFNMQU8gfHwgdGhpcy5wcm9wcy5oYXNVbm1hbmFnZWRJbWFnZVpvbmUpXHJcbiAgICAgICAgICAgID8gbnVsbCA6XHJcbiAgICAgICAgICAgICg8ZGl2IGlkPSdleGNlcHRpb25SZWxhdGVXcmFwJyBjbGFzc05hbWU9J2V4Y2VwdGlvbi1yZWxhdGUtd3JhcCc+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZGltLXRleHQgZXhjZXB0aW9uLXJlbGF0ZS1sYWJlbCc+XHJcbiAgICAgICAgICAgICAgICAgICAge2xvY2FsZVN0b3JlLmluc3RhbmNlLlRyYW5zbGF0ZVRleHQoJ21hcmtpbmcucmVzcG9uc2UucmFpc2UtZXhjZXB0aW9uLXBhbmVsLmV4Y2VwdGlvbi1yZWxhdGVzLXRvLWxhYmVsJyl9IDwvZGl2PlxyXG4gICAgICAgICAgICAgICAge3RoaXMucmVuZGVyRXhjZXB0aW9uUmVsYXRlc1RvKCl9XHJcbiAgICAgICAgICAgIDwvZGl2Pik7XHJcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuaXNOZXdFeGNlcHRpb24gfHwgIXRoaXMucHJvcHMuaXNFeGNlcHRpb25QYW5lbFZpc2libGUpIHtcclxuICAgICAgICAgICAgbGV0IG5ld0V4Y2VwdGlvblN1YlRpdGxlID0gKHRoaXMucHJvcHMuaGFzVW5NYW5hZ2VkU0xBTyB8fCB0aGlzLnByb3BzLmhhc1VubWFuYWdlZEltYWdlWm9uZSlcclxuICAgICAgICAgICAgICAgID8gbG9jYWxlU3RvcmUuaW5zdGFuY2UuVHJhbnNsYXRlVGV4dCgnbWFya2luZy5yZXNwb25zZS5yYWlzZS1leGNlcHRpb24tcGFuZWwubmV3LWV4Y2VwdGlvbi1zdWJ0aXRsZS1oYXMtdW5tYW5hZ2Vkc2xhbycpXHJcbiAgICAgICAgICAgICAgICA6IGxvY2FsZVN0b3JlLmluc3RhbmNlLlRyYW5zbGF0ZVRleHQoJ21hcmtpbmcucmVzcG9uc2UucmFpc2UtZXhjZXB0aW9uLXBhbmVsLmV4Y2VwdGlvbi10eXBlLWxhYmVsJyk7XHJcbiAgICAgICAgICAgIHJldHVybiAoPGRpdiBjbGFzc05hbWU9J2V4Y2VwdGlvbi13cmFwcGVyJz5cclxuICAgICAgICAgICAgICAgIHtleGNlcHRpb25SZWxhdGVXcmFwfVxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2V4Y2VwdGlvbi10eXBlLW1lbnUtd3JhcCBjbGVhcmZpeCc+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2V4Y2VwdGlvbi1yZWFzb24tbGFiZWwgZGltLXRleHQnPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7bmV3RXhjZXB0aW9uU3ViVGl0bGV9XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAge3RoaXMucmVuZGVyRXhjZXB0aW9uVHlwZXMoKX1cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAge3RoaXMucmVuZGVyRXhjZXB0aW9uTWVzc2FnZSgpfVxyXG4gICAgICAgICAgICA8L2Rpdj4pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmlzRXhjZXB0aW9uQWN0aW9uQXZhaWxhYmxlID0gbWFya2VyT3BlcmF0aW9uTW9kZUZhY3Rvcnkub3BlcmF0aW9uTW9kZS5pc1RlYW1NYW5hZ2VtZW50TW9kZSAmJlxyXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5leGNlcHRpb25EZXRhaWxzLmN1cnJlbnRTdGF0dXMgPT09IGVudW1zLkV4Y2VwdGlvblN0YXR1cy5PcGVuICYmXHJcbiAgICAgICAgICAgICAgICBleGFtaW5lclN0b3JlLmluc3RhbmNlLmdldE1hcmtlckluZm9ybWF0aW9uLmV4YW1pbmVySWQgPT09IHRoaXMucHJvcHMuZXhjZXB0aW9uRGV0YWlscy5vd25lckV4YW1pbmVySWQ7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gKDxkaXYgY2xhc3NOYW1lPSdleGNlcHRpb24td3JhcHBlcic+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZXhjZXB0aW9uLWRldGFpbC13cmFwcGVyJz5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgPEV4Y2VwdGlvblR5cGVJbmZvXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkPXsnZXhjZXB0aW9uLWluZm8nfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk9eydleGNlcHRpb24taW5mbyd9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkTGFuZ3VhZ2U9e3RoaXMucHJvcHMuc2VsZWN0ZWRMYW5ndWFnZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhjZXB0aW9uVHlwZUlkPXt0aGlzLnByb3BzLmV4Y2VwdGlvbkRldGFpbHMuZXhjZXB0aW9uVHlwZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzPXt0aGlzLnByb3BzLmV4Y2VwdGlvbkRldGFpbHMuY3VycmVudFN0YXR1c31cclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFya1NjaGVtZUlkPXt0aGlzLnByb3BzLmV4Y2VwdGlvbkRldGFpbHMubWFya1NjaGVtZUlEfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkFjdGlvbkV4Y2VwdGlvbj17dGhpcy5vbkFjdGlvbkV4Y2VwdGlvbn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNFeGNlcHRpb25BY3Rpb25BdmFpbGFibGU9e3RoaXMuaXNFeGNlcHRpb25BY3Rpb25BdmFpbGFibGV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsdGVybmF0aXZlRXNjYWxhdGlvblBvaW50PXt0aGlzLnByb3BzLmV4Y2VwdGlvbkRldGFpbHMuYWx0ZXJuYXRpdmVFc2NhbGF0aW9uUG9pbnR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzUEU9e3FpZ1N0b3JlLmluc3RhbmNlLmdldFNlbGVjdGVkUUlHRm9yVGhlTG9nZ2VkSW5Vc2VyICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxaWdTdG9yZS5pbnN0YW5jZS5nZXRTZWxlY3RlZFFJR0ZvclRoZUxvZ2dlZEluVXNlci5yb2xlID09PSBlbnVtcy5FeGFtaW5lclJvbGUucHJpbmNpcGFsRXhhbWluZXJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXN0aW9uTmFtZT17dGhpcy5wcm9wcy5leGNlcHRpb25EZXRhaWxzLm1hcmtTY2hlbWVJRCA9PT0gMCA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAocmVzcG9uc2VTdG9yZS5pbnN0YW5jZS5pc1dob2xlUmVzcG9uc2UgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHFpZ1N0b3JlLmluc3RhbmNlLmdldE1hcmtTY2hlbWVHcm91cE5hbWUodGhpcy5wcm9wcy5leGNlcHRpb25EZXRhaWxzLm1hcmtTY2hlbWVHcm91cElEKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogJ0VudGlyZSByZXNwb25zZScpIDogbWFya2luZ1N0b3JlLmluc3RhbmNlLnRvb2xUaXAodGhpcy5wcm9wcy5leGNlcHRpb25EZXRhaWxzLm1hcmtTY2hlbWVJRCl9IC8+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHt0aGlzLnJlbmRlckV4Y2VwdGlvbkNvbW1lbnRIaXN0b3J5KCl9XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZW5kZXIgRXhjZXB0aW9uIFR5cGVzLlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHJlbmRlckV4Y2VwdGlvblR5cGVzKCk6IEpTWC5FbGVtZW50IHtcclxuICAgICAgICBsZXQgZHJvcGRvd25jbGFzc05hbWUgPSAnZHJvcGRvd24td3JhcCBleGNlcHRpb24tdHlwZSBvcHRpb24tbWVudS13cmFwIHNoaWZ0LWxlZnQgJyArXHJcbiAgICAgICAgICAgICh0aGlzLnN0YXRlLmlzRXhjZXB0aW9uVHlwZU1lbnVTZWxlY3RlZCA/IHRoaXMuc3RhdGUuc2hvd0V4Y2VwdGlvblR5cGVjbGFzc05hbWUgOiAnJyk7XHJcbiAgICAgICAgbGV0IGV4Y2VwdGlvblR5cGVEZXNjcmlwdGlvbjogc3RyaW5nID0gJyc7XHJcbiAgICAgICAgbGV0IGlzRGlzYWJsZWQ6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgICAgICBsZXQgZXhjZXB0aW9uVHlwZXMgPSBleGNlcHRpb25IZWxwZXIuc29ydEV4Y2VwdGlvblR5cGVzKGV4Y2VwdGlvblN0b3JlLmluc3RhbmNlLmdldEV4Y2VwdGlvblR5cGVzKTtcclxuICAgICAgICBsZXQgYmxvY2tlckRlc2NyaXB0aW9uOiBzdHJpbmc7XHJcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuaGFzVW5NYW5hZ2VkU0xBTykge1xyXG4gICAgICAgICAgICAvLyBmb3IgU0xBTyB1bm1hbmFnZWQgc2NlbmFyaW8sIGV4cGVjdGlvbiB0eXBlIHJlbGF0ZWQgdG8gdGhlIFNlbGVjdGVkIFFJRyBzaG91bGQgYmUgZGlzcGxheWVkLlxyXG4gICAgICAgICAgICB0aGlzLl9tYXJrU2NoZW1lR3JvdXBJZCA9IHFpZ1N0b3JlLmluc3RhbmNlLnNlbGVjdGVkUUlHRm9yTWFya2VyT3BlcmF0aW9uLm1hcmtTY2hlbWVHcm91cElkO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5jdXJyZW50UXVlc3Rpb25JdGVtSW5mbyAmJlxyXG4gICAgICAgICAgICB0aGlzLnByb3BzLmN1cnJlbnRRdWVzdGlvbkl0ZW1JbmZvLm1hcmtTY2hlbWVHcm91cElkICYmXHJcbiAgICAgICAgICAgIHRoaXMuX21hcmtTY2hlbWVHcm91cElkID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5fbWFya1NjaGVtZUdyb3VwSWQgPSB0aGlzLnByb3BzLmN1cnJlbnRRdWVzdGlvbkl0ZW1JbmZvLm1hcmtTY2hlbWVHcm91cElkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgdG9SZW5kZXIgPSBleGNlcHRpb25UeXBlcy5tYXAoKGV4Y2VwdGlvblR5cGU6IEV4Y2VwdGlvblR5cGVEZXRhaWxzLCBpbmRleDogbnVtYmVyKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChleGNlcHRpb25UeXBlLm1hcmtTY2hlbWVHcm91cElkID09PSB0aGlzLl9tYXJrU2NoZW1lR3JvdXBJZCkge1xyXG4gICAgICAgICAgICAgICAgZXhjZXB0aW9uVHlwZURlc2NyaXB0aW9uID0gJyc7XHJcbiAgICAgICAgICAgICAgICBpc0Rpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAvLyBEaXNhYmxlIGFscmVhZHkgcmFpc2VkIGV4Y2VwdGlvbi5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLmV4Y2VwdGlvbkRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmV4Y2VwdGlvbkRhdGEubWFwKChkYXRhOiBFeGNlcHRpb25EZXRhaWxzLCBpbmRleDogbnVtYmVyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlLnNlbGVjdGVkUmVsYXRlc1RvID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5tYXJrU2NoZW1lSUQgPT09IDAgJiYgZXhjZXB0aW9uVHlwZS5leGNlcHRpb25UeXBlID09PSBkYXRhLmV4Y2VwdGlvblR5cGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiBkYXRhLmN1cnJlbnRTdGF0dXMgIT09IGVudW1zLkV4Y2VwdGlvblN0YXR1cy5DbG9zZWQgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLm1hcmtTY2hlbWVHcm91cElEID09PSBleGNlcHRpb25UeXBlLm1hcmtTY2hlbWVHcm91cElkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhjZXB0aW9uVHlwZURlc2NyaXB0aW9uID0gbG9jYWxlU3RvcmUuaW5zdGFuY2UuVHJhbnNsYXRlVGV4dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoJ21hcmtpbmcucmVzcG9uc2UucmFpc2UtZXhjZXB0aW9uLXBhbmVsLm9wZW4tZXhjZXB0aW9uLWV4aXN0cy1hZ2FpbnN0LXJlc3BvbnNlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNEaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5tYXJrU2NoZW1lSUQgPT09IDAgJiYgZXhjZXB0aW9uVHlwZS5leGNlcHRpb25UeXBlID09PSBkYXRhLmV4Y2VwdGlvblR5cGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiBkYXRhLmN1cnJlbnRTdGF0dXMgIT09IGVudW1zLkV4Y2VwdGlvblN0YXR1cy5DbG9zZWQgJiYgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLm1hcmtTY2hlbWVHcm91cElEID09PSBleGNlcHRpb25UeXBlLm1hcmtTY2hlbWVHcm91cElkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHx8IHRoaXMucHJvcHMuaGFzVW5NYW5hZ2VkU0xBTyB8fCB0aGlzLnByb3BzLmhhc1VubWFuYWdlZEltYWdlWm9uZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGNlcHRpb25UeXBlRGVzY3JpcHRpb24gPSBsb2NhbGVTdG9yZS5pbnN0YW5jZS5UcmFuc2xhdGVUZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgnbWFya2luZy5yZXNwb25zZS5yYWlzZS1leGNlcHRpb24tcGFuZWwub3Blbi1leGNlcHRpb24tZXhpc3RzLWFnYWluc3QtcmVzcG9uc2UnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0Rpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS5tYXJrU2NoZW1lSUQgPT09IHRoaXMuX3F1ZXN0aW9uSWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiBleGNlcHRpb25UeXBlLmV4Y2VwdGlvblR5cGUgPT09IGRhdGEuZXhjZXB0aW9uVHlwZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmIGRhdGEuY3VycmVudFN0YXR1cyAhPT0gZW51bXMuRXhjZXB0aW9uU3RhdHVzLkNsb3NlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2VwdGlvblR5cGVEZXNjcmlwdGlvbiA9IGxvY2FsZVN0b3JlLmluc3RhbmNlLlRyYW5zbGF0ZVRleHRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKCdtYXJraW5nLnJlc3BvbnNlLnJhaXNlLWV4Y2VwdGlvbi1wYW5lbC5vcGVuLWV4Y2VwdGlvbi1leGlzdHMtYWdhaW5zdC1xdWVzdGlvbicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzRGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgYmxvY2tlckRlc2NyaXB0aW9uID0gZXhjZXB0aW9uSGVscGVyLmdldEV4Y2VwdGlvbkRlc2NyaXB0aW9uKGV4Y2VwdGlvblR5cGUsXHJcbiAgICAgICAgICAgICAgICAgICAgZXhjZXB0aW9uU3RvcmUuaW5zdGFuY2UuaXNFeGNlcHRpb25CbG9ja2VyKGV4Y2VwdGlvblR5cGUuZXhjZXB0aW9uVHlwZSkpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiA8RHJvcERvd25FeGNlcHRpb25cclxuICAgICAgICAgICAgICAgICAgICBpZD17ZXhjZXB0aW9uVHlwZS5leGNlcHRpb25UeXBlfVxyXG4gICAgICAgICAgICAgICAgICAgIGtleT17ZXhjZXB0aW9uVHlwZS5leGNlcHRpb25UeXBlLnRvU3RyaW5nKCl9XHJcbiAgICAgICAgICAgICAgICAgICAgaXNPcGVuPXtwYXJzZUludCh0aGlzLnN0YXRlLnNlbGVjdGVkRXhjZXB0aW9uRGVzY3JpcHRpb25JZCkgPT09IGV4Y2VwdGlvblR5cGUuZXhjZXB0aW9uVHlwZX1cclxuICAgICAgICAgICAgICAgICAgICBpc0NoZWNrZWQ9e3BhcnNlSW50KHRoaXMuc3RhdGUuc2VsZWN0ZWRFeGNlcHRpb25UeXBlSWQpID09PSBleGNlcHRpb25UeXBlLmV4Y2VwdGlvblR5cGV9XHJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5zZWxlY3RFeGNlcHRpb25UeXBlfVxyXG4gICAgICAgICAgICAgICAgICAgIHNob3dFeGNlcHRpb25EZXNjPXt0aGlzLnNob3dFeGNlcHRpb25EZXNjcmlwdGlvbn1cclxuICAgICAgICAgICAgICAgICAgICBpc0Rpc2FibGVkPXtpc0Rpc2FibGVkfVxyXG4gICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uPXtleGNlcHRpb25UeXBlRGVzY3JpcHRpb259XHJcbiAgICAgICAgICAgICAgICAgICAgYmxvY2tlckRlc2NyaXB0aW9uPXtibG9ja2VyRGVzY3JpcHRpb259XHJcbiAgICAgICAgICAgICAgICAvPjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGxldCBkcm9wZG93blRleHQgPSAnJztcclxuICAgICAgICBsZXQgc2VsZWN0ZWRFeGNlcHRpb25UeXBlOiBFeGNlcHRpb25UeXBlRGV0YWlscyA9IHRoaXMuZ2V0RXhjZXB0aW9uVHlwZURldGFpbHModGhpcy5zdGF0ZS5zZWxlY3RlZEV4Y2VwdGlvblR5cGVJZCk7XHJcbiAgICAgICAgaWYgKHNlbGVjdGVkRXhjZXB0aW9uVHlwZSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICBkcm9wZG93blRleHQgPSBsb2NhbGVTdG9yZS5pbnN0YW5jZS5UcmFuc2xhdGVUZXh0KCdtYXJraW5nLnJlc3BvbnNlLnJhaXNlLWV4Y2VwdGlvbi1wYW5lbC5zZWxlY3QtZXhjZXB0aW9uLXR5cGUtcGxhY2Vob2xkZXInKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBkcm9wZG93blRleHQgPSBsb2NhbGVTdG9yZS5pbnN0YW5jZS5UcmFuc2xhdGVUZXh0KCdnZW5lcmljLmV4Y2VwdGlvbi10eXBlcy4nICtcclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkRXhjZXB0aW9uVHlwZS5leGNlcHRpb25UeXBlICsgJy5uYW1lJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyByZXNldCB0aGUgc2Nyb2xsIHBvc2l0aW9uIG9ubHkgYWZ0ZXIgY2xpY2tpbmcgdGhlIGV4Y2VwdGlvbnR5cGUgaW5mbyBpY29uXHJcbiAgICAgICAgaWYgKHRoaXMuZXhjZXB0aW9uVHlwZUluZm9DbG9zZSkge1xyXG4gICAgICAgICAgICBleGNlcHRpb25hY3Rpb25DcmVhdG9yLnNldFNjcm9sbEZvckV4Y2VwdGlvblR5cGUoKTtcclxuICAgICAgICAgICAgdGhpcy5leGNlcHRpb25UeXBlSW5mb0Nsb3NlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtkcm9wZG93bmNsYXNzTmFtZX0gb25DbGljaz17dGhpcy5zaG93RXhjZXB0aW9uVHlwZX0+XHJcbiAgICAgICAgICAgICAgICA8YSBpZD0nZXhjZXB0aW9uU2VsZWN0ZWQnIGNsYXNzTmFtZT0nbWVudS1idXR0b24gZXhjZXB0aW9uLXR5cGUtY2FwdGlvbic+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtkcm9wZG93blRleHR9XHJcbiAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0nc3ByaXRlLWljb24gbWVudS1hcnJvdy1pY29uJz48L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8L2E+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGlkPSdleGNlcHRpb25NZW51JyBjbGFzc05hbWU9J21lbnUnIHJvbGU9J21lbnUnXHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2xvY2FsZVN0b3JlLmluc3RhbmNlLlRyYW5zbGF0ZVRleHQoJ21hcmtpbmcucmVzcG9uc2UucmFpc2UtZXhjZXB0aW9uLXBhbmVsLmV4Y2VwdGlvbi10eXBlLXRvb2x0aXAnKX1cclxuICAgICAgICAgICAgICAgICAgICBhcmlhLWhpZGRlbj0ndHJ1ZScgPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdleGNlcHRpb24tdHlwZS1tZW51LWNvbnRlbnQgcGFuZWwtZ3JvdXAnPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7dG9SZW5kZXJ9XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlc2V0IHRoZSBzY3JvbGwgcG9zaXRpb24gZm9yIGV4Y2VwdGlvbiB0eXBlIGxpc3RcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSByZXNldFNjcm9sbCA9ICgpID0+IHtcclxuICAgICAgICBsZXQgZXhjZXB0aW9uVHlwZUluZm8gPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdleGNlcHRpb24tdHlwZS1tZW51LWl0ZW0gbWVudS1pdGVtIHBhbmVsIG9wZW4nKVswXTtcclxuICAgICAgICBpZiAoZXhjZXB0aW9uVHlwZUluZm8pIHtcclxuICAgICAgICAgICAgJCgnI2V4Y2VwdGlvbk1lbnUnKS5hbmltYXRlKHsgc2Nyb2xsVG9wOiBleGNlcHRpb25UeXBlSW5mby5vZmZzZXRUb3AgfSwgMTAwMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlbmRlciB0aGUgZXhjZXB0aW9uIFJlbGF0ZXMgdG8gaXRlbXMuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgcmVuZGVyRXhjZXB0aW9uUmVsYXRlc1RvKCk6IEpTWC5FbGVtZW50IHtcclxuICAgICAgICBpZiAodGhpcy5wcm9wcy5jdXJyZW50UXVlc3Rpb25JdGVtSW5mbyAmJlxyXG4gICAgICAgICAgICB0aGlzLnByb3BzLmN1cnJlbnRRdWVzdGlvbkl0ZW1JbmZvLnVuaXF1ZUlkKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9xdWVzdGlvbklkID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3F1ZXN0aW9uSWQgPSB0aGlzLnByb3BzLmN1cnJlbnRRdWVzdGlvbkl0ZW1JbmZvLnVuaXF1ZUlkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuX3F1ZXN0aW9uTmFtZSA9IGxvY2FsZVN0b3JlLmluc3RhbmNlLlRyYW5zbGF0ZVRleHQoJ21hcmtpbmcucmVzcG9uc2UucmFpc2UtZXhjZXB0aW9uLXBhbmVsLnNlbGVjdGVkLXF1ZXN0aW9uJylcclxuICAgICAgICAgICAgICAgICsgbWFya2luZ1N0b3JlLmluc3RhbmNlLnRvb2xUaXAodGhpcy5fcXVlc3Rpb25JZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBzZWxlY3RlZFF1ZXN0aW9uSXRlbTtcclxuICAgICAgICBzZWxlY3RlZFF1ZXN0aW9uSXRlbSA9IHRoaXMuc3RhdGUuc2VsZWN0ZWRSZWxhdGVzVG8gPT09IHVuZGVmaW5lZCA/XHJcbiAgICAgICAgICAgIHRoaXMuX3F1ZXN0aW9uSWQgOiB0aGlzLnN0YXRlLnNlbGVjdGVkUmVsYXRlc1RvO1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdleGNlcHRpb24tcmVsYXRlLW9wdGlvbi13cmFwICc+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZXhjZXB0aW9uLXJlbGF0ZS1vcHRpb24nPlxyXG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSdyYWRpbycgdmFsdWU9J3NlbGVjdGVkJyBpZD0nZXhjZXB0aW9uUmVsYXRlZDEnIG5hbWU9J2V4Y2VwdGlvblJlbGF0ZWQnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRDaGVja2VkPXt0aGlzLnN0YXRlLnNlbGVjdGVkUmVsYXRlc1RvICE9PSAwfSBvbkNoYW5nZT17bnVsbH0gLz5cclxuICAgICAgICAgICAgICAgICAgICA8bGFiZWwgaHRtbEZvcj0nZXhjZXB0aW9uUmVsYXRlZDEnIG9uQ2xpY2s9e3NlbGVjdGVkUXVlc3Rpb25JdGVtICE9PSB0aGlzLl9xdWVzdGlvbklkID9cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VSZWxhdGVzVG8uYmluZCh0aGlzLCB0aGlzLl9xdWVzdGlvbklkKSA6IG51bGx9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J3JhZGlvLXVpJz48L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0nbGFiZWwtdGV4dCc+e3RoaXMuX3F1ZXN0aW9uTmFtZX08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2V4Y2VwdGlvbi1yZWxhdGUtb3B0aW9uJz5cclxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ncmFkaW8nIHZhbHVlPSdzZWxlY3RlZCcgaWQ9J2V4Y2VwdGlvblJlbGF0ZWQyJyBuYW1lPSdleGNlcHRpb25SZWxhdGVkJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0Q2hlY2tlZD17dGhpcy5zdGF0ZS5zZWxlY3RlZFJlbGF0ZXNUbyA9PT0gMH0gLz5cclxuICAgICAgICAgICAgICAgICAgICA8bGFiZWwgaHRtbEZvcj0nZXhjZXB0aW9uUmVsYXRlZDInIG9uQ2xpY2s9e3NlbGVjdGVkUXVlc3Rpb25JdGVtICE9PSAwID9cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VSZWxhdGVzVG8uYmluZCh0aGlzLCAwKSA6IG51bGx9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J3JhZGlvLXVpJz48L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0nbGFiZWwtdGV4dCc+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7cmVzcG9uc2VTdG9yZS5pbnN0YW5jZS5pc1dob2xlUmVzcG9uc2UgPyB0aGlzLl9tYXJrU2NoZW1lR3JvdXBOYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBsb2NhbGVTdG9yZS5pbnN0YW5jZS5UcmFuc2xhdGVUZXh0KCdtYXJraW5nLnJlc3BvbnNlLnJhaXNlLWV4Y2VwdGlvbi1wYW5lbC5lbnRpcmUtcmVzcG9uc2UnKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlbmRlciB0aGUgZXhjZXB0aW9uIGNvbW1lbnQgYm94LlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHJlbmRlckV4Y2VwdGlvbk1lc3NhZ2UoKTogSlNYLkVsZW1lbnQge1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdleGNlcHRpb24tbWVzc2FnZS13cmFwJz5cclxuICAgICAgICAgICAgICAgIDx0ZXh0YXJlYSByZWY9eydjb21tZW50VGV4dEJveCd9IGFyaWEtbGFiZWw9J0V4Y2VwdGlvbicgbmFtZT0nZXhjZXB0aW9uLW1zZycgaWQ9J2V4Y2VwdGlvbm1zZycgY2xhc3NOYW1lPSdleGNlcHRpb24tbWVzc2FnZSdcclxuICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17bG9jYWxlU3RvcmUuaW5zdGFuY2UuVHJhbnNsYXRlVGV4dCgnbWFya2luZy5yZXNwb25zZS5yYWlzZS1leGNlcHRpb24tcGFuZWwuY29tbWVudC1wbGFjZWhvbGRlcicpfVxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLmNvbW1lbnRDaGFuZ2VkfSB2YWx1ZT17dGhpcy5zdGF0ZS5leGNlcHRpb25Db21tZW50fVxyXG4gICAgICAgICAgICAgICAgICAgIG9uRm9jdXM9e3RoaXMub25Gb2N1c30+XHJcbiAgICAgICAgICAgICAgICA8L3RleHRhcmVhPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhpcyBtZXRob2Qgd2lsbCBjYWxsIG9uIGZvY3VzIG9mIGV4Y2VwdGlvbiBjb21tZW50IGJveCB0ZXh0IGFyZWFcclxuICAgICAqIEBwYXJhbSBlXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgb25Gb2N1cyhlOiBhbnkpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgc2hvd0V4Y2VwdGlvblR5cGVjbGFzc05hbWU6ICdjbG9zZSdcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlbmRlciB0aGUgZXhjZXB0aW9uIEhpc3RvcnkuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgcmVuZGVyRXhjZXB0aW9uQ29tbWVudEhpc3RvcnkoKTogSlNYLkVsZW1lbnQge1xyXG4gICAgICAgIGxldCBjb21tZW50RGV0YWlscyA9IHRoaXMucHJvcHMuZXhjZXB0aW9uRGV0YWlscy5leGNlcHRpb25Db21tZW50cztcclxuICAgICAgICBsZXQgZXhjZXB0aW9uU3RhdHVzID0gdGhpcy5wcm9wcy5leGNlcHRpb25EZXRhaWxzLmN1cnJlbnRTdGF0dXM7XHJcbiAgICAgICAgbGV0IGlzRXNjYWxhdGVkOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICAgICAgbGV0IHRvUmVuZGVyID0gY29tbWVudERldGFpbHMubWFwKChjb21tZW50OiBFeGNlcHRpb25Db21tZW50cywgaW5kZXg6IG51bWJlcikgPT4ge1xyXG4gICAgICAgICAgICBpZiAoKGV4Y2VwdGlvblN0YXR1cyA9PT0gZW51bXMuRXhjZXB0aW9uU3RhdHVzLk9wZW4gJiYgaW5kZXggPT09IDApIHx8XHJcbiAgICAgICAgICAgICAgICAoZXhjZXB0aW9uU3RhdHVzID09PSAoZW51bXMuRXhjZXB0aW9uU3RhdHVzLlJlc29sdmVkIHx8IGVudW1zLkV4Y2VwdGlvblN0YXR1cy5DbG9zZWQpICYmIGluZGV4ID09PSAwKSB8fFxyXG4gICAgICAgICAgICAgICAgKGV4Y2VwdGlvblN0YXR1cyA9PT0gKGVudW1zLkV4Y2VwdGlvblN0YXR1cy5SZXNvbHZlZCB8fCBlbnVtcy5FeGNlcHRpb25TdGF0dXMuQ2xvc2VkKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgIGluZGV4ID09PSBjb21tZW50RGV0YWlscy5sZW5ndGggLSAxKSkge1xyXG4gICAgICAgICAgICAgICAgaXNFc2NhbGF0ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlzRXNjYWxhdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIDxFeGNlcHRpb25Db21tZW50SGlzdG9yeVxyXG4gICAgICAgICAgICAgICAga2V5PXsnY29tbWVudC1oaXN0b3J5JyArIGluZGV4fVxyXG4gICAgICAgICAgICAgICAgY29tbWVudGVkQnk9e2NvbW1lbnQuZXhhbWluZXJOYW1lfVxyXG4gICAgICAgICAgICAgICAgaXNFc2NhbGF0ZWQ9e2lzRXNjYWxhdGVkfVxyXG4gICAgICAgICAgICAgICAgdXBkYXRlZERhdGU9e2NvbW1lbnQudXBkYXRlZERhdGV9XHJcbiAgICAgICAgICAgICAgICBjb21tZW50cz17Y29tbWVudC5jb21tZW50fVxyXG4gICAgICAgICAgICAgICAgZXhjZXB0aW9uU3RhdHVzPXtjb21tZW50LmV4Y2VwdGlvblN0YXR1c31cclxuICAgICAgICAgICAgICAgIGlkPXtpbmRleH0gLz47XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiAoPGRpdiBjbGFzc05hbWU9J2V4Y2VwdGlvbi1oaXN0b3J5LXdyYXBwZXInPlxyXG4gICAgICAgICAgICB7dG9SZW5kZXJ9XHJcbiAgICAgICAgPC9kaXY+KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlbmRlciB0aGUgZXhjZXB0aW9uIGNvbW1lbnQgYm94LlxyXG4gICAgICogQHBhcmFtLSBldmVudFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGNvbW1lbnRDaGFuZ2VkID0gKGV2ZW50OiBhbnkpID0+IHtcclxuICAgICAgICBsZXQgZXhjZXB0aW9uQ29tbWVudCA9IGV2ZW50LnRhcmdldC52YWx1ZTtcclxuXHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIGlzU3VibWl0QnV0dG9uRGlzYWJsZWQ6IHRoaXMuaXNWYWxpZEV4Y2VwdGlvbih0cnVlLCBleGNlcHRpb25Db21tZW50LCB0aGlzLnN0YXRlLnNlbGVjdGVkRXhjZXB0aW9uVHlwZUlkKSxcclxuICAgICAgICAgICAgZXhjZXB0aW9uQ29tbWVudDogZXhjZXB0aW9uQ29tbWVudFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnByb3BzLnZhbGlkYXRlRXhjZXB0aW9uKHRoaXMuaXNWYWxpZEV4Y2VwdGlvbihmYWxzZSwgZXhjZXB0aW9uQ29tbWVudCwgdGhpcy5zdGF0ZS5zZWxlY3RlZEV4Y2VwdGlvblR5cGVJZCkpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIE5hdmlnYXRlIHRvIHRoZSB0ZWFtIE1hbmFnZW1lbnQgRXhjZXB0aW9uTGlzdFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIG5hdmlnYXRldG9FeGNlcHRpb25MaXN0KCkge1xyXG4gICAgICAgIHRlYW1NYW5hZ2VtZW50QWN0aW9uQ3JlYXRvci5nZXRUZWFtTWFuYWdlbWVudE92ZXJ2aWV3Q291bnRzKFxyXG4gICAgICAgICAgICB0ZWFtTWFuYWdlbWVudFN0b3JlLmluc3RhbmNlLnNlbGVjdGVkRXhhbWluZXJSb2xlSWQsXHJcbiAgICAgICAgICAgIHRlYW1NYW5hZ2VtZW50U3RvcmUuaW5zdGFuY2Uuc2VsZWN0ZWRNYXJrU2NoZW1lR3JvdXBJZCk7XHJcbiAgICAgICAgdGVhbU1hbmFnZW1lbnRBY3Rpb25DcmVhdG9yLmdldFVuYWN0aW9uZWRFeGNlcHRpb25zKFxyXG4gICAgICAgICAgICBxaWdTdG9yZS5pbnN0YW5jZS5zZWxlY3RlZFFJR0Zvck1hcmtlck9wZXJhdGlvbi5tYXJrU2NoZW1lR3JvdXBJZCwgZmFsc2UsIHRydWUpO1xyXG4gICAgICAgIG5hdmlnYXRpb25IZWxwZXIubG9hZFRlYW1NYW5hZ2VtZW50KCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTYXZlIHRoZSBFeGNlcHRpb24gdG8gRGIuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgc2F2ZUV4Y2VwdGlvbigpIHtcclxuICAgICAgICB0aGlzLl9zY3JpcHRIZWxwZXIgPSBuZXcgc2NyaXB0SGVscGVyKCk7XHJcbiAgICAgICAgbGV0IHNlbGVjdGVkRXhjZXB0aW9uVHlwZTogRXhjZXB0aW9uVHlwZURldGFpbHMgPSB0aGlzLmdldEV4Y2VwdGlvblR5cGVEZXRhaWxzKHRoaXMuc3RhdGUuc2VsZWN0ZWRFeGNlcHRpb25UeXBlSWQpO1xyXG4gICAgICAgIGxldCBpc0Vib29rTWFya2luZzogYm9vbGVhbiA9IGNvbmZpZ3VyYWJsZUNoYXJhY3RlcmlzdGljc0hlbHBlci5nZXRDaGFyYWN0ZXJpc3RpY1ZhbHVlKFxyXG4gICAgICAgICAgICBjb25maWd1cmFibGVDaGFyYWN0ZXJpc3RpY3NOYW1lcy5lQm9va21hcmtpbmcpLnRvTG93ZXJDYXNlKCkgPT09ICd0cnVlJyA/IHRydWUgOiBmYWxzZTtcclxuXHJcbiAgICAgICAgbGV0IGNvbW1lbnRzOiBBcnJheTxFeGNlcHRpb25Db21tZW50cz4gPSBbe1xyXG4gICAgICAgICAgICBjb21tZW50OiB0aGlzLnN0YXRlLmV4Y2VwdGlvbkNvbW1lbnQsXHJcbiAgICAgICAgICAgIHVuaXF1ZUlkOiAwLFxyXG4gICAgICAgICAgICBleGFtaW5lcklEOiBleGFtaW5lclN0b3JlLmluc3RhbmNlLmdldE1hcmtlckluZm9ybWF0aW9uLmV4YW1pbmVySWQsXHJcbiAgICAgICAgICAgIGVzY2FsYXRpb25Qb2ludDogZW51bXMuRXNjYWxhdGlvblBvaW50Lk5vbmUsXHJcbiAgICAgICAgICAgIGF1dGhvcklzR3JvdXA6IGZhbHNlLFxyXG4gICAgICAgICAgICB1cGRhdGVkQnk6ICcnXHJcbiAgICAgICAgfV07XHJcblxyXG4gICAgICAgIGxldCByYWlzZUV4Y2VwdGlvblBhcmFtczogUmFpc2VFeGNlcHRpb25QYXJhbXMgPSB7XHJcbiAgICAgICAgICAgIGNhbmRpZGF0ZVNjcmlwdElEOiB0aGlzLl9zY3JpcHRIZWxwZXIuZ2V0UmVzcG9uc2VEYXRhLmNhbmRpZGF0ZVNjcmlwdElkLFxyXG4gICAgICAgICAgICBleGNlcHRpb25UeXBlOiB0aGlzLnN0YXRlLnNlbGVjdGVkRXhjZXB0aW9uVHlwZUlkLFxyXG4gICAgICAgICAgICBtYXJrU2NoZW1lR3JvdXBJRDogdGhpcy5fbWFya1NjaGVtZUdyb3VwSWQsXHJcbiAgICAgICAgICAgIG1hcmtHcm91cElkOiB0aGlzLl9tYXJrR3JvdXBJZCxcclxuICAgICAgICAgICAgaXNFQm9va01hcmtpbmc6IGlzRWJvb2tNYXJraW5nLFxyXG4gICAgICAgICAgICBvcmlnaW5hdG9yRXhhbWluZXJJZDogZXhhbWluZXJTdG9yZS5pbnN0YW5jZS5nZXRNYXJrZXJJbmZvcm1hdGlvbi5leGFtaW5lcklkLFxyXG4gICAgICAgICAgICBxdWVzdGlvblBhcGVyUGFydElEOiBxaWdTdG9yZS5pbnN0YW5jZS5zZWxlY3RlZFFJR0Zvck1hcmtlck9wZXJhdGlvbi5xdWVzdGlvblBhcGVyUGFydElkLFxyXG4gICAgICAgICAgICBvd25lckVzY2FsYXRpb25Qb2ludDogc2VsZWN0ZWRFeGNlcHRpb25UeXBlLm93bmVyRXNjYWxhdGlvblBvaW50LFxyXG4gICAgICAgICAgICBleGNlcHRpb25Db21tZW50czogY29tbWVudHMsXHJcbiAgICAgICAgICAgIGN1cnJlbnRTdGF0dXM6IGVudW1zLkV4Y2VwdGlvblN0YXR1cy5PcGVuLFxyXG4gICAgICAgICAgICBleGNlcHRpb25JZDogMCxcclxuICAgICAgICAgICAgbWFya1NjaGVtZUlEOiB0aGlzLnN0YXRlLnNlbGVjdGVkUmVsYXRlc1RvID09PSB1bmRlZmluZWQgP1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcXVlc3Rpb25JZCA6IHRoaXMuc3RhdGUuc2VsZWN0ZWRSZWxhdGVzVG8sXHJcbiAgICAgICAgICAgIG9yaWdpbmF0b3JFeGFtaW5lclJvbGVJZDogdGhpcy5fZXhhbWluZXJSb2xlSWQsXHJcbiAgICAgICAgICAgIG93bmVyRXhhbWluZXJJZDogc2VsZWN0ZWRFeGNlcHRpb25UeXBlLm93bmVyRXhhbWluZXJJZCxcclxuICAgICAgICAgICAgdW5pcXVlSWQ6IDAsXHJcbiAgICAgICAgICAgIGRpc3BsYXlJZDogcmVzcG9uc2VTdG9yZS5pbnN0YW5jZS5zZWxlY3RlZERpc3BsYXlJZCxcclxuICAgICAgICAgICAgZXhhbWluZXJOYW1lOiBleGFtaW5lclN0b3JlLmluc3RhbmNlLmdldE1hcmtlckluZm9ybWF0aW9uLmZvcm1hdHRlZEV4YW1pbmVyTmFtZVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIGlzU3VibWl0QnV0dG9uRGlzYWJsZWQ6IHRydWUsXHJcbiAgICAgICAgICAgIGV4Y2VwdGlvbkNvbW1lbnQ6ICcnXHJcbiAgICAgICAgfSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyBDYWxsIHRoZSByYWlzZSBleGNlcHRpb24gQWN0aW9uLlxyXG4gICAgICAgICAgICBleGNlcHRpb25hY3Rpb25DcmVhdG9yLnJhaXNlRXhjZXB0aW9uQWN0aW9uKHJhaXNlRXhjZXB0aW9uUGFyYW1zLFxyXG4gICAgICAgICAgICAgICAgd29ya2xpc3RTdG9yZS5pbnN0YW5jZS5nZXRSZXNwb25zZURldGFpbHMocmVzcG9uc2VTdG9yZS5pbnN0YW5jZS5zZWxlY3RlZERpc3BsYXlJZC50b1N0cmluZygpKS5tYXJrR3JvdXBJZCxcclxuICAgICAgICAgICAgICAgIHFpZ1N0b3JlLmluc3RhbmNlLnNlbGVjdGVkUUlHRm9yTWFya2VyT3BlcmF0aW9uLm1hcmtTY2hlbWVHcm91cElkKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCB0aGUgRXhjZXB0aW9uIHR5cGUgZGV0YWlscy5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBnZXRFeGNlcHRpb25UeXBlRGV0YWlscyhleGNlcHRpb25UeXBlSWQ6IHN0cmluZyk6IEV4Y2VwdGlvblR5cGVEZXRhaWxzIHtcclxuICAgICAgICBsZXQgZXhjZXB0aW9uVHlwZXM6IEltbXV0YWJsZS5MaXN0PEV4Y2VwdGlvblR5cGVEZXRhaWxzPiA9IGV4Y2VwdGlvblN0b3JlLmluc3RhbmNlLmdldEV4Y2VwdGlvblR5cGVzO1xyXG4gICAgICAgIGxldCBzZWxlY3RlZEV4Y2VwdGlvblR5cGU6IEV4Y2VwdGlvblR5cGVEZXRhaWxzID0gbnVsbDtcclxuXHJcbiAgICAgICAgaWYgKGV4Y2VwdGlvblR5cGVzKSB7XHJcbiAgICAgICAgICAgIGV4Y2VwdGlvblR5cGVzLm1hcCgoZXhjZXB0aW9uVHlwZTogRXhjZXB0aW9uVHlwZURldGFpbHMpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChleGNlcHRpb25UeXBlLmV4Y2VwdGlvblR5cGUgPT09IHBhcnNlSW50KGV4Y2VwdGlvblR5cGVJZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEV4Y2VwdGlvblR5cGUgPSBleGNlcHRpb25UeXBlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHNlbGVjdGVkRXhjZXB0aW9uVHlwZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNob3cgRXhjZXB0aW9uVHlwZSBEcm9wZG93bi5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBzaG93RXhjZXB0aW9uVHlwZSgpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgaXNFeGNlcHRpb25UeXBlTWVudVNlbGVjdGVkOiB0cnVlLFxyXG4gICAgICAgICAgICBzaG93RXhjZXB0aW9uVHlwZWNsYXNzTmFtZTogdGhpcy5zdGF0ZS5zaG93RXhjZXB0aW9uVHlwZWNsYXNzTmFtZSA9PT0gJ2Nsb3NlJyA/ICdvcGVuJyA6ICdjbG9zZSdcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNlbGVjdCB0aGUgRXhjZXB0aW9uVHlwZS5cclxuICAgICAqIEBwYXJhbS0gZXhjZXB0aW9uVHlwZWlkXHJcbiAgICAgKiBAcGFyYW0tIGlzRGlzYWJsZWRcclxuICAgICAqIEBwYXJhbS0gZXZlbnRcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBzZWxlY3RFeGNlcHRpb25UeXBlKGV4Y2VwdGlvblR5cGVJZDogbnVtYmVyLCBpc0Rpc2FibGVkOiBib29sZWFuLCBldmVudDogYW55KSB7XHJcbiAgICAgICAgbGV0IGV4Y2VwdGlvbkNvbW1lbnQgPSB0aGlzLnN0YXRlLmV4Y2VwdGlvbkNvbW1lbnQ7XHJcblxyXG4gICAgICAgIGlmICghaXNEaXNhYmxlZCkge1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkRXhjZXB0aW9uVHlwZUlkOiBleGNlcHRpb25UeXBlSWQsXHJcbiAgICAgICAgICAgICAgICBpc1N1Ym1pdEJ1dHRvbkRpc2FibGVkOiB0aGlzLmlzVmFsaWRFeGNlcHRpb24odHJ1ZSwgZXhjZXB0aW9uQ29tbWVudCwgZXhjZXB0aW9uVHlwZUlkKSxcclxuICAgICAgICAgICAgICAgIHNob3dFeGNlcHRpb25UeXBlY2xhc3NOYW1lOiAnY2xvc2UnXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5wcm9wcy52YWxpZGF0ZUV4Y2VwdGlvbih0aGlzLmlzVmFsaWRFeGNlcHRpb24oZmFsc2UsIGV4Y2VwdGlvbkNvbW1lbnQsIGV4Y2VwdGlvblR5cGVJZCkpO1xyXG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhpcyBtZXRob2Qgd2lsbCB2YWxpZGF0ZSB3aGV0aGVyIG9yIG5vdCB0aGUgRXhjZXB0aW9uIFBhbmVsIGlzIGVkaXRlZFxyXG4gICAgICogQHBhcmFtLSBpc1N1Ym1pdEJ1dHRvblxyXG4gICAgICogQHBhcmFtLSBleGNlcHRpb25Db21tZW50XHJcbiAgICAgKiBAcGFyYW0tIGV4Y2VwdGlvblR5cGVpZFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgaXNWYWxpZEV4Y2VwdGlvbiA9IChpc1N1Ym1pdEJ1dHRvbjogYm9vbGVhbiwgZXhjZXB0aW9uQ29tbWVudDogYW55LCBleGNlcHRpb25UeXBlSWQ6IG51bWJlcikgPT4ge1xyXG4gICAgICAgIGlmIChpc1N1Ym1pdEJ1dHRvbikge1xyXG4gICAgICAgICAgICByZXR1cm4gIShleGNlcHRpb25Db21tZW50LnRyaW0oKS5sZW5ndGggPiAwICYmIGV4Y2VwdGlvblR5cGVJZCAhPT0gdW5kZWZpbmVkKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gIShleGNlcHRpb25Db21tZW50LnRyaW0oKS5sZW5ndGggPiAwIHx8IGV4Y2VwdGlvblR5cGVJZCAhPT0gdW5kZWZpbmVkKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2hvdyB0aGUgRXhjZXB0aW9uIERlc2NyaXB0aW9uLlxyXG4gICAgICogQHBhcmFtLSBleGNlcHRpb25UeXBlaWRcclxuICAgICAqIEBwYXJhbS0gaXNPcGVuXHJcbiAgICAgKiBAcGFyYW0tIGV2ZW50XHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgc2hvd0V4Y2VwdGlvbkRlc2NyaXB0aW9uKGV4Y2VwdGlvblR5cGVJZDogbnVtYmVyLCBpc09wZW46IHN0cmluZywgZXZlbnQ6IGFueSkge1xyXG4gICAgICAgIHRoaXMuZXhjZXB0aW9uVHlwZUluZm9DbG9zZSA9IGlzT3BlbiAhPT0gJ29wZW4nO1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBzZWxlY3RlZEV4Y2VwdGlvbkRlc2NyaXB0aW9uSWQ6IGlzT3BlbiA9PT0gJ29wZW4nID8gMCA6IGV4Y2VwdGlvblR5cGVJZFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2VsZWN0IGNoYW5nZVJlbGF0ZXN0byBJdGVtcy5cclxuICAgICAqIEBwYXJhbS0gdW5pcXVlSWRcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBjaGFuZ2VSZWxhdGVzVG8gPSAodW5pcXVlSWQ6IG51bWJlcikgPT4ge1xyXG4gICAgICAgIGxldCBleGNlcHRpb25Db21tZW50ID0gdGhpcy5zdGF0ZS5leGNlcHRpb25Db21tZW50O1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBzZWxlY3RlZFJlbGF0ZXNUbzogdW5pcXVlSWQsXHJcbiAgICAgICAgICAgIHNlbGVjdGVkRXhjZXB0aW9uVHlwZUlkOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIGlzU3VibWl0QnV0dG9uRGlzYWJsZWQ6IHRoaXMuaXNWYWxpZEV4Y2VwdGlvbih0cnVlLCBleGNlcHRpb25Db21tZW50LCB1bmRlZmluZWQpLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFNhdmUgZXhjZXB0aW9uIENhbGxiYWNrLlxyXG4gICAgICogQHBhcmFtLSByZXNcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSByYWlzZUV4Y2VwdGlvbiA9IChyZXNwb25zZTogUmFpc2VFeGNlcHRpb25SZXNwb25zZSkgPT4ge1xyXG4gICAgICAgIHRoaXMucHJvcHMuY2xvc2VFeGNlcHRpb25QYW5lbChyZXNwb25zZS5zdWNjZXNzLCByZXNwb25zZS5jcmVhdGVFeGNlcHRpb25SZXR1cm5FcnJvckNvZGUpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIE1ldGhvZCBmaXJlZCB0byBjbG9zZSB0aGUgZXhjZXB0aW9uIHBhbmVsLlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIG9uRXhjZXB0aW9uUGFuZWxDbG9zZSA9ICgpID0+IHtcclxuICAgICAgICB0aGlzLnJlc2V0RXhjZXB0aW9uUGFuZWwoKTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNZXRob2QgZmlyZWQgdG8gcmVzZXQgdGhlIGV4Y2VwdGlvbiBwYW5lbC5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSByZXNldEV4Y2VwdGlvblBhbmVsID0gKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX3F1ZXN0aW9uSWQgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5fbWFya1NjaGVtZUdyb3VwSWQgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgaWYgKGV4Y2VwdGlvblN0b3JlLmluc3RhbmNlLmV4Y2VwdGlvblZpZXdBY3Rpb24gPT09IGVudW1zLkV4Y2VwdGlvblZpZXdBY3Rpb24uT3Blbikge1xyXG4gICAgICAgICAgICB0aGlzLl9tYXJrU2NoZW1lR3JvdXBJZCA9ICh0aGlzLnByb3BzLmhhc1VuTWFuYWdlZFNMQU9cclxuICAgICAgICAgICAgICAgIHx8IHRoaXMucHJvcHMuaGFzVW5tYW5hZ2VkSW1hZ2Vab25lKSA/IHFpZ1N0b3JlLmluc3RhbmNlLnNlbGVjdGVkUUlHRm9yTWFya2VyT3BlcmF0aW9uLm1hcmtTY2hlbWVHcm91cElkXHJcbiAgICAgICAgICAgICAgICA6IG1hcmtpbmdTdG9yZS5pbnN0YW5jZS5zZWxlY3RlZFFJR01hcmtTY2hlbWVHcm91cElkO1xyXG4gICAgICAgICAgICB0aGlzLl9tYXJrU2NoZW1lR3JvdXBOYW1lID0gcmVzcG9uc2VTdG9yZS5pbnN0YW5jZS5pc1dob2xlUmVzcG9uc2UgPyBxaWdTdG9yZS5pbnN0YW5jZS5cclxuICAgICAgICAgICAgICAgIGdldE1hcmtTY2hlbWVHcm91cE5hbWUodGhpcy5fbWFya1NjaGVtZUdyb3VwSWQpIDogbnVsbDtcclxuICAgICAgICAgICAgdGhpcy5fbWFya0dyb3VwSWQgPSBtYXJraW5nU3RvcmUuaW5zdGFuY2UuZ2V0TWFya0dyb3VwSWRRSUd0b1JJR01hcCh0aGlzLl9tYXJrU2NoZW1lR3JvdXBJZCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLmhhc1VuTWFuYWdlZFNMQU8gfHwgdGhpcy5wcm9wcy5oYXNVbm1hbmFnZWRJbWFnZVpvbmUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2V4YW1pbmVyUm9sZUlkID0gcWlnU3RvcmUuaW5zdGFuY2Uuc2VsZWN0ZWRRSUdGb3JNYXJrZXJPcGVyYXRpb24uZXhhbWluZXJSb2xlSWQ7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9leGFtaW5lclJvbGVJZCA9IG1hcmtpbmdTdG9yZS5pbnN0YW5jZS5zZWxlY3RlZFFJR0V4YW1pbmVyUm9sZUlkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBzZWxlY3RlZEV4Y2VwdGlvblR5cGVJZDogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICBzaG93RXhjZXB0aW9uVHlwZWNsYXNzTmFtZTogJ2Nsb3NlJyxcclxuICAgICAgICAgICAgaXNTdWJtaXRCdXR0b25EaXNhYmxlZDogdHJ1ZSxcclxuICAgICAgICAgICAgc2VsZWN0ZWRSZWxhdGVzVG86IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgZXhjZXB0aW9uQ29tbWVudDogJycsXHJcbiAgICAgICAgICAgIHJlbmRlcmVkT246IERhdGUubm93KCksXHJcbiAgICAgICAgICAgIHNlbGVjdGVkRXhjZXB0aW9uRGVzY3JpcHRpb25JZDogMCxcclxuICAgICAgICAgICAgaXNFeGNlcHRpb25UeXBlTWVudVNlbGVjdGVkOiBmYWxzZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmICh0aGlzLnByb3BzLmlzRnJvbU1lZGlhRXJyb3JEaWFsb2cpIHtcclxuICAgICAgICAgICAgdGhpcy5nZXRFeGNlcHRpb25EYXRhKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnByb3BzLmlzTmV3RXhjZXB0aW9uICYmIHRoaXMucmVmcy5jb21tZW50VGV4dEJveCAhPT0gdW5kZWZpbmVkICYmICFkZXZpY2VIZWxwZXIuaXNUb3VjaERldmljZSgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVmcy5jb21tZW50VGV4dEJveC5mb2N1cygpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBoYW5kbGluZyB0aGUgbGV0aW91cyBwb3B1cCBldmVudHMuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgb25Qb3BVcERpc3BsYXlFdmVudCA9IChwb3BVcFR5cGU6IGVudW1zLlBvcFVwVHlwZSwgcG9wVXBBY3Rpb25UeXBlOiBlbnVtcy5Qb3BVcEFjdGlvblR5cGUpID0+IHtcclxuICAgICAgICBzd2l0Y2ggKHBvcFVwVHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlIGVudW1zLlBvcFVwVHlwZS5EaXNjYXJkRXhjZXB0aW9uOlxyXG4gICAgICAgICAgICBjYXNlIGVudW1zLlBvcFVwVHlwZS5EaXNjYXJkRXhjZXB0aW9uT25WaWV3RXhjZXB0aW9uQnV0dG9uQ2xpY2s6XHJcbiAgICAgICAgICAgIGNhc2UgZW51bXMuUG9wVXBUeXBlLkRpc2NhcmRPbk5ld0V4Y2VwdGlvbkJ1dHRvbkNsaWNrOlxyXG4gICAgICAgICAgICAgICAgaWYgKHBvcFVwQWN0aW9uVHlwZSA9PT0gZW51bXMuUG9wVXBBY3Rpb25UeXBlLlllcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVzZXRFeGNlcHRpb25QYW5lbCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgZW51bXMuUG9wVXBUeXBlLkNsb3NlRXhjZXB0aW9uOlxyXG4gICAgICAgICAgICAgICAgaWYgKHBvcFVwQWN0aW9uVHlwZSA9PT0gZW51bXMuUG9wVXBBY3Rpb25UeXBlLlllcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VFeGNlcHRpb24oKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGUgZXhjZXB0aW9uIHN0YXR1cyB0byBEYlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGNsb3NlRXhjZXB0aW9uKCkge1xyXG4gICAgICAgIGxldCBleGNlcHRpb25QYXJhbXM6IFJhaXNlRXhjZXB0aW9uUGFyYW1zID0ge1xyXG4gICAgICAgICAgICB1bmlxdWVJZDogdGhpcy5wcm9wcy5leGNlcHRpb25EZXRhaWxzLnVuaXF1ZUlkLFxyXG4gICAgICAgICAgICBleGNlcHRpb25UeXBlOiB0aGlzLnByb3BzLmV4Y2VwdGlvbkRldGFpbHMuZXhjZXB0aW9uVHlwZSxcclxuICAgICAgICAgICAgY3VycmVudFN0YXR1czogZW51bXMuRXhjZXB0aW9uU3RhdHVzLkNsb3NlZCxcclxuICAgICAgICAgICAgZXhjZXB0aW9uQ29tbWVudHM6IG51bGwsXHJcbiAgICAgICAgICAgIG1hcmtTY2hlbWVJRDogdGhpcy5wcm9wcy5leGNlcHRpb25EZXRhaWxzLm1hcmtTY2hlbWVJRCxcclxuICAgICAgICAgICAgb3duZXJFc2NhbGF0aW9uUG9pbnQ6IHRoaXMucHJvcHMuZXhjZXB0aW9uRGV0YWlscy5vd25lckVzY2FsYXRpb25Qb2ludCxcclxuICAgICAgICAgICAgb3duZXJFeGFtaW5lcklkOiB0aGlzLnByb3BzLmV4Y2VwdGlvbkRldGFpbHMub3duZXJFeGFtaW5lcklkLFxyXG4gICAgICAgICAgICBtYXJrR3JvdXBJZDogdGhpcy5wcm9wcy5leGNlcHRpb25EZXRhaWxzLm1hcmtHcm91cElkLFxyXG4gICAgICAgICAgICBjYW5kaWRhdGVTY3JpcHRJRDogdGhpcy5wcm9wcy5leGNlcHRpb25EZXRhaWxzLmNhbmRpZGF0ZVNjcmlwdElELFxyXG4gICAgICAgICAgICBtYXJrU2NoZW1lR3JvdXBJRDogdGhpcy5wcm9wcy5leGNlcHRpb25EZXRhaWxzLm1hcmtTY2hlbWVHcm91cElELFxyXG4gICAgICAgICAgICBxdWVzdGlvblBhcGVyUGFydElEOiB0aGlzLnByb3BzLmV4Y2VwdGlvbkRldGFpbHMucXVlc3Rpb25QYXBlclBhcnRJRCxcclxuICAgICAgICAgICAgb3JpZ2luYXRvckV4YW1pbmVySWQ6IHRoaXMucHJvcHMuZXhjZXB0aW9uRGV0YWlscy5vcmlnaW5hdG9yRXhhbWluZXJJZCxcclxuICAgICAgICAgICAgaXNFQm9va01hcmtpbmc6IHRoaXMucHJvcHMuZXhjZXB0aW9uRGV0YWlscy5pc2VCb29rTWFya2luZ1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyogRGVmZWN0IDQ2Mjg2IC0gRXhjZXB0aW9uIGNvdW50IGlzIG5vdCBnZXR0aW5nIHVwZGF0ZWQgb25jZSBhZnRlciBjbG9zaW5nIHRoZSBleGNlcHRpb24uXHJcbiAgICAgICAgICAgVG8gZml4IHRoZSBpc3N1ZSBieSBjbGVhcmluZyB0aGUgd29ya2xpc3QgY2FjaGUgYWZ0ZXIgY2xvc2luZyB0aGUgZXhjZXB0aW9uLlNvIGl0IHJlcXVpcmVkIHdvcmtsaXN0IHR5cGUsIHJlc3BvbnNlIG1vZGUsXHJcbiAgICAgICAgICAgcmVtYXJrIHJlcXVlc3QgdHlwZSBhcyB0aGUgZXhjZXB0aW9uIGFyZ3VtZW50ICovXHJcbiAgICAgICAgbGV0IGV4Y2VwdGlvbkFjdGlvblBhcmFtczogRXhjZXB0aW9uQWN0aW9uUGFyYW1zID0ge1xyXG4gICAgICAgICAgICBleGNlcHRpb246IGV4Y2VwdGlvblBhcmFtcyxcclxuICAgICAgICAgICAgYWN0aW9uVHlwZTogZW51bXMuRXhjZXB0aW9uQWN0aW9uVHlwZS5DbG9zZSxcclxuICAgICAgICAgICAgcmVxdWVzdGVkQnlFeGFtaW5lclJvbGVJZDogcWlnU3RvcmUuaW5zdGFuY2Uuc2VsZWN0ZWRRSUdGb3JNYXJrZXJPcGVyYXRpb24uZXhhbWluZXJSb2xlSWQsXHJcbiAgICAgICAgICAgIHFpZ0lkOiBxaWdTdG9yZS5pbnN0YW5jZS5zZWxlY3RlZFFJR0Zvck1hcmtlck9wZXJhdGlvbi5tYXJrU2NoZW1lR3JvdXBJZCxcclxuICAgICAgICAgICAgd29ya2xpc3RUeXBlOiB3b3JrbGlzdFN0b3JlLmluc3RhbmNlLmN1cnJlbnRXb3JrbGlzdFR5cGUsXHJcbiAgICAgICAgICAgIHJlc3BvbnNlTW9kZTogd29ya2xpc3RTdG9yZS5pbnN0YW5jZS5nZXRSZXNwb25zZU1vZGUsXHJcbiAgICAgICAgICAgIHJlbWFya1JlcXVlc3RUeXBlOiB3b3JrbGlzdFN0b3JlLmluc3RhbmNlLmdldFJlbWFya1JlcXVlc3RUeXBlLFxyXG4gICAgICAgICAgICBkaXNwbGF5SWQ6IHJlc3BvbnNlU3RvcmUuaW5zdGFuY2Uuc2VsZWN0ZWREaXNwbGF5SWQudG9TdHJpbmcoKSxcclxuXHJcbiAgICAgICAgfTtcclxuICAgICAgICBleGNlcHRpb25hY3Rpb25DcmVhdG9yLnVwZGF0ZUV4Y2VwdGlvblN0YXR1cyhleGNlcHRpb25BY3Rpb25QYXJhbXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogaGFuZGxlIGV4Y2VwdGlvbiBhY3Rpb25zIHN1Y2ggYXMgRXNjYWxhdGUsIFJlc29sdmUsIENsb3NlXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgb25BY3Rpb25FeGNlcHRpb24gPSAoZXhjZXB0aW9uQWN0aW9uVHlwZTogZW51bXMuRXhjZXB0aW9uQWN0aW9uVHlwZSkgPT4ge1xyXG4gICAgICAgIGlmIChleGNlcHRpb25BY3Rpb25UeXBlID09PSBlbnVtcy5FeGNlcHRpb25BY3Rpb25UeXBlLkNsb3NlKSB7XHJcbiAgICAgICAgICAgIHBvcFVwRGlzcGxheUFjdGlvbkNyZWF0b3IucG9wVXBEaXNwbGF5KFxyXG4gICAgICAgICAgICAgICAgZW51bXMuUG9wVXBUeXBlLkNsb3NlRXhjZXB0aW9uLFxyXG4gICAgICAgICAgICAgICAgZW51bXMuUG9wVXBBY3Rpb25UeXBlLlNob3csXHJcbiAgICAgICAgICAgICAgICBlbnVtcy5TYXZlQW5kTmF2aWdhdGUubm9uZSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBwb3B1cENvbnRlbnQ6XHJcbiAgICAgICAgICAgICAgICAgICAgbG9jYWxlU3RvcmUuaW5zdGFuY2UuVHJhbnNsYXRlVGV4dCgnbWFya2luZy5yZXNwb25zZS5jbG9zZS1leGNlcHRpb24tZGlhbG9nLmJvZHknKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZXhjZXB0aW9uYWN0aW9uQ3JlYXRvci5kb1Zpc2libGVFeGNlcHRpb25BY3Rpb25Qb3B1cCh0cnVlLCBleGNlcHRpb25BY3Rpb25UeXBlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCA9IEV4Y2VwdGlvbjtcclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9zb3VyY2UtbWFwLWxvYWRlciEuL3NyYy9jb21wb25lbnRzL2V4Y2VwdGlvbi9leGNlcHRpb24udHN4Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUErQkE7QUFBQTtBQW9CQTs7OztBQUlBO0FBQ0E7QUFBQTtBQXBCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBMkZBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQThEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFnS0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFxR0E7OztBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQStHQTs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFnQkE7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFzQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQXB0QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUtBO0FBbUJBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUFBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBS0E7QUFDQTtBQUdBO0FBRUE7QUFHQTtBQUdBO0FBQ0E7QUFHQTtBQU9BO0FBWUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFFQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBV0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFXQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBRUE7QUFHQTtBQU1BO0FBWUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBTUE7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQU9BO0FBRUE7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBUUE7QUFFQTtBQUdBO0FBaUJBOztBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFnQkE7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXVGQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFtQkE7QUFBQTtBQUVBOztBIiwic291cmNlUm9vdCI6IiJ9");

/***/ }),

/***/ 547:
/* no static exports found */
/* all exports used */
/*!********************************************!*\
  !*** ./src/components/message/message.tsx ***!
  \********************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar React = __webpack_require__(/*! react */ 0);\r\nvar GenericButton = __webpack_require__(/*! ../utility/genericbutton */ 290);\r\nvar MessagePriorityDropDown = __webpack_require__(/*! ./messageprioritydropdown */ 464);\r\nvar MessageEditor = __webpack_require__(/*! ./messageeditor */ 463);\r\nvar Subject = __webpack_require__(/*! ./subject */ 466);\r\nvar messageStore = __webpack_require__(/*! ../../stores/message/messagestore */ 240);\r\nvar localeStore = __webpack_require__(/*! ../../stores/locale/localestore */ 226);\r\nvar MessageBase = __webpack_require__(/*! ./messagebase */ 462);\r\nvar enums = __webpack_require__(/*! ../utility/enums */ 225);\r\nvar examinerStore = __webpack_require__(/*! ../../stores/markerinformation/examinerstore */ 259);\r\nvar qigStore = __webpack_require__(/*! ../../stores/qigselector/qigstore */ 230);\r\nvar messagingActionCreator = __webpack_require__(/*! ../../actions/messaging/messagingactioncreator */ 268);\r\nvar MessageDetails = __webpack_require__(/*! ./messagerightpanel */ 489);\r\nvar classNames = __webpack_require__(/*! classnames */ 39);\r\nvar popupHelper = __webpack_require__(/*! ../utility/popup/popuphelper */ 288);\r\nvar worklistStore = __webpack_require__(/*! ../../stores/worklist/workliststore */ 231);\r\nvar qiqStore = __webpack_require__(/*! ../../stores/qigselector/qigstore */ 230);\r\nvar messageHelper = __webpack_require__(/*! ../utility/message/messagehelper */ 283);\r\nvar operationModeHelper = __webpack_require__(/*! ../utility/userdetails/userinfo/operationmodehelper */ 289);\r\nvar markerOperationModeFactory = __webpack_require__(/*! ../utility/markeroperationmode/markeroperationmodefactory */ 232);\r\nvar configurablecharacteristicshelper = __webpack_require__(/*! ../../utility/configurablecharacteristic/configurablecharacteristicshelper */ 233);\r\nvar configurablecharacteristicsnames = __webpack_require__(/*! ../../utility/configurablecharacteristic/configurablecharacteristicsnames */ 234);\r\nvar teamManagementStore = __webpack_require__(/*! ../../stores/teammanagement/teammanagementstore */ 245);\r\nvar applicationStore = __webpack_require__(/*! ../../stores/applicationoffline/applicationstore */ 247);\r\nvar standardisationSetupStore = __webpack_require__(/*! ../../stores/standardisationsetup/standardisationsetupstore */ 237);\r\nvar markingStore = __webpack_require__(/*! ../../stores/marking/markingstore */ 236);\r\nvar Message = /** @class */ (function (_super) {\r\n    __extends(Message, _super);\r\n    /**\r\n     * @constructor\r\n     */\r\n    function Message(props, state) {\r\n        var _this = _super.call(this, props, state) || this;\r\n        // message type\r\n        _this.currentMessageType = enums.MessageType.InboxCompose;\r\n        // this variable will hold the message panel visiblity status.\r\n        _this.isMessagePopupVisible = false;\r\n        _this.selectedMsgDetails = null;\r\n        _this.priorityDropdownSelectedItem = enums.MessagePriority.Standard;\r\n        _this.removeMandatoryMessagePriority = true;\r\n        _this._mandatoryMessagesFromMarkingToolCC = false;\r\n        /**\r\n         * This method is handling the letious popup events.\r\n         */\r\n        _this.onPopUpDisplayEvent = function (popUpType, popUpActionType, popUpDisplayAction, actionFromCombinedPopup, navigateTo) {\r\n            if (actionFromCombinedPopup === void 0) { actionFromCombinedPopup = false; }\r\n            if (navigateTo === void 0) { navigateTo = enums.SaveAndNavigate.none; }\r\n            switch (popUpType) {\r\n                case enums.PopUpType.DiscardMessage:\r\n                case enums.PopUpType.DiscardMessageNavigateAway:\r\n                case enums.PopUpType.DiscardOnNewMessageButtonClick:\r\n                    switch (popUpActionType) {\r\n                        case enums.PopUpActionType.Yes:\r\n                            popupHelper.handlePopUpEvents(popUpType, popUpActionType, _this.onDiscardMessageConfirmed, actionFromCombinedPopup, navigateTo);\r\n                            break;\r\n                        case enums.PopUpActionType.No:\r\n                            popupHelper.handlePopUpEvents(popUpType, popUpActionType, _this.onDiscardMessageCancelled);\r\n                            break;\r\n                    }\r\n            }\r\n        };\r\n        /**\r\n         * This method will return the supervisor details against a qig\r\n         */\r\n        _this.getSupervisorAndQIGDetails = function (qigId) {\r\n            var item = _this.qigListItems.filter(function (x) { return x.id === qigId; })[0];\r\n            if (item) {\r\n                _this.selectedQigItemId = item.id;\r\n                _this.selectedQigItemDisplayed = item.name;\r\n                _this.supervisorName = item.parentExaminerDisplayName;\r\n                _this.supervisorId = item.parentExaminerId;\r\n                _this.selectedQuestionPaperPartId = item.questionPaperPartId;\r\n            }\r\n        };\r\n        /**\r\n         * Handles the action event on To address list Received.\r\n         */\r\n        _this.teamListReceived = function () {\r\n            if (markerOperationModeFactory.operationMode.isRemoveMandatoryMessagePriorityRequired(_this.currentExaminerId)) {\r\n                var teams = messageStore.instance.teamDetails;\r\n                if (teams) {\r\n                    if (teams.team.subordinates && teams.team.subordinates.length > 0) {\r\n                        if (_this.props.messageType === enums.MessageType.ResponseReply) {\r\n                            _this.removeMandatoryMessagePriority = true;\r\n                            _this.getSubordinateList(teams.team.subordinates);\r\n                        }\r\n                    }\r\n                    if (teams && teams.team.subordinates && teams.team.subordinates.length === 0) {\r\n                        _this.removeMandatoryMessagePriority = true;\r\n                    }\r\n                }\r\n                _this.setState({\r\n                    renderedOn: Date.now()\r\n                });\r\n            }\r\n        };\r\n        /**\r\n         * This method will set the subject and message body for reply and forward\r\n         */\r\n        _this.setvariablesForReplyAndForward = function (messageType) {\r\n            _this.priorityDropdownSelectedItem = messageHelper.getPriorityDropDownSelectedItem(_this.props.selectedMessage.priorityName);\r\n            switch (messageType) {\r\n                case enums.MessageType.ResponseReply:\r\n                case enums.MessageType.ResponseForward:\r\n                    _this.messageSubject = messageHelper.getSubjectContent(messageType, _this.props.selectedMessage.subject);\r\n                    _this.messageBody = messageHelper.getMessageContent(messageType, _this.props.selectedMessage.examinerDetails.fullName, _this.props.selectedMessage.displayDate, _this.props.selectedMsgDetails.body);\r\n                    if (markerOperationModeFactory.operationMode.isTeamManagementMode) {\r\n                        var qigId = operationModeHelper.markSchemeGroupId;\r\n                        var examinerRoleId = operationModeHelper.authorisedExaminerRoleId;\r\n                        var args = {\r\n                            examinerRoleId: examinerRoleId,\r\n                            qigId: qigId\r\n                        };\r\n                        messagingActionCreator.getTeamDetails(args);\r\n                    }\r\n                    break;\r\n            }\r\n        };\r\n        /**\r\n         * This method will call on message open\r\n         */\r\n        _this.onMessagePanelOpen = function (messageType) {\r\n            if (messageType === enums.MessageType.ResponseCompose) {\r\n                _this.messageBody = messageHelper.getMessageContent(enums.MessageType.ResponseCompose);\r\n                // Reset the Navigation after opening a message\r\n                _this.navigateTo = enums.SaveAndNavigate.none;\r\n                _this.setState({ renderedOn: Date.now() });\r\n            }\r\n        };\r\n        // Set the default states\r\n        _this.state = {\r\n            renderedOn: 0\r\n        };\r\n        _this.teamListReceived = _this.teamListReceived.bind(_this);\r\n        _this._mandatoryMessagesFromMarkingToolCC = configurablecharacteristicshelper.getCharacteristicValue(configurablecharacteristicsnames.MandatoryMessagesFromMarkingTool).toLowerCase() === 'true' ? true : false;\r\n        _this.doShowMandatoryMessagePriority = _this.doShowMandatoryMessagePriority.bind(_this);\r\n        return _this;\r\n    }\r\n    /**\r\n     * Render method\r\n     */\r\n    Message.prototype.render = function () {\r\n        if (this.props.messageType === enums.MessageType.ResponseDetails) {\r\n            return (React.createElement(\"div\", { className: 'response-message response-message-container' },\r\n                this.renderMessageHeader(),\r\n                React.createElement(MessageDetails, { id: 'resp-msg-det', key: 'resp-msg-det', selectedLanguage: this.props.selectedLanguage, message: this.props.selectedMessage, \r\n                    //The forward button should be hidden when the examiner has no supervisor\r\n                    isForwardButtonHidden: examinerStore.instance.parentExaminerId === 0, messageDetails: this.props.selectedMsgDetails, selectedTab: enums.MessageFolderType.None, onMessageMenuActionClickCallback: this.props.onMessageMenuActionClickCallback })));\r\n        }\r\n        var _showMandatoryMessagePriority = this.doShowMandatoryMessagePriority();\r\n        this.currentExaminerName = this.currentExaminerName === undefined ?\r\n            this.props.supervisorName : this.currentExaminerName;\r\n        if (this.props.messageType === enums.MessageType.ResponseCompose && this.messageBody === '') {\r\n            this.messageBody = messageHelper.getMessageContent(enums.MessageType.ResponseCompose);\r\n        }\r\n        var workListType = worklistStore.instance.currentWorklistType;\r\n        var markingMode = worklistStore.instance.getMarkingModeByWorkListType(workListType);\r\n        var isElectronicStandardisationTeamMember = 0;\r\n        if (markingMode === enums.MarkingMode.ES_TeamApproval &&\r\n            qiqStore.instance.selectedQIGForMarkerOperation.isElectronicStandardisationTeamMember) {\r\n            isElectronicStandardisationTeamMember = 1;\r\n        }\r\n        return (React.createElement(\"div\", { className: 'compose-new-msg response-message-container', id: 'message-container' },\r\n            this.renderMessageHeader(),\r\n            React.createElement(\"div\", { className: 'messaging-content' },\r\n                React.createElement(\"div\", { className: 'comp-msg-top' },\r\n                    React.createElement(\"div\", { className: 'clearfix' },\r\n                        React.createElement(\"div\", { className: 'comp-resp-id shift-left' },\r\n                            React.createElement(\"span\", { className: 'dim-text', id: 'associated-response-id-text' }, localeStore.instance.TranslateText('messaging.compose-message.associated-response') + ': '),\r\n                            React.createElement(\"span\", { className: 'message-resonse-id', id: 'associated-response-id' }, messageHelper.getMarkingModeText(markingMode, isElectronicStandardisationTeamMember) +\r\n                                this.props.responseId)),\r\n                        React.createElement(\"div\", { className: 'set-priority shift-right' },\r\n                            React.createElement(MessagePriorityDropDown, { id: 'select_priority', dropDownType: enums.DropDownType.Priority, className: 'dropdown-wrap align-right', selectedItem: this.getPriorityDropDownItem(this.priorityDropDownSelectedItem), isOpen: this.clickedDropDown === enums.DropDownType.Priority ? this.isDropDownOpen : undefined, items: [{\r\n                                        id: enums.MessagePriority.Standard,\r\n                                        name: this.getPriorityDropDownItem(enums.MessagePriority.Standard)\r\n                                    },\r\n                                    {\r\n                                        id: enums.MessagePriority.Important,\r\n                                        name: this.getPriorityDropDownItem(enums.MessagePriority.Important)\r\n                                    },\r\n                                    _showMandatoryMessagePriority ? {\r\n                                        id: enums.MessagePriority.Mandatory,\r\n                                        name: this.getPriorityDropDownItem(enums.MessagePriority.Mandatory)\r\n                                    } : null], onClick: this.onDropDownClick, onSelect: this.onSelect }))),\r\n                    React.createElement(\"div\", { className: 'msg-recipient-wrap' },\r\n                        React.createElement(\"div\", { className: 'rec-address-label', id: 'message-to-label' }, localeStore.instance.TranslateText('messaging.compose-message.to-button') + ': '),\r\n                        React.createElement(\"div\", { className: 'recipiants-list-wrap' },\r\n                            React.createElement(\"span\", { className: 'recipiant-name', id: 'message-recipiant-name' }, this.currentExaminerName))),\r\n                    React.createElement(\"div\", { className: 'comp-subject-wrap' },\r\n                        React.createElement(\"label\", { htmlFor: 'message-subject', id: 'subject-label', className: 'comp-subject-label' }, localeStore.instance.TranslateText('messaging.compose-message.subject') + ': '),\r\n                        React.createElement(Subject, { id: 'message-subject', key: 'key-message-subject', outerClass: 'subject-input-wrap', refName: 'subjectInput', hasFocus: this.props.messageType === enums.MessageType.ResponseCompose, className: 'subject-input', onChange: this.handleSubjectChange, maxLength: 120, isVisible: this.props.isMessagePanelVisible, value: this.messageSubject, callback: this.props.onMessageClose }))),\r\n                React.createElement(\"div\", { className: 'comp-msg-bottom', ref: 'msgEditor' },\r\n                    React.createElement(\"div\", { className: 'msg-editor' },\r\n                        React.createElement(MessageEditor, { htmlContent: this.messageBody, hasFocus: messageHelper.hasFocus(this.props.messageType), id: this.msgEditorId, key: 'key-' + this.msgEditorId, toggleSaveButtonState: this.toggleSaveButtonState, selectedLanguage: this.props.selectedLanguage }))))));\r\n    };\r\n    /**\r\n     * Method to render message header.\r\n     */\r\n    Message.prototype.renderMessageHeader = function () {\r\n        return (React.createElement(\"div\", { className: classNames('clearfix', { 'response-msg-header': this.props.messageType === enums.MessageType.ResponseDetails }, { 'compose-msg-header': this.props.messageType !== enums.MessageType.ResponseDetails }) },\r\n            React.createElement(\"h3\", { id: 'popup2Title', className: 'shift-left comp-msg-title' }, messageHelper.getMessageHeader(this.props.messageType)),\r\n            this.sendButton(),\r\n            React.createElement(\"div\", { className: classNames('minimize-message', { 'shift-left': this.props.messageType === enums.MessageType.ResponseDetails }, { 'shift-right': this.props.messageType === enums.MessageType.ResponseCompose }) },\r\n                React.createElement(\"a\", { href: 'javascript:void(0)', className: 'minimize-message-link', id: 'message-minimize', title: localeStore.instance.TranslateText('messaging.compose-message.minimise-icon-tooltip'), onClick: this.onMinimize },\r\n                    React.createElement(\"span\", { className: 'minimize-icon lite' }, \"Minimize\")),\r\n                React.createElement(\"a\", { href: 'javascript:void(0)', className: 'maximize-message-link', id: 'message-maximize', title: localeStore.instance.TranslateText('messaging.compose-message.maximise-icon-tooltip'), onClick: this.onMaximize },\r\n                    React.createElement(\"span\", { className: 'maxmize-icon lite' }, localeStore.instance.TranslateText('messaging.compose-message.maximise-icon-tooltip'))),\r\n                React.createElement(\"a\", { href: 'javascript:void(0)', className: 'close-message-link', title: localeStore.instance.TranslateText('messaging.compose-message.close-icon-tooltip'), id: 'message-close', onClick: this.onMessageClose },\r\n                    React.createElement(\"span\", { className: 'close-icon lite' }, \"Close\")))));\r\n    };\r\n    /**\r\n     * Send Button in compose Message\r\n     */\r\n    Message.prototype.sendButton = function () {\r\n        var _this = this;\r\n        if (this.props.messageType !== enums.MessageType.ResponseDetails) {\r\n            return (React.createElement(\"div\", { className: 'shift-left comp-msg-butons' },\r\n                React.createElement(GenericButton, { id: 'message_send_btn', key: 'key_message_send_btn', className: 'button primary rounded', title: localeStore.instance.TranslateText('messaging.compose-message.send-button-tooltip'), content: localeStore.instance.TranslateText('messaging.compose-message.send-button'), disabled: this.isSendButtonDisabled, onClick: function () { _this.messageSendValidationCheck(_this.props.messageType); } })));\r\n        }\r\n    };\r\n    /**\r\n     * This function gets invoked when the component is about to be mounted\r\n     */\r\n    Message.prototype.componentDidMount = function () {\r\n        messageStore.instance.addListener(messageStore.MessageStore.SEND_MESSAGE_SUCCESS_EVENT, this.resetAndCloseMessagePanel);\r\n        messageStore.instance.addListener(messageStore.MessageStore.MESSAGE_NAVIGATE_EVENT, this.onNavigateAwayFromResponse);\r\n        messageStore.instance.addListener(messageStore.MessageStore.POPUP_DISPLAY_EVENT, this.onPopUpDisplayEvent);\r\n        window.addEventListener('click', this._boundHandleOnClick);\r\n        messageStore.instance.addListener(messageStore.MessageStore.MESSAGE_DELETE_EVENT, this.updateMessageDeletedStatus);\r\n        messageStore.instance.addListener(messageStore.MessageStore.MESSAGE_OPEN_EVENT, this.onMessagePanelOpen);\r\n        messageStore.instance.addListener(messageStore.MessageStore.MESSAGE_NAVIGATION_EVENT, this.onNavigateFromMessagePanel);\r\n        messageHelper.addInitMouseClickEventScriptBlock();\r\n        messageStore.instance.addListener(messageStore.MessageStore.TEAM_LIST_RECEIVED, this.teamListReceived);\r\n        teamManagementStore.instance.addListener(teamManagementStore.TeamManagementStore.APPROVAL_MANAGEMENT_ACTION_EXECUTED, this.examinerValidation);\r\n        applicationStore.instance.addListener(applicationStore.ApplicationStore.ONLINE_STATUS_UPDATED_EVENT, this.onOnlineStatusChanged);\r\n    };\r\n    /**\r\n     * This function gets invoked when the component is about to be unmounted\r\n     */\r\n    Message.prototype.componentWillUnmount = function () {\r\n        messageStore.instance.removeListener(messageStore.MessageStore.SEND_MESSAGE_SUCCESS_EVENT, this.resetAndCloseMessagePanel);\r\n        messageStore.instance.removeListener(messageStore.MessageStore.MESSAGE_NAVIGATE_EVENT, this.onNavigateAwayFromResponse);\r\n        messageStore.instance.removeListener(messageStore.MessageStore.POPUP_DISPLAY_EVENT, this.onPopUpDisplayEvent);\r\n        window.removeEventListener('click', this._boundHandleOnClick);\r\n        messageStore.instance.removeListener(messageStore.MessageStore.MESSAGE_DELETE_EVENT, this.updateMessageDeletedStatus);\r\n        messageStore.instance.removeListener(messageStore.MessageStore.MESSAGE_OPEN_EVENT, this.onMessagePanelOpen);\r\n        messageStore.instance.removeListener(messageStore.MessageStore.MESSAGE_NAVIGATION_EVENT, this.onNavigateFromMessagePanel);\r\n        if (messageStore.instance.messageViewAction !== enums.MessageViewAction.None) {\r\n            messagingActionCreator.messageAction(enums.MessageViewAction.None);\r\n        }\r\n        messageHelper.removeInitMouseClickEventScriptBlock();\r\n        messageStore.instance.removeListener(messageStore.MessageStore.TEAM_LIST_RECEIVED, this.teamListReceived);\r\n        teamManagementStore.instance.removeListener(teamManagementStore.TeamManagementStore.APPROVAL_MANAGEMENT_ACTION_EXECUTED, this.examinerValidation);\r\n        applicationStore.instance.removeListener(applicationStore.ApplicationStore.ONLINE_STATUS_UPDATED_EVENT, this.onOnlineStatusChanged);\r\n    };\r\n    /**\r\n     * componentWillReceiveProps\r\n     * @param nextProps\r\n     */\r\n    Message.prototype.componentWillReceiveProps = function (nextProps) {\r\n        // set to field values\r\n        if (markerOperationModeFactory.operationMode.sendMessageToExaminer(nextProps.messageType)) {\r\n            this.toFieldValues = new Array();\r\n            this.toFieldIds = new Array();\r\n            var _currentExaminerId = markerOperationModeFactory.operationMode.isStandardisationSetupMode ?\r\n                standardisationSetupStore.instance.getProvisionalExaminerId(markingStore.instance.selectedDisplayId) :\r\n                teamManagementStore.instance.examinerDrillDownData.examinerId;\r\n            var _currentExaminerName = markerOperationModeFactory.operationMode.isStandardisationSetupMode ?\r\n                standardisationSetupStore.instance.getFormattedExaminerName(markingStore.instance.selectedDisplayId)\r\n                : examinerStore.instance.getMarkerInformation.formattedExaminerName;\r\n            this.toFieldIds.push(_currentExaminerId);\r\n            this.toFieldValues.push(_currentExaminerName);\r\n            this.currentExaminerName = _currentExaminerName;\r\n            this.currentExaminerId = _currentExaminerId;\r\n        }\r\n        else if (nextProps.supervisorId > 0 && nextProps.supervisorName !== '') {\r\n            this.toFieldValues = new Array();\r\n            this.toFieldIds = new Array();\r\n            this.toFieldIds.push(nextProps.supervisorId);\r\n            this.toFieldValues.push(nextProps.supervisorName);\r\n            this.currentExaminerName = nextProps.supervisorName;\r\n            this.currentExaminerId = nextProps.supervisorId;\r\n        }\r\n        // set variables for reply and forward\r\n        if (this.props.messageType === enums.MessageType.ResponseDetails && (nextProps.messageType === enums.MessageType.ResponseReply ||\r\n            nextProps.messageType === enums.MessageType.ResponseForward)) {\r\n            this.setvariablesForReplyAndForward(nextProps.messageType);\r\n        }\r\n    };\r\n    /**\r\n     * This function gets invoked when the component is about to be updated\r\n     */\r\n    Message.prototype.componentDidUpdate = function () {\r\n        // enable or disable send button while changing props\r\n        this.enableDisableSendButton();\r\n    };\r\n    /**\r\n     * Close the message panel after deleting the message\r\n     */\r\n    Message.prototype.updateMessageDeletedStatus = function () {\r\n        messagingActionCreator.messageAction(enums.MessageViewAction.Close);\r\n    };\r\n    /**\r\n     * Get selected subordinated list.\r\n     */\r\n    Message.prototype.getSubordinateList = function (teamList) {\r\n        var that = this;\r\n        teamList.map(function (examinerInfo) {\r\n            if (examinerInfo.examinerId === that.props.selectedMessage.fromExaminerId) {\r\n                that.removeMandatoryMessagePriority = false;\r\n            }\r\n            if (examinerInfo.subordinates.length > 0) {\r\n                that.getSubordinateList(examinerInfo.subordinates);\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * to show or hide mandatory message priority\r\n     */\r\n    Message.prototype.doShowMandatoryMessagePriority = function () {\r\n        var currentExaminerApprovalStatus = enums.ExaminerApproval.None;\r\n        if (examinerStore && examinerStore.instance.getMarkerInformation) {\r\n            currentExaminerApprovalStatus = examinerStore.instance.getMarkerInformation.currentExaminerApprovalStatus;\r\n        }\r\n        if (currentExaminerApprovalStatus === enums.ExaminerApproval.NotApproved ||\r\n            currentExaminerApprovalStatus === enums.ExaminerApproval.Suspended ||\r\n            this.currentExaminerId === examinerStore.instance.parentExaminerId) {\r\n            this.removeMandatoryMessagePriority = true;\r\n        }\r\n        else if ((markerOperationModeFactory.operationMode.isTeamManagementMode &&\r\n            this.props.messageType === enums.MessageType.ResponseCompose)) {\r\n            this.removeMandatoryMessagePriority = false;\r\n        }\r\n        else if (worklistStore.instance.isMarkingCheckMode && currentExaminerApprovalStatus === enums.ExaminerApproval.Approved &&\r\n            qigStore.instance.getSelectedQIGForTheLoggedInUser.role === enums.ExaminerRole.principalExaminer) {\r\n            // Mandatory message option should be visible from Marking check is doing from parent.\r\n            this.removeMandatoryMessagePriority = false;\r\n        }\r\n        return this._mandatoryMessagesFromMarkingToolCC && !this.removeMandatoryMessagePriority;\r\n    };\r\n    return Message;\r\n}(MessageBase));\r\nmodule.exports = Message;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTQ3LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvbWVzc2FnZS9tZXNzYWdlLnRzeD9kN2FlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XHJcbmltcG9ydCBHZW5lcmljQnV0dG9uID0gcmVxdWlyZSgnLi4vdXRpbGl0eS9nZW5lcmljYnV0dG9uJyk7XHJcbmltcG9ydCBNZXNzYWdlUHJpb3JpdHlEcm9wRG93biA9IHJlcXVpcmUoJy4vbWVzc2FnZXByaW9yaXR5ZHJvcGRvd24nKTtcclxuaW1wb3J0IE1lc3NhZ2VFZGl0b3IgPSByZXF1aXJlKCcuL21lc3NhZ2VlZGl0b3InKTtcclxuaW1wb3J0IFN1YmplY3QgPSByZXF1aXJlKCcuL3N1YmplY3QnKTtcclxuaW1wb3J0IG1lc3NhZ2VTdG9yZSA9IHJlcXVpcmUoJy4uLy4uL3N0b3Jlcy9tZXNzYWdlL21lc3NhZ2VzdG9yZScpO1xyXG5pbXBvcnQgbG9jYWxlU3RvcmUgPSByZXF1aXJlKCcuLi8uLi9zdG9yZXMvbG9jYWxlL2xvY2FsZXN0b3JlJyk7XHJcbmltcG9ydCBNZXNzYWdlQmFzZSA9IHJlcXVpcmUoJy4vbWVzc2FnZWJhc2UnKTtcclxuaW1wb3J0IGVudW1zID0gcmVxdWlyZSgnLi4vdXRpbGl0eS9lbnVtcycpO1xyXG5pbXBvcnQgZXhhbWluZXJTdG9yZSA9IHJlcXVpcmUoJy4uLy4uL3N0b3Jlcy9tYXJrZXJpbmZvcm1hdGlvbi9leGFtaW5lcnN0b3JlJyk7XHJcbmltcG9ydCBxaWdTdG9yZSA9IHJlcXVpcmUoJy4uLy4uL3N0b3Jlcy9xaWdzZWxlY3Rvci9xaWdzdG9yZScpO1xyXG5pbXBvcnQgbWVzc2FnaW5nQWN0aW9uQ3JlYXRvciA9IHJlcXVpcmUoJy4uLy4uL2FjdGlvbnMvbWVzc2FnaW5nL21lc3NhZ2luZ2FjdGlvbmNyZWF0b3InKTtcclxuaW1wb3J0IHN0YW1wQWN0aW9uQ3JlYXRvciA9IHJlcXVpcmUoJy4uLy4uL2FjdGlvbnMvc3RhbXAvc3RhbXBhY3Rpb25jcmVhdG9yJyk7XHJcbmltcG9ydCBNZXNzYWdlRGV0YWlscyA9IHJlcXVpcmUoJy4vbWVzc2FnZXJpZ2h0cGFuZWwnKTtcclxubGV0IGNsYXNzTmFtZXMgPSByZXF1aXJlKCdjbGFzc25hbWVzJyk7XHJcbmltcG9ydCBwb3B1cEhlbHBlciA9IHJlcXVpcmUoJy4uL3V0aWxpdHkvcG9wdXAvcG9wdXBoZWxwZXInKTtcclxuaW1wb3J0IHdvcmtsaXN0U3RvcmUgPSByZXF1aXJlKCcuLi8uLi9zdG9yZXMvd29ya2xpc3Qvd29ya2xpc3RzdG9yZScpO1xyXG5pbXBvcnQgY29uc3RhbnRzID0gcmVxdWlyZSgnLi4vdXRpbGl0eS9jb25zdGFudHMnKTtcclxuaW1wb3J0IHFpcVN0b3JlID0gcmVxdWlyZSgnLi4vLi4vc3RvcmVzL3FpZ3NlbGVjdG9yL3FpZ3N0b3JlJyk7XHJcbmltcG9ydCBzdHJpbmdIZWxwZXIgPSByZXF1aXJlKCcuLi8uLi91dGlsaXR5L2dlbmVyaWMvc3RyaW5naGVscGVyJyk7XHJcbmltcG9ydCBDb25maXJtYXRpb25EaWFsb2cgPSByZXF1aXJlKCcuLi91dGlsaXR5L2NvbmZpcm1hdGlvbmRpYWxvZycpO1xyXG5pbXBvcnQgbWFya2luZ0hlbHBlciA9IHJlcXVpcmUoJy4uLy4uL3V0aWxpdHkvbWFya3NjaGVtZS9tYXJraW5naGVscGVyJyk7XHJcbmltcG9ydCBtZXNzYWdlQXJndW1lbnQgPSByZXF1aXJlKCcuLi8uLi9kYXRhc2VydmljZXMvbWVzc2FnaW5nL21lc3NhZ2Vhcmd1bWVudCcpO1xyXG5pbXBvcnQgbWVzc2FnZUhlbHBlciA9IHJlcXVpcmUoJy4uL3V0aWxpdHkvbWVzc2FnZS9tZXNzYWdlaGVscGVyJyk7XHJcbmltcG9ydCBvcGVyYXRpb25Nb2RlSGVscGVyID0gcmVxdWlyZSgnLi4vdXRpbGl0eS91c2VyZGV0YWlscy91c2VyaW5mby9vcGVyYXRpb25tb2RlaGVscGVyJyk7XHJcbmltcG9ydCBtYXJrZXJPcGVyYXRpb25Nb2RlRmFjdG9yeSA9IHJlcXVpcmUoJy4uL3V0aWxpdHkvbWFya2Vyb3BlcmF0aW9ubW9kZS9tYXJrZXJvcGVyYXRpb25tb2RlZmFjdG9yeScpO1xyXG5pbXBvcnQgdGVhbUFyZ3VtZW50ID0gcmVxdWlyZSgnLi4vLi4vZGF0YXNlcnZpY2VzL21lc3NhZ2luZy90ZWFtYXJndW1lbnQnKTtcclxuaW1wb3J0IHVzZXJJbmZvU3RvcmUgPSByZXF1aXJlKCcuLi8uLi9zdG9yZXMvdXNlcmluZm8vdXNlcmluZm9zdG9yZScpO1xyXG5pbXBvcnQgY29uZmlndXJhYmxlY2hhcmFjdGVyaXN0aWNzaGVscGVyID0gcmVxdWlyZSgnLi4vLi4vdXRpbGl0eS9jb25maWd1cmFibGVjaGFyYWN0ZXJpc3RpYy9jb25maWd1cmFibGVjaGFyYWN0ZXJpc3RpY3NoZWxwZXInKTtcclxuaW1wb3J0IGNvbmZpZ3VyYWJsZWNoYXJhY3RlcmlzdGljc25hbWVzID0gcmVxdWlyZSgnLi4vLi4vdXRpbGl0eS9jb25maWd1cmFibGVjaGFyYWN0ZXJpc3RpYy9jb25maWd1cmFibGVjaGFyYWN0ZXJpc3RpY3NuYW1lcycpO1xyXG5pbXBvcnQgdGVhbU1hbmFnZW1lbnRTdG9yZSA9IHJlcXVpcmUoJy4uLy4uL3N0b3Jlcy90ZWFtbWFuYWdlbWVudC90ZWFtbWFuYWdlbWVudHN0b3JlJyk7XHJcbmltcG9ydCBhcHBsaWNhdGlvblN0b3JlID0gcmVxdWlyZSgnLi4vLi4vc3RvcmVzL2FwcGxpY2F0aW9ub2ZmbGluZS9hcHBsaWNhdGlvbnN0b3JlJyk7XHJcbmltcG9ydCBzdGFuZGFyZGlzYXRpb25TZXR1cFN0b3JlID0gcmVxdWlyZSgnLi4vLi4vc3RvcmVzL3N0YW5kYXJkaXNhdGlvbnNldHVwL3N0YW5kYXJkaXNhdGlvbnNldHVwc3RvcmUnKTtcclxuaW1wb3J0IG1hcmtpbmdTdG9yZSA9IHJlcXVpcmUoJy4uLy4uL3N0b3Jlcy9tYXJraW5nL21hcmtpbmdzdG9yZScpO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIGV4dGVuZHMgUHJvcHNCYXNlLCBMb2NhbGVTZWxlY3Rpb25CYXNlIHtcclxuICAgIG1lc3NhZ2VUeXBlOiBlbnVtcy5NZXNzYWdlVHlwZTtcclxuICAgIGNsb3NlTWVzc2FnZVBhbmVsOiBGdW5jdGlvbjtcclxuICAgIHJlc3BvbnNlSWQ6IG51bWJlcjtcclxuICAgIHN1cGVydmlzb3JJZDogbnVtYmVyO1xyXG4gICAgc3VwZXJ2aXNvck5hbWU6IHN0cmluZztcclxuICAgIHNlbGVjdGVkTWVzc2FnZT86IE1lc3NhZ2U7XHJcbiAgICBzZWxlY3RlZE1zZ0RldGFpbHM/OiBNZXNzYWdlRGV0YWlscztcclxuICAgIG9uTWVzc2FnZU1lbnVBY3Rpb25DbGlja0NhbGxiYWNrOiBGdW5jdGlvbjtcclxuICAgIG9uTWVzc2FnZUNsb3NlOiBGdW5jdGlvbjtcclxufVxyXG5cclxuaW50ZXJmYWNlIFN0YXRlIHtcclxuICAgIHJlbmRlcmVkT24/OiBudW1iZXI7XHJcbiAgICBpc0RlbGV0ZU1lc3NhZ2VQb3B1cFZpc2libGU/OiBib29sZWFuO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgSXRlbSB7XHJcbiAgICBpZDogbnVtYmVyO1xyXG4gICAgbmFtZTogc3RyaW5nO1xyXG4gICAgcGFyZW50RXhhbWluZXJEaXNwbGF5TmFtZTogc3RyaW5nO1xyXG4gICAgcGFyZW50RXhhbWluZXJJZDogbnVtYmVyO1xyXG4gICAgcXVlc3Rpb25QYXBlclBhcnRJZDogbnVtYmVyO1xyXG4gICAgaXNNZXNzYWdlUGFuZWxWaXNpYmxlOiBib29sZWFuO1xyXG59XHJcblxyXG5jbGFzcyBNZXNzYWdlIGV4dGVuZHMgTWVzc2FnZUJhc2Uge1xyXG5cclxuICAgIHByaXZhdGUgcmVzcG9uc2VEYXRhOiBSZXNwb25zZUJhc2U7XHJcbiAgICAvLyBtZXNzYWdlIHR5cGVcclxuICAgIHByaXZhdGUgY3VycmVudE1lc3NhZ2VUeXBlOiBlbnVtcy5NZXNzYWdlVHlwZSA9IGVudW1zLk1lc3NhZ2VUeXBlLkluYm94Q29tcG9zZTtcclxuICAgIC8vIHRoaXMgdmFyaWFibGUgd2lsbCBob2xkIHRoZSBtZXNzYWdlIHBhbmVsIHZpc2libGl0eSBzdGF0dXMuXHJcbiAgICBwcml2YXRlIGlzTWVzc2FnZVBvcHVwVmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBxaWdMaXN0SXRlbXM6IEFycmF5PEl0ZW0+O1xyXG4gICAgcHJpdmF0ZSBzZWxlY3RlZFFpZ0l0ZW1EaXNwbGF5ZWQ6IHN0cmluZztcclxuICAgIHByaXZhdGUgc3VwZXJ2aXNvcklkOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIHN1cGVydmlzb3JOYW1lOiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIHNlbGVjdGVkTXNnOiBNZXNzYWdlO1xyXG4gICAgcHJpdmF0ZSBzZWxlY3RlZE1zZ0RldGFpbHM6IE1lc3NhZ2VEZXRhaWxzID0gbnVsbDtcclxuICAgIHByaXZhdGUgc2VsZWN0ZWRRdWVzdGlvblBhcGVyUGFydElkOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIHByaW9yaXR5RHJvcGRvd25TZWxlY3RlZEl0ZW06IGVudW1zLk1lc3NhZ2VQcmlvcml0eSA9IGVudW1zLk1lc3NhZ2VQcmlvcml0eS5TdGFuZGFyZDtcclxuICAgIHByaXZhdGUgcmVzcG9uc2VJZDogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSByZW1vdmVNYW5kYXRvcnlNZXNzYWdlUHJpb3JpdHk6IGJvb2xlYW4gPSB0cnVlO1xyXG4gICAgcHJpdmF0ZSBfbWFuZGF0b3J5TWVzc2FnZXNGcm9tTWFya2luZ1Rvb2xDQzogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBjdXJyZW50RXhhbWluZXJOYW1lOiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIGN1cnJlbnRFeGFtaW5lcklkOiBudW1iZXI7XHJcbiAgICAvKipcclxuICAgICAqIEBjb25zdHJ1Y3RvclxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9wczogUHJvcHMsIHN0YXRlOiBTdGF0ZSkge1xyXG4gICAgICAgIHN1cGVyKHByb3BzLCBzdGF0ZSk7XHJcblxyXG4gICAgICAgIC8vIFNldCB0aGUgZGVmYXVsdCBzdGF0ZXNcclxuICAgICAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICAgICAgICByZW5kZXJlZE9uOiAwXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy50ZWFtTGlzdFJlY2VpdmVkID0gdGhpcy50ZWFtTGlzdFJlY2VpdmVkLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5fbWFuZGF0b3J5TWVzc2FnZXNGcm9tTWFya2luZ1Rvb2xDQyA9IGNvbmZpZ3VyYWJsZWNoYXJhY3RlcmlzdGljc2hlbHBlci5nZXRDaGFyYWN0ZXJpc3RpY1ZhbHVlKFxyXG4gICAgICAgICAgICBjb25maWd1cmFibGVjaGFyYWN0ZXJpc3RpY3NuYW1lcy5NYW5kYXRvcnlNZXNzYWdlc0Zyb21NYXJraW5nVG9vbCkudG9Mb3dlckNhc2UoKSA9PT0gJ3RydWUnID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuZG9TaG93TWFuZGF0b3J5TWVzc2FnZVByaW9yaXR5ID0gdGhpcy5kb1Nob3dNYW5kYXRvcnlNZXNzYWdlUHJpb3JpdHkuYmluZCh0aGlzKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZW5kZXIgbWV0aG9kXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyByZW5kZXIoKTogSlNYLkVsZW1lbnQge1xyXG5cclxuICAgICAgICBpZiAodGhpcy5wcm9wcy5tZXNzYWdlVHlwZSA9PT0gZW51bXMuTWVzc2FnZVR5cGUuUmVzcG9uc2VEZXRhaWxzKSB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3Jlc3BvbnNlLW1lc3NhZ2UgcmVzcG9uc2UtbWVzc2FnZS1jb250YWluZXInPlxyXG4gICAgICAgICAgICAgICAgICAgIHt0aGlzLnJlbmRlck1lc3NhZ2VIZWFkZXIoKX1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgPE1lc3NhZ2VEZXRhaWxzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdyZXNwLW1zZy1kZXQnIGtleT0ncmVzcC1tc2ctZGV0J1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZExhbmd1YWdlPXt0aGlzLnByb3BzLnNlbGVjdGVkTGFuZ3VhZ2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U9e3RoaXMucHJvcHMuc2VsZWN0ZWRNZXNzYWdlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL1RoZSBmb3J3YXJkIGJ1dHRvbiBzaG91bGQgYmUgaGlkZGVuIHdoZW4gdGhlIGV4YW1pbmVyIGhhcyBubyBzdXBlcnZpc29yXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzRm9yd2FyZEJ1dHRvbkhpZGRlbj17ZXhhbWluZXJTdG9yZS5pbnN0YW5jZS5wYXJlbnRFeGFtaW5lcklkID09PSAwfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlRGV0YWlscz17dGhpcy5wcm9wcy5zZWxlY3RlZE1zZ0RldGFpbHN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkVGFiPXtlbnVtcy5NZXNzYWdlRm9sZGVyVHlwZS5Ob25lfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbk1lc3NhZ2VNZW51QWN0aW9uQ2xpY2tDYWxsYmFjaz17dGhpcy5wcm9wcy5vbk1lc3NhZ2VNZW51QWN0aW9uQ2xpY2tDYWxsYmFja30vPlxyXG5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IF9zaG93TWFuZGF0b3J5TWVzc2FnZVByaW9yaXR5OiBib29sZWFuID0gdGhpcy5kb1Nob3dNYW5kYXRvcnlNZXNzYWdlUHJpb3JpdHkoKTtcclxuICAgICAgICB0aGlzLmN1cnJlbnRFeGFtaW5lck5hbWUgPSB0aGlzLmN1cnJlbnRFeGFtaW5lck5hbWUgPT09IHVuZGVmaW5lZCA/XHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMuc3VwZXJ2aXNvck5hbWUgOiB0aGlzLmN1cnJlbnRFeGFtaW5lck5hbWU7XHJcbiAgICAgICAgaWYgKHRoaXMucHJvcHMubWVzc2FnZVR5cGUgPT09IGVudW1zLk1lc3NhZ2VUeXBlLlJlc3BvbnNlQ29tcG9zZSAmJiB0aGlzLm1lc3NhZ2VCb2R5ID09PSAnJykge1xyXG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2VCb2R5ID0gbWVzc2FnZUhlbHBlci5nZXRNZXNzYWdlQ29udGVudChlbnVtcy5NZXNzYWdlVHlwZS5SZXNwb25zZUNvbXBvc2UpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHdvcmtMaXN0VHlwZSA9IHdvcmtsaXN0U3RvcmUuaW5zdGFuY2UuY3VycmVudFdvcmtsaXN0VHlwZTtcclxuICAgICAgICBsZXQgbWFya2luZ01vZGUgPSB3b3JrbGlzdFN0b3JlLmluc3RhbmNlLmdldE1hcmtpbmdNb2RlQnlXb3JrTGlzdFR5cGUod29ya0xpc3RUeXBlKTtcclxuICAgICAgICBsZXQgaXNFbGVjdHJvbmljU3RhbmRhcmRpc2F0aW9uVGVhbU1lbWJlciA9IDA7XHJcbiAgICAgICAgaWYgKG1hcmtpbmdNb2RlID09PSBlbnVtcy5NYXJraW5nTW9kZS5FU19UZWFtQXBwcm92YWwgJiZcclxuICAgICAgICAgICAgcWlxU3RvcmUuaW5zdGFuY2Uuc2VsZWN0ZWRRSUdGb3JNYXJrZXJPcGVyYXRpb24uaXNFbGVjdHJvbmljU3RhbmRhcmRpc2F0aW9uVGVhbU1lbWJlcikge1xyXG4gICAgICAgICAgICBpc0VsZWN0cm9uaWNTdGFuZGFyZGlzYXRpb25UZWFtTWVtYmVyID0gMTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiAoPGRpdiBjbGFzc05hbWU9J2NvbXBvc2UtbmV3LW1zZyByZXNwb25zZS1tZXNzYWdlLWNvbnRhaW5lcicgaWQ9J21lc3NhZ2UtY29udGFpbmVyJz5cclxuICAgICAgICAgICAge3RoaXMucmVuZGVyTWVzc2FnZUhlYWRlcigpfVxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbWVzc2FnaW5nLWNvbnRlbnQnPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2NvbXAtbXNnLXRvcCc+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2NsZWFyZml4Jz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2NvbXAtcmVzcC1pZCBzaGlmdC1sZWZ0Jz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0nZGltLXRleHQnIGlkPSdhc3NvY2lhdGVkLXJlc3BvbnNlLWlkLXRleHQnPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsb2NhbGVTdG9yZS5pbnN0YW5jZS5UcmFuc2xhdGVUZXh0KCdtZXNzYWdpbmcuY29tcG9zZS1tZXNzYWdlLmFzc29jaWF0ZWQtcmVzcG9uc2UnKSArICc6ICd9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J21lc3NhZ2UtcmVzb25zZS1pZCcgaWQ9J2Fzc29jaWF0ZWQtcmVzcG9uc2UtaWQnPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHttZXNzYWdlSGVscGVyLmdldE1hcmtpbmdNb2RlVGV4dChtYXJraW5nTW9kZSwgaXNFbGVjdHJvbmljU3RhbmRhcmRpc2F0aW9uVGVhbU1lbWJlcikgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLnJlc3BvbnNlSWR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nc2V0LXByaW9yaXR5IHNoaWZ0LXJpZ2h0Jz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxNZXNzYWdlUHJpb3JpdHlEcm9wRG93biBpZD17J3NlbGVjdF9wcmlvcml0eSd9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJvcERvd25UeXBlPXtlbnVtcy5Ecm9wRG93blR5cGUuUHJpb3JpdHl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXsnZHJvcGRvd24td3JhcCBhbGlnbi1yaWdodCd9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRJdGVtPXt0aGlzLmdldFByaW9yaXR5RHJvcERvd25JdGVtKHRoaXMucHJpb3JpdHlEcm9wRG93blNlbGVjdGVkSXRlbSl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNPcGVuPXt0aGlzLmNsaWNrZWREcm9wRG93biA9PT0gZW51bXMuRHJvcERvd25UeXBlLlByaW9yaXR5ID8gdGhpcy5pc0Ryb3BEb3duT3BlbiA6IHVuZGVmaW5lZH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtcz17W3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGVudW1zLk1lc3NhZ2VQcmlvcml0eS5TdGFuZGFyZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogdGhpcy5nZXRQcmlvcml0eURyb3BEb3duSXRlbShlbnVtcy5NZXNzYWdlUHJpb3JpdHkuU3RhbmRhcmQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBlbnVtcy5NZXNzYWdlUHJpb3JpdHkuSW1wb3J0YW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLmdldFByaW9yaXR5RHJvcERvd25JdGVtKGVudW1zLk1lc3NhZ2VQcmlvcml0eS5JbXBvcnRhbnQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc2hvd01hbmRhdG9yeU1lc3NhZ2VQcmlvcml0eSA/IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGVudW1zLk1lc3NhZ2VQcmlvcml0eS5NYW5kYXRvcnksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMuZ2V0UHJpb3JpdHlEcm9wRG93bkl0ZW0oZW51bXMuTWVzc2FnZVByaW9yaXR5Lk1hbmRhdG9yeSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IDogbnVsbF19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5vbkRyb3BEb3duQ2xpY2t9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25TZWxlY3Q9e3RoaXMub25TZWxlY3R9IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdtc2ctcmVjaXBpZW50LXdyYXAnPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncmVjLWFkZHJlc3MtbGFiZWwnIGlkPSdtZXNzYWdlLXRvLWxhYmVsJz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsb2NhbGVTdG9yZS5pbnN0YW5jZS5UcmFuc2xhdGVUZXh0KCdtZXNzYWdpbmcuY29tcG9zZS1tZXNzYWdlLnRvLWJ1dHRvbicpICsgJzogJ31cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdyZWNpcGlhbnRzLWxpc3Qtd3JhcCc+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J3JlY2lwaWFudC1uYW1lJyBpZD0nbWVzc2FnZS1yZWNpcGlhbnQtbmFtZSc+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3RoaXMuY3VycmVudEV4YW1pbmVyTmFtZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2NvbXAtc3ViamVjdC13cmFwJz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGh0bWxGb3I9J21lc3NhZ2Utc3ViamVjdCcgaWQ9eydzdWJqZWN0LWxhYmVsJ30gY2xhc3NOYW1lPSdjb21wLXN1YmplY3QtbGFiZWwnPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2xvY2FsZVN0b3JlLmluc3RhbmNlLlRyYW5zbGF0ZVRleHQoJ21lc3NhZ2luZy5jb21wb3NlLW1lc3NhZ2Uuc3ViamVjdCcpICsgJzogJ31cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPFN1YmplY3QgaWQ9eydtZXNzYWdlLXN1YmplY3QnfSBrZXk9eydrZXktbWVzc2FnZS1zdWJqZWN0J30gb3V0ZXJDbGFzcz17J3N1YmplY3QtaW5wdXQtd3JhcCd9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZOYW1lPXsnc3ViamVjdElucHV0J30gaGFzRm9jdXM9e3RoaXMucHJvcHMubWVzc2FnZVR5cGUgPT09IGVudW1zLk1lc3NhZ2VUeXBlLlJlc3BvbnNlQ29tcG9zZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17J3N1YmplY3QtaW5wdXQnfSBvbkNoYW5nZT17dGhpcy5oYW5kbGVTdWJqZWN0Q2hhbmdlfSBtYXhMZW5ndGg9ezEyMH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzVmlzaWJsZT17dGhpcy5wcm9wcy5pc01lc3NhZ2VQYW5lbFZpc2libGV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17dGhpcy5tZXNzYWdlU3ViamVjdH0gY2FsbGJhY2s9e3RoaXMucHJvcHMub25NZXNzYWdlQ2xvc2V9IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdjb21wLW1zZy1ib3R0b20nIHJlZj0nbXNnRWRpdG9yJz5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbXNnLWVkaXRvcic+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxNZXNzYWdlRWRpdG9yIGh0bWxDb250ZW50PXt0aGlzLm1lc3NhZ2VCb2R5fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzRm9jdXM9e21lc3NhZ2VIZWxwZXIuaGFzRm9jdXModGhpcy5wcm9wcy5tZXNzYWdlVHlwZSl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD17dGhpcy5tc2dFZGl0b3JJZH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17J2tleS0nICsgdGhpcy5tc2dFZGl0b3JJZH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvZ2dsZVNhdmVCdXR0b25TdGF0ZT17dGhpcy50b2dnbGVTYXZlQnV0dG9uU3RhdGV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZExhbmd1YWdlPXt0aGlzLnByb3BzLnNlbGVjdGVkTGFuZ3VhZ2V9IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+KTtcclxuXHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTWV0aG9kIHRvIHJlbmRlciBtZXNzYWdlIGhlYWRlci5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSByZW5kZXJNZXNzYWdlSGVhZGVyKCkge1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc05hbWVzKFxyXG4gICAgICAgICAgICAgICAgJ2NsZWFyZml4JyxcclxuICAgICAgICAgICAgICAgIHsgJ3Jlc3BvbnNlLW1zZy1oZWFkZXInOiB0aGlzLnByb3BzLm1lc3NhZ2VUeXBlID09PSBlbnVtcy5NZXNzYWdlVHlwZS5SZXNwb25zZURldGFpbHMgfSxcclxuICAgICAgICAgICAgICAgIHsgJ2NvbXBvc2UtbXNnLWhlYWRlcic6IHRoaXMucHJvcHMubWVzc2FnZVR5cGUgIT09IGVudW1zLk1lc3NhZ2VUeXBlLlJlc3BvbnNlRGV0YWlscyB9KX0+XHJcbiAgICAgICAgICAgICAgICA8aDMgaWQ9J3BvcHVwMlRpdGxlJyBjbGFzc05hbWU9J3NoaWZ0LWxlZnQgY29tcC1tc2ctdGl0bGUnPlxyXG4gICAgICAgICAgICAgICAgICAgIHttZXNzYWdlSGVscGVyLmdldE1lc3NhZ2VIZWFkZXIodGhpcy5wcm9wcy5tZXNzYWdlVHlwZSl9XHJcbiAgICAgICAgICAgICAgICA8L2gzPlxyXG4gICAgICAgICAgICAgICAge3RoaXMuc2VuZEJ1dHRvbigpfVxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2NsYXNzTmFtZXMoXHJcbiAgICAgICAgICAgICAgICAgICAgJ21pbmltaXplLW1lc3NhZ2UnLFxyXG4gICAgICAgICAgICAgICAgICAgIHsgJ3NoaWZ0LWxlZnQnOiB0aGlzLnByb3BzLm1lc3NhZ2VUeXBlID09PSBlbnVtcy5NZXNzYWdlVHlwZS5SZXNwb25zZURldGFpbHMgfSxcclxuICAgICAgICAgICAgICAgICAgICB7ICdzaGlmdC1yaWdodCc6IHRoaXMucHJvcHMubWVzc2FnZVR5cGUgPT09IGVudW1zLk1lc3NhZ2VUeXBlLlJlc3BvbnNlQ29tcG9zZSB9KX0+XHJcbiAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj0namF2YXNjcmlwdDp2b2lkKDApJyBjbGFzc05hbWU9J21pbmltaXplLW1lc3NhZ2UtbGluaycgaWQ9J21lc3NhZ2UtbWluaW1pemUnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtsb2NhbGVTdG9yZS5pbnN0YW5jZS5UcmFuc2xhdGVUZXh0KCdtZXNzYWdpbmcuY29tcG9zZS1tZXNzYWdlLm1pbmltaXNlLWljb24tdG9vbHRpcCcpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLm9uTWluaW1pemV9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J21pbmltaXplLWljb24gbGl0ZSc+TWluaW1pemU8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9hPlxyXG4gICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9J2phdmFzY3JpcHQ6dm9pZCgwKScgY2xhc3NOYW1lPSdtYXhpbWl6ZS1tZXNzYWdlLWxpbmsnIGlkPSdtZXNzYWdlLW1heGltaXplJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17bG9jYWxlU3RvcmUuaW5zdGFuY2UuVHJhbnNsYXRlVGV4dCgnbWVzc2FnaW5nLmNvbXBvc2UtbWVzc2FnZS5tYXhpbWlzZS1pY29uLXRvb2x0aXAnKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5vbk1heGltaXplfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSdtYXhtaXplLWljb24gbGl0ZSc+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bG9jYWxlU3RvcmUuaW5zdGFuY2UuVHJhbnNsYXRlVGV4dCgnbWVzc2FnaW5nLmNvbXBvc2UtbWVzc2FnZS5tYXhpbWlzZS1pY29uLXRvb2x0aXAnKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgICAgICAgICA8YSBocmVmPSdqYXZhc2NyaXB0OnZvaWQoMCknIGNsYXNzTmFtZT0nY2xvc2UtbWVzc2FnZS1saW5rJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17bG9jYWxlU3RvcmUuaW5zdGFuY2UuVHJhbnNsYXRlVGV4dCgnbWVzc2FnaW5nLmNvbXBvc2UtbWVzc2FnZS5jbG9zZS1pY29uLXRvb2x0aXAnKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J21lc3NhZ2UtY2xvc2UnIG9uQ2xpY2s9e3RoaXMub25NZXNzYWdlQ2xvc2V9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J2Nsb3NlLWljb24gbGl0ZSc+Q2xvc2U8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9hPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZW5kIEJ1dHRvbiBpbiBjb21wb3NlIE1lc3NhZ2VcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBzZW5kQnV0dG9uKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnByb3BzLm1lc3NhZ2VUeXBlICE9PSBlbnVtcy5NZXNzYWdlVHlwZS5SZXNwb25zZURldGFpbHMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdzaGlmdC1sZWZ0IGNvbXAtbXNnLWJ1dG9ucyc+XHJcbiAgICAgICAgICAgICAgICAgICAgPEdlbmVyaWNCdXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ9eydtZXNzYWdlX3NlbmRfYnRuJ31cclxuICAgICAgICAgICAgICAgICAgICAgICAga2V5PXsna2V5X21lc3NhZ2Vfc2VuZF9idG4nfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9eydidXR0b24gcHJpbWFyeSByb3VuZGVkJ31cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2xvY2FsZVN0b3JlLmluc3RhbmNlLlRyYW5zbGF0ZVRleHQoJ21lc3NhZ2luZy5jb21wb3NlLW1lc3NhZ2Uuc2VuZC1idXR0b24tdG9vbHRpcCcpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50PXtsb2NhbGVTdG9yZS5pbnN0YW5jZS5UcmFuc2xhdGVUZXh0KCdtZXNzYWdpbmcuY29tcG9zZS1tZXNzYWdlLnNlbmQtYnV0dG9uJyl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXt0aGlzLmlzU2VuZEJ1dHRvbkRpc2FibGVkfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7IHRoaXMubWVzc2FnZVNlbmRWYWxpZGF0aW9uQ2hlY2sodGhpcy5wcm9wcy5tZXNzYWdlVHlwZSk7IH19IC8+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIGdldHMgaW52b2tlZCB3aGVuIHRoZSBjb21wb25lbnQgaXMgYWJvdXQgdG8gYmUgbW91bnRlZFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgY29tcG9uZW50RGlkTW91bnQoKSB7XHJcbiAgICAgICAgbWVzc2FnZVN0b3JlLmluc3RhbmNlLmFkZExpc3RlbmVyKG1lc3NhZ2VTdG9yZS5NZXNzYWdlU3RvcmUuU0VORF9NRVNTQUdFX1NVQ0NFU1NfRVZFTlQsIHRoaXMucmVzZXRBbmRDbG9zZU1lc3NhZ2VQYW5lbCk7XHJcbiAgICAgICAgbWVzc2FnZVN0b3JlLmluc3RhbmNlLmFkZExpc3RlbmVyKG1lc3NhZ2VTdG9yZS5NZXNzYWdlU3RvcmUuTUVTU0FHRV9OQVZJR0FURV9FVkVOVCwgdGhpcy5vbk5hdmlnYXRlQXdheUZyb21SZXNwb25zZSk7XHJcbiAgICAgICAgbWVzc2FnZVN0b3JlLmluc3RhbmNlLmFkZExpc3RlbmVyKG1lc3NhZ2VTdG9yZS5NZXNzYWdlU3RvcmUuUE9QVVBfRElTUExBWV9FVkVOVCxcclxuICAgICAgICAgICAgdGhpcy5vblBvcFVwRGlzcGxheUV2ZW50KTtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9ib3VuZEhhbmRsZU9uQ2xpY2spO1xyXG4gICAgICAgIG1lc3NhZ2VTdG9yZS5pbnN0YW5jZS5hZGRMaXN0ZW5lcihtZXNzYWdlU3RvcmUuTWVzc2FnZVN0b3JlLk1FU1NBR0VfREVMRVRFX0VWRU5ULCB0aGlzLnVwZGF0ZU1lc3NhZ2VEZWxldGVkU3RhdHVzKTtcclxuICAgICAgICBtZXNzYWdlU3RvcmUuaW5zdGFuY2UuYWRkTGlzdGVuZXIobWVzc2FnZVN0b3JlLk1lc3NhZ2VTdG9yZS5NRVNTQUdFX09QRU5fRVZFTlQsIHRoaXMub25NZXNzYWdlUGFuZWxPcGVuKTtcclxuICAgICAgICBtZXNzYWdlU3RvcmUuaW5zdGFuY2UuYWRkTGlzdGVuZXIobWVzc2FnZVN0b3JlLk1lc3NhZ2VTdG9yZS5NRVNTQUdFX05BVklHQVRJT05fRVZFTlQsIHRoaXMub25OYXZpZ2F0ZUZyb21NZXNzYWdlUGFuZWwpO1xyXG4gICAgICAgIG1lc3NhZ2VIZWxwZXIuYWRkSW5pdE1vdXNlQ2xpY2tFdmVudFNjcmlwdEJsb2NrKCk7XHJcbiAgICAgICAgbWVzc2FnZVN0b3JlLmluc3RhbmNlLmFkZExpc3RlbmVyKG1lc3NhZ2VTdG9yZS5NZXNzYWdlU3RvcmUuVEVBTV9MSVNUX1JFQ0VJVkVELCB0aGlzLnRlYW1MaXN0UmVjZWl2ZWQpO1xyXG4gICAgICAgIHRlYW1NYW5hZ2VtZW50U3RvcmUuaW5zdGFuY2UuYWRkTGlzdGVuZXJcclxuICAgICAgICAgICAgKHRlYW1NYW5hZ2VtZW50U3RvcmUuVGVhbU1hbmFnZW1lbnRTdG9yZS5BUFBST1ZBTF9NQU5BR0VNRU5UX0FDVElPTl9FWEVDVVRFRCwgdGhpcy5leGFtaW5lclZhbGlkYXRpb24pO1xyXG4gICAgICAgIGFwcGxpY2F0aW9uU3RvcmUuaW5zdGFuY2UuYWRkTGlzdGVuZXIoYXBwbGljYXRpb25TdG9yZS5BcHBsaWNhdGlvblN0b3JlLk9OTElORV9TVEFUVVNfVVBEQVRFRF9FVkVOVCwgdGhpcy5vbk9ubGluZVN0YXR1c0NoYW5nZWQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhpcyBmdW5jdGlvbiBnZXRzIGludm9rZWQgd2hlbiB0aGUgY29tcG9uZW50IGlzIGFib3V0IHRvIGJlIHVubW91bnRlZFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XHJcbiAgICAgICAgbWVzc2FnZVN0b3JlLmluc3RhbmNlLnJlbW92ZUxpc3RlbmVyKG1lc3NhZ2VTdG9yZS5NZXNzYWdlU3RvcmUuU0VORF9NRVNTQUdFX1NVQ0NFU1NfRVZFTlQsIHRoaXMucmVzZXRBbmRDbG9zZU1lc3NhZ2VQYW5lbCk7XHJcbiAgICAgICAgbWVzc2FnZVN0b3JlLmluc3RhbmNlLnJlbW92ZUxpc3RlbmVyKG1lc3NhZ2VTdG9yZS5NZXNzYWdlU3RvcmUuTUVTU0FHRV9OQVZJR0FURV9FVkVOVCwgdGhpcy5vbk5hdmlnYXRlQXdheUZyb21SZXNwb25zZSk7XHJcbiAgICAgICAgbWVzc2FnZVN0b3JlLmluc3RhbmNlLnJlbW92ZUxpc3RlbmVyKG1lc3NhZ2VTdG9yZS5NZXNzYWdlU3RvcmUuUE9QVVBfRElTUExBWV9FVkVOVCxcclxuICAgICAgICAgICAgdGhpcy5vblBvcFVwRGlzcGxheUV2ZW50KTtcclxuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9ib3VuZEhhbmRsZU9uQ2xpY2spO1xyXG4gICAgICAgIG1lc3NhZ2VTdG9yZS5pbnN0YW5jZS5yZW1vdmVMaXN0ZW5lcihtZXNzYWdlU3RvcmUuTWVzc2FnZVN0b3JlLk1FU1NBR0VfREVMRVRFX0VWRU5ULCB0aGlzLnVwZGF0ZU1lc3NhZ2VEZWxldGVkU3RhdHVzKTtcclxuICAgICAgICBtZXNzYWdlU3RvcmUuaW5zdGFuY2UucmVtb3ZlTGlzdGVuZXIobWVzc2FnZVN0b3JlLk1lc3NhZ2VTdG9yZS5NRVNTQUdFX09QRU5fRVZFTlQsIHRoaXMub25NZXNzYWdlUGFuZWxPcGVuKTtcclxuICAgICAgICBtZXNzYWdlU3RvcmUuaW5zdGFuY2UucmVtb3ZlTGlzdGVuZXIobWVzc2FnZVN0b3JlLk1lc3NhZ2VTdG9yZS5NRVNTQUdFX05BVklHQVRJT05fRVZFTlQsIHRoaXMub25OYXZpZ2F0ZUZyb21NZXNzYWdlUGFuZWwpO1xyXG4gICAgICAgIGlmIChtZXNzYWdlU3RvcmUuaW5zdGFuY2UubWVzc2FnZVZpZXdBY3Rpb24gIT09IGVudW1zLk1lc3NhZ2VWaWV3QWN0aW9uLk5vbmUpIHtcclxuICAgICAgICAgICAgbWVzc2FnaW5nQWN0aW9uQ3JlYXRvci5tZXNzYWdlQWN0aW9uKGVudW1zLk1lc3NhZ2VWaWV3QWN0aW9uLk5vbmUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBtZXNzYWdlSGVscGVyLnJlbW92ZUluaXRNb3VzZUNsaWNrRXZlbnRTY3JpcHRCbG9jaygpO1xyXG4gICAgICAgIG1lc3NhZ2VTdG9yZS5pbnN0YW5jZS5yZW1vdmVMaXN0ZW5lcihtZXNzYWdlU3RvcmUuTWVzc2FnZVN0b3JlLlRFQU1fTElTVF9SRUNFSVZFRCwgdGhpcy50ZWFtTGlzdFJlY2VpdmVkKTtcclxuICAgICAgICB0ZWFtTWFuYWdlbWVudFN0b3JlLmluc3RhbmNlLnJlbW92ZUxpc3RlbmVyXHJcbiAgICAgICAgICAgICh0ZWFtTWFuYWdlbWVudFN0b3JlLlRlYW1NYW5hZ2VtZW50U3RvcmUuQVBQUk9WQUxfTUFOQUdFTUVOVF9BQ1RJT05fRVhFQ1VURUQsIHRoaXMuZXhhbWluZXJWYWxpZGF0aW9uKTtcclxuICAgICAgICBhcHBsaWNhdGlvblN0b3JlLmluc3RhbmNlLnJlbW92ZUxpc3RlbmVyKGFwcGxpY2F0aW9uU3RvcmUuQXBwbGljYXRpb25TdG9yZS5PTkxJTkVfU1RBVFVTX1VQREFURURfRVZFTlQsIHRoaXMub25PbmxpbmVTdGF0dXNDaGFuZ2VkKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHNcclxuICAgICAqIEBwYXJhbSBuZXh0UHJvcHNcclxuICAgICAqL1xyXG4gICAgcHVibGljIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzOiBQcm9wcykge1xyXG4gICAgICAgIC8vIHNldCB0byBmaWVsZCB2YWx1ZXNcclxuICAgICAgICBpZiAobWFya2VyT3BlcmF0aW9uTW9kZUZhY3Rvcnkub3BlcmF0aW9uTW9kZS5zZW5kTWVzc2FnZVRvRXhhbWluZXIobmV4dFByb3BzLm1lc3NhZ2VUeXBlKSkge1xyXG4gICAgICAgICAgICB0aGlzLnRvRmllbGRWYWx1ZXMgPSBuZXcgQXJyYXk8c3RyaW5nPigpO1xyXG5cdFx0XHR0aGlzLnRvRmllbGRJZHMgPSBuZXcgQXJyYXk8bnVtYmVyPigpO1xyXG5cdFx0XHRsZXQgX2N1cnJlbnRFeGFtaW5lcklkOiBudW1iZXIgPSBtYXJrZXJPcGVyYXRpb25Nb2RlRmFjdG9yeS5vcGVyYXRpb25Nb2RlLmlzU3RhbmRhcmRpc2F0aW9uU2V0dXBNb2RlID9cclxuXHRcdFx0XHRzdGFuZGFyZGlzYXRpb25TZXR1cFN0b3JlLmluc3RhbmNlLmdldFByb3Zpc2lvbmFsRXhhbWluZXJJZChtYXJraW5nU3RvcmUuaW5zdGFuY2Uuc2VsZWN0ZWREaXNwbGF5SWQpIDpcclxuXHRcdFx0XHR0ZWFtTWFuYWdlbWVudFN0b3JlLmluc3RhbmNlLmV4YW1pbmVyRHJpbGxEb3duRGF0YS5leGFtaW5lcklkO1xyXG5cdFx0XHRsZXQgX2N1cnJlbnRFeGFtaW5lck5hbWU6IHN0cmluZyA9IG1hcmtlck9wZXJhdGlvbk1vZGVGYWN0b3J5Lm9wZXJhdGlvbk1vZGUuaXNTdGFuZGFyZGlzYXRpb25TZXR1cE1vZGUgP1xyXG5cdFx0XHRcdHN0YW5kYXJkaXNhdGlvblNldHVwU3RvcmUuaW5zdGFuY2UuZ2V0Rm9ybWF0dGVkRXhhbWluZXJOYW1lKG1hcmtpbmdTdG9yZS5pbnN0YW5jZS5zZWxlY3RlZERpc3BsYXlJZClcclxuXHRcdFx0XHQ6IGV4YW1pbmVyU3RvcmUuaW5zdGFuY2UuZ2V0TWFya2VySW5mb3JtYXRpb24uZm9ybWF0dGVkRXhhbWluZXJOYW1lO1xyXG4gICAgICAgICAgICB0aGlzLnRvRmllbGRJZHMucHVzaChfY3VycmVudEV4YW1pbmVySWQpO1xyXG4gICAgICAgICAgICB0aGlzLnRvRmllbGRWYWx1ZXMucHVzaChfY3VycmVudEV4YW1pbmVyTmFtZSk7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEV4YW1pbmVyTmFtZSA9IF9jdXJyZW50RXhhbWluZXJOYW1lO1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRFeGFtaW5lcklkID0gX2N1cnJlbnRFeGFtaW5lcklkO1xyXG4gICAgICAgIH0gZWxzZSBpZiAobmV4dFByb3BzLnN1cGVydmlzb3JJZCA+IDAgJiYgbmV4dFByb3BzLnN1cGVydmlzb3JOYW1lICE9PSAnJykge1xyXG4gICAgICAgICAgICB0aGlzLnRvRmllbGRWYWx1ZXMgPSBuZXcgQXJyYXk8c3RyaW5nPigpO1xyXG4gICAgICAgICAgICB0aGlzLnRvRmllbGRJZHMgPSBuZXcgQXJyYXk8bnVtYmVyPigpO1xyXG4gICAgICAgICAgICB0aGlzLnRvRmllbGRJZHMucHVzaChuZXh0UHJvcHMuc3VwZXJ2aXNvcklkKTtcclxuICAgICAgICAgICAgdGhpcy50b0ZpZWxkVmFsdWVzLnB1c2gobmV4dFByb3BzLnN1cGVydmlzb3JOYW1lKTtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50RXhhbWluZXJOYW1lID0gbmV4dFByb3BzLnN1cGVydmlzb3JOYW1lO1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRFeGFtaW5lcklkID0gbmV4dFByb3BzLnN1cGVydmlzb3JJZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHNldCB2YXJpYWJsZXMgZm9yIHJlcGx5IGFuZCBmb3J3YXJkXHJcbiAgICAgICAgaWYgKHRoaXMucHJvcHMubWVzc2FnZVR5cGUgPT09IGVudW1zLk1lc3NhZ2VUeXBlLlJlc3BvbnNlRGV0YWlscyAmJiAobmV4dFByb3BzLm1lc3NhZ2VUeXBlID09PSBlbnVtcy5NZXNzYWdlVHlwZS5SZXNwb25zZVJlcGx5IHx8XHJcbiAgICAgICAgICAgIG5leHRQcm9wcy5tZXNzYWdlVHlwZSA9PT0gZW51bXMuTWVzc2FnZVR5cGUuUmVzcG9uc2VGb3J3YXJkKSkge1xyXG4gICAgICAgICAgICB0aGlzLnNldHZhcmlhYmxlc0ZvclJlcGx5QW5kRm9yd2FyZChuZXh0UHJvcHMubWVzc2FnZVR5cGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgZnVuY3Rpb24gZ2V0cyBpbnZva2VkIHdoZW4gdGhlIGNvbXBvbmVudCBpcyBhYm91dCB0byBiZSB1cGRhdGVkXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBjb21wb25lbnREaWRVcGRhdGUoKSB7XHJcbiAgICAgICAgLy8gZW5hYmxlIG9yIGRpc2FibGUgc2VuZCBidXR0b24gd2hpbGUgY2hhbmdpbmcgcHJvcHNcclxuICAgICAgICB0aGlzLmVuYWJsZURpc2FibGVTZW5kQnV0dG9uKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBoYW5kbGluZyB0aGUgbGV0aW91cyBwb3B1cCBldmVudHMuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgb25Qb3BVcERpc3BsYXlFdmVudCA9IChwb3BVcFR5cGU6IGVudW1zLlBvcFVwVHlwZSwgcG9wVXBBY3Rpb25UeXBlOiBlbnVtcy5Qb3BVcEFjdGlvblR5cGUsXHJcbiAgICAgICAgcG9wVXBEaXNwbGF5QWN0aW9uLCBhY3Rpb25Gcm9tQ29tYmluZWRQb3B1cDogYm9vbGVhbiA9IGZhbHNlLFxyXG4gICAgICAgIG5hdmlnYXRlVG86IGVudW1zLlNhdmVBbmROYXZpZ2F0ZSA9IGVudW1zLlNhdmVBbmROYXZpZ2F0ZS5ub25lKSA9PiB7XHJcbiAgICAgICAgc3dpdGNoIChwb3BVcFR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSBlbnVtcy5Qb3BVcFR5cGUuRGlzY2FyZE1lc3NhZ2U6XHJcbiAgICAgICAgICAgIGNhc2UgZW51bXMuUG9wVXBUeXBlLkRpc2NhcmRNZXNzYWdlTmF2aWdhdGVBd2F5OlxyXG4gICAgICAgICAgICBjYXNlIGVudW1zLlBvcFVwVHlwZS5EaXNjYXJkT25OZXdNZXNzYWdlQnV0dG9uQ2xpY2s6XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHBvcFVwQWN0aW9uVHlwZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgZW51bXMuUG9wVXBBY3Rpb25UeXBlLlllczpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9wdXBIZWxwZXIuaGFuZGxlUG9wVXBFdmVudHMocG9wVXBUeXBlLCBwb3BVcEFjdGlvblR5cGUsIHRoaXMub25EaXNjYXJkTWVzc2FnZUNvbmZpcm1lZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbkZyb21Db21iaW5lZFBvcHVwLCBuYXZpZ2F0ZVRvKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBlbnVtcy5Qb3BVcEFjdGlvblR5cGUuTm86XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvcHVwSGVscGVyLmhhbmRsZVBvcFVwRXZlbnRzKHBvcFVwVHlwZSwgcG9wVXBBY3Rpb25UeXBlLCB0aGlzLm9uRGlzY2FyZE1lc3NhZ2VDYW5jZWxsZWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2xvc2UgdGhlIG1lc3NhZ2UgcGFuZWwgYWZ0ZXIgZGVsZXRpbmcgdGhlIG1lc3NhZ2VcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSB1cGRhdGVNZXNzYWdlRGVsZXRlZFN0YXR1cygpIHtcclxuICAgICAgICBtZXNzYWdpbmdBY3Rpb25DcmVhdG9yLm1lc3NhZ2VBY3Rpb24oZW51bXMuTWVzc2FnZVZpZXdBY3Rpb24uQ2xvc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhpcyBtZXRob2Qgd2lsbCByZXR1cm4gdGhlIHN1cGVydmlzb3IgZGV0YWlscyBhZ2FpbnN0IGEgcWlnXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZ2V0U3VwZXJ2aXNvckFuZFFJR0RldGFpbHMgPSAocWlnSWQ6IG51bWJlcikgPT4ge1xyXG4gICAgICAgIGxldCBpdGVtOiBJdGVtID0gdGhpcy5xaWdMaXN0SXRlbXMuZmlsdGVyKCh4OiBJdGVtKSA9PiB4LmlkID09PSBxaWdJZClbMF07XHJcbiAgICAgICAgaWYgKGl0ZW0pIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFFpZ0l0ZW1JZCA9IGl0ZW0uaWQ7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRRaWdJdGVtRGlzcGxheWVkID0gaXRlbS5uYW1lO1xyXG4gICAgICAgICAgICB0aGlzLnN1cGVydmlzb3JOYW1lID0gaXRlbS5wYXJlbnRFeGFtaW5lckRpc3BsYXlOYW1lO1xyXG4gICAgICAgICAgICB0aGlzLnN1cGVydmlzb3JJZCA9IGl0ZW0ucGFyZW50RXhhbWluZXJJZDtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFF1ZXN0aW9uUGFwZXJQYXJ0SWQgPSBpdGVtLnF1ZXN0aW9uUGFwZXJQYXJ0SWQ7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEhhbmRsZXMgdGhlIGFjdGlvbiBldmVudCBvbiBUbyBhZGRyZXNzIGxpc3QgUmVjZWl2ZWQuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgdGVhbUxpc3RSZWNlaXZlZCA9ICgpID0+IHtcclxuICAgICAgICBpZiAobWFya2VyT3BlcmF0aW9uTW9kZUZhY3Rvcnkub3BlcmF0aW9uTW9kZS5pc1JlbW92ZU1hbmRhdG9yeU1lc3NhZ2VQcmlvcml0eVJlcXVpcmVkKHRoaXMuY3VycmVudEV4YW1pbmVySWQpKSB7XHJcbiAgICAgICAgICAgIGxldCB0ZWFtcyA9IG1lc3NhZ2VTdG9yZS5pbnN0YW5jZS50ZWFtRGV0YWlscztcclxuICAgICAgICAgICAgaWYgKHRlYW1zKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGVhbXMudGVhbS5zdWJvcmRpbmF0ZXMgJiYgdGVhbXMudGVhbS5zdWJvcmRpbmF0ZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLm1lc3NhZ2VUeXBlID09PSBlbnVtcy5NZXNzYWdlVHlwZS5SZXNwb25zZVJlcGx5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlTWFuZGF0b3J5TWVzc2FnZVByaW9yaXR5ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRTdWJvcmRpbmF0ZUxpc3QodGVhbXMudGVhbS5zdWJvcmRpbmF0ZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh0ZWFtcyAmJiB0ZWFtcy50ZWFtLnN1Ym9yZGluYXRlcyAmJiB0ZWFtcy50ZWFtLnN1Ym9yZGluYXRlcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZU1hbmRhdG9yeU1lc3NhZ2VQcmlvcml0eSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICByZW5kZXJlZE9uOiBEYXRlLm5vdygpXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgc2VsZWN0ZWQgc3Vib3JkaW5hdGVkIGxpc3QuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZ2V0U3Vib3JkaW5hdGVMaXN0KHRlYW1MaXN0OiBBcnJheTxFeGFtaW5lckluZm8+KSB7XHJcbiAgICAgICAgbGV0IHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIHRlYW1MaXN0Lm1hcChmdW5jdGlvbiAoZXhhbWluZXJJbmZvOiBFeGFtaW5lckluZm8pIHtcclxuICAgICAgICAgICAgaWYgKGV4YW1pbmVySW5mby5leGFtaW5lcklkID09PSB0aGF0LnByb3BzLnNlbGVjdGVkTWVzc2FnZS5mcm9tRXhhbWluZXJJZCkge1xyXG4gICAgICAgICAgICAgICAgdGhhdC5yZW1vdmVNYW5kYXRvcnlNZXNzYWdlUHJpb3JpdHkgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZXhhbWluZXJJbmZvLnN1Ym9yZGluYXRlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGF0LmdldFN1Ym9yZGluYXRlTGlzdChleGFtaW5lckluZm8uc3Vib3JkaW5hdGVzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogdG8gc2hvdyBvciBoaWRlIG1hbmRhdG9yeSBtZXNzYWdlIHByaW9yaXR5XHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZG9TaG93TWFuZGF0b3J5TWVzc2FnZVByaW9yaXR5KCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGxldCBjdXJyZW50RXhhbWluZXJBcHByb3ZhbFN0YXR1cyA9IGVudW1zLkV4YW1pbmVyQXBwcm92YWwuTm9uZTtcclxuICAgICAgICBpZiAoZXhhbWluZXJTdG9yZSAmJiBleGFtaW5lclN0b3JlLmluc3RhbmNlLmdldE1hcmtlckluZm9ybWF0aW9uKSB7XHJcbiAgICAgICAgICAgIGN1cnJlbnRFeGFtaW5lckFwcHJvdmFsU3RhdHVzID0gZXhhbWluZXJTdG9yZS5pbnN0YW5jZS5nZXRNYXJrZXJJbmZvcm1hdGlvbi5jdXJyZW50RXhhbWluZXJBcHByb3ZhbFN0YXR1cztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjdXJyZW50RXhhbWluZXJBcHByb3ZhbFN0YXR1cyA9PT0gZW51bXMuRXhhbWluZXJBcHByb3ZhbC5Ob3RBcHByb3ZlZCB8fFxyXG4gICAgICAgICAgICBjdXJyZW50RXhhbWluZXJBcHByb3ZhbFN0YXR1cyA9PT0gZW51bXMuRXhhbWluZXJBcHByb3ZhbC5TdXNwZW5kZWQgfHxcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50RXhhbWluZXJJZCA9PT0gZXhhbWluZXJTdG9yZS5pbnN0YW5jZS5wYXJlbnRFeGFtaW5lcklkKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlTWFuZGF0b3J5TWVzc2FnZVByaW9yaXR5ID0gdHJ1ZTtcclxuICAgICAgICB9IGVsc2UgaWYgKChtYXJrZXJPcGVyYXRpb25Nb2RlRmFjdG9yeS5vcGVyYXRpb25Nb2RlLmlzVGVhbU1hbmFnZW1lbnRNb2RlICYmXHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMubWVzc2FnZVR5cGUgPT09IGVudW1zLk1lc3NhZ2VUeXBlLlJlc3BvbnNlQ29tcG9zZSkpIHtcclxuICAgICAgICAgICAgdGhpcy5yZW1vdmVNYW5kYXRvcnlNZXNzYWdlUHJpb3JpdHkgPSBmYWxzZTtcclxuICAgICAgICB9IGVsc2UgaWYgKHdvcmtsaXN0U3RvcmUuaW5zdGFuY2UuaXNNYXJraW5nQ2hlY2tNb2RlICYmIGN1cnJlbnRFeGFtaW5lckFwcHJvdmFsU3RhdHVzID09PSBlbnVtcy5FeGFtaW5lckFwcHJvdmFsLkFwcHJvdmVkICYmXHJcbiAgICAgICAgICAgIHFpZ1N0b3JlLmluc3RhbmNlLmdldFNlbGVjdGVkUUlHRm9yVGhlTG9nZ2VkSW5Vc2VyLnJvbGUgPT09IGVudW1zLkV4YW1pbmVyUm9sZS5wcmluY2lwYWxFeGFtaW5lcikge1xyXG5cclxuICAgICAgICAgICAgLy8gTWFuZGF0b3J5IG1lc3NhZ2Ugb3B0aW9uIHNob3VsZCBiZSB2aXNpYmxlIGZyb20gTWFya2luZyBjaGVjayBpcyBkb2luZyBmcm9tIHBhcmVudC5cclxuICAgICAgICAgICAgdGhpcy5yZW1vdmVNYW5kYXRvcnlNZXNzYWdlUHJpb3JpdHkgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX21hbmRhdG9yeU1lc3NhZ2VzRnJvbU1hcmtpbmdUb29sQ0MgJiYgIXRoaXMucmVtb3ZlTWFuZGF0b3J5TWVzc2FnZVByaW9yaXR5O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhpcyBtZXRob2Qgd2lsbCBzZXQgdGhlIHN1YmplY3QgYW5kIG1lc3NhZ2UgYm9keSBmb3IgcmVwbHkgYW5kIGZvcndhcmRcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBzZXR2YXJpYWJsZXNGb3JSZXBseUFuZEZvcndhcmQgPSAobWVzc2FnZVR5cGU6IGVudW1zLk1lc3NhZ2VUeXBlKSA9PiB7XHJcbiAgICAgICAgdGhpcy5wcmlvcml0eURyb3Bkb3duU2VsZWN0ZWRJdGVtID0gbWVzc2FnZUhlbHBlci5nZXRQcmlvcml0eURyb3BEb3duU2VsZWN0ZWRJdGVtKHRoaXMucHJvcHMuc2VsZWN0ZWRNZXNzYWdlLnByaW9yaXR5TmFtZSk7XHJcbiAgICAgICAgc3dpdGNoIChtZXNzYWdlVHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlIGVudW1zLk1lc3NhZ2VUeXBlLlJlc3BvbnNlUmVwbHk6XHJcbiAgICAgICAgICAgIGNhc2UgZW51bXMuTWVzc2FnZVR5cGUuUmVzcG9uc2VGb3J3YXJkOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlU3ViamVjdCA9IG1lc3NhZ2VIZWxwZXIuZ2V0U3ViamVjdENvbnRlbnQobWVzc2FnZVR5cGUsIHRoaXMucHJvcHMuc2VsZWN0ZWRNZXNzYWdlLnN1YmplY3QpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlQm9keSA9IG1lc3NhZ2VIZWxwZXIuZ2V0TWVzc2FnZUNvbnRlbnQobWVzc2FnZVR5cGUsXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5zZWxlY3RlZE1lc3NhZ2UuZXhhbWluZXJEZXRhaWxzLmZ1bGxOYW1lLCB0aGlzLnByb3BzLnNlbGVjdGVkTWVzc2FnZS5kaXNwbGF5RGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLnNlbGVjdGVkTXNnRGV0YWlscy5ib2R5KTtcclxuICAgICAgICAgICAgICAgIGlmIChtYXJrZXJPcGVyYXRpb25Nb2RlRmFjdG9yeS5vcGVyYXRpb25Nb2RlLmlzVGVhbU1hbmFnZW1lbnRNb2RlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHFpZ0lkOiBudW1iZXIgPSBvcGVyYXRpb25Nb2RlSGVscGVyLm1hcmtTY2hlbWVHcm91cElkO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBleGFtaW5lclJvbGVJZDogbnVtYmVyID0gb3BlcmF0aW9uTW9kZUhlbHBlci5hdXRob3Jpc2VkRXhhbWluZXJSb2xlSWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGFyZ3M6IHRlYW1Bcmd1bWVudCA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhhbWluZXJSb2xlSWQ6IGV4YW1pbmVyUm9sZUlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBxaWdJZDogcWlnSWRcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2luZ0FjdGlvbkNyZWF0b3IuZ2V0VGVhbURldGFpbHMoYXJncyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhpcyBtZXRob2Qgd2lsbCBjYWxsIG9uIG1lc3NhZ2Ugb3BlblxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIG9uTWVzc2FnZVBhbmVsT3BlbiA9IChtZXNzYWdlVHlwZTogZW51bXMuTWVzc2FnZVR5cGUpID0+IHtcclxuICAgICAgICBpZiAobWVzc2FnZVR5cGUgPT09IGVudW1zLk1lc3NhZ2VUeXBlLlJlc3BvbnNlQ29tcG9zZSkge1xyXG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2VCb2R5ID0gbWVzc2FnZUhlbHBlci5nZXRNZXNzYWdlQ29udGVudChlbnVtcy5NZXNzYWdlVHlwZS5SZXNwb25zZUNvbXBvc2UpO1xyXG4gICAgICAgICAgICAvLyBSZXNldCB0aGUgTmF2aWdhdGlvbiBhZnRlciBvcGVuaW5nIGEgbWVzc2FnZVxyXG4gICAgICAgICAgICB0aGlzLm5hdmlnYXRlVG8gPSBlbnVtcy5TYXZlQW5kTmF2aWdhdGUubm9uZTtcclxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHJlbmRlcmVkT246IERhdGUubm93KCkgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufVxyXG5cclxuXHJcbmV4cG9ydCA9IE1lc3NhZ2U7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9zb3VyY2UtbWFwLWxvYWRlciEuL3NyYy9jb21wb25lbnRzL21lc3NhZ2UvbWVzc2FnZS50c3giXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUtBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTRCQTtBQUFBO0FBb0JBOztBQUVBO0FBQ0E7QUFBQTtBQXBCQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBRUE7QUFFQTtBQUNBO0FBcVJBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBMENBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF6WkE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7O0FBRUE7QUFFQTs7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFJQTtBQUNBO0FBT0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUdBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUdBO0FBQ0E7QUFLQTtBQUNBO0FBR0E7QUFPQTtBQUNBO0FBQ0E7QUFXQTtBQUdBOztBQUVBO0FBQ0E7QUFDQTtBQUtBO0FBR0E7QUFDQTtBQUlBO0FBR0E7QUFFQTtBQUdBO0FBSUE7QUFHQTtBQUtBO0FBRUE7O0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBVUE7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXdCQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQXVDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXNDQTtBQUFBO0FBR0E7Iiwic291cmNlUm9vdCI6IiJ9");

/***/ })

});