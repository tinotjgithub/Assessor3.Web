webpackJsonp([12],{

/***/ 1218:
/* no static exports found */
/* all exports used */
/*!***********************************************************************************!*\
  !*** ./src/components/worklist/markerinformation/markinginstructionfilepanel.tsx ***!
  \***********************************************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar React = __webpack_require__(/*! react */ 0);\r\n/**\r\n * Marking instruction file name panel for download marking instruction pdf.\r\n * @param props\r\n */\r\nvar markingInstructionFilePanel = function (props) {\r\n    return (React.createElement(\"a\", { href: 'javascript:void(0)', id: 'markinginstructionlink_' + props.documentId, className: 'marking-instruction-link', title: props.documentName, onClick: function (e) {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n            props.onMarkInstructionFileClick(props.documentId);\r\n        } }, props.documentName));\r\n};\r\nmodule.exports = markingInstructionFilePanel;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTIxOC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL3dvcmtsaXN0L21hcmtlcmluZm9ybWF0aW9uL21hcmtpbmdpbnN0cnVjdGlvbmZpbGVwYW5lbC50c3g/YmY5NCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xyXG5pbXBvcnQgbG9jYWxlU3RvcmUgPSByZXF1aXJlKCcuLi8uLi8uLi9zdG9yZXMvbG9jYWxlL2xvY2FsZXN0b3JlJyk7XHJcblxyXG4vKipcclxuICogUHJvcGVydGllcyBvZiBjb21wb25lbnQgTWFya2luZ2luc3RydWN0aW9uTGlzdCAuXHJcbiAqIEBwYXJhbSB7UHJvcHN9IHByb3BzXHJcbiAqL1xyXG5pbnRlcmZhY2UgTWFya2luZ2luc3RydWN0aW9uTGlzdFByb3BzIGV4dGVuZHMgTG9jYWxlU2VsZWN0aW9uQmFzZSwgUHJvcHNCYXNlIHtcclxuICAgIGRvY3VtZW50SWQ6IG51bWJlcjtcclxuICAgIGRvY3VtZW50TmFtZTogc3RyaW5nO1xyXG4gICAgb25NYXJrSW5zdHJ1Y3Rpb25GaWxlQ2xpY2s6IEZ1bmN0aW9uO1xyXG4gICAgcmVuZGVyZWRPbjogbnVtYmVyO1xyXG59XHJcblxyXG4vKipcclxuICogTWFya2luZyBpbnN0cnVjdGlvbiBmaWxlIG5hbWUgcGFuZWwgZm9yIGRvd25sb2FkIG1hcmtpbmcgaW5zdHJ1Y3Rpb24gcGRmLlxyXG4gKiBAcGFyYW0gcHJvcHNcclxuICovXHJcbmNvbnN0IG1hcmtpbmdJbnN0cnVjdGlvbkZpbGVQYW5lbDogUmVhY3QuU3RhdGVsZXNzQ29tcG9uZW50PE1hcmtpbmdpbnN0cnVjdGlvbkxpc3RQcm9wcz4gPSAocHJvcHM6IE1hcmtpbmdpbnN0cnVjdGlvbkxpc3RQcm9wcykgPT4ge1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgICA8YSBocmVmPSdqYXZhc2NyaXB0OnZvaWQoMCknIGlkPXsnbWFya2luZ2luc3RydWN0aW9ubGlua18nICsgcHJvcHMuZG9jdW1lbnRJZH1cclxuICAgICAgICAgICAgY2xhc3NOYW1lPSdtYXJraW5nLWluc3RydWN0aW9uLWxpbmsnXHJcbiAgICAgICAgICAgIHRpdGxlPXtwcm9wcy5kb2N1bWVudE5hbWV9XHJcbiAgICAgICAgICAgIG9uQ2xpY2s9eyhlOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICBwcm9wcy5vbk1hcmtJbnN0cnVjdGlvbkZpbGVDbGljayhwcm9wcy5kb2N1bWVudElkKTtcclxuICAgICAgICAgICAgfX0+XHJcbiAgICAgICAgICAgIHtwcm9wcy5kb2N1bWVudE5hbWV9XHJcbiAgICAgICAgPC9hPlxyXG4gICAgKTtcclxufTtcclxuZXhwb3J0ID0gbWFya2luZ0luc3RydWN0aW9uRmlsZVBhbmVsO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vc291cmNlLW1hcC1sb2FkZXIhLi9zcmMvY29tcG9uZW50cy93b3JrbGlzdC9tYXJrZXJpbmZvcm1hdGlvbi9tYXJraW5naW5zdHJ1Y3Rpb25maWxlcGFuZWwudHN4Il0sIm1hcHBpbmdzIjoiO0FBQUE7QUFjQTs7O0FBR0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),

/***/ 1219:
/* no static exports found */
/* all exports used */
/*!*******************************************************************************!*\
  !*** ./src/components/worklist/markerinformation/markinginstructionpanel.tsx ***!
  \*******************************************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar React = __webpack_require__(/*! react */ 0);\r\nvar localeStore = __webpack_require__(/*! ../../../stores/locale/localestore */ 226);\r\nvar markingInstructionStore = __webpack_require__(/*! ../../../stores/markinginstruction/markinginstructionstore */ 532);\r\nvar classNames = __webpack_require__(/*! classnames */ 39);\r\n/**\r\n * MarkingInstructionPanel class\r\n * @param {any} any\r\n * @param {any} any\r\n * @returns\r\n */\r\nvar markingInstructionPanel = function (props) {\r\n    /**\r\n     * Fire On Clicking MarkInstruction File\r\n     * @param {any} source - The source element\r\n     */\r\n    function onMarkInstructionFileClick(documementId) {\r\n        props.onMarkInstructionFileClick(documementId);\r\n    }\r\n    /**\r\n     * Fire On Clicking Mark InstructionPanel Click\r\n     * @param {any} source - The source element\r\n     */\r\n    function onMarkInstructionPanelClick() {\r\n        props.onMarkInstructionPanelClick();\r\n    }\r\n    var markingInstructionDropDownTriangle = markingInstructionStore.instance.markingInstructionList &&\r\n        markingInstructionStore.instance.markingInstructionList.size > 1 ?\r\n        (React.createElement(\"span\", { id: 'sprite-icon toolexpand-icon', className: 'sprite-icon toolexpand-icon' })) : null;\r\n    /**\r\n     * Render component\r\n     */\r\n    return (React.createElement(\"div\", { id: props.id, className: 'marking-instruction-holder' },\r\n        React.createElement(\"a\", { id: 'markinginstructionlink', href: 'javascript:void(0);', onClick: onMarkInstructionPanelClick, className: 'menu-button marking-instruction-btn' },\r\n            React.createElement(\"span\", { id: 'info-icon-blue sprite-icon', className: 'info-icon-blue sprite-icon' }),\r\n            React.createElement(\"span\", { id: 'link-text', className: 'link-text' }, localeStore.instance.TranslateText('marking.worklist.left-panel.marking-instructions')),\r\n            markingInstructionDropDownTriangle)));\r\n};\r\nmodule.exports = markingInstructionPanel;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTIxOS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL3dvcmtsaXN0L21hcmtlcmluZm9ybWF0aW9uL21hcmtpbmdpbnN0cnVjdGlvbnBhbmVsLnRzeD9iNmI2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XHJcbmltcG9ydCBwdXJlUmVuZGVyQ29tcG9uZW50ID0gcmVxdWlyZSgnLi4vLi4vYmFzZS9wdXJlcmVuZGVyY29tcG9uZW50Jyk7XHJcbmltcG9ydCBsb2NhbGVTdG9yZSA9IHJlcXVpcmUoJy4uLy4uLy4uL3N0b3Jlcy9sb2NhbGUvbG9jYWxlc3RvcmUnKTtcclxuaW1wb3J0IG1hcmtpbmdJbnN0cnVjdGlvblN0b3JlID0gcmVxdWlyZSgnLi4vLi4vLi4vc3RvcmVzL21hcmtpbmdpbnN0cnVjdGlvbi9tYXJraW5naW5zdHJ1Y3Rpb25zdG9yZScpO1xyXG5sZXQgY2xhc3NOYW1lcyA9IHJlcXVpcmUoJ2NsYXNzbmFtZXMnKTtcclxuXHJcbmludGVyZmFjZSBNYXJraW5naW5zdHJ1Y3Rpb25MaXN0UHJvcHMgZXh0ZW5kcyBMb2NhbGVTZWxlY3Rpb25CYXNlLCBQcm9wc0Jhc2Uge1xyXG4gICAgb25NYXJrSW5zdHJ1Y3Rpb25GaWxlQ2xpY2s6IEZ1bmN0aW9uO1xyXG4gICAgb25NYXJrSW5zdHJ1Y3Rpb25QYW5lbENsaWNrOiBGdW5jdGlvbjtcclxuICAgIG9uTWFya2luZ0luc3RydWN0b25DbGlja0hhbmRsZXI6IEZ1bmN0aW9uO1xyXG4gICAgcmVuZGVyZWRPbjogbnVtYmVyO1xyXG59XHJcblxyXG4vKipcclxuICogTWFya2luZ0luc3RydWN0aW9uUGFuZWwgY2xhc3NcclxuICogQHBhcmFtIHthbnl9IGFueVxyXG4gKiBAcGFyYW0ge2FueX0gYW55XHJcbiAqIEByZXR1cm5zXHJcbiAqL1xyXG5jb25zdCBtYXJraW5nSW5zdHJ1Y3Rpb25QYW5lbDogUmVhY3QuU3RhdGVsZXNzQ29tcG9uZW50PE1hcmtpbmdpbnN0cnVjdGlvbkxpc3RQcm9wcz4gPSAocHJvcHM6IE1hcmtpbmdpbnN0cnVjdGlvbkxpc3RQcm9wcykgPT4ge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogRmlyZSBPbiBDbGlja2luZyBNYXJrSW5zdHJ1Y3Rpb24gRmlsZSBcclxuICAgICAqIEBwYXJhbSB7YW55fSBzb3VyY2UgLSBUaGUgc291cmNlIGVsZW1lbnRcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gb25NYXJrSW5zdHJ1Y3Rpb25GaWxlQ2xpY2soZG9jdW1lbWVudElkOiBudW1iZXIpIHtcclxuICAgICAgICBwcm9wcy5vbk1hcmtJbnN0cnVjdGlvbkZpbGVDbGljayhkb2N1bWVtZW50SWQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRmlyZSBPbiBDbGlja2luZyBNYXJrIEluc3RydWN0aW9uUGFuZWwgQ2xpY2tcclxuICAgICAqIEBwYXJhbSB7YW55fSBzb3VyY2UgLSBUaGUgc291cmNlIGVsZW1lbnRcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gb25NYXJrSW5zdHJ1Y3Rpb25QYW5lbENsaWNrKCkge1xyXG4gICAgICAgIHByb3BzLm9uTWFya0luc3RydWN0aW9uUGFuZWxDbGljaygpO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBtYXJraW5nSW5zdHJ1Y3Rpb25Ecm9wRG93blRyaWFuZ2xlID0gbWFya2luZ0luc3RydWN0aW9uU3RvcmUuaW5zdGFuY2UubWFya2luZ0luc3RydWN0aW9uTGlzdCAmJlxyXG4gICAgICAgIG1hcmtpbmdJbnN0cnVjdGlvblN0b3JlLmluc3RhbmNlLm1hcmtpbmdJbnN0cnVjdGlvbkxpc3Quc2l6ZSA+IDEgP1xyXG4gICAgICAgICg8c3BhbiBpZD0nc3ByaXRlLWljb24gdG9vbGV4cGFuZC1pY29uJyBjbGFzc05hbWU9J3Nwcml0ZS1pY29uIHRvb2xleHBhbmQtaWNvbic+PC9zcGFuPikgOiBudWxsO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVuZGVyIGNvbXBvbmVudFxyXG4gICAgICovXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICAgIDxkaXYgaWQ9e3Byb3BzLmlkfSBjbGFzc05hbWU9eydtYXJraW5nLWluc3RydWN0aW9uLWhvbGRlcid9PlxyXG4gICAgICAgICAgICA8YSBpZD0nbWFya2luZ2luc3RydWN0aW9ubGluaycgaHJlZj0namF2YXNjcmlwdDp2b2lkKDApOydcclxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e29uTWFya0luc3RydWN0aW9uUGFuZWxDbGlja30gY2xhc3NOYW1lPSdtZW51LWJ1dHRvbiBtYXJraW5nLWluc3RydWN0aW9uLWJ0bic+XHJcbiAgICAgICAgICAgICAgICA8c3BhbiBpZD0naW5mby1pY29uLWJsdWUgc3ByaXRlLWljb24nIGNsYXNzTmFtZT0naW5mby1pY29uLWJsdWUgc3ByaXRlLWljb24nPjwvc3Bhbj5cclxuICAgICAgICAgICAgICAgIDxzcGFuIGlkPSdsaW5rLXRleHQnIGNsYXNzTmFtZT0nbGluay10ZXh0Jz5cclxuICAgICAgICAgICAgICAgICAgICB7bG9jYWxlU3RvcmUuaW5zdGFuY2UuVHJhbnNsYXRlVGV4dCgnbWFya2luZy53b3JrbGlzdC5sZWZ0LXBhbmVsLm1hcmtpbmctaW5zdHJ1Y3Rpb25zJyl9XHJcbiAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICB7bWFya2luZ0luc3RydWN0aW9uRHJvcERvd25UcmlhbmdsZX1cclxuICAgICAgICAgICAgPC9hPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgKTtcclxufTtcclxuXHJcbmV4cG9ydCA9IG1hcmtpbmdJbnN0cnVjdGlvblBhbmVsO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vc291cmNlLW1hcC1sb2FkZXIhLi9zcmMvY29tcG9uZW50cy93b3JrbGlzdC9tYXJrZXJpbmZvcm1hdGlvbi9tYXJraW5naW5zdHJ1Y3Rpb25wYW5lbC50c3giXSwibWFwcGluZ3MiOiI7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQVNBOzs7OztBQUtBO0FBQ0E7QUFFQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBR0E7QUFJQTtBQUVBOyIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),

/***/ 1262:
/* no static exports found */
/* all exports used */
/*!****************************************************************************!*\
  !*** ./src/dataservices/markinginstructions/markinginstrcutionargument.ts ***!
  \****************************************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar MarkingInstrcutionArgument = /** @class */ (function () {\r\n    /**\r\n     * Initializing new instance of allocation.\r\n     */\r\n    function MarkingInstrcutionArgument(documentId, questionPaperId, markSchemeGroupId, markingInstructionLevel, markingInstructionId, isAlreadyRead) {\r\n        this.documentId = documentId;\r\n        this.questionPaperId = questionPaperId;\r\n        this.markSchemeGroupId = markSchemeGroupId;\r\n        this.markingInstructionLevel = markingInstructionLevel;\r\n        this.markingInstructionId = markingInstructionId;\r\n        this.isAlreadyRead = isAlreadyRead;\r\n    }\r\n    return MarkingInstrcutionArgument;\r\n}());\r\nmodule.exports = MarkingInstrcutionArgument;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTI2Mi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9kYXRhc2VydmljZXMvbWFya2luZ2luc3RydWN0aW9ucy9tYXJraW5naW5zdHJjdXRpb25hcmd1bWVudC50cz9iMTFjIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIE1hcmtpbmdJbnN0cmN1dGlvbkFyZ3VtZW50IHtcclxuICAgIHByaXZhdGUgZG9jdW1lbnRJZDogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBxdWVzdGlvblBhcGVySWQ6IG51bWJlcjtcclxuICAgIHByaXZhdGUgbWFya1NjaGVtZUdyb3VwSWQ6IG51bWJlcjtcclxuICAgIHByaXZhdGUgbWFya2luZ0luc3RydWN0aW9uTGV2ZWw6IG51bWJlcjtcclxuICAgIHByaXZhdGUgbWFya2luZ0luc3RydWN0aW9uSWQ6IG51bWJlcjtcclxuICAgIHByaXZhdGUgaXNBbHJlYWR5UmVhZDogYm9vbGVhbjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEluaXRpYWxpemluZyBuZXcgaW5zdGFuY2Ugb2YgYWxsb2NhdGlvbi5cclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoZG9jdW1lbnRJZDogbnVtYmVyLFxyXG4gICAgICAgIHF1ZXN0aW9uUGFwZXJJZDogbnVtYmVyLFxyXG4gICAgICAgIG1hcmtTY2hlbWVHcm91cElkOiBudW1iZXIsXHJcbiAgICAgICAgbWFya2luZ0luc3RydWN0aW9uTGV2ZWw6IG51bWJlcixcclxuICAgICAgICBtYXJraW5nSW5zdHJ1Y3Rpb25JZDogbnVtYmVyLFxyXG4gICAgICAgIGlzQWxyZWFkeVJlYWQ6IGJvb2xlYW4pIHtcclxuICAgICAgICB0aGlzLmRvY3VtZW50SWQgPSBkb2N1bWVudElkO1xyXG4gICAgICAgIHRoaXMucXVlc3Rpb25QYXBlcklkID0gcXVlc3Rpb25QYXBlcklkO1xyXG4gICAgICAgIHRoaXMubWFya1NjaGVtZUdyb3VwSWQgPSBtYXJrU2NoZW1lR3JvdXBJZDtcclxuICAgICAgICB0aGlzLm1hcmtpbmdJbnN0cnVjdGlvbkxldmVsID0gbWFya2luZ0luc3RydWN0aW9uTGV2ZWw7XHJcbiAgICAgICAgdGhpcy5tYXJraW5nSW5zdHJ1Y3Rpb25JZCA9IG1hcmtpbmdJbnN0cnVjdGlvbklkO1xyXG4gICAgICAgIHRoaXMuaXNBbHJlYWR5UmVhZCA9IGlzQWxyZWFkeVJlYWQ7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0ID0gTWFya2luZ0luc3RyY3V0aW9uQXJndW1lbnQ7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9zb3VyY2UtbWFwLWxvYWRlciEuL3NyYy9kYXRhc2VydmljZXMvbWFya2luZ2luc3RydWN0aW9ucy9tYXJraW5naW5zdHJjdXRpb25hcmd1bWVudC50cyJdLCJtYXBwaW5ncyI6IjtBQUFBO0FBUUE7O0FBRUE7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),

/***/ 282:
/* no static exports found */
/* all exports used */
/*!*******************************************************!*\
  !*** ./src/components/utility/submit/submithelper.ts ***!
  \*******************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar enums = __webpack_require__(/*! ../enums */ 225);\r\nvar Immutable = __webpack_require__(/*! immutable */ 40);\r\nvar worklistStore = __webpack_require__(/*! ../../../stores/worklist/workliststore */ 231);\r\nvar configurableCharacteristicsHelper = __webpack_require__(/*! ../../../utility/configurablecharacteristic/configurablecharacteristicshelper */ 233);\r\nvar configurableCharacteristicsNames = __webpack_require__(/*! ../../../utility/configurablecharacteristic/configurablecharacteristicsnames */ 234);\r\nvar examinerStore = __webpack_require__(/*! ../../../stores/markerinformation/examinerstore */ 259);\r\nvar markingHelper = __webpack_require__(/*! ../../../utility/markscheme/markinghelper */ 267);\r\nvar targetHelper = __webpack_require__(/*! ../../../utility/target/targethelper */ 300);\r\nvar qigStore = __webpack_require__(/*! ../../../stores/qigselector/qigstore */ 230);\r\nvar submitActionCreator = __webpack_require__(/*! ../../../actions/submit/submitactioncreator */ 297);\r\nvar responseActionCreator = __webpack_require__(/*! ../../../actions/response/responseactioncreator */ 257);\r\nvar marksandannotationsSaveHelper = __webpack_require__(/*! ../../../utility/marking/marksandannotationssavehelper */ 295);\r\nvar loginStore = __webpack_require__(/*! ../../../stores/login/loginstore */ 286);\r\nvar markerOperationModeFactory = __webpack_require__(/*! ../markeroperationmode/markeroperationmodefactory */ 232);\r\nvar submitStore = __webpack_require__(/*! ../../../stores/submit/submitstore */ 293);\r\nvar responseStore = __webpack_require__(/*! ../../../stores/response/responsestore */ 235);\r\nvar standardisationSetupStore = __webpack_require__(/*! ../../../stores/standardisationsetup/standardisationsetupstore */ 237);\r\nvar eCourseworkHelper = __webpack_require__(/*! ../ecoursework/ecourseworkhelper */ 238);\r\nvar eCourseWorkFileStore = __webpack_require__(/*! ../../../stores/response/digital/ecourseworkfilestore */ 278);\r\nvar navigationStore = __webpack_require__(/*! ../../../stores/navigation/navigationstore */ 275);\r\nvar standardisationActionCreator = __webpack_require__(/*! ../../../actions/standardisationsetup/standardisationactioncreator */ 251);\r\n/**\r\n * Submit helper for submitting the response from Response and worklist\r\n */\r\nvar SubmitHelper = /** @class */ (function () {\r\n    function SubmitHelper() {\r\n        this.calculateAllpagesAnnotatedLogic = false;\r\n    }\r\n    /**\r\n     * Validate submit button\r\n     * @param response\r\n     * @param markingProgress\r\n     * @param calculateAllpagesAnnotatedLogic\r\n     */\r\n    SubmitHelper.prototype.submitButtonValidate = function (response, markingProgress, calculateAllpagesAnnotatedLogic, hasBlockingExceptions) {\r\n        this.markingProgress = markingProgress;\r\n        this.calculateAllpagesAnnotatedLogic = calculateAllpagesAnnotatedLogic;\r\n        this.responseStatuses = Immutable.List();\r\n        this.responseStatuses.clear();\r\n        if (worklistStore.instance.getResponseMode === enums.ResponseMode.open) {\r\n            this.responseStatuses = this.openResponseValidation(response, hasBlockingExceptions);\r\n        }\r\n        else if (markerOperationModeFactory.operationMode.isStandardisationSetupMode) {\r\n            if (standardisationSetupStore.instance.selectedStandardisationSetupWorkList ===\r\n                enums.StandardisationSetup.ProvisionalResponse ||\r\n                standardisationSetupStore.instance.selectedStandardisationSetupWorkList ===\r\n                    enums.StandardisationSetup.UnClassifiedResponse) {\r\n                this.responseStatuses = this.openResponseValidation(response, hasBlockingExceptions);\r\n            }\r\n        }\r\n        return this.responseStatuses;\r\n    };\r\n    /**\r\n     * Open live worklist validation for marking progress/submit button\r\n     * @param response\r\n     */\r\n    SubmitHelper.prototype.openResponseValidation = function (response, hasBlockingExceptions) {\r\n        response.isSubmitEnabled = false;\r\n        /** if the marking has started */\r\n        if (this.markingProgress > 0) {\r\n            /** if the marking is completed */\r\n            if (this.markingProgress === 100) {\r\n                /** taking the cc from cc helper */\r\n                // Avoid ForceAnnotationOnEachPage CC while opening single response in multiQig\r\n                // Apply ForceAnnotationOnEachPage CC for all QIGs in the whole response when it turned on for at least one QIG\r\n                var markSchemeGroupId = 0;\r\n                var markGroupId = (standardisationSetupStore.instance.selectedStandardisationSetupWorkList === enums.StandardisationSetup.None) ?\r\n                    response.markGroupId : response.esMarkGroupId;\r\n                var isAllFilesViewed = true;\r\n                if (navigationStore.instance.containerPage === enums.PageContainers.Response) {\r\n                    isAllFilesViewed = eCourseWorkFileStore.instance.checkIfAllFilesViewed(markGroupId);\r\n                }\r\n                else {\r\n                    isAllFilesViewed = response.allFilesViewed;\r\n                }\r\n                if (!responseStore.instance.isWholeResponse) {\r\n                    markSchemeGroupId = qigStore.instance.getSelectedQIGForTheLoggedInUser.markSchemeGroupId;\r\n                }\r\n                var isAllPagesAnnotatedCC = configurableCharacteristicsHelper.getCharacteristicValue(configurableCharacteristicsNames.ForceAnnotationOnEachPage, markSchemeGroupId).toLowerCase() === 'true' ? true : false;\r\n                var isAllSLAOAnnotatedCC = configurableCharacteristicsHelper.getCharacteristicValue(configurableCharacteristicsNames.SLAOForcedAnnotations, markSchemeGroupId).toLowerCase() === 'true' ? true : false;\r\n                /** if slao annotated cc is on and all pages are not annotated OR all pages annotated cc is on\r\n                 *  and all pages are not annotated if both CCs are on, all pages annotated cc has\r\n                 *  the higher priority.\r\n                 */\r\n                if (this.calculateAllpagesAnnotatedLogic === true && (isAllPagesAnnotatedCC || isAllSLAOAnnotatedCC)) {\r\n                    response.hasAllPagesAnnotated = markingHelper.isAllPageAnnotated();\r\n                }\r\n                if (standardisationSetupStore.instance.selectedStandardisationSetupWorkList ===\r\n                    enums.StandardisationSetup.UnClassifiedResponse &&\r\n                    !standardisationSetupStore.instance.stdSetupPermissionCCData.role.permissions.viewDefinitives) {\r\n                    // STD UnClassified Response with No View Definitive Permission\r\n                    this.responseStatuses = this.responseStatuses.push(enums.ResponseStatus.NoViewDefinitivesPermisssion);\r\n                }\r\n                else if (standardisationSetupStore.instance.selectedStandardisationSetupWorkList ===\r\n                    enums.StandardisationSetup.UnClassifiedResponse && response.hasDefinitiveMark === false) {\r\n                    // STD UnClassified Response with Definitive Marking Not Started\r\n                    this.responseStatuses = this.responseStatuses.push(enums.ResponseStatus.definitiveMarkingNotStarted);\r\n                }\r\n                else if (standardisationSetupStore.instance.selectedStandardisationSetupWorkList ===\r\n                    enums.StandardisationSetup.UnClassifiedResponse &&\r\n                    !standardisationSetupStore.instance.stdSetupPermissionCCData.role.permissions.classify) {\r\n                    // STD UnClassified Response with No permission to Classify\r\n                    this.responseStatuses = this.responseStatuses.push(enums.ResponseStatus.NoPermissionToClassify);\r\n                }\r\n                else if ((!isAllPagesAnnotatedCC && isAllSLAOAnnotatedCC && response.hasAllPagesAnnotated === false)\r\n                    || (isAllPagesAnnotatedCC && response.hasAllPagesAnnotated === false)) {\r\n                    this.responseStatuses = this.responseStatuses.push(enums.ResponseStatus.notAllPagesAnnotated);\r\n                    this.responseStatuses = this.responseStatuses.push(enums.ResponseStatus.markingInProgress);\r\n                    if (hasBlockingExceptions) {\r\n                        this.responseStatuses = this.responseStatuses.push(enums.ResponseStatus.hasException);\r\n                    }\r\n                }\r\n                else if (eCourseworkHelper.isECourseworkComponent && !isAllFilesViewed) {\r\n                    this.responseStatuses = this.responseStatuses.push(enums.ResponseStatus.notAllFilesViewed);\r\n                    if (hasBlockingExceptions) {\r\n                        this.responseStatuses = this.responseStatuses.push(enums.ResponseStatus.hasException);\r\n                    }\r\n                }\r\n                else if (hasBlockingExceptions) {\r\n                    /**\r\n                     * if the marking is completed and blocking exceptions are there, show both.\r\n                     */\r\n                    this.responseStatuses = this.responseStatuses.push(enums.ResponseStatus.hasException);\r\n                    this.responseStatuses = this.responseStatuses.push(enums.ResponseStatus.markingInProgress);\r\n                }\r\n                else if (response.hasZoningExceptions) {\r\n                    /** if the marking is completed and zoning exceptions are there, show both. */\r\n                    this.responseStatuses = this.responseStatuses.push(enums.ResponseStatus.hasZoningException);\r\n                    this.responseStatuses = this.responseStatuses.push(enums.ResponseStatus.markingInProgress);\r\n                }\r\n                else {\r\n                    /**\r\n                     * if all pages annotated cc is off and if no blocking exceptions are there, show ready to submit button\r\n                     */\r\n                    this.responseStatuses = this.responseStatuses.push(enums.ResponseStatus.readyToSubmit);\r\n                    response.isSubmitEnabled = true;\r\n                }\r\n            }\r\n            else if (hasBlockingExceptions) {\r\n                /**\r\n                 * if the marking is in progress and blocking exceptions are there, show both.\r\n                 */\r\n                this.responseStatuses = this.responseStatuses.push(enums.ResponseStatus.hasException);\r\n                this.responseStatuses = this.responseStatuses.push(enums.ResponseStatus.markingInProgress);\r\n            }\r\n            else if (standardisationSetupStore.instance.selectedStandardisationSetupWorkList ===\r\n                enums.StandardisationSetup.UnClassifiedResponse &&\r\n                !standardisationSetupStore.instance.stdSetupPermissionCCData.role.permissions.viewDefinitives) {\r\n                this.responseStatuses = this.responseStatuses.push(enums.ResponseStatus.NoViewDefinitivesPermisssion);\r\n            }\r\n            else {\r\n                this.responseStatuses = this.responseStatuses.push(enums.ResponseStatus.markingInProgress);\r\n            }\r\n        }\r\n        else {\r\n            //If StandardisationSetup UnClassifiedResponse and defenitive marking percentage iz Zero then show status as 0%\r\n            if (standardisationSetupStore.instance.selectedStandardisationSetupWorkList ===\r\n                enums.StandardisationSetup.UnClassifiedResponse) {\r\n                // If the logged in user has 'No View Definitive' Permission, then show status as 'Provisional'.\r\n                if (!standardisationSetupStore.instance.stdSetupPermissionCCData.role.permissions.viewDefinitives) {\r\n                    this.responseStatuses = this.responseStatuses.push(enums.ResponseStatus.NoViewDefinitivesPermisssion);\r\n                }\r\n                else {\r\n                    this.responseStatuses = this.responseStatuses.push(enums.ResponseStatus.markingInProgress);\r\n                }\r\n            }\r\n            else {\r\n                // if marking not started show the same\r\n                this.responseStatuses = this.responseStatuses.push(enums.ResponseStatus.markingNotStarted);\r\n            }\r\n        }\r\n        return this.responseStatuses;\r\n    };\r\n    /**\r\n     * Save and submit response for the markgroupid\r\n     * @param markGroupId\r\n     */\r\n    SubmitHelper.saveAndSubmitResponse = function (markGroupId) {\r\n        marksandannotationsSaveHelper.triggerMarksAndAnnotationsQueueProcessing(enums.SaveMarksAndAnnotationsProcessingTriggerPoint.Submit, function () {\r\n            SubmitHelper.submitreponse(markGroupId);\r\n        });\r\n    };\r\n    /**\r\n     * Save and classify response\r\n     * @param esMarkGroupId\r\n     * @param responseDetails\r\n     */\r\n    SubmitHelper.saveAndClassifyResponse = function (esMarkGroupId, responseDetails) {\r\n        marksandannotationsSaveHelper.triggerMarksAndAnnotationsQueueProcessing(enums.SaveMarksAndAnnotationsProcessingTriggerPoint.Classify, function () {\r\n            standardisationActionCreator.classifyResponse(responseDetails, navigationStore.instance.containerPage);\r\n        });\r\n    };\r\n    /**\r\n     * Save and classify response\r\n     * @param esMarkGroupId\r\n     * @param responseDetails\r\n     */\r\n    SubmitHelper.saveAndShareAndClassifyResponse = function (submitResponseArgument, sharedFromMarkScheme, selectedDisplayId) {\r\n        if (sharedFromMarkScheme === void 0) { sharedFromMarkScheme = false; }\r\n        if (selectedDisplayId === void 0) { selectedDisplayId = undefined; }\r\n        marksandannotationsSaveHelper.triggerMarksAndAnnotationsQueueProcessing(enums.SaveMarksAndAnnotationsProcessingTriggerPoint.ShareAndClassify, function () {\r\n            submitActionCreator.shareAndClassifyResponse(submitResponseArgument, sharedFromMarkScheme, selectedDisplayId);\r\n        });\r\n    };\r\n    /**\r\n     *  Verify if marks and annotations can be cleared or not\r\n     *\r\n     *  In Case of Blind Practice Marking, standardisation marking, isQualityFeedbackOutstanding of seed,\r\n     *  the definitive marks are not retrieved from gateway for open responses\r\n     *  So after submission of a practice response we need to clear the existing marks and annotation so that the\r\n     *  Marks and annotations will be retrieved from gateway. The same logic is done in worklist as well\r\n     *  @param markGroupId\r\n     */\r\n    SubmitHelper.isClearMarksAndAnnotations = function (markGroupId) {\r\n        // check isBlindPracticeMarkingOn CC is turned On \r\n        var isBlindPracticeMarkingOn = configurableCharacteristicsHelper.getCharacteristicValue(configurableCharacteristicsNames.BlindPracticeMarking).toLowerCase() === 'true';\r\n        // check isShowStandardisationDefinitiveMarks CC is turned On\r\n        var isShowStandardisationDefinitiveMarks = configurableCharacteristicsHelper.getCharacteristicValue(configurableCharacteristicsNames.ShowStandardisationDefinitiveMarks, qigStore.instance.selectedQIGForMarkerOperation.markSchemeGroupId).toLowerCase() === 'true';\r\n        // check AutomaticQualityFeedback CC is turned ON\r\n        var isAutomaticQualityFeedback = configurableCharacteristicsHelper.getCharacteristicValue(configurableCharacteristicsNames.AutomaticQualityFeedback, qigStore.instance.selectedQIGForMarkerOperation.markSchemeGroupId).toLowerCase() === 'true';\r\n        // check whether the current response type is standardisation/secondstandardisation marking \r\n        // and corresponding cc is ON for showing  previous definitive mark after submitting.\r\n        var isStandardisation = (worklistStore.instance.currentWorklistType === enums.WorklistType.standardisation\r\n            || worklistStore.instance.currentWorklistType === enums.WorklistType.secondstandardisation)\r\n            && isShowStandardisationDefinitiveMarks ? true : false;\r\n        // check whether the current response type is Practice and corresponding cc is ON for showing\r\n        // previous definitive mark after submitting.\r\n        var isPractice = worklistStore.instance.currentWorklistType === enums.WorklistType.practice\r\n            && isBlindPracticeMarkingOn ? true : false;\r\n        var isSeed = false;\r\n        var seedCollection = submitStore.instance.getSubmitResponseReturn.seedCollection[markGroupId];\r\n        if (seedCollection) {\r\n            // check whether the submitted response is seed or not and if Quality feedback CC is ON or not\r\n            isSeed = isAutomaticQualityFeedback && seedCollection.seedType !== enums.SeedType.None;\r\n        }\r\n        return isStandardisation || isPractice || isSeed;\r\n    };\r\n    /**\r\n     * Submit response\r\n     * @param markGroupId\r\n     */\r\n    SubmitHelper.submitreponse = function (markGroupId) {\r\n        var submitResponseArgument;\r\n        var currentWorklistType;\r\n        var getRemarkRequestType;\r\n        var isStdSetupMode;\r\n        /* Submitting  responses initiated */\r\n        /* Select the mark group list based on the current response mode */\r\n        var markGroupIdList = new Array();\r\n        markGroupIdList.push(markGroupId);\r\n        if (responseStore.instance.isWholeResponse) {\r\n            // If a whole response, retrieve all the related markGroupIds\r\n            var relatedMarkGroupIds = worklistStore.instance.getRelatedMarkGroupIdsForWholeResponse(markGroupId);\r\n            // Update related markGroupIds for whole response submission from mark scheme panel\r\n            // For Atypical, the isWholeResponse flag is true always, so also checking the retrieved list length\r\n            if (relatedMarkGroupIds.length > 0) {\r\n                relatedMarkGroupIds.map(function (relatedMarkGroupId) {\r\n                    markGroupIdList.push(relatedMarkGroupId);\r\n                });\r\n            }\r\n        }\r\n        /* mapping values on submit argument*/\r\n        submitResponseArgument = {\r\n            markGroupIds: standardisationSetupStore.instance.selectedStandardisationSetupWorkList ===\r\n                enums.StandardisationSetup.ProvisionalResponse ? [markGroupId] : markGroupIdList,\r\n            markingMode: standardisationSetupStore.instance.selectedStandardisationSetupWorkList ===\r\n                enums.StandardisationSetup.ProvisionalResponse ? enums.MarkingMode.PreStandardisation\r\n                : targetHelper.getSelectedQigMarkingMode(),\r\n            examinerRoleId: qigStore.instance.selectedQIGForMarkerOperation.examinerRoleId,\r\n            markSchemeGroupId: qigStore.instance.selectedQIGForMarkerOperation.markSchemeGroupId,\r\n            examinerApproval: examinerStore.instance.getMarkerInformation.approvalStatus,\r\n            isAdminRemarker: loginStore.instance.isAdminRemarker\r\n        };\r\n        if (standardisationSetupStore.instance.selectedStandardisationSetupWorkList ===\r\n            enums.StandardisationSetup.ProvisionalResponse) {\r\n            currentWorklistType = enums.WorklistType.none;\r\n            getRemarkRequestType = enums.RemarkRequestType.Unknown;\r\n            isStdSetupMode = true;\r\n        }\r\n        else {\r\n            currentWorklistType = worklistStore.instance.currentWorklistType;\r\n            getRemarkRequestType = worklistStore.instance.getRemarkRequestType;\r\n            isStdSetupMode = false;\r\n        }\r\n        //let remarkRequestType: enums.RemarkRequestType = this.getRemarkRequestType(.worklistType);\r\n        /* calling to send data to server */\r\n        submitActionCreator.submitResponse(submitResponseArgument, qigStore.instance.selectedQIGForMarkerOperation.markSchemeGroupId, currentWorklistType, getRemarkRequestType, true, responseStore.instance.selectedDisplayId.toString(), null, null, isStdSetupMode);\r\n    };\r\n    /**\r\n     * Clear the marks and Annotation for responses so that the marks will be reloaded\r\n     * @param submittedMarkGroupIds\r\n     */\r\n    SubmitHelper.clearMarksAndAnnotations = function (submittedMarkGroupIds) {\r\n        // check whether we need to clear marks and annoatation for pracice and standazation response.\r\n        if (submittedMarkGroupIds !== undefined) {\r\n            for (var _i = 0, submittedMarkGroupIds_1 = submittedMarkGroupIds; _i < submittedMarkGroupIds_1.length; _i++) {\r\n                var markGroupId = submittedMarkGroupIds_1[_i];\r\n                // Verify if marks and annotations of the submitted response can be cleared\r\n                if (SubmitHelper.isClearMarksAndAnnotations(markGroupId)) {\r\n                    // Calling the action creator to clear the marks and annotations\r\n                    responseActionCreator.clearMarksAndAnnotations(markGroupId);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    return SubmitHelper;\r\n}());\r\nmodule.exports = SubmitHelper;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjgyLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvdXRpbGl0eS9zdWJtaXQvc3VibWl0aGVscGVyLnRzP2I1N2EiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGVudW1zID0gcmVxdWlyZSgnLi4vZW51bXMnKTtcclxuaW1wb3J0IHdvcmtMaXN0VmFsaWRhdG9yU2NoZW1hID0gcmVxdWlyZSgnLi4vLi4vLi4vdXRpbGl0eS93b3JrbGlzdHZhbGlkYXRvcnMvd29ya2xpc3R2YWxpZGF0b3JzY2hlbWEnKTtcclxuaW1wb3J0IEltbXV0YWJsZSA9IHJlcXVpcmUoJ2ltbXV0YWJsZScpO1xyXG5pbXBvcnQgd29ya2xpc3RTdG9yZSA9IHJlcXVpcmUoJy4uLy4uLy4uL3N0b3Jlcy93b3JrbGlzdC93b3JrbGlzdHN0b3JlJyk7XHJcbmltcG9ydCBjb25maWd1cmFibGVDaGFyYWN0ZXJpc3RpY3NIZWxwZXIgPSByZXF1aXJlKCcuLi8uLi8uLi91dGlsaXR5L2NvbmZpZ3VyYWJsZWNoYXJhY3RlcmlzdGljL2NvbmZpZ3VyYWJsZWNoYXJhY3RlcmlzdGljc2hlbHBlcicpO1xyXG5pbXBvcnQgY29uZmlndXJhYmxlQ2hhcmFjdGVyaXN0aWNzTmFtZXMgPSByZXF1aXJlKCcuLi8uLi8uLi91dGlsaXR5L2NvbmZpZ3VyYWJsZWNoYXJhY3RlcmlzdGljL2NvbmZpZ3VyYWJsZWNoYXJhY3RlcmlzdGljc25hbWVzJyk7XHJcbmltcG9ydCBleGFtaW5lclN0b3JlID0gcmVxdWlyZSgnLi4vLi4vLi4vc3RvcmVzL21hcmtlcmluZm9ybWF0aW9uL2V4YW1pbmVyc3RvcmUnKTtcclxuaW1wb3J0IHJlc3BvbnNlSGVscGVyID0gcmVxdWlyZSgnLi4vcmVzcG9uc2VoZWxwZXIvcmVzcG9uc2VoZWxwZXInKTtcclxuaW1wb3J0IG1hcmtpbmdIZWxwZXIgPSByZXF1aXJlKCcuLi8uLi8uLi91dGlsaXR5L21hcmtzY2hlbWUvbWFya2luZ2hlbHBlcicpO1xyXG5pbXBvcnQgdGFyZ2V0SGVscGVyID0gcmVxdWlyZSgnLi4vLi4vLi4vdXRpbGl0eS90YXJnZXQvdGFyZ2V0aGVscGVyJyk7XHJcbmltcG9ydCBxaWdTdG9yZSA9IHJlcXVpcmUoJy4uLy4uLy4uL3N0b3Jlcy9xaWdzZWxlY3Rvci9xaWdzdG9yZScpO1xyXG5pbXBvcnQgc3VibWl0QWN0aW9uQ3JlYXRvciA9IHJlcXVpcmUoJy4uLy4uLy4uL2FjdGlvbnMvc3VibWl0L3N1Ym1pdGFjdGlvbmNyZWF0b3InKTtcclxuaW1wb3J0IHJlc3BvbnNlQWN0aW9uQ3JlYXRvciA9IHJlcXVpcmUoJy4uLy4uLy4uL2FjdGlvbnMvcmVzcG9uc2UvcmVzcG9uc2VhY3Rpb25jcmVhdG9yJyk7XHJcbmltcG9ydCBtYXJrc2FuZGFubm90YXRpb25zU2F2ZUhlbHBlciA9IHJlcXVpcmUoJy4uLy4uLy4uL3V0aWxpdHkvbWFya2luZy9tYXJrc2FuZGFubm90YXRpb25zc2F2ZWhlbHBlcicpO1xyXG5pbXBvcnQgbG9naW5TdG9yZSA9IHJlcXVpcmUoJy4uLy4uLy4uL3N0b3Jlcy9sb2dpbi9sb2dpbnN0b3JlJyk7XHJcbmltcG9ydCBtYXJrZXJPcGVyYXRpb25Nb2RlRmFjdG9yeSA9IHJlcXVpcmUoJy4uL21hcmtlcm9wZXJhdGlvbm1vZGUvbWFya2Vyb3BlcmF0aW9ubW9kZWZhY3RvcnknKTtcclxuaW1wb3J0IHN1Ym1pdFN0b3JlID0gcmVxdWlyZSgnLi4vLi4vLi4vc3RvcmVzL3N1Ym1pdC9zdWJtaXRzdG9yZScpO1xyXG5pbXBvcnQgcmVzcG9uc2VTdG9yZSA9IHJlcXVpcmUoJy4uLy4uLy4uL3N0b3Jlcy9yZXNwb25zZS9yZXNwb25zZXN0b3JlJyk7XHJcbmltcG9ydCBzdGFuZGFyZGlzYXRpb25TZXR1cFN0b3JlID0gcmVxdWlyZSgnLi4vLi4vLi4vc3RvcmVzL3N0YW5kYXJkaXNhdGlvbnNldHVwL3N0YW5kYXJkaXNhdGlvbnNldHVwc3RvcmUnKTtcclxuaW1wb3J0IGVDb3Vyc2V3b3JrSGVscGVyID0gcmVxdWlyZSgnLi4vZWNvdXJzZXdvcmsvZWNvdXJzZXdvcmtoZWxwZXInKTtcclxuaW1wb3J0IGVDb3Vyc2VXb3JrRmlsZVN0b3JlID0gcmVxdWlyZSgnLi4vLi4vLi4vc3RvcmVzL3Jlc3BvbnNlL2RpZ2l0YWwvZWNvdXJzZXdvcmtmaWxlc3RvcmUnKTtcclxuaW1wb3J0IG5hdmlnYXRpb25TdG9yZSA9IHJlcXVpcmUoJy4uLy4uLy4uL3N0b3Jlcy9uYXZpZ2F0aW9uL25hdmlnYXRpb25zdG9yZScpO1xyXG5pbXBvcnQgc3RhbmRhcmRpc2F0aW9uQWN0aW9uQ3JlYXRvciA9IHJlcXVpcmUoJy4uLy4uLy4uL2FjdGlvbnMvc3RhbmRhcmRpc2F0aW9uc2V0dXAvc3RhbmRhcmRpc2F0aW9uYWN0aW9uY3JlYXRvcicpO1xyXG5pbXBvcnQgdXBkYXRlRVNNYXJrR3JvdXBNYXJraW5nTW9kZURhdGEgPSByZXF1aXJlKCcuLi8uLi8uLi9zdG9yZXMvc3RhbmRhcmRpc2F0aW9uc2V0dXAvdHlwaW5ncy91cGRhdGVlc21hcmtncm91cG1hcmtpbmdtb2RlZGF0YScpO1xyXG5cclxuLyoqXHJcbiAqIFN1Ym1pdCBoZWxwZXIgZm9yIHN1Ym1pdHRpbmcgdGhlIHJlc3BvbnNlIGZyb20gUmVzcG9uc2UgYW5kIHdvcmtsaXN0XHJcbiAqL1xyXG5cclxuY2xhc3MgU3VibWl0SGVscGVyIHtcclxuICAgIHByaXZhdGUgcmVzcG9uc2VTdGF0dXNlczogSW1tdXRhYmxlLkxpc3Q8ZW51bXMuUmVzcG9uc2VTdGF0dXM+O1xyXG4gICAgcHJpdmF0ZSBtYXJraW5nUHJvZ3Jlc3M6IG51bWJlcjtcclxuICAgIHByaXZhdGUgY2FsY3VsYXRlQWxscGFnZXNBbm5vdGF0ZWRMb2dpYzogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBtYXJrR3JvdXBJZDogbnVtYmVyO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogVmFsaWRhdGUgc3VibWl0IGJ1dHRvblxyXG4gICAgICogQHBhcmFtIHJlc3BvbnNlXHJcbiAgICAgKiBAcGFyYW0gbWFya2luZ1Byb2dyZXNzXHJcbiAgICAgKiBAcGFyYW0gY2FsY3VsYXRlQWxscGFnZXNBbm5vdGF0ZWRMb2dpY1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3VibWl0QnV0dG9uVmFsaWRhdGUocmVzcG9uc2U6IFJlc3BvbnNlQmFzZSwgbWFya2luZ1Byb2dyZXNzOiBudW1iZXIsIGNhbGN1bGF0ZUFsbHBhZ2VzQW5ub3RhdGVkTG9naWM6IGJvb2xlYW4sXHJcbiAgICAgICAgaGFzQmxvY2tpbmdFeGNlcHRpb25zOiBib29sZWFuKSB7XHJcbiAgICAgICAgdGhpcy5tYXJraW5nUHJvZ3Jlc3MgPSBtYXJraW5nUHJvZ3Jlc3M7XHJcbiAgICAgICAgdGhpcy5jYWxjdWxhdGVBbGxwYWdlc0Fubm90YXRlZExvZ2ljID0gY2FsY3VsYXRlQWxscGFnZXNBbm5vdGF0ZWRMb2dpYztcclxuICAgICAgICB0aGlzLnJlc3BvbnNlU3RhdHVzZXMgPSBJbW11dGFibGUuTGlzdDxlbnVtcy5SZXNwb25zZVN0YXR1cz4oKTtcclxuICAgICAgICB0aGlzLnJlc3BvbnNlU3RhdHVzZXMuY2xlYXIoKTtcclxuICAgICAgICBpZiAod29ya2xpc3RTdG9yZS5pbnN0YW5jZS5nZXRSZXNwb25zZU1vZGUgPT09IGVudW1zLlJlc3BvbnNlTW9kZS5vcGVuKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlc3BvbnNlU3RhdHVzZXMgPSB0aGlzLm9wZW5SZXNwb25zZVZhbGlkYXRpb24ocmVzcG9uc2UsIGhhc0Jsb2NraW5nRXhjZXB0aW9ucyk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChtYXJrZXJPcGVyYXRpb25Nb2RlRmFjdG9yeS5vcGVyYXRpb25Nb2RlLmlzU3RhbmRhcmRpc2F0aW9uU2V0dXBNb2RlKSB7XHJcblx0XHRcdGlmIChzdGFuZGFyZGlzYXRpb25TZXR1cFN0b3JlLmluc3RhbmNlLnNlbGVjdGVkU3RhbmRhcmRpc2F0aW9uU2V0dXBXb3JrTGlzdCA9PT1cclxuXHRcdFx0XHRlbnVtcy5TdGFuZGFyZGlzYXRpb25TZXR1cC5Qcm92aXNpb25hbFJlc3BvbnNlIHx8XHJcblx0XHRcdFx0c3RhbmRhcmRpc2F0aW9uU2V0dXBTdG9yZS5pbnN0YW5jZS5zZWxlY3RlZFN0YW5kYXJkaXNhdGlvblNldHVwV29ya0xpc3QgPT09XHJcblx0XHRcdFx0ZW51bXMuU3RhbmRhcmRpc2F0aW9uU2V0dXAuVW5DbGFzc2lmaWVkUmVzcG9uc2UpIHtcclxuXHRcdFx0XHR0aGlzLnJlc3BvbnNlU3RhdHVzZXMgPSB0aGlzLm9wZW5SZXNwb25zZVZhbGlkYXRpb24ocmVzcG9uc2UsIGhhc0Jsb2NraW5nRXhjZXB0aW9ucyk7XHJcblx0XHRcdH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVzcG9uc2VTdGF0dXNlcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIE9wZW4gbGl2ZSB3b3JrbGlzdCB2YWxpZGF0aW9uIGZvciBtYXJraW5nIHByb2dyZXNzL3N1Ym1pdCBidXR0b25cclxuICAgICAqIEBwYXJhbSByZXNwb25zZVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIG9wZW5SZXNwb25zZVZhbGlkYXRpb24ocmVzcG9uc2U6IFJlc3BvbnNlQmFzZSwgaGFzQmxvY2tpbmdFeGNlcHRpb25zOiBib29sZWFuKSB7XHJcbiAgICAgICAgcmVzcG9uc2UuaXNTdWJtaXRFbmFibGVkID0gZmFsc2U7XHJcbiAgICAgICAgLyoqIGlmIHRoZSBtYXJraW5nIGhhcyBzdGFydGVkICovXHJcbiAgICAgICAgaWYgKHRoaXMubWFya2luZ1Byb2dyZXNzID4gMCkge1xyXG4gICAgICAgICAgICAvKiogaWYgdGhlIG1hcmtpbmcgaXMgY29tcGxldGVkICovXHJcbiAgICAgICAgICAgIGlmICh0aGlzLm1hcmtpbmdQcm9ncmVzcyA9PT0gMTAwKSB7XHJcbiAgICAgICAgICAgICAgICAvKiogdGFraW5nIHRoZSBjYyBmcm9tIGNjIGhlbHBlciAqL1xyXG5cclxuXHRcdFx0XHQvLyBBdm9pZCBGb3JjZUFubm90YXRpb25PbkVhY2hQYWdlIENDIHdoaWxlIG9wZW5pbmcgc2luZ2xlIHJlc3BvbnNlIGluIG11bHRpUWlnXHJcblx0XHRcdFx0Ly8gQXBwbHkgRm9yY2VBbm5vdGF0aW9uT25FYWNoUGFnZSBDQyBmb3IgYWxsIFFJR3MgaW4gdGhlIHdob2xlIHJlc3BvbnNlIHdoZW4gaXQgdHVybmVkIG9uIGZvciBhdCBsZWFzdCBvbmUgUUlHXHJcbiAgICAgICAgICAgICAgICBsZXQgbWFya1NjaGVtZUdyb3VwSWQ6IG51bWJlciA9IDA7XHJcbiAgICAgICAgICAgICAgICBsZXQgbWFya0dyb3VwSWQ6IG51bWJlciA9XHJcbiAgICAgICAgICAgICAgICAgICAgKHN0YW5kYXJkaXNhdGlvblNldHVwU3RvcmUuaW5zdGFuY2Uuc2VsZWN0ZWRTdGFuZGFyZGlzYXRpb25TZXR1cFdvcmtMaXN0ID09PSBlbnVtcy5TdGFuZGFyZGlzYXRpb25TZXR1cC5Ob25lKSA/XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UubWFya0dyb3VwSWQgOiByZXNwb25zZS5lc01hcmtHcm91cElkO1xyXG4gICAgICAgICAgICAgICAgbGV0IGlzQWxsRmlsZXNWaWV3ZWQ6IGJvb2xlYW4gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChuYXZpZ2F0aW9uU3RvcmUuaW5zdGFuY2UuY29udGFpbmVyUGFnZSA9PT0gZW51bXMuUGFnZUNvbnRhaW5lcnMuUmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNBbGxGaWxlc1ZpZXdlZCA9IGVDb3Vyc2VXb3JrRmlsZVN0b3JlLmluc3RhbmNlLmNoZWNrSWZBbGxGaWxlc1ZpZXdlZChtYXJrR3JvdXBJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNBbGxGaWxlc1ZpZXdlZCA9IHJlc3BvbnNlLmFsbEZpbGVzVmlld2VkO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHRcdFx0XHRpZiAoIXJlc3BvbnNlU3RvcmUuaW5zdGFuY2UuaXNXaG9sZVJlc3BvbnNlKSB7XHJcblx0XHRcdFx0XHRtYXJrU2NoZW1lR3JvdXBJZCA9IHFpZ1N0b3JlLmluc3RhbmNlLmdldFNlbGVjdGVkUUlHRm9yVGhlTG9nZ2VkSW5Vc2VyLm1hcmtTY2hlbWVHcm91cElkO1xyXG5cdFx0XHRcdH1cclxuICAgICAgICAgICAgICAgIGxldCBpc0FsbFBhZ2VzQW5ub3RhdGVkQ0MgPSBjb25maWd1cmFibGVDaGFyYWN0ZXJpc3RpY3NIZWxwZXIuZ2V0Q2hhcmFjdGVyaXN0aWNWYWx1ZShcclxuXHRcdFx0XHRcdGNvbmZpZ3VyYWJsZUNoYXJhY3RlcmlzdGljc05hbWVzLkZvcmNlQW5ub3RhdGlvbk9uRWFjaFBhZ2UsIG1hcmtTY2hlbWVHcm91cElkKS50b0xvd2VyQ2FzZSgpID09PSAndHJ1ZScgPyB0cnVlIDogZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IGlzQWxsU0xBT0Fubm90YXRlZENDID0gY29uZmlndXJhYmxlQ2hhcmFjdGVyaXN0aWNzSGVscGVyLmdldENoYXJhY3RlcmlzdGljVmFsdWUoXHJcbiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlQ2hhcmFjdGVyaXN0aWNzTmFtZXMuU0xBT0ZvcmNlZEFubm90YXRpb25zLCBtYXJrU2NoZW1lR3JvdXBJZCkudG9Mb3dlckNhc2UoKSA9PT0gJ3RydWUnID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgLyoqIGlmIHNsYW8gYW5ub3RhdGVkIGNjIGlzIG9uIGFuZCBhbGwgcGFnZXMgYXJlIG5vdCBhbm5vdGF0ZWQgT1IgYWxsIHBhZ2VzIGFubm90YXRlZCBjYyBpcyBvblxyXG4gICAgICAgICAgICAgICAgICogIGFuZCBhbGwgcGFnZXMgYXJlIG5vdCBhbm5vdGF0ZWQgaWYgYm90aCBDQ3MgYXJlIG9uLCBhbGwgcGFnZXMgYW5ub3RhdGVkIGNjIGhhc1xyXG4gICAgICAgICAgICAgICAgICogIHRoZSBoaWdoZXIgcHJpb3JpdHkuXHJcbiAgICAgICAgICAgICAgICAgKi9cclxuXHRcdFx0XHRpZiAodGhpcy5jYWxjdWxhdGVBbGxwYWdlc0Fubm90YXRlZExvZ2ljID09PSB0cnVlICYmIChpc0FsbFBhZ2VzQW5ub3RhdGVkQ0MgfHwgaXNBbGxTTEFPQW5ub3RhdGVkQ0MpKSB7XHJcblx0XHRcdFx0XHRyZXNwb25zZS5oYXNBbGxQYWdlc0Fubm90YXRlZCA9IG1hcmtpbmdIZWxwZXIuaXNBbGxQYWdlQW5ub3RhdGVkKCk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRpZiAoc3RhbmRhcmRpc2F0aW9uU2V0dXBTdG9yZS5pbnN0YW5jZS5zZWxlY3RlZFN0YW5kYXJkaXNhdGlvblNldHVwV29ya0xpc3QgPT09XHJcblx0XHRcdFx0XHRlbnVtcy5TdGFuZGFyZGlzYXRpb25TZXR1cC5VbkNsYXNzaWZpZWRSZXNwb25zZSAmJlxyXG5cdFx0XHRcdFx0IXN0YW5kYXJkaXNhdGlvblNldHVwU3RvcmUuaW5zdGFuY2Uuc3RkU2V0dXBQZXJtaXNzaW9uQ0NEYXRhLnJvbGUucGVybWlzc2lvbnMudmlld0RlZmluaXRpdmVzKSB7XHJcblx0XHRcdFx0XHQvLyBTVEQgVW5DbGFzc2lmaWVkIFJlc3BvbnNlIHdpdGggTm8gVmlldyBEZWZpbml0aXZlIFBlcm1pc3Npb25cclxuXHRcdFx0XHRcdHRoaXMucmVzcG9uc2VTdGF0dXNlcyA9IHRoaXMucmVzcG9uc2VTdGF0dXNlcy5wdXNoKGVudW1zLlJlc3BvbnNlU3RhdHVzLk5vVmlld0RlZmluaXRpdmVzUGVybWlzc3Npb24pO1xyXG5cdFx0XHRcdH0gZWxzZSBpZiAoc3RhbmRhcmRpc2F0aW9uU2V0dXBTdG9yZS5pbnN0YW5jZS5zZWxlY3RlZFN0YW5kYXJkaXNhdGlvblNldHVwV29ya0xpc3QgPT09XHJcblx0XHRcdFx0XHRlbnVtcy5TdGFuZGFyZGlzYXRpb25TZXR1cC5VbkNsYXNzaWZpZWRSZXNwb25zZSAmJiByZXNwb25zZS5oYXNEZWZpbml0aXZlTWFyayA9PT0gZmFsc2UpIHtcclxuXHRcdFx0XHRcdC8vIFNURCBVbkNsYXNzaWZpZWQgUmVzcG9uc2Ugd2l0aCBEZWZpbml0aXZlIE1hcmtpbmcgTm90IFN0YXJ0ZWRcclxuXHRcdFx0XHRcdHRoaXMucmVzcG9uc2VTdGF0dXNlcyA9IHRoaXMucmVzcG9uc2VTdGF0dXNlcy5wdXNoKGVudW1zLlJlc3BvbnNlU3RhdHVzLmRlZmluaXRpdmVNYXJraW5nTm90U3RhcnRlZCk7XHJcblx0XHRcdFx0fSBlbHNlIGlmIChzdGFuZGFyZGlzYXRpb25TZXR1cFN0b3JlLmluc3RhbmNlLnNlbGVjdGVkU3RhbmRhcmRpc2F0aW9uU2V0dXBXb3JrTGlzdCA9PT1cclxuXHRcdFx0XHRcdGVudW1zLlN0YW5kYXJkaXNhdGlvblNldHVwLlVuQ2xhc3NpZmllZFJlc3BvbnNlICYmXHJcblx0XHRcdFx0XHQhc3RhbmRhcmRpc2F0aW9uU2V0dXBTdG9yZS5pbnN0YW5jZS5zdGRTZXR1cFBlcm1pc3Npb25DQ0RhdGEucm9sZS5wZXJtaXNzaW9ucy5jbGFzc2lmeSkge1xyXG5cdFx0XHRcdFx0Ly8gU1REIFVuQ2xhc3NpZmllZCBSZXNwb25zZSB3aXRoIE5vIHBlcm1pc3Npb24gdG8gQ2xhc3NpZnlcclxuXHRcdFx0XHRcdHRoaXMucmVzcG9uc2VTdGF0dXNlcyA9IHRoaXMucmVzcG9uc2VTdGF0dXNlcy5wdXNoKGVudW1zLlJlc3BvbnNlU3RhdHVzLk5vUGVybWlzc2lvblRvQ2xhc3NpZnkpO1xyXG5cdFx0XHRcdH0gZWxzZSBpZiAoKCFpc0FsbFBhZ2VzQW5ub3RhdGVkQ0MgJiYgaXNBbGxTTEFPQW5ub3RhdGVkQ0MgJiYgcmVzcG9uc2UuaGFzQWxsUGFnZXNBbm5vdGF0ZWQgPT09IGZhbHNlKVxyXG4gICAgICAgICAgICAgICAgICAgIHx8IChpc0FsbFBhZ2VzQW5ub3RhdGVkQ0MgJiYgcmVzcG9uc2UuaGFzQWxsUGFnZXNBbm5vdGF0ZWQgPT09IGZhbHNlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVzcG9uc2VTdGF0dXNlcyA9IHRoaXMucmVzcG9uc2VTdGF0dXNlcy5wdXNoKGVudW1zLlJlc3BvbnNlU3RhdHVzLm5vdEFsbFBhZ2VzQW5ub3RhdGVkKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc3BvbnNlU3RhdHVzZXMgPSB0aGlzLnJlc3BvbnNlU3RhdHVzZXMucHVzaChlbnVtcy5SZXNwb25zZVN0YXR1cy5tYXJraW5nSW5Qcm9ncmVzcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhhc0Jsb2NraW5nRXhjZXB0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc3BvbnNlU3RhdHVzZXMgPSB0aGlzLnJlc3BvbnNlU3RhdHVzZXMucHVzaChlbnVtcy5SZXNwb25zZVN0YXR1cy5oYXNFeGNlcHRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZUNvdXJzZXdvcmtIZWxwZXIuaXNFQ291cnNld29ya0NvbXBvbmVudCAmJiAhaXNBbGxGaWxlc1ZpZXdlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc3BvbnNlU3RhdHVzZXMgPSB0aGlzLnJlc3BvbnNlU3RhdHVzZXMucHVzaChlbnVtcy5SZXNwb25zZVN0YXR1cy5ub3RBbGxGaWxlc1ZpZXdlZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoYXNCbG9ja2luZ0V4Y2VwdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVzcG9uc2VTdGF0dXNlcyA9IHRoaXMucmVzcG9uc2VTdGF0dXNlcy5wdXNoKGVudW1zLlJlc3BvbnNlU3RhdHVzLmhhc0V4Y2VwdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGhhc0Jsb2NraW5nRXhjZXB0aW9ucykgIHtcclxuICAgICAgICAgICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICAgICAgICAgKiBpZiB0aGUgbWFya2luZyBpcyBjb21wbGV0ZWQgYW5kIGJsb2NraW5nIGV4Y2VwdGlvbnMgYXJlIHRoZXJlLCBzaG93IGJvdGguXHJcbiAgICAgICAgICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXNwb25zZVN0YXR1c2VzID0gdGhpcy5yZXNwb25zZVN0YXR1c2VzLnB1c2goZW51bXMuUmVzcG9uc2VTdGF0dXMuaGFzRXhjZXB0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc3BvbnNlU3RhdHVzZXMgPSB0aGlzLnJlc3BvbnNlU3RhdHVzZXMucHVzaChlbnVtcy5SZXNwb25zZVN0YXR1cy5tYXJraW5nSW5Qcm9ncmVzcyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmhhc1pvbmluZ0V4Y2VwdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgICAgICAvKiogaWYgdGhlIG1hcmtpbmcgaXMgY29tcGxldGVkIGFuZCB6b25pbmcgZXhjZXB0aW9ucyBhcmUgdGhlcmUsIHNob3cgYm90aC4gKi9cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc3BvbnNlU3RhdHVzZXMgPSB0aGlzLnJlc3BvbnNlU3RhdHVzZXMucHVzaChlbnVtcy5SZXNwb25zZVN0YXR1cy5oYXNab25pbmdFeGNlcHRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVzcG9uc2VTdGF0dXNlcyA9IHRoaXMucmVzcG9uc2VTdGF0dXNlcy5wdXNoKGVudW1zLlJlc3BvbnNlU3RhdHVzLm1hcmtpbmdJblByb2dyZXNzKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgICAgICAgICAqIGlmIGFsbCBwYWdlcyBhbm5vdGF0ZWQgY2MgaXMgb2ZmIGFuZCBpZiBubyBibG9ja2luZyBleGNlcHRpb25zIGFyZSB0aGVyZSwgc2hvdyByZWFkeSB0byBzdWJtaXQgYnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXNwb25zZVN0YXR1c2VzID0gdGhpcy5yZXNwb25zZVN0YXR1c2VzLnB1c2goZW51bXMuUmVzcG9uc2VTdGF0dXMucmVhZHlUb1N1Ym1pdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuaXNTdWJtaXRFbmFibGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIGlmIChoYXNCbG9ja2luZ0V4Y2VwdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgICAgICogaWYgdGhlIG1hcmtpbmcgaXMgaW4gcHJvZ3Jlc3MgYW5kIGJsb2NraW5nIGV4Y2VwdGlvbnMgYXJlIHRoZXJlLCBzaG93IGJvdGguXHJcbiAgICAgICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgICAgIHRoaXMucmVzcG9uc2VTdGF0dXNlcyA9IHRoaXMucmVzcG9uc2VTdGF0dXNlcy5wdXNoKGVudW1zLlJlc3BvbnNlU3RhdHVzLmhhc0V4Y2VwdGlvbik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlc3BvbnNlU3RhdHVzZXMgPSB0aGlzLnJlc3BvbnNlU3RhdHVzZXMucHVzaChlbnVtcy5SZXNwb25zZVN0YXR1cy5tYXJraW5nSW5Qcm9ncmVzcyk7XHJcblx0XHRcdH0gZWxzZSBpZiAoc3RhbmRhcmRpc2F0aW9uU2V0dXBTdG9yZS5pbnN0YW5jZS5zZWxlY3RlZFN0YW5kYXJkaXNhdGlvblNldHVwV29ya0xpc3QgPT09XHJcblx0XHRcdFx0ZW51bXMuU3RhbmRhcmRpc2F0aW9uU2V0dXAuVW5DbGFzc2lmaWVkUmVzcG9uc2UgJiZcclxuXHRcdFx0XHQhc3RhbmRhcmRpc2F0aW9uU2V0dXBTdG9yZS5pbnN0YW5jZS5zdGRTZXR1cFBlcm1pc3Npb25DQ0RhdGEucm9sZS5wZXJtaXNzaW9ucy52aWV3RGVmaW5pdGl2ZXMpIHtcclxuXHJcblx0XHRcdFx0dGhpcy5yZXNwb25zZVN0YXR1c2VzID0gdGhpcy5yZXNwb25zZVN0YXR1c2VzLnB1c2goZW51bXMuUmVzcG9uc2VTdGF0dXMuTm9WaWV3RGVmaW5pdGl2ZXNQZXJtaXNzc2lvbik7XHJcblxyXG5cdFx0XHR9ZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlc3BvbnNlU3RhdHVzZXMgPSB0aGlzLnJlc3BvbnNlU3RhdHVzZXMucHVzaChlbnVtcy5SZXNwb25zZVN0YXR1cy5tYXJraW5nSW5Qcm9ncmVzcyk7XHJcbiAgICAgICAgICAgIH1cclxuXHRcdH0gZWxzZSB7IC8vaWYgbWFya2luZyBoYXMgbm90IHN0YXJ0ZWRcclxuXHJcblx0XHRcdC8vSWYgU3RhbmRhcmRpc2F0aW9uU2V0dXAgVW5DbGFzc2lmaWVkUmVzcG9uc2UgYW5kIGRlZmVuaXRpdmUgbWFya2luZyBwZXJjZW50YWdlIGl6IFplcm8gdGhlbiBzaG93IHN0YXR1cyBhcyAwJVxyXG5cdFx0XHRpZiAoc3RhbmRhcmRpc2F0aW9uU2V0dXBTdG9yZS5pbnN0YW5jZS5zZWxlY3RlZFN0YW5kYXJkaXNhdGlvblNldHVwV29ya0xpc3QgPT09XHJcblx0XHRcdFx0ZW51bXMuU3RhbmRhcmRpc2F0aW9uU2V0dXAuVW5DbGFzc2lmaWVkUmVzcG9uc2UpIHtcclxuXHRcdFx0XHQvLyBJZiB0aGUgbG9nZ2VkIGluIHVzZXIgaGFzICdObyBWaWV3IERlZmluaXRpdmUnIFBlcm1pc3Npb24sIHRoZW4gc2hvdyBzdGF0dXMgYXMgJ1Byb3Zpc2lvbmFsJy5cclxuXHRcdFx0XHRpZiAoIXN0YW5kYXJkaXNhdGlvblNldHVwU3RvcmUuaW5zdGFuY2Uuc3RkU2V0dXBQZXJtaXNzaW9uQ0NEYXRhLnJvbGUucGVybWlzc2lvbnMudmlld0RlZmluaXRpdmVzKSB7XHJcblx0XHRcdFx0XHR0aGlzLnJlc3BvbnNlU3RhdHVzZXMgPSB0aGlzLnJlc3BvbnNlU3RhdHVzZXMucHVzaChlbnVtcy5SZXNwb25zZVN0YXR1cy5Ob1ZpZXdEZWZpbml0aXZlc1Blcm1pc3NzaW9uKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0dGhpcy5yZXNwb25zZVN0YXR1c2VzID0gdGhpcy5yZXNwb25zZVN0YXR1c2VzLnB1c2goZW51bXMuUmVzcG9uc2VTdGF0dXMubWFya2luZ0luUHJvZ3Jlc3MpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0ICAgLy8gaWYgbWFya2luZyBub3Qgc3RhcnRlZCBzaG93IHRoZSBzYW1lXHJcblx0XHRcdFx0dGhpcy5yZXNwb25zZVN0YXR1c2VzID0gdGhpcy5yZXNwb25zZVN0YXR1c2VzLnB1c2goZW51bXMuUmVzcG9uc2VTdGF0dXMubWFya2luZ05vdFN0YXJ0ZWQpO1xyXG5cdFx0XHR9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLnJlc3BvbnNlU3RhdHVzZXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTYXZlIGFuZCBzdWJtaXQgcmVzcG9uc2UgZm9yIHRoZSBtYXJrZ3JvdXBpZFxyXG4gICAgICogQHBhcmFtIG1hcmtHcm91cElkXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgc2F2ZUFuZFN1Ym1pdFJlc3BvbnNlKG1hcmtHcm91cElkOiBudW1iZXIpIHtcclxuICAgICAgICBtYXJrc2FuZGFubm90YXRpb25zU2F2ZUhlbHBlci50cmlnZ2VyTWFya3NBbmRBbm5vdGF0aW9uc1F1ZXVlUHJvY2Vzc2luZ1xyXG4gICAgICAgICAgICAoZW51bXMuU2F2ZU1hcmtzQW5kQW5ub3RhdGlvbnNQcm9jZXNzaW5nVHJpZ2dlclBvaW50LlN1Ym1pdCxcclxuICAgICAgICAgICAgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgU3VibWl0SGVscGVyLnN1Ym1pdHJlcG9uc2UobWFya0dyb3VwSWQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNhdmUgYW5kIGNsYXNzaWZ5IHJlc3BvbnNlXHJcbiAgICAgKiBAcGFyYW0gZXNNYXJrR3JvdXBJZFxyXG4gICAgICogQHBhcmFtIHJlc3BvbnNlRGV0YWlsc1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIHNhdmVBbmRDbGFzc2lmeVJlc3BvbnNlKGVzTWFya0dyb3VwSWQ6IG51bWJlciwgcmVzcG9uc2VEZXRhaWxzOiB1cGRhdGVFU01hcmtHcm91cE1hcmtpbmdNb2RlRGF0YSkge1xyXG4gICAgICAgIG1hcmtzYW5kYW5ub3RhdGlvbnNTYXZlSGVscGVyLnRyaWdnZXJNYXJrc0FuZEFubm90YXRpb25zUXVldWVQcm9jZXNzaW5nXHJcbiAgICAgICAgICAgIChlbnVtcy5TYXZlTWFya3NBbmRBbm5vdGF0aW9uc1Byb2Nlc3NpbmdUcmlnZ2VyUG9pbnQuQ2xhc3NpZnksXHJcbiAgICAgICAgICAgICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHN0YW5kYXJkaXNhdGlvbkFjdGlvbkNyZWF0b3IuY2xhc3NpZnlSZXNwb25zZShyZXNwb25zZURldGFpbHMsIG5hdmlnYXRpb25TdG9yZS5pbnN0YW5jZS5jb250YWluZXJQYWdlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTYXZlIGFuZCBjbGFzc2lmeSByZXNwb25zZVxyXG4gICAgICogQHBhcmFtIGVzTWFya0dyb3VwSWRcclxuICAgICAqIEBwYXJhbSByZXNwb25zZURldGFpbHNcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBzYXZlQW5kU2hhcmVBbmRDbGFzc2lmeVJlc3BvbnNlKFxyXG4gICAgXHRzdWJtaXRSZXNwb25zZUFyZ3VtZW50OiBTdWJtaXRSZXNwb25zZUFyZ3VtZW50LFxyXG4gICAgICAgIHNoYXJlZEZyb21NYXJrU2NoZW1lOiBib29sZWFuID0gIGZhbHNlLFxyXG4gICAgICAgIHNlbGVjdGVkRGlzcGxheUlkOiBzdHJpbmcgPSB1bmRlZmluZWQsXHJcbiAgICApIHtcclxuICAgICAgICBtYXJrc2FuZGFubm90YXRpb25zU2F2ZUhlbHBlci50cmlnZ2VyTWFya3NBbmRBbm5vdGF0aW9uc1F1ZXVlUHJvY2Vzc2luZ1xyXG4gICAgICAgICAgICAoZW51bXMuU2F2ZU1hcmtzQW5kQW5ub3RhdGlvbnNQcm9jZXNzaW5nVHJpZ2dlclBvaW50LlNoYXJlQW5kQ2xhc3NpZnksXHJcbiAgICAgICAgICAgICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHN1Ym1pdEFjdGlvbkNyZWF0b3Iuc2hhcmVBbmRDbGFzc2lmeVJlc3BvbnNlKFxyXG4gICAgICAgICAgICAgICAgICAgIHN1Ym1pdFJlc3BvbnNlQXJndW1lbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgc2hhcmVkRnJvbU1hcmtTY2hlbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWREaXNwbGF5SWQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTdWJtaXQgcmVzcG9uc2VcclxuICAgICAqIEBwYXJhbSBtYXJrR3JvdXBJZFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIHN1Ym1pdHJlcG9uc2UgPSAobWFya0dyb3VwSWQ6IG51bWJlcik6IHZvaWQgPT4ge1xyXG4gICAgICAgIGxldCBzdWJtaXRSZXNwb25zZUFyZ3VtZW50OiBTdWJtaXRSZXNwb25zZUFyZ3VtZW50O1xyXG4gICAgICAgIGxldCBjdXJyZW50V29ya2xpc3RUeXBlOiBlbnVtcy5Xb3JrbGlzdFR5cGU7XHJcbiAgICAgICAgbGV0IGdldFJlbWFya1JlcXVlc3RUeXBlOiBlbnVtcy5SZW1hcmtSZXF1ZXN0VHlwZTtcclxuICAgICAgICBsZXQgaXNTdGRTZXR1cE1vZGU6IGJvb2xlYW47XHJcbiAgICAgICAgLyogU3VibWl0dGluZyAgcmVzcG9uc2VzIGluaXRpYXRlZCAqL1xyXG4gICAgICAgIC8qIFNlbGVjdCB0aGUgbWFyayBncm91cCBsaXN0IGJhc2VkIG9uIHRoZSBjdXJyZW50IHJlc3BvbnNlIG1vZGUgKi9cclxuICAgICAgICBsZXQgbWFya0dyb3VwSWRMaXN0OiBBcnJheTxOdW1iZXI+ID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgbWFya0dyb3VwSWRMaXN0LnB1c2gobWFya0dyb3VwSWQpO1xyXG5cclxuICAgICAgICBpZiAocmVzcG9uc2VTdG9yZS5pbnN0YW5jZS5pc1dob2xlUmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgLy8gSWYgYSB3aG9sZSByZXNwb25zZSwgcmV0cmlldmUgYWxsIHRoZSByZWxhdGVkIG1hcmtHcm91cElkc1xyXG4gICAgICAgICAgICBsZXQgcmVsYXRlZE1hcmtHcm91cElkczogbnVtYmVyW10gPSB3b3JrbGlzdFN0b3JlLmluc3RhbmNlLmdldFJlbGF0ZWRNYXJrR3JvdXBJZHNGb3JXaG9sZVJlc3BvbnNlKG1hcmtHcm91cElkKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFVwZGF0ZSByZWxhdGVkIG1hcmtHcm91cElkcyBmb3Igd2hvbGUgcmVzcG9uc2Ugc3VibWlzc2lvbiBmcm9tIG1hcmsgc2NoZW1lIHBhbmVsXHJcbiAgICAgICAgICAgIC8vIEZvciBBdHlwaWNhbCwgdGhlIGlzV2hvbGVSZXNwb25zZSBmbGFnIGlzIHRydWUgYWx3YXlzLCBzbyBhbHNvIGNoZWNraW5nIHRoZSByZXRyaWV2ZWQgbGlzdCBsZW5ndGhcclxuICAgICAgICAgICAgaWYgKHJlbGF0ZWRNYXJrR3JvdXBJZHMubGVuZ3RoID4gMCl7XHJcbiAgICAgICAgICAgICAgICByZWxhdGVkTWFya0dyb3VwSWRzLm1hcCgocmVsYXRlZE1hcmtHcm91cElkOiBudW1iZXIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBtYXJrR3JvdXBJZExpc3QucHVzaChyZWxhdGVkTWFya0dyb3VwSWQpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qIG1hcHBpbmcgdmFsdWVzIG9uIHN1Ym1pdCBhcmd1bWVudCovXHJcbiAgICAgICAgc3VibWl0UmVzcG9uc2VBcmd1bWVudCA9IHtcclxuICAgICAgICAgICAgbWFya0dyb3VwSWRzOiBzdGFuZGFyZGlzYXRpb25TZXR1cFN0b3JlLmluc3RhbmNlLnNlbGVjdGVkU3RhbmRhcmRpc2F0aW9uU2V0dXBXb3JrTGlzdCA9PT1cclxuICAgICAgICAgICAgICAgIGVudW1zLlN0YW5kYXJkaXNhdGlvblNldHVwLlByb3Zpc2lvbmFsUmVzcG9uc2UgPyBbbWFya0dyb3VwSWRdIDogbWFya0dyb3VwSWRMaXN0LFxyXG4gICAgICAgICAgICBtYXJraW5nTW9kZTogc3RhbmRhcmRpc2F0aW9uU2V0dXBTdG9yZS5pbnN0YW5jZS5zZWxlY3RlZFN0YW5kYXJkaXNhdGlvblNldHVwV29ya0xpc3QgPT09XHJcbiAgICAgICAgICAgICAgICBlbnVtcy5TdGFuZGFyZGlzYXRpb25TZXR1cC5Qcm92aXNpb25hbFJlc3BvbnNlID8gZW51bXMuTWFya2luZ01vZGUuUHJlU3RhbmRhcmRpc2F0aW9uXHJcbiAgICAgICAgICAgICAgICA6IHRhcmdldEhlbHBlci5nZXRTZWxlY3RlZFFpZ01hcmtpbmdNb2RlKCksXHJcbiAgICAgICAgICAgIGV4YW1pbmVyUm9sZUlkOiBxaWdTdG9yZS5pbnN0YW5jZS5zZWxlY3RlZFFJR0Zvck1hcmtlck9wZXJhdGlvbi5leGFtaW5lclJvbGVJZCxcclxuICAgICAgICAgICAgbWFya1NjaGVtZUdyb3VwSWQ6IHFpZ1N0b3JlLmluc3RhbmNlLnNlbGVjdGVkUUlHRm9yTWFya2VyT3BlcmF0aW9uLm1hcmtTY2hlbWVHcm91cElkLFxyXG4gICAgICAgICAgICBleGFtaW5lckFwcHJvdmFsOiBleGFtaW5lclN0b3JlLmluc3RhbmNlLmdldE1hcmtlckluZm9ybWF0aW9uLmFwcHJvdmFsU3RhdHVzLFxyXG4gICAgICAgICAgICBpc0FkbWluUmVtYXJrZXI6IGxvZ2luU3RvcmUuaW5zdGFuY2UuaXNBZG1pblJlbWFya2VyXHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZiAoc3RhbmRhcmRpc2F0aW9uU2V0dXBTdG9yZS5pbnN0YW5jZS5zZWxlY3RlZFN0YW5kYXJkaXNhdGlvblNldHVwV29ya0xpc3QgPT09XHJcbiAgICAgICAgICAgIGVudW1zLlN0YW5kYXJkaXNhdGlvblNldHVwLlByb3Zpc2lvbmFsUmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgY3VycmVudFdvcmtsaXN0VHlwZSA9IGVudW1zLldvcmtsaXN0VHlwZS5ub25lO1xyXG4gICAgICAgICAgICBnZXRSZW1hcmtSZXF1ZXN0VHlwZSA9IGVudW1zLlJlbWFya1JlcXVlc3RUeXBlLlVua25vd247XHJcbiAgICAgICAgICAgIGlzU3RkU2V0dXBNb2RlID0gdHJ1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjdXJyZW50V29ya2xpc3RUeXBlID0gd29ya2xpc3RTdG9yZS5pbnN0YW5jZS5jdXJyZW50V29ya2xpc3RUeXBlO1xyXG4gICAgICAgICAgICBnZXRSZW1hcmtSZXF1ZXN0VHlwZSA9IHdvcmtsaXN0U3RvcmUuaW5zdGFuY2UuZ2V0UmVtYXJrUmVxdWVzdFR5cGU7XHJcbiAgICAgICAgICAgIGlzU3RkU2V0dXBNb2RlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvL2xldCByZW1hcmtSZXF1ZXN0VHlwZTogZW51bXMuUmVtYXJrUmVxdWVzdFR5cGUgPSB0aGlzLmdldFJlbWFya1JlcXVlc3RUeXBlKC53b3JrbGlzdFR5cGUpO1xyXG4gICAgICAgIC8qIGNhbGxpbmcgdG8gc2VuZCBkYXRhIHRvIHNlcnZlciAqL1xyXG4gICAgICAgIHN1Ym1pdEFjdGlvbkNyZWF0b3Iuc3VibWl0UmVzcG9uc2VcclxuICAgICAgICAgICAgKHN1Ym1pdFJlc3BvbnNlQXJndW1lbnQsIHFpZ1N0b3JlLmluc3RhbmNlLnNlbGVjdGVkUUlHRm9yTWFya2VyT3BlcmF0aW9uLm1hcmtTY2hlbWVHcm91cElkLFxyXG4gICAgICAgICAgICBjdXJyZW50V29ya2xpc3RUeXBlLCBnZXRSZW1hcmtSZXF1ZXN0VHlwZSwgdHJ1ZSwgcmVzcG9uc2VTdG9yZS5pbnN0YW5jZS5zZWxlY3RlZERpc3BsYXlJZC50b1N0cmluZygpLFxyXG4gICAgICAgICAgICBudWxsLCBudWxsLCBpc1N0ZFNldHVwTW9kZSk7XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENsZWFyIHRoZSBtYXJrcyBhbmQgQW5ub3RhdGlvbiBmb3IgcmVzcG9uc2VzIHNvIHRoYXQgdGhlIG1hcmtzIHdpbGwgYmUgcmVsb2FkZWRcclxuICAgICAqIEBwYXJhbSBzdWJtaXR0ZWRNYXJrR3JvdXBJZHNcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGVhck1hcmtzQW5kQW5ub3RhdGlvbnMgPSAoc3VibWl0dGVkTWFya0dyb3VwSWRzOiBBcnJheTxudW1iZXI+KTogdm9pZCA9PiB7XHJcbiAgICAgICAgLy8gY2hlY2sgd2hldGhlciB3ZSBuZWVkIHRvIGNsZWFyIG1hcmtzIGFuZCBhbm5vYXRhdGlvbiBmb3IgcHJhY2ljZSBhbmQgc3RhbmRhemF0aW9uIHJlc3BvbnNlLlxyXG4gICAgICAgIGlmIChzdWJtaXR0ZWRNYXJrR3JvdXBJZHMgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBtYXJrR3JvdXBJZCBvZiBzdWJtaXR0ZWRNYXJrR3JvdXBJZHMpIHtcclxuICAgICAgICAgICAgICAgIC8vIFZlcmlmeSBpZiBtYXJrcyBhbmQgYW5ub3RhdGlvbnMgb2YgdGhlIHN1Ym1pdHRlZCByZXNwb25zZSBjYW4gYmUgY2xlYXJlZFxyXG4gICAgICAgICAgICAgICAgaWYgKFN1Ym1pdEhlbHBlci5pc0NsZWFyTWFya3NBbmRBbm5vdGF0aW9ucyhtYXJrR3JvdXBJZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBDYWxsaW5nIHRoZSBhY3Rpb24gY3JlYXRvciB0byBjbGVhciB0aGUgbWFya3MgYW5kIGFubm90YXRpb25zXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VBY3Rpb25DcmVhdG9yLmNsZWFyTWFya3NBbmRBbm5vdGF0aW9ucyhtYXJrR3JvdXBJZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogIFZlcmlmeSBpZiBtYXJrcyBhbmQgYW5ub3RhdGlvbnMgY2FuIGJlIGNsZWFyZWQgb3Igbm90XHJcbiAgICAgKlxyXG4gICAgICogIEluIENhc2Ugb2YgQmxpbmQgUHJhY3RpY2UgTWFya2luZywgc3RhbmRhcmRpc2F0aW9uIG1hcmtpbmcsIGlzUXVhbGl0eUZlZWRiYWNrT3V0c3RhbmRpbmcgb2Ygc2VlZCxcclxuICAgICAqICB0aGUgZGVmaW5pdGl2ZSBtYXJrcyBhcmUgbm90IHJldHJpZXZlZCBmcm9tIGdhdGV3YXkgZm9yIG9wZW4gcmVzcG9uc2VzXHJcbiAgICAgKiAgU28gYWZ0ZXIgc3VibWlzc2lvbiBvZiBhIHByYWN0aWNlIHJlc3BvbnNlIHdlIG5lZWQgdG8gY2xlYXIgdGhlIGV4aXN0aW5nIG1hcmtzIGFuZCBhbm5vdGF0aW9uIHNvIHRoYXQgdGhlXHJcbiAgICAgKiAgTWFya3MgYW5kIGFubm90YXRpb25zIHdpbGwgYmUgcmV0cmlldmVkIGZyb20gZ2F0ZXdheS4gVGhlIHNhbWUgbG9naWMgaXMgZG9uZSBpbiB3b3JrbGlzdCBhcyB3ZWxsXHJcbiAgICAgKiAgQHBhcmFtIG1hcmtHcm91cElkXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgc3RhdGljIGlzQ2xlYXJNYXJrc0FuZEFubm90YXRpb25zKG1hcmtHcm91cElkOiBudW1iZXIpIHtcclxuXHJcbiAgICAgICAgLy8gY2hlY2sgaXNCbGluZFByYWN0aWNlTWFya2luZ09uIENDIGlzIHR1cm5lZCBPbiBcclxuICAgICAgICBsZXQgaXNCbGluZFByYWN0aWNlTWFya2luZ09uOiBib29sZWFuID0gY29uZmlndXJhYmxlQ2hhcmFjdGVyaXN0aWNzSGVscGVyLmdldENoYXJhY3RlcmlzdGljVmFsdWUoXHJcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZUNoYXJhY3RlcmlzdGljc05hbWVzLkJsaW5kUHJhY3RpY2VNYXJraW5nKS50b0xvd2VyQ2FzZSgpID09PSAndHJ1ZSc7XHJcblxyXG4gICAgICAgIC8vIGNoZWNrIGlzU2hvd1N0YW5kYXJkaXNhdGlvbkRlZmluaXRpdmVNYXJrcyBDQyBpcyB0dXJuZWQgT25cclxuICAgICAgICBsZXQgaXNTaG93U3RhbmRhcmRpc2F0aW9uRGVmaW5pdGl2ZU1hcmtzOiBib29sZWFuID0gY29uZmlndXJhYmxlQ2hhcmFjdGVyaXN0aWNzSGVscGVyLmdldENoYXJhY3RlcmlzdGljVmFsdWUoXHJcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZUNoYXJhY3RlcmlzdGljc05hbWVzLlNob3dTdGFuZGFyZGlzYXRpb25EZWZpbml0aXZlTWFya3MsXHJcbiAgICAgICAgICAgIHFpZ1N0b3JlLmluc3RhbmNlLnNlbGVjdGVkUUlHRm9yTWFya2VyT3BlcmF0aW9uLm1hcmtTY2hlbWVHcm91cElkKS50b0xvd2VyQ2FzZSgpID09PSAndHJ1ZSc7XHJcblxyXG4gICAgICAgIC8vIGNoZWNrIEF1dG9tYXRpY1F1YWxpdHlGZWVkYmFjayBDQyBpcyB0dXJuZWQgT05cclxuICAgICAgICBsZXQgaXNBdXRvbWF0aWNRdWFsaXR5RmVlZGJhY2s6IGJvb2xlYW4gPSBjb25maWd1cmFibGVDaGFyYWN0ZXJpc3RpY3NIZWxwZXIuZ2V0Q2hhcmFjdGVyaXN0aWNWYWx1ZShcclxuICAgICAgICAgICAgY29uZmlndXJhYmxlQ2hhcmFjdGVyaXN0aWNzTmFtZXMuQXV0b21hdGljUXVhbGl0eUZlZWRiYWNrLFxyXG4gICAgICAgICAgICBxaWdTdG9yZS5pbnN0YW5jZS5zZWxlY3RlZFFJR0Zvck1hcmtlck9wZXJhdGlvbi5tYXJrU2NoZW1lR3JvdXBJZCkudG9Mb3dlckNhc2UoKSA9PT0gJ3RydWUnO1xyXG5cclxuICAgICAgICAvLyBjaGVjayB3aGV0aGVyIHRoZSBjdXJyZW50IHJlc3BvbnNlIHR5cGUgaXMgc3RhbmRhcmRpc2F0aW9uL3NlY29uZHN0YW5kYXJkaXNhdGlvbiBtYXJraW5nIFxyXG4gICAgICAgIC8vIGFuZCBjb3JyZXNwb25kaW5nIGNjIGlzIE9OIGZvciBzaG93aW5nICBwcmV2aW91cyBkZWZpbml0aXZlIG1hcmsgYWZ0ZXIgc3VibWl0dGluZy5cclxuICAgICAgICBsZXQgaXNTdGFuZGFyZGlzYXRpb24gPSAod29ya2xpc3RTdG9yZS5pbnN0YW5jZS5jdXJyZW50V29ya2xpc3RUeXBlID09PSBlbnVtcy5Xb3JrbGlzdFR5cGUuc3RhbmRhcmRpc2F0aW9uXHJcbiAgICAgICAgICAgIHx8IHdvcmtsaXN0U3RvcmUuaW5zdGFuY2UuY3VycmVudFdvcmtsaXN0VHlwZSA9PT0gZW51bXMuV29ya2xpc3RUeXBlLnNlY29uZHN0YW5kYXJkaXNhdGlvbilcclxuICAgICAgICAgICAgJiYgaXNTaG93U3RhbmRhcmRpc2F0aW9uRGVmaW5pdGl2ZU1hcmtzID8gdHJ1ZSA6IGZhbHNlO1xyXG5cclxuICAgICAgICAvLyBjaGVjayB3aGV0aGVyIHRoZSBjdXJyZW50IHJlc3BvbnNlIHR5cGUgaXMgUHJhY3RpY2UgYW5kIGNvcnJlc3BvbmRpbmcgY2MgaXMgT04gZm9yIHNob3dpbmdcclxuICAgICAgICAvLyBwcmV2aW91cyBkZWZpbml0aXZlIG1hcmsgYWZ0ZXIgc3VibWl0dGluZy5cclxuICAgICAgICBsZXQgaXNQcmFjdGljZSA9IHdvcmtsaXN0U3RvcmUuaW5zdGFuY2UuY3VycmVudFdvcmtsaXN0VHlwZSA9PT0gZW51bXMuV29ya2xpc3RUeXBlLnByYWN0aWNlXHJcbiAgICAgICAgICAgICYmIGlzQmxpbmRQcmFjdGljZU1hcmtpbmdPbiA/IHRydWUgOiBmYWxzZTtcclxuXHJcbiAgICAgICAgbGV0IGlzU2VlZDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgICAgIGxldCBzZWVkQ29sbGVjdGlvbiA9IHN1Ym1pdFN0b3JlLmluc3RhbmNlLmdldFN1Ym1pdFJlc3BvbnNlUmV0dXJuLnNlZWRDb2xsZWN0aW9uW21hcmtHcm91cElkXTtcclxuICAgICAgICBpZiAoc2VlZENvbGxlY3Rpb24pIHtcclxuICAgICAgICAgICAgLy8gY2hlY2sgd2hldGhlciB0aGUgc3VibWl0dGVkIHJlc3BvbnNlIGlzIHNlZWQgb3Igbm90IGFuZCBpZiBRdWFsaXR5IGZlZWRiYWNrIENDIGlzIE9OIG9yIG5vdFxyXG4gICAgICAgICAgICBpc1NlZWQgPSBpc0F1dG9tYXRpY1F1YWxpdHlGZWVkYmFjayAmJiBzZWVkQ29sbGVjdGlvbi5zZWVkVHlwZSAhPT0gZW51bXMuU2VlZFR5cGUuTm9uZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBpc1N0YW5kYXJkaXNhdGlvbiB8fCBpc1ByYWN0aWNlIHx8IGlzU2VlZDtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0ID0gU3VibWl0SGVscGVyO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vc291cmNlLW1hcC1sb2FkZXIhLi9zcmMvY29tcG9uZW50cy91dGlsaXR5L3N1Ym1pdC9zdWJtaXRoZWxwZXIudHMiXSwibWFwcGluZ3MiOiI7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTs7QUFFQTtBQUVBO0FBQUE7QUFHQTtBQXdUQTtBQXJUQTs7Ozs7QUFLQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7O0FBR0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBRUE7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFFQTs7OztBQUlBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFHQTtBQUlBO0FBQ0E7QUErRUE7Ozs7Ozs7O0FBUUE7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBSUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUF4SEE7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFLQTtBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBK0NBO0FBQUE7QUFFQTsiLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),

/***/ 290:
/* no static exports found */
/* all exports used */
/*!**************************************************!*\
  !*** ./src/components/utility/genericbutton.tsx ***!
  \**************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n/*\r\n  React component for Generic button.\r\n*/\r\n/* tslint:disable:no-unused-variable */\r\nvar React = __webpack_require__(/*! react */ 0);\r\n/* tslint:disable:no-unused-variable */\r\nvar pureRenderComponent = __webpack_require__(/*! ../base/purerendercomponent */ 227);\r\nvar applicationStore = __webpack_require__(/*! ../../stores/applicationoffline/applicationstore */ 247);\r\n/**\r\n * React component class for Generic button implementation.\r\n */\r\nvar GenericButton = /** @class */ (function (_super) {\r\n    __extends(GenericButton, _super);\r\n    /**\r\n     * constructor\r\n     * @param props\r\n     * @param state\r\n     */\r\n    function GenericButton(props, state) {\r\n        var _this = _super.call(this, props, state) || this;\r\n        _this.onClick = _this.onClick.bind(_this);\r\n        _this.onDoubleClick = _this.onDoubleClick.bind(_this);\r\n        _this.onMouseEnter = _this.onMouseEnter.bind(_this);\r\n        _this.onMouseLeave = _this.onMouseLeave.bind(_this);\r\n        _this.onMouseOver = _this.onMouseOver.bind(_this);\r\n        return _this;\r\n    }\r\n    /**\r\n     * Render method\r\n     */\r\n    GenericButton.prototype.render = function () {\r\n        var buttonElement;\r\n        buttonElement = (React.createElement(\"button\", { id: this.props.id, title: this.props.title, className: this.props.className, onClick: this.onClick, disabled: this.props.disabled, onDoubleClick: this.onDoubleClick, onMouseEnter: this.onMouseEnter, onMouseLeave: this.onMouseLeave, onMouseOver: this.onMouseOver },\r\n            this.props.content,\r\n            this.props.childrens != null ? this.props.childrens : null));\r\n        return buttonElement;\r\n    };\r\n    /**\r\n     * Component did mount\r\n     */\r\n    GenericButton.prototype.componentDidMount = function () {\r\n        applicationStore.instance.setMaxListeners(0);\r\n    };\r\n    /**\r\n     * Handles the single click event.\r\n     * @param evnt\r\n     */\r\n    GenericButton.prototype.onClick = function (evnt) {\r\n        if (this.props.onClick != null) {\r\n            this.props.onClick(evnt);\r\n        }\r\n    };\r\n    /**\r\n     * Handles the double click event.\r\n     * @param evnt\r\n     */\r\n    GenericButton.prototype.onDoubleClick = function (evnt) {\r\n        if (this.props.onDoubleClick != null) {\r\n            this.props.onDoubleClick();\r\n        }\r\n    };\r\n    /**\r\n     * Handles the mouse enter event.\r\n     * @param evnt\r\n     */\r\n    GenericButton.prototype.onMouseEnter = function (evnt) {\r\n        if (this.props.onMouseEnter != null) {\r\n            this.props.onMouseEnter();\r\n        }\r\n    };\r\n    /**\r\n     * Handles the mouse leave event.\r\n     * @param evnt\r\n     */\r\n    GenericButton.prototype.onMouseLeave = function (evnt) {\r\n        if (this.props.onMouseLeave != null) {\r\n            this.props.onMouseLeave();\r\n        }\r\n    };\r\n    /**\r\n     * Handles the mouse over event.\r\n     * @param evnt\r\n     */\r\n    GenericButton.prototype.onMouseOver = function (evnt) {\r\n        if (this.props.onMouseOver != null) {\r\n            this.props.onMouseOver();\r\n        }\r\n    };\r\n    return GenericButton;\r\n}(pureRenderComponent));\r\nmodule.exports = GenericButton;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjkwLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvdXRpbGl0eS9nZW5lcmljYnV0dG9uLnRzeD9kNzJhIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXHJcbiAgUmVhY3QgY29tcG9uZW50IGZvciBHZW5lcmljIGJ1dHRvbi5cclxuKi9cclxuLyogdHNsaW50OmRpc2FibGU6bm8tdW51c2VkLXZhcmlhYmxlICovXHJcbmltcG9ydCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XHJcbi8qIHRzbGludDpkaXNhYmxlOm5vLXVudXNlZC12YXJpYWJsZSAqL1xyXG5pbXBvcnQgcHVyZVJlbmRlckNvbXBvbmVudCA9IHJlcXVpcmUoJy4uL2Jhc2UvcHVyZXJlbmRlcmNvbXBvbmVudCcpO1xyXG5pbXBvcnQgYXBwbGljYXRpb25TdG9yZSA9IHJlcXVpcmUoJy4uLy4uL3N0b3Jlcy9hcHBsaWNhdGlvbm9mZmxpbmUvYXBwbGljYXRpb25zdG9yZScpO1xyXG5pbXBvcnQgZW51bXMgPSByZXF1aXJlKCcuL2VudW1zJyk7XHJcbmltcG9ydCBsb2NhbGVTdG9yZSA9IHJlcXVpcmUoJy4uLy4uL3N0b3Jlcy9sb2NhbGUvbG9jYWxlc3RvcmUnKTtcclxuXHJcbmludGVyZmFjZSBQcm9wcyBleHRlbmRzIExvY2FsZVNlbGVjdGlvbkJhc2UsIFByb3BzQmFzZSB7XHJcbiAgICB0aXRsZT86IHN0cmluZztcclxuICAgIGNvbnRlbnQ/OiBzdHJpbmc7XHJcbiAgICBjbGFzc05hbWU/OiBzdHJpbmc7XHJcbiAgICB0YWJJbmRleD86IG51bWJlcjtcclxuICAgIGRpc2FibGVkPzogYm9vbGVhbjtcclxuICAgIGNoaWxkcmVucz86IEFycmF5PEpTWC5FbGVtZW50PjtcclxuICAgIG9uQ2xpY2s/OiBGdW5jdGlvbjtcclxuICAgIG9uRG91YmxlQ2xpY2s/OiBGdW5jdGlvbjtcclxuICAgIG9uTW91c2VFbnRlcj86IEZ1bmN0aW9uO1xyXG4gICAgb25Nb3VzZUxlYXZlPzogRnVuY3Rpb247XHJcbiAgICBvbk1vdXNlT3Zlcj86IEZ1bmN0aW9uO1xyXG4gICAgYnV0dG9uVHlwZT86IGVudW1zLkJ1dHRvblR5cGU7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZWFjdCBjb21wb25lbnQgY2xhc3MgZm9yIEdlbmVyaWMgYnV0dG9uIGltcGxlbWVudGF0aW9uLlxyXG4gKi9cclxuY2xhc3MgR2VuZXJpY0J1dHRvbiBleHRlbmRzIHB1cmVSZW5kZXJDb21wb25lbnQ8UHJvcHMsIGFueT4ge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogY29uc3RydWN0b3JcclxuICAgICAqIEBwYXJhbSBwcm9wc1xyXG4gICAgICogQHBhcmFtIHN0YXRlXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKHByb3BzOiBQcm9wcywgc3RhdGU6IGFueSkge1xyXG4gICAgICAgIHN1cGVyKHByb3BzLCBzdGF0ZSk7XHJcbiAgICAgICAgdGhpcy5vbkNsaWNrID0gdGhpcy5vbkNsaWNrLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5vbkRvdWJsZUNsaWNrID0gdGhpcy5vbkRvdWJsZUNsaWNrLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5vbk1vdXNlRW50ZXIgPSB0aGlzLm9uTW91c2VFbnRlci5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMub25Nb3VzZUxlYXZlID0gdGhpcy5vbk1vdXNlTGVhdmUuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLm9uTW91c2VPdmVyID0gdGhpcy5vbk1vdXNlT3Zlci5iaW5kKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVuZGVyIG1ldGhvZFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcmVuZGVyKCkge1xyXG4gICAgICAgIGxldCBidXR0b25FbGVtZW50OiBKU1guRWxlbWVudDtcclxuICAgICAgICAgICAgICAgIGJ1dHRvbkVsZW1lbnQgPSAoPGJ1dHRvbiBpZD17dGhpcy5wcm9wcy5pZH1cclxuICAgICAgICAgICAgICAgICAgICB0aXRsZT17dGhpcy5wcm9wcy50aXRsZX1cclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e3RoaXMucHJvcHMuY2xhc3NOYW1lfVxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMub25DbGlja31cclxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17dGhpcy5wcm9wcy5kaXNhYmxlZH1cclxuICAgICAgICAgICAgICAgICAgICBvbkRvdWJsZUNsaWNrPXt0aGlzLm9uRG91YmxlQ2xpY2t9XHJcbiAgICAgICAgICAgICAgICAgICAgb25Nb3VzZUVudGVyPXt0aGlzLm9uTW91c2VFbnRlcn1cclxuICAgICAgICAgICAgICAgICAgICBvbk1vdXNlTGVhdmU9e3RoaXMub25Nb3VzZUxlYXZlfVxyXG4gICAgICAgICAgICAgICAgICAgIG9uTW91c2VPdmVyPXt0aGlzLm9uTW91c2VPdmVyfT5cclxuICAgICAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy5jb250ZW50fVxyXG4gICAgICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLmNoaWxkcmVucyAhPSBudWxsID8gdGhpcy5wcm9wcy5jaGlsZHJlbnMgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgPC9idXR0b24+KTtcclxuICAgICAgICByZXR1cm4gYnV0dG9uRWxlbWVudDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbXBvbmVudCBkaWQgbW91bnRcclxuICAgICAqL1xyXG4gICAgcHVibGljIGNvbXBvbmVudERpZE1vdW50KCkge1xyXG4gICAgICAgIGFwcGxpY2F0aW9uU3RvcmUuaW5zdGFuY2Uuc2V0TWF4TGlzdGVuZXJzKDApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGFuZGxlcyB0aGUgc2luZ2xlIGNsaWNrIGV2ZW50LlxyXG4gICAgICogQHBhcmFtIGV2bnRcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBvbkNsaWNrKGV2bnQ6IGFueSkge1xyXG4gICAgICAgIGlmICh0aGlzLnByb3BzLm9uQ2xpY2sgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLnByb3BzLm9uQ2xpY2soZXZudCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGFuZGxlcyB0aGUgZG91YmxlIGNsaWNrIGV2ZW50LlxyXG4gICAgICogQHBhcmFtIGV2bnRcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBvbkRvdWJsZUNsaWNrKGV2bnQ6IGFueSkge1xyXG4gICAgICAgIGlmICh0aGlzLnByb3BzLm9uRG91YmxlQ2xpY2sgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLnByb3BzLm9uRG91YmxlQ2xpY2soKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIYW5kbGVzIHRoZSBtb3VzZSBlbnRlciBldmVudC5cclxuICAgICAqIEBwYXJhbSBldm50XHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgb25Nb3VzZUVudGVyKGV2bnQ6IGFueSkge1xyXG4gICAgICAgIGlmICh0aGlzLnByb3BzLm9uTW91c2VFbnRlciAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMub25Nb3VzZUVudGVyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGFuZGxlcyB0aGUgbW91c2UgbGVhdmUgZXZlbnQuXHJcbiAgICAgKiBAcGFyYW0gZXZudFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIG9uTW91c2VMZWF2ZShldm50OiBhbnkpIHtcclxuICAgICAgICBpZiAodGhpcy5wcm9wcy5vbk1vdXNlTGVhdmUgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLnByb3BzLm9uTW91c2VMZWF2ZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEhhbmRsZXMgdGhlIG1vdXNlIG92ZXIgZXZlbnQuXHJcbiAgICAgKiBAcGFyYW0gZXZudFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIG9uTW91c2VPdmVyKGV2bnQ6IGFueSkge1xyXG4gICAgICAgIGlmICh0aGlzLnByb3BzLm9uTW91c2VPdmVyICE9IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5vbk1vdXNlT3ZlcigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0ID0gR2VuZXJpY0J1dHRvbjtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L3NvdXJjZS1tYXAtbG9hZGVyIS4vc3JjL2NvbXBvbmVudHMvdXRpbGl0eS9nZW5lcmljYnV0dG9uLnRzeCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFtQkE7O0FBRUE7QUFDQTtBQUFBO0FBRUE7Ozs7QUFJQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFTQTtBQUNBO0FBRUE7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7Iiwic291cmNlUm9vdCI6IiJ9");

/***/ }),

/***/ 297:
/* no static exports found */
/* all exports used */
/*!***************************************************!*\
  !*** ./src/actions/submit/submitactioncreator.ts ***!
  \***************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar dispatcher = __webpack_require__(/*! ../../app/dispatcher */ 242);\r\nvar submitResponseStartedAction = __webpack_require__(/*! ./submitresponsestartedaction */ 346);\r\nvar submitResponseDataService = __webpack_require__(/*! ../../dataservices/submit/submitresponsedataservice */ 375);\r\nvar submitResponseCompletedAction = __webpack_require__(/*! ./submitresponsecompletedaction */ 345);\r\nvar shareAndClassifyCompletedAction = __webpack_require__(/*! ./shareandclassifycompletedaction */ 344);\r\nvar enums = __webpack_require__(/*! ../../components/utility/enums */ 225);\r\nvar base = __webpack_require__(/*! ../base/actioncreatorbase */ 280);\r\nvar SubmitActionCreator = /** @class */ (function (_super) {\r\n    __extends(SubmitActionCreator, _super);\r\n    function SubmitActionCreator() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    /**\r\n     * when clicking on submit button\r\n     * @param markGroupId The mark group id\r\n     */\r\n    SubmitActionCreator.prototype.submitResponseStarted = function (markGroupId) {\r\n        dispatcher.dispatch(new submitResponseStartedAction(markGroupId));\r\n    };\r\n    /**\r\n     * Submit response\r\n     * @param submitResponseArgument\r\n     * @param markSchemeGroupId\r\n     * @param worklistType\r\n     * @param remarkRequestType\r\n     * @param selectedDisplayId\r\n     */\r\n    SubmitActionCreator.prototype.submitResponse = function (submitResponseArgument, markSchemeGroupId, worklistType, remarkRequestType, fromMarkschemepanel, selectedDisplayId, examinerRoleIds, markSchemeGroupIds, isStdSetupMode) {\r\n        if (remarkRequestType === void 0) { remarkRequestType = enums.RemarkRequestType.Unknown; }\r\n        if (fromMarkschemepanel === void 0) { fromMarkschemepanel = false; }\r\n        if (selectedDisplayId === void 0) { selectedDisplayId = undefined; }\r\n        if (examinerRoleIds === void 0) { examinerRoleIds = null; }\r\n        if (markSchemeGroupIds === void 0) { markSchemeGroupIds = null; }\r\n        if (isStdSetupMode === void 0) { isStdSetupMode = false; }\r\n        var that = this;\r\n        submitResponseDataService.submitResponses(submitResponseArgument, markSchemeGroupId, worklistType, remarkRequestType, examinerRoleIds, markSchemeGroupIds, function (success, submitResponseReturn) {\r\n            // This will validate the call to find any network failure\r\n            // and is mandatory to add this.\r\n            if (that.validateCall(submitResponseReturn, true, true)) {\r\n                if (!success) {\r\n                    submitResponseReturn = undefined;\r\n                }\r\n                dispatcher.dispatch(new submitResponseCompletedAction(success, submitResponseReturn, worklistType, fromMarkschemepanel, submitResponseArgument.examinerApproval, submitResponseArgument.markGroupIds, selectedDisplayId, isStdSetupMode));\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * Share and Classify response\r\n     * @param submitResponseArgument\r\n     * @param fromMarkschemepanel\r\n     * @param selectedDisplayId\r\n     */\r\n    SubmitActionCreator.prototype.shareAndClassifyResponse = function (submitResponseArgument, fromMarkschemepanel, selectedDisplayId) {\r\n        if (fromMarkschemepanel === void 0) { fromMarkschemepanel = false; }\r\n        if (selectedDisplayId === void 0) { selectedDisplayId = undefined; }\r\n        var that = this;\r\n        submitResponseDataService.ShareAndClassifyResponse(submitResponseArgument, function (success, shareAndClassifyReturn) {\r\n            // This will validate the call to find any network failure\r\n            // and is mandatory to add this.\r\n            if (that.validateCall(shareAndClassifyReturn, true, true)) {\r\n                if (!success) {\r\n                    shareAndClassifyReturn = undefined;\r\n                }\r\n                dispatcher.dispatch(new shareAndClassifyCompletedAction(success, shareAndClassifyReturn, fromMarkschemepanel, selectedDisplayId));\r\n            }\r\n        });\r\n    };\r\n    return SubmitActionCreator;\r\n}(base));\r\nvar submitActionCreator = new SubmitActionCreator();\r\nmodule.exports = submitActionCreator;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjk3LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2FjdGlvbnMvc3VibWl0L3N1Ym1pdGFjdGlvbmNyZWF0b3IudHM/ZDMyYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZGlzcGF0Y2hlciA9IHJlcXVpcmUoJy4uLy4uL2FwcC9kaXNwYXRjaGVyJyk7XHJcbmltcG9ydCBzdWJtaXRSZXNwb25zZVN0YXJ0ZWRBY3Rpb24gPSByZXF1aXJlKCcuL3N1Ym1pdHJlc3BvbnNlc3RhcnRlZGFjdGlvbicpO1xyXG5pbXBvcnQgc3VibWl0UmVzcG9uc2VEYXRhU2VydmljZSA9IHJlcXVpcmUoJy4uLy4uL2RhdGFzZXJ2aWNlcy9zdWJtaXQvc3VibWl0cmVzcG9uc2VkYXRhc2VydmljZScpO1xyXG5pbXBvcnQgc3VibWl0UmVzcG9uc2VDb21wbGV0ZWRBY3Rpb24gPSByZXF1aXJlKCcuL3N1Ym1pdHJlc3BvbnNlY29tcGxldGVkYWN0aW9uJyk7XHJcbmltcG9ydCBzaGFyZUFuZENsYXNzaWZ5Q29tcGxldGVkQWN0aW9uID0gcmVxdWlyZSgnLi9zaGFyZWFuZGNsYXNzaWZ5Y29tcGxldGVkYWN0aW9uJyk7XHJcbmltcG9ydCB3b3JrbGlzdERhdGFTZXJ2aWNlID0gcmVxdWlyZSgnLi4vLi4vZGF0YXNlcnZpY2VzL3dvcmtsaXN0L3dvcmtsaXN0ZGF0YXNlcnZpY2UnKTtcclxuaW1wb3J0IG1hcmtlclByb2dyZXNzRGF0YSA9IHJlcXVpcmUoJy4uLy4uL3N0b3Jlcy93b3JrbGlzdC90eXBpbmdzL21hcmtlcnByb2dyZXNzZGF0YScpO1xyXG5pbXBvcnQgZW51bXMgPSByZXF1aXJlKCcuLi8uLi9jb21wb25lbnRzL3V0aWxpdHkvZW51bXMnKTtcclxuaW1wb3J0IGJhc2UgPSByZXF1aXJlKCcuLi9iYXNlL2FjdGlvbmNyZWF0b3JiYXNlJyk7XHJcbmltcG9ydCBTaGFyZUFuZENsYXNzaWZ5UmV0dXJuID0gcmVxdWlyZSgnLi4vLi4vc3RvcmVzL3N1Ym1pdC90eXBpbmdzL3NoYXJlQW5kQ2xhc3NpZnlSZXR1cm4nKTtcclxuY2xhc3MgU3VibWl0QWN0aW9uQ3JlYXRvciBleHRlbmRzIGJhc2Uge1xyXG4gICAgLyoqXHJcbiAgICAgKiB3aGVuIGNsaWNraW5nIG9uIHN1Ym1pdCBidXR0b25cclxuICAgICAqIEBwYXJhbSBtYXJrR3JvdXBJZCBUaGUgbWFyayBncm91cCBpZFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3VibWl0UmVzcG9uc2VTdGFydGVkKG1hcmtHcm91cElkOiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICBkaXNwYXRjaGVyLmRpc3BhdGNoKG5ldyBzdWJtaXRSZXNwb25zZVN0YXJ0ZWRBY3Rpb24obWFya0dyb3VwSWQpKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFN1Ym1pdCByZXNwb25zZVxyXG4gICAgICogQHBhcmFtIHN1Ym1pdFJlc3BvbnNlQXJndW1lbnRcclxuICAgICAqIEBwYXJhbSBtYXJrU2NoZW1lR3JvdXBJZFxyXG4gICAgICogQHBhcmFtIHdvcmtsaXN0VHlwZVxyXG4gICAgICogQHBhcmFtIHJlbWFya1JlcXVlc3RUeXBlXHJcbiAgICAgKiBAcGFyYW0gc2VsZWN0ZWREaXNwbGF5SWRcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN1Ym1pdFJlc3BvbnNlKHN1Ym1pdFJlc3BvbnNlQXJndW1lbnQ6IFN1Ym1pdFJlc3BvbnNlQXJndW1lbnQsXHJcbiAgICAgICAgbWFya1NjaGVtZUdyb3VwSWQ6IG51bWJlcixcclxuICAgICAgICB3b3JrbGlzdFR5cGU6IGVudW1zLldvcmtsaXN0VHlwZSxcclxuICAgICAgICByZW1hcmtSZXF1ZXN0VHlwZTogZW51bXMuUmVtYXJrUmVxdWVzdFR5cGUgPSBlbnVtcy5SZW1hcmtSZXF1ZXN0VHlwZS5Vbmtub3duLCBmcm9tTWFya3NjaGVtZXBhbmVsOiBib29sZWFuID0gZmFsc2UsXHJcbiAgICAgICAgc2VsZWN0ZWREaXNwbGF5SWQ6IHN0cmluZyA9IHVuZGVmaW5lZCwgZXhhbWluZXJSb2xlSWRzOiBBcnJheTxudW1iZXI+ID0gbnVsbCwgbWFya1NjaGVtZUdyb3VwSWRzOiBBcnJheTxudW1iZXI+ID0gbnVsbCxcclxuICAgICAgICBpc1N0ZFNldHVwTW9kZTogYm9vbGVhbiA9IGZhbHNlKTogdm9pZCB7XHJcblxyXG4gICAgICAgIGxldCB0aGF0ID0gdGhpcztcclxuICAgICAgICBzdWJtaXRSZXNwb25zZURhdGFTZXJ2aWNlLnN1Ym1pdFJlc3BvbnNlcyhzdWJtaXRSZXNwb25zZUFyZ3VtZW50LCBtYXJrU2NoZW1lR3JvdXBJZCxcclxuICAgICAgICAgICAgd29ya2xpc3RUeXBlLFxyXG4gICAgICAgICAgICByZW1hcmtSZXF1ZXN0VHlwZSwgZXhhbWluZXJSb2xlSWRzLCBtYXJrU2NoZW1lR3JvdXBJZHMsXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIChzdWNjZXNzOiBib29sZWFuLCBzdWJtaXRSZXNwb25zZVJldHVybj86IFN1Ym1pdFJlc3BvbnNlUmV0dXJuKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBUaGlzIHdpbGwgdmFsaWRhdGUgdGhlIGNhbGwgdG8gZmluZCBhbnkgbmV0d29yayBmYWlsdXJlXHJcbiAgICAgICAgICAgICAgICAvLyBhbmQgaXMgbWFuZGF0b3J5IHRvIGFkZCB0aGlzLlxyXG4gICAgICAgICAgICAgICAgaWYgKHRoYXQudmFsaWRhdGVDYWxsKHN1Ym1pdFJlc3BvbnNlUmV0dXJuLCB0cnVlLCB0cnVlKSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3VibWl0UmVzcG9uc2VSZXR1cm4gPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoZXIuZGlzcGF0Y2gobmV3IHN1Ym1pdFJlc3BvbnNlQ29tcGxldGVkQWN0aW9uKHN1Y2Nlc3MsIHN1Ym1pdFJlc3BvbnNlUmV0dXJuLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3b3JrbGlzdFR5cGUsIGZyb21NYXJrc2NoZW1lcGFuZWwsIHN1Ym1pdFJlc3BvbnNlQXJndW1lbnQuZXhhbWluZXJBcHByb3ZhbCwgc3VibWl0UmVzcG9uc2VBcmd1bWVudC5tYXJrR3JvdXBJZHMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkRGlzcGxheUlkLCBpc1N0ZFNldHVwTW9kZSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTaGFyZSBhbmQgQ2xhc3NpZnkgcmVzcG9uc2VcclxuICAgICAqIEBwYXJhbSBzdWJtaXRSZXNwb25zZUFyZ3VtZW50XHJcbiAgICAgKiBAcGFyYW0gZnJvbU1hcmtzY2hlbWVwYW5lbFxyXG4gICAgICogQHBhcmFtIHNlbGVjdGVkRGlzcGxheUlkXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzaGFyZUFuZENsYXNzaWZ5UmVzcG9uc2UoXHJcbiAgICAgICAgc3VibWl0UmVzcG9uc2VBcmd1bWVudDogU3VibWl0UmVzcG9uc2VBcmd1bWVudCxcclxuICAgICAgICBmcm9tTWFya3NjaGVtZXBhbmVsOiBib29sZWFuID0gZmFsc2UsXHJcbiAgICAgICAgc2VsZWN0ZWREaXNwbGF5SWQ6IHN0cmluZyA9IHVuZGVmaW5lZCxcclxuICAgICk6IHZvaWQge1xyXG5cclxuICAgICAgICBsZXQgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgc3VibWl0UmVzcG9uc2VEYXRhU2VydmljZS5TaGFyZUFuZENsYXNzaWZ5UmVzcG9uc2Uoc3VibWl0UmVzcG9uc2VBcmd1bWVudCxcclxuICAgICAgICAgICAgZnVuY3Rpb24gKHN1Y2Nlc3M6IGJvb2xlYW4sIHNoYXJlQW5kQ2xhc3NpZnlSZXR1cm4/OiBTaGFyZUFuZENsYXNzaWZ5UmV0dXJuKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBUaGlzIHdpbGwgdmFsaWRhdGUgdGhlIGNhbGwgdG8gZmluZCBhbnkgbmV0d29yayBmYWlsdXJlXHJcbiAgICAgICAgICAgICAgICAvLyBhbmQgaXMgbWFuZGF0b3J5IHRvIGFkZCB0aGlzLlxyXG4gICAgICAgICAgICAgICAgaWYgKHRoYXQudmFsaWRhdGVDYWxsKHNoYXJlQW5kQ2xhc3NpZnlSZXR1cm4sIHRydWUsIHRydWUpKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaGFyZUFuZENsYXNzaWZ5UmV0dXJuID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaGVyLmRpc3BhdGNoKG5ldyBzaGFyZUFuZENsYXNzaWZ5Q29tcGxldGVkQWN0aW9uKHN1Y2Nlc3MsIHNoYXJlQW5kQ2xhc3NpZnlSZXR1cm4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZyb21NYXJrc2NoZW1lcGFuZWwsIHNlbGVjdGVkRGlzcGxheUlkKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbmxldCBzdWJtaXRBY3Rpb25DcmVhdG9yID0gbmV3IFN1Ym1pdEFjdGlvbkNyZWF0b3IoKTtcclxuLyogZXhwb3J0aW5nIGFuIGluc3RhbmNlIG9mIFN1Ym1pdEFjdGlvbkNyZWF0b3IgKi9cclxuZXhwb3J0ID0gc3VibWl0QWN0aW9uQ3JlYXRvcjtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L3NvdXJjZS1tYXAtbG9hZGVyIS4vc3JjL2FjdGlvbnMvc3VibWl0L3N1Ym1pdGFjdGlvbmNyZWF0b3IudHMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7O0FBdUVBO0FBdEVBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7Ozs7O0FBT0E7QUFDQTtBQUdBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUVBOzs7OztBQUtBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7Iiwic291cmNlUm9vdCI6IiJ9");

/***/ }),

/***/ 303:
/* no static exports found */
/* all exports used */
/*!**********************************************************************!*\
  !*** ./src/components/utility/loadingindicator/loadingindicator.tsx ***!
  \**********************************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n/* tslint:disable:no-unused-variable */\r\nvar React = __webpack_require__(/*! react */ 0);\r\n/* tslint:disable:no-unused-variable */\r\nvar pureRenderComponent = __webpack_require__(/*! ../../base/purerendercomponent */ 227);\r\nvar classNames = __webpack_require__(/*! classnames */ 39);\r\n/**\r\n * Class for LoadingIndicator component.\r\n */\r\nvar LoadingIndicator = /** @class */ (function (_super) {\r\n    __extends(LoadingIndicator, _super);\r\n    /**\r\n     * @constructor\r\n     */\r\n    function LoadingIndicator(props) {\r\n        return _super.call(this, props, null) || this;\r\n    }\r\n    /**\r\n     * Render method\r\n     */\r\n    LoadingIndicator.prototype.render = function () {\r\n        if (this.props.isOnline === false) {\r\n            return null;\r\n        }\r\n        else {\r\n            return (React.createElement(\"div\", { className: this.props.cssClass },\r\n                React.createElement(\"span\", { className: classNames('loader', (this.props.isFrv ? 'middle-content' : 'text-middle')) },\r\n                    React.createElement(\"span\", { className: 'dot' }),\r\n                    React.createElement(\"span\", { className: 'dot' }),\r\n                    React.createElement(\"span\", { className: 'dot' }))));\r\n        }\r\n    };\r\n    return LoadingIndicator;\r\n}(pureRenderComponent));\r\nmodule.exports = LoadingIndicator;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzAzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvdXRpbGl0eS9sb2FkaW5naW5kaWNhdG9yL2xvYWRpbmdpbmRpY2F0b3IudHN4PzM5MDkiXSwic291cmNlc0NvbnRlbnQiOlsiLyogdHNsaW50OmRpc2FibGU6bm8tdW51c2VkLXZhcmlhYmxlICovXHJcbmltcG9ydCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XHJcbi8qIHRzbGludDpkaXNhYmxlOm5vLXVudXNlZC12YXJpYWJsZSAqL1xyXG5pbXBvcnQgcHVyZVJlbmRlckNvbXBvbmVudCA9IHJlcXVpcmUoJy4uLy4uL2Jhc2UvcHVyZXJlbmRlcmNvbXBvbmVudCcpO1xyXG5sZXQgY2xhc3NOYW1lcyA9IHJlcXVpcmUoJ2NsYXNzbmFtZXMnKTtcclxuXHJcbi8qKlxyXG4gKiBQcm9wc1xyXG4gKiBAcGFyYW0ge1Byb3BzfSBwcm9wc1xyXG4gKi9cclxuaW50ZXJmYWNlIFByb3BzIGV4dGVuZHMgTG9jYWxlU2VsZWN0aW9uQmFzZSwgUHJvcHNCYXNlIHtcclxuICAgIGlzT25saW5lPzogYm9vbGVhbjtcclxuICAgIGNzc0NsYXNzOiBzdHJpbmc7XHJcbiAgICBpc0Zydj86IGJvb2xlYW47XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDbGFzcyBmb3IgTG9hZGluZ0luZGljYXRvciBjb21wb25lbnQuXHJcbiAqL1xyXG5jbGFzcyBMb2FkaW5nSW5kaWNhdG9yIGV4dGVuZHMgcHVyZVJlbmRlckNvbXBvbmVudDxQcm9wcywgYW55PiB7XHJcbiAgICAvKipcclxuICAgICAqIEBjb25zdHJ1Y3RvclxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9wczogUHJvcHMpIHtcclxuICAgICAgICBzdXBlcihwcm9wcywgbnVsbCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZW5kZXIgbWV0aG9kXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyByZW5kZXIoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuaXNPbmxpbmUgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ge3RoaXMucHJvcHMuY3NzQ2xhc3N9PlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0ge2NsYXNzTmFtZXMoJ2xvYWRlcicsICh0aGlzLnByb3BzLmlzRnJ2ID8gJ21pZGRsZS1jb250ZW50JyA6ICd0ZXh0LW1pZGRsZScpKSB9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J2RvdCc+PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J2RvdCc+PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J2RvdCc+PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5leHBvcnQgPSBMb2FkaW5nSW5kaWNhdG9yO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vc291cmNlLW1hcC1sb2FkZXIhLi9zcmMvY29tcG9uZW50cy91dGlsaXR5L2xvYWRpbmdpbmRpY2F0b3IvbG9hZGluZ2luZGljYXRvci50c3giXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVlBOztBQUVBO0FBQ0E7QUFBQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9");

/***/ }),

/***/ 308:
/* no static exports found */
/* all exports used */
/*!*************************************************!*\
  !*** ./src/components/utility/togglebutton.tsx ***!
  \*************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar React = __webpack_require__(/*! react */ 0);\r\nvar classNames = __webpack_require__(/*! classnames */ 39);\r\nvar pureRenderComponent = __webpack_require__(/*! ../base/purerendercomponent */ 227);\r\n/**\r\n * React component class for Ask on Logout confirmation\r\n */\r\nvar ToggleButton = /** @class */ (function (_super) {\r\n    __extends(ToggleButton, _super);\r\n    /**\r\n     * constructor\r\n     * @param props\r\n     * @param state\r\n     */\r\n    function ToggleButton(props, state) {\r\n        var _this = _super.call(this, props, state) || this;\r\n        _this.onToggleChange = function () {\r\n            _this.props.onChange(_this.props.index, !_this.props.isChecked, _this.props.displayId);\r\n        };\r\n        _this.onToggleChange = _this.onToggleChange.bind(_this);\r\n        return _this;\r\n    }\r\n    /**\r\n     * Render method\r\n     */\r\n    ToggleButton.prototype.render = function () {\r\n        return (React.createElement(\"div\", { className: classNames('toggle-button', this.props.className), \"aria-pressed\": 'false', style: this.props.style, title: this.props.title },\r\n            React.createElement(\"input\", { type: 'checkbox', id: this.props.id + '_toggle_button', \"data-value\": this.props.isChecked, checked: this.props.isChecked, onChange: this.onToggleChange, disabled: this.props.isDisabled }),\r\n            React.createElement(\"label\", { className: 'toggle-label', id: this.props.id + '_label', htmlFor: this.props.id + '_toggle_button', title: this.props.title },\r\n                React.createElement(\"div\", { className: 'toggle-content' },\r\n                    React.createElement(\"div\", { className: 'on-text' }, this.props.onText),\r\n                    React.createElement(\"div\", { className: 'off-text' }, this.props.offText)),\r\n                React.createElement(\"div\", { className: 'toggle-switch' }))));\r\n    };\r\n    return ToggleButton;\r\n}(pureRenderComponent));\r\nmodule.exports = ToggleButton;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzA4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvdXRpbGl0eS90b2dnbGVidXR0b24udHN4P2ZjZmUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcclxubGV0IGNsYXNzTmFtZXMgPSByZXF1aXJlKCdjbGFzc25hbWVzJyk7XHJcbmltcG9ydCBJbW11dGFibGUgPSByZXF1aXJlKCdpbW11dGFibGUnKTtcclxuaW1wb3J0IHB1cmVSZW5kZXJDb21wb25lbnQgPSByZXF1aXJlKCcuLi9iYXNlL3B1cmVyZW5kZXJjb21wb25lbnQnKTtcclxuaW1wb3J0IGxvY2FsZVN0b3JlID0gcmVxdWlyZSgnLi4vLi4vc3RvcmVzL2xvY2FsZS9sb2NhbGVzdG9yZScpO1xyXG5cclxuLyoqXHJcbiAqIFByb3BzIGZvciB0aGUgTGVmdCBQYW5lbFxyXG4gKi9cclxuaW50ZXJmYWNlIFRvZ2dsZUJ1dHRvblByb3BzIGV4dGVuZHMgTG9jYWxlU2VsZWN0aW9uQmFzZSwgUHJvcHNCYXNlIHtcclxuICAgIGluZGV4OiBudW1iZXI7XHJcbiAgICBpc0NoZWNrZWQ6IGJvb2xlYW47XHJcbiAgICBvbkNoYW5nZTogRnVuY3Rpb247XHJcbiAgICBzdHlsZTogUmVhY3QuQ1NTUHJvcGVydGllcztcclxuICAgIHRpdGxlOiBzdHJpbmc7XHJcblx0Y2xhc3NOYW1lPzogc3RyaW5nO1xyXG4gICAgaXNEaXNhYmxlZD86IGJvb2xlYW47XHJcbiAgICBvblRleHQ6IHN0cmluZztcclxuICAgIG9mZlRleHQ6IHN0cmluZztcclxuICAgIGRpc3BsYXlJZD86IHN0cmluZztcclxufVxyXG5cclxuLyoqXHJcbiAqIFJlYWN0IGNvbXBvbmVudCBjbGFzcyBmb3IgQXNrIG9uIExvZ291dCBjb25maXJtYXRpb25cclxuICovXHJcbmNsYXNzIFRvZ2dsZUJ1dHRvbiBleHRlbmRzIHB1cmVSZW5kZXJDb21wb25lbnQ8VG9nZ2xlQnV0dG9uUHJvcHMsIGFueT4ge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogY29uc3RydWN0b3JcclxuICAgICAqIEBwYXJhbSBwcm9wc1xyXG4gICAgICogQHBhcmFtIHN0YXRlXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKHByb3BzOiBUb2dnbGVCdXR0b25Qcm9wcywgc3RhdGU6IGFueSkge1xyXG4gICAgICAgIHN1cGVyKHByb3BzLCBzdGF0ZSk7XHJcbiAgICAgICAgdGhpcy5vblRvZ2dsZUNoYW5nZSA9IHRoaXMub25Ub2dnbGVDaGFuZ2UuYmluZCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlbmRlciBtZXRob2RcclxuICAgICAqL1xyXG4gICAgcHVibGljIHJlbmRlcigpIHtcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17Y2xhc3NOYW1lcygndG9nZ2xlLWJ1dHRvbicsIHRoaXMucHJvcHMuY2xhc3NOYW1lKX1cclxuICAgICAgICAgICAgICAgIGFyaWEtcHJlc3NlZD0nZmFsc2UnIHN0eWxlPXt0aGlzLnByb3BzLnN0eWxlfSB0aXRsZT17dGhpcy5wcm9wcy50aXRsZX0gPlxyXG5cdFx0XHRcdDxpbnB1dCB0eXBlPSdjaGVja2JveCcgaWQ9e3RoaXMucHJvcHMuaWQgKyAnX3RvZ2dsZV9idXR0b24nfVxyXG5cdFx0XHRcdFx0ZGF0YS12YWx1ZT17dGhpcy5wcm9wcy5pc0NoZWNrZWR9IGNoZWNrZWQ9e3RoaXMucHJvcHMuaXNDaGVja2VkfSBvbkNoYW5nZT17dGhpcy5vblRvZ2dsZUNoYW5nZX0gZGlzYWJsZWQ9e3RoaXMucHJvcHMuaXNEaXNhYmxlZH0gLz5cclxuICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9J3RvZ2dsZS1sYWJlbCcgaWQ9e3RoaXMucHJvcHMuaWQgKyAnX2xhYmVsJ30gaHRtbEZvcj17dGhpcy5wcm9wcy5pZCArICdfdG9nZ2xlX2J1dHRvbid9XHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU9e3RoaXMucHJvcHMudGl0bGV9PlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd0b2dnbGUtY29udGVudCc+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdvbi10ZXh0Jz57dGhpcy5wcm9wcy5vblRleHR9PC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdvZmYtdGV4dCc+e3RoaXMucHJvcHMub2ZmVGV4dH08L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndG9nZ2xlLXN3aXRjaCc+PC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2xhYmVsPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb25Ub2dnbGVDaGFuZ2UgPSAoKTogdm9pZCA9PiB7XHJcbiAgICAgICAgdGhpcy5wcm9wcy5vbkNoYW5nZSh0aGlzLnByb3BzLmluZGV4LCAhdGhpcy5wcm9wcy5pc0NoZWNrZWQsIHRoaXMucHJvcHMuZGlzcGxheUlkKTtcclxuICAgIH07XHJcbn1cclxuXHJcbmV4cG9ydCA9IFRvZ2dsZUJ1dHRvbjtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L3NvdXJjZS1tYXAtbG9hZGVyIS4vc3JjL2NvbXBvbmVudHMvdXRpbGl0eS90b2dnbGVidXR0b24udHN4Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFFQTtBQW1CQTs7QUFFQTtBQUNBO0FBQUE7QUFFQTs7OztBQUlBO0FBQ0E7QUFBQTtBQTBCQTtBQUNBO0FBQ0E7QUExQkE7O0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFJQTtBQUtBO0FBQUE7QUFFQTsiLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),

/***/ 313:
/* no static exports found */
/* all exports used */
/*!************************************************************!*\
  !*** ./src/components/response/responsescreen/taglist.tsx ***!
  \************************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n/* tslint:disable:no-unused-variable */\r\nvar React = __webpack_require__(/*! react */ 0);\r\n/* tslint:enable:no-unused-variable */\r\nvar classNames = __webpack_require__(/*! classnames */ 39);\r\nvar pureRenderComponent = __webpack_require__(/*! ../../base/purerendercomponent */ 227);\r\nvar Tag = __webpack_require__(/*! ./tag */ 356);\r\nvar tagActionCreator = __webpack_require__(/*! ../../../actions/tag/tagactioncreator */ 441);\r\nvar responseStore = __webpack_require__(/*! ../../../stores/response/responsestore */ 235);\r\nvar worklistStore = __webpack_require__(/*! ../../../stores/worklist/workliststore */ 231);\r\nvar domManager = __webpack_require__(/*! ../../../utility/generic/domhelper */ 294);\r\nvar loginSession = __webpack_require__(/*! ../../../app/loginsession */ 252);\r\nvar TAG_LIST_WIDTH = 90;\r\nvar TAG_LIST_HEIGHT = 216;\r\n/**\r\n * React component for reports\r\n */\r\nvar TagList = /** @class */ (function (_super) {\r\n    __extends(TagList, _super);\r\n    /**\r\n     * Constructor for TagList class\r\n     */\r\n    function TagList(props, state) {\r\n        var _this = _super.call(this, props, state) || this;\r\n        _this.xPos = 0;\r\n        _this.yPos = 0;\r\n        /**\r\n         * Render the list\r\n         */\r\n        _this.renderTagListItems = function () {\r\n            var that = _this;\r\n            var tagList = that.props.tagList;\r\n            var element = tagList && tagList.map(function (tagItem) {\r\n                return (React.createElement(\"li\", { className: 'tag-menu-item', id: that.props.id + '_item_' + tagItem.tagId, key: that.props.id + '_item_' + tagItem.tagId },\r\n                    React.createElement(Tag, { isSelected: (that.selectedTag === tagItem.tagId), tagType: tagItem.tagId, onSelection: that.onTagSelection, onArrowClick: that.onArrowClick, isInList: true, isFromWorklist: (that.props.markGroupId ? true : false), selectedLanguage: that.props.selectedLanguage, id: that.props.id + '_' + tagItem.tagId, key: that.props.id + '_' + tagItem.tagId })));\r\n            });\r\n            return element;\r\n        };\r\n        /**\r\n         * to hide the tag drop down clicking outside the box.\r\n         */\r\n        _this.hideTagList = function (event) {\r\n            if (event.target !== undefined &&\r\n                domManager.searchParentNode(event.target, function (el) { return el.id === 'response_tag'; }) == null) {\r\n                if (_this.state.isExpanded === true) {\r\n                    _this.setState({\r\n                        isExpanded: false\r\n                    });\r\n                }\r\n            }\r\n        };\r\n        /**\r\n         * To change the state of the component on selecting the component.\r\n         */\r\n        _this.onTagSelection = function (selectedTag, event) {\r\n            event.stopPropagation();\r\n            // Case 1: this.props.markGroupId : Tag Updated from worklist.\r\n            // Case 2: responseStore.instance.selectedMarkGroupId : Tag Updated  within response.\r\n            var currentMarkGroupId = _this.props.markGroupId ? _this.props.markGroupId : responseStore.instance.selectedMarkGroupId;\r\n            var updateResponseTagArguments = {\r\n                markGroupList: _this.populateMarkGroupList(currentMarkGroupId, _this.props.isESResponse),\r\n                examinerId: loginSession.EXAMINER_ID,\r\n                isDelete: selectedTag === 0 ? true : false,\r\n                tagId: selectedTag,\r\n                isESResponse: _this.props.isESResponse\r\n            };\r\n            // get the updated tag order to update the worklist data with the newly selected tag.\r\n            var tagOrder = _this.props.tagList.filter(function (t) { return t.tagId === selectedTag; })[0].tagOrder;\r\n            tagActionCreator.updateTags(updateResponseTagArguments, tagOrder, currentMarkGroupId, _this.props.markingMode);\r\n        };\r\n        /**\r\n         * event listener for the tag update event\r\n         */\r\n        _this.onTagUpdated = function (selectedTag, markGroupId) {\r\n            // Case 1: !this.props.markGroupId : Tag Updated within response.\r\n            // Case 2: this.props.markGroupId === markGroupId : Tag Updated from worklist.\r\n            if (!_this.props.markGroupId || _this.props.markGroupId === markGroupId) {\r\n                _this.selectedTag = selectedTag;\r\n                _this.setState({\r\n                    isExpanded: false\r\n                });\r\n            }\r\n        };\r\n        /**\r\n         * event listener for the tag list click event\r\n         * To hide any open tag list other than selected one.\r\n         */\r\n        _this.onTagListClicked = function (selectedMarkGroupId) {\r\n            // Hide all tag list other than one selected now.\r\n            if (_this.props.markGroupId !== selectedMarkGroupId && _this.state.isExpanded === true) {\r\n                _this.setState({\r\n                    isExpanded: false\r\n                });\r\n            }\r\n        };\r\n        // Setting the initial state\r\n        _this.state = {\r\n            isExpanded: undefined\r\n        };\r\n        _this.onTagSelection = _this.onTagSelection.bind(_this);\r\n        _this.onArrowClick = _this.onArrowClick.bind(_this);\r\n        _this.hideTagList = _this.hideTagList.bind(_this);\r\n        _this.selectedTag = _this.props.selectedTagId;\r\n        _this.onTagUpdated = _this.onTagUpdated.bind(_this);\r\n        return _this;\r\n    }\r\n    /**\r\n     * Render component.\r\n     */\r\n    TagList.prototype.render = function () {\r\n        var tagClass;\r\n        return (React.createElement(\"span\", { className: classNames('tag dropdown-wrap', { ' center right': this.isCenterAlignmentRequired === true && this.isRightAlignmentRequired === true }, { ' center left': this.isCenterAlignmentRequired === true && this.isLeftAlignmentRequired === true }, { ' bottom right': this.isRightAlignmentRequired === true && this.isBottomAlignmentRequired === true }, {\r\n                ' bottom left': this.isRightAlignmentRequired === false &&\r\n                    this.isBottomAlignmentRequired === true && this.isLeftAlignmentRequired === true\r\n            }, {\r\n                ' top left': this.isRightAlignmentRequired === false\r\n                    && this.isLeftAlignmentRequired === true && this.isTopAlignmentRequired === true\r\n            }, { ' top right': this.isRightAlignmentRequired === true && this.isTopAlignmentRequired === true }, { ' close': (this.state.isExpanded === false) }, { ' open': (this.state.isExpanded === true) }), id: 'response_tag' },\r\n            React.createElement(Tag, { isSelected: true, tagType: this.selectedTag, onSelection: this.onTagSelection, onArrowClick: this.onArrowClick, isInList: false, isFromWorklist: (this.props.markGroupId ? true : false), selectedLanguage: this.props.selectedLanguage, id: this.props.id + '_selected', key: this.props.id + '_selected' }),\r\n            React.createElement(\"div\", { className: 'menu-callout' }),\r\n            React.createElement(\"ul\", { className: 'menu tag-menu', role: 'menu', \"aria-hidden\": 'true', id: 'tag_list' }, this.renderTagListItems())));\r\n    };\r\n    /**\r\n     * triggers when the tag list component mount.\r\n     */\r\n    TagList.prototype.componentDidMount = function () {\r\n        /** Avoid memory leak warning */\r\n        worklistStore.instance.setMaxListeners(0);\r\n        window.addEventListener('touchend', this.hideTagList);\r\n        window.addEventListener('click', this.hideTagList);\r\n        worklistStore.instance.addListener(worklistStore.WorkListStore.TAG_UPDATED_EVENT, this.onTagUpdated);\r\n        // Event to collapse all tag list except the selected one from worklist \r\n        worklistStore.instance.addListener(worklistStore.WorkListStore.TAG_LIST_CLICKED, this.onTagListClicked);\r\n    };\r\n    /**\r\n     * triggers while the component receives the props.\r\n     */\r\n    TagList.prototype.componentWillReceiveProps = function (nextProps) {\r\n        if (this.selectedTag !== nextProps.selectedTagId) {\r\n            this.selectedTag = nextProps.selectedTagId;\r\n        }\r\n    };\r\n    /**\r\n     * triggers when the tag list components unmounts\r\n     */\r\n    TagList.prototype.componentWillUnmount = function () {\r\n        window.removeEventListener('touchend', this.hideTagList);\r\n        window.removeEventListener('click', this.hideTagList);\r\n        worklistStore.instance.removeListener(worklistStore.WorkListStore.TAG_UPDATED_EVENT, this.onTagUpdated);\r\n        worklistStore.instance.removeListener(worklistStore.WorkListStore.TAG_LIST_CLICKED, this.onTagListClicked);\r\n    };\r\n    /**\r\n     * On arrow click.\r\n     */\r\n    TagList.prototype.onArrowClick = function (selectedTag, event) {\r\n        // Tag List Position Logic is applicable only in worklist.\r\n        if (this.props.markGroupId) {\r\n            this.getTaglistPosition(event.clientX, event.clientY);\r\n            tagActionCreator.tagListClickAction(this.props.markGroupId);\r\n        }\r\n        this.setState({\r\n            isExpanded: !this.state.isExpanded\r\n        });\r\n    };\r\n    /**\r\n     * Check if tag list goes offscreen on right hand side of the window.\r\n     * If taglist widhth  is greater than the space available right to tag indicator then\r\n     * it means that when tag list is rendered it will go offscreen.\r\n     */\r\n    TagList.prototype.isHorizontalAlignmentRequired = function (mouseX, worklistWidth) {\r\n        // if space available right of tag indicator,\r\n        if (TAG_LIST_WIDTH < (window.innerWidth - mouseX)) {\r\n            this.isRightAlignmentRequired = true;\r\n        }\r\n        else {\r\n            if (TAG_LIST_WIDTH < (mouseX - (window.innerWidth - worklistWidth))) {\r\n                this.isLeftAlignmentRequired = true;\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Check if tag list goes offscreen on bottom side of the window.\r\n     * If mouse Y position + tag list height is greater than\r\n     * space available bottom from tag indicator then\r\n     * it means that when tag list is rendered it will go offscreen.\r\n     */\r\n    TagList.prototype.isVerticalAlignmentRequired = function (mouseY, worklistHeight) {\r\n        // If space available in the bottom of tag indicator,\r\n        if ((window.innerHeight - mouseY) > TAG_LIST_HEIGHT) {\r\n            this.isTopAlignmentRequired = true;\r\n        }\r\n        else {\r\n            if (mouseY - (window.innerHeight - worklistHeight) > TAG_LIST_HEIGHT) {\r\n                this.isBottomAlignmentRequired = true;\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Get tag list expanded position based on window space available.\r\n     * @param xPos: Tag Indicator Xcoord\r\n     * @param yPos: Tag Indicator Y coord\r\n     */\r\n    TagList.prototype.getTaglistPosition = function (xPos, yPos) {\r\n        this.isCenterAlignmentRequired = false;\r\n        this.isLeftAlignmentRequired = false;\r\n        this.isRightAlignmentRequired = false;\r\n        this.isTopAlignmentRequired = false;\r\n        this.isBottomAlignmentRequired = false;\r\n        // Tag indicator Coords.\r\n        this.xPos = xPos;\r\n        this.yPos = yPos;\r\n        // Get the height and width of scroll holder.\r\n        var worklistElement = document.getElementsByClassName('table-scroll-holder')[0].getBoundingClientRect();\r\n        var worklistHeight = worklistElement.height;\r\n        var worklistWidth = worklistElement.width;\r\n        // Determine whether tag list show in Bottom/Top.\r\n        this.isVerticalAlignmentRequired(this.yPos, worklistHeight);\r\n        // Determine whether tag list show in Right/Left.\r\n        this.isHorizontalAlignmentRequired(this.xPos, worklistWidth);\r\n        // If no space available in bottom or Top portion,\r\n        // we should display it in centre position.\r\n        if (this.isBottomAlignmentRequired === false && this.isTopAlignmentRequired === false) {\r\n            this.isCenterAlignmentRequired = true;\r\n        }\r\n    };\r\n    /**\r\n     * Get the markGroupIds for tagging the resposnse.\r\n     * @param currentMarkGroupId\r\n     * @param isESResponse\r\n     */\r\n    TagList.prototype.populateMarkGroupList = function (currentMarkGroupId, isESResponse) {\r\n        var markGroupIds = [];\r\n        // If the response is an es response then whole response tagging is not possible\r\n        // So only pushing the current markGroupID into the collection\r\n        // else we need to add the related markGroupIds for a whole response.\r\n        if (isESResponse) {\r\n            markGroupIds.push(currentMarkGroupId);\r\n        }\r\n        else {\r\n            markGroupIds = worklistStore.instance.getRelatedMarkGroupIdsForWholeResponse(currentMarkGroupId);\r\n            markGroupIds.unshift(currentMarkGroupId);\r\n        }\r\n        return markGroupIds;\r\n    };\r\n    return TagList;\r\n}(pureRenderComponent));\r\nmodule.exports = TagList;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzEzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvcmVzcG9uc2UvcmVzcG9uc2VzY3JlZW4vdGFnbGlzdC50c3g/ZTU2MSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiB0c2xpbnQ6ZGlzYWJsZTpuby11bnVzZWQtdmFyaWFibGUgKi9cclxuaW1wb3J0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcclxuaW1wb3J0IFJlYWN0RG9tID0gcmVxdWlyZSgncmVhY3QtZG9tJyk7XHJcbi8qIHRzbGludDplbmFibGU6bm8tdW51c2VkLXZhcmlhYmxlICovXHJcbmxldCBjbGFzc05hbWVzID0gcmVxdWlyZSgnY2xhc3NuYW1lcycpO1xyXG5pbXBvcnQgbG9jYWxlU3RvcmUgPSByZXF1aXJlKCcuLi8uLi8uLi9zdG9yZXMvbG9jYWxlL2xvY2FsZXN0b3JlJyk7XHJcbmltcG9ydCBlbnVtcyA9IHJlcXVpcmUoJy4uLy4uL3V0aWxpdHkvZW51bXMnKTtcclxuaW1wb3J0IHB1cmVSZW5kZXJDb21wb25lbnQgPSByZXF1aXJlKCcuLi8uLi9iYXNlL3B1cmVyZW5kZXJjb21wb25lbnQnKTtcclxuaW1wb3J0IFRhZyA9IHJlcXVpcmUoJy4vdGFnJyk7XHJcbmltcG9ydCBpbW11dGFibGUgPSByZXF1aXJlKCdpbW11dGFibGUnKTtcclxuaW1wb3J0IHRhZ0FjdGlvbkNyZWF0b3IgPSByZXF1aXJlKCcuLi8uLi8uLi9hY3Rpb25zL3RhZy90YWdhY3Rpb25jcmVhdG9yJyk7XHJcbmltcG9ydCByZXNwb25zZVN0b3JlID0gcmVxdWlyZSgnLi4vLi4vLi4vc3RvcmVzL3Jlc3BvbnNlL3Jlc3BvbnNlc3RvcmUnKTtcclxuaW1wb3J0IHdvcmtsaXN0U3RvcmUgPSByZXF1aXJlKCcuLi8uLi8uLi9zdG9yZXMvd29ya2xpc3Qvd29ya2xpc3RzdG9yZScpO1xyXG5pbXBvcnQgZG9tTWFuYWdlciA9IHJlcXVpcmUoJy4uLy4uLy4uL3V0aWxpdHkvZ2VuZXJpYy9kb21oZWxwZXInKTtcclxuaW1wb3J0IGxvZ2luU2Vzc2lvbiA9IHJlcXVpcmUoJy4uLy4uLy4uL2FwcC9sb2dpbnNlc3Npb24nKTtcclxuY29uc3QgVEFHX0xJU1RfV0lEVEggPSA5MDtcclxuY29uc3QgVEFHX0xJU1RfSEVJR0hUID0gMjE2O1xyXG5cclxuLyoqXHJcbiAqIFByb3BlcnRpZXMgb2YgVGFnbGlzdCBjb21wb25lbnQuXHJcbiAqL1xyXG5pbnRlcmZhY2UgUHJvcHMgZXh0ZW5kcyBQcm9wc0Jhc2UsIExvY2FsZVNlbGVjdGlvbkJhc2Uge1xyXG4gICAgc2VsZWN0ZWRUYWdJZDogbnVtYmVyO1xyXG4gICAgdGFnTGlzdDogaW1tdXRhYmxlLkxpc3Q8VGFnPjtcclxuICAgIHJlbmRlcmVkT246IG51bWJlcjtcclxuICAgIC8vIEluIG9yZGVyIHRvIHVwZGF0ZSB3b3JrbGlzdCBkYXRhIHdoaWxlIGVkaXRpbmcgdGFnIGRhdGFcclxuICAgIC8vIFRocm91Z2ggV29ya2xpc3QvV2l0aGluIFJlc3BvbnNlLiAgXHJcbiAgICBtYXJrR3JvdXBJZD86IG51bWJlcjtcclxuICAgIHRhZ09yZGVyPzogbnVtYmVyO1xyXG4gICAgaXNFU1Jlc3BvbnNlPzogYm9vbGVhbjtcclxuICAgIG1hcmtpbmdNb2RlPzogZW51bXMuTWFya2luZ01vZGU7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTdGF0ZSBvZiB0aGUgY29tcG9uZW50XHJcbiAqL1xyXG5pbnRlcmZhY2UgU3RhdGUge1xyXG4gICAgaXNFeHBhbmRlZDogYm9vbGVhbjtcclxufVxyXG5cclxuLyoqXHJcbiAqIFJlYWN0IGNvbXBvbmVudCBmb3IgcmVwb3J0c1xyXG4gKi9cclxuY2xhc3MgVGFnTGlzdCBleHRlbmRzIHB1cmVSZW5kZXJDb21wb25lbnQ8UHJvcHMsIFN0YXRlPiB7XHJcbiAgICBwcml2YXRlIHNlbGVjdGVkVGFnOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIGlzQm90dG9tQWxpZ25tZW50UmVxdWlyZWQ6IGJvb2xlYW47XHJcbiAgICBwcml2YXRlIGlzUmlnaHRBbGlnbm1lbnRSZXF1aXJlZDogYm9vbGVhbjtcclxuICAgIHByaXZhdGUgaXNUb3BBbGlnbm1lbnRSZXF1aXJlZDogYm9vbGVhbjtcclxuICAgIHByaXZhdGUgaXNMZWZ0QWxpZ25tZW50UmVxdWlyZWQ6IGJvb2xlYW47XHJcbiAgICBwcml2YXRlIGlzQ2VudGVyQWxpZ25tZW50UmVxdWlyZWQ6IGJvb2xlYW47XHJcbiAgICBwcml2YXRlIHhQb3M6IG51bWJlciA9IDA7XHJcbiAgICBwcml2YXRlIHlQb3M6IG51bWJlciA9IDA7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb25zdHJ1Y3RvciBmb3IgVGFnTGlzdCBjbGFzc1xyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9wczogUHJvcHMsIHN0YXRlOiBTdGF0ZSkge1xyXG4gICAgICAgIHN1cGVyKHByb3BzLCBzdGF0ZSk7XHJcblxyXG4gICAgICAgIC8vIFNldHRpbmcgdGhlIGluaXRpYWwgc3RhdGVcclxuICAgICAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICAgICAgICBpc0V4cGFuZGVkOiB1bmRlZmluZWRcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLm9uVGFnU2VsZWN0aW9uID0gdGhpcy5vblRhZ1NlbGVjdGlvbi5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMub25BcnJvd0NsaWNrID0gdGhpcy5vbkFycm93Q2xpY2suYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLmhpZGVUYWdMaXN0ID0gdGhpcy5oaWRlVGFnTGlzdC5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRUYWcgPSB0aGlzLnByb3BzLnNlbGVjdGVkVGFnSWQ7XHJcbiAgICAgICAgdGhpcy5vblRhZ1VwZGF0ZWQgPSB0aGlzLm9uVGFnVXBkYXRlZC5iaW5kKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVuZGVyIGNvbXBvbmVudC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHJlbmRlcigpOiBKU1guRWxlbWVudCB7XHJcbiAgICAgICAgbGV0IHRhZ0NsYXNzOiBzdHJpbmc7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPXtjbGFzc05hbWVzKCd0YWcgZHJvcGRvd24td3JhcCcsXHJcbiAgICAgICAgICAgICAgICB7ICcgY2VudGVyIHJpZ2h0JzogdGhpcy5pc0NlbnRlckFsaWdubWVudFJlcXVpcmVkID09PSB0cnVlICYmIHRoaXMuaXNSaWdodEFsaWdubWVudFJlcXVpcmVkID09PSB0cnVlIH0sXHJcbiAgICAgICAgICAgICAgICB7ICcgY2VudGVyIGxlZnQnOiB0aGlzLmlzQ2VudGVyQWxpZ25tZW50UmVxdWlyZWQgPT09IHRydWUgJiYgdGhpcy5pc0xlZnRBbGlnbm1lbnRSZXF1aXJlZCA9PT0gdHJ1ZSB9LFxyXG4gICAgICAgICAgICAgICAgeyAnIGJvdHRvbSByaWdodCc6IHRoaXMuaXNSaWdodEFsaWdubWVudFJlcXVpcmVkID09PSB0cnVlICYmIHRoaXMuaXNCb3R0b21BbGlnbm1lbnRSZXF1aXJlZCA9PT0gdHJ1ZSB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICcgYm90dG9tIGxlZnQnOiB0aGlzLmlzUmlnaHRBbGlnbm1lbnRSZXF1aXJlZCA9PT0gZmFsc2UgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0JvdHRvbUFsaWdubWVudFJlcXVpcmVkID09PSB0cnVlICYmIHRoaXMuaXNMZWZ0QWxpZ25tZW50UmVxdWlyZWQgPT09IHRydWVcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgJyB0b3AgbGVmdCc6IHRoaXMuaXNSaWdodEFsaWdubWVudFJlcXVpcmVkID09PSBmYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAmJiB0aGlzLmlzTGVmdEFsaWdubWVudFJlcXVpcmVkID09PSB0cnVlICYmIHRoaXMuaXNUb3BBbGlnbm1lbnRSZXF1aXJlZCA9PT0gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHsgJyB0b3AgcmlnaHQnOiB0aGlzLmlzUmlnaHRBbGlnbm1lbnRSZXF1aXJlZCA9PT0gdHJ1ZSAmJiB0aGlzLmlzVG9wQWxpZ25tZW50UmVxdWlyZWQgPT09IHRydWUgfSxcclxuICAgICAgICAgICAgICAgIHsgJyBjbG9zZSc6ICh0aGlzLnN0YXRlLmlzRXhwYW5kZWQgPT09IGZhbHNlKSB9LFxyXG4gICAgICAgICAgICAgICAgeyAnIG9wZW4nOiAodGhpcy5zdGF0ZS5pc0V4cGFuZGVkID09PSB0cnVlKSB9KX1cclxuICAgICAgICAgICAgICAgIGlkPXsncmVzcG9uc2VfdGFnJ30gPlxyXG4gICAgICAgICAgICAgICAgPFRhZyBpc1NlbGVjdGVkPXt0cnVlfVxyXG4gICAgICAgICAgICAgICAgICAgIHRhZ1R5cGU9e3RoaXMuc2VsZWN0ZWRUYWd9XHJcbiAgICAgICAgICAgICAgICAgICAgb25TZWxlY3Rpb249e3RoaXMub25UYWdTZWxlY3Rpb259XHJcbiAgICAgICAgICAgICAgICAgICAgb25BcnJvd0NsaWNrPXt0aGlzLm9uQXJyb3dDbGlja31cclxuICAgICAgICAgICAgICAgICAgICBpc0luTGlzdD17ZmFsc2V9XHJcbiAgICAgICAgICAgICAgICAgICAgaXNGcm9tV29ya2xpc3Q9eyh0aGlzLnByb3BzLm1hcmtHcm91cElkID8gdHJ1ZSA6IGZhbHNlKX1cclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZExhbmd1YWdlPXt0aGlzLnByb3BzLnNlbGVjdGVkTGFuZ3VhZ2V9XHJcbiAgICAgICAgICAgICAgICAgICAgaWQ9e3RoaXMucHJvcHMuaWQgKyAnX3NlbGVjdGVkJ31cclxuICAgICAgICAgICAgICAgICAgICBrZXk9e3RoaXMucHJvcHMuaWQgKyAnX3NlbGVjdGVkJ30gLz5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdtZW51LWNhbGxvdXQnPjwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPHVsIGNsYXNzTmFtZT0nbWVudSB0YWctbWVudScgcm9sZT0nbWVudScgYXJpYS1oaWRkZW49J3RydWUnIGlkPSd0YWdfbGlzdCc+XHJcbiAgICAgICAgICAgICAgICAgICAge3RoaXMucmVuZGVyVGFnTGlzdEl0ZW1zKCl9XHJcbiAgICAgICAgICAgICAgICA8L3VsPlxyXG4gICAgICAgICAgICA8L3NwYW4+KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlbmRlciB0aGUgbGlzdFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHJlbmRlclRhZ0xpc3RJdGVtcyA9ICgpOiBhbnkgPT4ge1xyXG4gICAgICAgIGxldCB0aGF0ID0gdGhpcztcclxuICAgICAgICBsZXQgdGFnTGlzdCA9IHRoYXQucHJvcHMudGFnTGlzdDtcclxuICAgICAgICBsZXQgZWxlbWVudCA9IHRhZ0xpc3QgJiYgdGFnTGlzdC5tYXAoZnVuY3Rpb24gKHRhZ0l0ZW06IFRhZykge1xyXG4gICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgPGxpIGNsYXNzTmFtZT0ndGFnLW1lbnUtaXRlbSdcclxuICAgICAgICAgICAgICAgICAgICBpZD17dGhhdC5wcm9wcy5pZCArICdfaXRlbV8nICsgdGFnSXRlbS50YWdJZH1cclxuICAgICAgICAgICAgICAgICAgICBrZXk9e3RoYXQucHJvcHMuaWQgKyAnX2l0ZW1fJyArIHRhZ0l0ZW0udGFnSWR9PlxyXG4gICAgICAgICAgICAgICAgICAgIDxUYWcgaXNTZWxlY3RlZD17KHRoYXQuc2VsZWN0ZWRUYWcgPT09IHRhZ0l0ZW0udGFnSWQpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdUeXBlPXt0YWdJdGVtLnRhZ0lkfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvblNlbGVjdGlvbj17dGhhdC5vblRhZ1NlbGVjdGlvbn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25BcnJvd0NsaWNrPXt0aGF0Lm9uQXJyb3dDbGlja31cclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNJbkxpc3Q9e3RydWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzRnJvbVdvcmtsaXN0PXsodGhhdC5wcm9wcy5tYXJrR3JvdXBJZCA/IHRydWUgOiBmYWxzZSl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkTGFuZ3VhZ2U9e3RoYXQucHJvcHMuc2VsZWN0ZWRMYW5ndWFnZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ9e3RoYXQucHJvcHMuaWQgKyAnXycgKyB0YWdJdGVtLnRhZ0lkfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk9e3RoYXQucHJvcHMuaWQgKyAnXycgKyB0YWdJdGVtLnRhZ0lkfSAvPlxyXG4gICAgICAgICAgICAgICAgPC9saT4pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBlbGVtZW50O1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIHRyaWdnZXJzIHdoZW4gdGhlIHRhZyBsaXN0IGNvbXBvbmVudCBtb3VudC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGNvbXBvbmVudERpZE1vdW50KCkge1xyXG4gICAgICAgIC8qKiBBdm9pZCBtZW1vcnkgbGVhayB3YXJuaW5nICovXHJcbiAgICAgICAgd29ya2xpc3RTdG9yZS5pbnN0YW5jZS5zZXRNYXhMaXN0ZW5lcnMoMCk7XHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5oaWRlVGFnTGlzdCk7XHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5oaWRlVGFnTGlzdCk7XHJcbiAgICAgICAgd29ya2xpc3RTdG9yZS5pbnN0YW5jZS5hZGRMaXN0ZW5lcih3b3JrbGlzdFN0b3JlLldvcmtMaXN0U3RvcmUuVEFHX1VQREFURURfRVZFTlQsIHRoaXMub25UYWdVcGRhdGVkKTtcclxuXHJcbiAgICAgICAgLy8gRXZlbnQgdG8gY29sbGFwc2UgYWxsIHRhZyBsaXN0IGV4Y2VwdCB0aGUgc2VsZWN0ZWQgb25lIGZyb20gd29ya2xpc3QgXHJcbiAgICAgICAgd29ya2xpc3RTdG9yZS5pbnN0YW5jZS5hZGRMaXN0ZW5lcih3b3JrbGlzdFN0b3JlLldvcmtMaXN0U3RvcmUuVEFHX0xJU1RfQ0xJQ0tFRCwgdGhpcy5vblRhZ0xpc3RDbGlja2VkKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIHRyaWdnZXJzIHdoaWxlIHRoZSBjb21wb25lbnQgcmVjZWl2ZXMgdGhlIHByb3BzLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHM6IFByb3BzKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRUYWcgIT09IG5leHRQcm9wcy5zZWxlY3RlZFRhZ0lkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRUYWcgPSBuZXh0UHJvcHMuc2VsZWN0ZWRUYWdJZDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiB0cmlnZ2VycyB3aGVuIHRoZSB0YWcgbGlzdCBjb21wb25lbnRzIHVubW91bnRzXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcclxuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB0aGlzLmhpZGVUYWdMaXN0KTtcclxuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmhpZGVUYWdMaXN0KTtcclxuICAgICAgICB3b3JrbGlzdFN0b3JlLmluc3RhbmNlLnJlbW92ZUxpc3RlbmVyKHdvcmtsaXN0U3RvcmUuV29ya0xpc3RTdG9yZS5UQUdfVVBEQVRFRF9FVkVOVCwgdGhpcy5vblRhZ1VwZGF0ZWQpO1xyXG4gICAgICAgIHdvcmtsaXN0U3RvcmUuaW5zdGFuY2UucmVtb3ZlTGlzdGVuZXIod29ya2xpc3RTdG9yZS5Xb3JrTGlzdFN0b3JlLlRBR19MSVNUX0NMSUNLRUQsIHRoaXMub25UYWdMaXN0Q2xpY2tlZCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiB0byBoaWRlIHRoZSB0YWcgZHJvcCBkb3duIGNsaWNraW5nIG91dHNpZGUgdGhlIGJveC5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBoaWRlVGFnTGlzdCA9IChldmVudDogYW55KTogdm9pZCA9PiB7XHJcbiAgICAgICAgaWYgKGV2ZW50LnRhcmdldCAhPT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgICAgIGRvbU1hbmFnZXIuc2VhcmNoUGFyZW50Tm9kZShldmVudC50YXJnZXQsIGZ1bmN0aW9uIChlbDogYW55KSB7IHJldHVybiBlbC5pZCA9PT0gJ3Jlc3BvbnNlX3RhZyc7IH0pID09IG51bGwpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUuaXNFeHBhbmRlZCA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgaXNFeHBhbmRlZDogZmFsc2VcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRvIGNoYW5nZSB0aGUgc3RhdGUgb2YgdGhlIGNvbXBvbmVudCBvbiBzZWxlY3RpbmcgdGhlIGNvbXBvbmVudC5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBvblRhZ1NlbGVjdGlvbiA9IChzZWxlY3RlZFRhZzogbnVtYmVyLCBldmVudDogYW55KTogdm9pZCA9PiB7XHJcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgLy8gQ2FzZSAxOiB0aGlzLnByb3BzLm1hcmtHcm91cElkIDogVGFnIFVwZGF0ZWQgZnJvbSB3b3JrbGlzdC5cclxuICAgICAgICAvLyBDYXNlIDI6IHJlc3BvbnNlU3RvcmUuaW5zdGFuY2Uuc2VsZWN0ZWRNYXJrR3JvdXBJZCA6IFRhZyBVcGRhdGVkICB3aXRoaW4gcmVzcG9uc2UuXHJcbiAgICAgICAgbGV0IGN1cnJlbnRNYXJrR3JvdXBJZCA9IHRoaXMucHJvcHMubWFya0dyb3VwSWQgPyB0aGlzLnByb3BzLm1hcmtHcm91cElkIDogcmVzcG9uc2VTdG9yZS5pbnN0YW5jZS5zZWxlY3RlZE1hcmtHcm91cElkO1xyXG4gICAgICAgIGxldCB1cGRhdGVSZXNwb25zZVRhZ0FyZ3VtZW50czogVXBkYXRlUmVzcG9uc2VUYWdBcmd1bWVudHMgPSB7XHJcbiAgICAgICAgICAgIG1hcmtHcm91cExpc3Q6IHRoaXMucG9wdWxhdGVNYXJrR3JvdXBMaXN0KGN1cnJlbnRNYXJrR3JvdXBJZCwgdGhpcy5wcm9wcy5pc0VTUmVzcG9uc2UpLFxyXG4gICAgICAgICAgICBleGFtaW5lcklkOiBsb2dpblNlc3Npb24uRVhBTUlORVJfSUQsXHJcbiAgICAgICAgICAgIGlzRGVsZXRlOiBzZWxlY3RlZFRhZyA9PT0gMCA/IHRydWUgOiBmYWxzZSxcclxuICAgICAgICAgICAgdGFnSWQ6IHNlbGVjdGVkVGFnLFxyXG4gICAgICAgICAgICBpc0VTUmVzcG9uc2U6IHRoaXMucHJvcHMuaXNFU1Jlc3BvbnNlXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gZ2V0IHRoZSB1cGRhdGVkIHRhZyBvcmRlciB0byB1cGRhdGUgdGhlIHdvcmtsaXN0IGRhdGEgd2l0aCB0aGUgbmV3bHkgc2VsZWN0ZWQgdGFnLlxyXG4gICAgICAgIGxldCB0YWdPcmRlcjogbnVtYmVyID0gdGhpcy5wcm9wcy50YWdMaXN0LmZpbHRlcih0ID0+IHQudGFnSWQgPT09IHNlbGVjdGVkVGFnKVswXS50YWdPcmRlcjtcclxuICAgICAgICB0YWdBY3Rpb25DcmVhdG9yLnVwZGF0ZVRhZ3ModXBkYXRlUmVzcG9uc2VUYWdBcmd1bWVudHMsIHRhZ09yZGVyLCBjdXJyZW50TWFya0dyb3VwSWQsIHRoaXMucHJvcHMubWFya2luZ01vZGUpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIGV2ZW50IGxpc3RlbmVyIGZvciB0aGUgdGFnIHVwZGF0ZSBldmVudFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIG9uVGFnVXBkYXRlZCA9IChzZWxlY3RlZFRhZzogbnVtYmVyLCBtYXJrR3JvdXBJZDogbnVtYmVyKTogdm9pZCA9PiB7XHJcbiAgICAgICAgLy8gQ2FzZSAxOiAhdGhpcy5wcm9wcy5tYXJrR3JvdXBJZCA6IFRhZyBVcGRhdGVkIHdpdGhpbiByZXNwb25zZS5cclxuICAgICAgICAvLyBDYXNlIDI6IHRoaXMucHJvcHMubWFya0dyb3VwSWQgPT09IG1hcmtHcm91cElkIDogVGFnIFVwZGF0ZWQgZnJvbSB3b3JrbGlzdC5cclxuICAgICAgICBpZiAoIXRoaXMucHJvcHMubWFya0dyb3VwSWQgfHwgdGhpcy5wcm9wcy5tYXJrR3JvdXBJZCA9PT0gbWFya0dyb3VwSWQpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFRhZyA9IHNlbGVjdGVkVGFnO1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgIGlzRXhwYW5kZWQ6IGZhbHNlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBldmVudCBsaXN0ZW5lciBmb3IgdGhlIHRhZyBsaXN0IGNsaWNrIGV2ZW50XHJcbiAgICAgKiBUbyBoaWRlIGFueSBvcGVuIHRhZyBsaXN0IG90aGVyIHRoYW4gc2VsZWN0ZWQgb25lLlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIG9uVGFnTGlzdENsaWNrZWQgPSAoc2VsZWN0ZWRNYXJrR3JvdXBJZDogbnVtYmVyKTogdm9pZCA9PiB7XHJcbiAgICAgICAgLy8gSGlkZSBhbGwgdGFnIGxpc3Qgb3RoZXIgdGhhbiBvbmUgc2VsZWN0ZWQgbm93LlxyXG4gICAgICAgIGlmICh0aGlzLnByb3BzLm1hcmtHcm91cElkICE9PSBzZWxlY3RlZE1hcmtHcm91cElkICYmIHRoaXMuc3RhdGUuaXNFeHBhbmRlZCA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgIGlzRXhwYW5kZWQ6IGZhbHNlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIE9uIGFycm93IGNsaWNrLlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIG9uQXJyb3dDbGljayhzZWxlY3RlZFRhZzogbnVtYmVyLCBldmVudDogYW55KSB7XHJcbiAgICAgICAgLy8gVGFnIExpc3QgUG9zaXRpb24gTG9naWMgaXMgYXBwbGljYWJsZSBvbmx5IGluIHdvcmtsaXN0LlxyXG4gICAgICAgIGlmICh0aGlzLnByb3BzLm1hcmtHcm91cElkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZ2V0VGFnbGlzdFBvc2l0aW9uKGV2ZW50LmNsaWVudFgsIGV2ZW50LmNsaWVudFkpO1xyXG4gICAgICAgICAgICB0YWdBY3Rpb25DcmVhdG9yLnRhZ0xpc3RDbGlja0FjdGlvbih0aGlzLnByb3BzLm1hcmtHcm91cElkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIGlzRXhwYW5kZWQ6ICF0aGlzLnN0YXRlLmlzRXhwYW5kZWRcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENoZWNrIGlmIHRhZyBsaXN0IGdvZXMgb2Zmc2NyZWVuIG9uIHJpZ2h0IGhhbmQgc2lkZSBvZiB0aGUgd2luZG93LlxyXG4gICAgICogSWYgdGFnbGlzdCB3aWRodGggIGlzIGdyZWF0ZXIgdGhhbiB0aGUgc3BhY2UgYXZhaWxhYmxlIHJpZ2h0IHRvIHRhZyBpbmRpY2F0b3IgdGhlblxyXG4gICAgICogaXQgbWVhbnMgdGhhdCB3aGVuIHRhZyBsaXN0IGlzIHJlbmRlcmVkIGl0IHdpbGwgZ28gb2Zmc2NyZWVuLlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGlzSG9yaXpvbnRhbEFsaWdubWVudFJlcXVpcmVkKG1vdXNlWDogbnVtYmVyLCB3b3JrbGlzdFdpZHRoOiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICAvLyBpZiBzcGFjZSBhdmFpbGFibGUgcmlnaHQgb2YgdGFnIGluZGljYXRvcixcclxuICAgICAgICBpZiAoVEFHX0xJU1RfV0lEVEggPCAod2luZG93LmlubmVyV2lkdGggLSBtb3VzZVgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaXNSaWdodEFsaWdubWVudFJlcXVpcmVkID0gdHJ1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoVEFHX0xJU1RfV0lEVEggPCAobW91c2VYIC0gKHdpbmRvdy5pbm5lcldpZHRoIC0gd29ya2xpc3RXaWR0aCkpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmlzTGVmdEFsaWdubWVudFJlcXVpcmVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENoZWNrIGlmIHRhZyBsaXN0IGdvZXMgb2Zmc2NyZWVuIG9uIGJvdHRvbSBzaWRlIG9mIHRoZSB3aW5kb3cuXHJcbiAgICAgKiBJZiBtb3VzZSBZIHBvc2l0aW9uICsgdGFnIGxpc3QgaGVpZ2h0IGlzIGdyZWF0ZXIgdGhhblxyXG4gICAgICogc3BhY2UgYXZhaWxhYmxlIGJvdHRvbSBmcm9tIHRhZyBpbmRpY2F0b3IgdGhlblxyXG4gICAgICogaXQgbWVhbnMgdGhhdCB3aGVuIHRhZyBsaXN0IGlzIHJlbmRlcmVkIGl0IHdpbGwgZ28gb2Zmc2NyZWVuLlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGlzVmVydGljYWxBbGlnbm1lbnRSZXF1aXJlZChtb3VzZVk6IG51bWJlciwgd29ya2xpc3RIZWlnaHQ6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIC8vIElmIHNwYWNlIGF2YWlsYWJsZSBpbiB0aGUgYm90dG9tIG9mIHRhZyBpbmRpY2F0b3IsXHJcbiAgICAgICAgaWYgKCh3aW5kb3cuaW5uZXJIZWlnaHQgLSBtb3VzZVkpID4gVEFHX0xJU1RfSEVJR0hUKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaXNUb3BBbGlnbm1lbnRSZXF1aXJlZCA9IHRydWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKG1vdXNlWSAtICh3aW5kb3cuaW5uZXJIZWlnaHQgLSB3b3JrbGlzdEhlaWdodCkgPiBUQUdfTElTVF9IRUlHSFQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaXNCb3R0b21BbGlnbm1lbnRSZXF1aXJlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgdGFnIGxpc3QgZXhwYW5kZWQgcG9zaXRpb24gYmFzZWQgb24gd2luZG93IHNwYWNlIGF2YWlsYWJsZS5cclxuICAgICAqIEBwYXJhbSB4UG9zOiBUYWcgSW5kaWNhdG9yIFhjb29yZFxyXG4gICAgICogQHBhcmFtIHlQb3M6IFRhZyBJbmRpY2F0b3IgWSBjb29yZFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGdldFRhZ2xpc3RQb3NpdGlvbih4UG9zOiBudW1iZXIsIHlQb3M6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMuaXNDZW50ZXJBbGlnbm1lbnRSZXF1aXJlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuaXNMZWZ0QWxpZ25tZW50UmVxdWlyZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmlzUmlnaHRBbGlnbm1lbnRSZXF1aXJlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuaXNUb3BBbGlnbm1lbnRSZXF1aXJlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuaXNCb3R0b21BbGlnbm1lbnRSZXF1aXJlZCA9IGZhbHNlO1xyXG5cclxuICAgICAgICAvLyBUYWcgaW5kaWNhdG9yIENvb3Jkcy5cclxuICAgICAgICB0aGlzLnhQb3MgPSB4UG9zO1xyXG4gICAgICAgIHRoaXMueVBvcyA9IHlQb3M7XHJcblxyXG4gICAgICAgIC8vIEdldCB0aGUgaGVpZ2h0IGFuZCB3aWR0aCBvZiBzY3JvbGwgaG9sZGVyLlxyXG4gICAgICAgIGxldCB3b3JrbGlzdEVsZW1lbnQ6IENsaWVudFJlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCd0YWJsZS1zY3JvbGwtaG9sZGVyJylbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgbGV0IHdvcmtsaXN0SGVpZ2h0OiBudW1iZXIgPSB3b3JrbGlzdEVsZW1lbnQuaGVpZ2h0O1xyXG4gICAgICAgIGxldCB3b3JrbGlzdFdpZHRoOiBudW1iZXIgPSB3b3JrbGlzdEVsZW1lbnQud2lkdGg7XHJcblxyXG4gICAgICAgIC8vIERldGVybWluZSB3aGV0aGVyIHRhZyBsaXN0IHNob3cgaW4gQm90dG9tL1RvcC5cclxuICAgICAgICB0aGlzLmlzVmVydGljYWxBbGlnbm1lbnRSZXF1aXJlZCh0aGlzLnlQb3MsIHdvcmtsaXN0SGVpZ2h0KTtcclxuXHJcbiAgICAgICAgLy8gRGV0ZXJtaW5lIHdoZXRoZXIgdGFnIGxpc3Qgc2hvdyBpbiBSaWdodC9MZWZ0LlxyXG4gICAgICAgIHRoaXMuaXNIb3Jpem9udGFsQWxpZ25tZW50UmVxdWlyZWQodGhpcy54UG9zLCB3b3JrbGlzdFdpZHRoKTtcclxuXHJcbiAgICAgICAgLy8gSWYgbm8gc3BhY2UgYXZhaWxhYmxlIGluIGJvdHRvbSBvciBUb3AgcG9ydGlvbixcclxuICAgICAgICAvLyB3ZSBzaG91bGQgZGlzcGxheSBpdCBpbiBjZW50cmUgcG9zaXRpb24uXHJcbiAgICAgICAgaWYgKHRoaXMuaXNCb3R0b21BbGlnbm1lbnRSZXF1aXJlZCA9PT0gZmFsc2UgJiYgdGhpcy5pc1RvcEFsaWdubWVudFJlcXVpcmVkID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICB0aGlzLmlzQ2VudGVyQWxpZ25tZW50UmVxdWlyZWQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblx0LyoqXHJcblx0ICogR2V0IHRoZSBtYXJrR3JvdXBJZHMgZm9yIHRhZ2dpbmcgdGhlIHJlc3Bvc25zZS5cclxuXHQgKiBAcGFyYW0gY3VycmVudE1hcmtHcm91cElkXHJcblx0ICogQHBhcmFtIGlzRVNSZXNwb25zZVxyXG5cdCAqL1xyXG4gICAgcHJpdmF0ZSBwb3B1bGF0ZU1hcmtHcm91cExpc3QoY3VycmVudE1hcmtHcm91cElkOiBudW1iZXIsIGlzRVNSZXNwb25zZTogYm9vbGVhbik6IG51bWJlcltdIHtcclxuICAgICAgICBsZXQgbWFya0dyb3VwSWRzOiBudW1iZXJbXSA9IFtdO1xyXG5cclxuICAgICAgICAvLyBJZiB0aGUgcmVzcG9uc2UgaXMgYW4gZXMgcmVzcG9uc2UgdGhlbiB3aG9sZSByZXNwb25zZSB0YWdnaW5nIGlzIG5vdCBwb3NzaWJsZVxyXG4gICAgICAgIC8vIFNvIG9ubHkgcHVzaGluZyB0aGUgY3VycmVudCBtYXJrR3JvdXBJRCBpbnRvIHRoZSBjb2xsZWN0aW9uXHJcbiAgICAgICAgLy8gZWxzZSB3ZSBuZWVkIHRvIGFkZCB0aGUgcmVsYXRlZCBtYXJrR3JvdXBJZHMgZm9yIGEgd2hvbGUgcmVzcG9uc2UuXHJcbiAgICAgICAgaWYgKGlzRVNSZXNwb25zZSkge1xyXG4gICAgICAgICAgICBtYXJrR3JvdXBJZHMucHVzaChjdXJyZW50TWFya0dyb3VwSWQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIG1hcmtHcm91cElkcyA9IHdvcmtsaXN0U3RvcmUuaW5zdGFuY2UuZ2V0UmVsYXRlZE1hcmtHcm91cElkc0Zvcldob2xlUmVzcG9uc2UoY3VycmVudE1hcmtHcm91cElkKTtcclxuICAgICAgICAgICAgbWFya0dyb3VwSWRzLnVuc2hpZnQoY3VycmVudE1hcmtHcm91cElkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG1hcmtHcm91cElkcztcclxuICAgIH1cclxufVxyXG5leHBvcnQgPSBUYWdMaXN0O1xyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L3NvdXJjZS1tYXAtbG9hZGVyIS4vc3JjL2NvbXBvbmVudHMvcmVzcG9uc2UvcmVzcG9uc2VzY3JlZW4vdGFnbGlzdC50c3giXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF3QkE7O0FBRUE7QUFDQTtBQUFBO0FBVUE7O0FBRUE7QUFDQTtBQUFBO0FBTkE7QUFDQTtBQTBEQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQVVBO0FBQ0E7QUFDQTtBQW1DQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBeEtBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBS0E7QUFTQTtBQUNBO0FBSUE7QUEyQkE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWdFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7O0FBSUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),

/***/ 334:
/* no static exports found */
/* all exports used */
/*!******************************************************************!*\
  !*** ./src/components/utility/marking/markbyannotationhelper.ts ***!
  \******************************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar stampStore = __webpack_require__(/*! ../../../stores/stamp/stampstore */ 260);\r\nvar enums = __webpack_require__(/*! ../enums */ 225);\r\nvar constants = __webpack_require__(/*! ../constants */ 241);\r\nvar MarkByAnnotationHelper = /** @class */ (function () {\r\n    function MarkByAnnotationHelper() {\r\n        var _this = this;\r\n        this.totalMark = 0;\r\n        /**\r\n         * returns the mark valid\r\n         * @param mark\r\n         * @param currentItem\r\n         */\r\n        this.isMarkValid = function (currentQuestionItem, annotation) {\r\n            _this.currentQuestionItem = currentQuestionItem;\r\n            var newMark = _this.getPreviouslyAllocatedMarks(currentQuestionItem.allocatedMarks.displayMark) + annotation.numericValue;\r\n            if (newMark > currentQuestionItem.maximumNumericMark) {\r\n                return false;\r\n            }\r\n            else {\r\n                return true;\r\n            }\r\n        };\r\n        /**\r\n         * returns stamp has numeric value.\r\n         */\r\n        this.hasNumericValue = function (annotation) {\r\n            var stampData = stampStore.instance.getStamp(annotation.stamp, annotation.markSchemeGroupId);\r\n            return stampData.numericValue !== null && stampData.numericValue !== undefined;\r\n        };\r\n        /**\r\n         * returns any value annotations left in question item.\r\n         */\r\n        this.doCheckValueAnnotationLeft = function (allAnnotations, removedAnnotation) {\r\n            var hasNumericStamp = false;\r\n            var index = 0;\r\n            var currentQuestionItemStampIds = [];\r\n            allAnnotations.map(function (annotation) {\r\n                if (annotation.markSchemeId === removedAnnotation.markSchemeId\r\n                    && annotation.clientToken !== removedAnnotation.clientToken\r\n                    && annotation.markingOperation !== enums.MarkingOperation.deleted) {\r\n                    currentQuestionItemStampIds.push(annotation.stamp);\r\n                }\r\n            });\r\n            if (currentQuestionItemStampIds.length) {\r\n                while (index < currentQuestionItemStampIds.length) {\r\n                    var stampData_1 = stampStore.instance.getStamp(currentQuestionItemStampIds[index], removedAnnotation.markSchemeGroupId);\r\n                    if (stampData_1.numericValue !== null) {\r\n                        hasNumericStamp = true;\r\n                        break;\r\n                    }\r\n                    index++;\r\n                }\r\n            }\r\n            return hasNumericStamp;\r\n        };\r\n    }\r\n    /**\r\n     * gets total mark aganist question item.\r\n     * @param annotation\r\n     */\r\n    MarkByAnnotationHelper.prototype.getAggregateMarks = function (annotation) {\r\n        this.totalMark = this.totalMark + annotation.numericValue;\r\n        return this.totalMark;\r\n    };\r\n    /**\r\n     * Resets the total marks.\r\n     */\r\n    MarkByAnnotationHelper.prototype.resetTotalMarks = function () {\r\n        this.totalMark = 0;\r\n    };\r\n    /**\r\n     * returns the previously allocated marks\r\n     * @param avaliableMarks\r\n     */\r\n    MarkByAnnotationHelper.prototype.getPreviouslyAllocatedMarks = function (displayMark) {\r\n        if (displayMark === constants.NOT_MARKED || displayMark === constants.NOT_ATTEMPTED) {\r\n            return this.totalMark = 0;\r\n        }\r\n        else {\r\n            return this.totalMark = parseFloat(displayMark);\r\n        }\r\n    };\r\n    /**\r\n     * remove annotation marks\r\n     * @param allAnnotations\r\n     * @param removedAnnotation\r\n     * @param currentQuestionItem\r\n     */\r\n    MarkByAnnotationHelper.prototype.removeAnnotationMarks = function (allAnnotations, removedAnnotation, currentQuestionItem) {\r\n        var previousAllocatedMark = parseFloat(currentQuestionItem.allocatedMarks.displayMark);\r\n        var stampData = stampStore.instance.getStamp(removedAnnotation.stamp, removedAnnotation.markSchemeGroupId);\r\n        var isNumericValueStamp = this.hasNumericValue(removedAnnotation);\r\n        var newMark;\r\n        // calculating new mark to display.\r\n        if (isNumericValueStamp) {\r\n            newMark = (previousAllocatedMark - stampData.numericValue).toString();\r\n        }\r\n        else {\r\n            newMark = currentQuestionItem.allocatedMarks.displayMark;\r\n        }\r\n        return newMark;\r\n    };\r\n    return MarkByAnnotationHelper;\r\n}());\r\nmodule.exports = MarkByAnnotationHelper;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzM0LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvdXRpbGl0eS9tYXJraW5nL21hcmtieWFubm90YXRpb25oZWxwZXIudHM/M2Q3YiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY29uZmlndXJhYmxlQ2hhcmFjdGVyaXN0aWNzSGVscGVyID0gcmVxdWlyZSgnLi4vLi4vLi4vdXRpbGl0eS9jb25maWd1cmFibGVjaGFyYWN0ZXJpc3RpYy9jb25maWd1cmFibGVjaGFyYWN0ZXJpc3RpY3NoZWxwZXInKTtcclxuaW1wb3J0IHFpZ1N0b3JlID0gcmVxdWlyZSgnLi4vLi4vLi4vc3RvcmVzL3FpZ3NlbGVjdG9yL3FpZ3N0b3JlJyk7XHJcbmltcG9ydCBhbm5vdGF0aW9uID0gcmVxdWlyZSgnLi4vLi4vLi4vc3RvcmVzL3Jlc3BvbnNlL3R5cGluZ3MvYW5ub3RhdGlvbicpO1xyXG5pbXBvcnQgbWFya2J5b3B0aW9uYWN0aW9uY3JlYXRvciA9IHJlcXVpcmUoJy4uLy4uLy4uL2FjdGlvbnMvbWFya2J5b3B0aW9uL21hcmtieW9wdGlvbmFjdGlvbmNyZWF0b3InKTtcclxuaW1wb3J0IHRyZWVWaWV3SXRlbSA9IHJlcXVpcmUoJy4uLy4uLy4uL3N0b3Jlcy9tYXJrc2NoZW1lc3RydWN0dXJlL3R5cGluZ3MvdHJlZXZpZXdpdGVtJyk7XHJcbmltcG9ydCBtYXJraW5nQWN0aW9uQ3JlYXRvciA9IHJlcXVpcmUoJy4uLy4uLy4uL2FjdGlvbnMvbWFya2luZy9tYXJraW5nYWN0aW9uY3JlYXRvcicpO1xyXG5pbXBvcnQgc3RhbXBTdG9yZSA9IHJlcXVpcmUoJy4uLy4uLy4uL3N0b3Jlcy9zdGFtcC9zdGFtcHN0b3JlJyk7XHJcbmltcG9ydCBzdGFtcERhdGEgPSByZXF1aXJlKCcuLi8uLi8uLi9zdG9yZXMvc3RhbXAvdHlwaW5ncy9zdGFtcGRhdGEnKTtcclxuaW1wb3J0IGVudW1zID0gcmVxdWlyZSgnLi4vZW51bXMnKTtcclxuaW1wb3J0IGNvbnN0YW50cyA9IHJlcXVpcmUoJy4uL2NvbnN0YW50cycpO1xyXG5cclxuY2xhc3MgTWFya0J5QW5ub3RhdGlvbkhlbHBlciB7XHJcblxyXG4gICAgcHJpdmF0ZSBjdXJyZW50UXVlc3Rpb25JdGVtOiB0cmVlVmlld0l0ZW07XHJcblxyXG4gICAgcHJpdmF0ZSBhbm5vdGF0aW9uOiBhbm5vdGF0aW9uO1xyXG5cclxuICAgIHByaXZhdGUgbWFyazogQWxsb2NhdGVkTWFyaztcclxuXHJcbiAgICBwcml2YXRlIHRvdGFsTWFyazogbnVtYmVyID0gMDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIGdldHMgdG90YWwgbWFyayBhZ2FuaXN0IHF1ZXN0aW9uIGl0ZW0uXHJcbiAgICAgKiBAcGFyYW0gYW5ub3RhdGlvblxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0QWdncmVnYXRlTWFya3MoYW5ub3RhdGlvbjogYW5ub3RhdGlvbik6IG51bWJlciB7XHJcbiAgICAgICAgdGhpcy50b3RhbE1hcmsgPSB0aGlzLnRvdGFsTWFyayArIGFubm90YXRpb24ubnVtZXJpY1ZhbHVlO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRvdGFsTWFyaztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlc2V0cyB0aGUgdG90YWwgbWFya3MuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyByZXNldFRvdGFsTWFya3MoKSB7XHJcbiAgICAgICAgdGhpcy50b3RhbE1hcmsgPSAwO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogcmV0dXJucyB0aGUgbWFyayB2YWxpZFxyXG4gICAgICogQHBhcmFtIG1hcmtcclxuICAgICAqIEBwYXJhbSBjdXJyZW50SXRlbVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgaXNNYXJrVmFsaWQgPSAoY3VycmVudFF1ZXN0aW9uSXRlbTogdHJlZVZpZXdJdGVtLCBhbm5vdGF0aW9uOiBhbm5vdGF0aW9uKTogYm9vbGVhbiA9PiB7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50UXVlc3Rpb25JdGVtID0gY3VycmVudFF1ZXN0aW9uSXRlbTtcclxuICAgICAgICBsZXQgbmV3TWFyayA9IHRoaXMuZ2V0UHJldmlvdXNseUFsbG9jYXRlZE1hcmtzKGN1cnJlbnRRdWVzdGlvbkl0ZW0uYWxsb2NhdGVkTWFya3MuZGlzcGxheU1hcmspICsgYW5ub3RhdGlvbi5udW1lcmljVmFsdWU7XHJcbiAgICAgICAgaWYgKG5ld01hcmsgPiBjdXJyZW50UXVlc3Rpb25JdGVtLm1heGltdW1OdW1lcmljTWFyaykge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIHJldHVybnMgdGhlIHByZXZpb3VzbHkgYWxsb2NhdGVkIG1hcmtzXHJcbiAgICAgKiBAcGFyYW0gYXZhbGlhYmxlTWFya3NcclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIGdldFByZXZpb3VzbHlBbGxvY2F0ZWRNYXJrcyhkaXNwbGF5TWFyazogc3RyaW5nKTogbnVtYmVyIHtcclxuICAgICAgICBpZiAoZGlzcGxheU1hcmsgPT09IGNvbnN0YW50cy5OT1RfTUFSS0VEIHx8IGRpc3BsYXlNYXJrID09PSBjb25zdGFudHMuTk9UX0FUVEVNUFRFRCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b3RhbE1hcmsgPSAwO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRvdGFsTWFyayA9IHBhcnNlRmxvYXQoZGlzcGxheU1hcmspO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIHJlbW92ZSBhbm5vdGF0aW9uIG1hcmtzXHJcbiAgICAgKiBAcGFyYW0gYWxsQW5ub3RhdGlvbnNcclxuICAgICAqIEBwYXJhbSByZW1vdmVkQW5ub3RhdGlvblxyXG4gICAgICogQHBhcmFtIGN1cnJlbnRRdWVzdGlvbkl0ZW1cclxuICAgICAqL1xyXG4gICAgcHVibGljIHJlbW92ZUFubm90YXRpb25NYXJrcyhhbGxBbm5vdGF0aW9uczogYW55LFxyXG4gICAgICAgIHJlbW92ZWRBbm5vdGF0aW9uOiBhbm5vdGF0aW9uLFxyXG4gICAgICAgIGN1cnJlbnRRdWVzdGlvbkl0ZW06IHRyZWVWaWV3SXRlbSk6IHN0cmluZyB7XHJcbiAgICAgICAgbGV0IHByZXZpb3VzQWxsb2NhdGVkTWFyayA9IHBhcnNlRmxvYXQoY3VycmVudFF1ZXN0aW9uSXRlbS5hbGxvY2F0ZWRNYXJrcy5kaXNwbGF5TWFyayk7XHJcbiAgICAgICAgbGV0IHN0YW1wRGF0YTogc3RhbXBEYXRhID0gc3RhbXBTdG9yZS5pbnN0YW5jZS5nZXRTdGFtcChyZW1vdmVkQW5ub3RhdGlvbi5zdGFtcCwgcmVtb3ZlZEFubm90YXRpb24ubWFya1NjaGVtZUdyb3VwSWQpO1xyXG4gICAgICAgIGxldCBpc051bWVyaWNWYWx1ZVN0YW1wOiBib29sZWFuID0gdGhpcy5oYXNOdW1lcmljVmFsdWUocmVtb3ZlZEFubm90YXRpb24pO1xyXG4gICAgICAgIGxldCBuZXdNYXJrOiBzdHJpbmc7XHJcbiAgICAgICAgLy8gY2FsY3VsYXRpbmcgbmV3IG1hcmsgdG8gZGlzcGxheS5cclxuICAgICAgICBpZiAoaXNOdW1lcmljVmFsdWVTdGFtcCkge1xyXG4gICAgICAgICAgICBuZXdNYXJrID0gKHByZXZpb3VzQWxsb2NhdGVkTWFyayAtIHN0YW1wRGF0YS5udW1lcmljVmFsdWUpLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbmV3TWFyayA9IGN1cnJlbnRRdWVzdGlvbkl0ZW0uYWxsb2NhdGVkTWFya3MuZGlzcGxheU1hcms7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gbmV3TWFyaztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIHJldHVybnMgc3RhbXAgaGFzIG51bWVyaWMgdmFsdWUuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBoYXNOdW1lcmljVmFsdWUgPSAoYW5ub3RhdGlvbjogYW5ub3RhdGlvbik6IGJvb2xlYW4gPT4ge1xyXG4gICAgICAgIGxldCBzdGFtcERhdGE6IHN0YW1wRGF0YSA9IHN0YW1wU3RvcmUuaW5zdGFuY2UuZ2V0U3RhbXAoYW5ub3RhdGlvbi5zdGFtcCwgYW5ub3RhdGlvbi5tYXJrU2NoZW1lR3JvdXBJZCk7XHJcbiAgICAgICAgcmV0dXJuIHN0YW1wRGF0YS5udW1lcmljVmFsdWUgIT09IG51bGwgJiYgc3RhbXBEYXRhLm51bWVyaWNWYWx1ZSAhPT0gdW5kZWZpbmVkO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIHJldHVybnMgYW55IHZhbHVlIGFubm90YXRpb25zIGxlZnQgaW4gcXVlc3Rpb24gaXRlbS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGRvQ2hlY2tWYWx1ZUFubm90YXRpb25MZWZ0ID0gKGFsbEFubm90YXRpb25zOiBhbnksXHJcbiAgICAgICAgcmVtb3ZlZEFubm90YXRpb246IGFubm90YXRpb24pOiBib29sZWFuID0+IHtcclxuICAgICAgICBsZXQgaGFzTnVtZXJpY1N0YW1wOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICAgICAgbGV0IGluZGV4OiBudW1iZXIgPSAwO1xyXG4gICAgICAgIGxldCBjdXJyZW50UXVlc3Rpb25JdGVtU3RhbXBJZHM6IEFycmF5PG51bWJlcj4gPSBbXTtcclxuICAgICAgICBhbGxBbm5vdGF0aW9ucy5tYXAoKGFubm90YXRpb246IGFubm90YXRpb24pID0+IHtcclxuICAgICAgICAgICAgaWYgKGFubm90YXRpb24ubWFya1NjaGVtZUlkID09PSByZW1vdmVkQW5ub3RhdGlvbi5tYXJrU2NoZW1lSWRcclxuICAgICAgICAgICAgICAgICYmIGFubm90YXRpb24uY2xpZW50VG9rZW4gIT09IHJlbW92ZWRBbm5vdGF0aW9uLmNsaWVudFRva2VuXHJcbiAgICAgICAgICAgICAgICAmJiBhbm5vdGF0aW9uLm1hcmtpbmdPcGVyYXRpb24gIT09IGVudW1zLk1hcmtpbmdPcGVyYXRpb24uZGVsZXRlZCkge1xyXG4gICAgICAgICAgICAgICAgY3VycmVudFF1ZXN0aW9uSXRlbVN0YW1wSWRzLnB1c2goYW5ub3RhdGlvbi5zdGFtcCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKGN1cnJlbnRRdWVzdGlvbkl0ZW1TdGFtcElkcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgd2hpbGUgKGluZGV4IDwgY3VycmVudFF1ZXN0aW9uSXRlbVN0YW1wSWRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHN0YW1wRGF0YTogc3RhbXBEYXRhID0gc3RhbXBTdG9yZS5pbnN0YW5jZS5nZXRTdGFtcChcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50UXVlc3Rpb25JdGVtU3RhbXBJZHNbaW5kZXhdLCByZW1vdmVkQW5ub3RhdGlvbi5tYXJrU2NoZW1lR3JvdXBJZCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3RhbXBEYXRhLm51bWVyaWNWYWx1ZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGhhc051bWVyaWNTdGFtcCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpbmRleCsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBoYXNOdW1lcmljU3RhbXA7XHJcbiAgICB9O1xyXG59XHJcblxyXG5leHBvcnQgPSBNYXJrQnlBbm5vdGF0aW9uSGVscGVyO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vc291cmNlLW1hcC1sb2FkZXIhLi9zcmMvY29tcG9uZW50cy91dGlsaXR5L21hcmtpbmcvbWFya2J5YW5ub3RhdGlvbmhlbHBlci50cyJdLCJtYXBwaW5ncyI6IjtBQU1BO0FBRUE7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQVFBO0FBa0JBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQXFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF2R0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQWlCQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7O0FBS0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBdUNBO0FBQUE7QUFFQTsiLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),

/***/ 335:
/* no static exports found */
/* all exports used */
/*!***********************************************!*\
  !*** ./src/utility/keyboardacess/keycodes.ts ***!
  \***********************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar KeyCodes;\r\n(function (KeyCodes) {\r\n    KeyCodes.ENTER_KEY = 13;\r\n    KeyCodes.LEFT_KEY = 37;\r\n    KeyCodes.RIGHT_KEY = 39;\r\n    KeyCodes.PAGE_UP_KEY = 33;\r\n    KeyCodes.PAGE_DOWN_KEY = 34;\r\n})(KeyCodes || (KeyCodes = {}));\r\nmodule.exports = KeyCodes;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzM1LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWxpdHkva2V5Ym9hcmRhY2Vzcy9rZXljb2Rlcy50cz9kMzQ0Il0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZSBLZXlDb2RlcyB7XHJcbiAgICBleHBvcnQgY29uc3QgRU5URVJfS0VZOiBudW1iZXIgPSAxMztcclxuICAgIGV4cG9ydCBjb25zdCBMRUZUX0tFWTogbnVtYmVyID0gMzc7XHJcbiAgICBleHBvcnQgY29uc3QgUklHSFRfS0VZOiBudW1iZXIgPSAzOTtcclxuICAgIGV4cG9ydCBjb25zdCBQQUdFX1VQX0tFWTogbnVtYmVyID0gMzM7XHJcbiAgICBleHBvcnQgY29uc3QgUEFHRV9ET1dOX0tFWTogbnVtYmVyID0gMzQ7XHJcbn1cclxuXHJcbmV4cG9ydCA9IEtleUNvZGVzO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vc291cmNlLW1hcC1sb2FkZXIhLi9zcmMvdXRpbGl0eS9rZXlib2FyZGFjZXNzL2tleWNvZGVzLnRzIl0sIm1hcHBpbmdzIjoiO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOyIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),

/***/ 337:
/* no static exports found */
/* all exports used */
/*!***********************************!*\
  !*** ./src/components/header.tsx ***!
  \***********************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("/* WEBPACK VAR INJECTION */(function($) {\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n/*\r\n  React component for Authorized page header\r\n*/\r\n/* tslint:disable:no-unused-variable */\r\nvar React = __webpack_require__(/*! react */ 0);\r\n/* tslint:enable:no-unused-variable */\r\nvar pureRenderComponent = __webpack_require__(/*! ./base/purerendercomponent */ 227);\r\nvar localeStore = __webpack_require__(/*! ../stores/locale/localestore */ 226);\r\nvar loginSession = __webpack_require__(/*! ../app/loginsession */ 252);\r\nvar MessageNotificationIndicator = __webpack_require__(/*! ./utility/notification/messagenotificationindicator */ 366);\r\nvar AwardingIndicator = __webpack_require__(/*! ../components/awarding/awardingindicator */ 347);\r\nvar awardingStore = __webpack_require__(/*! ../stores/awarding/awardingstore */ 270);\r\nvar UserDetails = __webpack_require__(/*! ./user/userdetails/userdetails */ 357);\r\nvar userOptionActionCreator = __webpack_require__(/*! ../actions/useroption/useroptionactioncreator */ 431);\r\nvar useroptionStore = __webpack_require__(/*! ../stores/useroption/useroptionstore */ 302);\r\nvar messageStore = __webpack_require__(/*! ../stores/message/messagestore */ 240);\r\nvar responseStore = __webpack_require__(/*! ../stores/response/responsestore */ 235);\r\nvar worklistStore = __webpack_require__(/*! ../stores/worklist/workliststore */ 231);\r\nvar responseActionCreator = __webpack_require__(/*! ../actions/response/responseactioncreator */ 257);\r\nvar ResponseNavigation = __webpack_require__(/*! ./response/responsenavigation */ 355);\r\nvar enums = __webpack_require__(/*! ./utility/enums */ 225);\r\nvar htmlUtilities = __webpack_require__(/*! ../utility/generic/htmlutilities */ 243);\r\nvar toolbarStore = __webpack_require__(/*! ../stores/toolbar/toolbarstore */ 301);\r\nvar markingStore = __webpack_require__(/*! ../stores/marking/markingstore */ 236);\r\nvar stampStore = __webpack_require__(/*! ../stores/stamp/stampstore */ 260);\r\nvar stampActionCreator = __webpack_require__(/*! ../actions/stamp/stampactioncreator */ 284);\r\nvar applicationStore = __webpack_require__(/*! ../stores/applicationoffline/applicationstore */ 247);\r\nvar qigStore = __webpack_require__(/*! ../stores/qigselector/qigstore */ 230);\r\nvar qigActionCreator = __webpack_require__(/*! ../actions/qigselector/qigselectoractioncreator */ 253);\r\nvar navigationHelper = __webpack_require__(/*! ./utility/navigation/navigationhelper */ 248);\r\nvar userInfoActionCreator = __webpack_require__(/*! ../actions/userinfo/userinfoactioncreator */ 255);\r\nvar worklistActionCreator = __webpack_require__(/*! ../actions/worklist/worklistactioncreator */ 261);\r\nvar classNames = __webpack_require__(/*! classnames */ 39);\r\nvar BreadCrumb = __webpack_require__(/*! ./breadcrumb/breadcrumb */ 348);\r\nvar MenuWrapper = __webpack_require__(/*! ./menu/menuwrapper */ 354);\r\nvar teamManagementStore = __webpack_require__(/*! ../stores/teammanagement/teammanagementstore */ 245);\r\nvar auditLoggingHelper = __webpack_require__(/*! ./utility/auditlogger/auditlogginghelper */ 298);\r\nvar standardisationSetupStore = __webpack_require__(/*! ../stores/standardisationsetup/standardisationsetupstore */ 237);\r\nvar markerOperationModeFactory = __webpack_require__(/*! ./utility/markeroperationmode/markeroperationmodefactory */ 232);\r\n/**\r\n * React component class for Header for Authorized pages\r\n */\r\nvar Header = /** @class */ (function (_super) {\r\n    __extends(Header, _super);\r\n    /**\r\n     * Constructor\r\n     * @param props\r\n     * @param state\r\n     */\r\n    function Header(props, state) {\r\n        var _this = _super.call(this, props, state) || this;\r\n        // Denotes whether if a stamp is paned, is it paned beyond the allowable boundaries\r\n        // If so, the annotation bin would need to be displayed\r\n        _this.isStampPanedBeyondBoundaries = false;\r\n        _this.showOfflineIndicator = false;\r\n        _this.lastTap = 0;\r\n        _this.hasAwardingAccess = false;\r\n        _this.hasPendingJudgement = false;\r\n        _this.reRenderResponseNavigation = false;\r\n        // these classes allows double tap for ipad(safari)\r\n        _this.classesToPreventBlocking = [\r\n            'toggle-left-panel',\r\n            'tool-wrap',\r\n            'icon-tray',\r\n            'exp-colp-mrking-tary',\r\n            'mark-button',\r\n            'close-message-link',\r\n            'maximize-message-link',\r\n            'expand-toggle-icon',\r\n            'menu-close',\r\n            'setreview-btn-holder',\r\n            'raise-new-exception',\r\n            'minimize-message-link',\r\n            'mark-button-container',\r\n            'max-txt',\r\n            'mark-button-nav',\r\n            'mark-button-wrapper',\r\n            'rounded',\r\n            'exception-close-link',\r\n            'media-panel',\r\n            'allow-edge-tap',\r\n            'Delete-msg'\r\n        ];\r\n        /**\r\n         * This will block the double-tap zoom in ipad\r\n         */\r\n        _this.blockDoubleTapZoom = function (e) {\r\n            var actualX = e.changedTouches[0].clientX;\r\n            var actualY = e.changedTouches[0].clientY;\r\n            var clientWidth = document.documentElement.clientWidth;\r\n            var clientHeight = document.documentElement.clientHeight;\r\n            // At the edges of ipad only the single tap is triggered\r\n            // by identifying the edges and blocking the double tap\r\n            if ((actualX <= 30 || actualX >= (clientWidth - 30) || actualY >= (clientHeight - 30)) && _this.blockDoubleTap(actualX, actualY)) {\r\n                // unblocking the taps on some icons ,annotions and mark buttons\r\n                // which lies at the edges of ipad\r\n                e.preventDefault();\r\n                return;\r\n            }\r\n            var currentTime = new Date().getTime();\r\n            var tapLength = currentTime - _this.lastTap;\r\n            // disable double tap based on interval between two taps\r\n            if (tapLength < 500 && tapLength > 0 && _this.blockDoubleTap(actualX, actualY)) {\r\n                // unblocking the taps on some icons ,annotions and mark buttons\r\n                e.preventDefault();\r\n            }\r\n            _this.lastTap = currentTime;\r\n        };\r\n        /**\r\n         *  This method will check whether we want to block double tap or not based on the class list provided.\r\n         */\r\n        _this.blockDoubleTap = function (actualX, actualY) {\r\n            var ele = htmlUtilities.getElementFromPosition(actualX, actualY);\r\n            var isInValid = false;\r\n            if (ele) {\r\n                for (var i = 0; i < _this.classesToPreventBlocking.length; i++) {\r\n                    var className = _this.classesToPreventBlocking[i];\r\n                    isInValid = (!(ele.classList.contains(className)) && $('.' + className).has(ele).length === 0);\r\n                    if (!isInValid) {\r\n                        break;\r\n                    }\r\n                }\r\n                return isInValid;\r\n            }\r\n        };\r\n        /**\r\n         * This will block the pinch-to-zoom in ipad\r\n         */\r\n        _this.blockPinchToZoom = function (e) {\r\n            if (e.touches.length > 1) {\r\n                e.preventDefault();\r\n            }\r\n        };\r\n        _this.refreshUseOption = function () {\r\n            _this.setState({\r\n                isUserOptionLoaded: true\r\n            });\r\n        };\r\n        /**\r\n         * This will re-render the header component\r\n         */\r\n        _this.reRender = function () {\r\n            _this.setState({\r\n                renderedOn: Date.now()\r\n            });\r\n        };\r\n        /**\r\n         * This will show the header icons after QIGs loaded\r\n         */\r\n        _this.displayHeaderIconsOnQIGLoaded = function (showIcons) {\r\n            if (showIcons === void 0) { showIcons = true; }\r\n            _this.setState({\r\n                displayIcons: showIcons\r\n            });\r\n        };\r\n        /**\r\n         * Update notification info\r\n         */\r\n        _this.updateNotification = function () {\r\n            _this.reRender();\r\n        };\r\n        /**\r\n         * Update response navigation info\r\n         */\r\n        _this.responseChanged = function () {\r\n            _this.reRender();\r\n        };\r\n        /**\r\n         * Invoked on the starting of stamp pan\r\n         */\r\n        _this.onStampPanStarted = function () {\r\n            _this.reRender();\r\n        };\r\n        /**\r\n         * Invoked on the ending the stamp pan\r\n         */\r\n        _this.onStampPanEnd = function () {\r\n            _this.reRender();\r\n        };\r\n        /**\r\n         * Invoked on the awarding access details fetched\r\n         */\r\n        _this.awardingAccessDetailsFetched = function () {\r\n            _this.reRender();\r\n        };\r\n        /**\r\n         * Invoked on stamp pan to an area where deletion of the annotation dragged is possible\r\n         */\r\n        _this.onStampPanToDeleteArea = function (canDelete) {\r\n            _this.isStampPanedBeyondBoundaries = canDelete;\r\n            if (_this.isStampPanedBeyondBoundaries) {\r\n                responseActionCreator.setMousePosition(-1, -1);\r\n            }\r\n            _this.reRender();\r\n        };\r\n        /**\r\n         * updates the offline indicator info.\r\n         */\r\n        _this.offlineIndicator = function () {\r\n            if (!applicationStore.instance.isOnline) {\r\n                _this.showOfflineIndicator = true;\r\n            }\r\n            else {\r\n                _this.showOfflineIndicator = false;\r\n            }\r\n            /* Logging event in google analytics or application insights based on the configuration */\r\n            new auditLoggingHelper().logHelper.\r\n                logEventOnApplicationStatusChange(applicationStore.instance.isOnline ?\r\n                'Application Online' :\r\n                'Application Offline');\r\n            _this.setState({\r\n                renderedOn: Date.now()\r\n            });\r\n        };\r\n        /**\r\n         * Method to be invoked once the annotation starts drawing\r\n         */\r\n        _this.onDrawStart = function (isAnnotationDrawing) {\r\n            // re-render only if there is a change in isAnnotationDrawing as this happens on mousemove.\r\n            if (_this.state.isAnnotationDrawing !== isAnnotationDrawing) {\r\n                _this.setState({\r\n                    isAnnotationDrawing: isAnnotationDrawing,\r\n                    renderedOn: Date.now()\r\n                });\r\n            }\r\n        };\r\n        /**\r\n         * Navigate to particular page container\r\n         */\r\n        _this.onNavigationUpdated = function (navigateTo) {\r\n            /** navigating from a closed response doesn't require to call save marks */\r\n            if (navigateTo !== enums.SaveAndNavigate.toMenu) {\r\n                worklistActionCreator.responseClosed(true);\r\n            }\r\n            /** If we are navigating to inbox directly navigate to the message page */\r\n            if (navigateTo === enums.SaveAndNavigate.toInboxMessagePage) {\r\n                navigationHelper.loadMessagePage();\r\n                return;\r\n            }\r\n            navigationHelper.loadContainerIfNeeded(enums.PageContainers.Response, enums.SaveMarksAndAnnotationsProcessingTriggerPoint.CloseResponse);\r\n        };\r\n        /**\r\n         * fired when acetate is moved to grey area\r\n         */\r\n        _this.acetateInGreyArea = function (isInGreyArea) {\r\n            // rerender when there is any change in isInGreyArea\r\n            _this.setState({\r\n                isAcetateInGreyArea: isInGreyArea,\r\n                renderedOn: Date.now()\r\n            });\r\n        };\r\n        /**\r\n         * Invoked on reclassifying a respone to render header and response navigation\r\n         */\r\n        _this.onReclassifyResponse = function (isTotalMarksViewSelected, selectedStandardisationSetupWorkList, doMarkNow) {\r\n            if (doMarkNow === void 0) { doMarkNow = false; }\r\n            if (selectedStandardisationSetupWorkList === enums.StandardisationSetup.ClassifiedResponse) {\r\n                _this.reRenderResponseNavigation = !_this.reRenderResponseNavigation;\r\n                _this.reRender();\r\n            }\r\n        };\r\n        _this.state = {\r\n            isUserOptionLoaded: false,\r\n            displayIcons: true,\r\n            renderedOn: Date.now(),\r\n            isAcetateInGreyArea: false,\r\n            isAnnotationDrawing: true\r\n        };\r\n        _this.mouseover = _this.mouseover.bind(_this);\r\n        return _this;\r\n    }\r\n    /**\r\n     * Render method\r\n     */\r\n    Header.prototype.render = function () {\r\n        var unreadMessageCount = this.props.unReadMessageCount ?\r\n            this.props.unReadMessageCount : messageStore.instance.getUnreadMessageCount;\r\n        var stamp = undefined;\r\n        if (toolbarStore.instance.selectedStampId !== 0) {\r\n            stamp = stampStore.instance.getStamp(toolbarStore.instance.selectedStampId);\r\n        }\r\n        var className = classNames('fixed', { 'support-envirnoment': loginSession.IS_SUPPORT_ADMIN_LOGIN }, { 'offline': this.showOfflineIndicator }, { 'no-drop': this.state.isAnnotationDrawing === false || this.isStampPanedBeyondBoundaries || this.state.isAcetateInGreyArea }, {\r\n            'drawing': ((stamp !== undefined && stamp.stampType === enums.StampType.dynamic &&\r\n                (this.state.isAnnotationDrawing === false)) || this.state.isAcetateInGreyArea)\r\n        }, { 'deleting-annotation': this.isStampPanedBeyondBoundaries });\r\n        var toolTipforOffineMode = localeStore.instance.TranslateText('generic.navigation-bar.offline-tooltip') +\r\n            ((this.elapsedTime < 1) ? '1' : this.elapsedTime) +\r\n            localeStore.instance.TranslateText('generic.navigation-bar.offline-tooltip-minutes-ago');\r\n        return (React.createElement(\"header\", { className: className, onClick: this.onClickHandler, title: (this.showOfflineIndicator) ? toolTipforOffineMode : '' },\r\n            React.createElement(\"div\", { className: 'wrapper clearfix', onMouseOver: this.mouseover, onMouseLeave: this.mouseover },\r\n                this.renderBreadCrumb(),\r\n                this.renderHeaderCenterPortion(),\r\n                this.renderHeaderRightPortion(unreadMessageCount)),\r\n            React.createElement(\"div\", { className: 'blue-strip' })));\r\n    };\r\n    /**\r\n     * on click handler\r\n     * @param {any} event\r\n     */\r\n    Header.prototype.onClickHandler = function (event) {\r\n        /* Defect:49599 - seting focus back to subject on message close for fixing cursor and onscreen keyboard displaying in header\r\n           issue in ipad */\r\n        if (htmlUtilities.isIPadDevice && messageStore.instance.isMessagePanelVisible) {\r\n            htmlUtilities.setFocusToElement('message-subject');\r\n            htmlUtilities.blurElement('message-subject');\r\n        }\r\n        stampActionCreator.showOrHideComment(false);\r\n    };\r\n    /**\r\n     * This method will render the center portion of Header component\r\n     * Response Header: render response navigation\r\n     */\r\n    Header.prototype.renderHeaderCenterPortion = function () {\r\n        switch (this.props.containerPage) {\r\n            case enums.PageContainers.Response:\r\n                var currentResponse = void 0;\r\n                var isNextResponseAvailable = void 0;\r\n                var isPreviousResponseAvailable = void 0;\r\n                var responseId = void 0;\r\n                var totalResponses = void 0;\r\n                if (standardisationSetupStore.instance.isSelectResponsesWorklist) {\r\n                    currentResponse = standardisationSetupStore.instance.candidateScriptPosition;\r\n                    isNextResponseAvailable = standardisationSetupStore.instance.isNextCandidateScriptAvailable;\r\n                    isPreviousResponseAvailable = standardisationSetupStore.instance.isPreviousCandidateScriptAvailable;\r\n                    responseId = standardisationSetupStore.instance.selectedResponseId.toString();\r\n                    totalResponses = standardisationSetupStore.instance.totalCandidateScriptCount;\r\n                }\r\n                else if (markerOperationModeFactory.operationMode.isAwardingMode) {\r\n                    currentResponse = 1;\r\n                    isNextResponseAvailable = false;\r\n                    isPreviousResponseAvailable = false;\r\n                    responseId = responseStore.instance.selectedDisplayId.toString();\r\n                    totalResponses = 1;\r\n                }\r\n                else {\r\n                    currentResponse =\r\n                        markerOperationModeFactory.operationMode.getResponsePosition(responseStore.instance.selectedDisplayId.toString());\r\n                    isNextResponseAvailable =\r\n                        (markerOperationModeFactory.operationMode.isNextResponseAvailable(responseStore.instance.selectedDisplayId.toString()) &&\r\n                            !teamManagementStore.instance.isRedirectFromException);\r\n                    isPreviousResponseAvailable =\r\n                        (markerOperationModeFactory.operationMode.isPreviousResponseAvailable(responseStore.instance.selectedDisplayId.toString()) &&\r\n                            !teamManagementStore.instance.isRedirectFromException);\r\n                    responseId = (standardisationSetupStore.instance.selectedStandardisationSetupWorkList\r\n                        === enums.StandardisationSetup.SelectResponse\r\n                        && standardisationSetupStore.instance.selectedTabInSelectResponse\r\n                            === enums.StandardisationSessionTab.PreviousSession)\r\n                        ? standardisationSetupStore.instance.getReusablaResponseSelectedDisplayId(responseStore.instance.selectedDisplayId.toString()).toString()\r\n                        : responseStore.instance.selectedDisplayId.toString();\r\n                    totalResponses = markerOperationModeFactory.operationMode.currentResponseCount;\r\n                }\r\n                // If there is no display id, No need to render the component\r\n                if (!isNaN(currentResponse) && !isNaN(responseStore.instance.selectedDisplayId) &&\r\n                    responseStore.instance.selectedDisplayId > 0) {\r\n                    return (React.createElement(ResponseNavigation, { currentResponse: currentResponse, isNextResponseAvailable: isNextResponseAvailable, isPreviousResponseAvailable: isPreviousResponseAvailable, responseId: responseId, totalResponses: totalResponses, centreId: standardisationSetupStore.instance.standardisationSetUpSelectedCentreNo, moveCallback: navigationHelper.responseNavigation, selectedLanguage: this.props.selectedLanguage, reRender: this.reRenderResponseNavigation }));\r\n                }\r\n                return null;\r\n            case enums.PageContainers.TeamManagement:\r\n            case enums.PageContainers.Message:\r\n            case enums.PageContainers.Login:\r\n            case enums.PageContainers.QigSelector:\r\n            case enums.PageContainers.WorkList:\r\n            case enums.PageContainers.MarkingCheckExaminersWorkList:\r\n            case enums.PageContainers.StandardisationSetup:\r\n            case enums.PageContainers.AdminSupport:\r\n            case enums.PageContainers.Awarding:\r\n                return (null);\r\n        }\r\n    };\r\n    /**\r\n     *  TO DO: Andromeda will correct this method as part of Response header functionality in Sprint 8\r\n     */\r\n    Header.prototype.renderHeaderRightPortion = function (unreadMessageCount) {\r\n        var isWorklistIconClickable = false;\r\n        var isWorklistIconVisible = true;\r\n        this.hasAwardingAccess = awardingStore.instance.hasAwardingAccess;\r\n        this.hasPendingJudgement = awardingStore.instance.hasPendingJudgement;\r\n        if (this.props.containerPage === enums.PageContainers.Response ||\r\n            this.props.containerPage === enums.PageContainers.Message ||\r\n            this.props.isInTeamManagement) {\r\n            isWorklistIconClickable = true;\r\n        }\r\n        if (this.props.containerPage === enums.PageContainers.QigSelector ||\r\n            this.props.containerPage === enums.PageContainers.TeamManagement ||\r\n            this.props.containerPage === enums.PageContainers.StandardisationSetup ||\r\n            this.props.containerPage === enums.PageContainers.Awarding) {\r\n            isWorklistIconVisible = false;\r\n        }\r\n        if (this.props.containerPage === enums.PageContainers.AdminSupport) {\r\n            return null;\r\n        }\r\n        return (React.createElement(\"ul\", { className: 'nav shift-right', role: 'menubar' },\r\n            this.hasAwardingAccess ?\r\n                React.createElement(AwardingIndicator, { id: 'awardingindicator', key: 'awardingindicator', hasAwardingJudgement: this.hasPendingJudgement, selectedLanguage: this.props.selectedLanguage })\r\n                : null,\r\n            this.state.displayIcons === true ?\r\n                React.createElement(MessageNotificationIndicator, { id: 'notification', key: 'notification', messageNotificationCount: unreadMessageCount, selectedLanguage: this.props.selectedLanguage })\r\n                : null,\r\n            this.state.displayIcons === true ?\r\n                React.createElement(MenuWrapper, { id: 'menuwrapper', key: 'menuwrapper_key', selectedLanguage: this.props.selectedLanguage, handleNavigationClick: navigationHelper.handleNavigation.bind(this, enums.SaveAndNavigate.toMenu) })\r\n                : null,\r\n            React.createElement(UserDetails, { selectedLanguage: this.props.selectedLanguage, isUserOptionLoaded: this.state.isUserOptionLoaded })));\r\n    };\r\n    /**\r\n     * Redirect to the start page if not authenticated\r\n     */\r\n    Header.prototype.componentWillMount = function () {\r\n        if (!loginSession.IS_AUTHENTICATED) {\r\n            navigationHelper.loadLoginPage();\r\n        }\r\n    };\r\n    /**\r\n     * Unsubscribe events\r\n     */\r\n    Header.prototype.componentWillUnmount = function () {\r\n        useroptionStore.instance.removeListener(useroptionStore.UseroptionStore.USER_OPTION_GET_EVENT, this.refreshUseOption);\r\n        messageStore.instance.removeListener(messageStore.MessageStore.UPDATE_NOTIFICATION_TRIGGERED_EVENT, this.updateNotification);\r\n        responseStore.instance.removeListener(responseStore.ResponseStore.RESPONSE_CHANGED, this.responseChanged);\r\n        toolbarStore.instance.removeListener(toolbarStore.ToolbarStore.STAMP_PAN, this.onStampPanStarted);\r\n        toolbarStore.instance.removeListener(toolbarStore.ToolbarStore.PAN_END, this.onStampPanEnd);\r\n        toolbarStore.instance.removeListener(toolbarStore.ToolbarStore.PAN_STAMP_TO_DELETION_AREA, this.onStampPanToDeleteArea);\r\n        markingStore.instance.removeListener(markingStore.MarkingStore.ANNOTATION_DRAW, this.onDrawStart);\r\n        markingStore.instance.removeListener(markingStore.MarkingStore.NAVIGATION_UPDATED_EVENT, this.onNavigationUpdated);\r\n        applicationStore.instance.removeListener(applicationStore.ApplicationStore.ONLINE_STATUS_UPDATED_EVENT, this.offlineIndicator);\r\n        qigStore.instance.removeListener(qigStore.QigStore.SHOW_HEADER_ICONS, this.displayHeaderIconsOnQIGLoaded);\r\n        if (htmlUtilities.isIPadDevice && htmlUtilities.getUserDevice().browser === 'Safari') {\r\n            document.documentElement.removeEventListener('touchstart', this.blockPinchToZoom, false);\r\n            document.documentElement.removeEventListener('touchend', this.blockDoubleTapZoom, false);\r\n        }\r\n        worklistStore.instance.removeListener(worklistStore.WorkListStore.WORKLIST_MARKING_MODE_CHANGE, this.responseChanged);\r\n        responseStore.instance.removeListener(responseStore.ResponseStore.RESPONSE_OPENED, this.responseChanged);\r\n        qigStore.instance.removeListener(qigStore.QigStore.ACETATE_IN_GREY_AREA, this.acetateInGreyArea);\r\n        standardisationSetupStore.instance.removeListener(standardisationSetupStore.StandardisationSetupStore.STANDARDISATION_RESPONSE_DATA_UPDATED_EVENT, this.onReclassifyResponse);\r\n    };\r\n    /**\r\n     * Component did mount\r\n     */\r\n    Header.prototype.componentDidMount = function () {\r\n        var useCache = useroptionStore.instance.isLoaded;\r\n        /** Getting the user options */\r\n        userOptionActionCreator.getUserOptions(useCache);\r\n        useroptionStore.instance.addListener(useroptionStore.UseroptionStore.USER_OPTION_GET_EVENT, this.refreshUseOption);\r\n        messageStore.instance.addListener(messageStore.MessageStore.UPDATE_NOTIFICATION_TRIGGERED_EVENT, this.updateNotification);\r\n        responseStore.instance.addListener(responseStore.ResponseStore.RESPONSE_CHANGED, this.responseChanged);\r\n        toolbarStore.instance.addListener(toolbarStore.ToolbarStore.STAMP_PAN, this.onStampPanStarted);\r\n        toolbarStore.instance.addListener(toolbarStore.ToolbarStore.PAN_END, this.onStampPanEnd);\r\n        toolbarStore.instance.addListener(toolbarStore.ToolbarStore.PAN_STAMP_TO_DELETION_AREA, this.onStampPanToDeleteArea);\r\n        markingStore.instance.addListener(markingStore.MarkingStore.ANNOTATION_DRAW, this.onDrawStart);\r\n        markingStore.instance.addListener(markingStore.MarkingStore.NAVIGATION_UPDATED_EVENT, this.onNavigationUpdated);\r\n        applicationStore.instance.addListener(applicationStore.ApplicationStore.ONLINE_STATUS_UPDATED_EVENT, this.offlineIndicator);\r\n        qigStore.instance.addListener(qigStore.QigStore.SHOW_HEADER_ICONS, this.displayHeaderIconsOnQIGLoaded);\r\n        if (htmlUtilities.isIPadDevice && htmlUtilities.getUserDevice().browser === 'Safari') {\r\n            document.documentElement.addEventListener('touchstart', this.blockPinchToZoom, false);\r\n            document.documentElement.addEventListener('touchend', this.blockDoubleTapZoom, false);\r\n        }\r\n        worklistStore.instance.addListener(worklistStore.WorkListStore.WORKLIST_MARKING_MODE_CHANGE, this.responseChanged);\r\n        responseStore.instance.addListener(responseStore.ResponseStore.RESPONSE_OPENED, this.responseChanged);\r\n        qigStore.instance.addListener(qigStore.QigStore.ACETATE_IN_GREY_AREA, this.acetateInGreyArea);\r\n        awardingStore.instance.addListener(awardingStore.AwardingStore.AWARDING_ACCESS_DETAILS, this.awardingAccessDetailsFetched);\r\n        standardisationSetupStore.instance.addListener(standardisationSetupStore.StandardisationSetupStore.STANDARDISATION_RESPONSE_DATA_UPDATED_EVENT, this.onReclassifyResponse);\r\n    };\r\n    /**\r\n     * Component will receive props\r\n     */\r\n    Header.prototype.componentWillReceiveProps = function (nextProps) {\r\n        if (this.props !== nextProps) {\r\n            this.setState({\r\n                renderedOn: nextProps.renderedOn\r\n            });\r\n        }\r\n    };\r\n    /**\r\n     * Method to detect mouse  over\r\n     * @param event\r\n     */\r\n    Header.prototype.mouseover = function (event) {\r\n        if (!applicationStore.instance.isOnline) {\r\n            //Calculates the number of minutes that have elapsed since Assessor 3 first detected as offline.\r\n            this.elapsedTime = Math.round(((Date.now() - applicationStore.instance.elapsedTime) / 1000) / 60);\r\n            this.setState({ renderedOn: Date.now() });\r\n        }\r\n    };\r\n    /**\r\n     * Navigate to QigSelector while clicking on Logo\r\n     */\r\n    Header.prototype.navigateToQigSelector = function () {\r\n        var hasQigData = qigStore.instance.getOverviewData ?\r\n            qigStore.instance.getOverviewData.qigSummary.count() > 0 : undefined;\r\n        // if the remember qig is active then while navigating to qigselector\r\n        // from worklist then the qigdata will be undefined, so it it is undefined\r\n        // we need to get the qig list details to display it\r\n        if (!hasQigData) {\r\n            qigActionCreator.getQIGSelectorData(0);\r\n        }\r\n        // set the marker operation mode as Marking\r\n        userInfoActionCreator.changeOperationMode(enums.MarkerOperationMode.Marking);\r\n        navigationHelper.loadQigSelector();\r\n    };\r\n    /**\r\n     * This method will render the Bread Crumb component\r\n     */\r\n    Header.prototype.renderBreadCrumb = function () {\r\n        return (React.createElement(BreadCrumb, { id: 'BreadCrumbComponent', key: 'key_BreadCrumbComponent', containerPage: this.props.containerPage, selectedLanguage: this.props.selectedLanguage, renderedOn: this.props.renderedOn, examinerName: this.props.examinerName }));\r\n    };\r\n    return Header;\r\n}(pureRenderComponent));\r\nmodule.exports = Header;\r\n\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! jquery */ 42)))//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzM3LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvaGVhZGVyLnRzeD8zNGEyIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXG4gIFJlYWN0IGNvbXBvbmVudCBmb3IgQXV0aG9yaXplZCBwYWdlIGhlYWRlclxuKi9cbi8qIHRzbGludDpkaXNhYmxlOm5vLXVudXNlZC12YXJpYWJsZSAqL1xuaW1wb3J0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbi8qIHRzbGludDplbmFibGU6bm8tdW51c2VkLXZhcmlhYmxlICovXG5pbXBvcnQgcHVyZVJlbmRlckNvbXBvbmVudCA9IHJlcXVpcmUoJy4vYmFzZS9wdXJlcmVuZGVyY29tcG9uZW50Jyk7XG5pbXBvcnQgbG9jYWxlU3RvcmUgPSByZXF1aXJlKCcuLi9zdG9yZXMvbG9jYWxlL2xvY2FsZXN0b3JlJyk7XG5pbXBvcnQgbG9naW5TZXNzaW9uID0gcmVxdWlyZSgnLi4vYXBwL2xvZ2luc2Vzc2lvbicpO1xuaW1wb3J0IE1lc3NhZ2VOb3RpZmljYXRpb25JbmRpY2F0b3IgPSByZXF1aXJlKCcuL3V0aWxpdHkvbm90aWZpY2F0aW9uL21lc3NhZ2Vub3RpZmljYXRpb25pbmRpY2F0b3InKTtcbmltcG9ydCBBd2FyZGluZ0luZGljYXRvciA9IHJlcXVpcmUoJy4uL2NvbXBvbmVudHMvYXdhcmRpbmcvYXdhcmRpbmdpbmRpY2F0b3InKTtcbmltcG9ydCBhd2FyZGluZ1N0b3JlID0gcmVxdWlyZSgnLi4vc3RvcmVzL2F3YXJkaW5nL2F3YXJkaW5nc3RvcmUnKTtcbmltcG9ydCBVc2VyRGV0YWlscyA9IHJlcXVpcmUoJy4vdXNlci91c2VyZGV0YWlscy91c2VyZGV0YWlscycpO1xuaW1wb3J0IHVzZXJPcHRpb25BY3Rpb25DcmVhdG9yID0gcmVxdWlyZSgnLi4vYWN0aW9ucy91c2Vyb3B0aW9uL3VzZXJvcHRpb25hY3Rpb25jcmVhdG9yJyk7XG5pbXBvcnQgdXNlcm9wdGlvblN0b3JlID0gcmVxdWlyZSgnLi4vc3RvcmVzL3VzZXJvcHRpb24vdXNlcm9wdGlvbnN0b3JlJyk7XG5pbXBvcnQgbWVzc2FnZVN0b3JlID0gcmVxdWlyZSgnLi4vc3RvcmVzL21lc3NhZ2UvbWVzc2FnZXN0b3JlJyk7XG5pbXBvcnQgcmVzcG9uc2VTdG9yZSA9IHJlcXVpcmUoJy4uL3N0b3Jlcy9yZXNwb25zZS9yZXNwb25zZXN0b3JlJyk7XG5pbXBvcnQgd29ya2xpc3RTdG9yZSA9IHJlcXVpcmUoJy4uL3N0b3Jlcy93b3JrbGlzdC93b3JrbGlzdHN0b3JlJyk7XG5pbXBvcnQgcmVzcG9uc2VBY3Rpb25DcmVhdG9yID0gcmVxdWlyZSgnLi4vYWN0aW9ucy9yZXNwb25zZS9yZXNwb25zZWFjdGlvbmNyZWF0b3InKTtcbmltcG9ydCBSZXNwb25zZU5hdmlnYXRpb24gPSByZXF1aXJlKCcuL3Jlc3BvbnNlL3Jlc3BvbnNlbmF2aWdhdGlvbicpO1xuaW1wb3J0IGVudW1zID0gcmVxdWlyZSgnLi91dGlsaXR5L2VudW1zJyk7XG5pbXBvcnQgaHRtbFV0aWxpdGllcyA9IHJlcXVpcmUoJy4uL3V0aWxpdHkvZ2VuZXJpYy9odG1sdXRpbGl0aWVzJyk7XG5pbXBvcnQgdG9vbGJhclN0b3JlID0gcmVxdWlyZSgnLi4vc3RvcmVzL3Rvb2xiYXIvdG9vbGJhcnN0b3JlJyk7XG5pbXBvcnQgbWFya2luZ1N0b3JlID0gcmVxdWlyZSgnLi4vc3RvcmVzL21hcmtpbmcvbWFya2luZ3N0b3JlJyk7XG5pbXBvcnQgc3RhbXBTdG9yZSA9IHJlcXVpcmUoJy4uL3N0b3Jlcy9zdGFtcC9zdGFtcHN0b3JlJyk7XG5pbXBvcnQgc3RhbXBBY3Rpb25DcmVhdG9yID0gcmVxdWlyZSgnLi4vYWN0aW9ucy9zdGFtcC9zdGFtcGFjdGlvbmNyZWF0b3InKTtcbmltcG9ydCBhcHBsaWNhdGlvblN0b3JlID0gcmVxdWlyZSgnLi4vc3RvcmVzL2FwcGxpY2F0aW9ub2ZmbGluZS9hcHBsaWNhdGlvbnN0b3JlJyk7XG5pbXBvcnQgcWlnU3RvcmUgPSByZXF1aXJlKCcuLi9zdG9yZXMvcWlnc2VsZWN0b3IvcWlnc3RvcmUnKTtcbmltcG9ydCBxaWdBY3Rpb25DcmVhdG9yID0gcmVxdWlyZSgnLi4vYWN0aW9ucy9xaWdzZWxlY3Rvci9xaWdzZWxlY3RvcmFjdGlvbmNyZWF0b3InKTtcbmltcG9ydCBuYXZpZ2F0aW9uSGVscGVyID0gcmVxdWlyZSgnLi91dGlsaXR5L25hdmlnYXRpb24vbmF2aWdhdGlvbmhlbHBlcicpO1xuaW1wb3J0IHVzZXJJbmZvQWN0aW9uQ3JlYXRvciA9IHJlcXVpcmUoJy4uL2FjdGlvbnMvdXNlcmluZm8vdXNlcmluZm9hY3Rpb25jcmVhdG9yJyk7XG5pbXBvcnQgd29ya2xpc3RBY3Rpb25DcmVhdG9yID0gcmVxdWlyZSgnLi4vYWN0aW9ucy93b3JrbGlzdC93b3JrbGlzdGFjdGlvbmNyZWF0b3InKTtcbmxldCBjbGFzc05hbWVzID0gcmVxdWlyZSgnY2xhc3NuYW1lcycpO1xuaW1wb3J0IEJyZWFkQ3J1bWIgPSByZXF1aXJlKCcuL2JyZWFkY3J1bWIvYnJlYWRjcnVtYicpO1xuaW1wb3J0IE1lbnVXcmFwcGVyID0gcmVxdWlyZSgnLi9tZW51L21lbnV3cmFwcGVyJyk7XG5pbXBvcnQgdGVhbU1hbmFnZW1lbnRTdG9yZSA9IHJlcXVpcmUoJy4uL3N0b3Jlcy90ZWFtbWFuYWdlbWVudC90ZWFtbWFuYWdlbWVudHN0b3JlJyk7XG5pbXBvcnQgdXJscyA9IHJlcXVpcmUoJy4uL2RhdGFzZXJ2aWNlcy9iYXNlL3VybHMnKTtcbmltcG9ydCB0YWdBY3Rpb25DcmVhdG9yID0gcmVxdWlyZSgnLi4vYWN0aW9ucy90YWcvdGFnYWN0aW9uY3JlYXRvcicpO1xuaW1wb3J0IGF1ZGl0TG9nZ2luZ0hlbHBlciA9IHJlcXVpcmUoJy4vdXRpbGl0eS9hdWRpdGxvZ2dlci9hdWRpdGxvZ2dpbmdoZWxwZXInKTtcbmltcG9ydCBzdGFuZGFyZGlzYXRpb25TZXR1cFN0b3JlID0gcmVxdWlyZSgnLi4vc3RvcmVzL3N0YW5kYXJkaXNhdGlvbnNldHVwL3N0YW5kYXJkaXNhdGlvbnNldHVwc3RvcmUnKTtcbmltcG9ydCBtYXJrZXJPcGVyYXRpb25Nb2RlRmFjdG9yeSA9IHJlcXVpcmUoJy4vdXRpbGl0eS9tYXJrZXJvcGVyYXRpb25tb2RlL21hcmtlcm9wZXJhdGlvbm1vZGVmYWN0b3J5Jyk7XG5pbXBvcnQgYXdhcmRpbmdBY3Rpb25DcmVhdG9yID0gcmVxdWlyZSgnLi4vYWN0aW9ucy9hd2FyZGluZy9hd2FyZGluZ2FjdGlvbmNyZWF0b3InKTtcblxuLyoqXG4gKiBQcm9wZXJ0aWVzIG9mIGEgY29tcG9uZW50XG4gKi9cbmludGVyZmFjZSBQcm9wcyBleHRlbmRzIExvY2FsZVNlbGVjdGlvbkJhc2Uge1xuICAgIGNvbnRhaW5lclBhZ2U6IGVudW1zLlBhZ2VDb250YWluZXJzO1xuICAgIHVuUmVhZE1lc3NhZ2VDb3VudD86IG51bWJlcjtcbiAgICBpc0luVGVhbU1hbmFnZW1lbnQ/OiBib29sZWFuO1xuICAgIGV4YW1pbmVyTmFtZT86IHN0cmluZztcbiAgICByZW5kZXJlZE9uPzogbnVtYmVyO1xufVxuXG4vKipcbiAqIEFsbCBmaWVsZHMgb3B0aW9uYWwgdG8gYWxsb3cgcGFydGlhbCBzdGF0ZSB1cGRhdGVzIGluIHNldFN0YXRlXG4gKi9cbmludGVyZmFjZSBTdGF0ZSB7XG4gICAgaXNVc2VyT3B0aW9uTG9hZGVkPzogYm9vbGVhbjtcbiAgICByZW5kZXJlZE9uPzogbnVtYmVyO1xuICAgIGRpc3BsYXlJY29ucz86IGJvb2xlYW47XG4gICAgaXNBY2V0YXRlSW5HcmV5QXJlYT86IGJvb2xlYW47XG4gICAgaXNBbm5vdGF0aW9uRHJhd2luZz86IGJvb2xlYW47XG59XG5cbi8qKlxuICogUmVhY3QgY29tcG9uZW50IGNsYXNzIGZvciBIZWFkZXIgZm9yIEF1dGhvcml6ZWQgcGFnZXNcbiAqL1xuY2xhc3MgSGVhZGVyIGV4dGVuZHMgcHVyZVJlbmRlckNvbXBvbmVudDxQcm9wcywgU3RhdGU+IHtcblxuICAgIC8vIERlbm90ZXMgd2hldGhlciBpZiBhIHN0YW1wIGlzIHBhbmVkLCBpcyBpdCBwYW5lZCBiZXlvbmQgdGhlIGFsbG93YWJsZSBib3VuZGFyaWVzXG4gICAgLy8gSWYgc28sIHRoZSBhbm5vdGF0aW9uIGJpbiB3b3VsZCBuZWVkIHRvIGJlIGRpc3BsYXllZFxuICAgIHByaXZhdGUgaXNTdGFtcFBhbmVkQmV5b25kQm91bmRhcmllczogYm9vbGVhbiA9IGZhbHNlO1xuICAgIHByaXZhdGUgc2hvd09mZmxpbmVJbmRpY2F0b3I6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICBwcml2YXRlIGVsYXBzZWRUaW1lOiBudW1iZXI7XG4gICAgcHJpdmF0ZSB0aW1lb3V0OiBhbnk7XG4gICAgcHJpdmF0ZSBsYXN0VGFwOiBudW1iZXIgPSAwO1xuICAgIHByaXZhdGUgaGFzQXdhcmRpbmdBY2Nlc3M6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICBwcml2YXRlIGhhc1BlbmRpbmdKdWRnZW1lbnQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICBwcml2YXRlIHJlUmVuZGVyUmVzcG9uc2VOYXZpZ2F0aW9uOiBib29sZWFuID0gZmFsc2U7XG5cbiAgICAvLyB0aGVzZSBjbGFzc2VzIGFsbG93cyBkb3VibGUgdGFwIGZvciBpcGFkKHNhZmFyaSlcbiAgICBwcml2YXRlIGNsYXNzZXNUb1ByZXZlbnRCbG9ja2luZyA9IFtcbiAgICAgICAgJ3RvZ2dsZS1sZWZ0LXBhbmVsJyxcbiAgICAgICAgJ3Rvb2wtd3JhcCcsXG4gICAgICAgICdpY29uLXRyYXknLFxuICAgICAgICAnZXhwLWNvbHAtbXJraW5nLXRhcnknLFxuICAgICAgICAnbWFyay1idXR0b24nLFxuICAgICAgICAnY2xvc2UtbWVzc2FnZS1saW5rJyxcbiAgICAgICAgJ21heGltaXplLW1lc3NhZ2UtbGluaycsXG4gICAgICAgICdleHBhbmQtdG9nZ2xlLWljb24nLFxuICAgICAgICAnbWVudS1jbG9zZScsXG4gICAgICAgICdzZXRyZXZpZXctYnRuLWhvbGRlcicsXG4gICAgICAgICdyYWlzZS1uZXctZXhjZXB0aW9uJyxcbiAgICAgICAgJ21pbmltaXplLW1lc3NhZ2UtbGluaycsXG4gICAgICAgICdtYXJrLWJ1dHRvbi1jb250YWluZXInLFxuICAgICAgICAnbWF4LXR4dCcsXG4gICAgICAgICdtYXJrLWJ1dHRvbi1uYXYnLFxuICAgICAgICAnbWFyay1idXR0b24td3JhcHBlcicsXG4gICAgICAgICdyb3VuZGVkJyxcbiAgICAgICAgJ2V4Y2VwdGlvbi1jbG9zZS1saW5rJyxcbiAgICAgICAgJ21lZGlhLXBhbmVsJyxcbiAgICAgICAgJ2FsbG93LWVkZ2UtdGFwJyxcbiAgICAgICAgJ0RlbGV0ZS1tc2cnXG4gICAgXTtcblxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHByb3BzXG4gICAgICogQHBhcmFtIHN0YXRlXG4gICAgICovXG4gICAgY29uc3RydWN0b3IocHJvcHM6IFByb3BzLCBzdGF0ZTogU3RhdGUpIHtcbiAgICAgICAgc3VwZXIocHJvcHMsIHN0YXRlKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIGlzVXNlck9wdGlvbkxvYWRlZDogZmFsc2UsXG4gICAgICAgICAgICBkaXNwbGF5SWNvbnM6IHRydWUsXG4gICAgICAgICAgICByZW5kZXJlZE9uOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgaXNBY2V0YXRlSW5HcmV5QXJlYTogZmFsc2UsXG4gICAgICAgICAgICBpc0Fubm90YXRpb25EcmF3aW5nOiB0cnVlXG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5tb3VzZW92ZXIgPSB0aGlzLm1vdXNlb3Zlci5iaW5kKHRoaXMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbmRlciBtZXRob2RcbiAgICAgKi9cbiAgICBwdWJsaWMgcmVuZGVyKCkge1xuXG4gICAgICAgIGxldCB1bnJlYWRNZXNzYWdlQ291bnQgPSB0aGlzLnByb3BzLnVuUmVhZE1lc3NhZ2VDb3VudCA/XG4gICAgICAgICAgICB0aGlzLnByb3BzLnVuUmVhZE1lc3NhZ2VDb3VudCA6IG1lc3NhZ2VTdG9yZS5pbnN0YW5jZS5nZXRVbnJlYWRNZXNzYWdlQ291bnQ7XG5cbiAgICAgICAgbGV0IHN0YW1wID0gdW5kZWZpbmVkO1xuICAgICAgICBpZiAodG9vbGJhclN0b3JlLmluc3RhbmNlLnNlbGVjdGVkU3RhbXBJZCAhPT0gMCkge1xuICAgICAgICAgICAgc3RhbXAgPSBzdGFtcFN0b3JlLmluc3RhbmNlLmdldFN0YW1wKHRvb2xiYXJTdG9yZS5pbnN0YW5jZS5zZWxlY3RlZFN0YW1wSWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGNsYXNzTmFtZSA9IGNsYXNzTmFtZXMoXG4gICAgICAgICAgICAnZml4ZWQnLFxuICAgICAgICAgICAgeydzdXBwb3J0LWVudmlybm9tZW50JzogbG9naW5TZXNzaW9uLklTX1NVUFBPUlRfQURNSU5fTE9HSU59LFxuICAgICAgICAgICAgeyAnb2ZmbGluZSc6IHRoaXMuc2hvd09mZmxpbmVJbmRpY2F0b3IgfSxcbiAgICAgICAgICAgIHsgJ25vLWRyb3AnOiB0aGlzLnN0YXRlLmlzQW5ub3RhdGlvbkRyYXdpbmcgPT09IGZhbHNlIHx8IHRoaXMuaXNTdGFtcFBhbmVkQmV5b25kQm91bmRhcmllcyB8fCB0aGlzLnN0YXRlLmlzQWNldGF0ZUluR3JleUFyZWEgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAnZHJhd2luZyc6ICgoc3RhbXAgIT09IHVuZGVmaW5lZCAmJiBzdGFtcC5zdGFtcFR5cGUgPT09IGVudW1zLlN0YW1wVHlwZS5keW5hbWljICYmXG4gICAgICAgICAgICAgICAgICAgICh0aGlzLnN0YXRlLmlzQW5ub3RhdGlvbkRyYXdpbmcgPT09IGZhbHNlKSkgfHwgdGhpcy5zdGF0ZS5pc0FjZXRhdGVJbkdyZXlBcmVhKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHsgJ2RlbGV0aW5nLWFubm90YXRpb24nOiB0aGlzLmlzU3RhbXBQYW5lZEJleW9uZEJvdW5kYXJpZXMgfVxuICAgICAgICApO1xuXG4gICAgICAgIGxldCB0b29sVGlwZm9yT2ZmaW5lTW9kZSA9IGxvY2FsZVN0b3JlLmluc3RhbmNlLlRyYW5zbGF0ZVRleHQoJ2dlbmVyaWMubmF2aWdhdGlvbi1iYXIub2ZmbGluZS10b29sdGlwJykgK1xuICAgICAgICAgICAgKCh0aGlzLmVsYXBzZWRUaW1lIDwgMSkgPyAnMScgOiB0aGlzLmVsYXBzZWRUaW1lKSArXG4gICAgICAgICAgICBsb2NhbGVTdG9yZS5pbnN0YW5jZS5UcmFuc2xhdGVUZXh0KCdnZW5lcmljLm5hdmlnYXRpb24tYmFyLm9mZmxpbmUtdG9vbHRpcC1taW51dGVzLWFnbycpO1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8aGVhZGVyIGNsYXNzTmFtZT17Y2xhc3NOYW1lfSBvbkNsaWNrPXt0aGlzLm9uQ2xpY2tIYW5kbGVyfSB0aXRsZT17KHRoaXMuc2hvd09mZmxpbmVJbmRpY2F0b3IpID8gdG9vbFRpcGZvck9mZmluZU1vZGUgOiAnJ30gPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd3cmFwcGVyIGNsZWFyZml4JyBvbk1vdXNlT3Zlcj17dGhpcy5tb3VzZW92ZXJ9XG4gICAgICAgICAgICAgICAgICAgIG9uTW91c2VMZWF2ZT17dGhpcy5tb3VzZW92ZXJ9PlxuICAgICAgICAgICAgICAgICAgICB7dGhpcy5yZW5kZXJCcmVhZENydW1iKCl9XG4gICAgICAgICAgICAgICAgICAgIHt0aGlzLnJlbmRlckhlYWRlckNlbnRlclBvcnRpb24oKX1cbiAgICAgICAgICAgICAgICAgICAge3RoaXMucmVuZGVySGVhZGVyUmlnaHRQb3J0aW9uKHVucmVhZE1lc3NhZ2VDb3VudCl9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2JsdWUtc3RyaXAnPjwvZGl2PlxuICAgICAgICAgICAgPC9oZWFkZXI+XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogb24gY2xpY2sgaGFuZGxlclxuICAgICAqIEBwYXJhbSB7YW55fSBldmVudFxuICAgICAqL1xuICAgIHByaXZhdGUgb25DbGlja0hhbmRsZXIoZXZlbnQ6IGFueSkge1xuICAgICAgICAvKiBEZWZlY3Q6NDk1OTkgLSBzZXRpbmcgZm9jdXMgYmFjayB0byBzdWJqZWN0IG9uIG1lc3NhZ2UgY2xvc2UgZm9yIGZpeGluZyBjdXJzb3IgYW5kIG9uc2NyZWVuIGtleWJvYXJkIGRpc3BsYXlpbmcgaW4gaGVhZGVyIFxuICAgICAgICAgICBpc3N1ZSBpbiBpcGFkICovXG4gICAgICAgIGlmIChodG1sVXRpbGl0aWVzLmlzSVBhZERldmljZSAmJiBtZXNzYWdlU3RvcmUuaW5zdGFuY2UuaXNNZXNzYWdlUGFuZWxWaXNpYmxlKSB7XG4gICAgICAgICAgICBodG1sVXRpbGl0aWVzLnNldEZvY3VzVG9FbGVtZW50KCdtZXNzYWdlLXN1YmplY3QnKTtcbiAgICAgICAgICAgIGh0bWxVdGlsaXRpZXMuYmx1ckVsZW1lbnQoJ21lc3NhZ2Utc3ViamVjdCcpO1xuICAgICAgICB9XG4gICAgICAgIHN0YW1wQWN0aW9uQ3JlYXRvci5zaG93T3JIaWRlQ29tbWVudChmYWxzZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2Qgd2lsbCByZW5kZXIgdGhlIGNlbnRlciBwb3J0aW9uIG9mIEhlYWRlciBjb21wb25lbnRcbiAgICAgKiBSZXNwb25zZSBIZWFkZXI6IHJlbmRlciByZXNwb25zZSBuYXZpZ2F0aW9uXG4gICAgICovXG4gICAgcHJpdmF0ZSByZW5kZXJIZWFkZXJDZW50ZXJQb3J0aW9uKCkge1xuXG4gICAgICAgIHN3aXRjaCAodGhpcy5wcm9wcy5jb250YWluZXJQYWdlKSB7XG4gICAgICAgICAgICBjYXNlIGVudW1zLlBhZ2VDb250YWluZXJzLlJlc3BvbnNlOlxuICAgICAgICAgICAgICAgIGxldCBjdXJyZW50UmVzcG9uc2U6IG51bWJlcjtcbiAgICAgICAgICAgICAgICBsZXQgaXNOZXh0UmVzcG9uc2VBdmFpbGFibGU6IGJvb2xlYW47XG4gICAgICAgICAgICAgICAgbGV0IGlzUHJldmlvdXNSZXNwb25zZUF2YWlsYWJsZTogYm9vbGVhbjtcbiAgICAgICAgICAgICAgICBsZXQgcmVzcG9uc2VJZDogc3RyaW5nO1xuICAgICAgICAgICAgICAgIGxldCB0b3RhbFJlc3BvbnNlczogbnVtYmVyO1xuICAgICAgICAgICAgICAgIGlmIChzdGFuZGFyZGlzYXRpb25TZXR1cFN0b3JlLmluc3RhbmNlLmlzU2VsZWN0UmVzcG9uc2VzV29ya2xpc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFJlc3BvbnNlID0gc3RhbmRhcmRpc2F0aW9uU2V0dXBTdG9yZS5pbnN0YW5jZS5jYW5kaWRhdGVTY3JpcHRQb3NpdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgaXNOZXh0UmVzcG9uc2VBdmFpbGFibGUgPSBzdGFuZGFyZGlzYXRpb25TZXR1cFN0b3JlLmluc3RhbmNlLmlzTmV4dENhbmRpZGF0ZVNjcmlwdEF2YWlsYWJsZTtcbiAgICAgICAgICAgICAgICAgICAgaXNQcmV2aW91c1Jlc3BvbnNlQXZhaWxhYmxlID0gc3RhbmRhcmRpc2F0aW9uU2V0dXBTdG9yZS5pbnN0YW5jZS5pc1ByZXZpb3VzQ2FuZGlkYXRlU2NyaXB0QXZhaWxhYmxlO1xuICAgICAgICAgICAgICAgICAgICByZXNwb25zZUlkID0gc3RhbmRhcmRpc2F0aW9uU2V0dXBTdG9yZS5pbnN0YW5jZS5zZWxlY3RlZFJlc3BvbnNlSWQudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgdG90YWxSZXNwb25zZXMgPSBzdGFuZGFyZGlzYXRpb25TZXR1cFN0b3JlLmluc3RhbmNlLnRvdGFsQ2FuZGlkYXRlU2NyaXB0Q291bnQ7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtYXJrZXJPcGVyYXRpb25Nb2RlRmFjdG9yeS5vcGVyYXRpb25Nb2RlLmlzQXdhcmRpbmdNb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRSZXNwb25zZSA9IDE7XG4gICAgICAgICAgICAgICAgICAgIGlzTmV4dFJlc3BvbnNlQXZhaWxhYmxlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGlzUHJldmlvdXNSZXNwb25zZUF2YWlsYWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICByZXNwb25zZUlkID0gcmVzcG9uc2VTdG9yZS5pbnN0YW5jZS5zZWxlY3RlZERpc3BsYXlJZC50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICB0b3RhbFJlc3BvbnNlcyA9IDE7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFJlc3BvbnNlID1cbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtlck9wZXJhdGlvbk1vZGVGYWN0b3J5Lm9wZXJhdGlvbk1vZGUuZ2V0UmVzcG9uc2VQb3NpdGlvbihyZXNwb25zZVN0b3JlLmluc3RhbmNlLnNlbGVjdGVkRGlzcGxheUlkLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgICAgICBpc05leHRSZXNwb25zZUF2YWlsYWJsZSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAobWFya2VyT3BlcmF0aW9uTW9kZUZhY3Rvcnkub3BlcmF0aW9uTW9kZS5pc05leHRSZXNwb25zZUF2YWlsYWJsZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChyZXNwb25zZVN0b3JlLmluc3RhbmNlLnNlbGVjdGVkRGlzcGxheUlkLnRvU3RyaW5nKCkpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIXRlYW1NYW5hZ2VtZW50U3RvcmUuaW5zdGFuY2UuaXNSZWRpcmVjdEZyb21FeGNlcHRpb24pO1xuICAgICAgICAgICAgICAgICAgICBpc1ByZXZpb3VzUmVzcG9uc2VBdmFpbGFibGUgPVxuICAgICAgICAgICAgICAgICAgICAgICAgKG1hcmtlck9wZXJhdGlvbk1vZGVGYWN0b3J5Lm9wZXJhdGlvbk1vZGUuaXNQcmV2aW91c1Jlc3BvbnNlQXZhaWxhYmxlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKHJlc3BvbnNlU3RvcmUuaW5zdGFuY2Uuc2VsZWN0ZWREaXNwbGF5SWQudG9TdHJpbmcoKSkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAhdGVhbU1hbmFnZW1lbnRTdG9yZS5pbnN0YW5jZS5pc1JlZGlyZWN0RnJvbUV4Y2VwdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlSWQgPSAoc3RhbmRhcmRpc2F0aW9uU2V0dXBTdG9yZS5pbnN0YW5jZS5zZWxlY3RlZFN0YW5kYXJkaXNhdGlvblNldHVwV29ya0xpc3RcbiAgICAgICAgICAgICAgICAgICAgICAgID09PSBlbnVtcy5TdGFuZGFyZGlzYXRpb25TZXR1cC5TZWxlY3RSZXNwb25zZVxuICAgICAgICAgICAgICAgICAgICAgICAgJiYgc3RhbmRhcmRpc2F0aW9uU2V0dXBTdG9yZS5pbnN0YW5jZS5zZWxlY3RlZFRhYkluU2VsZWN0UmVzcG9uc2VcbiAgICAgICAgICAgICAgICAgICAgICAgID09PSBlbnVtcy5TdGFuZGFyZGlzYXRpb25TZXNzaW9uVGFiLlByZXZpb3VzU2Vzc2lvbilcbiAgICAgICAgICAgICAgICAgICAgICAgID8gc3RhbmRhcmRpc2F0aW9uU2V0dXBTdG9yZS5pbnN0YW5jZS5nZXRSZXVzYWJsYVJlc3BvbnNlU2VsZWN0ZWREaXNwbGF5SWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAocmVzcG9uc2VTdG9yZS5pbnN0YW5jZS5zZWxlY3RlZERpc3BsYXlJZC50b1N0cmluZygpKS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHJlc3BvbnNlU3RvcmUuaW5zdGFuY2Uuc2VsZWN0ZWREaXNwbGF5SWQudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgdG90YWxSZXNwb25zZXMgPSBtYXJrZXJPcGVyYXRpb25Nb2RlRmFjdG9yeS5vcGVyYXRpb25Nb2RlLmN1cnJlbnRSZXNwb25zZUNvdW50O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIElmIHRoZXJlIGlzIG5vIGRpc3BsYXkgaWQsIE5vIG5lZWQgdG8gcmVuZGVyIHRoZSBjb21wb25lbnRcbiAgICAgICAgICAgICAgICBpZiAoIWlzTmFOKGN1cnJlbnRSZXNwb25zZSkgJiYgIWlzTmFOKHJlc3BvbnNlU3RvcmUuaW5zdGFuY2Uuc2VsZWN0ZWREaXNwbGF5SWQpICYmXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlU3RvcmUuaW5zdGFuY2Uuc2VsZWN0ZWREaXNwbGF5SWQgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoPFJlc3BvbnNlTmF2aWdhdGlvbiBjdXJyZW50UmVzcG9uc2U9e2N1cnJlbnRSZXNwb25zZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlzTmV4dFJlc3BvbnNlQXZhaWxhYmxlPXtpc05leHRSZXNwb25zZUF2YWlsYWJsZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlzUHJldmlvdXNSZXNwb25zZUF2YWlsYWJsZT17aXNQcmV2aW91c1Jlc3BvbnNlQXZhaWxhYmxlfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VJZD17cmVzcG9uc2VJZH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsUmVzcG9uc2VzPXt0b3RhbFJlc3BvbnNlc31cbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbnRyZUlkPXtzdGFuZGFyZGlzYXRpb25TZXR1cFN0b3JlLmluc3RhbmNlLnN0YW5kYXJkaXNhdGlvblNldFVwU2VsZWN0ZWRDZW50cmVOb31cbiAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVDYWxsYmFjaz17bmF2aWdhdGlvbkhlbHBlci5yZXNwb25zZU5hdmlnYXRpb259XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZExhbmd1YWdlPXt0aGlzLnByb3BzLnNlbGVjdGVkTGFuZ3VhZ2V9XG4gICAgICAgICAgICAgICAgICAgICAgICByZVJlbmRlcj17dGhpcy5yZVJlbmRlclJlc3BvbnNlTmF2aWdhdGlvbn0gLz4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIGNhc2UgZW51bXMuUGFnZUNvbnRhaW5lcnMuVGVhbU1hbmFnZW1lbnQ6XG4gICAgICAgICAgICBjYXNlIGVudW1zLlBhZ2VDb250YWluZXJzLk1lc3NhZ2U6XG4gICAgICAgICAgICBjYXNlIGVudW1zLlBhZ2VDb250YWluZXJzLkxvZ2luOlxuICAgICAgICAgICAgY2FzZSBlbnVtcy5QYWdlQ29udGFpbmVycy5RaWdTZWxlY3RvcjpcbiAgICAgICAgICAgIGNhc2UgZW51bXMuUGFnZUNvbnRhaW5lcnMuV29ya0xpc3Q6XG4gICAgICAgICAgICBjYXNlIGVudW1zLlBhZ2VDb250YWluZXJzLk1hcmtpbmdDaGVja0V4YW1pbmVyc1dvcmtMaXN0OlxuICAgICAgICAgICAgY2FzZSBlbnVtcy5QYWdlQ29udGFpbmVycy5TdGFuZGFyZGlzYXRpb25TZXR1cDpcbiAgICAgICAgICAgIGNhc2UgZW51bXMuUGFnZUNvbnRhaW5lcnMuQWRtaW5TdXBwb3J0OlxuICAgICAgICAgICAgY2FzZSBlbnVtcy5QYWdlQ29udGFpbmVycy5Bd2FyZGluZzpcbiAgICAgICAgICAgICAgICByZXR1cm4gKG51bGwpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogIFRPIERPOiBBbmRyb21lZGEgd2lsbCBjb3JyZWN0IHRoaXMgbWV0aG9kIGFzIHBhcnQgb2YgUmVzcG9uc2UgaGVhZGVyIGZ1bmN0aW9uYWxpdHkgaW4gU3ByaW50IDhcbiAgICAgKi9cbiAgICBwcml2YXRlIHJlbmRlckhlYWRlclJpZ2h0UG9ydGlvbih1bnJlYWRNZXNzYWdlQ291bnQ6IG51bWJlcikge1xuICAgICAgICBsZXQgaXNXb3JrbGlzdEljb25DbGlja2FibGU6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICAgICAgbGV0IGlzV29ya2xpc3RJY29uVmlzaWJsZTogYm9vbGVhbiA9IHRydWU7XG4gICAgICAgIHRoaXMuaGFzQXdhcmRpbmdBY2Nlc3MgPSBhd2FyZGluZ1N0b3JlLmluc3RhbmNlLmhhc0F3YXJkaW5nQWNjZXNzO1xuICAgICAgICB0aGlzLmhhc1BlbmRpbmdKdWRnZW1lbnQgPSBhd2FyZGluZ1N0b3JlLmluc3RhbmNlLmhhc1BlbmRpbmdKdWRnZW1lbnQ7XG5cbiAgICAgICAgaWYgKHRoaXMucHJvcHMuY29udGFpbmVyUGFnZSA9PT0gZW51bXMuUGFnZUNvbnRhaW5lcnMuUmVzcG9uc2UgfHxcbiAgICAgICAgICAgIHRoaXMucHJvcHMuY29udGFpbmVyUGFnZSA9PT0gZW51bXMuUGFnZUNvbnRhaW5lcnMuTWVzc2FnZSB8fFxuICAgICAgICAgICAgdGhpcy5wcm9wcy5pc0luVGVhbU1hbmFnZW1lbnQpIHtcbiAgICAgICAgICAgIGlzV29ya2xpc3RJY29uQ2xpY2thYmxlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5wcm9wcy5jb250YWluZXJQYWdlID09PSBlbnVtcy5QYWdlQ29udGFpbmVycy5RaWdTZWxlY3RvciB8fFxuICAgICAgICAgICAgdGhpcy5wcm9wcy5jb250YWluZXJQYWdlID09PSBlbnVtcy5QYWdlQ29udGFpbmVycy5UZWFtTWFuYWdlbWVudCB8fFxuICAgICAgICAgICAgdGhpcy5wcm9wcy5jb250YWluZXJQYWdlID09PSBlbnVtcy5QYWdlQ29udGFpbmVycy5TdGFuZGFyZGlzYXRpb25TZXR1cCB8fFxuICAgICAgICAgICAgdGhpcy5wcm9wcy5jb250YWluZXJQYWdlID09PSBlbnVtcy5QYWdlQ29udGFpbmVycy5Bd2FyZGluZykge1xuICAgICAgICAgICAgaXNXb3JrbGlzdEljb25WaXNpYmxlID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5wcm9wcy5jb250YWluZXJQYWdlID09PSBlbnVtcy5QYWdlQ29udGFpbmVycy5BZG1pblN1cHBvcnQpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuICg8dWwgY2xhc3NOYW1lPSduYXYgc2hpZnQtcmlnaHQnIHJvbGU9J21lbnViYXInPlxuICAgICAgICAgICAge3RoaXMuaGFzQXdhcmRpbmdBY2Nlc3MgP1xuICAgICAgICAgICAgICAgIDxBd2FyZGluZ0luZGljYXRvclxuICAgICAgICAgICAgICAgICAgICBpZD0nYXdhcmRpbmdpbmRpY2F0b3InXG4gICAgICAgICAgICAgICAgICAgIGtleT0nYXdhcmRpbmdpbmRpY2F0b3InXG4gICAgICAgICAgICAgICAgICAgIGhhc0F3YXJkaW5nSnVkZ2VtZW50PXt0aGlzLmhhc1BlbmRpbmdKdWRnZW1lbnR9XG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkTGFuZ3VhZ2U9e3RoaXMucHJvcHMuc2VsZWN0ZWRMYW5ndWFnZX0gLz5cbiAgICAgICAgICAgICAgICA6IG51bGx9XG4gICAgICAgICAgICB7dGhpcy5zdGF0ZS5kaXNwbGF5SWNvbnMgPT09IHRydWUgP1xuICAgICAgICAgICAgICAgIDxNZXNzYWdlTm90aWZpY2F0aW9uSW5kaWNhdG9yXG4gICAgICAgICAgICAgICAgICAgIGlkPSdub3RpZmljYXRpb24nXG4gICAgICAgICAgICAgICAgICAgIGtleT0nbm90aWZpY2F0aW9uJ1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlTm90aWZpY2F0aW9uQ291bnQ9e3VucmVhZE1lc3NhZ2VDb3VudH1cbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRMYW5ndWFnZT17dGhpcy5wcm9wcy5zZWxlY3RlZExhbmd1YWdlfSAvPlxuICAgICAgICAgICAgICAgIDogbnVsbH1cbiAgICAgICAgICAgIHt0aGlzLnN0YXRlLmRpc3BsYXlJY29ucyA9PT0gdHJ1ZSA/XG4gICAgICAgICAgICAgICAgPE1lbnVXcmFwcGVyXG4gICAgICAgICAgICAgICAgICAgIGlkPSdtZW51d3JhcHBlcidcbiAgICAgICAgICAgICAgICAgICAga2V5PSdtZW51d3JhcHBlcl9rZXknXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkTGFuZ3VhZ2U9e3RoaXMucHJvcHMuc2VsZWN0ZWRMYW5ndWFnZX1cbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlTmF2aWdhdGlvbkNsaWNrPXtuYXZpZ2F0aW9uSGVscGVyLmhhbmRsZU5hdmlnYXRpb24uYmluZCh0aGlzLCBlbnVtcy5TYXZlQW5kTmF2aWdhdGUudG9NZW51KX0gLz5cbiAgICAgICAgICAgICAgICA6IG51bGx9XG4gICAgICAgICAgICA8VXNlckRldGFpbHNcbiAgICAgICAgICAgICAgICBzZWxlY3RlZExhbmd1YWdlPXt0aGlzLnByb3BzLnNlbGVjdGVkTGFuZ3VhZ2V9XG4gICAgICAgICAgICAgICAgaXNVc2VyT3B0aW9uTG9hZGVkPXt0aGlzLnN0YXRlLmlzVXNlck9wdGlvbkxvYWRlZH0gLz5cbiAgICAgICAgPC91bD4pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlZGlyZWN0IHRvIHRoZSBzdGFydCBwYWdlIGlmIG5vdCBhdXRoZW50aWNhdGVkXG4gICAgICovXG4gICAgcHVibGljIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcbiAgICAgICAgaWYgKCFsb2dpblNlc3Npb24uSVNfQVVUSEVOVElDQVRFRCkge1xuICAgICAgICAgICAgbmF2aWdhdGlvbkhlbHBlci5sb2FkTG9naW5QYWdlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVbnN1YnNjcmliZSBldmVudHNcbiAgICAgKi9cbiAgICBwdWJsaWMgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICAgIHVzZXJvcHRpb25TdG9yZS5pbnN0YW5jZS5yZW1vdmVMaXN0ZW5lcih1c2Vyb3B0aW9uU3RvcmUuVXNlcm9wdGlvblN0b3JlLlVTRVJfT1BUSU9OX0dFVF9FVkVOVCwgdGhpcy5yZWZyZXNoVXNlT3B0aW9uKTtcbiAgICAgICAgbWVzc2FnZVN0b3JlLmluc3RhbmNlLnJlbW92ZUxpc3RlbmVyKG1lc3NhZ2VTdG9yZS5NZXNzYWdlU3RvcmUuVVBEQVRFX05PVElGSUNBVElPTl9UUklHR0VSRURfRVZFTlQsXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZU5vdGlmaWNhdGlvbik7XG4gICAgICAgIHJlc3BvbnNlU3RvcmUuaW5zdGFuY2UucmVtb3ZlTGlzdGVuZXIocmVzcG9uc2VTdG9yZS5SZXNwb25zZVN0b3JlLlJFU1BPTlNFX0NIQU5HRUQsIHRoaXMucmVzcG9uc2VDaGFuZ2VkKTtcbiAgICAgICAgdG9vbGJhclN0b3JlLmluc3RhbmNlLnJlbW92ZUxpc3RlbmVyKHRvb2xiYXJTdG9yZS5Ub29sYmFyU3RvcmUuU1RBTVBfUEFOLCB0aGlzLm9uU3RhbXBQYW5TdGFydGVkKTtcbiAgICAgICAgdG9vbGJhclN0b3JlLmluc3RhbmNlLnJlbW92ZUxpc3RlbmVyKHRvb2xiYXJTdG9yZS5Ub29sYmFyU3RvcmUuUEFOX0VORCwgdGhpcy5vblN0YW1wUGFuRW5kKTtcbiAgICAgICAgdG9vbGJhclN0b3JlLmluc3RhbmNlLnJlbW92ZUxpc3RlbmVyKHRvb2xiYXJTdG9yZS5Ub29sYmFyU3RvcmUuUEFOX1NUQU1QX1RPX0RFTEVUSU9OX0FSRUEsIHRoaXMub25TdGFtcFBhblRvRGVsZXRlQXJlYSk7XG4gICAgICAgIG1hcmtpbmdTdG9yZS5pbnN0YW5jZS5yZW1vdmVMaXN0ZW5lcihtYXJraW5nU3RvcmUuTWFya2luZ1N0b3JlLkFOTk9UQVRJT05fRFJBVywgdGhpcy5vbkRyYXdTdGFydCk7XG4gICAgICAgIG1hcmtpbmdTdG9yZS5pbnN0YW5jZS5yZW1vdmVMaXN0ZW5lcihtYXJraW5nU3RvcmUuTWFya2luZ1N0b3JlLk5BVklHQVRJT05fVVBEQVRFRF9FVkVOVCwgdGhpcy5vbk5hdmlnYXRpb25VcGRhdGVkKTtcbiAgICAgICAgYXBwbGljYXRpb25TdG9yZS5pbnN0YW5jZS5yZW1vdmVMaXN0ZW5lcihhcHBsaWNhdGlvblN0b3JlLkFwcGxpY2F0aW9uU3RvcmUuT05MSU5FX1NUQVRVU19VUERBVEVEX0VWRU5ULCB0aGlzLm9mZmxpbmVJbmRpY2F0b3IpO1xuICAgICAgICBxaWdTdG9yZS5pbnN0YW5jZS5yZW1vdmVMaXN0ZW5lcihxaWdTdG9yZS5RaWdTdG9yZS5TSE9XX0hFQURFUl9JQ09OUywgdGhpcy5kaXNwbGF5SGVhZGVySWNvbnNPblFJR0xvYWRlZCk7XG4gICAgICAgIGlmIChodG1sVXRpbGl0aWVzLmlzSVBhZERldmljZSAmJiBodG1sVXRpbGl0aWVzLmdldFVzZXJEZXZpY2UoKS5icm93c2VyID09PSAnU2FmYXJpJykge1xuICAgICAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCB0aGlzLmJsb2NrUGluY2hUb1pvb20sIGZhbHNlKTtcbiAgICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRoaXMuYmxvY2tEb3VibGVUYXBab29tLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICAgd29ya2xpc3RTdG9yZS5pbnN0YW5jZS5yZW1vdmVMaXN0ZW5lcih3b3JrbGlzdFN0b3JlLldvcmtMaXN0U3RvcmUuV09SS0xJU1RfTUFSS0lOR19NT0RFX0NIQU5HRSwgdGhpcy5yZXNwb25zZUNoYW5nZWQpO1xuICAgICAgICByZXNwb25zZVN0b3JlLmluc3RhbmNlLnJlbW92ZUxpc3RlbmVyKHJlc3BvbnNlU3RvcmUuUmVzcG9uc2VTdG9yZS5SRVNQT05TRV9PUEVORUQsIHRoaXMucmVzcG9uc2VDaGFuZ2VkKTtcbiAgICAgICAgcWlnU3RvcmUuaW5zdGFuY2UucmVtb3ZlTGlzdGVuZXIocWlnU3RvcmUuUWlnU3RvcmUuQUNFVEFURV9JTl9HUkVZX0FSRUEsIHRoaXMuYWNldGF0ZUluR3JleUFyZWEpO1xuICAgICAgICBzdGFuZGFyZGlzYXRpb25TZXR1cFN0b3JlLmluc3RhbmNlLnJlbW92ZUxpc3RlbmVyKFxuICAgICAgICAgICAgc3RhbmRhcmRpc2F0aW9uU2V0dXBTdG9yZS5TdGFuZGFyZGlzYXRpb25TZXR1cFN0b3JlLlNUQU5EQVJESVNBVElPTl9SRVNQT05TRV9EQVRBX1VQREFURURfRVZFTlQsXG4gICAgICAgICAgICB0aGlzLm9uUmVjbGFzc2lmeVJlc3BvbnNlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIHdpbGwgYmxvY2sgdGhlIGRvdWJsZS10YXAgem9vbSBpbiBpcGFkXG4gICAgICovXG4gICAgcHJpdmF0ZSBibG9ja0RvdWJsZVRhcFpvb20gPSAoZTogYW55KTogdm9pZCA9PiB7XG4gICAgICAgIGxldCBhY3R1YWxYID0gZS5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRYO1xuICAgICAgICBsZXQgYWN0dWFsWSA9IGUuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WTtcbiAgICAgICAgbGV0IGNsaWVudFdpZHRoID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoO1xuICAgICAgICBsZXQgY2xpZW50SGVpZ2h0ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodDtcblxuICAgICAgICAvLyBBdCB0aGUgZWRnZXMgb2YgaXBhZCBvbmx5IHRoZSBzaW5nbGUgdGFwIGlzIHRyaWdnZXJlZFxuICAgICAgICAvLyBieSBpZGVudGlmeWluZyB0aGUgZWRnZXMgYW5kIGJsb2NraW5nIHRoZSBkb3VibGUgdGFwXG4gICAgICAgIGlmICgoYWN0dWFsWCA8PSAzMCB8fCBhY3R1YWxYID49IChjbGllbnRXaWR0aCAtIDMwKSB8fCBhY3R1YWxZID49IChjbGllbnRIZWlnaHQgLSAzMCkpICYmIHRoaXMuYmxvY2tEb3VibGVUYXAoYWN0dWFsWCwgYWN0dWFsWSkpIHtcbiAgICAgICAgICAgIC8vIHVuYmxvY2tpbmcgdGhlIHRhcHMgb24gc29tZSBpY29ucyAsYW5ub3Rpb25zIGFuZCBtYXJrIGJ1dHRvbnNcbiAgICAgICAgICAgIC8vIHdoaWNoIGxpZXMgYXQgdGhlIGVkZ2VzIG9mIGlwYWRcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBsZXQgY3VycmVudFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgICAgbGV0IHRhcExlbmd0aCA9IGN1cnJlbnRUaW1lIC0gdGhpcy5sYXN0VGFwO1xuXG4gICAgICAgIC8vIGRpc2FibGUgZG91YmxlIHRhcCBiYXNlZCBvbiBpbnRlcnZhbCBiZXR3ZWVuIHR3byB0YXBzXG4gICAgICAgIGlmICh0YXBMZW5ndGggPCA1MDAgJiYgdGFwTGVuZ3RoID4gMCAmJiB0aGlzLmJsb2NrRG91YmxlVGFwKGFjdHVhbFgsIGFjdHVhbFkpKSB7XG4gICAgICAgICAgICAvLyB1bmJsb2NraW5nIHRoZSB0YXBzIG9uIHNvbWUgaWNvbnMgLGFubm90aW9ucyBhbmQgbWFyayBidXR0b25zXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmxhc3RUYXAgPSBjdXJyZW50VGltZTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogIFRoaXMgbWV0aG9kIHdpbGwgY2hlY2sgd2hldGhlciB3ZSB3YW50IHRvIGJsb2NrIGRvdWJsZSB0YXAgb3Igbm90IGJhc2VkIG9uIHRoZSBjbGFzcyBsaXN0IHByb3ZpZGVkLlxuICAgICAqL1xuICAgIHByaXZhdGUgYmxvY2tEb3VibGVUYXAgPSAoYWN0dWFsWDogbnVtYmVyLCBhY3R1YWxZOiBudW1iZXIpOiBib29sZWFuID0+IHtcbiAgICAgICAgbGV0IGVsZSA9IGh0bWxVdGlsaXRpZXMuZ2V0RWxlbWVudEZyb21Qb3NpdGlvbihhY3R1YWxYLCBhY3R1YWxZKTtcbiAgICAgICAgbGV0IGlzSW5WYWxpZDogYm9vbGVhbiA9IGZhbHNlO1xuICAgICAgICBpZiAoZWxlKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY2xhc3Nlc1RvUHJldmVudEJsb2NraW5nLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IGNsYXNzTmFtZSA9IHRoaXMuY2xhc3Nlc1RvUHJldmVudEJsb2NraW5nW2ldO1xuICAgICAgICAgICAgICAgIGlzSW5WYWxpZCA9ICghKGVsZS5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKSkgJiYgJCgnLicgKyBjbGFzc05hbWUpLmhhcyhlbGUpLmxlbmd0aCA9PT0gMCk7XG4gICAgICAgICAgICAgICAgaWYgKCFpc0luVmFsaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gaXNJblZhbGlkO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgd2lsbCBibG9jayB0aGUgcGluY2gtdG8tem9vbSBpbiBpcGFkXG4gICAgICovXG4gICAgcHJpdmF0ZSBibG9ja1BpbmNoVG9ab29tID0gKGU6IGFueSk6IHZvaWQgPT4ge1xuICAgICAgICBpZiAoZS50b3VjaGVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBwcml2YXRlIHJlZnJlc2hVc2VPcHRpb24gPSAoKTogdm9pZCA9PiB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgaXNVc2VyT3B0aW9uTG9hZGVkOiB0cnVlXG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIHdpbGwgcmUtcmVuZGVyIHRoZSBoZWFkZXIgY29tcG9uZW50XG4gICAgICovXG4gICAgcHJpdmF0ZSByZVJlbmRlciA9ICgpOiB2b2lkID0+IHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICByZW5kZXJlZE9uOiBEYXRlLm5vdygpXG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIHdpbGwgc2hvdyB0aGUgaGVhZGVyIGljb25zIGFmdGVyIFFJR3MgbG9hZGVkXG4gICAgICovXG4gICAgcHJpdmF0ZSBkaXNwbGF5SGVhZGVySWNvbnNPblFJR0xvYWRlZCA9IChzaG93SWNvbnM6IGJvb2xlYW4gPSB0cnVlKTogdm9pZCA9PiB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgZGlzcGxheUljb25zOiBzaG93SWNvbnNcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIENvbXBvbmVudCBkaWQgbW91bnRcbiAgICAgKi9cbiAgICBwdWJsaWMgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgIGxldCB1c2VDYWNoZSA9IHVzZXJvcHRpb25TdG9yZS5pbnN0YW5jZS5pc0xvYWRlZDtcbiAgICAgICAgLyoqIEdldHRpbmcgdGhlIHVzZXIgb3B0aW9ucyAqL1xuICAgICAgICB1c2VyT3B0aW9uQWN0aW9uQ3JlYXRvci5nZXRVc2VyT3B0aW9ucyh1c2VDYWNoZSk7XG4gICAgICAgIHVzZXJvcHRpb25TdG9yZS5pbnN0YW5jZS5hZGRMaXN0ZW5lcih1c2Vyb3B0aW9uU3RvcmUuVXNlcm9wdGlvblN0b3JlLlVTRVJfT1BUSU9OX0dFVF9FVkVOVCwgdGhpcy5yZWZyZXNoVXNlT3B0aW9uKTtcblxuICAgICAgICBtZXNzYWdlU3RvcmUuaW5zdGFuY2UuYWRkTGlzdGVuZXIobWVzc2FnZVN0b3JlLk1lc3NhZ2VTdG9yZS5VUERBVEVfTk9USUZJQ0FUSU9OX1RSSUdHRVJFRF9FVkVOVCxcbiAgICAgICAgICAgIHRoaXMudXBkYXRlTm90aWZpY2F0aW9uKTtcbiAgICAgICAgcmVzcG9uc2VTdG9yZS5pbnN0YW5jZS5hZGRMaXN0ZW5lcihyZXNwb25zZVN0b3JlLlJlc3BvbnNlU3RvcmUuUkVTUE9OU0VfQ0hBTkdFRCwgdGhpcy5yZXNwb25zZUNoYW5nZWQpO1xuICAgICAgICB0b29sYmFyU3RvcmUuaW5zdGFuY2UuYWRkTGlzdGVuZXIodG9vbGJhclN0b3JlLlRvb2xiYXJTdG9yZS5TVEFNUF9QQU4sIHRoaXMub25TdGFtcFBhblN0YXJ0ZWQpO1xuICAgICAgICB0b29sYmFyU3RvcmUuaW5zdGFuY2UuYWRkTGlzdGVuZXIodG9vbGJhclN0b3JlLlRvb2xiYXJTdG9yZS5QQU5fRU5ELCB0aGlzLm9uU3RhbXBQYW5FbmQpO1xuICAgICAgICB0b29sYmFyU3RvcmUuaW5zdGFuY2UuYWRkTGlzdGVuZXIodG9vbGJhclN0b3JlLlRvb2xiYXJTdG9yZS5QQU5fU1RBTVBfVE9fREVMRVRJT05fQVJFQSwgdGhpcy5vblN0YW1wUGFuVG9EZWxldGVBcmVhKTtcbiAgICAgICAgbWFya2luZ1N0b3JlLmluc3RhbmNlLmFkZExpc3RlbmVyKG1hcmtpbmdTdG9yZS5NYXJraW5nU3RvcmUuQU5OT1RBVElPTl9EUkFXLCB0aGlzLm9uRHJhd1N0YXJ0KTtcbiAgICAgICAgbWFya2luZ1N0b3JlLmluc3RhbmNlLmFkZExpc3RlbmVyKG1hcmtpbmdTdG9yZS5NYXJraW5nU3RvcmUuTkFWSUdBVElPTl9VUERBVEVEX0VWRU5ULCB0aGlzLm9uTmF2aWdhdGlvblVwZGF0ZWQpO1xuICAgICAgICBhcHBsaWNhdGlvblN0b3JlLmluc3RhbmNlLmFkZExpc3RlbmVyKGFwcGxpY2F0aW9uU3RvcmUuQXBwbGljYXRpb25TdG9yZS5PTkxJTkVfU1RBVFVTX1VQREFURURfRVZFTlQsIHRoaXMub2ZmbGluZUluZGljYXRvcik7XG4gICAgICAgIHFpZ1N0b3JlLmluc3RhbmNlLmFkZExpc3RlbmVyKHFpZ1N0b3JlLlFpZ1N0b3JlLlNIT1dfSEVBREVSX0lDT05TLCB0aGlzLmRpc3BsYXlIZWFkZXJJY29uc09uUUlHTG9hZGVkKTtcbiAgICAgICAgaWYgKGh0bWxVdGlsaXRpZXMuaXNJUGFkRGV2aWNlICYmIGh0bWxVdGlsaXRpZXMuZ2V0VXNlckRldmljZSgpLmJyb3dzZXIgPT09ICdTYWZhcmknKSB7XG4gICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHRoaXMuYmxvY2tQaW5jaFRvWm9vbSwgZmFsc2UpO1xuICAgICAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5ibG9ja0RvdWJsZVRhcFpvb20sIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICB3b3JrbGlzdFN0b3JlLmluc3RhbmNlLmFkZExpc3RlbmVyKHdvcmtsaXN0U3RvcmUuV29ya0xpc3RTdG9yZS5XT1JLTElTVF9NQVJLSU5HX01PREVfQ0hBTkdFLCB0aGlzLnJlc3BvbnNlQ2hhbmdlZCk7XG4gICAgICAgIHJlc3BvbnNlU3RvcmUuaW5zdGFuY2UuYWRkTGlzdGVuZXIocmVzcG9uc2VTdG9yZS5SZXNwb25zZVN0b3JlLlJFU1BPTlNFX09QRU5FRCwgdGhpcy5yZXNwb25zZUNoYW5nZWQpO1xuICAgICAgICBxaWdTdG9yZS5pbnN0YW5jZS5hZGRMaXN0ZW5lcihxaWdTdG9yZS5RaWdTdG9yZS5BQ0VUQVRFX0lOX0dSRVlfQVJFQSwgdGhpcy5hY2V0YXRlSW5HcmV5QXJlYSk7XG4gICAgICAgIGF3YXJkaW5nU3RvcmUuaW5zdGFuY2UuYWRkTGlzdGVuZXIoYXdhcmRpbmdTdG9yZS5Bd2FyZGluZ1N0b3JlLkFXQVJESU5HX0FDQ0VTU19ERVRBSUxTLCB0aGlzLmF3YXJkaW5nQWNjZXNzRGV0YWlsc0ZldGNoZWQpO1xuICAgICAgICBzdGFuZGFyZGlzYXRpb25TZXR1cFN0b3JlLmluc3RhbmNlLmFkZExpc3RlbmVyKFxuICAgICAgICAgICAgc3RhbmRhcmRpc2F0aW9uU2V0dXBTdG9yZS5TdGFuZGFyZGlzYXRpb25TZXR1cFN0b3JlLlNUQU5EQVJESVNBVElPTl9SRVNQT05TRV9EQVRBX1VQREFURURfRVZFTlQsXG4gICAgICAgICAgICB0aGlzLm9uUmVjbGFzc2lmeVJlc3BvbnNlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb21wb25lbnQgd2lsbCByZWNlaXZlIHByb3BzXG4gICAgICovXG4gICAgcHVibGljIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzOiBQcm9wcykge1xuXG4gICAgICAgIGlmICh0aGlzLnByb3BzICE9PSBuZXh0UHJvcHMpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgIHJlbmRlcmVkT246IG5leHRQcm9wcy5yZW5kZXJlZE9uXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBub3RpZmljYXRpb24gaW5mb1xuICAgICAqL1xuICAgIHByaXZhdGUgdXBkYXRlTm90aWZpY2F0aW9uID0gKCk6IHZvaWQgPT4ge1xuICAgICAgICB0aGlzLnJlUmVuZGVyKCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSByZXNwb25zZSBuYXZpZ2F0aW9uIGluZm9cbiAgICAgKi9cbiAgICBwcml2YXRlIHJlc3BvbnNlQ2hhbmdlZCA9ICgpOiB2b2lkID0+IHtcbiAgICAgICAgdGhpcy5yZVJlbmRlcigpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBJbnZva2VkIG9uIHRoZSBzdGFydGluZyBvZiBzdGFtcCBwYW5cbiAgICAgKi9cbiAgICBwcml2YXRlIG9uU3RhbXBQYW5TdGFydGVkID0gKCk6IHZvaWQgPT4ge1xuICAgICAgICB0aGlzLnJlUmVuZGVyKCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEludm9rZWQgb24gdGhlIGVuZGluZyB0aGUgc3RhbXAgcGFuXG4gICAgICovXG4gICAgcHJpdmF0ZSBvblN0YW1wUGFuRW5kID0gKCk6IHZvaWQgPT4ge1xuICAgICAgICB0aGlzLnJlUmVuZGVyKCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEludm9rZWQgb24gdGhlIGF3YXJkaW5nIGFjY2VzcyBkZXRhaWxzIGZldGNoZWRcbiAgICAgKi9cbiAgICBwcml2YXRlIGF3YXJkaW5nQWNjZXNzRGV0YWlsc0ZldGNoZWQgPSAoKTogdm9pZCA9PiB7XG4gICAgICAgIHRoaXMucmVSZW5kZXIoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJbnZva2VkIG9uIHN0YW1wIHBhbiB0byBhbiBhcmVhIHdoZXJlIGRlbGV0aW9uIG9mIHRoZSBhbm5vdGF0aW9uIGRyYWdnZWQgaXMgcG9zc2libGVcbiAgICAgKi9cbiAgICBwcml2YXRlIG9uU3RhbXBQYW5Ub0RlbGV0ZUFyZWEgPSAoY2FuRGVsZXRlOiBib29sZWFuKTogdm9pZCA9PiB7XG4gICAgICAgIHRoaXMuaXNTdGFtcFBhbmVkQmV5b25kQm91bmRhcmllcyA9IGNhbkRlbGV0ZTtcbiAgICAgICAgaWYgKHRoaXMuaXNTdGFtcFBhbmVkQmV5b25kQm91bmRhcmllcykge1xuICAgICAgICAgICAgcmVzcG9uc2VBY3Rpb25DcmVhdG9yLnNldE1vdXNlUG9zaXRpb24oLTEsIC0xKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlUmVuZGVyKCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIHVwZGF0ZXMgdGhlIG9mZmxpbmUgaW5kaWNhdG9yIGluZm8uXG4gICAgICovXG4gICAgcHJpdmF0ZSBvZmZsaW5lSW5kaWNhdG9yID0gKCk6IHZvaWQgPT4ge1xuICAgICAgICBpZiAoIWFwcGxpY2F0aW9uU3RvcmUuaW5zdGFuY2UuaXNPbmxpbmUpIHtcbiAgICAgICAgICAgIHRoaXMuc2hvd09mZmxpbmVJbmRpY2F0b3IgPSB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zaG93T2ZmbGluZUluZGljYXRvciA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgLyogTG9nZ2luZyBldmVudCBpbiBnb29nbGUgYW5hbHl0aWNzIG9yIGFwcGxpY2F0aW9uIGluc2lnaHRzIGJhc2VkIG9uIHRoZSBjb25maWd1cmF0aW9uICovXG4gICAgICAgIG5ldyBhdWRpdExvZ2dpbmdIZWxwZXIoKS5sb2dIZWxwZXIuXG4gICAgICAgICAgICBsb2dFdmVudE9uQXBwbGljYXRpb25TdGF0dXNDaGFuZ2UoXG4gICAgICAgICAgICBhcHBsaWNhdGlvblN0b3JlLmluc3RhbmNlLmlzT25saW5lID9cbiAgICAgICAgICAgICAgICAnQXBwbGljYXRpb24gT25saW5lJyA6XG4gICAgICAgICAgICAgICAgJ0FwcGxpY2F0aW9uIE9mZmxpbmUnKTtcblxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIHJlbmRlcmVkT246IERhdGUubm93KClcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIE1ldGhvZCB0byBiZSBpbnZva2VkIG9uY2UgdGhlIGFubm90YXRpb24gc3RhcnRzIGRyYXdpbmdcbiAgICAgKi9cbiAgICBwcml2YXRlIG9uRHJhd1N0YXJ0ID0gKGlzQW5ub3RhdGlvbkRyYXdpbmc6IGJvb2xlYW4pOiB2b2lkID0+IHtcbiAgICAgICAgLy8gcmUtcmVuZGVyIG9ubHkgaWYgdGhlcmUgaXMgYSBjaGFuZ2UgaW4gaXNBbm5vdGF0aW9uRHJhd2luZyBhcyB0aGlzIGhhcHBlbnMgb24gbW91c2Vtb3ZlLlxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5pc0Fubm90YXRpb25EcmF3aW5nICE9PSBpc0Fubm90YXRpb25EcmF3aW5nKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICBpc0Fubm90YXRpb25EcmF3aW5nOiBpc0Fubm90YXRpb25EcmF3aW5nLFxuICAgICAgICAgICAgICAgIHJlbmRlcmVkT246IERhdGUubm93KClcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIE5hdmlnYXRlIHRvIHBhcnRpY3VsYXIgcGFnZSBjb250YWluZXJcbiAgICAgKi9cbiAgICBwcml2YXRlIG9uTmF2aWdhdGlvblVwZGF0ZWQgPSAobmF2aWdhdGVUbzogZW51bXMuU2F2ZUFuZE5hdmlnYXRlKTogdm9pZCA9PiB7XG4gICAgICAgIC8qKiBuYXZpZ2F0aW5nIGZyb20gYSBjbG9zZWQgcmVzcG9uc2UgZG9lc24ndCByZXF1aXJlIHRvIGNhbGwgc2F2ZSBtYXJrcyAqL1xuICAgICAgICBpZiAobmF2aWdhdGVUbyAhPT0gZW51bXMuU2F2ZUFuZE5hdmlnYXRlLnRvTWVudSkge1xuICAgICAgICAgICAgd29ya2xpc3RBY3Rpb25DcmVhdG9yLnJlc3BvbnNlQ2xvc2VkKHRydWUpO1xuICAgICAgICB9XG5cblx0XHQvKiogSWYgd2UgYXJlIG5hdmlnYXRpbmcgdG8gaW5ib3ggZGlyZWN0bHkgbmF2aWdhdGUgdG8gdGhlIG1lc3NhZ2UgcGFnZSAqL1xuICAgICAgICBpZiAobmF2aWdhdGVUbyA9PT0gZW51bXMuU2F2ZUFuZE5hdmlnYXRlLnRvSW5ib3hNZXNzYWdlUGFnZSkge1xuICAgICAgICAgICAgbmF2aWdhdGlvbkhlbHBlci5sb2FkTWVzc2FnZVBhZ2UoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIG5hdmlnYXRpb25IZWxwZXIubG9hZENvbnRhaW5lcklmTmVlZGVkKGVudW1zLlBhZ2VDb250YWluZXJzLlJlc3BvbnNlLFxuICAgICAgICAgICAgZW51bXMuU2F2ZU1hcmtzQW5kQW5ub3RhdGlvbnNQcm9jZXNzaW5nVHJpZ2dlclBvaW50LkNsb3NlUmVzcG9uc2UpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBNZXRob2QgdG8gZGV0ZWN0IG1vdXNlICBvdmVyXG4gICAgICogQHBhcmFtIGV2ZW50XG4gICAgICovXG4gICAgcHJpdmF0ZSBtb3VzZW92ZXIoZXZlbnQ6IGFueSkge1xuICAgICAgICBpZiAoIWFwcGxpY2F0aW9uU3RvcmUuaW5zdGFuY2UuaXNPbmxpbmUpIHtcbiAgICAgICAgICAgIC8vQ2FsY3VsYXRlcyB0aGUgbnVtYmVyIG9mIG1pbnV0ZXMgdGhhdCBoYXZlIGVsYXBzZWQgc2luY2UgQXNzZXNzb3IgMyBmaXJzdCBkZXRlY3RlZCBhcyBvZmZsaW5lLlxuICAgICAgICAgICAgdGhpcy5lbGFwc2VkVGltZSA9IE1hdGgucm91bmQoKChEYXRlLm5vdygpIC0gYXBwbGljYXRpb25TdG9yZS5pbnN0YW5jZS5lbGFwc2VkVGltZSkgLyAxMDAwKSAvIDYwKTtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyByZW5kZXJlZE9uOiBEYXRlLm5vdygpIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTmF2aWdhdGUgdG8gUWlnU2VsZWN0b3Igd2hpbGUgY2xpY2tpbmcgb24gTG9nb1xuICAgICAqL1xuICAgIHByaXZhdGUgbmF2aWdhdGVUb1FpZ1NlbGVjdG9yKCkge1xuXG4gICAgICAgIGxldCBoYXNRaWdEYXRhOiBib29sZWFuID0gcWlnU3RvcmUuaW5zdGFuY2UuZ2V0T3ZlcnZpZXdEYXRhID9cbiAgICAgICAgICAgIHFpZ1N0b3JlLmluc3RhbmNlLmdldE92ZXJ2aWV3RGF0YS5xaWdTdW1tYXJ5LmNvdW50KCkgPiAwIDogdW5kZWZpbmVkO1xuXG4gICAgICAgIC8vIGlmIHRoZSByZW1lbWJlciBxaWcgaXMgYWN0aXZlIHRoZW4gd2hpbGUgbmF2aWdhdGluZyB0byBxaWdzZWxlY3RvclxuICAgICAgICAvLyBmcm9tIHdvcmtsaXN0IHRoZW4gdGhlIHFpZ2RhdGEgd2lsbCBiZSB1bmRlZmluZWQsIHNvIGl0IGl0IGlzIHVuZGVmaW5lZFxuICAgICAgICAvLyB3ZSBuZWVkIHRvIGdldCB0aGUgcWlnIGxpc3QgZGV0YWlscyB0byBkaXNwbGF5IGl0XG4gICAgICAgIGlmICghaGFzUWlnRGF0YSkge1xuICAgICAgICAgICAgcWlnQWN0aW9uQ3JlYXRvci5nZXRRSUdTZWxlY3RvckRhdGEoMCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBzZXQgdGhlIG1hcmtlciBvcGVyYXRpb24gbW9kZSBhcyBNYXJraW5nXG4gICAgICAgIHVzZXJJbmZvQWN0aW9uQ3JlYXRvci5jaGFuZ2VPcGVyYXRpb25Nb2RlKGVudW1zLk1hcmtlck9wZXJhdGlvbk1vZGUuTWFya2luZyk7XG4gICAgICAgIG5hdmlnYXRpb25IZWxwZXIubG9hZFFpZ1NlbGVjdG9yKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2Qgd2lsbCByZW5kZXIgdGhlIEJyZWFkIENydW1iIGNvbXBvbmVudFxuICAgICAqL1xuICAgIHByaXZhdGUgcmVuZGVyQnJlYWRDcnVtYigpIHtcbiAgICAgICAgcmV0dXJuICg8QnJlYWRDcnVtYlxuICAgICAgICAgICAgaWQ9eydCcmVhZENydW1iQ29tcG9uZW50J31cbiAgICAgICAgICAgIGtleT17J2tleV9CcmVhZENydW1iQ29tcG9uZW50J31cbiAgICAgICAgICAgIGNvbnRhaW5lclBhZ2U9e3RoaXMucHJvcHMuY29udGFpbmVyUGFnZX1cbiAgICAgICAgICAgIHNlbGVjdGVkTGFuZ3VhZ2U9e3RoaXMucHJvcHMuc2VsZWN0ZWRMYW5ndWFnZX1cbiAgICAgICAgICAgIHJlbmRlcmVkT249e3RoaXMucHJvcHMucmVuZGVyZWRPbn1cbiAgICAgICAgICAgIGV4YW1pbmVyTmFtZT17dGhpcy5wcm9wcy5leGFtaW5lck5hbWV9IC8+KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBmaXJlZCB3aGVuIGFjZXRhdGUgaXMgbW92ZWQgdG8gZ3JleSBhcmVhXG4gICAgICovXG4gICAgcHJpdmF0ZSBhY2V0YXRlSW5HcmV5QXJlYSA9IChpc0luR3JleUFyZWE6IGJvb2xlYW4pOiB2b2lkID0+IHtcbiAgICAgICAgLy8gcmVyZW5kZXIgd2hlbiB0aGVyZSBpcyBhbnkgY2hhbmdlIGluIGlzSW5HcmV5QXJlYVxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIGlzQWNldGF0ZUluR3JleUFyZWE6IGlzSW5HcmV5QXJlYSxcbiAgICAgICAgICAgIHJlbmRlcmVkT246IERhdGUubm93KClcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEludm9rZWQgb24gcmVjbGFzc2lmeWluZyBhIHJlc3BvbmUgdG8gcmVuZGVyIGhlYWRlciBhbmQgcmVzcG9uc2UgbmF2aWdhdGlvblxuICAgICAqL1xuICAgIHByaXZhdGUgb25SZWNsYXNzaWZ5UmVzcG9uc2UgPSAoaXNUb3RhbE1hcmtzVmlld1NlbGVjdGVkOiBib29sZWFuLFxuICAgICAgICBzZWxlY3RlZFN0YW5kYXJkaXNhdGlvblNldHVwV29ya0xpc3Q6IGVudW1zLlN0YW5kYXJkaXNhdGlvblNldHVwLCBkb01hcmtOb3c6IGJvb2xlYW4gPSBmYWxzZSk6IHZvaWQgPT4ge1xuICAgICAgICBpZiAoc2VsZWN0ZWRTdGFuZGFyZGlzYXRpb25TZXR1cFdvcmtMaXN0ID09PSBlbnVtcy5TdGFuZGFyZGlzYXRpb25TZXR1cC5DbGFzc2lmaWVkUmVzcG9uc2UpIHtcbiAgICAgICAgICAgIHRoaXMucmVSZW5kZXJSZXNwb25zZU5hdmlnYXRpb24gPSAhdGhpcy5yZVJlbmRlclJlc3BvbnNlTmF2aWdhdGlvbjtcbiAgICAgICAgICAgIHRoaXMucmVSZW5kZXIoKTtcbiAgICAgICAgfVxuICAgIH07XG59XG5leHBvcnQgPSBIZWFkZXI7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9zb3VyY2UtbWFwLWxvYWRlciEuL3NyYy9jb21wb25lbnRzL2hlYWRlci50c3giXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUF5QkE7O0FBRUE7QUFDQTtBQUFBO0FBc0NBOzs7O0FBSUE7QUFDQTtBQUFBO0FBekNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUE4T0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQThDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBK0NBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBdmdCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBTUE7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFFQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7O0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUlBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBbUZBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7O0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXNHQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFPQTtBQXVCQTtBQUFBO0FBQ0E7O0EiLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),

/***/ 338:
/* no static exports found */
/* all exports used */
/*!******************************************************************!*\
  !*** ./src/components/utility/multioptionconfirmationdialog.tsx ***!
  \******************************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n/*\r\n  React component for Confirmation Popup\r\n*/\r\n/* tslint:disable:no-unused-variable */\r\nvar React = __webpack_require__(/*! react */ 0);\r\n/* tslint:disable:no-unused-variable */\r\nvar classNames = __webpack_require__(/*! classnames */ 39);\r\nvar pureRenderComponent = __webpack_require__(/*! ../base/purerendercomponent */ 227);\r\nvar moduleKeyHandler = __webpack_require__(/*! ../../utility/generic/modulekeyhandler */ 323);\r\nvar modulekeys = __webpack_require__(/*! ../../utility/generic/modulekeys */ 318);\r\nvar keyDownHelper = __webpack_require__(/*! ../../utility/generic/keydownhelper */ 258);\r\nvar enums = __webpack_require__(/*! ./enums */ 225);\r\nvar controlsEnum = { none: 0, cancel: 1, no: 2, yes: 3 };\r\n/**\r\n * React component class for Header for Authorized pages\r\n */\r\nvar MultiOptionConfirmationDialog = /** @class */ (function (_super) {\r\n    __extends(MultiOptionConfirmationDialog, _super);\r\n    /**\r\n     * @constructor\r\n     */\r\n    function MultiOptionConfirmationDialog(props) {\r\n        var _this = _super.call(this, props, null) || this;\r\n        _this.focusedItem = controlsEnum.none;\r\n        _this.keyHandler = _this.keyHandler.bind(_this);\r\n        _this.onCancelClick = _this.onCancelClick.bind(_this);\r\n        _this.onPopupNoClick = _this.onPopupNoClick.bind(_this);\r\n        _this.onYesClick = _this.onYesClick.bind(_this);\r\n        _this.onNoClick = _this.onNoClick.bind(_this);\r\n        return _this;\r\n    }\r\n    /**\r\n     * Render method\r\n     */\r\n    MultiOptionConfirmationDialog.prototype.render = function () {\r\n        if (this.props.displayPopup) {\r\n            if (this.props.isKeyBoardSupportEnabled) {\r\n                var keyDownHandler = new moduleKeyHandler(modulekeys.POPUP_KEY_DOWN, enums.Priority.Second, true, this.keyHandler, enums.KeyMode.down);\r\n                keyDownHelper.instance.mountKeyDownHandler(keyDownHandler);\r\n                var keyPressHandler = new moduleKeyHandler(modulekeys.POPUP_KEY_PRESS, enums.Priority.Second, true, this.keyHandler, enums.KeyMode.press);\r\n                keyDownHelper.instance.mountKeyPressHandler(keyPressHandler);\r\n            }\r\n            var prefix = void 0;\r\n            switch (this.props.popupType) {\r\n                case enums.PopUpType.AtypicalSearch:\r\n                    prefix = 'atypicalSearch';\r\n                    break;\r\n                case enums.PopUpType.SelectToMarkAsProvisional:\r\n                    prefix = 'selectToMark';\r\n                    break;\r\n                case enums.PopUpType.ReclassifyMultiOption:\r\n                    prefix = 'ReclassifyMultiOption';\r\n                    break;\r\n                case enums.PopUpType.ShareResponse:\r\n                    prefix = 'shareResponse';\r\n                    break;\r\n                case enums.PopUpType.ReuseRigAction:\r\n                    prefix = 'reuseRig';\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n            var noButtonEl = void 0;\r\n            if (this.props.displayNoButton) {\r\n                noButtonEl = (React.createElement(\"button\", { autoFocus: false, onClick: this.onNoClick, id: 'popup_' + prefix + 'Messge_move_to_worklist_button', className: 'button rounded', ref: 'noButton' }, this.props.buttonNoText));\r\n            }\r\n            return (React.createElement(\"div\", { className: classNames('popup popup-overlay close-button popup-open open', enums.getEnumString(enums.PopupSize, this.props.popupSize).toLowerCase()), id: this.id, role: 'dialog', \"aria-labelledby\": 'popup42Title', \"aria-describedby\": 'popup42Desc', onClick: this.onPopupNoClick },\r\n                React.createElement(\"div\", { className: 'popup-wrap', onClick: this.onPopupClick },\r\n                    React.createElement(\"div\", { className: 'popup-header bold-header-txt' },\r\n                        React.createElement(\"h4\", { id: 'popup42Title' }, this.props.header)),\r\n                    React.createElement(\"div\", { className: 'popup-content content-with-radio-btn', id: 'popup42Desc', key: 'popup14Desc' },\r\n                        React.createElement(\"p\", null, this.props.content)),\r\n                    React.createElement(\"div\", { className: 'popup-footer text-right' },\r\n                        React.createElement(\"button\", { onClick: this.onCancelClick, id: 'popup_' + prefix + 'Messge_cancel_button', ref: 'cancelButton', className: 'button rounded close-button' }, this.props.buttonCancelText),\r\n                        noButtonEl,\r\n                        React.createElement(\"button\", { autoFocus: true, onClick: this.onYesClick, id: 'popup_' + prefix + 'Messge_mark_now_button', className: 'button primary rounded', ref: 'yesButton', disabled: this.props.isClassifyResponseOkButtonDisabled }, this.props.buttonYesText)))));\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    };\r\n    /**\r\n     * This function gets invoked when the component is about to be mounted\r\n     */\r\n    MultiOptionConfirmationDialog.prototype.componentWillUnmount = function () {\r\n        if (this.props.isKeyBoardSupportEnabled) {\r\n            // Unmount the event to give others the priority\r\n            keyDownHelper.instance.unmountKeyHandler(modulekeys.POPUP_KEY_DOWN);\r\n            // Unmount the event to give others the priority\r\n            keyDownHelper.instance.unmountKeyHandler(modulekeys.POPUP_KEY_PRESS);\r\n        }\r\n    };\r\n    /**\r\n     * Event fired on clicking 'No'\r\n     * @param evnt\r\n     */\r\n    MultiOptionConfirmationDialog.prototype.onCancelClick = function (evnt) {\r\n        if (this.props.isKeyBoardSupportEnabled) {\r\n            // Unmount the event to give others the priority\r\n            keyDownHelper.instance.unmountKeyHandler(modulekeys.POPUP_KEY_DOWN);\r\n            // Unmount the event to give others the priority\r\n            keyDownHelper.instance.unmountKeyHandler(modulekeys.POPUP_KEY_PRESS);\r\n        }\r\n        /** Should be true and rerender once the user changed (turn on) the ask on logout from panel and logging out */\r\n        this.setState({ isAskOnLogOutChecked: true });\r\n        this.props.onCancelClick();\r\n    };\r\n    /**\r\n     * Event fired on clicking 'Yes'\r\n     * @param evnt\r\n     */\r\n    MultiOptionConfirmationDialog.prototype.onNoClick = function (evnt) {\r\n        if (this.props.isKeyBoardSupportEnabled) {\r\n            // Unmount the event to give others the priority\r\n            keyDownHelper.instance.unmountKeyHandler(modulekeys.POPUP_KEY_DOWN);\r\n            // Unmount the event to give others the priority\r\n            keyDownHelper.instance.unmountKeyHandler(modulekeys.POPUP_KEY_PRESS);\r\n        }\r\n        this.props.onNoClick();\r\n    };\r\n    /**\r\n     * Event fired on clicking 'MarkNow'\r\n     * @param evnt\r\n     */\r\n    MultiOptionConfirmationDialog.prototype.onYesClick = function (evnt) {\r\n        if (this.props.isKeyBoardSupportEnabled) {\r\n            // Unmount the event to give others the priority\r\n            keyDownHelper.instance.unmountKeyHandler(modulekeys.POPUP_KEY_DOWN);\r\n            // Unmount the event to give others the priority\r\n            keyDownHelper.instance.unmountKeyHandler(modulekeys.POPUP_KEY_PRESS);\r\n        }\r\n        this.props.onYesClick();\r\n    };\r\n    /**\r\n     * Event fired on clicking popup\r\n     * @param evnt\r\n     */\r\n    MultiOptionConfirmationDialog.prototype.onPopupClick = function (evnt) {\r\n        evnt.stopPropagation();\r\n        return false;\r\n    };\r\n    /**\r\n     * Event fired on clicking 'No' of popup\r\n     * @param evnt\r\n     */\r\n    MultiOptionConfirmationDialog.prototype.onPopupNoClick = function (evnt) {\r\n        this.onPopupClick(evnt);\r\n    };\r\n    /**\r\n     * Handle keydown.\r\n     * @param {KeyboardEvent} event\r\n     * @returns\r\n     */\r\n    MultiOptionConfirmationDialog.prototype.keyHandler = function (event) {\r\n        var key = event.keyCode || event.charCode;\r\n        // Handling the tab key for toggling the yes and no button focus.\r\n        if (key === enums.KeyCode.tab) {\r\n            switch (this.focusedItem) {\r\n                case controlsEnum.cancel:\r\n                    this.refs.noButton.focus();\r\n                    this.focusedItem = controlsEnum.no;\r\n                    break;\r\n                case controlsEnum.no:\r\n                    this.refs.yesButton.focus();\r\n                    this.focusedItem = controlsEnum.yes;\r\n                    break;\r\n                case controlsEnum.yes:\r\n                    this.refs.cancelButton.focus();\r\n                    this.focusedItem = controlsEnum.cancel;\r\n                    break;\r\n                case controlsEnum.none:\r\n                    this.refs.cancelButton.focus();\r\n                    this.focusedItem = controlsEnum.cancel;\r\n                    break;\r\n            }\r\n        }\r\n        // If enter key pressed firing action based on focused element.\r\n        if (key === enums.KeyCode.enter) {\r\n            switch (this.focusedItem) {\r\n                case controlsEnum.cancel:\r\n                    this.onCancelClick(event);\r\n                    break;\r\n                case controlsEnum.no:\r\n                    this.onNoClick(event);\r\n                    break;\r\n                case controlsEnum.yes:\r\n                    this.onYesClick(event);\r\n                    break;\r\n            }\r\n        }\r\n        else if (key === enums.KeyCode.backspace) {\r\n            keyDownHelper.KeydownHelper.stopEvent(event);\r\n            return true;\r\n        }\r\n        /** to disbale the response navigation on confirmation popups (reset marks and annotation) */\r\n        if (key === enums.KeyCode.left || key === enums.KeyCode.right) {\r\n            keyDownHelper.KeydownHelper.stopEvent(event);\r\n        }\r\n        return true;\r\n    };\r\n    return MultiOptionConfirmationDialog;\r\n}(pureRenderComponent));\r\nmodule.exports = MultiOptionConfirmationDialog;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzM4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvdXRpbGl0eS9tdWx0aW9wdGlvbmNvbmZpcm1hdGlvbmRpYWxvZy50c3g/NDZiYyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICBSZWFjdCBjb21wb25lbnQgZm9yIENvbmZpcm1hdGlvbiBQb3B1cFxuKi9cbi8qIHRzbGludDpkaXNhYmxlOm5vLXVudXNlZC12YXJpYWJsZSAqL1xuaW1wb3J0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbmltcG9ydCBSZWFjdERPTSA9IHJlcXVpcmUoJ3JlYWN0LWRvbScpO1xuLyogdHNsaW50OmRpc2FibGU6bm8tdW51c2VkLXZhcmlhYmxlICovXG5sZXQgY2xhc3NOYW1lcyA9IHJlcXVpcmUoJ2NsYXNzbmFtZXMnKTtcbmltcG9ydCBwdXJlUmVuZGVyQ29tcG9uZW50ID0gcmVxdWlyZSgnLi4vYmFzZS9wdXJlcmVuZGVyY29tcG9uZW50Jyk7XG5pbXBvcnQgbG9jYWxlU3RvcmUgPSByZXF1aXJlKCcuLi8uLi9zdG9yZXMvbG9jYWxlL2xvY2FsZXN0b3JlJyk7XG5pbXBvcnQgdXNlck9wdGlvbnNIZWxwZXIgPSByZXF1aXJlKCcuLi8uLi91dGlsaXR5L3VzZXJvcHRpb24vdXNlcm9wdGlvbnNoZWxwZXInKTtcbmltcG9ydCB1c2VyT3B0aW9uS2V5cyA9IHJlcXVpcmUoJy4uLy4uL3V0aWxpdHkvdXNlcm9wdGlvbi91c2Vyb3B0aW9ua2V5cycpO1xuaW1wb3J0IHVzZXJPcHRpb25zQWN0aW9uQ3JlYXRvciA9IHJlcXVpcmUoJy4uLy4uL2FjdGlvbnMvdXNlcm9wdGlvbi91c2Vyb3B0aW9uYWN0aW9uY3JlYXRvcicpO1xuaW1wb3J0IG1vZHVsZUtleUhhbmRsZXIgPSByZXF1aXJlKCcuLi8uLi91dGlsaXR5L2dlbmVyaWMvbW9kdWxla2V5aGFuZGxlcicpO1xuaW1wb3J0IG1vZHVsZWtleXMgPSByZXF1aXJlKCcuLi8uLi91dGlsaXR5L2dlbmVyaWMvbW9kdWxla2V5cycpO1xuaW1wb3J0IGtleURvd25IZWxwZXIgPSByZXF1aXJlKCcuLi8uLi91dGlsaXR5L2dlbmVyaWMva2V5ZG93bmhlbHBlcicpO1xuaW1wb3J0IGVudW1zID0gcmVxdWlyZSgnLi9lbnVtcycpO1xuaW1wb3J0IGNvbnN0YW50cyA9IHJlcXVpcmUoJy4vY29uc3RhbnRzJyk7XG5cbmludGVyZmFjZSBQcm9wcyBleHRlbmRzIExvY2FsZVNlbGVjdGlvbkJhc2Uge1xuICAgIGhlYWRlcjogc3RyaW5nO1xuICAgIGNvbnRlbnQ6IEpTWC5FbGVtZW50W107XG4gICAgZGlzcGxheVBvcHVwOiBib29sZWFuO1xuICAgIG9uQ2FuY2VsQ2xpY2s6IEZ1bmN0aW9uO1xuICAgIG9uWWVzQ2xpY2s6IEZ1bmN0aW9uO1xuICAgIG9uTm9DbGljaz86IEZ1bmN0aW9uO1xuICAgIGlzS2V5Qm9hcmRTdXBwb3J0RW5hYmxlZD86IGJvb2xlYW47XG4gICAgcG9wdXBTaXplOiBlbnVtcy5Qb3B1cFNpemU7XG4gICAgcG9wdXBUeXBlOiBlbnVtcy5Qb3BVcFR5cGU7XG4gICAgYnV0dG9uWWVzVGV4dDogc3RyaW5nO1xuICAgIGJ1dHRvbk5vVGV4dD86IHN0cmluZztcbiAgICBidXR0b25DYW5jZWxUZXh0OiBzdHJpbmc7XG4gICAgZGlzcGxheU5vQnV0dG9uOiBib29sZWFuO1xuICAgIGlzQ2xhc3NpZnlSZXNwb25zZU9rQnV0dG9uRGlzYWJsZWQ/OiBib29sZWFuO1xufVxuXG52YXIgY29udHJvbHNFbnVtID0geyBub25lOiAwLCBjYW5jZWw6IDEsIG5vOiAyLCB5ZXM6IDMgfTtcblxuLyoqXG4gKiBSZWFjdCBjb21wb25lbnQgY2xhc3MgZm9yIEhlYWRlciBmb3IgQXV0aG9yaXplZCBwYWdlc1xuICovXG5jbGFzcyBNdWx0aU9wdGlvbkNvbmZpcm1hdGlvbkRpYWxvZyBleHRlbmRzIHB1cmVSZW5kZXJDb21wb25lbnQ8UHJvcHMsIGFueT4ge1xuICAgIHB1YmxpYyBmb2N1c2VkSXRlbTogYW55ID0gY29udHJvbHNFbnVtLm5vbmU7XG4gICAgcHJpdmF0ZSBpZDogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICovXG4gICAgY29uc3RydWN0b3IocHJvcHM6IFByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzLCBudWxsKTtcblxuICAgICAgICB0aGlzLmtleUhhbmRsZXIgPSB0aGlzLmtleUhhbmRsZXIuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5vbkNhbmNlbENsaWNrID0gdGhpcy5vbkNhbmNlbENsaWNrLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub25Qb3B1cE5vQ2xpY2sgPSB0aGlzLm9uUG9wdXBOb0NsaWNrLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub25ZZXNDbGljayA9IHRoaXMub25ZZXNDbGljay5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm9uTm9DbGljayA9IHRoaXMub25Ob0NsaWNrLmJpbmQodGhpcyk7XG4gICAgfVxuXG4gICAgLyoqIHJlZnMgKi9cbiAgICBwdWJsaWMgcmVmczoge1xuICAgICAgICBba2V5OiBzdHJpbmddOiAoRWxlbWVudCk7XG4gICAgICAgIG5vQnV0dG9uOiAoSFRNTEJ1dHRvbkVsZW1lbnQpO1xuICAgICAgICB5ZXNCdXR0b246IChIVE1MQnV0dG9uRWxlbWVudCk7XG4gICAgICAgIGNhbmNlbEJ1dHRvbjogKEhUTUxCdXR0b25FbGVtZW50KTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogUmVuZGVyIG1ldGhvZFxuICAgICAqL1xuICAgIHB1YmxpYyByZW5kZXIoKSB7XG5cbiAgICAgICAgaWYgKHRoaXMucHJvcHMuZGlzcGxheVBvcHVwKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5pc0tleUJvYXJkU3VwcG9ydEVuYWJsZWQpIHtcbiAgICAgICAgICAgICAgICBsZXQga2V5RG93bkhhbmRsZXI6IG1vZHVsZUtleUhhbmRsZXIgPSBuZXcgbW9kdWxlS2V5SGFuZGxlcihcbiAgICAgICAgICAgICAgICAgICAgbW9kdWxla2V5cy5QT1BVUF9LRVlfRE9XTixcbiAgICAgICAgICAgICAgICAgICAgZW51bXMuUHJpb3JpdHkuU2Vjb25kLFxuICAgICAgICAgICAgICAgICAgICB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmtleUhhbmRsZXIsXG4gICAgICAgICAgICAgICAgICAgIGVudW1zLktleU1vZGUuZG93bik7XG4gICAgICAgICAgICAgICAga2V5RG93bkhlbHBlci5pbnN0YW5jZS5tb3VudEtleURvd25IYW5kbGVyKGtleURvd25IYW5kbGVyKTtcblxuICAgICAgICAgICAgICAgIGxldCBrZXlQcmVzc0hhbmRsZXI6IG1vZHVsZUtleUhhbmRsZXIgPSBuZXcgbW9kdWxlS2V5SGFuZGxlcihcbiAgICAgICAgICAgICAgICAgICAgbW9kdWxla2V5cy5QT1BVUF9LRVlfUFJFU1MsXG4gICAgICAgICAgICAgICAgICAgIGVudW1zLlByaW9yaXR5LlNlY29uZCxcbiAgICAgICAgICAgICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5rZXlIYW5kbGVyLFxuICAgICAgICAgICAgICAgICAgICBlbnVtcy5LZXlNb2RlLnByZXNzKTtcbiAgICAgICAgICAgICAgICBrZXlEb3duSGVscGVyLmluc3RhbmNlLm1vdW50S2V5UHJlc3NIYW5kbGVyKGtleVByZXNzSGFuZGxlcik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxldCBwcmVmaXg6IHN0cmluZztcbiAgICAgICAgICAgIHN3aXRjaCAodGhpcy5wcm9wcy5wb3B1cFR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIGVudW1zLlBvcFVwVHlwZS5BdHlwaWNhbFNlYXJjaDpcbiAgICAgICAgICAgICAgICBwcmVmaXggPSAnYXR5cGljYWxTZWFyY2gnO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgZW51bXMuUG9wVXBUeXBlLlNlbGVjdFRvTWFya0FzUHJvdmlzaW9uYWw6XG4gICAgICAgICAgICAgICAgcHJlZml4ID0gJ3NlbGVjdFRvTWFyayc7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBlbnVtcy5Qb3BVcFR5cGUuUmVjbGFzc2lmeU11bHRpT3B0aW9uOlxuICAgICAgICAgICAgICAgIHByZWZpeCA9ICdSZWNsYXNzaWZ5TXVsdGlPcHRpb24nO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgZW51bXMuUG9wVXBUeXBlLlNoYXJlUmVzcG9uc2U6XG4gICAgICAgICAgICAgICAgcHJlZml4ID0gJ3NoYXJlUmVzcG9uc2UnO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgZW51bXMuUG9wVXBUeXBlLlJldXNlUmlnQWN0aW9uOlxuICAgICAgICAgICAgICAgIHByZWZpeCA9ICdyZXVzZVJpZyc7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IG5vQnV0dG9uRWw6IEpTWC5FbGVtZW50O1xuICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMuZGlzcGxheU5vQnV0dG9uKSB7XG4gICAgICAgICAgICAgICAgbm9CdXR0b25FbCA9ICg8YnV0dG9uIGF1dG9Gb2N1cyA9IHtmYWxzZX1cbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5vbk5vQ2xpY2t9XG4gICAgICAgICAgICAgICAgICAgIGlkPXsncG9wdXBfJyArIHByZWZpeCArICdNZXNzZ2VfbW92ZV90b193b3JrbGlzdF9idXR0b24nfVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2J1dHRvbiByb3VuZGVkJ1xuICAgICAgICAgICAgICAgICAgICByZWYgPSB7J25vQnV0dG9uJ30+XG4gICAgICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLmJ1dHRvbk5vVGV4dH08L2J1dHRvbj4pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lID0ge2NsYXNzTmFtZXMoJ3BvcHVwIHBvcHVwLW92ZXJsYXkgY2xvc2UtYnV0dG9uIHBvcHVwLW9wZW4gb3BlbicsXG4gICAgICAgICAgICAgICAgICAgIGVudW1zLmdldEVudW1TdHJpbmcoZW51bXMuUG9wdXBTaXplLCB0aGlzLnByb3BzLnBvcHVwU2l6ZSkudG9Mb3dlckNhc2UoKSl9XG4gICAgICAgICAgICAgICAgICAgIGlkPSB7IHRoaXMuaWQgfVxuICAgICAgICAgICAgICAgICAgICByb2xlPSdkaWFsb2cnXG4gICAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWxsZWRieT0ncG9wdXA0MlRpdGxlJ1xuICAgICAgICAgICAgICAgICAgICBhcmlhLWRlc2NyaWJlZGJ5PSdwb3B1cDQyRGVzYydcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17IHRoaXMub25Qb3B1cE5vQ2xpY2sgfT5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3BvcHVwLXdyYXAnIG9uQ2xpY2s9e3RoaXMub25Qb3B1cENsaWNrfT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdwb3B1cC1oZWFkZXIgYm9sZC1oZWFkZXItdHh0Jz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQgaWQ9J3BvcHVwNDJUaXRsZSc+e3RoaXMucHJvcHMuaGVhZGVyfTwvaDQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncG9wdXAtY29udGVudCBjb250ZW50LXdpdGgtcmFkaW8tYnRuJyBpZD0ncG9wdXA0MkRlc2MnIGtleT0ncG9wdXAxNERlc2MnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPnt0aGlzLnByb3BzLmNvbnRlbnR9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3BvcHVwLWZvb3RlciB0ZXh0LXJpZ2h0Jz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e3RoaXMub25DYW5jZWxDbGlja31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9eydwb3B1cF8nICsgcHJlZml4ICsgJ01lc3NnZV9jYW5jZWxfYnV0dG9uJ31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmID0geydjYW5jZWxCdXR0b24nfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2J1dHRvbiByb3VuZGVkIGNsb3NlLWJ1dHRvbic+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLmJ1dHRvbkNhbmNlbFRleHR9PC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge25vQnV0dG9uRWx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBhdXRvRm9jdXMgPSB7dHJ1ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5vblllc0NsaWNrfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD17J3BvcHVwXycgKyBwcmVmaXggKyAnTWVzc2dlX21hcmtfbm93X2J1dHRvbid9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nYnV0dG9uIHByaW1hcnkgcm91bmRlZCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmPXsneWVzQnV0dG9uJ31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e3RoaXMucHJvcHMuaXNDbGFzc2lmeVJlc3BvbnNlT2tCdXR0b25EaXNhYmxlZH0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnByb3BzLmJ1dHRvblllc1RleHR9PC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhpcyBmdW5jdGlvbiBnZXRzIGludm9rZWQgd2hlbiB0aGUgY29tcG9uZW50IGlzIGFib3V0IHRvIGJlIG1vdW50ZWRcbiAgICAgKi9cbiAgICBwdWJsaWMgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLmlzS2V5Qm9hcmRTdXBwb3J0RW5hYmxlZCkge1xuICAgICAgICAgICAgLy8gVW5tb3VudCB0aGUgZXZlbnQgdG8gZ2l2ZSBvdGhlcnMgdGhlIHByaW9yaXR5XG4gICAgICAgICAgICBrZXlEb3duSGVscGVyLmluc3RhbmNlLnVubW91bnRLZXlIYW5kbGVyKG1vZHVsZWtleXMuUE9QVVBfS0VZX0RPV04pO1xuXG4gICAgICAgICAgICAvLyBVbm1vdW50IHRoZSBldmVudCB0byBnaXZlIG90aGVycyB0aGUgcHJpb3JpdHlcbiAgICAgICAgICAgIGtleURvd25IZWxwZXIuaW5zdGFuY2UudW5tb3VudEtleUhhbmRsZXIobW9kdWxla2V5cy5QT1BVUF9LRVlfUFJFU1MpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXZlbnQgZmlyZWQgb24gY2xpY2tpbmcgJ05vJ1xuICAgICAqIEBwYXJhbSBldm50XG4gICAgICovXG4gICAgcHJpdmF0ZSBvbkNhbmNlbENsaWNrKGV2bnQ6IGFueSkge1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5pc0tleUJvYXJkU3VwcG9ydEVuYWJsZWQpIHtcbiAgICAgICAgICAgIC8vIFVubW91bnQgdGhlIGV2ZW50IHRvIGdpdmUgb3RoZXJzIHRoZSBwcmlvcml0eVxuICAgICAgICAgICAga2V5RG93bkhlbHBlci5pbnN0YW5jZS51bm1vdW50S2V5SGFuZGxlcihtb2R1bGVrZXlzLlBPUFVQX0tFWV9ET1dOKTtcblxuICAgICAgICAgICAgLy8gVW5tb3VudCB0aGUgZXZlbnQgdG8gZ2l2ZSBvdGhlcnMgdGhlIHByaW9yaXR5XG4gICAgICAgICAgICBrZXlEb3duSGVscGVyLmluc3RhbmNlLnVubW91bnRLZXlIYW5kbGVyKG1vZHVsZWtleXMuUE9QVVBfS0VZX1BSRVNTKTtcbiAgICAgICAgfVxuICAgICAgICAvKiogU2hvdWxkIGJlIHRydWUgYW5kIHJlcmVuZGVyIG9uY2UgdGhlIHVzZXIgY2hhbmdlZCAodHVybiBvbikgdGhlIGFzayBvbiBsb2dvdXQgZnJvbSBwYW5lbCBhbmQgbG9nZ2luZyBvdXQgKi9cbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGlzQXNrT25Mb2dPdXRDaGVja2VkOiB0cnVlIH0pO1xuICAgICAgICB0aGlzLnByb3BzLm9uQ2FuY2VsQ2xpY2soKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFdmVudCBmaXJlZCBvbiBjbGlja2luZyAnWWVzJ1xuICAgICAqIEBwYXJhbSBldm50XG4gICAgICovXG4gICAgcHJpdmF0ZSBvbk5vQ2xpY2soZXZudDogYW55KSB7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLmlzS2V5Qm9hcmRTdXBwb3J0RW5hYmxlZCkge1xuICAgICAgICAgICAgLy8gVW5tb3VudCB0aGUgZXZlbnQgdG8gZ2l2ZSBvdGhlcnMgdGhlIHByaW9yaXR5XG4gICAgICAgICAgICBrZXlEb3duSGVscGVyLmluc3RhbmNlLnVubW91bnRLZXlIYW5kbGVyKG1vZHVsZWtleXMuUE9QVVBfS0VZX0RPV04pO1xuXG4gICAgICAgICAgICAvLyBVbm1vdW50IHRoZSBldmVudCB0byBnaXZlIG90aGVycyB0aGUgcHJpb3JpdHlcbiAgICAgICAgICAgIGtleURvd25IZWxwZXIuaW5zdGFuY2UudW5tb3VudEtleUhhbmRsZXIobW9kdWxla2V5cy5QT1BVUF9LRVlfUFJFU1MpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucHJvcHMub25Ob0NsaWNrKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXZlbnQgZmlyZWQgb24gY2xpY2tpbmcgJ01hcmtOb3cnXG4gICAgICogQHBhcmFtIGV2bnRcbiAgICAgKi9cbiAgICBwcml2YXRlIG9uWWVzQ2xpY2soZXZudDogYW55KSB7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLmlzS2V5Qm9hcmRTdXBwb3J0RW5hYmxlZCkge1xuICAgICAgICAgICAgLy8gVW5tb3VudCB0aGUgZXZlbnQgdG8gZ2l2ZSBvdGhlcnMgdGhlIHByaW9yaXR5XG4gICAgICAgICAgICBrZXlEb3duSGVscGVyLmluc3RhbmNlLnVubW91bnRLZXlIYW5kbGVyKG1vZHVsZWtleXMuUE9QVVBfS0VZX0RPV04pO1xuXG4gICAgICAgICAgICAvLyBVbm1vdW50IHRoZSBldmVudCB0byBnaXZlIG90aGVycyB0aGUgcHJpb3JpdHlcbiAgICAgICAgICAgIGtleURvd25IZWxwZXIuaW5zdGFuY2UudW5tb3VudEtleUhhbmRsZXIobW9kdWxla2V5cy5QT1BVUF9LRVlfUFJFU1MpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucHJvcHMub25ZZXNDbGljaygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEV2ZW50IGZpcmVkIG9uIGNsaWNraW5nIHBvcHVwXG4gICAgICogQHBhcmFtIGV2bnRcbiAgICAgKi9cbiAgICBwcml2YXRlIG9uUG9wdXBDbGljayhldm50OiBhbnkpIHtcbiAgICAgICAgZXZudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEV2ZW50IGZpcmVkIG9uIGNsaWNraW5nICdObycgb2YgcG9wdXBcbiAgICAgKiBAcGFyYW0gZXZudFxuICAgICAqL1xuICAgIHByaXZhdGUgb25Qb3B1cE5vQ2xpY2soZXZudDogYW55KSB7XG4gICAgICAgIHRoaXMub25Qb3B1cENsaWNrKGV2bnQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEhhbmRsZSBrZXlkb3duLlxuICAgICAqIEBwYXJhbSB7S2V5Ym9hcmRFdmVudH0gZXZlbnRcbiAgICAgKiBAcmV0dXJuc1xuICAgICAqL1xuICAgIHByaXZhdGUga2V5SGFuZGxlcihldmVudDogS2V5Ym9hcmRFdmVudCk6IGJvb2xlYW4ge1xuXG4gICAgICAgIGxldCBrZXkgPSBldmVudC5rZXlDb2RlIHx8IGV2ZW50LmNoYXJDb2RlO1xuICAgICAgICAvLyBIYW5kbGluZyB0aGUgdGFiIGtleSBmb3IgdG9nZ2xpbmcgdGhlIHllcyBhbmQgbm8gYnV0dG9uIGZvY3VzLlxuICAgICAgICBpZiAoa2V5ID09PSBlbnVtcy5LZXlDb2RlLnRhYikge1xuICAgICAgICAgICAgc3dpdGNoICh0aGlzLmZvY3VzZWRJdGVtKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBjb250cm9sc0VudW0uY2FuY2VsOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnMubm9CdXR0b24uZm9jdXMoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mb2N1c2VkSXRlbSA9IGNvbnRyb2xzRW51bS5ubztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBjb250cm9sc0VudW0ubm86XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVmcy55ZXNCdXR0b24uZm9jdXMoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mb2N1c2VkSXRlbSA9IGNvbnRyb2xzRW51bS55ZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIGNvbnRyb2xzRW51bS55ZXM6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVmcy5jYW5jZWxCdXR0b24uZm9jdXMoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mb2N1c2VkSXRlbSA9IGNvbnRyb2xzRW51bS5jYW5jZWw7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgY29udHJvbHNFbnVtLm5vbmU6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVmcy5jYW5jZWxCdXR0b24uZm9jdXMoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mb2N1c2VkSXRlbSA9IGNvbnRyb2xzRW51bS5jYW5jZWw7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIElmIGVudGVyIGtleSBwcmVzc2VkIGZpcmluZyBhY3Rpb24gYmFzZWQgb24gZm9jdXNlZCBlbGVtZW50LlxuICAgICAgICBpZiAoa2V5ID09PSBlbnVtcy5LZXlDb2RlLmVudGVyKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHRoaXMuZm9jdXNlZEl0ZW0pIHtcbiAgICAgICAgICAgICAgICBjYXNlIGNvbnRyb2xzRW51bS5jYW5jZWw6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25DYW5jZWxDbGljayhldmVudCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgY29udHJvbHNFbnVtLm5vOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uTm9DbGljayhldmVudCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgY29udHJvbHNFbnVtLnllczpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vblllc0NsaWNrKGV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSBlbnVtcy5LZXlDb2RlLmJhY2tzcGFjZSkge1xuXG4gICAgICAgICAgICBrZXlEb3duSGVscGVyLktleWRvd25IZWxwZXIuc3RvcEV2ZW50KGV2ZW50KTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIC8qKiB0byBkaXNiYWxlIHRoZSByZXNwb25zZSBuYXZpZ2F0aW9uIG9uIGNvbmZpcm1hdGlvbiBwb3B1cHMgKHJlc2V0IG1hcmtzIGFuZCBhbm5vdGF0aW9uKSAqL1xuICAgICAgICBpZiAoa2V5ID09PSBlbnVtcy5LZXlDb2RlLmxlZnQgfHwga2V5ID09PSBlbnVtcy5LZXlDb2RlLnJpZ2h0KSB7XG4gICAgICAgICAgICBrZXlEb3duSGVscGVyLktleWRvd25IZWxwZXIuc3RvcEV2ZW50KGV2ZW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbn1cblxuZXhwb3J0ID0gTXVsdGlPcHRpb25Db25maXJtYXRpb25EaWFsb2c7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9zb3VyY2UtbWFwLWxvYWRlciEuL3NyYy9jb21wb25lbnRzL3V0aWxpdHkvbXVsdGlvcHRpb25jb25maXJtYXRpb25kaWFsb2cudHN4Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBb0JBO0FBRUE7O0FBRUE7QUFDQTtBQUFBO0FBSUE7O0FBRUE7QUFDQTtBQUFBO0FBTkE7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBVUE7O0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQU1BO0FBRUE7QUFNQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQU1BO0FBRUE7QUFRQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUtBO0FBQ0E7QUFVQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7Iiwic291cmNlUm9vdCI6IiJ9");

/***/ }),

/***/ 339:
/* no static exports found */
/* all exports used */
/*!****************************************************************************!*\
  !*** ./src/components/utility/navigation/examinernavigationaudithelper.ts ***!
  \****************************************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar loggerBase = __webpack_require__(/*! ../../base/loggerbase */ 425);\r\nvar logCategory = __webpack_require__(/*! ../auditlogger/auditloggingcategory */ 385);\r\nvar ExaminerNavigationAuditHelper = /** @class */ (function (_super) {\r\n    __extends(ExaminerNavigationAuditHelper, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function ExaminerNavigationAuditHelper() {\r\n        return _super.call(this, logCategory.SCREEN_NAVIGATION) || this;\r\n    }\r\n    /**\r\n     * Log response open audit details.\r\n     * @param reason\r\n     * @param activity\r\n     * @param displayId\r\n     * @param responseMode\r\n     */\r\n    ExaminerNavigationAuditHelper.prototype.logResponseOpenAudit = function (reason, activity, displayId, responseMode) {\r\n        var logActionObj = {\r\n            'Reason': reason,\r\n            'Activity': activity,\r\n            'displayId': displayId,\r\n            'responseMode': responseMode\r\n        };\r\n        var result = this.formatInputAction(logActionObj);\r\n        this.saveAuditLog(result, true);\r\n    };\r\n    return ExaminerNavigationAuditHelper;\r\n}(loggerBase));\r\nmodule.exports = ExaminerNavigationAuditHelper;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzM5LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvdXRpbGl0eS9uYXZpZ2F0aW9uL2V4YW1pbmVybmF2aWdhdGlvbmF1ZGl0aGVscGVyLnRzPzlkYjQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGxvZ2dlckJhc2UgPSByZXF1aXJlKCcuLi8uLi9iYXNlL2xvZ2dlcmJhc2UnKTtcclxuaW1wb3J0IGxvZ0NhdGVnb3J5ID0gcmVxdWlyZSgnLi4vYXVkaXRsb2dnZXIvYXVkaXRsb2dnaW5nY2F0ZWdvcnknKTtcclxuXHJcbmNsYXNzIEV4YW1pbmVyTmF2aWdhdGlvbkF1ZGl0SGVscGVyIGV4dGVuZHMgbG9nZ2VyQmFzZSB7XHJcblxyXG5cdC8qKlxyXG5cdCAqIENvbnN0cnVjdG9yXHJcblx0ICovXHJcblx0Y29uc3RydWN0b3IoKSB7XHJcblx0XHRzdXBlcihsb2dDYXRlZ29yeS5TQ1JFRU5fTkFWSUdBVElPTik7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBMb2cgcmVzcG9uc2Ugb3BlbiBhdWRpdCBkZXRhaWxzLlxyXG5cdCAqIEBwYXJhbSByZWFzb25cclxuXHQgKiBAcGFyYW0gYWN0aXZpdHlcclxuXHQgKiBAcGFyYW0gZGlzcGxheUlkXHJcblx0ICogQHBhcmFtIHJlc3BvbnNlTW9kZVxyXG5cdCAqL1xyXG5cdHB1YmxpYyBsb2dSZXNwb25zZU9wZW5BdWRpdChyZWFzb246IHN0cmluZyxcclxuXHRcdGFjdGl2aXR5OiBzdHJpbmcsXHJcblx0XHRkaXNwbGF5SWQ6IHN0cmluZyxcclxuXHRcdHJlc3BvbnNlTW9kZTogc3RyaW5nKTogdm9pZCB7XHJcblxyXG5cdFx0bGV0IGxvZ0FjdGlvbk9iaiA9IHtcclxuXHRcdFx0J1JlYXNvbic6IHJlYXNvbixcclxuXHRcdFx0J0FjdGl2aXR5JzogYWN0aXZpdHksXHJcblx0XHRcdCdkaXNwbGF5SWQnOiBkaXNwbGF5SWQsXHJcblx0XHRcdCdyZXNwb25zZU1vZGUnOiByZXNwb25zZU1vZGVcclxuXHRcdH07XHJcblx0XHRsZXQgcmVzdWx0ID0gdGhpcy5mb3JtYXRJbnB1dEFjdGlvbihsb2dBY3Rpb25PYmopO1xyXG5cdFx0dGhpcy5zYXZlQXVkaXRMb2cocmVzdWx0LCB0cnVlKTtcclxuXHR9XHJcbn1cclxuZXhwb3J0ID0gRXhhbWluZXJOYXZpZ2F0aW9uQXVkaXRIZWxwZXI7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9zb3VyY2UtbWFwLWxvYWRlciEuL3NyYy9jb21wb25lbnRzL3V0aWxpdHkvbmF2aWdhdGlvbi9leGFtaW5lcm5hdmlnYXRpb25hdWRpdGhlbHBlci50cyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBRUE7QUFBQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7OztBQU1BO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9");

/***/ }),

/***/ 342:
/* no static exports found */
/* all exports used */
/*!*********************************************************!*\
  !*** ./src/actions/searchresponse/rignotfoundaction.ts ***!
  \*********************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar action = __webpack_require__(/*! ../base/action */ 229);\r\nvar actionType = __webpack_require__(/*! ../base/actiontypes */ 228);\r\nvar RigNotFoundAction = /** @class */ (function (_super) {\r\n    __extends(RigNotFoundAction, _super);\r\n    /**\r\n     * Constructor of RigNotFoundAction\r\n     * @param success\r\n     * @param documentId\r\n     * @param readStatus\r\n     */\r\n    function RigNotFoundAction(showRigNotFoundPopup) {\r\n        var _this = _super.call(this, action.Source.View, actionType.RIG_NOT_FOUND_ACTION) || this;\r\n        _this._showRigNotFoundPopup = showRigNotFoundPopup;\r\n        _this.auditLog.logContent = _this.auditLog.logContent.\r\n            replace(/{showRigNotFoundPopup}/g, showRigNotFoundPopup.toString());\r\n        return _this;\r\n    }\r\n    Object.defineProperty(RigNotFoundAction.prototype, \"showRigNotFoundPopup\", {\r\n        /**\r\n         * Retrieves Show or Hide popup\r\n         */\r\n        get: function () {\r\n            return this._showRigNotFoundPopup;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return RigNotFoundAction;\r\n}(action));\r\nmodule.exports = RigNotFoundAction;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzQyLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2FjdGlvbnMvc2VhcmNocmVzcG9uc2Uvcmlnbm90Zm91bmRhY3Rpb24udHM/M2FlYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYWN0aW9uID0gcmVxdWlyZSgnLi4vYmFzZS9hY3Rpb24nKTtcbmltcG9ydCBhY3Rpb25BdWRpdExvZ0luZm8gPSByZXF1aXJlKCcuLi9iYXNlL2F1ZGl0bG9naW5mby9hY3Rpb25hdWRpdGxvZ2luZm8nKTtcbmltcG9ydCBhY3Rpb25UeXBlID0gcmVxdWlyZSgnLi4vYmFzZS9hY3Rpb250eXBlcycpO1xuXG5jbGFzcyBSaWdOb3RGb3VuZEFjdGlvbiBleHRlbmRzIGFjdGlvbiB7XG5cbiAgICBwcml2YXRlIF9zaG93UmlnTm90Rm91bmRQb3B1cDogYm9vbGVhbjtcblxuIC8qKlxuICAqIENvbnN0cnVjdG9yIG9mIFJpZ05vdEZvdW5kQWN0aW9uXG4gICogQHBhcmFtIHN1Y2Nlc3NcbiAgKiBAcGFyYW0gZG9jdW1lbnRJZFxuICAqIEBwYXJhbSByZWFkU3RhdHVzXG4gICovXG4gIGNvbnN0cnVjdG9yKHNob3dSaWdOb3RGb3VuZFBvcHVwOiBib29sZWFuKSB7XG4gICAgc3VwZXIoYWN0aW9uLlNvdXJjZS5WaWV3LCBhY3Rpb25UeXBlLlJJR19OT1RfRk9VTkRfQUNUSU9OKTtcbiAgICB0aGlzLl9zaG93UmlnTm90Rm91bmRQb3B1cCA9IHNob3dSaWdOb3RGb3VuZFBvcHVwO1xuICAgIHRoaXMuYXVkaXRMb2cubG9nQ29udGVudCA9IHRoaXMuYXVkaXRMb2cubG9nQ29udGVudC5cbiAgICAgICAgcmVwbGFjZSgve3Nob3dSaWdOb3RGb3VuZFBvcHVwfS9nLCBzaG93UmlnTm90Rm91bmRQb3B1cC50b1N0cmluZygpKTtcbiAgfVxuXG4gLyoqXG4gICogUmV0cmlldmVzIFNob3cgb3IgSGlkZSBwb3B1cFxuICAqL1xuICBwdWJsaWMgZ2V0IHNob3dSaWdOb3RGb3VuZFBvcHVwKCk6IGJvb2xlYW4ge1xuICAgICByZXR1cm4gdGhpcy5fc2hvd1JpZ05vdEZvdW5kUG9wdXA7XG4gIH1cbn1cbmV4cG9ydCA9IFJpZ05vdEZvdW5kQWN0aW9uO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9zb3VyY2UtbWFwLWxvYWRlciEuL3NyYy9hY3Rpb25zL3NlYXJjaHJlc3BvbnNlL3JpZ25vdGZvdW5kYWN0aW9uLnRzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBO0FBRUE7QUFFQTtBQUFBO0FBSUE7Ozs7O0FBS0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBOztBQUNBO0FBS0E7QUFIQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTtBQUFBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9");

/***/ }),

/***/ 343:
/* no static exports found */
/* all exports used */
/*!*******************************************************************!*\
  !*** ./src/actions/searchresponse/searchresponseactioncreator.ts ***!
  \*******************************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar dispatcher = __webpack_require__(/*! ../../app/dispatcher */ 242);\r\nvar Promise = __webpack_require__(/*! es6-promise */ 41);\r\nvar actionCreatorBase = __webpack_require__(/*! ../base/actioncreatorbase */ 280);\r\nvar searchResponseDataservice = __webpack_require__(/*! ../../dataservices/searchresponse/searchresponsedataservice */ 374);\r\nvar responseDataGetAction = __webpack_require__(/*! ../response/responsedatagetaction */ 440);\r\nvar enums = __webpack_require__(/*! ../../components/utility/enums */ 225);\r\nvar rignotfoundAction = __webpack_require__(/*! ./rignotfoundaction */ 342);\r\nvar loginSession = __webpack_require__(/*! ../../app/loginsession */ 252);\r\n/**\r\n * class for Search Response Action Creator\r\n */\r\nvar SearchResponseActionCreator = /** @class */ (function (_super) {\r\n    __extends(SearchResponseActionCreator, _super);\r\n    function SearchResponseActionCreator() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    /**\r\n     * parameter data\r\n     * @param markSchemeGroupId\r\n     * @param examinerRoleId\r\n     * @param displayId\r\n     */\r\n    SearchResponseActionCreator.prototype.getSearchedResponse = function (markSchemeGroupId, examinerRoleId, displayId) {\r\n        var that = this;\r\n        return new Promise.Promise(function (resolve, reject) {\r\n            var displayIdWithoutPrefix = parseInt(displayId.substring(1, displayId.length)); // Remove prfix '6'\r\n            searchResponseDataservice.getSearchResponseDetail(markSchemeGroupId, examinerRoleId, displayIdWithoutPrefix, function (success, resultData, isResultFromCache) {\r\n                if (that.validateCall(resultData, false, true)) {\r\n                    if (!success) {\r\n                        resultData = undefined;\r\n                    }\r\n                    else {\r\n                        if (resultData.markGroupId === 0 && resultData.esMarkGroupId !== 0) {\r\n                            resultData.markGroupId = resultData.esMarkGroupId;\r\n                        }\r\n                        resultData.triggerPoint = enums.TriggerPoint.DisplayIdSearch;\r\n                        resultData.loggedInExaminerId = loginSession.EXAMINER_ID;\r\n                        resultData.markSchemeGroupId = markSchemeGroupId;\r\n                    }\r\n                    dispatcher.dispatch(new responseDataGetAction(resultData, success, true));\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * parameter data\r\n     * @param show\r\n     */\r\n    SearchResponseActionCreator.prototype.showOrHideRigNotFoundPopup = function (show) {\r\n        new Promise.Promise(function (resolve, reject) {\r\n            resolve();\r\n        }).then(function () {\r\n            dispatcher.dispatch(new rignotfoundAction(show));\r\n        }).catch();\r\n    };\r\n    return SearchResponseActionCreator;\r\n}(actionCreatorBase));\r\nvar searchResponseActionCreator = new SearchResponseActionCreator();\r\nmodule.exports = searchResponseActionCreator;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzQzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2FjdGlvbnMvc2VhcmNocmVzcG9uc2Uvc2VhcmNocmVzcG9uc2VhY3Rpb25jcmVhdG9yLnRzPzBjNjMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGRpc3BhdGNoZXIgPSByZXF1aXJlKCcuLi8uLi9hcHAvZGlzcGF0Y2hlcicpO1xuaW1wb3J0IGFjdGlvbiA9IHJlcXVpcmUoJy4uL2Jhc2UvYWN0aW9uJyk7XG5pbXBvcnQgUHJvbWlzZSA9IHJlcXVpcmUoJ2VzNi1wcm9taXNlJyk7XG5pbXBvcnQgYWN0aW9uQ3JlYXRvckJhc2UgPSByZXF1aXJlKCcuLi9iYXNlL2FjdGlvbmNyZWF0b3JiYXNlJyk7XG5pbXBvcnQgc2VhcmNoUmVzcG9uc2VEYXRhc2VydmljZSA9IHJlcXVpcmUoJy4uLy4uL2RhdGFzZXJ2aWNlcy9zZWFyY2hyZXNwb25zZS9zZWFyY2hyZXNwb25zZWRhdGFzZXJ2aWNlJyk7XG5pbXBvcnQgcmVzcG9uc2VEYXRhR2V0QWN0aW9uID0gcmVxdWlyZSgnLi4vcmVzcG9uc2UvcmVzcG9uc2VkYXRhZ2V0YWN0aW9uJyk7XG5pbXBvcnQgZW51bXMgPSByZXF1aXJlKCcuLi8uLi9jb21wb25lbnRzL3V0aWxpdHkvZW51bXMnKTtcbmltcG9ydCByaWdub3Rmb3VuZEFjdGlvbiA9IHJlcXVpcmUoJy4vcmlnbm90Zm91bmRhY3Rpb24nKTtcbmltcG9ydCBsb2dpblNlc3Npb24gPSByZXF1aXJlKCcuLi8uLi9hcHAvbG9naW5zZXNzaW9uJyk7XG5cbi8qKlxuICogY2xhc3MgZm9yIFNlYXJjaCBSZXNwb25zZSBBY3Rpb24gQ3JlYXRvciBcbiAqL1xuY2xhc3MgU2VhcmNoUmVzcG9uc2VBY3Rpb25DcmVhdG9yIGV4dGVuZHMgYWN0aW9uQ3JlYXRvckJhc2Uge1xuXG4gICAgLyoqXG4gICAgICogcGFyYW1ldGVyIGRhdGFcbiAgICAgKiBAcGFyYW0gbWFya1NjaGVtZUdyb3VwSWRcbiAgICAgKiBAcGFyYW0gZXhhbWluZXJSb2xlSWRcbiAgICAgKiBAcGFyYW0gZGlzcGxheUlkXG4gICAgICovXG5cbiAgICBwdWJsaWMgZ2V0U2VhcmNoZWRSZXNwb25zZShtYXJrU2NoZW1lR3JvdXBJZDogbnVtYmVyLCBleGFtaW5lclJvbGVJZDogbnVtYmVyLCBkaXNwbGF5SWQ6IHN0cmluZyk6IFByb21pc2U8YW55PiB7XG5cbiAgICAgICAgbGV0IHRoYXQgPSB0aGlzO1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UuUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZTogYW55LCByZWplY3Q6IGFueSkge1xuXG4gICAgICAgICAgICBsZXQgZGlzcGxheUlkV2l0aG91dFByZWZpeCA9IHBhcnNlSW50KGRpc3BsYXlJZC5zdWJzdHJpbmcoMSwgZGlzcGxheUlkLmxlbmd0aCkpOyAvLyBSZW1vdmUgcHJmaXggJzYnXG5cbiAgICAgICAgICAgIHNlYXJjaFJlc3BvbnNlRGF0YXNlcnZpY2UuZ2V0U2VhcmNoUmVzcG9uc2VEZXRhaWwobWFya1NjaGVtZUdyb3VwSWQsIGV4YW1pbmVyUm9sZUlkLCAgZGlzcGxheUlkV2l0aG91dFByZWZpeCxcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiAoc3VjY2VzczogYm9vbGVhbiwgcmVzdWx0RGF0YTogU2VhcmNoZWRSZXNwb25zZURhdGEsIGlzUmVzdWx0RnJvbUNhY2hlOiBib29sZWFuKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoYXQudmFsaWRhdGVDYWxsKHJlc3VsdERhdGEsIGZhbHNlLCB0cnVlKSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHREYXRhID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0RGF0YS5tYXJrR3JvdXBJZCA9PT0gMCAmJiByZXN1bHREYXRhLmVzTWFya0dyb3VwSWQgIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0RGF0YS5tYXJrR3JvdXBJZCA9IHJlc3VsdERhdGEuZXNNYXJrR3JvdXBJZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0RGF0YS50cmlnZ2VyUG9pbnQgPSBlbnVtcy5UcmlnZ2VyUG9pbnQuRGlzcGxheUlkU2VhcmNoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdERhdGEubG9nZ2VkSW5FeGFtaW5lcklkID0gbG9naW5TZXNzaW9uLkVYQU1JTkVSX0lEO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdERhdGEubWFya1NjaGVtZUdyb3VwSWQgPSBtYXJrU2NoZW1lR3JvdXBJZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGF0Y2hlci5kaXNwYXRjaChuZXcgcmVzcG9uc2VEYXRhR2V0QWN0aW9uKHJlc3VsdERhdGEsIHN1Y2Nlc3MsIHRydWUpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHBhcmFtZXRlciBkYXRhXG4gICAgICogQHBhcmFtIHNob3dcbiAgICAgKi9cblxuXHRwdWJsaWMgc2hvd09ySGlkZVJpZ05vdEZvdW5kUG9wdXAoc2hvdzogYm9vbGVhbil7XG5cdFx0ICBuZXcgUHJvbWlzZS5Qcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlOiBhbnksIHJlamVjdDogYW55KSB7XG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIH0pLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgZGlzcGF0Y2hlci5kaXNwYXRjaChuZXcgcmlnbm90Zm91bmRBY3Rpb24oc2hvdykpO1xuICAgICAgICB9KS5jYXRjaCgpO1xuXHR9XG59XG5sZXQgc2VhcmNoUmVzcG9uc2VBY3Rpb25DcmVhdG9yID0gbmV3IFNlYXJjaFJlc3BvbnNlQWN0aW9uQ3JlYXRvcigpO1xuZXhwb3J0ID0gc2VhcmNoUmVzcG9uc2VBY3Rpb25DcmVhdG9yO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vc291cmNlLW1hcC1sb2FkZXIhLi9zcmMvYWN0aW9ucy9zZWFyY2hyZXNwb25zZS9zZWFyY2hyZXNwb25zZWFjdGlvbmNyZWF0b3IudHMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFBQTtBQUFBOztBQW1EQTtBQWpEQTs7Ozs7QUFLQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7OztBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),

/***/ 344:
/* no static exports found */
/* all exports used */
/*!***************************************************************!*\
  !*** ./src/actions/submit/shareandclassifycompletedaction.ts ***!
  \***************************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar action = __webpack_require__(/*! ../base/action */ 229);\r\nvar actionType = __webpack_require__(/*! ../base/actiontypes */ 228);\r\nvar dataRetrievalAction = __webpack_require__(/*! ../base/dataretrievalaction */ 239);\r\n/**\r\n * Action when responses are submitted\r\n */\r\nvar ShareAndClassifyCompletedAction = /** @class */ (function (_super) {\r\n    __extends(ShareAndClassifyCompletedAction, _super);\r\n    /**\r\n     * Constructor for ShareAndClassifyResponse\r\n     * @param submitResponseReturn The return values after response submission\r\n     */\r\n    function ShareAndClassifyCompletedAction(success, shareAndClassifyReturn, fromMarkScheme, selectedDisplayId) {\r\n        var _this = _super.call(this, action.Source.View, actionType.SHARE_AND_CLASSIFY_COMPLETED, success, shareAndClassifyReturn) || this;\r\n        _this._shareAndClassifyResponseReturn = shareAndClassifyReturn;\r\n        _this.fromMarkScheme = fromMarkScheme;\r\n        _this._selectedDisplayId = selectedDisplayId;\r\n        _this.auditLog.logContent = _this.auditLog.logContent.replace(/{success}/g, success.toString()).replace(/{errorCode}/g, shareAndClassifyReturn.responseShareAndClassifyErrorCode.toString());\r\n        return _this;\r\n    }\r\n    Object.defineProperty(ShareAndClassifyCompletedAction.prototype, \"getShareAndClassifyResponseReturnDetails\", {\r\n        /**\r\n         * Gets the submit response return details\r\n         */\r\n        get: function () {\r\n            return this._shareAndClassifyResponseReturn;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ShareAndClassifyCompletedAction.prototype, \"isFromMarkScheme\", {\r\n        /**\r\n         * Gets whether the response has been submitted from markscheme\r\n         */\r\n        get: function () {\r\n            return this.fromMarkScheme;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ShareAndClassifyCompletedAction.prototype, \"getSelectedDisplayId\", {\r\n        /**\r\n         * Gets the  selectedDisplayId\r\n         */\r\n        get: function () {\r\n            return this._selectedDisplayId;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return ShareAndClassifyCompletedAction;\r\n}(dataRetrievalAction));\r\nmodule.exports = ShareAndClassifyCompletedAction;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzQ0LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2FjdGlvbnMvc3VibWl0L3NoYXJlYW5kY2xhc3NpZnljb21wbGV0ZWRhY3Rpb24udHM/YmRjMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYWN0aW9uID0gcmVxdWlyZSgnLi4vYmFzZS9hY3Rpb24nKTtcclxuaW1wb3J0IGFjdGlvblR5cGUgPSByZXF1aXJlKCcuLi9iYXNlL2FjdGlvbnR5cGVzJyk7XHJcbmltcG9ydCBhY3Rpb25BdWRpdExvZ0luZm8gPSByZXF1aXJlKCcuLi9iYXNlL2F1ZGl0bG9naW5mby9hY3Rpb25hdWRpdGxvZ2luZm8nKTtcclxuaW1wb3J0IGRhdGFSZXRyaWV2YWxBY3Rpb24gPSByZXF1aXJlKCcuLi9iYXNlL2RhdGFyZXRyaWV2YWxhY3Rpb24nKTtcclxuaW1wb3J0IGVudW1zID0gcmVxdWlyZSgnLi4vLi4vY29tcG9uZW50cy91dGlsaXR5L2VudW1zJyk7XHJcbmltcG9ydCBzaGFyZUFuZENsYXNzaWZ5UmV0dXJuICA9IHJlcXVpcmUoJy4uLy4uL3N0b3Jlcy9zdWJtaXQvdHlwaW5ncy9zaGFyZUFuZENsYXNzaWZ5UmV0dXJuJyk7XHJcblxyXG4vKipcclxuICogQWN0aW9uIHdoZW4gcmVzcG9uc2VzIGFyZSBzdWJtaXR0ZWRcclxuICovXHJcbmNsYXNzIFNoYXJlQW5kQ2xhc3NpZnlDb21wbGV0ZWRBY3Rpb24gZXh0ZW5kcyBkYXRhUmV0cmlldmFsQWN0aW9uIHtcclxuXHJcbiAgICBwcml2YXRlIF9zaGFyZUFuZENsYXNzaWZ5UmVzcG9uc2VSZXR1cm46IHNoYXJlQW5kQ2xhc3NpZnlSZXR1cm47XHJcbiAgICBwcml2YXRlIGZyb21NYXJrU2NoZW1lOiBib29sZWFuO1xyXG4gICAgcHJpdmF0ZSBfc2VsZWN0ZWREaXNwbGF5SWQ6IHN0cmluZztcclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb25zdHJ1Y3RvciBmb3IgU2hhcmVBbmRDbGFzc2lmeVJlc3BvbnNlXHJcbiAgICAgKiBAcGFyYW0gc3VibWl0UmVzcG9uc2VSZXR1cm4gVGhlIHJldHVybiB2YWx1ZXMgYWZ0ZXIgcmVzcG9uc2Ugc3VibWlzc2lvblxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihzdWNjZXNzOiBib29sZWFuLFxyXG4gICAgICAgIHNoYXJlQW5kQ2xhc3NpZnlSZXR1cm46IHNoYXJlQW5kQ2xhc3NpZnlSZXR1cm4sXHJcbiAgICAgICAgZnJvbU1hcmtTY2hlbWU6IGJvb2xlYW4sXHJcbiAgICAgICAgc2VsZWN0ZWREaXNwbGF5SWQ/OiBzdHJpbmcpIHtcclxuICAgICAgICBzdXBlcihhY3Rpb24uU291cmNlLlZpZXcsIGFjdGlvblR5cGUuU0hBUkVfQU5EX0NMQVNTSUZZX0NPTVBMRVRFRCwgc3VjY2Vzcywgc2hhcmVBbmRDbGFzc2lmeVJldHVybik7XHJcbiAgICAgICAgdGhpcy5fc2hhcmVBbmRDbGFzc2lmeVJlc3BvbnNlUmV0dXJuID0gc2hhcmVBbmRDbGFzc2lmeVJldHVybjtcclxuICAgICAgICB0aGlzLmZyb21NYXJrU2NoZW1lID0gZnJvbU1hcmtTY2hlbWU7XHJcbiAgICAgICAgdGhpcy5fc2VsZWN0ZWREaXNwbGF5SWQgPSBzZWxlY3RlZERpc3BsYXlJZDtcclxuICAgICAgICB0aGlzLmF1ZGl0TG9nLmxvZ0NvbnRlbnQgPSB0aGlzLmF1ZGl0TG9nLmxvZ0NvbnRlbnQucmVwbGFjZSgve3N1Y2Nlc3N9L2csXHJcbiAgICAgICAgICAgIHN1Y2Nlc3MudG9TdHJpbmcoKSkucmVwbGFjZSgve2Vycm9yQ29kZX0vZywgc2hhcmVBbmRDbGFzc2lmeVJldHVybi5yZXNwb25zZVNoYXJlQW5kQ2xhc3NpZnlFcnJvckNvZGUudG9TdHJpbmcoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXRzIHRoZSBzdWJtaXQgcmVzcG9uc2UgcmV0dXJuIGRldGFpbHNcclxuICAgICAqL1xyXG4gICAgZ2V0IGdldFNoYXJlQW5kQ2xhc3NpZnlSZXNwb25zZVJldHVybkRldGFpbHMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NoYXJlQW5kQ2xhc3NpZnlSZXNwb25zZVJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldHMgd2hldGhlciB0aGUgcmVzcG9uc2UgaGFzIGJlZW4gc3VibWl0dGVkIGZyb20gbWFya3NjaGVtZVxyXG4gICAgICovXHJcbiAgICBnZXQgaXNGcm9tTWFya1NjaGVtZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5mcm9tTWFya1NjaGVtZTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXRzIHRoZSAgc2VsZWN0ZWREaXNwbGF5SWRcclxuICAgICAqL1xyXG4gICAgZ2V0IGdldFNlbGVjdGVkRGlzcGxheUlkKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zZWxlY3RlZERpc3BsYXlJZDtcclxuICAgIH1cclxuXHJcbn1cclxuZXhwb3J0ID0gU2hhcmVBbmRDbGFzc2lmeUNvbXBsZXRlZEFjdGlvbjtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L3NvdXJjZS1tYXAtbG9hZGVyIS4vc3JjL2FjdGlvbnMvc3VibWl0L3NoYXJlYW5kY2xhc3NpZnljb21wbGV0ZWRhY3Rpb24udHMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUVBO0FBSUE7O0FBRUE7QUFDQTtBQUFBO0FBT0E7OztBQUdBO0FBQ0E7QUFBQTtBQUtBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBS0E7QUFIQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQUE7QUFLQTtBQUhBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFBQTtBQU1BO0FBSEE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUFBO0FBRUE7QUFBQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),

/***/ 345:
/* no static exports found */
/* all exports used */
/*!*************************************************************!*\
  !*** ./src/actions/submit/submitresponsecompletedaction.ts ***!
  \*************************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar action = __webpack_require__(/*! ../base/action */ 229);\r\nvar actionType = __webpack_require__(/*! ../base/actiontypes */ 228);\r\nvar dataRetrievalAction = __webpack_require__(/*! ../base/dataretrievalaction */ 239);\r\n/**\r\n * Action when responses are submitted\r\n */\r\nvar SubmitResponseCompletedAction = /** @class */ (function (_super) {\r\n    __extends(SubmitResponseCompletedAction, _super);\r\n    /**\r\n     * Constructor for SubmitResponseCompletedAction\r\n     * @param submitResponseReturn The return values after response submission\r\n     */\r\n    function SubmitResponseCompletedAction(success, submitResponseReturn, worklistType, fromMarkScheme, examinerApproval, markGroupIds, selectedDisplayId, isStdSetupMode) {\r\n        var _this = _super.call(this, action.Source.View, actionType.SUBMIT_RESPONSE_COMPLETED, success, submitResponseReturn) || this;\r\n        _this._submitResponseReturn = submitResponseReturn;\r\n        _this.worklistType = worklistType;\r\n        _this.fromMarkScheme = fromMarkScheme;\r\n        _this.examinerApproval = examinerApproval;\r\n        _this.markGroupIds = markGroupIds;\r\n        _this._selectedDisplayId = selectedDisplayId;\r\n        _this._isStdSetupMode = isStdSetupMode;\r\n        _this.auditLog.logContent = _this.auditLog.logContent.replace(/{success}/g, success.toString()).replace(/{errorCode}/g, submitResponseReturn.responseSubmitErrorCode.toString());\r\n        return _this;\r\n    }\r\n    Object.defineProperty(SubmitResponseCompletedAction.prototype, \"getExaminerApproval\", {\r\n        /**\r\n         * Gets the approval status of examiner while submitting the response\r\n         */\r\n        get: function () {\r\n            return this.examinerApproval;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(SubmitResponseCompletedAction.prototype, \"getSubmitResponseReturnDetails\", {\r\n        /**\r\n         * Gets the submit response return details\r\n         */\r\n        get: function () {\r\n            return this._submitResponseReturn;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(SubmitResponseCompletedAction.prototype, \"getCurrentWorklistType\", {\r\n        /**\r\n         * Gets the current worklist type.\r\n         */\r\n        get: function () {\r\n            return this.worklistType;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(SubmitResponseCompletedAction.prototype, \"isFromMarkScheme\", {\r\n        /**\r\n         * Gets whether the response has been submitted from markscheme\r\n         */\r\n        get: function () {\r\n            return this.fromMarkScheme;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(SubmitResponseCompletedAction.prototype, \"getSubmittedMarkGroupIds\", {\r\n        /**\r\n         * Getsthe list of submitted Markgroupids\r\n         */\r\n        get: function () {\r\n            return this.markGroupIds;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(SubmitResponseCompletedAction.prototype, \"getSelectedDisplayId\", {\r\n        /**\r\n         * Gets the  selectedDisplayId\r\n         */\r\n        get: function () {\r\n            return this._selectedDisplayId;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(SubmitResponseCompletedAction.prototype, \"isStdSetupMode\", {\r\n        /**\r\n         * Gets whether submitted from Standardisation Setup Worklist\r\n         */\r\n        get: function () {\r\n            return this._isStdSetupMode;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return SubmitResponseCompletedAction;\r\n}(dataRetrievalAction));\r\nmodule.exports = SubmitResponseCompletedAction;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzQ1LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2FjdGlvbnMvc3VibWl0L3N1Ym1pdHJlc3BvbnNlY29tcGxldGVkYWN0aW9uLnRzPzUxNTEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGFjdGlvbiA9IHJlcXVpcmUoJy4uL2Jhc2UvYWN0aW9uJyk7XHJcbmltcG9ydCBhY3Rpb25UeXBlID0gcmVxdWlyZSgnLi4vYmFzZS9hY3Rpb250eXBlcycpO1xyXG5pbXBvcnQgYWN0aW9uQXVkaXRMb2dJbmZvID0gcmVxdWlyZSgnLi4vYmFzZS9hdWRpdGxvZ2luZm8vYWN0aW9uYXVkaXRsb2dpbmZvJyk7XHJcbmltcG9ydCBkYXRhUmV0cmlldmFsQWN0aW9uID0gcmVxdWlyZSgnLi4vYmFzZS9kYXRhcmV0cmlldmFsYWN0aW9uJyk7XHJcbmltcG9ydCBlbnVtcyA9IHJlcXVpcmUoJy4uLy4uL2NvbXBvbmVudHMvdXRpbGl0eS9lbnVtcycpO1xyXG5cclxuLyoqXHJcbiAqIEFjdGlvbiB3aGVuIHJlc3BvbnNlcyBhcmUgc3VibWl0dGVkXHJcbiAqL1xyXG5jbGFzcyBTdWJtaXRSZXNwb25zZUNvbXBsZXRlZEFjdGlvbiBleHRlbmRzIGRhdGFSZXRyaWV2YWxBY3Rpb24ge1xyXG5cclxuICAgIHByaXZhdGUgX3N1Ym1pdFJlc3BvbnNlUmV0dXJuOiBTdWJtaXRSZXNwb25zZVJldHVybjtcclxuICAgIHByaXZhdGUgd29ya2xpc3RUeXBlOiBlbnVtcy5Xb3JrbGlzdFR5cGU7XHJcbiAgICBwcml2YXRlIGZyb21NYXJrU2NoZW1lOiBib29sZWFuO1xyXG4gICAgcHJpdmF0ZSBleGFtaW5lckFwcHJvdmFsOiBlbnVtcy5FeGFtaW5lckFwcHJvdmFsO1xyXG4gICAgcHJpdmF0ZSBtYXJrR3JvdXBJZHM6IEFycmF5PE51bWJlcj47XHJcbiAgICBwcml2YXRlIF9zZWxlY3RlZERpc3BsYXlJZDogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSBfaXNTdGRTZXR1cE1vZGU6IGJvb2xlYW47XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb25zdHJ1Y3RvciBmb3IgU3VibWl0UmVzcG9uc2VDb21wbGV0ZWRBY3Rpb25cclxuICAgICAqIEBwYXJhbSBzdWJtaXRSZXNwb25zZVJldHVybiBUaGUgcmV0dXJuIHZhbHVlcyBhZnRlciByZXNwb25zZSBzdWJtaXNzaW9uXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKHN1Y2Nlc3M6IGJvb2xlYW4sIHN1Ym1pdFJlc3BvbnNlUmV0dXJuOiBTdWJtaXRSZXNwb25zZVJldHVybiwgd29ya2xpc3RUeXBlOiBlbnVtcy5Xb3JrbGlzdFR5cGUsXHJcbiAgICAgICAgZnJvbU1hcmtTY2hlbWU6IGJvb2xlYW4sIGV4YW1pbmVyQXBwcm92YWw6IGVudW1zLkV4YW1pbmVyQXBwcm92YWwsIG1hcmtHcm91cElkczogQXJyYXk8TnVtYmVyPixcclxuICAgICAgICBzZWxlY3RlZERpc3BsYXlJZD86IHN0cmluZywgaXNTdGRTZXR1cE1vZGU/OiBib29sZWFuKSB7XHJcbiAgICAgICAgc3VwZXIoYWN0aW9uLlNvdXJjZS5WaWV3LCBhY3Rpb25UeXBlLlNVQk1JVF9SRVNQT05TRV9DT01QTEVURUQsIHN1Y2Nlc3MsIHN1Ym1pdFJlc3BvbnNlUmV0dXJuKTtcclxuICAgICAgICB0aGlzLl9zdWJtaXRSZXNwb25zZVJldHVybiA9IHN1Ym1pdFJlc3BvbnNlUmV0dXJuO1xyXG4gICAgICAgIHRoaXMud29ya2xpc3RUeXBlID0gd29ya2xpc3RUeXBlO1xyXG4gICAgICAgIHRoaXMuZnJvbU1hcmtTY2hlbWUgPSBmcm9tTWFya1NjaGVtZTtcclxuICAgICAgICB0aGlzLmV4YW1pbmVyQXBwcm92YWwgPSBleGFtaW5lckFwcHJvdmFsO1xyXG4gICAgICAgIHRoaXMubWFya0dyb3VwSWRzID0gbWFya0dyb3VwSWRzO1xyXG4gICAgICAgIHRoaXMuX3NlbGVjdGVkRGlzcGxheUlkID0gc2VsZWN0ZWREaXNwbGF5SWQ7XHJcbiAgICAgICAgdGhpcy5faXNTdGRTZXR1cE1vZGUgPSBpc1N0ZFNldHVwTW9kZTtcclxuICAgICAgICB0aGlzLmF1ZGl0TG9nLmxvZ0NvbnRlbnQgPSB0aGlzLmF1ZGl0TG9nLmxvZ0NvbnRlbnQucmVwbGFjZSgve3N1Y2Nlc3N9L2csXHJcbiAgICAgICAgICAgIHN1Y2Nlc3MudG9TdHJpbmcoKSkucmVwbGFjZSgve2Vycm9yQ29kZX0vZywgc3VibWl0UmVzcG9uc2VSZXR1cm4ucmVzcG9uc2VTdWJtaXRFcnJvckNvZGUudG9TdHJpbmcoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXRzIHRoZSBhcHByb3ZhbCBzdGF0dXMgb2YgZXhhbWluZXIgd2hpbGUgc3VibWl0dGluZyB0aGUgcmVzcG9uc2VcclxuICAgICAqL1xyXG4gICAgZ2V0IGdldEV4YW1pbmVyQXBwcm92YWwoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZXhhbWluZXJBcHByb3ZhbDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldHMgdGhlIHN1Ym1pdCByZXNwb25zZSByZXR1cm4gZGV0YWlsc1xyXG4gICAgICovXHJcbiAgICBnZXQgZ2V0U3VibWl0UmVzcG9uc2VSZXR1cm5EZXRhaWxzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zdWJtaXRSZXNwb25zZVJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldHMgdGhlIGN1cnJlbnQgd29ya2xpc3QgdHlwZS5cclxuICAgICAqL1xyXG4gICAgZ2V0IGdldEN1cnJlbnRXb3JrbGlzdFR5cGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMud29ya2xpc3RUeXBlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0cyB3aGV0aGVyIHRoZSByZXNwb25zZSBoYXMgYmVlbiBzdWJtaXR0ZWQgZnJvbSBtYXJrc2NoZW1lXHJcbiAgICAgKi9cclxuICAgIGdldCBpc0Zyb21NYXJrU2NoZW1lKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZyb21NYXJrU2NoZW1lO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0c3RoZSBsaXN0IG9mIHN1Ym1pdHRlZCBNYXJrZ3JvdXBpZHNcclxuICAgICAqL1xyXG4gICAgZ2V0IGdldFN1Ym1pdHRlZE1hcmtHcm91cElkcygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tYXJrR3JvdXBJZHM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXRzIHRoZSAgc2VsZWN0ZWREaXNwbGF5SWRcclxuICAgICAqL1xyXG4gICAgZ2V0IGdldFNlbGVjdGVkRGlzcGxheUlkKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zZWxlY3RlZERpc3BsYXlJZDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldHMgd2hldGhlciBzdWJtaXR0ZWQgZnJvbSBTdGFuZGFyZGlzYXRpb24gU2V0dXAgV29ya2xpc3RcclxuICAgICAqL1xyXG4gICAgZ2V0IGlzU3RkU2V0dXBNb2RlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9pc1N0ZFNldHVwTW9kZTtcclxuICAgIH1cclxufVxyXG5leHBvcnQgPSBTdWJtaXRSZXNwb25zZUNvbXBsZXRlZEFjdGlvbjtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L3NvdXJjZS1tYXAtbG9hZGVyIS4vc3JjL2FjdGlvbnMvc3VibWl0L3N1Ym1pdHJlc3BvbnNlY29tcGxldGVkYWN0aW9uLnRzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFFQTtBQUdBOztBQUVBO0FBQ0E7QUFBQTtBQVVBOzs7QUFHQTtBQUNBO0FBQUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBS0E7QUFIQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQUE7QUFLQTtBQUhBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFBQTtBQUtBO0FBSEE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUFBO0FBS0E7QUFIQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQUE7QUFLQTtBQUhBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFBQTtBQUtBO0FBSEE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUFBO0FBS0E7QUFIQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTtBQUFBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9");

/***/ }),

/***/ 346:
/* no static exports found */
/* all exports used */
/*!***********************************************************!*\
  !*** ./src/actions/submit/submitresponsestartedaction.ts ***!
  \***********************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar action = __webpack_require__(/*! ../base/action */ 229);\r\nvar actionType = __webpack_require__(/*! ../base/actiontypes */ 228);\r\n/**\r\n * Action to start submit single response\r\n */\r\nvar SubmitResponseStartedAction = /** @class */ (function (_super) {\r\n    __extends(SubmitResponseStartedAction, _super);\r\n    /**\r\n     * Constructor for ResponseSubmitStarted\r\n     * @param markGroupId The mark group id\r\n     */\r\n    function SubmitResponseStartedAction(markGroupId) {\r\n        var _this = _super.call(this, action.Source.View, actionType.SINGLE_RESPONSE_SUBMIT_STARTED) || this;\r\n        _this._markGroupId = markGroupId;\r\n        _this.auditLog.logContent = _this.auditLog.logContent.replace(/{markGroupId}/g, markGroupId.toString());\r\n        return _this;\r\n    }\r\n    Object.defineProperty(SubmitResponseStartedAction.prototype, \"getMarkGroupId\", {\r\n        /**\r\n         * Gets the mark group id\r\n         */\r\n        get: function () {\r\n            return this._markGroupId;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return SubmitResponseStartedAction;\r\n}(action));\r\nmodule.exports = SubmitResponseStartedAction;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzQ2LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2FjdGlvbnMvc3VibWl0L3N1Ym1pdHJlc3BvbnNlc3RhcnRlZGFjdGlvbi50cz9hYzA0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBhY3Rpb24gPSByZXF1aXJlKCcuLi9iYXNlL2FjdGlvbicpO1xyXG5pbXBvcnQgYWN0aW9uVHlwZSA9IHJlcXVpcmUoJy4uL2Jhc2UvYWN0aW9udHlwZXMnKTtcclxuaW1wb3J0IGFjdGlvbkF1ZGl0TG9nSW5mbyA9IHJlcXVpcmUoJy4uL2Jhc2UvYXVkaXRsb2dpbmZvL2FjdGlvbmF1ZGl0bG9naW5mbycpO1xyXG5cclxuLyoqXHJcbiAqIEFjdGlvbiB0byBzdGFydCBzdWJtaXQgc2luZ2xlIHJlc3BvbnNlXHJcbiAqL1xyXG5jbGFzcyBTdWJtaXRSZXNwb25zZVN0YXJ0ZWRBY3Rpb24gZXh0ZW5kcyBhY3Rpb24ge1xyXG5cclxuICAgIHByaXZhdGUgX21hcmtHcm91cElkOiBudW1iZXI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb25zdHJ1Y3RvciBmb3IgUmVzcG9uc2VTdWJtaXRTdGFydGVkXHJcbiAgICAgKiBAcGFyYW0gbWFya0dyb3VwSWQgVGhlIG1hcmsgZ3JvdXAgaWRcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoIG1hcmtHcm91cElkOiBudW1iZXIpIHtcclxuICAgICAgICBzdXBlcihhY3Rpb24uU291cmNlLlZpZXcsIGFjdGlvblR5cGUuU0lOR0xFX1JFU1BPTlNFX1NVQk1JVF9TVEFSVEVEKTtcclxuICAgICAgICB0aGlzLl9tYXJrR3JvdXBJZCA9IG1hcmtHcm91cElkO1xyXG4gICAgICAgIHRoaXMuYXVkaXRMb2cubG9nQ29udGVudCA9IHRoaXMuYXVkaXRMb2cubG9nQ29udGVudC5yZXBsYWNlKC97bWFya0dyb3VwSWR9L2csIG1hcmtHcm91cElkLnRvU3RyaW5nKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0cyB0aGUgbWFyayBncm91cCBpZFxyXG4gICAgICovXHJcbiAgICBnZXQgZ2V0TWFya0dyb3VwSWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX21hcmtHcm91cElkO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydCA9IFN1Ym1pdFJlc3BvbnNlU3RhcnRlZEFjdGlvbjtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L3NvdXJjZS1tYXAtbG9hZGVyIS4vc3JjL2FjdGlvbnMvc3VibWl0L3N1Ym1pdHJlc3BvbnNlc3RhcnRlZGFjdGlvbi50cyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBR0E7O0FBRUE7QUFDQTtBQUFBO0FBSUE7OztBQUdBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7O0FBQ0E7QUFLQTtBQUhBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFBQTtBQUNBO0FBQUE7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),

/***/ 347:
/* no static exports found */
/* all exports used */
/*!*******************************************************!*\
  !*** ./src/components/awarding/awardingindicator.tsx ***!
  \*******************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n/* tslint:disable:no-unused-variable */\r\nvar React = __webpack_require__(/*! react */ 0);\r\n/* tslint:enable:no-unused-variable */\r\nvar pureRenderComponent = __webpack_require__(/*! ../base/purerendercomponent */ 227);\r\nvar localeStore = __webpack_require__(/*! ../../stores/locale/localestore */ 226);\r\nvar navigationHelper = __webpack_require__(/*! ../utility/navigation/navigationhelper */ 248);\r\nvar enums = __webpack_require__(/*! ../utility/enums */ 225);\r\nvar popupHelper = __webpack_require__(/*! ../utility/popup/popuphelper */ 288);\r\nvar markingStore = __webpack_require__(/*! ../../stores/marking/markingstore */ 236);\r\nvar markingHelper = __webpack_require__(/*! ../../utility/markscheme/markinghelper */ 267);\r\nvar responseStore = __webpack_require__(/*! ../../stores/response/responsestore */ 235);\r\nvar markingActionCreator = __webpack_require__(/*! ../../actions/marking/markingactioncreator */ 246);\r\n/**\r\n * Represents the Awarding notification indicator component\r\n */\r\nvar AwardingIndicator = /** @class */ (function (_super) {\r\n    __extends(AwardingIndicator, _super);\r\n    /**\r\n     * @constructor\r\n     */\r\n    function AwardingIndicator(properties, state) {\r\n        var _this = _super.call(this, properties, state) || this;\r\n        /**\r\n         * on Awarding Indicator Click method\r\n         */\r\n        _this.onAwardingIndicatorClick = function () {\r\n            var responseNavigationFailureReasons = markingHelper.canNavigateAwayFromCurrentResponse();\r\n            if (responseNavigationFailureReasons.length > 0) {\r\n                popupHelper.navigateAwayFromResponse(responseNavigationFailureReasons, enums.SaveAndNavigate.toAwarding);\r\n            }\r\n            else {\r\n                if (markingStore.instance.isMarkingInProgress ||\r\n                    responseStore.instance.selectedResponseViewMode === enums.ResponseViewMode.fullResponseView) {\r\n                    /* Save the selected mark scheme mark to the mark collection on response move */\r\n                    markingActionCreator.saveAndNavigate(enums.SaveAndNavigate.toAwarding);\r\n                }\r\n                else {\r\n                    navigationHelper.loadAwardingPage(false);\r\n                }\r\n            }\r\n        };\r\n        return _this;\r\n    }\r\n    /**\r\n     * Render method\r\n     */\r\n    AwardingIndicator.prototype.render = function () {\r\n        return (React.createElement(\"li\", { role: 'menuitem' },\r\n            React.createElement(\"a\", { id: this.props.id, href: 'javascript:void(0)', title: localeStore.instance.TranslateText('awarding.generic.awarding'), onClick: this.onAwardingIndicatorClick },\r\n                React.createElement(\"span\", { className: 'relative' },\r\n                    React.createElement(\"span\", { id: 'awardingNotification', className: this.props.hasAwardingJudgement ? 'notification-dot notify' : 'notification-dot' },\r\n                        React.createElement(\"span\", { className: 'sprite-icon awarding-star-icon' })),\r\n                    React.createElement(\"span\", { className: 'nav-text' }, localeStore.instance.TranslateText('awarding.generic.awarding-text'))))));\r\n    };\r\n    return AwardingIndicator;\r\n}(pureRenderComponent));\r\nmodule.exports = AwardingIndicator;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzQ3LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvYXdhcmRpbmcvYXdhcmRpbmdpbmRpY2F0b3IudHN4PzczMmIiXSwic291cmNlc0NvbnRlbnQiOlsiLyogdHNsaW50OmRpc2FibGU6bm8tdW51c2VkLXZhcmlhYmxlICovXHJcbmltcG9ydCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XHJcbi8qIHRzbGludDplbmFibGU6bm8tdW51c2VkLXZhcmlhYmxlICovXHJcbmltcG9ydCBwdXJlUmVuZGVyQ29tcG9uZW50ID0gcmVxdWlyZSgnLi4vYmFzZS9wdXJlcmVuZGVyY29tcG9uZW50Jyk7XHJcbmltcG9ydCBsb2NhbGVTdG9yZSA9IHJlcXVpcmUoJy4uLy4uL3N0b3Jlcy9sb2NhbGUvbG9jYWxlc3RvcmUnKTtcclxuaW1wb3J0IG5hdmlnYXRpb25IZWxwZXIgPSByZXF1aXJlKCcuLi91dGlsaXR5L25hdmlnYXRpb24vbmF2aWdhdGlvbmhlbHBlcicpO1xyXG5pbXBvcnQgZW51bXMgPSByZXF1aXJlKCcuLi91dGlsaXR5L2VudW1zJyk7XHJcbmltcG9ydCBwb3B1cEhlbHBlciA9IHJlcXVpcmUoJy4uL3V0aWxpdHkvcG9wdXAvcG9wdXBoZWxwZXInKTtcclxuaW1wb3J0IG1hcmtpbmdTdG9yZSA9IHJlcXVpcmUoJy4uLy4uL3N0b3Jlcy9tYXJraW5nL21hcmtpbmdzdG9yZScpO1xyXG5pbXBvcnQgbWFya2luZ0hlbHBlciA9IHJlcXVpcmUoJy4uLy4uL3V0aWxpdHkvbWFya3NjaGVtZS9tYXJraW5naGVscGVyJyk7XHJcbmltcG9ydCByZXNwb25zZVN0b3JlID0gcmVxdWlyZSgnLi4vLi4vc3RvcmVzL3Jlc3BvbnNlL3Jlc3BvbnNlc3RvcmUnKTtcclxuaW1wb3J0IG1hcmtpbmdBY3Rpb25DcmVhdG9yID0gcmVxdWlyZSgnLi4vLi4vYWN0aW9ucy9tYXJraW5nL21hcmtpbmdhY3Rpb25jcmVhdG9yJyk7XHJcblxyXG5cclxuLyoqXHJcbiAqIFByb3BlcnRpZXMgb2YgYXdhcmRpbmcgbm90aWZpY2F0aW9uIGluZGljYXRvciBjb21wb25lbnRcclxuICovXHJcbmludGVyZmFjZSBQcm9wcyBleHRlbmRzIExvY2FsZVNlbGVjdGlvbkJhc2UsIFByb3BzQmFzZSB7XHJcbiAgICBoYXNBd2FyZGluZ0p1ZGdlbWVudDogYm9vbGVhbjtcclxufVxyXG5cclxuLyoqXHJcbiAqIFJlcHJlc2VudHMgdGhlIEF3YXJkaW5nIG5vdGlmaWNhdGlvbiBpbmRpY2F0b3IgY29tcG9uZW50XHJcbiAqL1xyXG5jbGFzcyBBd2FyZGluZ0luZGljYXRvciBleHRlbmRzIHB1cmVSZW5kZXJDb21wb25lbnQ8UHJvcHMsIGFueT57XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAY29uc3RydWN0b3JcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IocHJvcGVydGllczogUHJvcHMsIHN0YXRlOiBhbnkpIHtcclxuICAgICAgICBzdXBlcihwcm9wZXJ0aWVzLCBzdGF0ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZW5kZXIgbWV0aG9kXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyByZW5kZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPGxpIHJvbGU9J21lbnVpdGVtJz5cclxuICAgICAgICAgICAgICAgIDxhIGlkPXt0aGlzLnByb3BzLmlkfVxyXG4gICAgICAgICAgICAgICAgICAgIGhyZWY9J2phdmFzY3JpcHQ6dm9pZCgwKSdcclxuICAgICAgICAgICAgICAgICAgICB0aXRsZT17bG9jYWxlU3RvcmUuaW5zdGFuY2UuVHJhbnNsYXRlVGV4dCgnYXdhcmRpbmcuZ2VuZXJpYy5hd2FyZGluZycpfVxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eyB0aGlzLm9uQXdhcmRpbmdJbmRpY2F0b3JDbGlja30+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSdyZWxhdGl2ZSc+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPSdhd2FyZGluZ05vdGlmaWNhdGlvbidcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17dGhpcy5wcm9wcy5oYXNBd2FyZGluZ0p1ZGdlbWVudCA/ICdub3RpZmljYXRpb24tZG90IG5vdGlmeScgOiAnbm90aWZpY2F0aW9uLWRvdCd9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSdzcHJpdGUtaWNvbiBhd2FyZGluZy1zdGFyLWljb24nPjwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J25hdi10ZXh0Jz57bG9jYWxlU3RvcmUuaW5zdGFuY2UuVHJhbnNsYXRlVGV4dCgnYXdhcmRpbmcuZ2VuZXJpYy5hd2FyZGluZy10ZXh0Jyl9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgPC9saT5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogb24gQXdhcmRpbmcgSW5kaWNhdG9yIENsaWNrIG1ldGhvZFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIG9uQXdhcmRpbmdJbmRpY2F0b3JDbGljayA9ICgpID0+IHtcclxuICAgICAgICBsZXQgcmVzcG9uc2VOYXZpZ2F0aW9uRmFpbHVyZVJlYXNvbnM6IEFycmF5PGVudW1zLlJlc3BvbnNlTmF2aWdhdGVGYWlsdXJlUmVhc29uPiA9XHJcbiAgICAgICAgICAgIG1hcmtpbmdIZWxwZXIuY2FuTmF2aWdhdGVBd2F5RnJvbUN1cnJlbnRSZXNwb25zZSgpO1xyXG4gICAgICAgIGlmIChyZXNwb25zZU5hdmlnYXRpb25GYWlsdXJlUmVhc29ucy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHBvcHVwSGVscGVyLm5hdmlnYXRlQXdheUZyb21SZXNwb25zZShyZXNwb25zZU5hdmlnYXRpb25GYWlsdXJlUmVhc29ucywgZW51bXMuU2F2ZUFuZE5hdmlnYXRlLnRvQXdhcmRpbmcpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChtYXJraW5nU3RvcmUuaW5zdGFuY2UuaXNNYXJraW5nSW5Qcm9ncmVzcyB8fFxyXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VTdG9yZS5pbnN0YW5jZS5zZWxlY3RlZFJlc3BvbnNlVmlld01vZGUgPT09IGVudW1zLlJlc3BvbnNlVmlld01vZGUuZnVsbFJlc3BvbnNlVmlldykge1xyXG4gICAgICAgICAgICAgICAgLyogU2F2ZSB0aGUgc2VsZWN0ZWQgbWFyayBzY2hlbWUgbWFyayB0byB0aGUgbWFyayBjb2xsZWN0aW9uIG9uIHJlc3BvbnNlIG1vdmUgKi9cclxuICAgICAgICAgICAgICAgIG1hcmtpbmdBY3Rpb25DcmVhdG9yLnNhdmVBbmROYXZpZ2F0ZShlbnVtcy5TYXZlQW5kTmF2aWdhdGUudG9Bd2FyZGluZyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBuYXZpZ2F0aW9uSGVscGVyLmxvYWRBd2FyZGluZ1BhZ2UoZmFsc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgPSBBd2FyZGluZ0luZGljYXRvcjtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L3NvdXJjZS1tYXAtbG9hZGVyIS4vc3JjL2NvbXBvbmVudHMvYXdhcmRpbmcvYXdhcmRpbmdpbmRpY2F0b3IudHN4Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVVBOztBQUVBO0FBQ0E7QUFBQTtBQUVBOztBQUVBO0FBQ0E7QUFBQTtBQTBCQTs7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQXpDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBSUE7QUFDQTtBQUVBO0FBRUE7QUFLQTtBQW9CQTtBQUFBO0FBRUE7Iiwic291cmNlUm9vdCI6IiJ9");

/***/ }),

/***/ 348:
/* no static exports found */
/* all exports used */
/*!**************************************************!*\
  !*** ./src/components/breadcrumb/breadcrumb.tsx ***!
  \**************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n/*\r\n  React component for Authorized BreadCrumb\r\n*/\r\n/* tslint:disable:no-unused-variable */\r\nvar React = __webpack_require__(/*! react */ 0);\r\n/* tslint:enable:no-unused-variable */\r\nvar pureRenderComponent = __webpack_require__(/*! ../../components/base/purerendercomponent */ 227);\r\nvar enums = __webpack_require__(/*! ../utility/enums */ 225);\r\nvar breadCrumbHelper = __webpack_require__(/*! ../../utility/breadcrumb/breadcrumbhelper */ 377);\r\nvar qigStore = __webpack_require__(/*! ../../stores/qigselector/qigstore */ 230);\r\nvar userInfoStore = __webpack_require__(/*! ../../stores/userinfo/userinfostore */ 244);\r\nvar responseStore = __webpack_require__(/*! ../../stores/response/responsestore */ 235);\r\nvar worklistStore = __webpack_require__(/*! ../../stores/worklist/workliststore */ 231);\r\n/**\r\n * React component class for BreadCrumb\r\n */\r\nvar BreadCrumb = /** @class */ (function (_super) {\r\n    __extends(BreadCrumb, _super);\r\n    /**\r\n     * Constructor\r\n     * @param props\r\n     * @param state\r\n     */\r\n    function BreadCrumb(props, state) {\r\n        var _this = _super.call(this, props, state) || this;\r\n        _this._loadCurrentExaminerWorklist = false;\r\n        /**\r\n         * This will show the header icons after QIGs loaded\r\n         */\r\n        _this.qigSelected = function () {\r\n            _this.setState({\r\n                renderedOn: Date.now()\r\n            });\r\n        };\r\n        /**\r\n         * rerender breadcrumb after rendering the response id.\r\n         */\r\n        _this.reRender = function () {\r\n            _this.setState({\r\n                renderedOn: Date.now()\r\n            });\r\n        };\r\n        _this.state = {\r\n            renderedOn: Date.now()\r\n        };\r\n        return _this;\r\n    }\r\n    /**\r\n     * Render method\r\n     */\r\n    BreadCrumb.prototype.render = function () {\r\n        var breadcrumbStyle;\r\n        var next = 0;\r\n        var prev = 0;\r\n        var respId = 0;\r\n        // Calculating the width of breadcrumb to adjuct dynamically with response id and on resize.\r\n        if (this.props.containerPage === enums.PageContainers.Response) {\r\n            if (document.getElementsByClassName('response-title').item(0)) {\r\n                respId = document.getElementsByClassName('response-title').item(0).clientWidth;\r\n            }\r\n            if (document.getElementsByClassName('response-nav response-nav-next').item(0)) {\r\n                next = document.getElementsByClassName('response-nav response-nav-next').item(0).clientWidth;\r\n            }\r\n            if (document.getElementsByClassName('response-nav response-nav-prev').item(0)) {\r\n                prev = document.getElementsByClassName('response-nav response-nav-prev').item(0).clientWidth;\r\n            }\r\n            var resIdWidth = (respId + next + prev) / 2;\r\n            // Here 40 pixel is used for padding\r\n            breadcrumbStyle = {\r\n                width: 'calc(50vw - ' + resIdWidth + 'px - 40px)'\r\n            };\r\n        }\r\n        return (React.createElement(\"div\", { id: this.props.id, key: this.props.id + '_key', className: 'breadcrumb-holder' },\r\n            React.createElement(\"ul\", { style: breadcrumbStyle, className: 'breadcrumb' }, this.renderBreadCrumbItems())));\r\n    };\r\n    /**\r\n     * Component did mount\r\n     */\r\n    BreadCrumb.prototype.componentDidMount = function () {\r\n        qigStore.instance.addListener(qigStore.QigStore.QIG_SELECTED_EVENT, this.qigSelected);\r\n        responseStore.instance.addListener(responseStore.ResponseStore.RESPONSE_ID_RENDERED_EVENT, this.reRender);\r\n        worklistStore.instance.addListener(worklistStore.WorkListStore.WORKLIST_MARKING_MODE_CHANGE, this.reRender);\r\n        worklistStore.instance.addListener(worklistStore.WorkListStore.MARK_CHECK_EXAMINERS_DATA_RETRIVED, this.reRender);\r\n    };\r\n    /**\r\n     * Unsubscribe events\r\n     */\r\n    BreadCrumb.prototype.componentWillUnmount = function () {\r\n        qigStore.instance.removeListener(qigStore.QigStore.QIG_SELECTED_EVENT, this.qigSelected);\r\n        responseStore.instance.removeListener(responseStore.ResponseStore.RESPONSE_ID_RENDERED_EVENT, this.reRender);\r\n        worklistStore.instance.removeListener(worklistStore.WorkListStore.WORKLIST_MARKING_MODE_CHANGE, this.reRender);\r\n        worklistStore.instance.removeListener(worklistStore.WorkListStore.MARK_CHECK_EXAMINERS_DATA_RETRIVED, this.reRender);\r\n    };\r\n    /**\r\n     * Render bread Crumb items\r\n     */\r\n    BreadCrumb.prototype.renderBreadCrumbItems = function () {\r\n        var _breadCrumbElements = new Array();\r\n        // If it is team management worklist then examiner name should display\r\n        if (userInfoStore.instance.currentOperationMode === enums.MarkerOperationMode.TeamManagement &&\r\n            this.props.containerPage === enums.PageContainers.WorkList) {\r\n            if (this.props.examinerName) {\r\n                _breadCrumbElements = breadCrumbHelper.getBreadCrumbTrail();\r\n            }\r\n        }\r\n        else {\r\n            _breadCrumbElements = breadCrumbHelper.getBreadCrumbTrail();\r\n        }\r\n        return _breadCrumbElements;\r\n    };\r\n    return BreadCrumb;\r\n}(pureRenderComponent));\r\nmodule.exports = BreadCrumb;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzQ4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvYnJlYWRjcnVtYi9icmVhZGNydW1iLnRzeD80ODg2Il0sInNvdXJjZXNDb250ZW50IjpbIi8qXHJcbiAgUmVhY3QgY29tcG9uZW50IGZvciBBdXRob3JpemVkIEJyZWFkQ3J1bWJcclxuKi9cclxuLyogdHNsaW50OmRpc2FibGU6bm8tdW51c2VkLXZhcmlhYmxlICovXHJcbmltcG9ydCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XHJcbi8qIHRzbGludDplbmFibGU6bm8tdW51c2VkLXZhcmlhYmxlICovXHJcbmltcG9ydCBwdXJlUmVuZGVyQ29tcG9uZW50ID0gcmVxdWlyZSgnLi4vLi4vY29tcG9uZW50cy9iYXNlL3B1cmVyZW5kZXJjb21wb25lbnQnKTtcclxuaW1wb3J0IGVudW1zID0gcmVxdWlyZSgnLi4vdXRpbGl0eS9lbnVtcycpO1xyXG5pbXBvcnQgYnJlYWRDcnVtYkhlbHBlciA9IHJlcXVpcmUoJy4uLy4uL3V0aWxpdHkvYnJlYWRjcnVtYi9icmVhZGNydW1iaGVscGVyJyk7XHJcbmltcG9ydCBxaWdTdG9yZSA9IHJlcXVpcmUoJy4uLy4uL3N0b3Jlcy9xaWdzZWxlY3Rvci9xaWdzdG9yZScpO1xyXG5pbXBvcnQgdXNlckluZm9TdG9yZSA9IHJlcXVpcmUoJy4uLy4uL3N0b3Jlcy91c2VyaW5mby91c2VyaW5mb3N0b3JlJyk7XHJcbmltcG9ydCBCcmVhZENydW1iSXRlbSA9IHJlcXVpcmUoJy4vYnJlYWRjcnVtYml0ZW0nKTtcclxuaW1wb3J0IHJlc3BvbnNlU3RvcmUgPSByZXF1aXJlKCcuLi8uLi9zdG9yZXMvcmVzcG9uc2UvcmVzcG9uc2VzdG9yZScpO1xyXG5pbXBvcnQgbG9jYWxlU3RvcmUgPSByZXF1aXJlKCcuLi8uLi9zdG9yZXMvbG9jYWxlL2xvY2FsZXN0b3JlJyk7XHJcbmltcG9ydCB3b3JrbGlzdFN0b3JlID0gcmVxdWlyZSgnLi4vLi4vc3RvcmVzL3dvcmtsaXN0L3dvcmtsaXN0c3RvcmUnKTtcclxuXHJcbi8qKlxyXG4gKiBQcm9wZXJ0aWVzIG9mIGEgY29tcG9uZW50XHJcbiAqL1xyXG5pbnRlcmZhY2UgUHJvcHMgZXh0ZW5kcyBMb2NhbGVTZWxlY3Rpb25CYXNlLCBQcm9wc0Jhc2Uge1xyXG4gICAgY29udGFpbmVyUGFnZTogZW51bXMuUGFnZUNvbnRhaW5lcnM7XHJcbiAgICBleGFtaW5lck5hbWU/OiBzdHJpbmc7XHJcbiAgICByZW5kZXJlZE9uPzogbnVtYmVyO1xyXG59XHJcblxyXG4vKipcclxuICogQWxsIGZpZWxkcyBvcHRpb25hbCB0byBhbGxvdyBwYXJ0aWFsIHN0YXRlIHVwZGF0ZXMgaW4gc2V0U3RhdGVcclxuICovXHJcbmludGVyZmFjZSBTdGF0ZSB7XHJcbiAgICByZW5kZXJlZE9uPzogbnVtYmVyO1xyXG59XHJcblxyXG4vKipcclxuICogUmVhY3QgY29tcG9uZW50IGNsYXNzIGZvciBCcmVhZENydW1iXHJcbiAqL1xyXG5jbGFzcyBCcmVhZENydW1iIGV4dGVuZHMgcHVyZVJlbmRlckNvbXBvbmVudDxQcm9wcywgU3RhdGU+IHtcclxuXHJcbiAgICBwcml2YXRlIF9sb2FkQ3VycmVudEV4YW1pbmVyV29ya2xpc3Q6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbnN0cnVjdG9yXHJcbiAgICAgKiBAcGFyYW0gcHJvcHNcclxuICAgICAqIEBwYXJhbSBzdGF0ZVxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9wczogUHJvcHMsIHN0YXRlOiBTdGF0ZSkge1xyXG4gICAgICAgIHN1cGVyKHByb3BzLCBzdGF0ZSk7XHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgICAgICAgcmVuZGVyZWRPbjogRGF0ZS5ub3coKVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZW5kZXIgbWV0aG9kXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyByZW5kZXIoKSB7XHJcbiAgICAgICAgbGV0IGJyZWFkY3J1bWJTdHlsZTogUmVhY3QuQ1NTUHJvcGVydGllcztcclxuICAgICAgICBsZXQgbmV4dCA9IDA7XHJcbiAgICAgICAgbGV0IHByZXYgPSAwO1xyXG4gICAgICAgIGxldCByZXNwSWQgPSAwO1xyXG5cclxuICAgICAgICAvLyBDYWxjdWxhdGluZyB0aGUgd2lkdGggb2YgYnJlYWRjcnVtYiB0byBhZGp1Y3QgZHluYW1pY2FsbHkgd2l0aCByZXNwb25zZSBpZCBhbmQgb24gcmVzaXplLlxyXG4gICAgICAgIGlmICh0aGlzLnByb3BzLmNvbnRhaW5lclBhZ2UgPT09IGVudW1zLlBhZ2VDb250YWluZXJzLlJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdyZXNwb25zZS10aXRsZScpLml0ZW0oMCkpIHtcclxuICAgICAgICAgICAgICAgIHJlc3BJZCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3Jlc3BvbnNlLXRpdGxlJykuaXRlbSgwKS5jbGllbnRXaWR0aDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgncmVzcG9uc2UtbmF2IHJlc3BvbnNlLW5hdi1uZXh0JykuaXRlbSgwKSkge1xyXG4gICAgICAgICAgICAgICAgbmV4dCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3Jlc3BvbnNlLW5hdiByZXNwb25zZS1uYXYtbmV4dCcpLml0ZW0oMCkuY2xpZW50V2lkdGg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3Jlc3BvbnNlLW5hdiByZXNwb25zZS1uYXYtcHJldicpLml0ZW0oMCkpIHtcclxuICAgICAgICAgICAgICAgIHByZXYgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdyZXNwb25zZS1uYXYgcmVzcG9uc2UtbmF2LXByZXYnKS5pdGVtKDApLmNsaWVudFdpZHRoO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsZXQgcmVzSWRXaWR0aCA9IChyZXNwSWQgKyBuZXh0ICsgcHJldikgLyAyO1xyXG5cclxuICAgICAgICAgICAgLy8gSGVyZSA0MCBwaXhlbCBpcyB1c2VkIGZvciBwYWRkaW5nXHJcbiAgICAgICAgICAgIGJyZWFkY3J1bWJTdHlsZSA9IHtcclxuICAgICAgICAgICAgICAgIHdpZHRoOiAnY2FsYyg1MHZ3IC0gJyArIHJlc0lkV2lkdGggKyAncHggLSA0MHB4KSdcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgIGlkPSB7dGhpcy5wcm9wcy5pZH1cclxuICAgICAgICAgICAgICAgIGtleT0ge3RoaXMucHJvcHMuaWQgKyAnX2tleSd9XHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWUgPSAnYnJlYWRjcnVtYi1ob2xkZXInPlxyXG4gICAgICAgICAgICAgICAgPHVsXHJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e2JyZWFkY3J1bWJTdHlsZX1cclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWUgPSAnYnJlYWRjcnVtYic+XHJcbiAgICAgICAgICAgICAgICAgICAge3RoaXMucmVuZGVyQnJlYWRDcnVtYkl0ZW1zKCkgfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvdWw+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ29tcG9uZW50IGRpZCBtb3VudFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgY29tcG9uZW50RGlkTW91bnQoKSB7XHJcbiAgICAgICAgcWlnU3RvcmUuaW5zdGFuY2UuYWRkTGlzdGVuZXIocWlnU3RvcmUuUWlnU3RvcmUuUUlHX1NFTEVDVEVEX0VWRU5ULCB0aGlzLnFpZ1NlbGVjdGVkKTtcclxuICAgICAgICByZXNwb25zZVN0b3JlLmluc3RhbmNlLmFkZExpc3RlbmVyKHJlc3BvbnNlU3RvcmUuUmVzcG9uc2VTdG9yZS5SRVNQT05TRV9JRF9SRU5ERVJFRF9FVkVOVCwgdGhpcy5yZVJlbmRlcik7XHJcbiAgICAgICAgd29ya2xpc3RTdG9yZS5pbnN0YW5jZS5hZGRMaXN0ZW5lcih3b3JrbGlzdFN0b3JlLldvcmtMaXN0U3RvcmUuV09SS0xJU1RfTUFSS0lOR19NT0RFX0NIQU5HRSwgdGhpcy5yZVJlbmRlcik7XHJcbiAgICAgICAgd29ya2xpc3RTdG9yZS5pbnN0YW5jZS5hZGRMaXN0ZW5lcih3b3JrbGlzdFN0b3JlLldvcmtMaXN0U3RvcmUuTUFSS19DSEVDS19FWEFNSU5FUlNfREFUQV9SRVRSSVZFRCwgdGhpcy5yZVJlbmRlcik7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVbnN1YnNjcmliZSBldmVudHNcclxuICAgICAqL1xyXG4gICAgcHVibGljIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xyXG4gICAgICAgIHFpZ1N0b3JlLmluc3RhbmNlLnJlbW92ZUxpc3RlbmVyKHFpZ1N0b3JlLlFpZ1N0b3JlLlFJR19TRUxFQ1RFRF9FVkVOVCwgdGhpcy5xaWdTZWxlY3RlZCk7XHJcbiAgICAgICAgcmVzcG9uc2VTdG9yZS5pbnN0YW5jZS5yZW1vdmVMaXN0ZW5lcihyZXNwb25zZVN0b3JlLlJlc3BvbnNlU3RvcmUuUkVTUE9OU0VfSURfUkVOREVSRURfRVZFTlQsIHRoaXMucmVSZW5kZXIpO1xyXG4gICAgICAgIHdvcmtsaXN0U3RvcmUuaW5zdGFuY2UucmVtb3ZlTGlzdGVuZXIod29ya2xpc3RTdG9yZS5Xb3JrTGlzdFN0b3JlLldPUktMSVNUX01BUktJTkdfTU9ERV9DSEFOR0UsIHRoaXMucmVSZW5kZXIpO1xyXG4gICAgICAgIHdvcmtsaXN0U3RvcmUuaW5zdGFuY2UucmVtb3ZlTGlzdGVuZXIod29ya2xpc3RTdG9yZS5Xb3JrTGlzdFN0b3JlLk1BUktfQ0hFQ0tfRVhBTUlORVJTX0RBVEFfUkVUUklWRUQsIHRoaXMucmVSZW5kZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhpcyB3aWxsIHNob3cgdGhlIGhlYWRlciBpY29ucyBhZnRlciBRSUdzIGxvYWRlZFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHFpZ1NlbGVjdGVkID0gKCk6IHZvaWQgPT4ge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICByZW5kZXJlZE9uOiBEYXRlLm5vdygpXHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogcmVyZW5kZXIgYnJlYWRjcnVtYiBhZnRlciByZW5kZXJpbmcgdGhlIHJlc3BvbnNlIGlkLlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHJlUmVuZGVyID0gKCk6IHZvaWQgPT4ge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICByZW5kZXJlZE9uOiBEYXRlLm5vdygpXHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVuZGVyIGJyZWFkIENydW1iIGl0ZW1zXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgcmVuZGVyQnJlYWRDcnVtYkl0ZW1zKCk6IEFycmF5PEpTWC5FbGVtZW50PiB7XHJcbiAgICAgICAgdmFyIF9icmVhZENydW1iRWxlbWVudHM6IEFycmF5PEpTWC5FbGVtZW50PiA9IG5ldyBBcnJheTxKU1guRWxlbWVudD4oKTtcclxuICAgICAgICAvLyBJZiBpdCBpcyB0ZWFtIG1hbmFnZW1lbnQgd29ya2xpc3QgdGhlbiBleGFtaW5lciBuYW1lIHNob3VsZCBkaXNwbGF5XHJcbiAgICAgICAgaWYgKHVzZXJJbmZvU3RvcmUuaW5zdGFuY2UuY3VycmVudE9wZXJhdGlvbk1vZGUgPT09IGVudW1zLk1hcmtlck9wZXJhdGlvbk1vZGUuVGVhbU1hbmFnZW1lbnQgJiZcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5jb250YWluZXJQYWdlID09PSBlbnVtcy5QYWdlQ29udGFpbmVycy5Xb3JrTGlzdCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5leGFtaW5lck5hbWUpIHtcclxuICAgICAgICAgICAgICAgIF9icmVhZENydW1iRWxlbWVudHMgPSBicmVhZENydW1iSGVscGVyLmdldEJyZWFkQ3J1bWJUcmFpbCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgX2JyZWFkQ3J1bWJFbGVtZW50cyA9IGJyZWFkQ3J1bWJIZWxwZXIuZ2V0QnJlYWRDcnVtYlRyYWlsKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gX2JyZWFkQ3J1bWJFbGVtZW50cztcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0ID0gQnJlYWRDcnVtYjtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L3NvdXJjZS1tYXAtbG9hZGVyIS4vc3JjL2NvbXBvbmVudHMvYnJlYWRjcnVtYi9icmVhZGNydW1iLnRzeCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBa0JBOztBQUVBO0FBQ0E7QUFBQTtBQUlBOzs7O0FBSUE7QUFDQTtBQUFBO0FBUEE7QUE2RUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBcEZBO0FBQ0E7QUFDQTs7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUtBO0FBT0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBb0JBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFFQTsiLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),

/***/ 349:
/* no static exports found */
/* all exports used */
/*!******************************************************!*\
  !*** ./src/components/breadcrumb/breadcrumbitem.tsx ***!
  \******************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n/*\r\n  React component for Authorized BreadCrumb\r\n*/\r\n/* tslint:disable:no-unused-variable */\r\nvar React = __webpack_require__(/*! react */ 0);\r\n/* tslint:enable:no-unused-variable */\r\nvar pureRenderComponent = __webpack_require__(/*! ../../components/base/purerendercomponent */ 227);\r\nvar loginSession = __webpack_require__(/*! ../../app/loginsession */ 252);\r\nvar userInfoActionCreator = __webpack_require__(/*! ../../actions/userinfo/userinfoactioncreator */ 255);\r\nvar enums = __webpack_require__(/*! ../utility/enums */ 225);\r\nvar userInfoStore = __webpack_require__(/*! ../../stores/userinfo/userinfostore */ 244);\r\nvar qigSelectorActionCreator = __webpack_require__(/*! ../../actions/qigselector/qigselectoractioncreator */ 253);\r\nvar markingStore = __webpack_require__(/*! ../../stores/marking/markingstore */ 236);\r\nvar worklistActionCreator = __webpack_require__(/*! ../../actions/worklist/worklistactioncreator */ 261);\r\nvar navigationHelper = __webpack_require__(/*! ../../components/utility/navigation/navigationhelper */ 248);\r\nvar operationModeHelper = __webpack_require__(/*! ../utility/userdetails/userinfo/operationmodehelper */ 289);\r\nvar Logo = __webpack_require__(/*! ../utility/logo/logo */ 443);\r\nvar storageAdapterHelper = __webpack_require__(/*! ../../dataservices/storageadapters/storageadapterhelper */ 269);\r\nvar standardisationSetupStore = __webpack_require__(/*! ../../stores/standardisationsetup/standardisationsetupstore */ 237);\r\n/**\r\n * React component class for BreadCrumb\r\n */\r\nvar BreadCrumbItem = /** @class */ (function (_super) {\r\n    __extends(BreadCrumbItem, _super);\r\n    /**\r\n     * Constructor\r\n     * @param props\r\n     * @param state\r\n     */\r\n    function BreadCrumbItem(props, state) {\r\n        var _this = _super.call(this, props, state) || this;\r\n        _this._loadCurrentExaminerWorklist = false;\r\n        _this.storageAdapterHelper = new storageAdapterHelper();\r\n        /**\r\n         * Handles the click\r\n         * @param {any} source\r\n         * @returns\r\n         */\r\n        _this.handleBreadCrumbClick = function (pageContainer, navigateTo) {\r\n            switch (navigateTo) {\r\n                case enums.PageContainers.Login:\r\n                    break;\r\n                case enums.PageContainers.QigSelector:\r\n                    navigationHelper.handleNavigation(enums.SaveAndNavigate.toQigSelector);\r\n                    break;\r\n                case enums.PageContainers.WorkList:\r\n                    navigationHelper.handleNavigation(enums.SaveAndNavigate.toWorklist);\r\n                    break;\r\n                case enums.PageContainers.Response:\r\n                    break;\r\n                case enums.PageContainers.Message:\r\n                    navigationHelper.handleNavigation(enums.SaveAndNavigate.toInboxMessagePage);\r\n                    break;\r\n                case enums.PageContainers.TeamManagement:\r\n                    navigationHelper.handleNavigation(enums.SaveAndNavigate.toTeam);\r\n                    break;\r\n                case enums.PageContainers.MarkingCheckExaminersWorkList:\r\n                    navigationHelper.handleNavigation(enums.SaveAndNavigate.toMarkingCheckWorklist);\r\n                    break;\r\n                case enums.PageContainers.StandardisationSetup:\r\n                    navigationHelper.handleNavigation(_this.navigateToForStandardisationSetupWorklist());\r\n                    break;\r\n                case enums.PageContainers.Awarding:\r\n                    navigationHelper.loadAwardingPage(false);\r\n                    break;\r\n            }\r\n        };\r\n        /**\r\n         * Go out from response after saving mark if there is any\r\n         */\r\n        _this.navigateAwayFromResponse = function () {\r\n            if (markingStore.instance.navigateTo === enums.SaveAndNavigate.toWorklist ||\r\n                markingStore.instance.navigateTo === enums.SaveAndNavigate.toQigSelector ||\r\n                markingStore.instance.navigateTo === enums.SaveAndNavigate.toMenu ||\r\n                markingStore.instance.navigateTo === enums.SaveAndNavigate.toTeam ||\r\n                markingStore.instance.navigateTo === enums.SaveAndNavigate.toMarkingCheckWorklist ||\r\n                markingStore.instance.navigateTo === enums.SaveAndNavigate.toProvisional ||\r\n                markingStore.instance.navigateTo === enums.SaveAndNavigate.toUnclassified ||\r\n                markingStore.instance.navigateTo === enums.SaveAndNavigate.toClassified ||\r\n                markingStore.instance.navigateTo === enums.SaveAndNavigate.toAwarding) {\r\n                /** When navigated to '~/worklist', IsResponseClose is set in worklist which is used in the qig selector component\r\n                 * to get the current response mode\r\n                 */\r\n                if (markingStore.instance.navigateTo !== enums.SaveAndNavigate.toMenu) {\r\n                    worklistActionCreator.responseClosed(true);\r\n                }\r\n                navigationHelper.loadContainerIfNeeded(enums.PageContainers.Response, enums.SaveMarksAndAnnotationsProcessingTriggerPoint.CloseResponse);\r\n            }\r\n        };\r\n        /**\r\n         * Go out from response after saving mark if there is any\r\n         */\r\n        _this.navigateToForStandardisationSetupWorklist = function () {\r\n            var selectedWorklist = standardisationSetupStore.instance.selectedStandardisationSetupWorkList;\r\n            var saveAndNavigateTo;\r\n            switch (selectedWorklist) {\r\n                case enums.StandardisationSetup.SelectResponse:\r\n                    saveAndNavigateTo = enums.SaveAndNavigate.toSelectResponses;\r\n                    break;\r\n                case enums.StandardisationSetup.UnClassifiedResponse:\r\n                    saveAndNavigateTo = enums.SaveAndNavigate.toUnclassified;\r\n                    break;\r\n                case enums.StandardisationSetup.ClassifiedResponse:\r\n                    saveAndNavigateTo = enums.SaveAndNavigate.toClassified;\r\n                    break;\r\n                case enums.StandardisationSetup.ProvisionalResponse:\r\n                    saveAndNavigateTo = enums.SaveAndNavigate.toProvisional;\r\n                    break;\r\n            }\r\n            return saveAndNavigateTo;\r\n        };\r\n        /**\r\n         * This method will be invoked on marker operation mode change\r\n         */\r\n        _this.onMarkerOperationModeChange = function (markerOperationMode, loadCurrentExaminerWorklist) {\r\n            // Marker clicked on worklist icon from TeamMangement worklist view we need to redirect\r\n            // Logined examiners worklist\r\n            if (loadCurrentExaminerWorklist && markerOperationMode === enums.MarkerOperationMode.Marking) {\r\n                userInfoActionCreator.resetDoLoadWorklistStatus();\r\n                // Invoke the action creator to Open the QIG\r\n                qigSelectorActionCreator.openQIG(operationModeHelper.markSchemeGroupId);\r\n            }\r\n        };\r\n        _this.state = {\r\n            renderedOn: Date.now()\r\n        };\r\n        return _this;\r\n    }\r\n    /**\r\n     * Render method\r\n     */\r\n    BreadCrumbItem.prototype.render = function () {\r\n        if (this.props.isA3Logo) {\r\n            return (React.createElement(\"li\", { className: 'breadcrumb-item dropdown-wrap header-dropdown', id: 'li_' + this.props.id, key: 'li_' + this.props.id + '_key' }, this.renderLogo()));\r\n        }\r\n        else {\r\n            return (React.createElement(\"li\", { className: 'breadcrumb-item', id: 'li_' + this.props.id, key: 'li_' + this.props.id + '_key' }, this.renderBreadCrumbItem()));\r\n        }\r\n    };\r\n    /**\r\n     * This function gets invoked when the component is about to be mounted\r\n     */\r\n    BreadCrumbItem.prototype.componentDidMount = function () {\r\n        markingStore.instance.addListener(markingStore.MarkingStore.READY_TO_NAVIGATE, this.navigateAwayFromResponse);\r\n        markingStore.instance.addListener(markingStore.MarkingStore.ACCEPT_QUALITY_ACTION_COMPLETED, this.navigateAwayFromResponse);\r\n        userInfoStore.instance.addListener(userInfoStore.UserInfoStore.MARKER_OPERATION_MODE_CHANGED, this.onMarkerOperationModeChange);\r\n    };\r\n    /**\r\n     * This function gets invoked when the component is about to be mounted\r\n     */\r\n    BreadCrumbItem.prototype.componentWillUnmount = function () {\r\n        markingStore.instance.removeListener(markingStore.MarkingStore.READY_TO_NAVIGATE, this.navigateAwayFromResponse);\r\n        markingStore.instance.removeListener(markingStore.MarkingStore.ACCEPT_QUALITY_ACTION_COMPLETED, this.navigateAwayFromResponse);\r\n        userInfoStore.instance.removeListener(userInfoStore.UserInfoStore.MARKER_OPERATION_MODE_CHANGED, this.onMarkerOperationModeChange);\r\n    };\r\n    /**\r\n     * This function will render breadcrumb items\r\n     */\r\n    BreadCrumbItem.prototype.renderBreadCrumbItem = function () {\r\n        if (this.props.isClickable) {\r\n            return (React.createElement(\"a\", { href: 'javascript:void(0)', id: 'a_' + this.props.id, onClick: this.handleBreadCrumbClick.bind(this, this.props.container, this.props.navigateTo), className: 'breadcrumb-anchor' }, this.props.breadCrumbString));\r\n        }\r\n        else {\r\n            return (React.createElement(\"span\", { id: 's_' + this.props.id, className: 'nav-text' }, this.props.breadCrumbString));\r\n        }\r\n    };\r\n    /**\r\n     * This method will render the logo based on login- Familiarisation/ Marking\r\n     */\r\n    BreadCrumbItem.prototype.renderLogo = function () {\r\n        if (loginSession.IS_FAMILIARISATION_LOGIN || loginSession.IS_SUPPORT_ADMIN_LOGIN) {\r\n            var logoText = void 0;\r\n            var id = void 0;\r\n            var key = void 0;\r\n            if (loginSession.IS_FAMILIARISATION_LOGIN) {\r\n                logoText = 'login.login-page.fam-button';\r\n                id = 'fam-logo-text';\r\n                key = 'fam-logo-text-key';\r\n            }\r\n            else {\r\n                logoText = 'login.login-page.support-admin-logo-text';\r\n                id = 'support-admin-logo-text';\r\n                key = 'support-admin-text-key';\r\n            }\r\n            return (React.createElement(Logo, { id: id, key: key, onLogoClick: navigationHelper.handleNavigation.bind(this, enums.SaveAndNavigate.toQigSelector), isFAMorSupportLogin: true, logoText: logoText }));\r\n        }\r\n        else if (this.props.isClickable) {\r\n            return (React.createElement(Logo, { id: 'assessor-logo', key: 'assessor-logo-key', onLogoClick: navigationHelper.handleNavigation.bind(this, enums.SaveAndNavigate.toQigSelector) }));\r\n        }\r\n        else {\r\n            return (React.createElement(Logo, { id: 'assessor-logo', key: 'assessor-logo-key' }));\r\n        }\r\n    };\r\n    return BreadCrumbItem;\r\n}(pureRenderComponent));\r\nmodule.exports = BreadCrumbItem;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzQ5LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvYnJlYWRjcnVtYi9icmVhZGNydW1iaXRlbS50c3g/NmU0NCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICBSZWFjdCBjb21wb25lbnQgZm9yIEF1dGhvcml6ZWQgQnJlYWRDcnVtYlxuKi9cbi8qIHRzbGludDpkaXNhYmxlOm5vLXVudXNlZC12YXJpYWJsZSAqL1xuaW1wb3J0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbi8qIHRzbGludDplbmFibGU6bm8tdW51c2VkLXZhcmlhYmxlICovXG5pbXBvcnQgcHVyZVJlbmRlckNvbXBvbmVudCA9IHJlcXVpcmUoJy4uLy4uL2NvbXBvbmVudHMvYmFzZS9wdXJlcmVuZGVyY29tcG9uZW50Jyk7XG5pbXBvcnQgbG9naW5TZXNzaW9uID0gcmVxdWlyZSgnLi4vLi4vYXBwL2xvZ2luc2Vzc2lvbicpO1xuaW1wb3J0IHVzZXJJbmZvQWN0aW9uQ3JlYXRvciA9IHJlcXVpcmUoJy4uLy4uL2FjdGlvbnMvdXNlcmluZm8vdXNlcmluZm9hY3Rpb25jcmVhdG9yJyk7XG5pbXBvcnQgZW51bXMgPSByZXF1aXJlKCcuLi91dGlsaXR5L2VudW1zJyk7XG5pbXBvcnQgbmF2aWdhdGlvblN0b3JlID0gcmVxdWlyZSgnLi4vLi4vc3RvcmVzL25hdmlnYXRpb24vbmF2aWdhdGlvbnN0b3JlJyk7XG5pbXBvcnQgbWVzc2FnZVN0b3JlID0gcmVxdWlyZSgnLi4vLi4vc3RvcmVzL21lc3NhZ2UvbWVzc2FnZXN0b3JlJyk7XG5pbXBvcnQgbWVzc2FnaW5nQWN0aW9uQ3JlYXRvciA9IHJlcXVpcmUoJy4uLy4uL2FjdGlvbnMvbWVzc2FnaW5nL21lc3NhZ2luZ2FjdGlvbmNyZWF0b3InKTtcbmltcG9ydCByZXNwb25zZVN0b3JlID0gcmVxdWlyZSgnLi4vLi4vc3RvcmVzL3Jlc3BvbnNlL3Jlc3BvbnNlc3RvcmUnKTtcbmltcG9ydCBhcHBsaWNhdGlvbkFjdGlvbkNyZWF0b3IgPSByZXF1aXJlKCcuLi8uLi9hY3Rpb25zL2FwcGxpY2F0aW9ub2ZmbGluZS9hcHBsaWNhdGlvbmFjdGlvbmNyZWF0b3InKTtcbmltcG9ydCBwb3B1cERpc3BsYXlBY3Rpb25DcmVhdG9yID0gcmVxdWlyZSgnLi4vLi4vYWN0aW9ucy9wb3B1cGRpc3BsYXkvcG9wdXBkaXNwbGF5YWN0aW9uY3JlYXRvcicpO1xuaW1wb3J0IHVzZXJJbmZvU3RvcmUgPSByZXF1aXJlKCcuLi8uLi9zdG9yZXMvdXNlcmluZm8vdXNlcmluZm9zdG9yZScpO1xuaW1wb3J0IHFpZ1NlbGVjdG9yQWN0aW9uQ3JlYXRvciA9IHJlcXVpcmUoJy4uLy4uL2FjdGlvbnMvcWlnc2VsZWN0b3IvcWlnc2VsZWN0b3JhY3Rpb25jcmVhdG9yJyk7XG5pbXBvcnQgbWFya2luZ0FjdGlvbkNyZWF0b3IgPSByZXF1aXJlKCcuLi8uLi9hY3Rpb25zL21hcmtpbmcvbWFya2luZ2FjdGlvbmNyZWF0b3InKTtcbmltcG9ydCBtYXJraW5nU3RvcmUgPSByZXF1aXJlKCcuLi8uLi9zdG9yZXMvbWFya2luZy9tYXJraW5nc3RvcmUnKTtcbmltcG9ydCB3b3JrbGlzdEFjdGlvbkNyZWF0b3IgPSByZXF1aXJlKCcuLi8uLi9hY3Rpb25zL3dvcmtsaXN0L3dvcmtsaXN0YWN0aW9uY3JlYXRvcicpO1xuaW1wb3J0IG5hdmlnYXRpb25IZWxwZXIgPSByZXF1aXJlKCcuLi8uLi9jb21wb25lbnRzL3V0aWxpdHkvbmF2aWdhdGlvbi9uYXZpZ2F0aW9uaGVscGVyJyk7XG5pbXBvcnQgbWFya2luZ0hlbHBlciA9IHJlcXVpcmUoJy4uLy4uL3V0aWxpdHkvbWFya3NjaGVtZS9tYXJraW5naGVscGVyJyk7XG5pbXBvcnQgcG9wdXBIZWxwZXIgPSByZXF1aXJlKCcuLi8uLi9jb21wb25lbnRzL3V0aWxpdHkvcG9wdXAvcG9wdXBoZWxwZXInKTtcbmltcG9ydCBvcGVyYXRpb25Nb2RlSGVscGVyID0gcmVxdWlyZSgnLi4vdXRpbGl0eS91c2VyZGV0YWlscy91c2VyaW5mby9vcGVyYXRpb25tb2RlaGVscGVyJyk7XG5pbXBvcnQgTG9nbyA9IHJlcXVpcmUoJy4uL3V0aWxpdHkvbG9nby9sb2dvJyk7XG5pbXBvcnQgc3RvcmFnZUFkYXB0ZXJIZWxwZXIgPSByZXF1aXJlKCcuLi8uLi9kYXRhc2VydmljZXMvc3RvcmFnZWFkYXB0ZXJzL3N0b3JhZ2VhZGFwdGVyaGVscGVyJyk7XG5pbXBvcnQgcWlnU3RvcmUgPSByZXF1aXJlKCcuLi8uLi9zdG9yZXMvcWlnc2VsZWN0b3IvcWlnc3RvcmUnKTtcbmltcG9ydCB3b3JrbGlzdFN0b3JlID0gcmVxdWlyZSgnLi4vLi4vc3RvcmVzL3dvcmtsaXN0L3dvcmtsaXN0c3RvcmUnKTtcbmltcG9ydCBzdGFuZGFyZGlzYXRpb25TZXR1cFN0b3JlID0gcmVxdWlyZSgnLi4vLi4vc3RvcmVzL3N0YW5kYXJkaXNhdGlvbnNldHVwL3N0YW5kYXJkaXNhdGlvbnNldHVwc3RvcmUnKTtcblxuLyoqXG4gKiBQcm9wZXJ0aWVzIG9mIGEgY29tcG9uZW50XG4gKi9cbmludGVyZmFjZSBQcm9wcyBleHRlbmRzIExvY2FsZVNlbGVjdGlvbkJhc2UsIFByb3BzQmFzZSB7XG4gICAgY29udGFpbmVyOiBlbnVtcy5QYWdlQ29udGFpbmVycztcbiAgICBpc0NsaWNrYWJsZTogYm9vbGVhbjtcbiAgICBicmVhZENydW1iU3RyaW5nPzogc3RyaW5nO1xuICAgIG5hdmlnYXRlVG8/OiBlbnVtcy5QYWdlQ29udGFpbmVycztcbiAgICBpc0EzTG9nbz86IGJvb2xlYW47XG59XG5cbi8qKlxuICogQWxsIGZpZWxkcyBvcHRpb25hbCB0byBhbGxvdyBwYXJ0aWFsIHN0YXRlIHVwZGF0ZXMgaW4gc2V0U3RhdGVcbiAqL1xuaW50ZXJmYWNlIFN0YXRlIHtcbiAgICByZW5kZXJlZE9uPzogbnVtYmVyO1xufVxuXG4vKipcbiAqIFJlYWN0IGNvbXBvbmVudCBjbGFzcyBmb3IgQnJlYWRDcnVtYlxuICovXG5jbGFzcyBCcmVhZENydW1iSXRlbSBleHRlbmRzIHB1cmVSZW5kZXJDb21wb25lbnQ8UHJvcHMsIFN0YXRlPiB7XG5cbiAgICBwcml2YXRlIF9sb2FkQ3VycmVudEV4YW1pbmVyV29ya2xpc3Q6IGJvb2xlYW4gPSBmYWxzZTtcblxuICAgIHByaXZhdGUgc3RvcmFnZUFkYXB0ZXJIZWxwZXIgPSBuZXcgc3RvcmFnZUFkYXB0ZXJIZWxwZXIoKTtcblxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHByb3BzXG4gICAgICogQHBhcmFtIHN0YXRlXG4gICAgICovXG4gICAgY29uc3RydWN0b3IocHJvcHM6IFByb3BzLCBzdGF0ZTogU3RhdGUpIHtcbiAgICAgICAgc3VwZXIocHJvcHMsIHN0YXRlKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIHJlbmRlcmVkT246IERhdGUubm93KClcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW5kZXIgbWV0aG9kXG4gICAgICovXG4gICAgcHVibGljIHJlbmRlcigpIHtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuaXNBM0xvZ28pIHtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPGxpXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nYnJlYWRjcnVtYi1pdGVtIGRyb3Bkb3duLXdyYXAgaGVhZGVyLWRyb3Bkb3duJ1xuICAgICAgICAgICAgICAgICAgICBpZD0geydsaV8nICsgdGhpcy5wcm9wcy5pZH1cbiAgICAgICAgICAgICAgICAgICAga2V5PSB7J2xpXycgKyB0aGlzLnByb3BzLmlkICsgJ19rZXknfT5cbiAgICAgICAgICAgICAgICB7dGhpcy5yZW5kZXJMb2dvKCkgfVxuICAgICAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPGxpXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nYnJlYWRjcnVtYi1pdGVtJ1xuICAgICAgICAgICAgICAgICAgICBpZD0geydsaV8nICsgdGhpcy5wcm9wcy5pZH1cbiAgICAgICAgICAgICAgICAgICAga2V5PSB7J2xpXycgKyB0aGlzLnByb3BzLmlkICsgJ19rZXknfT5cbiAgICAgICAgICAgICAgICB7dGhpcy5yZW5kZXJCcmVhZENydW1iSXRlbSgpIH1cbiAgICAgICAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIGdldHMgaW52b2tlZCB3aGVuIHRoZSBjb21wb25lbnQgaXMgYWJvdXQgdG8gYmUgbW91bnRlZFxuICAgICAqL1xuICAgIHB1YmxpYyBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgbWFya2luZ1N0b3JlLmluc3RhbmNlLmFkZExpc3RlbmVyKG1hcmtpbmdTdG9yZS5NYXJraW5nU3RvcmUuUkVBRFlfVE9fTkFWSUdBVEUsIHRoaXMubmF2aWdhdGVBd2F5RnJvbVJlc3BvbnNlKTtcbiAgICAgICAgbWFya2luZ1N0b3JlLmluc3RhbmNlLmFkZExpc3RlbmVyKG1hcmtpbmdTdG9yZS5NYXJraW5nU3RvcmUuQUNDRVBUX1FVQUxJVFlfQUNUSU9OX0NPTVBMRVRFRCwgdGhpcy5uYXZpZ2F0ZUF3YXlGcm9tUmVzcG9uc2UpO1xuICAgICAgICB1c2VySW5mb1N0b3JlLmluc3RhbmNlLmFkZExpc3RlbmVyKHVzZXJJbmZvU3RvcmUuVXNlckluZm9TdG9yZS5NQVJLRVJfT1BFUkFUSU9OX01PREVfQ0hBTkdFRCwgdGhpcy5vbk1hcmtlck9wZXJhdGlvbk1vZGVDaGFuZ2UpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgZnVuY3Rpb24gZ2V0cyBpbnZva2VkIHdoZW4gdGhlIGNvbXBvbmVudCBpcyBhYm91dCB0byBiZSBtb3VudGVkXG4gICAgICovXG4gICAgcHVibGljIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgICBtYXJraW5nU3RvcmUuaW5zdGFuY2UucmVtb3ZlTGlzdGVuZXIobWFya2luZ1N0b3JlLk1hcmtpbmdTdG9yZS5SRUFEWV9UT19OQVZJR0FURSwgdGhpcy5uYXZpZ2F0ZUF3YXlGcm9tUmVzcG9uc2UpO1xuICAgICAgICBtYXJraW5nU3RvcmUuaW5zdGFuY2UucmVtb3ZlTGlzdGVuZXIobWFya2luZ1N0b3JlLk1hcmtpbmdTdG9yZS5BQ0NFUFRfUVVBTElUWV9BQ1RJT05fQ09NUExFVEVELCB0aGlzLm5hdmlnYXRlQXdheUZyb21SZXNwb25zZSk7XG4gICAgICAgIHVzZXJJbmZvU3RvcmUuaW5zdGFuY2UucmVtb3ZlTGlzdGVuZXIodXNlckluZm9TdG9yZS5Vc2VySW5mb1N0b3JlLk1BUktFUl9PUEVSQVRJT05fTU9ERV9DSEFOR0VELCB0aGlzLm9uTWFya2VyT3BlcmF0aW9uTW9kZUNoYW5nZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhpcyBmdW5jdGlvbiB3aWxsIHJlbmRlciBicmVhZGNydW1iIGl0ZW1zXG4gICAgICovXG4gICAgcHJpdmF0ZSByZW5kZXJCcmVhZENydW1iSXRlbSgpOiBKU1guRWxlbWVudCB7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLmlzQ2xpY2thYmxlKSB7XG4gICAgICAgICAgICByZXR1cm4gKDxhIGhyZWY9J2phdmFzY3JpcHQ6dm9pZCgwKSdcbiAgICAgICAgICAgICAgICBpZD0geydhXycgKyB0aGlzLnByb3BzLmlkfVxuICAgICAgICAgICAgICAgIG9uQ2xpY2sgPSB7dGhpcy5oYW5kbGVCcmVhZENydW1iQ2xpY2suYmluZCh0aGlzLCB0aGlzLnByb3BzLmNvbnRhaW5lciwgdGhpcy5wcm9wcy5uYXZpZ2F0ZVRvKSB9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdicmVhZGNydW1iLWFuY2hvcic+e3RoaXMucHJvcHMuYnJlYWRDcnVtYlN0cmluZ308L2E+XG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuICg8c3BhblxuICAgICAgICAgICAgICAgIGlkPSB7J3NfJyArIHRoaXMucHJvcHMuaWQgfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nbmF2LXRleHQnPnt0aGlzLnByb3BzLmJyZWFkQ3J1bWJTdHJpbmd9PC9zcGFuPik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIYW5kbGVzIHRoZSBjbGlja1xuICAgICAqIEBwYXJhbSB7YW55fSBzb3VyY2VcbiAgICAgKiBAcmV0dXJuc1xuICAgICAqL1xuICAgIHByaXZhdGUgaGFuZGxlQnJlYWRDcnVtYkNsaWNrID0gKHBhZ2VDb250YWluZXI6IGVudW1zLlBhZ2VDb250YWluZXJzLCBuYXZpZ2F0ZVRvOiBlbnVtcy5QYWdlQ29udGFpbmVycykgPT4ge1xuXG4gICAgICAgIHN3aXRjaCAobmF2aWdhdGVUbykge1xuICAgICAgICAgICAgY2FzZSBlbnVtcy5QYWdlQ29udGFpbmVycy5Mb2dpbjpcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgZW51bXMuUGFnZUNvbnRhaW5lcnMuUWlnU2VsZWN0b3I6XG4gICAgICAgICAgICAgICAgbmF2aWdhdGlvbkhlbHBlci5oYW5kbGVOYXZpZ2F0aW9uKGVudW1zLlNhdmVBbmROYXZpZ2F0ZS50b1FpZ1NlbGVjdG9yKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgZW51bXMuUGFnZUNvbnRhaW5lcnMuV29ya0xpc3Q6XG4gICAgICAgICAgICAgICAgbmF2aWdhdGlvbkhlbHBlci5oYW5kbGVOYXZpZ2F0aW9uKGVudW1zLlNhdmVBbmROYXZpZ2F0ZS50b1dvcmtsaXN0KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgZW51bXMuUGFnZUNvbnRhaW5lcnMuUmVzcG9uc2U6XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIGVudW1zLlBhZ2VDb250YWluZXJzLk1lc3NhZ2U6XG5cdFx0XHRcdG5hdmlnYXRpb25IZWxwZXIuaGFuZGxlTmF2aWdhdGlvbihlbnVtcy5TYXZlQW5kTmF2aWdhdGUudG9JbmJveE1lc3NhZ2VQYWdlKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgZW51bXMuUGFnZUNvbnRhaW5lcnMuVGVhbU1hbmFnZW1lbnQ6XG4gICAgICAgICAgICAgICAgbmF2aWdhdGlvbkhlbHBlci5oYW5kbGVOYXZpZ2F0aW9uKGVudW1zLlNhdmVBbmROYXZpZ2F0ZS50b1RlYW0pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBlbnVtcy5QYWdlQ29udGFpbmVycy5NYXJraW5nQ2hlY2tFeGFtaW5lcnNXb3JrTGlzdDpcbiAgICAgICAgICAgICAgICBuYXZpZ2F0aW9uSGVscGVyLmhhbmRsZU5hdmlnYXRpb24oZW51bXMuU2F2ZUFuZE5hdmlnYXRlLnRvTWFya2luZ0NoZWNrV29ya2xpc3QpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBlbnVtcy5QYWdlQ29udGFpbmVycy5TdGFuZGFyZGlzYXRpb25TZXR1cDpcbiAgICAgICAgICAgICAgICBuYXZpZ2F0aW9uSGVscGVyLmhhbmRsZU5hdmlnYXRpb24odGhpcy5uYXZpZ2F0ZVRvRm9yU3RhbmRhcmRpc2F0aW9uU2V0dXBXb3JrbGlzdCgpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgZW51bXMuUGFnZUNvbnRhaW5lcnMuQXdhcmRpbmc6XG4gICAgICAgICAgICAgICAgbmF2aWdhdGlvbkhlbHBlci5sb2FkQXdhcmRpbmdQYWdlKGZhbHNlKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBHbyBvdXQgZnJvbSByZXNwb25zZSBhZnRlciBzYXZpbmcgbWFyayBpZiB0aGVyZSBpcyBhbnlcbiAgICAgKi9cbiAgICBwcml2YXRlIG5hdmlnYXRlQXdheUZyb21SZXNwb25zZSA9ICgpOiB2b2lkID0+IHtcbiAgICAgICAgaWYgKG1hcmtpbmdTdG9yZS5pbnN0YW5jZS5uYXZpZ2F0ZVRvID09PSBlbnVtcy5TYXZlQW5kTmF2aWdhdGUudG9Xb3JrbGlzdCB8fFxuICAgICAgICAgICAgbWFya2luZ1N0b3JlLmluc3RhbmNlLm5hdmlnYXRlVG8gPT09IGVudW1zLlNhdmVBbmROYXZpZ2F0ZS50b1FpZ1NlbGVjdG9yIHx8XG4gICAgICAgICAgICBtYXJraW5nU3RvcmUuaW5zdGFuY2UubmF2aWdhdGVUbyA9PT0gZW51bXMuU2F2ZUFuZE5hdmlnYXRlLnRvTWVudSB8fFxuICAgICAgICAgICAgbWFya2luZ1N0b3JlLmluc3RhbmNlLm5hdmlnYXRlVG8gPT09IGVudW1zLlNhdmVBbmROYXZpZ2F0ZS50b1RlYW0gfHxcbiAgICAgICAgICAgIG1hcmtpbmdTdG9yZS5pbnN0YW5jZS5uYXZpZ2F0ZVRvID09PSBlbnVtcy5TYXZlQW5kTmF2aWdhdGUudG9NYXJraW5nQ2hlY2tXb3JrbGlzdCB8fFxuICAgICAgICAgICAgbWFya2luZ1N0b3JlLmluc3RhbmNlLm5hdmlnYXRlVG8gPT09IGVudW1zLlNhdmVBbmROYXZpZ2F0ZS50b1Byb3Zpc2lvbmFsIHx8XG5cdFx0XHRtYXJraW5nU3RvcmUuaW5zdGFuY2UubmF2aWdhdGVUbyA9PT0gZW51bXMuU2F2ZUFuZE5hdmlnYXRlLnRvVW5jbGFzc2lmaWVkIHx8XG4gICAgICAgICAgICBtYXJraW5nU3RvcmUuaW5zdGFuY2UubmF2aWdhdGVUbyA9PT0gZW51bXMuU2F2ZUFuZE5hdmlnYXRlLnRvQ2xhc3NpZmllZCB8fFxuICAgICAgICAgICAgbWFya2luZ1N0b3JlLmluc3RhbmNlLm5hdmlnYXRlVG8gPT09IGVudW1zLlNhdmVBbmROYXZpZ2F0ZS50b0F3YXJkaW5nKSB7XG5cbiAgICAgICAgICAgIC8qKiBXaGVuIG5hdmlnYXRlZCB0byAnfi93b3JrbGlzdCcsIElzUmVzcG9uc2VDbG9zZSBpcyBzZXQgaW4gd29ya2xpc3Qgd2hpY2ggaXMgdXNlZCBpbiB0aGUgcWlnIHNlbGVjdG9yIGNvbXBvbmVudFxuICAgICAgICAgICAgICogdG8gZ2V0IHRoZSBjdXJyZW50IHJlc3BvbnNlIG1vZGVcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgaWYgKG1hcmtpbmdTdG9yZS5pbnN0YW5jZS5uYXZpZ2F0ZVRvICE9PSBlbnVtcy5TYXZlQW5kTmF2aWdhdGUudG9NZW51KSB7XG4gICAgICAgICAgICAgICAgd29ya2xpc3RBY3Rpb25DcmVhdG9yLnJlc3BvbnNlQ2xvc2VkKHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbmF2aWdhdGlvbkhlbHBlci5sb2FkQ29udGFpbmVySWZOZWVkZWQoZW51bXMuUGFnZUNvbnRhaW5lcnMuUmVzcG9uc2UsXG4gICAgICAgICAgICAgICAgZW51bXMuU2F2ZU1hcmtzQW5kQW5ub3RhdGlvbnNQcm9jZXNzaW5nVHJpZ2dlclBvaW50LkNsb3NlUmVzcG9uc2UpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEdvIG91dCBmcm9tIHJlc3BvbnNlIGFmdGVyIHNhdmluZyBtYXJrIGlmIHRoZXJlIGlzIGFueVxuICAgICAqL1xuICAgIHByaXZhdGUgbmF2aWdhdGVUb0ZvclN0YW5kYXJkaXNhdGlvblNldHVwV29ya2xpc3QgPSAoKTogZW51bXMuU2F2ZUFuZE5hdmlnYXRlID0+IHtcbiAgICAgICAgbGV0IHNlbGVjdGVkV29ya2xpc3Q6IGVudW1zLlN0YW5kYXJkaXNhdGlvblNldHVwID0gc3RhbmRhcmRpc2F0aW9uU2V0dXBTdG9yZS5pbnN0YW5jZS5zZWxlY3RlZFN0YW5kYXJkaXNhdGlvblNldHVwV29ya0xpc3Q7XG4gICAgICAgIGxldCBzYXZlQW5kTmF2aWdhdGVUbzogZW51bXMuU2F2ZUFuZE5hdmlnYXRlO1xuICAgICAgICBzd2l0Y2ggKHNlbGVjdGVkV29ya2xpc3QpIHtcbiAgICAgICAgICAgIGNhc2UgZW51bXMuU3RhbmRhcmRpc2F0aW9uU2V0dXAuU2VsZWN0UmVzcG9uc2U6XG4gICAgICAgICAgICAgICAgc2F2ZUFuZE5hdmlnYXRlVG8gPSBlbnVtcy5TYXZlQW5kTmF2aWdhdGUudG9TZWxlY3RSZXNwb25zZXM7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIGVudW1zLlN0YW5kYXJkaXNhdGlvblNldHVwLlVuQ2xhc3NpZmllZFJlc3BvbnNlOlxuICAgICAgICAgICAgICAgIHNhdmVBbmROYXZpZ2F0ZVRvID0gZW51bXMuU2F2ZUFuZE5hdmlnYXRlLnRvVW5jbGFzc2lmaWVkO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBlbnVtcy5TdGFuZGFyZGlzYXRpb25TZXR1cC5DbGFzc2lmaWVkUmVzcG9uc2U6XG4gICAgICAgICAgICAgICAgc2F2ZUFuZE5hdmlnYXRlVG8gPSBlbnVtcy5TYXZlQW5kTmF2aWdhdGUudG9DbGFzc2lmaWVkO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBlbnVtcy5TdGFuZGFyZGlzYXRpb25TZXR1cC5Qcm92aXNpb25hbFJlc3BvbnNlOlxuICAgICAgICAgICAgICAgIHNhdmVBbmROYXZpZ2F0ZVRvID0gZW51bXMuU2F2ZUFuZE5hdmlnYXRlLnRvUHJvdmlzaW9uYWw7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc2F2ZUFuZE5hdmlnYXRlVG87XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIHdpbGwgYmUgaW52b2tlZCBvbiBtYXJrZXIgb3BlcmF0aW9uIG1vZGUgY2hhbmdlXG4gICAgICovXG4gICAgcHJpdmF0ZSBvbk1hcmtlck9wZXJhdGlvbk1vZGVDaGFuZ2UgPSAobWFya2VyT3BlcmF0aW9uTW9kZTogZW51bXMuTWFya2VyT3BlcmF0aW9uTW9kZSwgbG9hZEN1cnJlbnRFeGFtaW5lcldvcmtsaXN0OiBib29sZWFuKTogdm9pZCA9PiB7XG4gICAgICAgIC8vIE1hcmtlciBjbGlja2VkIG9uIHdvcmtsaXN0IGljb24gZnJvbSBUZWFtTWFuZ2VtZW50IHdvcmtsaXN0IHZpZXcgd2UgbmVlZCB0byByZWRpcmVjdFxuICAgICAgICAvLyBMb2dpbmVkIGV4YW1pbmVycyB3b3JrbGlzdFxuICAgICAgICBpZiAobG9hZEN1cnJlbnRFeGFtaW5lcldvcmtsaXN0ICYmIG1hcmtlck9wZXJhdGlvbk1vZGUgPT09IGVudW1zLk1hcmtlck9wZXJhdGlvbk1vZGUuTWFya2luZykge1xuICAgICAgICAgICAgdXNlckluZm9BY3Rpb25DcmVhdG9yLnJlc2V0RG9Mb2FkV29ya2xpc3RTdGF0dXMoKTtcbiAgICAgICAgICAgIC8vIEludm9rZSB0aGUgYWN0aW9uIGNyZWF0b3IgdG8gT3BlbiB0aGUgUUlHXG4gICAgICAgICAgICBxaWdTZWxlY3RvckFjdGlvbkNyZWF0b3Iub3BlblFJRyhvcGVyYXRpb25Nb2RlSGVscGVyLm1hcmtTY2hlbWVHcm91cElkKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCB3aWxsIHJlbmRlciB0aGUgbG9nbyBiYXNlZCBvbiBsb2dpbi0gRmFtaWxpYXJpc2F0aW9uLyBNYXJraW5nXG4gICAgICovXG4gICAgcHJpdmF0ZSByZW5kZXJMb2dvKCkge1xuICAgICAgICBpZiAobG9naW5TZXNzaW9uLklTX0ZBTUlMSUFSSVNBVElPTl9MT0dJTiB8fCBsb2dpblNlc3Npb24uSVNfU1VQUE9SVF9BRE1JTl9MT0dJTikge1xuICAgICAgICAgICAgbGV0IGxvZ29UZXh0OiBzdHJpbmc7XG4gICAgICAgICAgICBsZXQgaWQ6IHN0cmluZztcbiAgICAgICAgICAgIGxldCBrZXk6IHN0cmluZztcbiAgICAgICAgICAgIGlmIChsb2dpblNlc3Npb24uSVNfRkFNSUxJQVJJU0FUSU9OX0xPR0lOKSB7XG4gICAgICAgICAgICAgICAgbG9nb1RleHQgPSAnbG9naW4ubG9naW4tcGFnZS5mYW0tYnV0dG9uJztcbiAgICAgICAgICAgICAgICBpZCA9ICdmYW0tbG9nby10ZXh0JztcbiAgICAgICAgICAgICAgICBrZXkgPSAnZmFtLWxvZ28tdGV4dC1rZXknO1xuICAgICAgICAgICAgfWVsc2UgeyAvL1N1cHBvcnQgTG9naW5cbiAgICAgICAgICAgICAgICBsb2dvVGV4dCA9ICdsb2dpbi5sb2dpbi1wYWdlLnN1cHBvcnQtYWRtaW4tbG9nby10ZXh0JztcbiAgICAgICAgICAgICAgICBpZCA9ICdzdXBwb3J0LWFkbWluLWxvZ28tdGV4dCc7XG4gICAgICAgICAgICAgICAga2V5ID0gJ3N1cHBvcnQtYWRtaW4tdGV4dC1rZXknO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuICg8TG9nb1xuICAgICAgICAgICAgICAgIGlkPXtpZH1cbiAgICAgICAgICAgICAgICBrZXk9e2tleX1cbiAgICAgICAgICAgICAgICBvbkxvZ29DbGljaz17bmF2aWdhdGlvbkhlbHBlci5oYW5kbGVOYXZpZ2F0aW9uLmJpbmQodGhpcywgZW51bXMuU2F2ZUFuZE5hdmlnYXRlLnRvUWlnU2VsZWN0b3IpfVxuICAgICAgICAgICAgICAgIGlzRkFNb3JTdXBwb3J0TG9naW49e3RydWV9XG4gICAgICAgICAgICAgICAgbG9nb1RleHQ9e2xvZ29UZXh0fS8+KTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnByb3BzLmlzQ2xpY2thYmxlKSB7XG4gICAgICAgICAgICByZXR1cm4gKDxMb2dvXG4gICAgICAgICAgICAgICAgaWQ9J2Fzc2Vzc29yLWxvZ28nIGtleT0nYXNzZXNzb3ItbG9nby1rZXknXG4gICAgICAgICAgICAgICAgb25Mb2dvQ2xpY2s9e25hdmlnYXRpb25IZWxwZXIuaGFuZGxlTmF2aWdhdGlvbi5iaW5kKHRoaXMsIGVudW1zLlNhdmVBbmROYXZpZ2F0ZS50b1FpZ1NlbGVjdG9yKX0gLz4pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuICg8TG9nb1xuICAgICAgICAgICAgICAgIGlkPSdhc3Nlc3Nvci1sb2dvJ1xuICAgICAgICAgICAgICAgIGtleT0nYXNzZXNzb3ItbG9nby1rZXknIC8+KTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0ID0gQnJlYWRDcnVtYkl0ZW07XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9zb3VyY2UtbWFwLWxvYWRlciEuL3NyYy9jb21wb25lbnRzL2JyZWFkY3J1bWIvYnJlYWRjcnVtYml0ZW0udHN4Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBR0E7QUFvQkE7O0FBRUE7QUFDQTtBQUFBO0FBTUE7Ozs7QUFJQTtBQUNBO0FBQUE7QUFUQTtBQUVBO0FBMEVBOzs7O0FBSUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBaktBO0FBQ0E7QUFDQTs7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBUUE7QUFBQTtBQUNBO0FBUUE7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQW9HQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFBQTtBQUNBO0FBR0E7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFFQTsiLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),

/***/ 350:
/* no static exports found */
/* all exports used */
/*!******************************************!*\
  !*** ./src/components/logout/logout.tsx ***!
  \******************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar React = __webpack_require__(/*! react */ 0);\r\nvar enums = __webpack_require__(/*! ../utility/enums */ 225);\r\nvar pureRenderComponent = __webpack_require__(/*! ../base/purerendercomponent */ 227);\r\nvar localeStore = __webpack_require__(/*! ../../stores/locale/localestore */ 226);\r\nvar messageStore = __webpack_require__(/*! ../../stores/message/messagestore */ 240);\r\nvar exceptionStore = __webpack_require__(/*! ../../stores/exception/exceptionstore */ 277);\r\nvar navigationHelper = __webpack_require__(/*! ../utility/navigation/navigationhelper */ 248);\r\nvar qigActionCreator = __webpack_require__(/*! ./../../actions/qigselector/qigselectoractioncreator */ 253);\r\nvar Logout = /** @class */ (function (_super) {\r\n    __extends(Logout, _super);\r\n    /**\r\n     * Constructor Logout\r\n     * @param props\r\n     * @param state\r\n     */\r\n    function Logout(props, state) {\r\n        var _this = _super.call(this, props, state) || this;\r\n        /**\r\n         * if discard popup is displaying.\r\n         */\r\n        _this.onPopUpDisplayEvent = function (popUpType, popUpActionType) {\r\n            if ((popUpType === enums.PopUpType.DiscardMessageNavigateAway || popUpType === enums.PopUpType.DiscardExceptionNavigateAway)\r\n                && popUpActionType === enums.PopUpActionType.Close) {\r\n                qigActionCreator.getLocksInQigs(true);\r\n            }\r\n        };\r\n        _this.state = {\r\n            isLogoutConfirmationIsDisplaying: false\r\n        };\r\n        return _this;\r\n    }\r\n    /**\r\n     * Render component\r\n     * @returns\r\n     */\r\n    Logout.prototype.render = function () {\r\n        return (React.createElement(\"button\", { onClick: navigationHelper.showLogoutConfirmation.bind(this), className: 'primary rounded logout-btn', id: 'logout-button' }, localeStore.instance.TranslateText('generic.user-menu.profile-section.logout-button')));\r\n    };\r\n    /**\r\n     * Component did mount\r\n     */\r\n    Logout.prototype.componentDidMount = function () {\r\n        messageStore.instance.addListener(messageStore.MessageStore.POPUP_DISPLAY_EVENT, this.onPopUpDisplayEvent);\r\n        exceptionStore.instance.addListener(exceptionStore.ExceptionStore.EXCEPTION_DISCARD_POPUP_DISPLAY_EVENT, this.onPopUpDisplayEvent);\r\n    };\r\n    /**\r\n     * Component will unmount\r\n     */\r\n    Logout.prototype.componentWillUnmount = function () {\r\n        messageStore.instance.removeListener(messageStore.MessageStore.POPUP_DISPLAY_EVENT, this.onPopUpDisplayEvent);\r\n        exceptionStore.instance.removeListener(exceptionStore.ExceptionStore.EXCEPTION_DISCARD_POPUP_DISPLAY_EVENT, this.onPopUpDisplayEvent);\r\n    };\r\n    return Logout;\r\n}(pureRenderComponent));\r\nmodule.exports = Logout;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzUwLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvbG9nb3V0L2xvZ291dC50c3g/MTdiZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xyXG5pbXBvcnQgZW51bXMgPSByZXF1aXJlKCcuLi91dGlsaXR5L2VudW1zJyk7XHJcbmltcG9ydCBwdXJlUmVuZGVyQ29tcG9uZW50ID0gcmVxdWlyZSgnLi4vYmFzZS9wdXJlcmVuZGVyY29tcG9uZW50Jyk7XHJcbmltcG9ydCBsb2NhbGVTdG9yZSA9IHJlcXVpcmUoJy4uLy4uL3N0b3Jlcy9sb2NhbGUvbG9jYWxlc3RvcmUnKTtcclxuaW1wb3J0IG1hcmtpbmdIZWxwZXIgPSByZXF1aXJlKCcuLi8uLi91dGlsaXR5L21hcmtzY2hlbWUvbWFya2luZ2hlbHBlcicpO1xyXG5pbXBvcnQgbWFya2luZ0FjdGlvbkNyZWF0b3IgPSByZXF1aXJlKCcuLi8uLi9hY3Rpb25zL21hcmtpbmcvbWFya2luZ2FjdGlvbmNyZWF0b3InKTtcclxuaW1wb3J0IHVzZXJJbmZvQWN0aW9uQ3JlYXRvciA9IHJlcXVpcmUoJy4uLy4uL2FjdGlvbnMvdXNlcmluZm8vdXNlcmluZm9hY3Rpb25jcmVhdG9yJyk7XHJcbmltcG9ydCB3b3JrbGlzdFN0b3JlID0gcmVxdWlyZSgnLi4vLi4vc3RvcmVzL3dvcmtsaXN0L3dvcmtsaXN0c3RvcmUnKTtcclxuaW1wb3J0IG1lc3NhZ2luZ0FjdGlvbkNyZWF0b3IgPSByZXF1aXJlKCcuLi8uLi9hY3Rpb25zL21lc3NhZ2luZy9tZXNzYWdpbmdhY3Rpb25jcmVhdG9yJyk7XHJcbmltcG9ydCBtZXNzYWdlU3RvcmUgPSByZXF1aXJlKCcuLi8uLi9zdG9yZXMvbWVzc2FnZS9tZXNzYWdlc3RvcmUnKTtcclxuaW1wb3J0IHJlc3BvbnNlU3RvcmUgPSByZXF1aXJlKCcuLi8uLi9zdG9yZXMvcmVzcG9uc2UvcmVzcG9uc2VzdG9yZScpO1xyXG5pbXBvcnQgZXhjZXB0aW9uU3RvcmUgPSByZXF1aXJlKCcuLi8uLi9zdG9yZXMvZXhjZXB0aW9uL2V4Y2VwdGlvbnN0b3JlJyk7XHJcbmltcG9ydCBleGNlcHRpb25BY3Rpb25DcmVhdG9yID0gcmVxdWlyZSgnLi4vLi4vYWN0aW9ucy9leGNlcHRpb24vZXhjZXB0aW9uYWN0aW9uY3JlYXRvcicpO1xyXG5pbXBvcnQgYXBwbGljYXRpb25BY3Rpb25DcmVhdG9yID0gcmVxdWlyZSgnLi4vLi4vYWN0aW9ucy9hcHBsaWNhdGlvbm9mZmxpbmUvYXBwbGljYXRpb25hY3Rpb25jcmVhdG9yJyk7XHJcbmltcG9ydCBwb3B1cERpc3BsYXlBY3Rpb25DcmVhdG9yID0gcmVxdWlyZSgnLi4vLi4vYWN0aW9ucy9wb3B1cGRpc3BsYXkvcG9wdXBkaXNwbGF5YWN0aW9uY3JlYXRvcicpO1xyXG5pbXBvcnQgbmF2aWdhdGlvbkhlbHBlciA9IHJlcXVpcmUoJy4uL3V0aWxpdHkvbmF2aWdhdGlvbi9uYXZpZ2F0aW9uaGVscGVyJyk7XHJcbmltcG9ydCBxaWdTdG9yZSA9IHJlcXVpcmUoJy4vLi4vLi4vc3RvcmVzL3FpZ3NlbGVjdG9yL3FpZ3N0b3JlJyk7XHJcbmltcG9ydCBMb2Nrc0luUWlnUG9wdXAgPSByZXF1aXJlKCcuLy4uL3FpZ3NlbGVjdG9yL2xvY2tzaW5xaWdwb3B1cCcpO1xyXG5pbXBvcnQgcWlnQWN0aW9uQ3JlYXRvciA9IHJlcXVpcmUoJy4vLi4vLi4vYWN0aW9ucy9xaWdzZWxlY3Rvci9xaWdzZWxlY3RvcmFjdGlvbmNyZWF0b3InKTtcclxuXHJcbi8qKlxyXG4gKiBQcm9wZXJ0aWVzIG9mIGEgY29tcG9uZW50XHJcbiAqL1xyXG4vKiB0c2xpbnQ6ZGlzYWJsZTpuby1lbXB0eS1pbnRlcmZhY2VzICovXHJcbmludGVyZmFjZSBQcm9wcyBleHRlbmRzIExvY2FsZVNlbGVjdGlvbkJhc2Uge1xyXG59XHJcbi8qIHRzbGludDplbmFibGU6bm8tZW1wdHktaW50ZXJmYWNlcyAqL1xyXG5cclxuLyoqXHJcbiAqIEFsbCBmaWVsZHMgb3B0aW9uYWwgdG8gYWxsb3cgcGFydGlhbCBzdGF0ZSB1cGRhdGVzIGluIHNldFN0YXRlXHJcbiAqL1xyXG5pbnRlcmZhY2UgU3RhdGUge1xyXG4gICAgbG9nZ2VkSW5Vc2VybmFtZT86IHN0cmluZztcclxuICAgIGlzTG9nb3V0Q29uZmlybWF0aW9uSXNEaXNwbGF5aW5nPzogYm9vbGVhbjtcclxufVxyXG5cclxuY2xhc3MgTG9nb3V0IGV4dGVuZHMgcHVyZVJlbmRlckNvbXBvbmVudDxQcm9wcywgU3RhdGU+IHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbnN0cnVjdG9yIExvZ291dFxyXG4gICAgICogQHBhcmFtIHByb3BzXHJcbiAgICAgKiBAcGFyYW0gc3RhdGVcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IocHJvcHM6IFByb3BzLCBzdGF0ZTogU3RhdGUpIHtcclxuICAgICAgICBzdXBlcihwcm9wcywgc3RhdGUpO1xyXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgICAgICAgIGlzTG9nb3V0Q29uZmlybWF0aW9uSXNEaXNwbGF5aW5nOiBmYWxzZVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZW5kZXIgY29tcG9uZW50XHJcbiAgICAgKiBAcmV0dXJuc1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcmVuZGVyKCkge1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e25hdmlnYXRpb25IZWxwZXIuc2hvd0xvZ291dENvbmZpcm1hdGlvbi5iaW5kKHRoaXMpIH1cclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J3ByaW1hcnkgcm91bmRlZCBsb2dvdXQtYnRuJ1xyXG4gICAgICAgICAgICAgICAgICAgIGlkPSAnbG9nb3V0LWJ1dHRvbic+XHJcbiAgICAgICAgICAgICAgICAgICAge2xvY2FsZVN0b3JlLmluc3RhbmNlLlRyYW5zbGF0ZVRleHQoJ2dlbmVyaWMudXNlci1tZW51LnByb2ZpbGUtc2VjdGlvbi5sb2dvdXQtYnV0dG9uJykgfVxyXG4gICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbXBvbmVudCBkaWQgbW91bnRcclxuICAgICAqL1xyXG4gICAgcHVibGljIGNvbXBvbmVudERpZE1vdW50KCkge1xyXG4gICAgICAgIG1lc3NhZ2VTdG9yZS5pbnN0YW5jZS5hZGRMaXN0ZW5lcihtZXNzYWdlU3RvcmUuTWVzc2FnZVN0b3JlLlBPUFVQX0RJU1BMQVlfRVZFTlQsIHRoaXMub25Qb3BVcERpc3BsYXlFdmVudCk7XHJcbiAgICAgICAgZXhjZXB0aW9uU3RvcmUuaW5zdGFuY2UuYWRkTGlzdGVuZXIoZXhjZXB0aW9uU3RvcmUuRXhjZXB0aW9uU3RvcmUuRVhDRVBUSU9OX0RJU0NBUkRfUE9QVVBfRElTUExBWV9FVkVOVCwgdGhpcy5vblBvcFVwRGlzcGxheUV2ZW50KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbXBvbmVudCB3aWxsIHVubW91bnRcclxuICAgICAqL1xyXG4gICAgcHVibGljIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xyXG4gICAgICAgIG1lc3NhZ2VTdG9yZS5pbnN0YW5jZS5yZW1vdmVMaXN0ZW5lcihtZXNzYWdlU3RvcmUuTWVzc2FnZVN0b3JlLlBPUFVQX0RJU1BMQVlfRVZFTlQsIHRoaXMub25Qb3BVcERpc3BsYXlFdmVudCk7XHJcbiAgICAgICAgZXhjZXB0aW9uU3RvcmUuaW5zdGFuY2UucmVtb3ZlTGlzdGVuZXIoZXhjZXB0aW9uU3RvcmUuRXhjZXB0aW9uU3RvcmUuRVhDRVBUSU9OX0RJU0NBUkRfUE9QVVBfRElTUExBWV9FVkVOVCxcclxuICAgICAgICAgICAgIHRoaXMub25Qb3BVcERpc3BsYXlFdmVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBpZiBkaXNjYXJkIHBvcHVwIGlzIGRpc3BsYXlpbmcuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgb25Qb3BVcERpc3BsYXlFdmVudCA9IChwb3BVcFR5cGU6IGVudW1zLlBvcFVwVHlwZSwgcG9wVXBBY3Rpb25UeXBlOiBlbnVtcy5Qb3BVcEFjdGlvblR5cGUpOiB2b2lkID0+IHtcclxuICAgICAgICBpZiAoKHBvcFVwVHlwZSA9PT0gZW51bXMuUG9wVXBUeXBlLkRpc2NhcmRNZXNzYWdlTmF2aWdhdGVBd2F5IHx8IHBvcFVwVHlwZSA9PT0gZW51bXMuUG9wVXBUeXBlLkRpc2NhcmRFeGNlcHRpb25OYXZpZ2F0ZUF3YXkpXHJcbiAgICAgICAgICAgICYmIHBvcFVwQWN0aW9uVHlwZSA9PT0gZW51bXMuUG9wVXBBY3Rpb25UeXBlLkNsb3NlKSB7XHJcbiAgICAgICAgICAgIHFpZ0FjdGlvbkNyZWF0b3IuZ2V0TG9ja3NJblFpZ3ModHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufVxyXG5cclxuZXhwb3J0ID0gTG9nb3V0O1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vc291cmNlLW1hcC1sb2FkZXIhLi9zcmMvY29tcG9uZW50cy9sb2dvdXQvbG9nb3V0LnRzeCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBRUE7QUFJQTtBQUdBO0FBa0JBO0FBQUE7QUFFQTs7OztBQUlBO0FBQ0E7QUFBQTtBQXNDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTVDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFFQTs7O0FBR0E7QUFDQTtBQUNBO0FBT0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQVdBO0FBQUE7QUFFQTsiLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),

/***/ 351:
/* no static exports found */
/* all exports used */
/*!************************************************************!*\
  !*** ./src/components/logout/logoutconfirmationdialog.tsx ***!
  \************************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n/*\r\n  React component for ask for logout button in user options\r\n*/\r\n/* tslint:disable:no-unused-variable */\r\nvar React = __webpack_require__(/*! react */ 0);\r\n/* tslint:enable:no-unused-variable */\r\nvar pureRenderComponent = __webpack_require__(/*! ../base/purerendercomponent */ 227);\r\nvar localeStore = __webpack_require__(/*! ../../stores/locale/localestore */ 226);\r\nvar userOptionsHelper = __webpack_require__(/*! ../../utility/useroption/useroptionshelper */ 265);\r\nvar userOptionKeys = __webpack_require__(/*! ../../utility/useroption/useroptionkeys */ 264);\r\nvar useroptionStore = __webpack_require__(/*! ../../stores/useroption/useroptionstore */ 302);\r\nvar ToggleButton = __webpack_require__(/*! ../utility/togglebutton */ 308);\r\nvar userInfoStore = __webpack_require__(/*! ../../stores/userinfo/userinfostore */ 244);\r\n/**\r\n * React component class for Ask on Logout confirmation\r\n */\r\nvar LogoutConfirmationDialog = /** @class */ (function (_super) {\r\n    __extends(LogoutConfirmationDialog, _super);\r\n    /**\r\n     * Constructor LogoutConfirmationDialog\r\n     * @param props\r\n     * @param state\r\n     */\r\n    function LogoutConfirmationDialog(props, state) {\r\n        var _this = _super.call(this, props, state) || this;\r\n        _this._emailAddress = '';\r\n        /**\r\n         * Refresh state\r\n         */\r\n        _this.refreshState = function () {\r\n            /** resetting the locally stored user option collection */\r\n            // userOptionsHelper.resetChangedUserOptions();\r\n            _this.setState({ isAskOnLogout: !_this.state.isAskOnLogout });\r\n            _this.setState({ isAutoAdvanceOn: !_this.state.isAutoAdvanceOn });\r\n        };\r\n        /**\r\n         * Get the user information from userinfo store\r\n         */\r\n        _this.getUserInformation = function () {\r\n            _this._emailAddress = userInfoStore.instance.EmailAddress;\r\n            _this._isScriptAvailabilityEmailAlert = userInfoStore.instance.IsScriptAvailabilityEmailAlert;\r\n            _this.setState({ renderedOn: Date.now() });\r\n        };\r\n        /**\r\n         * Get the email address from userinfo store after save the email address.\r\n         */\r\n        _this.userInfoSaved = function () {\r\n            _this._emailAddress = userInfoStore.instance.EmailAddress;\r\n            _this.setState({ renderedOn: Date.now() });\r\n        };\r\n        _this.state = {\r\n            isAskOnLogout: userOptionsHelper.getUserOptionByName(userOptionKeys.ASK_ON_LOG_OUT) === 'true' ? true : false,\r\n            isAutoAdvanceOn: userOptionsHelper.getUserOptionByName(userOptionKeys.ASSIGN_SINGLE_DIGIT_WITHOUT_PRESSING_ENTER) === 'true' ?\r\n                true : false,\r\n            isPauseMediaonOffpageCommentAdd: userOptionsHelper.getUserOptionByName(userOptionKeys.PAUSE_MEDIA_WHEN_OFFPAGE_COMMENTS_ARE_ADDED) === 'true' ?\r\n                true : false,\r\n            isEmailmeToggleOn: userOptionsHelper.getUserOptionByName(userOptionKeys.EMAIL_ME_WHEN_SCRIPTS_ARE_AVAILABLE_FOR_STANDARDISATION)\r\n                === 'true' ? true : false,\r\n            isOnScreenHintsOn: userOptionsHelper.getUserOptionByName(userOptionKeys.ON_SCREEN_HINTS) === 'true' ? true : false,\r\n            renderedOn: 0\r\n        };\r\n        _this._isAskOnLogout = true;\r\n        _this._isAutoAdvanceOn = true;\r\n        _this._isOffpageCommentOn = true;\r\n        _this._isEmailmeToggleOn = true;\r\n        _this._isOnScreenHintsOn = true;\r\n        _this.handleChange = _this.handleChange.bind(_this);\r\n        _this.onToggleChange = _this.onToggleChange.bind(_this);\r\n        _this.onOffPageCommentToggleChange = _this.onOffPageCommentToggleChange.bind(_this);\r\n        _this.onEmailmeToggleChange = _this.onEmailmeToggleChange.bind(_this);\r\n        _this.onOnScreenHintsToggleChange = _this.onOnScreenHintsToggleChange.bind(_this);\r\n        return _this;\r\n    }\r\n    /**\r\n     * Render component\r\n     */\r\n    LogoutConfirmationDialog.prototype.render = function () {\r\n        /**\r\n         * the value of the ask on logout option should take from local json if it is changed else take it from the store\r\n         */\r\n        this._isAskOnLogout = userOptionsHelper.getUserOptionByName(userOptionKeys.ASK_ON_LOG_OUT) === 'true' ? true : false;\r\n        this._isAutoAdvanceOn = userOptionsHelper.getUserOptionByName(userOptionKeys.ASSIGN_SINGLE_DIGIT_WITHOUT_PRESSING_ENTER)\r\n            === 'true' ? true : false;\r\n        this._isOffpageCommentOn = userOptionsHelper.getUserOptionByName(userOptionKeys.PAUSE_MEDIA_WHEN_OFFPAGE_COMMENTS_ARE_ADDED)\r\n            === 'true' ? true : false;\r\n        this._isEmailmeToggleOn = userOptionsHelper.getUserOptionByName(userOptionKeys.EMAIL_ME_WHEN_SCRIPTS_ARE_AVAILABLE_FOR_STANDARDISATION)\r\n            === 'true' ? true : false;\r\n        this._isOnScreenHintsOn = userOptionsHelper.getUserOptionByName(userOptionKeys.ON_SCREEN_HINTS) === 'true' ? true : false;\r\n        var emailMeToggleOption;\r\n        var enterEmailAddressAbove;\r\n        if (this._emailAddress === null || this._emailAddress === '') {\r\n            enterEmailAddressAbove = (React.createElement(\"label\", { className: 'error-alert simple-alert' }, localeStore.instance.TranslateText('generic.user-menu.user-options.enter-email-address-above')));\r\n        }\r\n        else {\r\n            enterEmailAddressAbove = null;\r\n        }\r\n        if (this._isScriptAvailabilityEmailAlert) {\r\n            emailMeToggleOption = (React.createElement(\"div\", { className: 'form-field inline script-available-settings' },\r\n                React.createElement(\"label\", { id: 'scriptAvailability', className: 'label' },\r\n                    localeStore.instance.TranslateText('generic.user-menu.user-options.email-me-when-scripts-are-available-for-standardisation'),\r\n                    React.createElement(\"br\", null),\r\n                    enterEmailAddressAbove),\r\n                React.createElement(ToggleButton, { id: 'scriptavailability_id', key: 'scriptavailability_key', isChecked: this._isEmailmeToggleOn, selectedLanguage: this.props.selectedLanguage, index: 0, onChange: this.onEmailmeToggleChange, style: this.props.style, className: 'form-component', title: localeStore.instance.TranslateText('generic.user-menu.user-options.email-me-when-scripts-are-available-for-standardisation'), isDisabled: this._emailAddress === null || this._emailAddress === '' ? true : false, onText: localeStore.instance.TranslateText('generic.toggle-button-states.on'), offText: localeStore.instance.TranslateText('generic.toggle-button-states.off') })));\r\n        }\r\n        else {\r\n            emailMeToggleOption = null;\r\n        }\r\n        return (React.createElement(\"div\", null,\r\n            React.createElement(\"div\", { className: 'logout-settings form-field inline' },\r\n                React.createElement(\"label\", { className: 'label' }, localeStore.instance.TranslateText('generic.user-menu.user-options.logout-confirmation')),\r\n                React.createElement(\"div\", { className: 'form-component toggle-button', \"aria-pressed\": 'true' },\r\n                    React.createElement(\"input\", { type: 'checkbox', id: 'logoutConfirm', checked: this._isAskOnLogout, \"data-value\": this._isAskOnLogout, onChange: this.handleChange }),\r\n                    React.createElement(\"label\", { title: localeStore.instance.TranslateText('generic.user-menu.user-options.logout-confirmation-tooltip'), className: 'toggle-label', htmlFor: 'logoutConfirm' },\r\n                        React.createElement(\"div\", { className: 'toggle-content' },\r\n                            React.createElement(\"div\", { className: 'on-text' }, localeStore.instance.TranslateText('generic.toggle-button-states.on')),\r\n                            React.createElement(\"div\", { className: 'off-text' }, localeStore.instance.TranslateText('generic.toggle-button-states.off'))),\r\n                        React.createElement(\"div\", { className: 'toggle-switch' })))),\r\n            React.createElement(\"div\", { className: 'form-field inline single-digit-mark-settings' },\r\n                React.createElement(\"label\", { id: 'singleDigit', className: 'label' }, localeStore.instance.TranslateText('generic.user-menu.user-options.assign-single-digit-marks-without-pressing-enter')),\r\n                React.createElement(ToggleButton, { id: 'assignSingleDigit_id', key: 'assignSingleDigit_key', isChecked: this._isAutoAdvanceOn, selectedLanguage: this.props.selectedLanguage, index: 0, onChange: this.onToggleChange, style: this.props.style, className: 'form-component', title: localeStore.instance.TranslateText('generic.user-menu.user-options.assign-single-digit-marks-without-pressing-enter'), onText: localeStore.instance.TranslateText('generic.toggle-button-states.on'), offText: localeStore.instance.TranslateText('generic.toggle-button-states.off') })),\r\n            React.createElement(\"div\", { className: 'form-field inline pause-media-offpagecomment' },\r\n                React.createElement(\"label\", { id: 'enhanced', className: 'label' }, localeStore.instance.TranslateText('generic.user-menu.user-options.pause-media-when-offpage-comments-are-added')),\r\n                React.createElement(ToggleButton, { id: 'enhancedoffpage_id', key: 'enhancedoffpage_key', isChecked: this._isOffpageCommentOn, selectedLanguage: this.props.selectedLanguage, index: 0, onChange: this.onOffPageCommentToggleChange, style: this.props.style, className: 'form-component', title: localeStore.instance.TranslateText('generic.user-menu.user-options.pause-media-when-offpage-comments-are-added'), onText: localeStore.instance.TranslateText('generic.toggle-button-states.on'), offText: localeStore.instance.TranslateText('generic.toggle-button-states.off') })),\r\n            emailMeToggleOption,\r\n            React.createElement(\"div\", { className: 'on-screen-hint-settings form-field inline' },\r\n                React.createElement(\"label\", { id: 'onScreenHint', className: 'label' }, localeStore.instance.TranslateText('generic.user-menu.user-options.on-screen-hints')),\r\n                React.createElement(ToggleButton, { id: 'onScreenHint_id', key: 'onScreenHint_key', isChecked: this._isOnScreenHintsOn, selectedLanguage: this.props.selectedLanguage, index: 0, onChange: this.onOnScreenHintsToggleChange, style: this.props.style, className: 'form-component', title: localeStore.instance.TranslateText('generic.user-menu.user-options.on-screen-hints'), onText: localeStore.instance.TranslateText('generic.toggle-button-states.on'), offText: localeStore.instance.TranslateText('generic.toggle-button-states.off') }))));\r\n    };\r\n    /**\r\n     * for handling the ask on logout option change event.\r\n     */\r\n    LogoutConfirmationDialog.prototype.handleChange = function (evt) {\r\n        this._isAskOnLogout = !this._isAskOnLogout;\r\n        /** Adding/Updating the changed value to the local json variable changed user options */\r\n        userOptionsHelper.save(userOptionKeys.ASK_ON_LOG_OUT, String(this._isAskOnLogout));\r\n        this.setState({ isAskOnLogout: !this.state.isAskOnLogout });\r\n    };\r\n    /**\r\n     * for handling the ask on Single Digit Mark Setting option change event.\r\n     */\r\n    LogoutConfirmationDialog.prototype.onToggleChange = function (evt) {\r\n        this._isAutoAdvanceOn = !this._isAutoAdvanceOn;\r\n        /** Adding/Updating the changed value to the local json variable changed user options */\r\n        userOptionsHelper.save(userOptionKeys.ASSIGN_SINGLE_DIGIT_WITHOUT_PRESSING_ENTER, String(this._isAutoAdvanceOn));\r\n        this.setState({ isAutoAdvanceOn: !this.state.isAutoAdvanceOn });\r\n    };\r\n    /**\r\n     * for handling the ask on Single Digit Mark Setting option change event.\r\n     */\r\n    LogoutConfirmationDialog.prototype.onOffPageCommentToggleChange = function (evt) {\r\n        this._isOffpageCommentOn = !this._isOffpageCommentOn;\r\n        /** Adding/Updating the changed value to the local json variable changed user options */\r\n        userOptionsHelper.save(userOptionKeys.PAUSE_MEDIA_WHEN_OFFPAGE_COMMENTS_ARE_ADDED, String(this._isOffpageCommentOn));\r\n        this.setState({ isPauseMediaonOffpageCommentAdd: !this.state.isPauseMediaonOffpageCommentAdd });\r\n    };\r\n    /**\r\n     * for handling the ask on Script Availability Email Alert change event.\r\n     */\r\n    LogoutConfirmationDialog.prototype.onEmailmeToggleChange = function (evt) {\r\n        this._isEmailmeToggleOn = !this._isEmailmeToggleOn;\r\n        userOptionsHelper.save(userOptionKeys.EMAIL_ME_WHEN_SCRIPTS_ARE_AVAILABLE_FOR_STANDARDISATION, String(this._isEmailmeToggleOn));\r\n        this.setState({ isEmailmeToggleOn: !this.state.isEmailmeToggleOn });\r\n    };\r\n    /**\r\n     *\r\n     * Handling the on screen hint toggle change event\r\n     */\r\n    LogoutConfirmationDialog.prototype.onOnScreenHintsToggleChange = function (evt) {\r\n        this._isOnScreenHintsOn = !this._isOnScreenHintsOn;\r\n        userOptionsHelper.save(userOptionKeys.ON_SCREEN_HINTS, String(this._isOnScreenHintsOn));\r\n        this.setState({ isOnScreenHintsOn: !this.state.isOnScreenHintsOn });\r\n    };\r\n    /**\r\n     * Subscribe the user option save event to re-render the component on change of ask on logout value.\r\n     */\r\n    LogoutConfirmationDialog.prototype.componentWillMount = function () {\r\n        useroptionStore.instance.addListener(useroptionStore.UseroptionStore.USER_OPTION_SAVE_EVENT, this.refreshState);\r\n    };\r\n    /**\r\n     * Unsubscribe events\r\n     */\r\n    LogoutConfirmationDialog.prototype.componentWillUnmount = function () {\r\n        useroptionStore.instance.removeListener(useroptionStore.UseroptionStore.USER_OPTION_SAVE_EVENT, this.refreshState);\r\n        userInfoStore.instance.removeListener(userInfoStore.UserInfoStore.USERINFO_EVENT, this.getUserInformation);\r\n        userInfoStore.instance.removeListener(userInfoStore.UserInfoStore.USERINFO_SAVE, this.userInfoSaved);\r\n    };\r\n    /**\r\n     * Component did mount\r\n     */\r\n    LogoutConfirmationDialog.prototype.componentDidMount = function () {\r\n        userInfoStore.instance.addListener(userInfoStore.UserInfoStore.USERINFO_EVENT, this.getUserInformation);\r\n        userInfoStore.instance.addListener(userInfoStore.UserInfoStore.USERINFO_SAVE, this.userInfoSaved);\r\n    };\r\n    return LogoutConfirmationDialog;\r\n}(pureRenderComponent));\r\nmodule.exports = LogoutConfirmationDialog;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzUxLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvbG9nb3V0L2xvZ291dGNvbmZpcm1hdGlvbmRpYWxvZy50c3g/ZWQ1ZiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxyXG4gIFJlYWN0IGNvbXBvbmVudCBmb3IgYXNrIGZvciBsb2dvdXQgYnV0dG9uIGluIHVzZXIgb3B0aW9uc1xyXG4qL1xyXG4vKiB0c2xpbnQ6ZGlzYWJsZTpuby11bnVzZWQtdmFyaWFibGUgKi9cclxuaW1wb3J0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcclxuLyogdHNsaW50OmVuYWJsZTpuby11bnVzZWQtdmFyaWFibGUgKi9cclxuaW1wb3J0IHB1cmVSZW5kZXJDb21wb25lbnQgPSByZXF1aXJlKCcuLi9iYXNlL3B1cmVyZW5kZXJjb21wb25lbnQnKTtcclxuaW1wb3J0IGxvY2FsZVN0b3JlID0gcmVxdWlyZSgnLi4vLi4vc3RvcmVzL2xvY2FsZS9sb2NhbGVzdG9yZScpO1xyXG5pbXBvcnQgdXNlck9wdGlvbnNIZWxwZXIgPSByZXF1aXJlKCcuLi8uLi91dGlsaXR5L3VzZXJvcHRpb24vdXNlcm9wdGlvbnNoZWxwZXInKTtcclxuaW1wb3J0IHVzZXJPcHRpb25LZXlzID0gcmVxdWlyZSgnLi4vLi4vdXRpbGl0eS91c2Vyb3B0aW9uL3VzZXJvcHRpb25rZXlzJyk7XHJcbmltcG9ydCB1c2Vyb3B0aW9uU3RvcmUgPSByZXF1aXJlKCcuLi8uLi9zdG9yZXMvdXNlcm9wdGlvbi91c2Vyb3B0aW9uc3RvcmUnKTtcclxuaW1wb3J0IFRvZ2dsZUJ1dHRvbiA9IHJlcXVpcmUoJy4uL3V0aWxpdHkvdG9nZ2xlYnV0dG9uJyk7XHJcbmltcG9ydCB1c2VySW5mb1N0b3JlID0gcmVxdWlyZSgnLi4vLi4vc3RvcmVzL3VzZXJpbmZvL3VzZXJpbmZvc3RvcmUnKTtcclxuLyoqXHJcbiAqIFByb3BlcnRpZXMgb2YgYSBjb21wb25lbnRcclxuICovXHJcbmludGVyZmFjZSBQcm9wcyBleHRlbmRzIExvY2FsZVNlbGVjdGlvbkJhc2Uge1xyXG4gICAgaXNVc2VyT3B0aW9uTG9hZGVkPzogYm9vbGVhbjtcclxuICAgIHN0eWxlPzogUmVhY3QuQ1NTUHJvcGVydGllcztcclxufVxyXG5pbnRlcmZhY2UgU3RhdGUge1xyXG4gICAgaXNBc2tPbkxvZ291dD86IGJvb2xlYW47XHJcbiAgICBpc0F1dG9BZHZhbmNlT24/OiBib29sZWFuO1xyXG5cdGlzUGF1c2VNZWRpYW9uT2ZmcGFnZUNvbW1lbnRBZGQ6IGJvb2xlYW47XHJcbiAgICBpc0VtYWlsbWVUb2dnbGVPbjogYm9vbGVhbjtcclxuICAgIGlzT25TY3JlZW5IaW50c09uOiBib29sZWFuO1xyXG5cdHJlbmRlcmVkT246IG51bWJlcjtcclxufVxyXG4vKipcclxuICogUmVhY3QgY29tcG9uZW50IGNsYXNzIGZvciBBc2sgb24gTG9nb3V0IGNvbmZpcm1hdGlvblxyXG4gKi9cclxuY2xhc3MgTG9nb3V0Q29uZmlybWF0aW9uRGlhbG9nIGV4dGVuZHMgcHVyZVJlbmRlckNvbXBvbmVudDxQcm9wcywgU3RhdGU+IHtcclxuXHJcblx0cHJpdmF0ZSBfaXNBc2tPbkxvZ291dDogYm9vbGVhbjtcclxuXHRwcml2YXRlIF9pc0F1dG9BZHZhbmNlT246IGJvb2xlYW47XHJcblx0cHJpdmF0ZSBfaXNPZmZwYWdlQ29tbWVudE9uOiBib29sZWFuO1xyXG5cdHByaXZhdGUgX2lzRW1haWxtZVRvZ2dsZU9uOiBib29sZWFuO1xyXG5cdHByaXZhdGUgX2VtYWlsQWRkcmVzczogc3RyaW5nID0gJyc7XHJcbiAgICBwcml2YXRlIF9pc1NjcmlwdEF2YWlsYWJpbGl0eUVtYWlsQWxlcnQ6IGJvb2xlYW47XHJcbiAgICBwcml2YXRlIF9pc09uU2NyZWVuSGludHNPbjogYm9vbGVhbjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbnN0cnVjdG9yIExvZ291dENvbmZpcm1hdGlvbkRpYWxvZ1xyXG4gICAgICogQHBhcmFtIHByb3BzXHJcbiAgICAgKiBAcGFyYW0gc3RhdGVcclxuICAgICAqL1xyXG5cdGNvbnN0cnVjdG9yKHByb3BzOiBQcm9wcywgc3RhdGU6IFN0YXRlKSB7XHJcblx0XHRzdXBlcihwcm9wcywgc3RhdGUpO1xyXG5cdFx0dGhpcy5zdGF0ZSA9IHtcclxuXHRcdFx0aXNBc2tPbkxvZ291dDogdXNlck9wdGlvbnNIZWxwZXIuZ2V0VXNlck9wdGlvbkJ5TmFtZSh1c2VyT3B0aW9uS2V5cy5BU0tfT05fTE9HX09VVCkgPT09ICd0cnVlJyA/IHRydWUgOiBmYWxzZSxcclxuXHRcdFx0aXNBdXRvQWR2YW5jZU9uOiB1c2VyT3B0aW9uc0hlbHBlci5nZXRVc2VyT3B0aW9uQnlOYW1lKHVzZXJPcHRpb25LZXlzLkFTU0lHTl9TSU5HTEVfRElHSVRfV0lUSE9VVF9QUkVTU0lOR19FTlRFUikgPT09ICd0cnVlJyA/XHJcblx0XHRcdFx0dHJ1ZSA6IGZhbHNlLFxyXG5cdFx0XHRpc1BhdXNlTWVkaWFvbk9mZnBhZ2VDb21tZW50QWRkOlxyXG5cdFx0XHR1c2VyT3B0aW9uc0hlbHBlci5nZXRVc2VyT3B0aW9uQnlOYW1lKHVzZXJPcHRpb25LZXlzLlBBVVNFX01FRElBX1dIRU5fT0ZGUEFHRV9DT01NRU5UU19BUkVfQURERUQpID09PSAndHJ1ZScgP1xyXG5cdFx0XHRcdHRydWUgOiBmYWxzZSxcclxuXHRcdFx0aXNFbWFpbG1lVG9nZ2xlT246IHVzZXJPcHRpb25zSGVscGVyLmdldFVzZXJPcHRpb25CeU5hbWUodXNlck9wdGlvbktleXMuRU1BSUxfTUVfV0hFTl9TQ1JJUFRTX0FSRV9BVkFJTEFCTEVfRk9SX1NUQU5EQVJESVNBVElPTilcclxuICAgICAgICAgICAgICAgID09PSAndHJ1ZScgPyB0cnVlIDogZmFsc2UsXHJcbiAgICAgICAgICAgIGlzT25TY3JlZW5IaW50c09uOiB1c2VyT3B0aW9uc0hlbHBlci5nZXRVc2VyT3B0aW9uQnlOYW1lKHVzZXJPcHRpb25LZXlzLk9OX1NDUkVFTl9ISU5UUykgPT09ICd0cnVlJyA/IHRydWUgOiBmYWxzZSxcclxuXHRcdFx0cmVuZGVyZWRPbiA6IDBcclxuXHRcdH07XHJcblx0XHR0aGlzLl9pc0Fza09uTG9nb3V0ID0gdHJ1ZTtcclxuXHRcdHRoaXMuX2lzQXV0b0FkdmFuY2VPbiA9IHRydWU7XHJcblx0XHR0aGlzLl9pc09mZnBhZ2VDb21tZW50T24gPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuX2lzRW1haWxtZVRvZ2dsZU9uID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLl9pc09uU2NyZWVuSGludHNPbiA9IHRydWU7XHJcblx0XHR0aGlzLmhhbmRsZUNoYW5nZSA9IHRoaXMuaGFuZGxlQ2hhbmdlLmJpbmQodGhpcyk7XHJcblx0XHR0aGlzLm9uVG9nZ2xlQ2hhbmdlID0gdGhpcy5vblRvZ2dsZUNoYW5nZS5iaW5kKHRoaXMpO1xyXG5cdFx0dGhpcy5vbk9mZlBhZ2VDb21tZW50VG9nZ2xlQ2hhbmdlID0gdGhpcy5vbk9mZlBhZ2VDb21tZW50VG9nZ2xlQ2hhbmdlLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5vbkVtYWlsbWVUb2dnbGVDaGFuZ2UgPSB0aGlzLm9uRW1haWxtZVRvZ2dsZUNoYW5nZS5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMub25PblNjcmVlbkhpbnRzVG9nZ2xlQ2hhbmdlID0gdGhpcy5vbk9uU2NyZWVuSGludHNUb2dnbGVDaGFuZ2UuYmluZCh0aGlzKTtcclxuXHR9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZW5kZXIgY29tcG9uZW50XHJcbiAgICAgKi9cclxuXHRwdWJsaWMgcmVuZGVyKCkge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIHRoZSB2YWx1ZSBvZiB0aGUgYXNrIG9uIGxvZ291dCBvcHRpb24gc2hvdWxkIHRha2UgZnJvbSBsb2NhbCBqc29uIGlmIGl0IGlzIGNoYW5nZWQgZWxzZSB0YWtlIGl0IGZyb20gdGhlIHN0b3JlXHJcbiAgICAgICAgICovXHJcblx0XHR0aGlzLl9pc0Fza09uTG9nb3V0ID0gdXNlck9wdGlvbnNIZWxwZXIuZ2V0VXNlck9wdGlvbkJ5TmFtZSh1c2VyT3B0aW9uS2V5cy5BU0tfT05fTE9HX09VVCkgPT09ICd0cnVlJyA/IHRydWUgOiBmYWxzZTtcclxuXHRcdHRoaXMuX2lzQXV0b0FkdmFuY2VPbiA9IHVzZXJPcHRpb25zSGVscGVyLmdldFVzZXJPcHRpb25CeU5hbWUodXNlck9wdGlvbktleXMuQVNTSUdOX1NJTkdMRV9ESUdJVF9XSVRIT1VUX1BSRVNTSU5HX0VOVEVSKVxyXG5cdFx0XHQ9PT0gJ3RydWUnID8gdHJ1ZSA6IGZhbHNlO1xyXG5cdFx0dGhpcy5faXNPZmZwYWdlQ29tbWVudE9uID0gdXNlck9wdGlvbnNIZWxwZXIuZ2V0VXNlck9wdGlvbkJ5TmFtZSh1c2VyT3B0aW9uS2V5cy5QQVVTRV9NRURJQV9XSEVOX09GRlBBR0VfQ09NTUVOVFNfQVJFX0FEREVEKVxyXG5cdFx0XHQ9PT0gJ3RydWUnID8gdHJ1ZSA6IGZhbHNlO1xyXG5cdFx0dGhpcy5faXNFbWFpbG1lVG9nZ2xlT24gPSB1c2VyT3B0aW9uc0hlbHBlci5nZXRVc2VyT3B0aW9uQnlOYW1lKHVzZXJPcHRpb25LZXlzLkVNQUlMX01FX1dIRU5fU0NSSVBUU19BUkVfQVZBSUxBQkxFX0ZPUl9TVEFOREFSRElTQVRJT04pXHJcbiAgICAgICAgICAgID09PSAndHJ1ZScgPyB0cnVlIDogZmFsc2U7XHJcbiAgICAgICAgdGhpcy5faXNPblNjcmVlbkhpbnRzT24gPSB1c2VyT3B0aW9uc0hlbHBlci5nZXRVc2VyT3B0aW9uQnlOYW1lKHVzZXJPcHRpb25LZXlzLk9OX1NDUkVFTl9ISU5UUykgPT09ICd0cnVlJyA/IHRydWUgOiBmYWxzZTtcclxuXHJcblx0XHRsZXQgZW1haWxNZVRvZ2dsZU9wdGlvbjogSlNYLkVsZW1lbnQ7XHJcblx0XHRsZXQgZW50ZXJFbWFpbEFkZHJlc3NBYm92ZTogSlNYLkVsZW1lbnQ7XHJcblxyXG5cdFx0aWYgKHRoaXMuX2VtYWlsQWRkcmVzcyA9PT0gbnVsbCB8fCB0aGlzLl9lbWFpbEFkZHJlc3MgPT09ICcnKSB7XHJcblx0XHRcdGVudGVyRW1haWxBZGRyZXNzQWJvdmUgPSAoXHJcblx0XHRcdFx0PGxhYmVsIGNsYXNzTmFtZT0nZXJyb3ItYWxlcnQgc2ltcGxlLWFsZXJ0Jz5cclxuXHRcdFx0XHRcdHtsb2NhbGVTdG9yZS5pbnN0YW5jZS5UcmFuc2xhdGVUZXh0KCdnZW5lcmljLnVzZXItbWVudS51c2VyLW9wdGlvbnMuZW50ZXItZW1haWwtYWRkcmVzcy1hYm92ZScpfVxyXG5cdFx0XHRcdDwvbGFiZWw+XHJcblx0XHRcdCk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRlbnRlckVtYWlsQWRkcmVzc0Fib3ZlID0gbnVsbDtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAodGhpcy5faXNTY3JpcHRBdmFpbGFiaWxpdHlFbWFpbEFsZXJ0KSB7XHJcblx0XHRcdGVtYWlsTWVUb2dnbGVPcHRpb24gPSAoXHJcblx0XHRcdFx0PGRpdiBjbGFzc05hbWU9J2Zvcm0tZmllbGQgaW5saW5lIHNjcmlwdC1hdmFpbGFibGUtc2V0dGluZ3MnPlxyXG5cdFx0XHRcdFx0PGxhYmVsIGlkPSdzY3JpcHRBdmFpbGFiaWxpdHknIGNsYXNzTmFtZT0nbGFiZWwnPlxyXG5cdFx0XHRcdFx0XHR7bG9jYWxlU3RvcmUuaW5zdGFuY2UuVHJhbnNsYXRlVGV4dFxyXG5cdFx0XHRcdFx0XHRcdCgnZ2VuZXJpYy51c2VyLW1lbnUudXNlci1vcHRpb25zLmVtYWlsLW1lLXdoZW4tc2NyaXB0cy1hcmUtYXZhaWxhYmxlLWZvci1zdGFuZGFyZGlzYXRpb24nKX1cclxuXHRcdFx0XHRcdFx0PGJyIC8+XHJcblx0XHRcdFx0XHRcdHtlbnRlckVtYWlsQWRkcmVzc0Fib3ZlfVxyXG5cdFx0XHRcdFx0PC9sYWJlbD5cclxuXHRcdFx0XHRcdDxUb2dnbGVCdXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3NjcmlwdGF2YWlsYWJpbGl0eV9pZCdcclxuICAgICAgICAgICAgICAgICAgICAgICAga2V5PSdzY3JpcHRhdmFpbGFiaWxpdHlfa2V5J1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0NoZWNrZWQ9e3RoaXMuX2lzRW1haWxtZVRvZ2dsZU9ufVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZExhbmd1YWdlPXt0aGlzLnByb3BzLnNlbGVjdGVkTGFuZ3VhZ2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4PXswfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5vbkVtYWlsbWVUb2dnbGVDaGFuZ2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt0aGlzLnByb3BzLnN0eWxlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9eydmb3JtLWNvbXBvbmVudCd9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtsb2NhbGVTdG9yZS5pbnN0YW5jZS5UcmFuc2xhdGVUZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoJ2dlbmVyaWMudXNlci1tZW51LnVzZXItb3B0aW9ucy5lbWFpbC1tZS13aGVuLXNjcmlwdHMtYXJlLWF2YWlsYWJsZS1mb3Itc3RhbmRhcmRpc2F0aW9uJyl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzRGlzYWJsZWQ9e3RoaXMuX2VtYWlsQWRkcmVzcyA9PT0gbnVsbCB8fCB0aGlzLl9lbWFpbEFkZHJlc3MgPT09ICcnID8gdHJ1ZSA6IGZhbHNlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvblRleHQ9e2xvY2FsZVN0b3JlLmluc3RhbmNlLlRyYW5zbGF0ZVRleHQoJ2dlbmVyaWMudG9nZ2xlLWJ1dHRvbi1zdGF0ZXMub24nKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb2ZmVGV4dD17bG9jYWxlU3RvcmUuaW5zdGFuY2UuVHJhbnNsYXRlVGV4dCgnZ2VuZXJpYy50b2dnbGUtYnV0dG9uLXN0YXRlcy5vZmYnKX0vPlxyXG5cdFx0XHRcdDwvZGl2PlxyXG5cdFx0XHQpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0ZW1haWxNZVRvZ2dsZU9wdGlvbiA9IG51bGw7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIChcclxuXHRcdFx0PGRpdj5cclxuXHRcdFx0XHQ8ZGl2IGNsYXNzTmFtZT0nbG9nb3V0LXNldHRpbmdzIGZvcm0tZmllbGQgaW5saW5lJz5cclxuXHRcdFx0XHRcdDxsYWJlbCAgY2xhc3NOYW1lPSdsYWJlbCc+XHJcblx0XHRcdFx0XHRcdHtsb2NhbGVTdG9yZS5pbnN0YW5jZS5UcmFuc2xhdGVUZXh0KCdnZW5lcmljLnVzZXItbWVudS51c2VyLW9wdGlvbnMubG9nb3V0LWNvbmZpcm1hdGlvbicpIH1cclxuXHRcdFx0XHRcdDwvbGFiZWw+XHJcblx0XHRcdFx0XHQ8ZGl2IGNsYXNzTmFtZT0nZm9ybS1jb21wb25lbnQgdG9nZ2xlLWJ1dHRvbicgYXJpYS1wcmVzc2VkPSd0cnVlJz5cclxuXHRcdFx0XHRcdFx0PGlucHV0IHR5cGU9J2NoZWNrYm94J1xyXG5cdFx0XHRcdFx0XHRcdGlkPSdsb2dvdXRDb25maXJtJ1xyXG5cdFx0XHRcdFx0XHRcdGNoZWNrZWQ9e3RoaXMuX2lzQXNrT25Mb2dvdXQgfVxyXG5cdFx0XHRcdFx0XHRcdGRhdGEtdmFsdWU9e3RoaXMuX2lzQXNrT25Mb2dvdXQgfVxyXG5cdFx0XHRcdFx0XHRcdG9uQ2hhbmdlPXt0aGlzLmhhbmRsZUNoYW5nZX0vPlxyXG5cdFx0XHRcdFx0XHQ8bGFiZWwgdGl0bGU9e2xvY2FsZVN0b3JlLmluc3RhbmNlLlRyYW5zbGF0ZVRleHQoJ2dlbmVyaWMudXNlci1tZW51LnVzZXItb3B0aW9ucy5sb2dvdXQtY29uZmlybWF0aW9uLXRvb2x0aXAnKSB9XHJcblx0XHRcdFx0XHRcdFx0Y2xhc3NOYW1lPSd0b2dnbGUtbGFiZWwnIGh0bWxGb3I9J2xvZ291dENvbmZpcm0nPlxyXG5cdFx0XHRcdFx0XHRcdDxkaXYgY2xhc3NOYW1lPSd0b2dnbGUtY29udGVudCc+XHJcblx0XHRcdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzTmFtZT0nb24tdGV4dCc+XHJcblx0XHRcdFx0XHRcdFx0XHRcdHtsb2NhbGVTdG9yZS5pbnN0YW5jZS5UcmFuc2xhdGVUZXh0KCdnZW5lcmljLnRvZ2dsZS1idXR0b24tc3RhdGVzLm9uJykgfVxyXG5cdFx0XHRcdFx0XHRcdFx0PC9kaXY+XHJcblx0XHRcdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzTmFtZT0nb2ZmLXRleHQnPlxyXG5cdFx0XHRcdFx0XHRcdFx0XHR7bG9jYWxlU3RvcmUuaW5zdGFuY2UuVHJhbnNsYXRlVGV4dCgnZ2VuZXJpYy50b2dnbGUtYnV0dG9uLXN0YXRlcy5vZmYnKSB9XHJcblx0XHRcdFx0XHRcdFx0XHQ8L2Rpdj5cclxuXHRcdFx0XHRcdFx0XHQ8L2Rpdj5cclxuXHRcdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzTmFtZT0ndG9nZ2xlLXN3aXRjaCc+PC9kaXY+XHJcblx0XHRcdFx0XHRcdDwvbGFiZWw+XHJcblx0XHRcdFx0XHQ8L2Rpdj5cclxuXHRcdFx0XHQ8L2Rpdj5cclxuXHRcdFx0XHQ8ZGl2IGNsYXNzTmFtZT0nZm9ybS1maWVsZCBpbmxpbmUgc2luZ2xlLWRpZ2l0LW1hcmstc2V0dGluZ3MnPlxyXG5cdFx0XHRcdFx0PGxhYmVsIGlkPSdzaW5nbGVEaWdpdCcgY2xhc3NOYW1lPSdsYWJlbCc+XHJcblx0XHRcdFx0XHRcdHtsb2NhbGVTdG9yZS5pbnN0YW5jZS5UcmFuc2xhdGVUZXh0XHJcblx0XHRcdFx0XHRcdFx0KCdnZW5lcmljLnVzZXItbWVudS51c2VyLW9wdGlvbnMuYXNzaWduLXNpbmdsZS1kaWdpdC1tYXJrcy13aXRob3V0LXByZXNzaW5nLWVudGVyJyl9XHJcblx0XHRcdFx0XHQ8L2xhYmVsPlxyXG5cdFx0XHRcdFx0PFRvZ2dsZUJ1dHRvblxyXG5cdFx0XHRcdFx0XHRpZD0nYXNzaWduU2luZ2xlRGlnaXRfaWQnXHJcblx0XHRcdFx0XHRcdGtleT0nYXNzaWduU2luZ2xlRGlnaXRfa2V5J1xyXG5cdFx0XHRcdFx0XHRpc0NoZWNrZWQ9e3RoaXMuX2lzQXV0b0FkdmFuY2VPbn1cclxuXHRcdFx0XHRcdFx0c2VsZWN0ZWRMYW5ndWFnZSA9IHt0aGlzLnByb3BzLnNlbGVjdGVkTGFuZ3VhZ2V9XHJcblx0XHRcdFx0XHRcdGluZGV4PXswfVxyXG5cdFx0XHRcdFx0XHRvbkNoYW5nZT17dGhpcy5vblRvZ2dsZUNoYW5nZX1cclxuXHRcdFx0XHRcdFx0c3R5bGU9e3RoaXMucHJvcHMuc3R5bGV9XHJcblx0XHRcdFx0XHRcdGNsYXNzTmFtZT17J2Zvcm0tY29tcG9uZW50J31cclxuXHRcdFx0XHRcdFx0dGl0bGU9e2xvY2FsZVN0b3JlLmluc3RhbmNlLlRyYW5zbGF0ZVRleHRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICgnZ2VuZXJpYy51c2VyLW1lbnUudXNlci1vcHRpb25zLmFzc2lnbi1zaW5nbGUtZGlnaXQtbWFya3Mtd2l0aG91dC1wcmVzc2luZy1lbnRlcicpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvblRleHQ9e2xvY2FsZVN0b3JlLmluc3RhbmNlLlRyYW5zbGF0ZVRleHQoJ2dlbmVyaWMudG9nZ2xlLWJ1dHRvbi1zdGF0ZXMub24nKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb2ZmVGV4dD17bG9jYWxlU3RvcmUuaW5zdGFuY2UuVHJhbnNsYXRlVGV4dCgnZ2VuZXJpYy50b2dnbGUtYnV0dG9uLXN0YXRlcy5vZmYnKX0vPlxyXG5cdFx0XHRcdDwvZGl2PlxyXG5cdFx0XHRcdDxkaXYgY2xhc3NOYW1lPSdmb3JtLWZpZWxkIGlubGluZSBwYXVzZS1tZWRpYS1vZmZwYWdlY29tbWVudCc+XHJcblx0XHRcdFx0XHQ8bGFiZWwgaWQ9J2VuaGFuY2VkJyBjbGFzc05hbWU9J2xhYmVsJz5cclxuXHRcdFx0XHRcdFx0e2xvY2FsZVN0b3JlLmluc3RhbmNlLlRyYW5zbGF0ZVRleHRcclxuXHRcdFx0XHRcdFx0XHQoJ2dlbmVyaWMudXNlci1tZW51LnVzZXItb3B0aW9ucy5wYXVzZS1tZWRpYS13aGVuLW9mZnBhZ2UtY29tbWVudHMtYXJlLWFkZGVkJyl9XHJcblx0XHRcdFx0XHQ8L2xhYmVsPlxyXG5cdFx0XHRcdFx0PFRvZ2dsZUJ1dHRvblxyXG5cdFx0XHRcdFx0XHRpZD0nZW5oYW5jZWRvZmZwYWdlX2lkJ1xyXG5cdFx0XHRcdFx0XHRrZXk9J2VuaGFuY2Vkb2ZmcGFnZV9rZXknXHJcblx0XHRcdFx0XHRcdGlzQ2hlY2tlZD17dGhpcy5faXNPZmZwYWdlQ29tbWVudE9ufVxyXG5cdFx0XHRcdFx0XHRzZWxlY3RlZExhbmd1YWdlPXt0aGlzLnByb3BzLnNlbGVjdGVkTGFuZ3VhZ2V9XHJcblx0XHRcdFx0XHRcdGluZGV4PXswfVxyXG5cdFx0XHRcdFx0XHRvbkNoYW5nZT17dGhpcy5vbk9mZlBhZ2VDb21tZW50VG9nZ2xlQ2hhbmdlfVxyXG5cdFx0XHRcdFx0XHRzdHlsZT17dGhpcy5wcm9wcy5zdHlsZX1cclxuXHRcdFx0XHRcdFx0Y2xhc3NOYW1lPXsnZm9ybS1jb21wb25lbnQnfVxyXG5cdFx0XHRcdFx0XHR0aXRsZT17bG9jYWxlU3RvcmUuaW5zdGFuY2UuVHJhbnNsYXRlVGV4dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKCdnZW5lcmljLnVzZXItbWVudS51c2VyLW9wdGlvbnMucGF1c2UtbWVkaWEtd2hlbi1vZmZwYWdlLWNvbW1lbnRzLWFyZS1hZGRlZCcpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvblRleHQ9e2xvY2FsZVN0b3JlLmluc3RhbmNlLlRyYW5zbGF0ZVRleHQoJ2dlbmVyaWMudG9nZ2xlLWJ1dHRvbi1zdGF0ZXMub24nKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb2ZmVGV4dD17bG9jYWxlU3RvcmUuaW5zdGFuY2UuVHJhbnNsYXRlVGV4dCgnZ2VuZXJpYy50b2dnbGUtYnV0dG9uLXN0YXRlcy5vZmYnKX0vPlxyXG5cdFx0XHRcdDwvZGl2PlxyXG4gICAgICAgICAgICAgICAge2VtYWlsTWVUb2dnbGVPcHRpb259XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nb24tc2NyZWVuLWhpbnQtc2V0dGluZ3MgZm9ybS1maWVsZCBpbmxpbmUnPlxyXG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbCBpZD0nb25TY3JlZW5IaW50JyBjbGFzc05hbWU9J2xhYmVsJz5cclxuICAgICAgICAgICAgICAgICAgICAgICAge2xvY2FsZVN0b3JlLmluc3RhbmNlLlRyYW5zbGF0ZVRleHRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICgnZ2VuZXJpYy51c2VyLW1lbnUudXNlci1vcHRpb25zLm9uLXNjcmVlbi1oaW50cycpfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgPFRvZ2dsZUJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZD0nb25TY3JlZW5IaW50X2lkJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk9J29uU2NyZWVuSGludF9rZXknXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQ2hlY2tlZD17dGhpcy5faXNPblNjcmVlbkhpbnRzT259XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkTGFuZ3VhZ2U9e3RoaXMucHJvcHMuc2VsZWN0ZWRMYW5ndWFnZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg9ezB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLm9uT25TY3JlZW5IaW50c1RvZ2dsZUNoYW5nZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3RoaXMucHJvcHMuc3R5bGV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17J2Zvcm0tY29tcG9uZW50J31cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2xvY2FsZVN0b3JlLmluc3RhbmNlLlRyYW5zbGF0ZVRleHRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICgnZ2VuZXJpYy51c2VyLW1lbnUudXNlci1vcHRpb25zLm9uLXNjcmVlbi1oaW50cycpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvblRleHQ9e2xvY2FsZVN0b3JlLmluc3RhbmNlLlRyYW5zbGF0ZVRleHQoJ2dlbmVyaWMudG9nZ2xlLWJ1dHRvbi1zdGF0ZXMub24nKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb2ZmVGV4dD17bG9jYWxlU3RvcmUuaW5zdGFuY2UuVHJhbnNsYXRlVGV4dCgnZ2VuZXJpYy50b2dnbGUtYnV0dG9uLXN0YXRlcy5vZmYnKX0vPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcblx0XHRcdDwvZGl2PlxyXG5cdFx0KTtcclxuXHR9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBmb3IgaGFuZGxpbmcgdGhlIGFzayBvbiBsb2dvdXQgb3B0aW9uIGNoYW5nZSBldmVudC5cclxuICAgICAqL1xyXG5cdHByaXZhdGUgaGFuZGxlQ2hhbmdlKGV2dDogYW55KTogdm9pZCB7XHJcblx0XHR0aGlzLl9pc0Fza09uTG9nb3V0ID0gIXRoaXMuX2lzQXNrT25Mb2dvdXQ7XHJcblx0XHQvKiogQWRkaW5nL1VwZGF0aW5nIHRoZSBjaGFuZ2VkIHZhbHVlIHRvIHRoZSBsb2NhbCBqc29uIHZhcmlhYmxlIGNoYW5nZWQgdXNlciBvcHRpb25zICovXHJcblx0XHR1c2VyT3B0aW9uc0hlbHBlci5zYXZlKHVzZXJPcHRpb25LZXlzLkFTS19PTl9MT0dfT1VULCBTdHJpbmcodGhpcy5faXNBc2tPbkxvZ291dCkpO1xyXG5cdFx0dGhpcy5zZXRTdGF0ZSh7IGlzQXNrT25Mb2dvdXQ6ICF0aGlzLnN0YXRlLmlzQXNrT25Mb2dvdXQgfSk7XHJcblx0fVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogZm9yIGhhbmRsaW5nIHRoZSBhc2sgb24gU2luZ2xlIERpZ2l0IE1hcmsgU2V0dGluZyBvcHRpb24gY2hhbmdlIGV2ZW50LlxyXG4gICAgICovXHJcblx0cHJpdmF0ZSBvblRvZ2dsZUNoYW5nZShldnQ6IGFueSk6IHZvaWQge1xyXG5cdFx0dGhpcy5faXNBdXRvQWR2YW5jZU9uID0gIXRoaXMuX2lzQXV0b0FkdmFuY2VPbjtcclxuXHRcdC8qKiBBZGRpbmcvVXBkYXRpbmcgdGhlIGNoYW5nZWQgdmFsdWUgdG8gdGhlIGxvY2FsIGpzb24gdmFyaWFibGUgY2hhbmdlZCB1c2VyIG9wdGlvbnMgKi9cclxuXHRcdHVzZXJPcHRpb25zSGVscGVyLnNhdmUodXNlck9wdGlvbktleXMuQVNTSUdOX1NJTkdMRV9ESUdJVF9XSVRIT1VUX1BSRVNTSU5HX0VOVEVSLCBTdHJpbmcodGhpcy5faXNBdXRvQWR2YW5jZU9uKSk7XHJcblx0XHR0aGlzLnNldFN0YXRlKHsgaXNBdXRvQWR2YW5jZU9uOiAhdGhpcy5zdGF0ZS5pc0F1dG9BZHZhbmNlT24gfSk7XHJcblx0fVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogZm9yIGhhbmRsaW5nIHRoZSBhc2sgb24gU2luZ2xlIERpZ2l0IE1hcmsgU2V0dGluZyBvcHRpb24gY2hhbmdlIGV2ZW50LlxyXG4gICAgICovXHJcblx0cHJpdmF0ZSBvbk9mZlBhZ2VDb21tZW50VG9nZ2xlQ2hhbmdlKGV2dDogYW55KTogdm9pZCB7XHJcblx0XHR0aGlzLl9pc09mZnBhZ2VDb21tZW50T24gPSAhdGhpcy5faXNPZmZwYWdlQ29tbWVudE9uO1xyXG5cdFx0LyoqIEFkZGluZy9VcGRhdGluZyB0aGUgY2hhbmdlZCB2YWx1ZSB0byB0aGUgbG9jYWwganNvbiB2YXJpYWJsZSBjaGFuZ2VkIHVzZXIgb3B0aW9ucyAqL1xyXG5cdFx0dXNlck9wdGlvbnNIZWxwZXIuc2F2ZSh1c2VyT3B0aW9uS2V5cy5QQVVTRV9NRURJQV9XSEVOX09GRlBBR0VfQ09NTUVOVFNfQVJFX0FEREVELCBTdHJpbmcodGhpcy5faXNPZmZwYWdlQ29tbWVudE9uKSk7XHJcblx0XHR0aGlzLnNldFN0YXRlKHsgaXNQYXVzZU1lZGlhb25PZmZwYWdlQ29tbWVudEFkZDogIXRoaXMuc3RhdGUuaXNQYXVzZU1lZGlhb25PZmZwYWdlQ29tbWVudEFkZCB9KTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIGZvciBoYW5kbGluZyB0aGUgYXNrIG9uIFNjcmlwdCBBdmFpbGFiaWxpdHkgRW1haWwgQWxlcnQgY2hhbmdlIGV2ZW50LlxyXG5cdCAqL1xyXG5cdHByaXZhdGUgb25FbWFpbG1lVG9nZ2xlQ2hhbmdlKGV2dDogYW55KTogdm9pZCB7XHJcblx0XHR0aGlzLl9pc0VtYWlsbWVUb2dnbGVPbiA9ICF0aGlzLl9pc0VtYWlsbWVUb2dnbGVPbjtcclxuXHRcdHVzZXJPcHRpb25zSGVscGVyLnNhdmUodXNlck9wdGlvbktleXMuRU1BSUxfTUVfV0hFTl9TQ1JJUFRTX0FSRV9BVkFJTEFCTEVfRk9SX1NUQU5EQVJESVNBVElPTiwgU3RyaW5nKHRoaXMuX2lzRW1haWxtZVRvZ2dsZU9uKSk7XHJcblx0XHR0aGlzLnNldFN0YXRlKHsgaXNFbWFpbG1lVG9nZ2xlT246ICF0aGlzLnN0YXRlLmlzRW1haWxtZVRvZ2dsZU9uIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBIYW5kbGluZyB0aGUgb24gc2NyZWVuIGhpbnQgdG9nZ2xlIGNoYW5nZSBldmVudFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIG9uT25TY3JlZW5IaW50c1RvZ2dsZUNoYW5nZShldnQ6IGFueSk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuX2lzT25TY3JlZW5IaW50c09uID0gIXRoaXMuX2lzT25TY3JlZW5IaW50c09uO1xyXG4gICAgICAgIHVzZXJPcHRpb25zSGVscGVyLnNhdmUodXNlck9wdGlvbktleXMuT05fU0NSRUVOX0hJTlRTLCBTdHJpbmcodGhpcy5faXNPblNjcmVlbkhpbnRzT24pKTtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHsgaXNPblNjcmVlbkhpbnRzT246ICF0aGlzLnN0YXRlLmlzT25TY3JlZW5IaW50c09uIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU3Vic2NyaWJlIHRoZSB1c2VyIG9wdGlvbiBzYXZlIGV2ZW50IHRvIHJlLXJlbmRlciB0aGUgY29tcG9uZW50IG9uIGNoYW5nZSBvZiBhc2sgb24gbG9nb3V0IHZhbHVlLlxyXG4gICAgICovXHJcblx0cHVibGljIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcclxuXHRcdHVzZXJvcHRpb25TdG9yZS5pbnN0YW5jZS5hZGRMaXN0ZW5lcih1c2Vyb3B0aW9uU3RvcmUuVXNlcm9wdGlvblN0b3JlLlVTRVJfT1BUSU9OX1NBVkVfRVZFTlQsIHRoaXMucmVmcmVzaFN0YXRlKTtcclxuXHR9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVbnN1YnNjcmliZSBldmVudHNcclxuICAgICAqL1xyXG5cdHB1YmxpYyBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcclxuXHRcdHVzZXJvcHRpb25TdG9yZS5pbnN0YW5jZS5yZW1vdmVMaXN0ZW5lcih1c2Vyb3B0aW9uU3RvcmUuVXNlcm9wdGlvblN0b3JlLlVTRVJfT1BUSU9OX1NBVkVfRVZFTlQsIHRoaXMucmVmcmVzaFN0YXRlKTtcclxuXHRcdHVzZXJJbmZvU3RvcmUuaW5zdGFuY2UucmVtb3ZlTGlzdGVuZXIodXNlckluZm9TdG9yZS5Vc2VySW5mb1N0b3JlLlVTRVJJTkZPX0VWRU5ULCB0aGlzLmdldFVzZXJJbmZvcm1hdGlvbik7XHJcblx0XHR1c2VySW5mb1N0b3JlLmluc3RhbmNlLnJlbW92ZUxpc3RlbmVyKHVzZXJJbmZvU3RvcmUuVXNlckluZm9TdG9yZS5VU0VSSU5GT19TQVZFLCB0aGlzLnVzZXJJbmZvU2F2ZWQpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQ29tcG9uZW50IGRpZCBtb3VudFxyXG5cdCAqL1xyXG5cdHB1YmxpYyBjb21wb25lbnREaWRNb3VudCgpIHtcclxuXHRcdHVzZXJJbmZvU3RvcmUuaW5zdGFuY2UuYWRkTGlzdGVuZXIodXNlckluZm9TdG9yZS5Vc2VySW5mb1N0b3JlLlVTRVJJTkZPX0VWRU5ULCB0aGlzLmdldFVzZXJJbmZvcm1hdGlvbik7XHJcblx0XHR1c2VySW5mb1N0b3JlLmluc3RhbmNlLmFkZExpc3RlbmVyKHVzZXJJbmZvU3RvcmUuVXNlckluZm9TdG9yZS5VU0VSSU5GT19TQVZFLCB0aGlzLnVzZXJJbmZvU2F2ZWQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVmcmVzaCBzdGF0ZVxyXG4gICAgICovXHJcblx0cHJpdmF0ZSByZWZyZXNoU3RhdGUgPSAoKTogdm9pZCA9PiB7XHJcblx0XHQvKiogcmVzZXR0aW5nIHRoZSBsb2NhbGx5IHN0b3JlZCB1c2VyIG9wdGlvbiBjb2xsZWN0aW9uICovXHJcblx0XHQvLyB1c2VyT3B0aW9uc0hlbHBlci5yZXNldENoYW5nZWRVc2VyT3B0aW9ucygpO1xyXG5cdFx0dGhpcy5zZXRTdGF0ZSh7IGlzQXNrT25Mb2dvdXQ6ICF0aGlzLnN0YXRlLmlzQXNrT25Mb2dvdXQgfSk7XHJcblx0XHR0aGlzLnNldFN0YXRlKHsgaXNBdXRvQWR2YW5jZU9uOiAhdGhpcy5zdGF0ZS5pc0F1dG9BZHZhbmNlT24gfSk7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogR2V0IHRoZSB1c2VyIGluZm9ybWF0aW9uIGZyb20gdXNlcmluZm8gc3RvcmVcclxuXHQgKi9cclxuXHRwcml2YXRlIGdldFVzZXJJbmZvcm1hdGlvbiA9ICgpOiB2b2lkID0+IHtcclxuXHRcdHRoaXMuX2VtYWlsQWRkcmVzcyA9IHVzZXJJbmZvU3RvcmUuaW5zdGFuY2UuRW1haWxBZGRyZXNzO1xyXG5cdFx0dGhpcy5faXNTY3JpcHRBdmFpbGFiaWxpdHlFbWFpbEFsZXJ0ID0gdXNlckluZm9TdG9yZS5pbnN0YW5jZS5Jc1NjcmlwdEF2YWlsYWJpbGl0eUVtYWlsQWxlcnQ7XHJcblx0XHR0aGlzLnNldFN0YXRlKHsgcmVuZGVyZWRPbjogRGF0ZS5ub3coKX0pO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIEdldCB0aGUgZW1haWwgYWRkcmVzcyBmcm9tIHVzZXJpbmZvIHN0b3JlIGFmdGVyIHNhdmUgdGhlIGVtYWlsIGFkZHJlc3MuXHJcblx0ICovXHJcblx0cHJpdmF0ZSB1c2VySW5mb1NhdmVkID0gKCk6IHZvaWQgPT4ge1xyXG5cdFx0dGhpcy5fZW1haWxBZGRyZXNzID0gdXNlckluZm9TdG9yZS5pbnN0YW5jZS5FbWFpbEFkZHJlc3M7XHJcblx0XHR0aGlzLnNldFN0YXRlKHsgcmVuZGVyZWRPbjogRGF0ZS5ub3coKSB9KTtcclxuXHR9O1xyXG59XHJcblxyXG5leHBvcnQgPSBMb2dvdXRDb25maXJtYXRpb25EaWFsb2c7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9zb3VyY2UtbWFwLWxvYWRlciEuL3NyYy9jb21wb25lbnRzL2xvZ291dC9sb2dvdXRjb25maXJtYXRpb25kaWFsb2cudHN4Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFnQkE7O0FBRUE7QUFDQTtBQUFBO0FBVUE7Ozs7QUFJQTtBQUNBO0FBQUE7QUFUQTtBQThQQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUE1UUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBS0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQWdCQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFLQTtBQUVBO0FBQ0E7QUFHQTtBQUlBO0FBSUE7QUFDQTtBQUlBO0FBY0E7QUFDQTtBQUlBO0FBY0E7QUFDQTtBQUNBO0FBSUE7QUFnQkE7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBNEJBO0FBQUE7QUFFQTsiLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),

/***/ 352:
/* no static exports found */
/* all exports used */
/*!******************************************!*\
  !*** ./src/components/menu/menulink.tsx ***!
  \******************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar React = __webpack_require__(/*! react */ 0);\r\nvar localeStore = __webpack_require__(/*! ../../stores/locale/localestore */ 226);\r\nvar historyItemHelper = __webpack_require__(/*! ../../utility/breadcrumb/historyitemhelper */ 378);\r\n/**\r\n * Returns menu link\r\n * @param props\r\n */\r\nvar menuLink = function (props) {\r\n    if (props.isRecentHistory) {\r\n        var teamManagementLink = props.recentItem.team ? (React.createElement(\"a\", { href: 'javascript:void(0)', className: 'small-text', onClick: function () { props.onTeamManagementClick(props.recentItem, null, null, null); }, id: 'menuLink_TeamManagement_' + props.recentItem.qigId }, localeStore.instance.TranslateText('generic.navigation-menu.team-management'))) : props.recentItem.isTeamManagementEnabled ? (React.createElement(\"a\", { href: 'javascript:void(0)', className: 'small-text', onClick: function () {\r\n                props.onTeamManagementClick(null, props.recentItem.qigId, props.recentItem.questionPaperPartId, props.recentItem.examinerRoleId);\r\n            }, id: 'menuLink_TeamManagement_' + props.recentItem.qigId }, localeStore.instance.TranslateText('generic.navigation-menu.team-management'))) : null;\r\n        var myMarkingLink = props.recentItem.myMarking ? (React.createElement(\"a\", { href: 'javascript:void(0)', className: 'small-text', onClick: function () { props.onMyMarkingClick(props.recentItem, null, null); }, id: 'menuLink_' + props.recentItem.qigId }, localeStore.instance.TranslateText('generic.navigation-menu.my-marking'))) : props.recentItem.isMarkingEnabled ? (React.createElement(\"a\", { href: 'javascript:void(0)', className: 'small-text', onClick: function () {\r\n                props.onMyMarkingClick(null, props.recentItem.qigId, props.recentItem.questionPaperPartId);\r\n            }, id: 'menuLink_' + props.recentItem.qigId }, localeStore.instance.TranslateText('generic.navigation-menu.my-marking'))) : null;\r\n        var standardisationSetupLink = props.recentItem.standardisationSetup ? (React.createElement(\"a\", { href: 'javascript:void(0)', className: 'small-text', onClick: function () { props.onStandardisationSetupClick(props.recentItem, null, null); }, id: 'menuLink_StandardisationSetup_' + props.recentItem.qigId }, historyItemHelper.getStandardisationSetupLinkText(props.recentItem.qigId))) : props.recentItem.isStandardisationSetupEnabled ? (React.createElement(\"a\", { href: 'javascript:void(0)', className: 'small-text', onClick: function () {\r\n                props.onStandardisationSetupClick(null, props.recentItem.qigId);\r\n            }, id: 'menuLink_StandardisationSetup_' + props.recentItem.qigId }, historyItemHelper.getStandardisationSetupLinkText(props.recentItem.qigId))) : null;\r\n        return (React.createElement(\"li\", { className: 'menu-items', id: 'menuItem_' + props.recentItem.qigId },\r\n            React.createElement(\"div\", { className: 'recent-links-quig' }, props.menuString),\r\n            React.createElement(\"div\", { className: 'recent-links' },\r\n                myMarkingLink,\r\n                teamManagementLink,\r\n                standardisationSetupLink)));\r\n    }\r\n    else if (props.isVisible) {\r\n        return (React.createElement(\"li\", { className: 'menu-items' },\r\n            React.createElement(\"a\", { id: props.id, key: props.id, href: 'javascript:void(0)', onClick: function () { props.onMenuLinkClick(); } }, props.menuLinkName)));\r\n    }\r\n    else {\r\n        return null;\r\n    }\r\n};\r\nmodule.exports = menuLink;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzUyLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvbWVudS9tZW51bGluay50c3g/YWM4NiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuaW1wb3J0IGxvY2FsZVN0b3JlID0gcmVxdWlyZSgnLi4vLi4vc3RvcmVzL2xvY2FsZS9sb2NhbGVzdG9yZScpO1xuaW1wb3J0IGhpc3RvcnlJdGVtID0gcmVxdWlyZSgnLi4vLi4vdXRpbGl0eS9icmVhZGNydW1iL2hpc3RvcnlJdGVtJyk7XG5pbXBvcnQgaGlzdG9yeUl0ZW1IZWxwZXIgPSByZXF1aXJlKCcuLi8uLi91dGlsaXR5L2JyZWFkY3J1bWIvaGlzdG9yeWl0ZW1oZWxwZXInKTtcbmltcG9ydCBtYXJrZXJPcGVyYXRpb25Nb2RlRmFjdG9yeSA9IHJlcXVpcmUoJy4uL3V0aWxpdHkvbWFya2Vyb3BlcmF0aW9ubW9kZS9tYXJrZXJvcGVyYXRpb25tb2RlZmFjdG9yeScpO1xuXG5pbnRlcmZhY2UgTWVudUxpbmtQcm9wcyBleHRlbmRzIExvY2FsZVNlbGVjdGlvbkJhc2UsIFByb3BzQmFzZSB7XG4gICAgaXNWaXNpYmxlPzogYm9vbGVhbjtcbiAgICBvbk1lbnVMaW5rQ2xpY2s/OiBGdW5jdGlvbjtcbiAgICBvbk15TWFya2luZ0NsaWNrPzogRnVuY3Rpb247XG4gICAgb25UZWFtTWFuYWdlbWVudENsaWNrPzogRnVuY3Rpb247XG4gICAgb25TdGFuZGFyZGlzYXRpb25TZXR1cENsaWNrPzogRnVuY3Rpb247XG4gICAgbWVudVN0cmluZz86IHN0cmluZztcbiAgICBtZW51TGlua05hbWU/OiBzdHJpbmc7XG4gICAgaXNSZWNlbnRIaXN0b3J5PzogYm9vbGVhbjtcbiAgICByZWNlbnRJdGVtPzogaGlzdG9yeUl0ZW07XG59XG5cbi8qKlxuICogUmV0dXJucyBtZW51IGxpbmtcbiAqIEBwYXJhbSBwcm9wc1xuICovXG5jb25zdCBtZW51TGluazogUmVhY3QuU3RhdGVsZXNzQ29tcG9uZW50PE1lbnVMaW5rUHJvcHM+ID0gKHByb3BzOiBNZW51TGlua1Byb3BzKSA9PiB7XG4gICAgaWYgKHByb3BzLmlzUmVjZW50SGlzdG9yeSkge1xuICAgICAgICBsZXQgdGVhbU1hbmFnZW1lbnRMaW5rID0gcHJvcHMucmVjZW50SXRlbS50ZWFtID8gKDxhIGhyZWY9J2phdmFzY3JpcHQ6dm9pZCgwKSdcbiAgICAgICAgICAgIGNsYXNzTmFtZT0nc21hbGwtdGV4dCdcbiAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHsgcHJvcHMub25UZWFtTWFuYWdlbWVudENsaWNrKHByb3BzLnJlY2VudEl0ZW0sIG51bGwsIG51bGwsIG51bGwpOyB9fVxuICAgICAgICAgICAgaWQ9eydtZW51TGlua19UZWFtTWFuYWdlbWVudF8nICsgcHJvcHMucmVjZW50SXRlbS5xaWdJZH0+XG4gICAgICAgICAgICB7bG9jYWxlU3RvcmUuaW5zdGFuY2UuVHJhbnNsYXRlVGV4dCgnZ2VuZXJpYy5uYXZpZ2F0aW9uLW1lbnUudGVhbS1tYW5hZ2VtZW50Jyl9XG4gICAgICAgIDwvYT4pIDogcHJvcHMucmVjZW50SXRlbS5pc1RlYW1NYW5hZ2VtZW50RW5hYmxlZCA/ICg8YSBocmVmPSdqYXZhc2NyaXB0OnZvaWQoMCknXG4gICAgICAgICAgICBjbGFzc05hbWU9J3NtYWxsLXRleHQnXG4gICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgcHJvcHMub25UZWFtTWFuYWdlbWVudENsaWNrKFxuICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICBwcm9wcy5yZWNlbnRJdGVtLnFpZ0lkLFxuICAgICAgICAgICAgICAgICAgICBwcm9wcy5yZWNlbnRJdGVtLnF1ZXN0aW9uUGFwZXJQYXJ0SWQsXG4gICAgICAgICAgICAgICAgICAgIHByb3BzLnJlY2VudEl0ZW0uZXhhbWluZXJSb2xlSWQpO1xuICAgICAgICAgICAgfX1cbiAgICAgICAgICAgIGlkPXsnbWVudUxpbmtfVGVhbU1hbmFnZW1lbnRfJyArIHByb3BzLnJlY2VudEl0ZW0ucWlnSWR9PlxuICAgICAgICAgICAge2xvY2FsZVN0b3JlLmluc3RhbmNlLlRyYW5zbGF0ZVRleHQoJ2dlbmVyaWMubmF2aWdhdGlvbi1tZW51LnRlYW0tbWFuYWdlbWVudCcpfVxuICAgICAgICA8L2E+KSA6IG51bGw7XG4gICAgICAgIGxldCBteU1hcmtpbmdMaW5rID0gcHJvcHMucmVjZW50SXRlbS5teU1hcmtpbmcgPyAoPGEgaHJlZj0namF2YXNjcmlwdDp2b2lkKDApJ1xuICAgICAgICAgICAgY2xhc3NOYW1lPSdzbWFsbC10ZXh0J1xuICAgICAgICAgICAgb25DbGljaz17KCkgPT4geyBwcm9wcy5vbk15TWFya2luZ0NsaWNrKHByb3BzLnJlY2VudEl0ZW0sIG51bGwsIG51bGwpOyB9fVxuICAgICAgICAgICAgaWQ9eydtZW51TGlua18nICsgcHJvcHMucmVjZW50SXRlbS5xaWdJZH0+XG4gICAgICAgICAgICB7bG9jYWxlU3RvcmUuaW5zdGFuY2UuVHJhbnNsYXRlVGV4dCgnZ2VuZXJpYy5uYXZpZ2F0aW9uLW1lbnUubXktbWFya2luZycpfVxuICAgICAgICA8L2E+KSA6IHByb3BzLnJlY2VudEl0ZW0uaXNNYXJraW5nRW5hYmxlZCA/ICg8YSBocmVmPSdqYXZhc2NyaXB0OnZvaWQoMCknXG4gICAgICAgICAgICBjbGFzc05hbWU9J3NtYWxsLXRleHQnXG4gICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgcHJvcHMub25NeU1hcmtpbmdDbGljayhcbiAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgcHJvcHMucmVjZW50SXRlbS5xaWdJZCxcbiAgICAgICAgICAgICAgICAgICAgcHJvcHMucmVjZW50SXRlbS5xdWVzdGlvblBhcGVyUGFydElkKTtcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgICBpZD17J21lbnVMaW5rXycgKyBwcm9wcy5yZWNlbnRJdGVtLnFpZ0lkfT5cbiAgICAgICAgICAgIHtsb2NhbGVTdG9yZS5pbnN0YW5jZS5UcmFuc2xhdGVUZXh0KCdnZW5lcmljLm5hdmlnYXRpb24tbWVudS5teS1tYXJraW5nJyl9XG4gICAgICAgIDwvYT4pIDogbnVsbDtcbiAgICAgICAgbGV0IHN0YW5kYXJkaXNhdGlvblNldHVwTGluayA9IHByb3BzLnJlY2VudEl0ZW0uc3RhbmRhcmRpc2F0aW9uU2V0dXAgPyAoPGEgaHJlZj0namF2YXNjcmlwdDp2b2lkKDApJ1xuICAgICAgICAgICAgY2xhc3NOYW1lPSdzbWFsbC10ZXh0J1xuICAgICAgICAgICAgb25DbGljaz17KCkgPT4geyBwcm9wcy5vblN0YW5kYXJkaXNhdGlvblNldHVwQ2xpY2socHJvcHMucmVjZW50SXRlbSwgbnVsbCwgbnVsbCk7IH19XG4gICAgICAgICAgICBpZD17J21lbnVMaW5rX1N0YW5kYXJkaXNhdGlvblNldHVwXycgKyBwcm9wcy5yZWNlbnRJdGVtLnFpZ0lkfT5cbiAgICAgICAgICAgIHtoaXN0b3J5SXRlbUhlbHBlci5nZXRTdGFuZGFyZGlzYXRpb25TZXR1cExpbmtUZXh0KHByb3BzLnJlY2VudEl0ZW0ucWlnSWQpfVxuICAgICAgICA8L2E+KSA6IHByb3BzLnJlY2VudEl0ZW0uaXNTdGFuZGFyZGlzYXRpb25TZXR1cEVuYWJsZWQgPyAoPGEgaHJlZj0namF2YXNjcmlwdDp2b2lkKDApJ1xuICAgICAgICAgICAgY2xhc3NOYW1lPSdzbWFsbC10ZXh0J1xuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcHJvcHMub25TdGFuZGFyZGlzYXRpb25TZXR1cENsaWNrKFxuICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3BzLnJlY2VudEl0ZW0ucWlnSWQpO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICBpZD17J21lbnVMaW5rX1N0YW5kYXJkaXNhdGlvblNldHVwXycgKyBwcm9wcy5yZWNlbnRJdGVtLnFpZ0lkfT5cbiAgICAgICAgICAgIHtoaXN0b3J5SXRlbUhlbHBlci5nZXRTdGFuZGFyZGlzYXRpb25TZXR1cExpbmtUZXh0KHByb3BzLnJlY2VudEl0ZW0ucWlnSWQpfVxuICAgICAgICA8L2E+KSA6IG51bGw7XG4gICAgICAgIHJldHVybiAoPGxpIGNsYXNzTmFtZT0nbWVudS1pdGVtcycgaWQ9eydtZW51SXRlbV8nICsgcHJvcHMucmVjZW50SXRlbS5xaWdJZH0+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncmVjZW50LWxpbmtzLXF1aWcnPntwcm9wcy5tZW51U3RyaW5nfTwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3JlY2VudC1saW5rcyc+XG4gICAgICAgICAgICAgICAge215TWFya2luZ0xpbmt9XG4gICAgICAgICAgICAgICAge3RlYW1NYW5hZ2VtZW50TGlua31cbiAgICAgICAgICAgICAgICB7c3RhbmRhcmRpc2F0aW9uU2V0dXBMaW5rfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvbGk+KTtcbiAgICB9IGVsc2UgaWYgKHByb3BzLmlzVmlzaWJsZSkge1xuICAgICAgICByZXR1cm4gKDxsaSBjbGFzc05hbWU9J21lbnUtaXRlbXMnPlxuICAgICAgICAgICAgPGEgaWQ9e3Byb3BzLmlkfSBrZXk9e3Byb3BzLmlkfSBocmVmPSdqYXZhc2NyaXB0OnZvaWQoMCknIG9uQ2xpY2s9eygpID0+IHsgcHJvcHMub25NZW51TGlua0NsaWNrKCk7IH19Pntwcm9wcy5tZW51TGlua05hbWV9PC9hPlxuICAgICAgICA8L2xpPik7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufTtcblxuZXhwb3J0ID0gbWVudUxpbms7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9zb3VyY2UtbWFwLWxvYWRlciEuL3NyYy9jb21wb25lbnRzL21lbnUvbWVudWxpbmsudHN4Il0sIm1hcHBpbmdzIjoiO0FBQUE7QUFDQTtBQUVBO0FBZUE7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBUUE7QUFLQTtBQUlBO0FBUUE7QUFJQTtBQUlBO0FBUUE7QUFHQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOyIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),

/***/ 353:
/* no static exports found */
/* all exports used */
/*!*************************************************!*\
  !*** ./src/components/menu/menusearchpanel.tsx ***!
  \*************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar React = __webpack_require__(/*! react */ 0);\r\nvar classNames = __webpack_require__(/*! classnames */ 39);\r\nvar localeStore = __webpack_require__(/*! ../../stores/locale/localestore */ 226);\r\nvar searchPanel = function (props) {\r\n    return (React.createElement(\"div\", { className: 'menu-page-block menu-page-search', id: 'menu-search-area' },\r\n        React.createElement(\"h2\", { id: 'menu-search-area-header' }, localeStore.instance.\r\n            TranslateText('search-response.search-header')),\r\n        React.createElement(\"ul\", { className: 'menu-holder recent-items' },\r\n            React.createElement(\"li\", { className: 'menu-items' },\r\n                React.createElement(\"div\", { className: 'recent-links-quig', id: 'menu-search-area-qigname', title: props.qigName }, props.qigName)),\r\n            React.createElement(\"li\", { className: 'search-box-wrap lite' },\r\n                React.createElement(\"div\", { className: 'search-box-panel' },\r\n                    React.createElement(\"div\", { className: 'relative' },\r\n                        React.createElement(\"span\", { id: 'search-icon', className: 'search-link' },\r\n                            React.createElement(\"span\", { className: 'sprite-icon search-icon-small-grey' }, \"Search for a response by ID\")),\r\n                        React.createElement(\"input\", { type: 'text', id: 'menu-search-response', className: 'text-underline msg-search-input', onChange: onSearch, required: true, placeholder: localeStore.instance.\r\n                                TranslateText('search-response.search-placeholder'), title: localeStore.instance.\r\n                                TranslateText('search-response.search-tooltip'), disabled: false, \"aria-label\": localeStore.instance.\r\n                                TranslateText('search-response.search-tooltip'), autoComplete: 'off', value: props.searchText }),\r\n                        React.createElement(\"a\", { id: 'menu-search-close-link', href: 'javascript:void(0);', onClick: onSearchClear, className: 'close-link', title: localeStore.instance.\r\n                                TranslateText('search-response.search-close-button-text') },\r\n                            React.createElement(\"span\", { className: 'sprite-icon search-close' }, \"Closed\")),\r\n                        React.createElement(\"span\", { className: 'bar' })))),\r\n            React.createElement(\"li\", null,\r\n                React.createElement(\"button\", { className: 'primary rounded logout-btn', id: 'menu-search-btn', onClick: onSearchClick, title: localeStore.instance.\r\n                        TranslateText('search-response.search-button-text') }, localeStore.instance.\r\n                    TranslateText('search-response.search-button-text'))))));\r\n    /**\r\n     * Will call on search text change.\r\n     * @param e event\r\n     */\r\n    function onSearch(e) {\r\n        props.onSearch(e.target.value);\r\n    }\r\n    /**\r\n     * This method will clear the search contents.\r\n     */\r\n    function onSearchClear() {\r\n        props.onSearch('');\r\n    }\r\n    /**\r\n     * This method will clear the search contents.\r\n     */\r\n    function onSearchClick() {\r\n        props.onSearchClick();\r\n    }\r\n};\r\nmodule.exports = searchPanel;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzUzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvbWVudS9tZW51c2VhcmNocGFuZWwudHN4P2QwZTIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcclxubGV0IGNsYXNzTmFtZXMgPSByZXF1aXJlKCdjbGFzc25hbWVzJyk7XHJcbmltcG9ydCBsb2NhbGVTdG9yZSA9IHJlcXVpcmUoJy4uLy4uL3N0b3Jlcy9sb2NhbGUvbG9jYWxlc3RvcmUnKTtcclxuXHJcbmludGVyZmFjZSBQcm9wcyBleHRlbmRzIExvY2FsZVNlbGVjdGlvbkJhc2UsIFByb3BzQmFzZSB7XHJcbiAgICBvblNlYXJjaDogRnVuY3Rpb247XHJcbiAgICBvblNlYXJjaENsaWNrOiBGdW5jdGlvbjtcclxuICAgIHFpZ05hbWU6IHN0cmluZztcclxuICAgIHNlYXJjaFRleHQ6IHN0cmluZztcclxufVxyXG5cclxuY29uc3Qgc2VhcmNoUGFuZWwgPSAocHJvcHM6IFByb3BzKSA9PiB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdtZW51LXBhZ2UtYmxvY2sgbWVudS1wYWdlLXNlYXJjaCcgaWQ9J21lbnUtc2VhcmNoLWFyZWEnPlxyXG4gICAgICAgICAgICA8aDIgaWQ9J21lbnUtc2VhcmNoLWFyZWEtaGVhZGVyJz57bG9jYWxlU3RvcmUuaW5zdGFuY2UuXHJcbiAgICAgICAgICAgICAgICBUcmFuc2xhdGVUZXh0KCdzZWFyY2gtcmVzcG9uc2Uuc2VhcmNoLWhlYWRlcicpfTwvaDI+XHJcbiAgICAgICAgICAgIDx1bCBjbGFzc05hbWU9J21lbnUtaG9sZGVyIHJlY2VudC1pdGVtcyc+XHJcbiAgICAgICAgICAgICAgICA8bGkgY2xhc3NOYW1lPSdtZW51LWl0ZW1zJz5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncmVjZW50LWxpbmtzLXF1aWcnIGlkPSdtZW51LXNlYXJjaC1hcmVhLXFpZ25hbWUnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtwcm9wcy5xaWdOYW1lfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAge3Byb3BzLnFpZ05hbWV9PC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2xpPlxyXG4gICAgICAgICAgICAgICAgPGxpIGNsYXNzTmFtZT0nc2VhcmNoLWJveC13cmFwIGxpdGUnPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdzZWFyY2gtYm94LXBhbmVsJz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3JlbGF0aXZlJz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPSdzZWFyY2gtaWNvbicgY2xhc3NOYW1lPSdzZWFyY2gtbGluayc+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSdzcHJpdGUtaWNvbiBzZWFyY2gtaWNvbi1zbWFsbC1ncmV5Jz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2VhcmNoIGZvciBhIHJlc3BvbnNlIGJ5IElEXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT0ndGV4dCdcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0nbWVudS1zZWFyY2gtcmVzcG9uc2UnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSd0ZXh0LXVuZGVybGluZSBtc2ctc2VhcmNoLWlucHV0J1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtvblNlYXJjaH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtsb2NhbGVTdG9yZS5pbnN0YW5jZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHJhbnNsYXRlVGV4dCgnc2VhcmNoLXJlc3BvbnNlLnNlYXJjaC1wbGFjZWhvbGRlcicpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtsb2NhbGVTdG9yZS5pbnN0YW5jZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHJhbnNsYXRlVGV4dCgnc2VhcmNoLXJlc3BvbnNlLnNlYXJjaC10b29sdGlwJyl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2ZhbHNlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9e2xvY2FsZVN0b3JlLmluc3RhbmNlLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUcmFuc2xhdGVUZXh0KCdzZWFyY2gtcmVzcG9uc2Uuc2VhcmNoLXRvb2x0aXAnKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRvQ29tcGxldGU9J29mZidcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17cHJvcHMuc2VhcmNoVGV4dH0gLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J21lbnUtc2VhcmNoLWNsb3NlLWxpbmsnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHJlZj0namF2YXNjcmlwdDp2b2lkKDApOydcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXtvblNlYXJjaENsZWFyfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nY2xvc2UtbGluaydcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17bG9jYWxlU3RvcmUuaW5zdGFuY2UuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRyYW5zbGF0ZVRleHQoJ3NlYXJjaC1yZXNwb25zZS5zZWFyY2gtY2xvc2UtYnV0dG9uLXRleHQnKX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSdzcHJpdGUtaWNvbiBzZWFyY2gtY2xvc2UnPkNsb3NlZDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0nYmFyJz48L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9saT5cclxuICAgICAgICAgICAgICAgIDxsaT5cclxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT0ncHJpbWFyeSByb3VuZGVkIGxvZ291dC1idG4nIGlkPSdtZW51LXNlYXJjaC1idG4nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e29uU2VhcmNoQ2xpY2t9IHRpdGxlPXtsb2NhbGVTdG9yZS5pbnN0YW5jZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgVHJhbnNsYXRlVGV4dCgnc2VhcmNoLXJlc3BvbnNlLnNlYXJjaC1idXR0b24tdGV4dCcpfT57bG9jYWxlU3RvcmUuaW5zdGFuY2UuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUcmFuc2xhdGVUZXh0KCdzZWFyY2gtcmVzcG9uc2Uuc2VhcmNoLWJ1dHRvbi10ZXh0Jyl9PC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICA8L2xpPlxyXG4gICAgICAgICAgICA8L3VsPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFdpbGwgY2FsbCBvbiBzZWFyY2ggdGV4dCBjaGFuZ2UuXHJcbiAgICAgKiBAcGFyYW0gZSBldmVudFxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBvblNlYXJjaChlOiBhbnkpIHtcclxuICAgICAgICBwcm9wcy5vblNlYXJjaChlLnRhcmdldC52YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIG1ldGhvZCB3aWxsIGNsZWFyIHRoZSBzZWFyY2ggY29udGVudHMuXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIG9uU2VhcmNoQ2xlYXIoKSB7XHJcbiAgICAgICAgcHJvcHMub25TZWFyY2goJycpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhpcyBtZXRob2Qgd2lsbCBjbGVhciB0aGUgc2VhcmNoIGNvbnRlbnRzLlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBvblNlYXJjaENsaWNrKCkge1xyXG4gICAgICAgIHByb3BzLm9uU2VhcmNoQ2xpY2soKTtcclxuICAgIH1cclxufTtcclxuXHJcbmV4cG9ydCA9IHNlYXJjaFBhbmVsO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vc291cmNlLW1hcC1sb2FkZXIhLi9zcmMvY29tcG9uZW50cy9tZW51L21lbnVzZWFyY2hwYW5lbC50c3giXSwibWFwcGluZ3MiOiI7QUFBQTtBQUNBO0FBQ0E7QUFTQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQU9BO0FBRUE7QUFHQTtBQUdBO0FBTUE7QUFDQTtBQUVBO0FBSUE7QUFDQTtBQUVBO0FBQ0E7QUFNQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTsiLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),

/***/ 354:
/* no static exports found */
/* all exports used */
/*!*********************************************!*\
  !*** ./src/components/menu/menuwrapper.tsx ***!
  \*********************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar React = __webpack_require__(/*! react */ 0);\r\nvar Promise = __webpack_require__(/*! es6-promise */ 41);\r\nvar classNames = __webpack_require__(/*! classnames */ 39);\r\nvar Immutable = __webpack_require__(/*! immutable */ 40);\r\nvar pureRenderComponent = __webpack_require__(/*! ../base/purerendercomponent */ 227);\r\nvar navigationStore = __webpack_require__(/*! ../../stores/navigation/navigationstore */ 275);\r\nvar enums = __webpack_require__(/*! ../utility/enums */ 225);\r\nvar MenuLink = __webpack_require__(/*! ./menulink */ 352);\r\nvar navigationHelper = __webpack_require__(/*! ../utility/navigation/navigationhelper */ 248);\r\nvar awardingStore = __webpack_require__(/*! ../../stores/awarding/awardingstore */ 270);\r\nvar localeStore = __webpack_require__(/*! ../../stores/locale/localestore */ 226);\r\nvar userInfoActionCreator = __webpack_require__(/*! ../../actions/userinfo/userinfoactioncreator */ 255);\r\nvar responseStore = __webpack_require__(/*! ../../stores/response/responsestore */ 235);\r\nvar markingActionCreator = __webpack_require__(/*! ../../actions/marking/markingactioncreator */ 246);\r\nvar qigSelectorActionCreator = __webpack_require__(/*! ../../actions/qigselector/qigselectoractioncreator */ 253);\r\nvar worklistActionCreator = __webpack_require__(/*! ../../actions/worklist/worklistactioncreator */ 261);\r\nvar ccActionCreator = __webpack_require__(/*! ../../actions/configurablecharacteristics/configurablecharacteristicsactioncreator */ 310);\r\nvar qigStore = __webpack_require__(/*! ../../stores/qigselector/qigstore */ 230);\r\nvar stringFormatHelper = __webpack_require__(/*! ../../utility/stringformat/stringformathelper */ 250);\r\nvar stampStore = __webpack_require__(/*! ../../stores/stamp/stampstore */ 260);\r\nvar stampActionCreator = __webpack_require__(/*! ../../actions/stamp/stampactioncreator */ 284);\r\nvar examinerStore = __webpack_require__(/*! ../../stores/markerinformation/examinerstore */ 259);\r\nvar dataServiceHelper = __webpack_require__(/*! ../../utility/generic/dataservicehelper */ 433);\r\nvar responseSearchHelper = __webpack_require__(/*! ../../utility/responsesearch/responsesearchhelper */ 321);\r\nvar worklistStore = __webpack_require__(/*! ../../stores/worklist/workliststore */ 231);\r\nvar markerOperationModeFactory = __webpack_require__(/*! ../utility/markeroperationmode/markeroperationmodefactory */ 232);\r\nvar loginStore = __webpack_require__(/*! ../../stores/login/loginstore */ 286);\r\nvar loginSession = __webpack_require__(/*! ../../app/loginsession */ 252);\r\nvar teamManagementActionCreator = __webpack_require__(/*! ../../actions/teammanagement/teammanagementactioncreator */ 263);\r\nvar teamManagementStore = __webpack_require__(/*! ../../stores/teammanagement/teammanagementstore */ 245);\r\nvar markingCheckActionCreator = __webpack_require__(/*! ../../actions/markingcheck/markingcheckactioncreator */ 311);\r\nvar qigActionCreator = __webpack_require__(/*! ../../actions/qigselector/qigselectoractioncreator */ 253);\r\nvar cchelper = __webpack_require__(/*! ../../utility/configurablecharacteristic/configurablecharacteristicshelper */ 233);\r\nvar ccNames = __webpack_require__(/*! ../../utility/configurablecharacteristic/configurablecharacteristicsnames */ 234);\r\nvar storageAdapterHelper = __webpack_require__(/*! ../../dataservices/storageadapters/storageadapterhelper */ 269);\r\nvar busyIndicatorActionCreator = __webpack_require__(/*! ../../actions/busyindicator/busyindicatoractioncreator */ 279);\r\nvar userInfoStore = __webpack_require__(/*! ../../stores/userinfo/userinfostore */ 244);\r\nvar keyDownHelper = __webpack_require__(/*! ../../utility/generic/keydownhelper */ 258);\r\nvar markerInformationActionCreator = __webpack_require__(/*! ../../actions/markerinformation/markerinformationactioncreator */ 381);\r\nvar applicationStore = __webpack_require__(/*! ../../stores/applicationoffline/applicationstore */ 247);\r\nvar applicationActionCreator = __webpack_require__(/*! ../../actions/applicationoffline/applicationactioncreator */ 256);\r\nvar navigationLoggingHelper = __webpack_require__(/*! ../utility/navigation/examinernavigationaudithelper */ 339);\r\nvar loggerConstants = __webpack_require__(/*! ../utility/loggerhelperconstants */ 322);\r\nvar responseHelper = __webpack_require__(/*! ../utility/responsehelper/responsehelper */ 249);\r\nvar auditLoggingHelper = __webpack_require__(/*! ../utility/auditlogger/auditlogginghelper */ 298);\r\nvar MenuSearchPanel = __webpack_require__(/*! ./menusearchpanel */ 353);\r\nvar searchResponseActionCreator = __webpack_require__(/*! ../../actions/searchresponse/searchresponseactioncreator */ 343);\r\nvar markSchemeHelper = __webpack_require__(/*! ../../utility/markscheme/markschemehelper */ 276);\r\nvar eCourseworkHelper = __webpack_require__(/*! ../utility/ecoursework/ecourseworkhelper */ 238);\r\nvar BusyIndicator = __webpack_require__(/*! ../utility/busyindicator/busyindicator */ 312);\r\nvar standardisationActionCreator = __webpack_require__(/*! ../../actions/standardisationsetup/standardisationactioncreator */ 251);\r\n/**\r\n * React component class for Showing menu Page\r\n */\r\nvar MenuWrapper = /** @class */ (function (_super) {\r\n    __extends(MenuWrapper, _super);\r\n    /**\r\n     * constructor\r\n     * @param props\r\n     * @param state\r\n     */\r\n    function MenuWrapper(props, state) {\r\n        var _this = _super.call(this, props, state) || this;\r\n        _this._qigid = 0;\r\n        _this._questionPaperPartId = 0;\r\n        _this._examinerRoleId = 0;\r\n        _this._failureCode = enums.FailureCode.None;\r\n        _this.storageAdapterHelper = new storageAdapterHelper();\r\n        _this.logger = new navigationLoggingHelper();\r\n        _this.searchText = '';\r\n        _this.busyIndicatorInvoker = enums.BusyIndicatorInvoker.none;\r\n        _this.showBackgroundScreenOnBusy = false;\r\n        // enum to identify history navigation area\r\n        _this.historyNavigationArea = enums.HistoryNavigationArea.None;\r\n        /**\r\n         * used to set the visibility of menu Wrapper\r\n         */\r\n        _this.menuVisibility = function (doVisible) {\r\n            if (doVisible === void 0) { doVisible = true; }\r\n            var message = doVisible ? 'Open menu event triggered' : 'Close menu event triggered.';\r\n            message = message + ' Current container => ' +\r\n                enums.PageContainers[navigationStore.instance.containerPage];\r\n            // logging menu action in google analytics or application insight based on the configuration\r\n            new auditLoggingHelper().logHelper.logEventOnMenuAction(message);\r\n            if (markerOperationModeFactory.operationMode.isSetMarkingInProgressAndMarkEntrySelectedRequired && doVisible) {\r\n                keyDownHelper.instance.DeActivate(enums.MarkEntryDeactivator.Menu);\r\n            }\r\n            _this.setState({\r\n                isOpen: doVisible\r\n            });\r\n            // Log opened response details to keep as audit.\r\n            _this.logger.logResponseOpenAudit(loggerConstants.NAVIGATION_REASON_MENU_SCREEN, loggerConstants.NAVIGATION_REASON_MENU_CLICK, responseStore && responseStore.instance.selectedDisplayId ? responseStore.instance.selectedDisplayId.toString() : '', responseStore && responseStore.instance.selectedResponseMode !== undefined ?\r\n                enums.ResponseMode[responseStore.instance.selectedResponseMode].toString() : '');\r\n        };\r\n        /**\r\n         * used to close menu Wrapper\r\n         */\r\n        _this.closeMenu = function () {\r\n            if (markerOperationModeFactory.operationMode.isSetMarkingInProgressAndMarkEntrySelectedRequired) {\r\n                markingActionCreator.setMarkEntrySelected(false);\r\n                keyDownHelper.instance.Activate(enums.MarkEntryDeactivator.Menu);\r\n            }\r\n            var message = 'Close menu event triggered.';\r\n            message = message + ' Current container => ' +\r\n                enums.PageContainers[navigationStore.instance.containerPage];\r\n            // logging menu action in google analytics or application insight based on the configuration\r\n            new auditLoggingHelper().logHelper.logEventOnMenuAction(message);\r\n            // Cleared the search text while clicking close button.\r\n            _this.searchText = '';\r\n            _this.setState({\r\n                isOpen: false\r\n            });\r\n            // Log opened response details to keep as audit.\r\n            _this.logger.logResponseOpenAudit(loggerConstants.NAVIGATION_REASON_MENU_SCREEN, loggerConstants.NAVIGATION_REASON_MENU_CLOSE_CLICK, responseStore && responseStore.instance.selectedDisplayId ? responseStore.instance.selectedDisplayId.toString() : '', responseStore && responseStore.instance.selectedResponseMode !== undefined ?\r\n                enums.ResponseMode[responseStore.instance.selectedResponseMode].toString() : '');\r\n        };\r\n        /* Called when search text changed */\r\n        _this.onSearch = function (searchText) {\r\n            _this.searchText = searchText;\r\n            _this.setState({ renderedOn: Date.now() });\r\n        };\r\n        /* Called when search button clicked */\r\n        _this.onSearchClick = function () {\r\n            if (_this.searchText && _this.searchText !== '' && _this.isValidSearchText(_this.searchText)) {\r\n                if (qigStore.instance.selectedQIGForMarkerOperation) {\r\n                    var selectedQIGForMarkerOperation = qigStore.instance.selectedQIGForMarkerOperation;\r\n                    searchResponseActionCreator.getSearchedResponse(selectedQIGForMarkerOperation.markSchemeGroupId, qigStore.instance.getSelectedQIGForTheLoggedInUser.examinerRoleId, _this.searchText);\r\n                    _this.setBusyIndicatorProperties(enums.BusyIndicatorInvoker.loadingResponse, false);\r\n                    // The below condition will be removed as part of search rig from response screen\r\n                    // feature implementation.\r\n                    if (navigationStore.instance.containerPage !== enums.PageContainers.Response) {\r\n                        _this.setState({ isBusy: true });\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                searchResponseActionCreator.showOrHideRigNotFoundPopup(true);\r\n            }\r\n        };\r\n        /**\r\n         * Load worklist\r\n         */\r\n        _this.loadRecentWorklist = function (_historyItem, _markingMode) {\r\n            if (_markingMode === enums.MarkerOperationMode.Marking) {\r\n                navigationHelper.loadWorklist(true);\r\n                var message = 'Loading worklist from menu with Close menu event triggered.';\r\n                message = message + ' Current container => ' +\r\n                    enums.PageContainers[navigationStore.instance.containerPage];\r\n                // logging menu action in google analytics or application insights based on the configuration\r\n                new auditLoggingHelper().logHelper.logEventOnMenuAction(message);\r\n                _this.setState({\r\n                    isOpen: false\r\n                });\r\n            }\r\n        };\r\n        /**\r\n         * after examiner validation do operation based on history details\r\n         */\r\n        _this.examinerValidated = function (failureCode) {\r\n            if (failureCode === void 0) { failureCode = enums.FailureCode.None; }\r\n            _this._failureCode = failureCode;\r\n            busyIndicatorActionCreator.setBusyIndicatorInvoker(enums.BusyIndicatorInvoker.loadingHistoryDetails);\r\n            // for these two error codes there is no need to fetch other data's we can\r\n            // directly navigating to qig selector by clearing latest cache data\r\n            if (_this._failureCode === enums.FailureCode.Withdrawn || _this._failureCode === enums.FailureCode.NotTeamLead) {\r\n                _this.storageAdapterHelper.clearCacheByKey('qigselector', 'overviewdata');\r\n                navigationHelper.loadQigSelector();\r\n                if (_this._historyItem) {\r\n                    _this._qigid = _this._historyItem.qigId;\r\n                }\r\n                teamManagementActionCreator.removeHistoryItem(_this._qigid, _this._failureCode === enums.FailureCode.NotTeamLead);\r\n                var message = 'Loading Qigselector from menu as the examiner is Withdrawn/NotTeamLead.Close menu event triggered.';\r\n                message = message + ' Current container => ' +\r\n                    enums.PageContainers[navigationStore.instance.containerPage];\r\n                // logging menu action in google analytics or application insights based on the configuration\r\n                new auditLoggingHelper().logHelper.logEventOnMenuAction(message);\r\n                _this.setState({ isOpen: false });\r\n            }\r\n            else {\r\n                // response is getting closed, inform modules.\r\n                worklistActionCreator.responseClosed(true);\r\n                var changeOperationModePromise = void 0;\r\n                if (userInfoStore.instance.currentOperationMode !== enums.MarkerOperationMode.TeamManagement) {\r\n                    changeOperationModePromise = userInfoActionCreator.changeOperationMode(enums.MarkerOperationMode.TeamManagement, false, true);\r\n                }\r\n                if (!_this._historyItem && _this._qigid) {\r\n                    // while team management is opened for first time through menu history link,the\r\n                    // history item value will be null, so we need to do the exact action\r\n                    // which happens while clicking teamManagement button from qigSelector\r\n                    ccActionCreator.getMarkSchemeGroupCCs(_this._qigid, _this._questionPaperPartId, true, true);\r\n                    // if the user has the remember-qig option then 'qigOverviewData' will be null\r\n                    // in this case while the user navigates to teammanagement using recent history option,\r\n                    // this value will be null,to avoid this we need to update this value.\r\n                    if (qigStore.instance.getOverviewData) {\r\n                        var that_1 = _this;\r\n                        var openQigPromise = qigSelectorActionCreator.openQIG(_this._qigid, false, true);\r\n                        Promise.Promise.all([changeOperationModePromise, openQigPromise]).then(function (item) {\r\n                            teamManagementActionCreator.openTeamManagement(that_1._examinerRoleId, that_1._qigid, false, true);\r\n                        });\r\n                    }\r\n                    else {\r\n                        var that_2 = _this;\r\n                        var getQIGSelectorDataPromise = qigActionCreator.getQIGSelectorData(_this._qigid, false, false, false, true, false);\r\n                        Promise.Promise.all([getQIGSelectorDataPromise]).then(function (item) {\r\n                            teamManagementActionCreator.openTeamManagement(that_2._examinerRoleId, that_2._qigid, false, true);\r\n                        });\r\n                    }\r\n                    var message = 'Loading TeamManagement from menu  with Close menu event triggered.';\r\n                    message = message + ' Current container => ' +\r\n                        enums.PageContainers[navigationStore.instance.containerPage];\r\n                    // logging menu action in google analytics or application insights based on the configuration\r\n                    new auditLoggingHelper().logHelper.logEventOnMenuAction(message);\r\n                    _this.setState({\r\n                        isOpen: false\r\n                    });\r\n                }\r\n                else {\r\n                    var ccActionCreatorPromise = ccActionCreator.getMarkSchemeGroupCCs(_this._historyItem.qigId, _this._historyItem.questionPaperPartId, true, true);\r\n                    var that_3 = _this;\r\n                    Promise.Promise.all([changeOperationModePromise, ccActionCreatorPromise]).then(function (item) {\r\n                        // Invoke the action creator to Open the QIG for the logged in user\r\n                        var getQIGSelectorDataPromise = qigActionCreator.getQIGSelectorData(that_3._historyItem.qigId, true, false, true, false, true);\r\n                    });\r\n                }\r\n            }\r\n        };\r\n        /**\r\n         * updates details to store\r\n         */\r\n        _this.onQigSelectedFromHistory = function () {\r\n            if (_this.historyNavigationArea === enums.HistoryNavigationArea.StandardisationSetup) {\r\n                // if navigating from history item(ie, marker has navigated to ssu) then set history info in store\r\n                if (_this._historyItem && _this._historyItem.standardisationSetup) {\r\n                    standardisationActionCreator.setStandardisationSetupHistoryInfo(_this._historyItem);\r\n                }\r\n                // Get Standardisation Setup Qig Details\r\n                responseSearchHelper.getStandardisationSetupQigDetails();\r\n                // Navigate to Standardisation setup\r\n                navigationHelper.loadStandardisationSetup();\r\n            }\r\n            else {\r\n                if (!_this._historyItem || _this._failureCode === undefined) {\r\n                    return;\r\n                }\r\n                busyIndicatorActionCreator.setBusyIndicatorInvoker(enums.BusyIndicatorInvoker.loadingHistoryDetails);\r\n                // avoid getting worklist data's for these error codes\r\n                switch (_this._failureCode) {\r\n                    case enums.FailureCode.SubordinateExaminerWithdrawn:\r\n                    case enums.FailureCode.HierarchyChanged:\r\n                        teamManagementActionCreator.setTeamManagementHistoryInfo(_this._historyItem, enums.MarkerOperationMode.TeamManagement, _this._failureCode);\r\n                        var message = 'Loading Qigselector from menu as the examiner is ' +\r\n                            'SubordinateExaminerWithdrawn / HierarchyChanged.Close menu event triggered.';\r\n                        message = message + ' Current container => ' +\r\n                            enums.PageContainers[navigationStore.instance.containerPage];\r\n                        // logging menu action in google analytics or application insights based on the configuration\r\n                        new auditLoggingHelper().logHelper.logEventOnMenuAction(message);\r\n                        _this.setState({\r\n                            isOpen: false\r\n                        });\r\n                        return;\r\n                }\r\n                // update the history details to specific stores\r\n                var teamManagementHistoryPromise = teamManagementActionCreator.setTeamManagementHistoryInfo(_this._historyItem, enums.MarkerOperationMode.TeamManagement);\r\n                var that_4 = _this;\r\n                Promise.Promise.all([teamManagementHistoryPromise]).\r\n                    then(function (item) {\r\n                    if (that_4._historyItem.team.currentContainer !== enums.PageContainers.TeamManagement) {\r\n                        // team Management worklist.\r\n                        if (that_4._historyItem.team.selectedTab === enums.TeamManagement.HelpExaminers && cchelper.getCharacteristicValue(ccNames.SeniorExaminerPool, that_4._historyItem.qigId).toLowerCase() === 'true') {\r\n                            // since it from help examiner, this db call is needed for showing change status button in worklist\r\n                            var getHelpExaminerDataPromise = teamManagementActionCreator.GetHelpExminersData(that_4._historyItem.team.supervisorExaminerRoleID, that_4._historyItem.qigId, false, true);\r\n                        }\r\n                        var getQIGSelectorDataPromise1 = qigActionCreator.getQIGSelectorData(that_4._historyItem.qigId, false, false, false, true, false);\r\n                        Promise.Promise.all([getQIGSelectorDataPromise1]).\r\n                            then(function (item) {\r\n                            that_4.onQigLoadedFromHistory();\r\n                        });\r\n                    }\r\n                    else {\r\n                        var message = 'Loading the same container(Team Management) from menu. Close menu event triggered.';\r\n                        message = message + ' Current container => ' +\r\n                            enums.PageContainers[navigationStore.instance.containerPage];\r\n                        // logging menu action in google analytics or application insights based on the configuration\r\n                        new auditLoggingHelper().logHelper.logEventOnMenuAction(message);\r\n                        // Team Management Container.\r\n                        that_4.setState({ isOpen: false });\r\n                        busyIndicatorActionCreator.setBusyIndicatorInvoker(enums.BusyIndicatorInvoker.none);\r\n                    }\r\n                });\r\n            }\r\n        };\r\n        /**\r\n         * load details needed for worklist and navigate\r\n         */\r\n        _this.onQigLoadedFromHistory = function () {\r\n            busyIndicatorActionCreator.setBusyIndicatorInvoker(enums.BusyIndicatorInvoker.loadingHistoryDetails);\r\n            responseSearchHelper.openQIGDetails(_this._historyItem.questionPaperPartId, _this._historyItem.qigId, _this._historyItem.team.subordinateExaminerRoleID, dataServiceHelper.canUseCache(), examinerStore.instance.examinerApprovalStatus(_this._historyItem.team.subordinateExaminerRoleID), _this._historyItem.markingMethodId, false, _this._historyItem.isElectronicStandardisationTeamMember);\r\n            // load stamps defined for the selected mark scheme groupId\r\n            stampActionCreator.getStampData(_this._historyItem.qigId, stampStore.instance.stampIdsForSelectedQIG, _this._historyItem.markingMethodId, responseHelper.isEbookMarking, true);\r\n            var message = 'Qig selected from history. Close menu event triggered.';\r\n            message = message + ' Current container => ' +\r\n                enums.PageContainers[navigationStore.instance.containerPage];\r\n            // logging menu action in google analytics or application insights based on the configuration\r\n            new auditLoggingHelper().logHelper.logEventOnMenuAction(message);\r\n            navigationHelper.loadWorklist(true);\r\n            _this.setState({\r\n                isOpen: false\r\n            });\r\n        };\r\n        _this.openTeamManagementFromPopup = function () {\r\n            var message = 'Opening team management from history. Close menu event triggered.';\r\n            message = message + ' Current container => ' +\r\n                enums.PageContainers[navigationStore.instance.containerPage];\r\n            // logging menu action in google analytics or application insights based on the configuration\r\n            new auditLoggingHelper().logHelper.logEventOnMenuAction(message);\r\n            _this.setState({\r\n                isOpen: false\r\n            });\r\n        };\r\n        /**\r\n         * Data Received For Opening the response.\r\n         */\r\n        _this.initiateSearchResponse = function (searchedResponseData) {\r\n            if (searchedResponseData) {\r\n                if (userInfoStore.instance.currentOperationMode === enums.MarkerOperationMode.Marking) {\r\n                    if (navigationStore.instance.containerPage === enums.PageContainers.WorkList) {\r\n                        if (!searchedResponseData.isTeamManagement) {\r\n                            _this.openResponseFromWorkList(searchedResponseData);\r\n                        }\r\n                    }\r\n                }\r\n                else if (userInfoStore.instance.currentOperationMode === enums.MarkerOperationMode.TeamManagement) {\r\n                    if (searchedResponseData.isTeamManagement) {\r\n                        if (navigationStore.instance.containerPage === enums.PageContainers.WorkList) {\r\n                            if (qigStore.instance.selectedQIGForMarkerOperation.examinerRoleId !== searchedResponseData.examinerRoleId) {\r\n                                /*\r\n                                   If searched response is not belongs to current marker's worklist type or response mode\r\n                                   then , we have to fetch marker information, worklist type and\r\n                                   candidate meta data to update store values before opening the searched response.\r\n                               */\r\n                                markerInformationActionCreator.GetMarkerInformation(searchedResponseData.examinerRoleId, searchedResponseData.markSchemeGroupId, true, true, searchedResponseData.approvalStatusId);\r\n                                _this.notifyWorklistTypeChange(searchedResponseData);\r\n                            }\r\n                            else {\r\n                                _this.openResponseFromWorkList(searchedResponseData);\r\n                            }\r\n                        }\r\n                        else if (navigationStore.instance.containerPage === enums.PageContainers.TeamManagement) {\r\n                            _this.openResponseFromTeamManagement(searchedResponseData);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                /*\r\n                   If searched response not belongs to current marker's worklist, subordinate's worklist\r\n                   or not available for marking check then Rig not found popup should be shown\r\n                   instead of navigating response screen and hide busy indicator from then menu.\r\n                */\r\n                _this.setState({ isBusy: false });\r\n                searchResponseActionCreator.showOrHideRigNotFoundPopup(true);\r\n            }\r\n        };\r\n        _this.closeMenu = _this.closeMenu.bind(_this);\r\n        _this.navigateToHome = _this.navigateToContainer.bind(_this, enums.PageContainers.QigSelector);\r\n        _this.navigateToMessage = _this.navigateToContainer.bind(_this, enums.PageContainers.Message);\r\n        _this.navigateToAwarding = _this.navigateToContainer.bind(_this, enums.PageContainers.Awarding);\r\n        _this.navigateToLogin = navigationHelper.showLogoutConfirmation.bind(_this);\r\n        _this.navigateToReports = _this.navigateToContainer.bind(_this, enums.PageContainers.Reports);\r\n        _this.setBusyIndicatorProperties(enums.BusyIndicatorInvoker.loadingResponse, false);\r\n        _this.state = { isOpen: false, renderedOn: 0, isBusy: false };\r\n        return _this;\r\n    }\r\n    /**\r\n     * Render method\r\n     */\r\n    MenuWrapper.prototype.render = function () {\r\n        var _this = this;\r\n        var busyIndicator = (React.createElement(BusyIndicator, { id: 'response_' + this.busyIndicatorInvoker.toString(), isBusy: this.state.isBusy, key: 'response_' + this.busyIndicatorInvoker.toString(), isMarkingBusy: true, busyIndicatorInvoker: this.busyIndicatorInvoker, doShowDialog: true, showBackgroundScreen: this.showBackgroundScreenOnBusy }));\r\n        var className = classNames('dropdown-wrap header-dropdown nav-options', { 'open': this.state.isOpen });\r\n        return (React.createElement(\"li\", { role: 'menuitem', id: 'menuwrapper', className: className, \"aria-haspopup\": 'true' },\r\n            React.createElement(\"a\", { id: 'menu-button', href: 'javascript:void(0)', title: localeStore.instance.TranslateText('generic.navigation-bar.menu-tooltip'), onClick: this.state.isOpen ? null : function () { _this.props.handleNavigationClick(); }, className: 'menu-button' },\r\n                React.createElement(\"span\", { className: 'relative' },\r\n                    React.createElement(\"span\", { id: 'menu-icon', className: 'sprite-icon hamburger-icon' }),\r\n                    React.createElement(\"span\", { className: 'nav-text' }, localeStore.instance.TranslateText('generic.navigation-bar.menu')))),\r\n            React.createElement(\"div\", { className: 'menu', role: 'menu', \"aria-hidden\": 'true' },\r\n                React.createElement(\"div\", { className: 'menu-wrapper' },\r\n                    React.createElement(\"div\", { className: 'menu-inner' },\r\n                        React.createElement(\"div\", { className: 'left-menu-cols' },\r\n                            React.createElement(\"div\", { className: 'menu-page-block menu-page-nav' },\r\n                                React.createElement(\"h2\", { id: 'menu-header' }, localeStore.instance.TranslateText('generic.navigation-bar.menu')),\r\n                                React.createElement(\"ul\", { className: 'menu-holder quick-menu' },\r\n                                    React.createElement(MenuLink, { id: 'menuLink_Home', key: 'menuLink_Home_key', menuLinkName: localeStore.instance.TranslateText('generic.navigation-menu.home'), onMenuLinkClick: this.navigateToHome, isVisible: true }),\r\n                                    React.createElement(MenuLink, { id: 'menuLink_Reports', key: 'menuLink_Reports_key', menuLinkName: localeStore.instance.TranslateText('generic.navigation-menu.reports'), onMenuLinkClick: this.navigateToReports, isVisible: this.canRenderReports }),\r\n                                    React.createElement(MenuLink, { id: 'menuLink_Inbox', key: 'menuLink_Inbox_key', menuLinkName: localeStore.instance.TranslateText('messaging.message-lists.top-panel.inbox-tab'), onMenuLinkClick: this.navigateToMessage, isVisible: true }),\r\n                                    React.createElement(MenuLink, { id: 'menuLink_Awarding', key: 'menuLink_Awarding_key', menuLinkName: localeStore.instance.TranslateText('awarding.generic.awarding'), onMenuLinkClick: this.navigateToAwarding, isVisible: awardingStore.instance.hasAwardingAccess }),\r\n                                    React.createElement(MenuLink, { id: 'menuLink_Logout', key: 'menuLink_Logout_key', menuLinkName: localeStore.instance.TranslateText('generic.user-menu.profile-section.logout-button'), onMenuLinkClick: this.navigateToLogin, isVisible: true }))),\r\n                            this.searchResponse),\r\n                        this.recentHistory)),\r\n                React.createElement(\"a\", { href: 'javascript:void(0)', id: 'menu-close', className: 'menu-close', onClick: this.closeMenu, title: localeStore.instance.TranslateText('generic.navigation-menu.close') }, localeStore.instance.TranslateText('generic.navigation-menu.close'))),\r\n            busyIndicator));\r\n    };\r\n    /**\r\n     * Component will Unmount\r\n     */\r\n    MenuWrapper.prototype.componentWillUnmount = function () {\r\n        navigationStore.instance.removeListener(navigationStore.NavigationStore.MENU_VISIBILITY_EVENT, this.menuVisibility);\r\n        worklistStore.instance.removeListener(worklistStore.WorkListStore.WORKLIST_HISTORY_INFO_UPDATED, this.loadRecentWorklist);\r\n        qigStore.instance.removeListener(qigStore.QigStore.QIG_SELECTED_FROM_HISTORY_EVENT, this.onQigSelectedFromHistory);\r\n        teamManagementStore.instance.removeListener(teamManagementStore.TeamManagementStore.TEAM_MANAGEMENT_EXAMINER_VALIDATED_EVENT, this.examinerValidated);\r\n        teamManagementStore.instance.removeListener(teamManagementStore.TeamManagementStore.OPEN_TEAM_MANAGEMENT_EVENT, this.openTeamManagementFromPopup);\r\n        responseStore.instance.removeListener(responseStore.ResponseStore.RESPONSE_SEARCH_DATA_RECEIVED_EVENT, this.initiateSearchResponse);\r\n    };\r\n    /**\r\n     * Component did mount\r\n     */\r\n    MenuWrapper.prototype.componentDidMount = function () {\r\n        navigationStore.instance.addListener(navigationStore.NavigationStore.MENU_VISIBILITY_EVENT, this.menuVisibility);\r\n        worklistStore.instance.addListener(worklistStore.WorkListStore.WORKLIST_HISTORY_INFO_UPDATED, this.loadRecentWorklist);\r\n        qigStore.instance.addListener(qigStore.QigStore.QIG_SELECTED_FROM_HISTORY_EVENT, this.onQigSelectedFromHistory);\r\n        teamManagementStore.instance.addListener(teamManagementStore.TeamManagementStore.TEAM_MANAGEMENT_EXAMINER_VALIDATED_EVENT, this.examinerValidated);\r\n        teamManagementStore.instance.addListener(teamManagementStore.TeamManagementStore.OPEN_TEAM_MANAGEMENT_EVENT, this.openTeamManagementFromPopup);\r\n        responseStore.instance.addListener(responseStore.ResponseStore.RESPONSE_SEARCH_DATA_RECEIVED_EVENT, this.initiateSearchResponse);\r\n    };\r\n    /**\r\n     * used to navigate to particular container\r\n     */\r\n    MenuWrapper.prototype.navigateToContainer = function (container) {\r\n        if (this.doNavigateContainer(container)) {\r\n            if (container !== enums.PageContainers.Response) {\r\n                markingActionCreator.setMarkingInProgress(false);\r\n            }\r\n            // resetting the marking check mode on menu item click\r\n            markingCheckActionCreator.toggleMarkingCheckMode(false);\r\n            // handle offline when try to navigate from menu\r\n            if (!applicationStore.instance.isOnline) {\r\n                applicationActionCreator.checkActionInterrupted();\r\n            }\r\n            else {\r\n                switch (container) {\r\n                    case enums.PageContainers.QigSelector:\r\n                        navigationHelper.loadQigSelector();\r\n                        break;\r\n                    case enums.PageContainers.Message:\r\n                        navigationHelper.loadMessagePage();\r\n                        break;\r\n                    case enums.PageContainers.Login:\r\n                        navigationHelper.loadLoginPage();\r\n                        break;\r\n                    case enums.PageContainers.Reports:\r\n                        navigationHelper.loadReportsPage();\r\n                        break;\r\n                    case enums.PageContainers.Awarding:\r\n                        navigationHelper.loadAwardingPage(true);\r\n                        break;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            var message = 'Selected the same container ' +\r\n                enums.PageContainers[container].toString() +\r\n                ' from menu with Close menu event triggered.';\r\n            message = message + ' Current container => ' +\r\n                enums.PageContainers[navigationStore.instance.containerPage];\r\n            // logging menu action in google analytics or application insight based on the configuration\r\n            new auditLoggingHelper().logHelper.logEventOnMenuAction(message);\r\n            this.setState({\r\n                isOpen: false\r\n            });\r\n        }\r\n    };\r\n    /**\r\n     * return false if current and navigateTo conatainer are same\r\n     */\r\n    MenuWrapper.prototype.doNavigateContainer = function (navigateToContainer) {\r\n        var _currentContainer = enums.PageContainers.None;\r\n        _currentContainer = navigationStore.instance.containerPage;\r\n        return navigateToContainer !== _currentContainer;\r\n    };\r\n    Object.defineProperty(MenuWrapper.prototype, \"recentHistory\", {\r\n        get: function () {\r\n            var _recentHistory = Immutable.List();\r\n            var historyItems = [];\r\n            navigationStore.instance.getRecentHistory.forEach(function (qigInHistory) {\r\n                if (qigStore.instance.HiddenQIGs.indexOf(qigInHistory.qigId) === -1) {\r\n                    var qig = qigStore.instance.getQigSummary(qigInHistory.qigId);\r\n                    if (qigStore.instance.getOverviewData.hasAnyQigWithHideInOverviewWhenNoWorkCCOn\r\n                        && qig.isHideInOverviewWhenNoWorkCCON) {\r\n                        qigInHistory.myMarking = qig.isMarkingEnabled ? qigInHistory.myMarking : undefined;\r\n                        qigInHistory.isMarkingEnabled = qig.isMarkingEnabled;\r\n                        qigInHistory.team = qig.isTeamManagementEnabled ? qigInHistory.team : undefined;\r\n                        qigInHistory.isTeamManagementEnabled = qig.isTeamManagementEnabled;\r\n                        qigInHistory.isStandardisationSetupEnabled = (qig.isStandardisationSetupButtonVisible ||\r\n                            qig.isStandardisationSetupLinkVisible);\r\n                        qigInHistory.standardisationSetup = (qigInHistory.isStandardisationSetupEnabled ?\r\n                            qigInHistory.standardisationSetup : undefined);\r\n                    }\r\n                    historyItems.push(qigInHistory);\r\n                }\r\n            });\r\n            _recentHistory = Immutable.List(historyItems);\r\n            var that = this;\r\n            var recentItems = _recentHistory.map(function (recentItem) {\r\n                return (React.createElement(MenuLink, { menuString: recentItem.qigName, onMyMarkingClick: recentItem.myMarking ?\r\n                        that.navigateToRecentHistoryMyMarking.bind(that, recentItem, null, null) :\r\n                        recentItem.isMarkingEnabled ?\r\n                            that.navigateToRecentHistoryMyMarking.bind(that, null, recentItem.qigId, recentItem.questionPaperPartId) :\r\n                            null, onTeamManagementClick: recentItem.team ?\r\n                        that.navigateToRecentHistoryTeamManagement.bind(that, recentItem, null, null, null) :\r\n                        recentItem.isTeamManagementEnabled ?\r\n                            that.navigateToRecentHistoryTeamManagement.bind(that, null, recentItem.qigId, recentItem.questionPaperPartId, recentItem.examinerRoleId) :\r\n                            null, onStandardisationSetupClick: recentItem.standardisationSetup ?\r\n                        that.navigateToRecentHistoryStandardisationSetup.bind(that, recentItem, null) :\r\n                        recentItem.isStandardisationSetupEnabled ?\r\n                            that.navigateToRecentHistoryStandardisationSetup.bind(that, null, recentItem.qigId) :\r\n                            null, isRecentHistory: true, selectedLanguage: that.props.selectedLanguage, recentItem: recentItem, id: 'menuLink_' + recentItem.qigId, key: 'menuLink_key_' + recentItem.qigId }));\r\n            });\r\n            return (React.createElement(\"div\", { className: 'right-menu-cols' },\r\n                React.createElement(\"div\", { className: 'menu-page-block menu-page-recent' },\r\n                    React.createElement(\"h2\", { id: 'recent' }, localeStore.instance.TranslateText('generic.navigation-menu.recent')),\r\n                    React.createElement(\"ul\", { className: 'menu-holder recent-items', id: 'menuHolder' }, recentItems))));\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(MenuWrapper.prototype, \"searchResponse\", {\r\n        get: function () {\r\n            var searchPanel = this.isSearchPanelVisible() ?\r\n                (React.createElement(MenuSearchPanel, { id: 'search-panel', key: 'search-panel-key', onSearch: this.onSearch, onSearchClick: this.onSearchClick, qigName: this.getFormattedQIGName(), searchText: this.searchText })) : null;\r\n            return searchPanel;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Validate the entered search text.\r\n     */\r\n    MenuWrapper.prototype.isValidSearchText = function (searchText) {\r\n        var displayId = Math.floor(Number(searchText));\r\n        return displayId !== Infinity && String(displayId) === searchText && displayId >= 0;\r\n    };\r\n    /**\r\n     * navigate to worklist based on history item\r\n     */\r\n    MenuWrapper.prototype.navigateToRecentHistoryMyMarking = function (_historyItem, _qigId, _questionPaperPartId) {\r\n        /*Handles the scenario where user is offline on clicking on history link in menu*/\r\n        if (!applicationStore.instance.isOnline) {\r\n            applicationActionCreator.checkActionInterrupted();\r\n        }\r\n        else {\r\n            // Menu history navigation to my marking\r\n            this.historyNavigationArea = enums.HistoryNavigationArea.Marking;\r\n            this._failureCode = undefined;\r\n            // response is getting closed, inform modules.\r\n            worklistActionCreator.responseClosed(true);\r\n            //bookmarkActionCreator.bookmarkAdded(null);\r\n            // resetting the marking check mode on menu item click\r\n            markingCheckActionCreator.toggleMarkingCheckMode(false);\r\n            busyIndicatorActionCreator.setBusyIndicatorInvoker(enums.BusyIndicatorInvoker.loadingHistoryDetails);\r\n            var message = 'Selected My Marking from menu with Close menu event triggered.';\r\n            message = message + ' Current container => ' +\r\n                enums.PageContainers[navigationStore.instance.containerPage];\r\n            // logging menu action in google analytics or application insights based on the configuration\r\n            new auditLoggingHelper().logHelper.logEventOnMenuAction(message);\r\n            this.setState({ isOpen: false });\r\n            var that_5 = this;\r\n            this._historyItem = JSON.parse(JSON.stringify(_historyItem));\r\n            var qigId_1 = _qigId > 0 ? _qigId : this._historyItem.qigId;\r\n            // set the marker operation mode as Marking\r\n            userInfoActionCreator.changeOperationMode(enums.MarkerOperationMode.Marking, false, true);\r\n            // Invoke the action creator to Open the QIG\r\n            var getQIGSelectorDataPromise = qigActionCreator.getQIGSelectorData(qigId_1, true, false, true, false, true);\r\n            Promise.Promise.all([\r\n                getQIGSelectorDataPromise\r\n            ]).then(function (result) {\r\n                var selectedQIGForMarkerOperation = qigStore.instance.selectedQIGForMarkerOperation;\r\n                // The Qigstore become undefined when the marker is withrawn in background,.\r\n                // Need to show withdrawn poup while clicking marking link from menu.\r\n                if (selectedQIGForMarkerOperation === undefined) {\r\n                    // Load the worklist while navigating to worklist from inbox through menu.\r\n                    if (navigationStore.instance.containerPage === enums.PageContainers.Message) {\r\n                        navigationHelper.loadWorklist(true);\r\n                    }\r\n                    // upadte examiner store , and withdrawn poup will be displyed from footer.\r\n                    markerInformationActionCreator.\r\n                        GetMarkerInformation(that_5._historyItem.examinerRoleId, qigId_1, true, false, examinerStore.instance.examinerApprovalStatus(that_5._historyItem.examinerRoleId));\r\n                    return;\r\n                }\r\n                responseSearchHelper.openQIGDetails(selectedQIGForMarkerOperation.questionPaperPartId, selectedQIGForMarkerOperation.markSchemeGroupId, selectedQIGForMarkerOperation.examinerRoleId, dataServiceHelper.canUseCache(), examinerStore.instance.examinerApprovalStatus(selectedQIGForMarkerOperation.examinerRoleId), selectedQIGForMarkerOperation.markingMethod, false, selectedQIGForMarkerOperation.isElectronicStandardisationTeamMember);\r\n                // load stamps defined for the selected mark scheme groupId\r\n                stampActionCreator.getStampData(qigStore.instance.selectedQIGForMarkerOperation.markSchemeGroupId, stampStore.instance.stampIdsForSelectedQIG, qigStore.instance.selectedQIGForMarkerOperation.markingMethod, responseHelper.isEbookMarking, true);\r\n                // Calling the helper method to format the QIG Name\r\n                var currQigName = stringFormatHelper.formatAwardingBodyQIG(selectedQIGForMarkerOperation.markSchemeGroupName, selectedQIGForMarkerOperation.assessmentCode, selectedQIGForMarkerOperation.sessionName, selectedQIGForMarkerOperation.componentId, selectedQIGForMarkerOperation.questionPaperName, selectedQIGForMarkerOperation.assessmentName, selectedQIGForMarkerOperation.componentName, stringFormatHelper.getOverviewQIGNameFormat());\r\n                // logging qig selection in google analytics or application insights based on the configuration.\r\n                new auditLoggingHelper().logHelper.logEventOnQigSelection(currQigName);\r\n                if (that_5._historyItem) {\r\n                    // update the worklist store before navigation\r\n                    if (that_5._historyItem.myMarking.worklistType === enums.WorklistType.simulation\r\n                        && selectedQIGForMarkerOperation.standardisationSetupComplete) {\r\n                        that_5._historyItem.myMarking.worklistType = enums.WorklistType.none;\r\n                    }\r\n                    worklistActionCreator.setWorklistHistoryInfo(that_5._historyItem, enums.MarkerOperationMode.Marking);\r\n                }\r\n                navigationHelper.loadWorklist(true);\r\n            });\r\n        }\r\n    };\r\n    /**\r\n     * navigate to team Management based on history item\r\n     */\r\n    MenuWrapper.prototype.navigateToRecentHistoryTeamManagement = function (_historyItem, _qigid, _questionPaperPartId, _examinerRoleId) {\r\n        /*Handles the scenario where user is offline on clicking on history link in menu*/\r\n        if (!applicationStore.instance.isOnline) {\r\n            applicationActionCreator.checkActionInterrupted();\r\n        }\r\n        else {\r\n            busyIndicatorActionCreator.setBusyIndicatorInvoker(enums.BusyIndicatorInvoker.loadingHistoryDetails);\r\n            // Menu history navigation to team management\r\n            this.historyNavigationArea = enums.HistoryNavigationArea.TeamManagement;\r\n            var message = 'Selected Team Management from menu with Close menu event triggered.';\r\n            message = message + ' Current container => ' +\r\n                enums.PageContainers[navigationStore.instance.containerPage];\r\n            // logging menu action in google analytics or application insights based on the configuration\r\n            new auditLoggingHelper().logHelper.logEventOnMenuAction(message);\r\n            this.setState({ isOpen: false });\r\n            // resetting the marking check mode on menu item click\r\n            markingCheckActionCreator.toggleMarkingCheckMode(false);\r\n            this._historyItem = _historyItem ? JSON.parse(JSON.stringify(_historyItem)) : null;\r\n            this._qigid = _qigid ? _qigid : 0;\r\n            this._questionPaperPartId = _questionPaperPartId ? _questionPaperPartId : 0;\r\n            this._examinerRoleId = _examinerRoleId ? _examinerRoleId : 0;\r\n            if (this._historyItem !== null) {\r\n                // clear my-team data and help-examiner data from cache\r\n                this.storageAdapterHelper.clearTeamDataCache(this._historyItem.team.supervisorExaminerRoleID, this._historyItem.qigId);\r\n                this.storageAdapterHelper.clearTeamDataCache(this._historyItem.team.supervisorExaminerRoleID, this._historyItem.qigId, true);\r\n                var examinerValidationArea = enums.ExaminerValidationArea.MyTeam;\r\n                if (this._historyItem.team.selectedTab === enums.TeamManagement.HelpExaminers &&\r\n                    this._historyItem.team.currentContainer === enums.PageContainers.WorkList) {\r\n                    examinerValidationArea = enums.ExaminerValidationArea.HelpExaminer;\r\n                }\r\n                // validates the examiner\r\n                teamManagementActionCreator.teamManagementExaminerValidation(this._historyItem.qigId, this._historyItem.team.supervisorExaminerRoleID, this._historyItem.team.subordinateExaminerRoleID, this._historyItem.team.subordinateExaminerID, examinerValidationArea, false);\r\n            }\r\n            else {\r\n                teamManagementActionCreator.teamManagementExaminerValidation(this._qigid);\r\n            }\r\n        }\r\n    };\r\n    Object.defineProperty(MenuWrapper.prototype, \"canRenderReports\", {\r\n        /**\r\n         * Gets the reports in menu according to the login.\r\n         */\r\n        get: function () {\r\n            return loginSession.IS_FAMILIARISATION_LOGIN === true ? false : loginStore.instance.isReportsVisible;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Get Formatted QIG Name\r\n     */\r\n    MenuWrapper.prototype.getFormattedQIGName = function () {\r\n        if (qigStore.instance.selectedQIGForMarkerOperation) {\r\n            return localeStore.instance.TranslateText('search-response.search-response-content-appender') + ' ' +\r\n                stringFormatHelper.formatAwardingBodyQIG(qigStore.instance.selectedQIGForMarkerOperation.markSchemeGroupName, qigStore.instance.selectedQIGForMarkerOperation.assessmentCode, qigStore.instance.selectedQIGForMarkerOperation.sessionName, qigStore.instance.selectedQIGForMarkerOperation.componentId, qigStore.instance.selectedQIGForMarkerOperation.questionPaperName, qigStore.instance.selectedQIGForMarkerOperation.assessmentName, qigStore.instance.selectedQIGForMarkerOperation.componentName, stringFormatHelper.getOverviewQIGNameFormat());\r\n        }\r\n    };\r\n    /**\r\n     * Check whether the search panel is visible or not.\r\n     */\r\n    MenuWrapper.prototype.isSearchPanelVisible = function () {\r\n        if ((userInfoStore.instance.currentOperationMode === enums.MarkerOperationMode.Marking ||\r\n            userInfoStore.instance.currentOperationMode === enums.MarkerOperationMode.TeamManagement) &&\r\n            navigationStore.instance.containerPage !== enums.PageContainers.QigSelector &&\r\n            navigationStore.instance.containerPage !== enums.PageContainers.Message &&\r\n            navigationStore.instance.containerPage !== enums.PageContainers.Awarding &&\r\n            navigationStore.instance.containerPage !== enums.PageContainers.StandardisationSetup &&\r\n            navigationStore.instance.containerPage !== enums.PageContainers.Reports) {\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    /**\r\n     * Method which sets the busy indicator properties\r\n     * @param busyIndicatorInvoker\r\n     * @param showBackgroundScreenOnBusy\r\n     */\r\n    MenuWrapper.prototype.setBusyIndicatorProperties = function (busyIndicatorInvoker, showBackgroundScreenOnBusy) {\r\n        this.busyIndicatorInvoker = busyIndicatorInvoker;\r\n        this.showBackgroundScreenOnBusy = showBackgroundScreenOnBusy;\r\n    };\r\n    /**\r\n     * Navigate to standardisation setup from recent history\r\n     * @param _historyItem\r\n     * @param _qigId\r\n     */\r\n    MenuWrapper.prototype.navigateToRecentHistoryStandardisationSetup = function (_historyItem, _qigId) {\r\n        /*Handles the scenario where user is offline on clicking on history link in menu*/\r\n        if (!applicationStore.instance.isOnline) {\r\n            applicationActionCreator.checkActionInterrupted();\r\n        }\r\n        else {\r\n            // Menu history navigation to my standardisation setup\r\n            this.historyNavigationArea = enums.HistoryNavigationArea.StandardisationSetup;\r\n            this._failureCode = undefined;\r\n            // resetting the marking check mode on menu item click\r\n            markingCheckActionCreator.toggleMarkingCheckMode(false);\r\n            // busy indicator will be removed\r\n            // a. when navigator referesh while navigating between different areas \r\n            // b. when navigating from one SSU to another SSU , it will be reset by STANDARDISATION_RESPONSE_DATA_UPDATED_EVENT\r\n            busyIndicatorActionCreator.setBusyIndicatorInvoker(enums.BusyIndicatorInvoker.loadingHistoryDetails);\r\n            var message = 'Selected Standardisation setup from menu with Close menu event triggered.';\r\n            message = message + ' Current container => ' +\r\n                enums.PageContainers[navigationStore.instance.containerPage];\r\n            // logging menu action in google analytics or application insights based on the configuration\r\n            new auditLoggingHelper().logHelper.logEventOnMenuAction(message);\r\n            this.setState({ isOpen: false });\r\n            this._historyItem = JSON.parse(JSON.stringify(_historyItem));\r\n            var qigId = _qigId > 0 ? _qigId : this._historyItem.qigId;\r\n            // set the marker operation mode as Marking\r\n            userInfoActionCreator.changeOperationMode(enums.MarkerOperationMode.StandardisationSetup, false, true);\r\n            // Invoke the action creator to Open the QIG\r\n            qigActionCreator.getQIGSelectorData(qigId, true, false, true, false, true);\r\n        }\r\n    };\r\n    /**\r\n     * Open search response from worklist\r\n     * @param searchedResponseData\r\n     */\r\n    MenuWrapper.prototype.openResponseFromWorkList = function (searchedResponseData) {\r\n        var selectedResponseWorkListType = responseSearchHelper.getWorklistTypeByMarkingMode(searchedResponseData.markingModeId, searchedResponseData.isDirectedRemark, searchedResponseData.isAtypical);\r\n        if (searchedResponseData.responseMode === worklistStore.instance.getResponseMode\r\n            && !worklistStore.instance.isMarkingCheckMode\r\n            && worklistStore.instance.currentWorklistType === selectedResponseWorkListType\r\n            && !worklistStore.instance.isMarkingCheckWorklistAccessPresent) {\r\n            /*\r\n               If searched response's worklist type and response mode is same as current worklist type, response mode\r\n               and also the search response not belongs to marking check then we have to open response direclty\r\n               without fetching worklist type and related store values.\r\n            */\r\n            responseHelper.openResponse(parseInt(searchedResponseData.displayId), enums.ResponseNavigation.specific, searchedResponseData.responseMode, searchedResponseData.markGroupId, enums.ResponseViewMode.zoneView);\r\n            markSchemeHelper.getMarks(parseInt(searchedResponseData.displayId), searchedResponseData.markingModeId);\r\n            eCourseworkHelper.fetchECourseWorkCandidateScriptMetadata(parseInt(searchedResponseData.displayId));\r\n        }\r\n        else {\r\n            /*\r\n               If searched response is not belongs to current marker's worklist type or response mode\r\n               or it is a marking check response then , we have to fetch worklist type and\r\n               candidate meta data to update store values before opening the searched response.\r\n            */\r\n            this.notifyWorklistTypeChange(searchedResponseData);\r\n        }\r\n    };\r\n    /**\r\n     * Open search response from team management\r\n     * @param searchedResponseData\r\n     */\r\n    MenuWrapper.prototype.openResponseFromTeamManagement = function (searchedResponseData) {\r\n        var canUseCache = searchedResponseData.examinerId === searchedResponseData.loggedInExaminerId &&\r\n            qigStore.instance.selectedQIGForMarkerOperation !== undefined;\r\n        /*\r\n           If searched response available for subordinate's worklist then,\r\n           the search will be applicable only for selected qig, hence no need to fetch qig details before\r\n           opening subordinate response. But we have to fetch worklist type, candidate meta data and update store\r\n           values before navigating subordinate response.\r\n       */\r\n        responseSearchHelper.openQIGDetails(searchedResponseData.questionPaperId, searchedResponseData.markSchemeGroupId, searchedResponseData.examinerRoleId, canUseCache, searchedResponseData.approvalStatusId, searchedResponseData.markingMethodId, true, qigStore.instance.selectedQIGForMarkerOperation.isElectronicStandardisationTeamMember, true);\r\n    };\r\n    /**\r\n     * Notify worklist type change\r\n     * @param searchedResponseData\r\n     */\r\n    MenuWrapper.prototype.notifyWorklistTypeChange = function (searchedResponseData) {\r\n        var selectedResponseWorkListType = responseSearchHelper.getWorklistTypeByMarkingMode(searchedResponseData.markingModeId, searchedResponseData.isDirectedRemark, searchedResponseData.isAtypical);\r\n        worklistActionCreator.notifyWorklistTypeChange(searchedResponseData.markSchemeGroupId, searchedResponseData.examinerRoleId, searchedResponseData.questionPaperId, selectedResponseWorkListType, searchedResponseData.responseMode, searchedResponseData.remarkRequestType, searchedResponseData.isDirectedRemark, qigStore.instance.selectedQIGForMarkerOperation.isElectronicStandardisationTeamMember);\r\n    };\r\n    return MenuWrapper;\r\n}(pureRenderComponent));\r\nmodule.exports = MenuWrapper;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzU0LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvbWVudS9tZW51d3JhcHBlci50c3g/YjU5NiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuaW1wb3J0IFByb21pc2UgPSByZXF1aXJlKCdlczYtcHJvbWlzZScpO1xubGV0IGNsYXNzTmFtZXMgPSByZXF1aXJlKCdjbGFzc25hbWVzJyk7XG5pbXBvcnQgSW1tdXRhYmxlID0gcmVxdWlyZSgnaW1tdXRhYmxlJyk7XG5pbXBvcnQgcHVyZVJlbmRlckNvbXBvbmVudCA9IHJlcXVpcmUoJy4uL2Jhc2UvcHVyZXJlbmRlcmNvbXBvbmVudCcpO1xuaW1wb3J0IG5hdmlnYXRpb25TdG9yZSA9IHJlcXVpcmUoJy4uLy4uL3N0b3Jlcy9uYXZpZ2F0aW9uL25hdmlnYXRpb25zdG9yZScpO1xuaW1wb3J0IGVudW1zID0gcmVxdWlyZSgnLi4vdXRpbGl0eS9lbnVtcycpO1xuaW1wb3J0IE1lbnVMaW5rID0gcmVxdWlyZSgnLi9tZW51bGluaycpO1xuaW1wb3J0IG5hdmlnYXRpb25IZWxwZXIgPSByZXF1aXJlKCcuLi91dGlsaXR5L25hdmlnYXRpb24vbmF2aWdhdGlvbmhlbHBlcicpO1xuaW1wb3J0IGF3YXJkaW5nU3RvcmUgPSByZXF1aXJlKCcuLi8uLi9zdG9yZXMvYXdhcmRpbmcvYXdhcmRpbmdzdG9yZScpO1xuaW1wb3J0IGxvY2FsZVN0b3JlID0gcmVxdWlyZSgnLi4vLi4vc3RvcmVzL2xvY2FsZS9sb2NhbGVzdG9yZScpO1xuaW1wb3J0IHVzZXJJbmZvQWN0aW9uQ3JlYXRvciA9IHJlcXVpcmUoJy4uLy4uL2FjdGlvbnMvdXNlcmluZm8vdXNlcmluZm9hY3Rpb25jcmVhdG9yJyk7XG5pbXBvcnQgcmVzcG9uc2VTdG9yZSA9IHJlcXVpcmUoJy4uLy4uL3N0b3Jlcy9yZXNwb25zZS9yZXNwb25zZXN0b3JlJyk7XG5pbXBvcnQgbWFya2luZ0FjdGlvbkNyZWF0b3IgPSByZXF1aXJlKCcuLi8uLi9hY3Rpb25zL21hcmtpbmcvbWFya2luZ2FjdGlvbmNyZWF0b3InKTtcbmltcG9ydCBicmVhZENydW1iSXRlbUluZm8gPSByZXF1aXJlKCcuLi8uLi91dGlsaXR5L2JyZWFkY3J1bWIvYnJlYWRjcnVtYml0ZW1pbmZvJyk7XG5pbXBvcnQgd29ya2xpc3RIaXN0b3J5SW5mbyA9IHJlcXVpcmUoJy4uLy4uL3V0aWxpdHkvYnJlYWRjcnVtYi93b3JrbGlzdGhpc3RvcnlpbmZvJyk7XG5pbXBvcnQgcWlnU2VsZWN0b3JBY3Rpb25DcmVhdG9yID0gcmVxdWlyZSgnLi4vLi4vYWN0aW9ucy9xaWdzZWxlY3Rvci9xaWdzZWxlY3RvcmFjdGlvbmNyZWF0b3InKTtcbmltcG9ydCB3b3JrbGlzdEFjdGlvbkNyZWF0b3IgPSByZXF1aXJlKCcuLi8uLi9hY3Rpb25zL3dvcmtsaXN0L3dvcmtsaXN0YWN0aW9uY3JlYXRvcicpO1xuaW1wb3J0IGNjQWN0aW9uQ3JlYXRvciA9IHJlcXVpcmUoJy4uLy4uL2FjdGlvbnMvY29uZmlndXJhYmxlY2hhcmFjdGVyaXN0aWNzL2NvbmZpZ3VyYWJsZWNoYXJhY3RlcmlzdGljc2FjdGlvbmNyZWF0b3InKTtcbmltcG9ydCB1c2VyT3B0aW9uc0hlbHBlciA9IHJlcXVpcmUoJy4uLy4uL3V0aWxpdHkvdXNlcm9wdGlvbi91c2Vyb3B0aW9uc2hlbHBlcicpO1xuaW1wb3J0IHVzZXJPcHRpb25LZXlzID0gcmVxdWlyZSgnLi4vLi4vdXRpbGl0eS91c2Vyb3B0aW9uL3VzZXJvcHRpb25rZXlzJyk7XG5pbXBvcnQgcWlnU3RvcmUgPSByZXF1aXJlKCcuLi8uLi9zdG9yZXMvcWlnc2VsZWN0b3IvcWlnc3RvcmUnKTtcbmltcG9ydCBzdHJpbmdGb3JtYXRIZWxwZXIgPSByZXF1aXJlKCcuLi8uLi91dGlsaXR5L3N0cmluZ2Zvcm1hdC9zdHJpbmdmb3JtYXRoZWxwZXInKTtcbmltcG9ydCBzdGFtcFN0b3JlID0gcmVxdWlyZSgnLi4vLi4vc3RvcmVzL3N0YW1wL3N0YW1wc3RvcmUnKTtcbmltcG9ydCBzdGFtcEFjdGlvbkNyZWF0b3IgPSByZXF1aXJlKCcuLi8uLi9hY3Rpb25zL3N0YW1wL3N0YW1wYWN0aW9uY3JlYXRvcicpO1xuaW1wb3J0IGV4YW1pbmVyU3RvcmUgPSByZXF1aXJlKCcuLi8uLi9zdG9yZXMvbWFya2VyaW5mb3JtYXRpb24vZXhhbWluZXJzdG9yZScpO1xuaW1wb3J0IGRhdGFTZXJ2aWNlSGVscGVyID0gcmVxdWlyZSgnLi4vLi4vdXRpbGl0eS9nZW5lcmljL2RhdGFzZXJ2aWNlaGVscGVyJyk7XG5pbXBvcnQgcmVzcG9uc2VTZWFyY2hIZWxwZXIgPSByZXF1aXJlKCcuLi8uLi91dGlsaXR5L3Jlc3BvbnNlc2VhcmNoL3Jlc3BvbnNlc2VhcmNoaGVscGVyJyk7XG5pbXBvcnQgd29ya2xpc3RTdG9yZSA9IHJlcXVpcmUoJy4uLy4uL3N0b3Jlcy93b3JrbGlzdC93b3JrbGlzdHN0b3JlJyk7XG5pbXBvcnQgbWFya2VyT3BlcmF0aW9uTW9kZUZhY3RvcnkgPSByZXF1aXJlKCcuLi91dGlsaXR5L21hcmtlcm9wZXJhdGlvbm1vZGUvbWFya2Vyb3BlcmF0aW9ubW9kZWZhY3RvcnknKTtcbmltcG9ydCBsb2dpblN0b3JlID0gcmVxdWlyZSgnLi4vLi4vc3RvcmVzL2xvZ2luL2xvZ2luc3RvcmUnKTtcbmltcG9ydCBsb2dpblNlc3Npb24gPSByZXF1aXJlKCcuLi8uLi9hcHAvbG9naW5zZXNzaW9uJyk7XG5pbXBvcnQgaGlzdG9yeUl0ZW0gPSByZXF1aXJlKCcuLi8uLi91dGlsaXR5L2JyZWFkY3J1bWIvaGlzdG9yeUl0ZW0nKTtcbmltcG9ydCB0ZWFtTWFuYWdlbWVudEFjdGlvbkNyZWF0b3IgPSByZXF1aXJlKCcuLi8uLi9hY3Rpb25zL3RlYW1tYW5hZ2VtZW50L3RlYW1tYW5hZ2VtZW50YWN0aW9uY3JlYXRvcicpO1xuaW1wb3J0IHRlYW1NYW5hZ2VtZW50U3RvcmUgPSByZXF1aXJlKCcuLi8uLi9zdG9yZXMvdGVhbW1hbmFnZW1lbnQvdGVhbW1hbmFnZW1lbnRzdG9yZScpO1xuaW1wb3J0IG1hcmtpbmdDaGVja0FjdGlvbkNyZWF0b3IgPSByZXF1aXJlKCcuLi8uLi9hY3Rpb25zL21hcmtpbmdjaGVjay9tYXJraW5nY2hlY2thY3Rpb25jcmVhdG9yJyk7XG5pbXBvcnQgcWlnQWN0aW9uQ3JlYXRvciA9IHJlcXVpcmUoJy4uLy4uL2FjdGlvbnMvcWlnc2VsZWN0b3IvcWlnc2VsZWN0b3JhY3Rpb25jcmVhdG9yJyk7XG5pbXBvcnQgY2NoZWxwZXIgPSByZXF1aXJlKCcuLi8uLi91dGlsaXR5L2NvbmZpZ3VyYWJsZWNoYXJhY3RlcmlzdGljL2NvbmZpZ3VyYWJsZWNoYXJhY3RlcmlzdGljc2hlbHBlcicpO1xuaW1wb3J0IGNjTmFtZXMgPSByZXF1aXJlKCcuLi8uLi91dGlsaXR5L2NvbmZpZ3VyYWJsZWNoYXJhY3RlcmlzdGljL2NvbmZpZ3VyYWJsZWNoYXJhY3RlcmlzdGljc25hbWVzJyk7XG5pbXBvcnQgc3RvcmFnZUFkYXB0ZXJIZWxwZXIgPSByZXF1aXJlKCcuLi8uLi9kYXRhc2VydmljZXMvc3RvcmFnZWFkYXB0ZXJzL3N0b3JhZ2VhZGFwdGVyaGVscGVyJyk7XG5pbXBvcnQgYnVzeUluZGljYXRvckFjdGlvbkNyZWF0b3IgPSByZXF1aXJlKCcuLi8uLi9hY3Rpb25zL2J1c3lpbmRpY2F0b3IvYnVzeWluZGljYXRvcmFjdGlvbmNyZWF0b3InKTtcbmltcG9ydCB1c2VySW5mb1N0b3JlID0gcmVxdWlyZSgnLi4vLi4vc3RvcmVzL3VzZXJpbmZvL3VzZXJpbmZvc3RvcmUnKTtcbmltcG9ydCBrZXlEb3duSGVscGVyID0gcmVxdWlyZSgnLi4vLi4vdXRpbGl0eS9nZW5lcmljL2tleWRvd25oZWxwZXInKTtcbmltcG9ydCBib29rbWFya0FjdGlvbkNyZWF0b3IgPSByZXF1aXJlKCcuLi8uLi9hY3Rpb25zL2Jvb2ttYXJrcy9ib29rbWFya2FjdGlvbmNyZWF0b3InKTtcbmltcG9ydCBtYXJrZXJJbmZvcm1hdGlvbkFjdGlvbkNyZWF0b3IgPSByZXF1aXJlKCcuLi8uLi9hY3Rpb25zL21hcmtlcmluZm9ybWF0aW9uL21hcmtlcmluZm9ybWF0aW9uYWN0aW9uY3JlYXRvcicpO1xuaW1wb3J0IGFwcGxpY2F0aW9uU3RvcmUgPSByZXF1aXJlKCcuLi8uLi9zdG9yZXMvYXBwbGljYXRpb25vZmZsaW5lL2FwcGxpY2F0aW9uc3RvcmUnKTtcbmltcG9ydCBhcHBsaWNhdGlvbkFjdGlvbkNyZWF0b3IgPSByZXF1aXJlKCcuLi8uLi9hY3Rpb25zL2FwcGxpY2F0aW9ub2ZmbGluZS9hcHBsaWNhdGlvbmFjdGlvbmNyZWF0b3InKTtcbmltcG9ydCBuYXZpZ2F0aW9uTG9nZ2luZ0hlbHBlciA9IHJlcXVpcmUoJy4uL3V0aWxpdHkvbmF2aWdhdGlvbi9leGFtaW5lcm5hdmlnYXRpb25hdWRpdGhlbHBlcicpO1xuaW1wb3J0IGxvZ2dlckNvbnN0YW50cyA9IHJlcXVpcmUoJy4uL3V0aWxpdHkvbG9nZ2VyaGVscGVyY29uc3RhbnRzJyk7XG5pbXBvcnQgcmVzcG9uc2VIZWxwZXIgPSByZXF1aXJlKCcuLi91dGlsaXR5L3Jlc3BvbnNlaGVscGVyL3Jlc3BvbnNlaGVscGVyJyk7XG5pbXBvcnQgYXVkaXRMb2dnaW5nSGVscGVyID0gcmVxdWlyZSgnLi4vdXRpbGl0eS9hdWRpdGxvZ2dlci9hdWRpdGxvZ2dpbmdoZWxwZXInKTtcbmltcG9ydCBNZW51U2VhcmNoUGFuZWwgPSByZXF1aXJlKCcuL21lbnVzZWFyY2hwYW5lbCcpO1xuaW1wb3J0IHNlYXJjaFJlc3BvbnNlQWN0aW9uQ3JlYXRvciA9IHJlcXVpcmUoJy4uLy4uL2FjdGlvbnMvc2VhcmNocmVzcG9uc2Uvc2VhcmNocmVzcG9uc2VhY3Rpb25jcmVhdG9yJyk7XG5pbXBvcnQgbWFya1NjaGVtZUhlbHBlciA9IHJlcXVpcmUoJy4uLy4uL3V0aWxpdHkvbWFya3NjaGVtZS9tYXJrc2NoZW1laGVscGVyJyk7XG5pbXBvcnQgZUNvdXJzZXdvcmtIZWxwZXIgPSByZXF1aXJlKCcuLi91dGlsaXR5L2Vjb3Vyc2V3b3JrL2Vjb3Vyc2V3b3JraGVscGVyJyk7XG5pbXBvcnQgQnVzeUluZGljYXRvciA9IHJlcXVpcmUoJy4uL3V0aWxpdHkvYnVzeWluZGljYXRvci9idXN5aW5kaWNhdG9yJyk7XG5pbXBvcnQgcWlnU3VtbWFyeSA9IHJlcXVpcmUoJy4uLy4uL3N0b3Jlcy9xaWdzZWxlY3Rvci90eXBpbmdzL3FpZ3N1bW1hcnknKTtcbmltcG9ydCBzdGFuZGFyZGlzYXRpb25BY3Rpb25DcmVhdG9yID0gcmVxdWlyZSgnLi4vLi4vYWN0aW9ucy9zdGFuZGFyZGlzYXRpb25zZXR1cC9zdGFuZGFyZGlzYXRpb25hY3Rpb25jcmVhdG9yJyk7XG5cbi8qKlxuICogUHJvcHMgZm9yIHRoZSBNZW51IFdyYXBwZXJcbiAqL1xuaW50ZXJmYWNlIE1lbnVXcmFwcGVyUHJvcHMgZXh0ZW5kcyBMb2NhbGVTZWxlY3Rpb25CYXNlLCBQcm9wc0Jhc2Uge1xuICAgIGhhbmRsZU5hdmlnYXRpb25DbGljaz86IEZ1bmN0aW9uO1xufVxuXG4vKipcbiAqIEFsbCBmaWVsZHMgb3B0aW9uYWwgdG8gYWxsb3cgcGFydGlhbCBzdGF0ZSB1cGRhdGVzIGluIHNldFN0YXRlXG4gKi9cbmludGVyZmFjZSBTdGF0ZSB7XG4gICAgaXNPcGVuOiBib29sZWFuO1xuICAgIHJlbmRlcmVkT24/OiBudW1iZXI7XG4gICAgaXNCdXN5PzogYm9vbGVhbjtcbn1cblxuLyoqXG4gKiBSZWFjdCBjb21wb25lbnQgY2xhc3MgZm9yIFNob3dpbmcgbWVudSBQYWdlXG4gKi9cbmNsYXNzIE1lbnVXcmFwcGVyIGV4dGVuZHMgcHVyZVJlbmRlckNvbXBvbmVudDxNZW51V3JhcHBlclByb3BzLCBTdGF0ZT4ge1xuXG4gICAgcHJpdmF0ZSBuYXZpZ2F0ZVRvSG9tZTogRnVuY3Rpb247XG4gICAgcHJpdmF0ZSBuYXZpZ2F0ZVRvTWVzc2FnZTogRnVuY3Rpb247XG4gICAgcHJpdmF0ZSBuYXZpZ2F0ZVRvQXdhcmRpbmc6IEZ1bmN0aW9uO1xuICAgIHByaXZhdGUgbmF2aWdhdGVUb0xvZ2luOiBGdW5jdGlvbjtcbiAgICBwcml2YXRlIG5hdmlnYXRlVG9SZXBvcnRzOiBGdW5jdGlvbjtcbiAgICBwcml2YXRlIF9oaXN0b3J5SXRlbTogaGlzdG9yeUl0ZW07XG4gICAgcHJpdmF0ZSBfcWlnaWQ6IG51bWJlciA9IDA7XG4gICAgcHJpdmF0ZSBfcXVlc3Rpb25QYXBlclBhcnRJZDogbnVtYmVyID0gMDtcbiAgICBwcml2YXRlIF9leGFtaW5lclJvbGVJZDogbnVtYmVyID0gMDtcbiAgICBwcml2YXRlIF9mYWlsdXJlQ29kZTogZW51bXMuRmFpbHVyZUNvZGUgPSBlbnVtcy5GYWlsdXJlQ29kZS5Ob25lO1xuICAgIHByaXZhdGUgc3RvcmFnZUFkYXB0ZXJIZWxwZXIgPSBuZXcgc3RvcmFnZUFkYXB0ZXJIZWxwZXIoKTtcbiAgICBwcml2YXRlIGxvZ2dlcjogbmF2aWdhdGlvbkxvZ2dpbmdIZWxwZXIgPSBuZXcgbmF2aWdhdGlvbkxvZ2dpbmdIZWxwZXIoKTtcbiAgICBwcml2YXRlIHNlYXJjaFRleHQ6IHN0cmluZyA9ICcnO1xuICAgIHByaXZhdGUgYnVzeUluZGljYXRvckludm9rZXI6IGVudW1zLkJ1c3lJbmRpY2F0b3JJbnZva2VyID0gZW51bXMuQnVzeUluZGljYXRvckludm9rZXIubm9uZTtcbiAgICBwcml2YXRlIHNob3dCYWNrZ3JvdW5kU2NyZWVuT25CdXN5OiBib29sZWFuID0gZmFsc2U7XG4gICAgLy8gZW51bSB0byBpZGVudGlmeSBoaXN0b3J5IG5hdmlnYXRpb24gYXJlYVxuICAgIHByaXZhdGUgaGlzdG9yeU5hdmlnYXRpb25BcmVhOiBlbnVtcy5IaXN0b3J5TmF2aWdhdGlvbkFyZWEgPSBlbnVtcy5IaXN0b3J5TmF2aWdhdGlvbkFyZWEuTm9uZTtcblxuICAgIC8qKlxuICAgICAqIGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHByb3BzXG4gICAgICogQHBhcmFtIHN0YXRlXG4gICAgICovXG4gICAgY29uc3RydWN0b3IocHJvcHM6IE1lbnVXcmFwcGVyUHJvcHMsIHN0YXRlOiBTdGF0ZSkge1xuICAgICAgICBzdXBlcihwcm9wcywgc3RhdGUpO1xuICAgICAgICB0aGlzLmNsb3NlTWVudSA9IHRoaXMuY2xvc2VNZW51LmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMubmF2aWdhdGVUb0hvbWUgPSB0aGlzLm5hdmlnYXRlVG9Db250YWluZXIuYmluZCh0aGlzLCBlbnVtcy5QYWdlQ29udGFpbmVycy5RaWdTZWxlY3Rvcik7XG4gICAgICAgIHRoaXMubmF2aWdhdGVUb01lc3NhZ2UgPSB0aGlzLm5hdmlnYXRlVG9Db250YWluZXIuYmluZCh0aGlzLCBlbnVtcy5QYWdlQ29udGFpbmVycy5NZXNzYWdlKTtcbiAgICAgICAgdGhpcy5uYXZpZ2F0ZVRvQXdhcmRpbmcgPSB0aGlzLm5hdmlnYXRlVG9Db250YWluZXIuYmluZCh0aGlzLCBlbnVtcy5QYWdlQ29udGFpbmVycy5Bd2FyZGluZyk7XG4gICAgICAgIHRoaXMubmF2aWdhdGVUb0xvZ2luID0gbmF2aWdhdGlvbkhlbHBlci5zaG93TG9nb3V0Q29uZmlybWF0aW9uLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMubmF2aWdhdGVUb1JlcG9ydHMgPSB0aGlzLm5hdmlnYXRlVG9Db250YWluZXIuYmluZCh0aGlzLCBlbnVtcy5QYWdlQ29udGFpbmVycy5SZXBvcnRzKTtcbiAgICAgICAgdGhpcy5zZXRCdXN5SW5kaWNhdG9yUHJvcGVydGllcyhlbnVtcy5CdXN5SW5kaWNhdG9ySW52b2tlci5sb2FkaW5nUmVzcG9uc2UsIGZhbHNlKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHsgaXNPcGVuOiBmYWxzZSwgcmVuZGVyZWRPbjogMCwgaXNCdXN5OiBmYWxzZSB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbmRlciBtZXRob2RcbiAgICAgKi9cbiAgICBwdWJsaWMgcmVuZGVyKCkge1xuXG4gICAgICAgIGxldCBidXN5SW5kaWNhdG9yOiBKU1guRWxlbWVudCA9ICg8QnVzeUluZGljYXRvciBpZD17J3Jlc3BvbnNlXycgKyB0aGlzLmJ1c3lJbmRpY2F0b3JJbnZva2VyLnRvU3RyaW5nKCl9XG4gICAgICAgICAgICBpc0J1c3k9e3RoaXMuc3RhdGUuaXNCdXN5fVxuICAgICAgICAgICAga2V5PXsncmVzcG9uc2VfJyArIHRoaXMuYnVzeUluZGljYXRvckludm9rZXIudG9TdHJpbmcoKX1cbiAgICAgICAgICAgIGlzTWFya2luZ0J1c3k9e3RydWV9XG4gICAgICAgICAgICBidXN5SW5kaWNhdG9ySW52b2tlcj17dGhpcy5idXN5SW5kaWNhdG9ySW52b2tlcn1cbiAgICAgICAgICAgIGRvU2hvd0RpYWxvZz17dHJ1ZX1cbiAgICAgICAgICAgIHNob3dCYWNrZ3JvdW5kU2NyZWVuPXt0aGlzLnNob3dCYWNrZ3JvdW5kU2NyZWVuT25CdXN5fSAvPik7XG5cbiAgICAgICAgbGV0IGNsYXNzTmFtZSA9IGNsYXNzTmFtZXMoJ2Ryb3Bkb3duLXdyYXAgaGVhZGVyLWRyb3Bkb3duIG5hdi1vcHRpb25zJyxcbiAgICAgICAgICAgIHsgJ29wZW4nOiB0aGlzLnN0YXRlLmlzT3BlbiB9KTtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGxpIHJvbGU9J21lbnVpdGVtJyBpZD0nbWVudXdyYXBwZXInIGNsYXNzTmFtZT17Y2xhc3NOYW1lfSBhcmlhLWhhc3BvcHVwPSd0cnVlJz5cbiAgICAgICAgICAgICAgICA8YSBpZD0nbWVudS1idXR0b24nIGhyZWY9J2phdmFzY3JpcHQ6dm9pZCgwKSdcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2xvY2FsZVN0b3JlLmluc3RhbmNlLlRyYW5zbGF0ZVRleHQoJ2dlbmVyaWMubmF2aWdhdGlvbi1iYXIubWVudS10b29sdGlwJyl9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuc3RhdGUuaXNPcGVuID8gbnVsbCA6ICgpID0+IHsgdGhpcy5wcm9wcy5oYW5kbGVOYXZpZ2F0aW9uQ2xpY2soKTsgfX0gY2xhc3NOYW1lPSdtZW51LWJ1dHRvbic+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0ncmVsYXRpdmUnPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gaWQ9J21lbnUtaWNvbicgY2xhc3NOYW1lPSdzcHJpdGUtaWNvbiBoYW1idXJnZXItaWNvbic+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSduYXYtdGV4dCc+e2xvY2FsZVN0b3JlLmluc3RhbmNlLlRyYW5zbGF0ZVRleHQoJ2dlbmVyaWMubmF2aWdhdGlvbi1iYXIubWVudScpfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbWVudScgcm9sZT0nbWVudScgYXJpYS1oaWRkZW49J3RydWUnPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbWVudS13cmFwcGVyJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdtZW51LWlubmVyJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbGVmdC1tZW51LWNvbHMnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0gJ21lbnUtcGFnZS1ibG9jayBtZW51LXBhZ2UtbmF2Jz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgyIGlkPSdtZW51LWhlYWRlcic+e2xvY2FsZVN0b3JlLmluc3RhbmNlLlRyYW5zbGF0ZVRleHQoJ2dlbmVyaWMubmF2aWdhdGlvbi1iYXIubWVudScpfTwvaDI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx1bCBjbGFzc05hbWU9J21lbnUtaG9sZGVyIHF1aWNrLW1lbnUnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPE1lbnVMaW5rIGlkPSdtZW51TGlua19Ib21lJyBrZXk9J21lbnVMaW5rX0hvbWVfa2V5J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbnVMaW5rTmFtZT17bG9jYWxlU3RvcmUuaW5zdGFuY2UuVHJhbnNsYXRlVGV4dCgnZ2VuZXJpYy5uYXZpZ2F0aW9uLW1lbnUuaG9tZScpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uTWVudUxpbmtDbGljaz17dGhpcy5uYXZpZ2F0ZVRvSG9tZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1Zpc2libGU9e3RydWV9IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8TWVudUxpbmsgaWQ9J21lbnVMaW5rX1JlcG9ydHMnIGtleT0nbWVudUxpbmtfUmVwb3J0c19rZXknXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVudUxpbmtOYW1lPXtsb2NhbGVTdG9yZS5pbnN0YW5jZS5UcmFuc2xhdGVUZXh0KCdnZW5lcmljLm5hdmlnYXRpb24tbWVudS5yZXBvcnRzJyl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25NZW51TGlua0NsaWNrPXt0aGlzLm5hdmlnYXRlVG9SZXBvcnRzfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzVmlzaWJsZT17dGhpcy5jYW5SZW5kZXJSZXBvcnRzfSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPE1lbnVMaW5rIGlkPSdtZW51TGlua19JbmJveCcga2V5PSdtZW51TGlua19JbmJveF9rZXknXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVudUxpbmtOYW1lPXtsb2NhbGVTdG9yZS5pbnN0YW5jZS5UcmFuc2xhdGVUZXh0KCdtZXNzYWdpbmcubWVzc2FnZS1saXN0cy50b3AtcGFuZWwuaW5ib3gtdGFiJyl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25NZW51TGlua0NsaWNrPXt0aGlzLm5hdmlnYXRlVG9NZXNzYWdlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzVmlzaWJsZT17dHJ1ZX0gLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxNZW51TGluayBpZD0nbWVudUxpbmtfQXdhcmRpbmcnIGtleT0nbWVudUxpbmtfQXdhcmRpbmdfa2V5J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbnVMaW5rTmFtZT17bG9jYWxlU3RvcmUuaW5zdGFuY2UuVHJhbnNsYXRlVGV4dCgnYXdhcmRpbmcuZ2VuZXJpYy5hd2FyZGluZycpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uTWVudUxpbmtDbGljaz17dGhpcy5uYXZpZ2F0ZVRvQXdhcmRpbmd9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNWaXNpYmxlPXthd2FyZGluZ1N0b3JlLmluc3RhbmNlLmhhc0F3YXJkaW5nQWNjZXNzfSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPE1lbnVMaW5rIGlkPSdtZW51TGlua19Mb2dvdXQnIGtleT0nbWVudUxpbmtfTG9nb3V0X2tleSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW51TGlua05hbWU9e2xvY2FsZVN0b3JlLmluc3RhbmNlLlRyYW5zbGF0ZVRleHQoJ2dlbmVyaWMudXNlci1tZW51LnByb2ZpbGUtc2VjdGlvbi5sb2dvdXQtYnV0dG9uJyl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25NZW51TGlua0NsaWNrPXt0aGlzLm5hdmlnYXRlVG9Mb2dpbn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1Zpc2libGU9e3RydWV9IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5zZWFyY2hSZXNwb25zZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5yZWNlbnRIaXN0b3J5fVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8YSBocmVmPSdqYXZhc2NyaXB0OnZvaWQoMCknIGlkPSdtZW51LWNsb3NlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdtZW51LWNsb3NlJyBvbkNsaWNrPXt0aGlzLmNsb3NlTWVudX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtsb2NhbGVTdG9yZS5pbnN0YW5jZS5UcmFuc2xhdGVUZXh0KCdnZW5lcmljLm5hdmlnYXRpb24tbWVudS5jbG9zZScpfT5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtsb2NhbGVTdG9yZS5pbnN0YW5jZS5UcmFuc2xhdGVUZXh0KCdnZW5lcmljLm5hdmlnYXRpb24tbWVudS5jbG9zZScpfTwvYT5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICB7YnVzeUluZGljYXRvcn1cbiAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29tcG9uZW50IHdpbGwgVW5tb3VudFxuICAgICAqL1xuICAgIHB1YmxpYyBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgICAgbmF2aWdhdGlvblN0b3JlLmluc3RhbmNlLnJlbW92ZUxpc3RlbmVyKG5hdmlnYXRpb25TdG9yZS5OYXZpZ2F0aW9uU3RvcmUuTUVOVV9WSVNJQklMSVRZX0VWRU5ULCB0aGlzLm1lbnVWaXNpYmlsaXR5KTtcbiAgICAgICAgd29ya2xpc3RTdG9yZS5pbnN0YW5jZS5yZW1vdmVMaXN0ZW5lcih3b3JrbGlzdFN0b3JlLldvcmtMaXN0U3RvcmUuV09SS0xJU1RfSElTVE9SWV9JTkZPX1VQREFURUQsIHRoaXMubG9hZFJlY2VudFdvcmtsaXN0KTtcbiAgICAgICAgcWlnU3RvcmUuaW5zdGFuY2UucmVtb3ZlTGlzdGVuZXIocWlnU3RvcmUuUWlnU3RvcmUuUUlHX1NFTEVDVEVEX0ZST01fSElTVE9SWV9FVkVOVCwgdGhpcy5vblFpZ1NlbGVjdGVkRnJvbUhpc3RvcnkpO1xuICAgICAgICB0ZWFtTWFuYWdlbWVudFN0b3JlLmluc3RhbmNlLnJlbW92ZUxpc3RlbmVyKHRlYW1NYW5hZ2VtZW50U3RvcmUuVGVhbU1hbmFnZW1lbnRTdG9yZS5URUFNX01BTkFHRU1FTlRfRVhBTUlORVJfVkFMSURBVEVEX0VWRU5ULFxuICAgICAgICAgICAgdGhpcy5leGFtaW5lclZhbGlkYXRlZCk7XG4gICAgICAgIHRlYW1NYW5hZ2VtZW50U3RvcmUuaW5zdGFuY2UucmVtb3ZlTGlzdGVuZXIodGVhbU1hbmFnZW1lbnRTdG9yZS5UZWFtTWFuYWdlbWVudFN0b3JlLk9QRU5fVEVBTV9NQU5BR0VNRU5UX0VWRU5ULFxuICAgICAgICAgICAgdGhpcy5vcGVuVGVhbU1hbmFnZW1lbnRGcm9tUG9wdXApO1xuICAgICAgICByZXNwb25zZVN0b3JlLmluc3RhbmNlLnJlbW92ZUxpc3RlbmVyKHJlc3BvbnNlU3RvcmUuUmVzcG9uc2VTdG9yZS5SRVNQT05TRV9TRUFSQ0hfREFUQV9SRUNFSVZFRF9FVkVOVCxcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhdGVTZWFyY2hSZXNwb25zZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29tcG9uZW50IGRpZCBtb3VudFxuICAgICAqL1xuICAgIHB1YmxpYyBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgbmF2aWdhdGlvblN0b3JlLmluc3RhbmNlLmFkZExpc3RlbmVyKG5hdmlnYXRpb25TdG9yZS5OYXZpZ2F0aW9uU3RvcmUuTUVOVV9WSVNJQklMSVRZX0VWRU5ULCB0aGlzLm1lbnVWaXNpYmlsaXR5KTtcbiAgICAgICAgd29ya2xpc3RTdG9yZS5pbnN0YW5jZS5hZGRMaXN0ZW5lcih3b3JrbGlzdFN0b3JlLldvcmtMaXN0U3RvcmUuV09SS0xJU1RfSElTVE9SWV9JTkZPX1VQREFURUQsIHRoaXMubG9hZFJlY2VudFdvcmtsaXN0KTtcbiAgICAgICAgcWlnU3RvcmUuaW5zdGFuY2UuYWRkTGlzdGVuZXIocWlnU3RvcmUuUWlnU3RvcmUuUUlHX1NFTEVDVEVEX0ZST01fSElTVE9SWV9FVkVOVCwgdGhpcy5vblFpZ1NlbGVjdGVkRnJvbUhpc3RvcnkpO1xuICAgICAgICB0ZWFtTWFuYWdlbWVudFN0b3JlLmluc3RhbmNlLmFkZExpc3RlbmVyKHRlYW1NYW5hZ2VtZW50U3RvcmUuVGVhbU1hbmFnZW1lbnRTdG9yZS5URUFNX01BTkFHRU1FTlRfRVhBTUlORVJfVkFMSURBVEVEX0VWRU5ULFxuICAgICAgICAgICAgdGhpcy5leGFtaW5lclZhbGlkYXRlZCk7XG4gICAgICAgIHRlYW1NYW5hZ2VtZW50U3RvcmUuaW5zdGFuY2UuYWRkTGlzdGVuZXIodGVhbU1hbmFnZW1lbnRTdG9yZS5UZWFtTWFuYWdlbWVudFN0b3JlLk9QRU5fVEVBTV9NQU5BR0VNRU5UX0VWRU5ULFxuICAgICAgICAgICAgdGhpcy5vcGVuVGVhbU1hbmFnZW1lbnRGcm9tUG9wdXApO1xuICAgICAgICByZXNwb25zZVN0b3JlLmluc3RhbmNlLmFkZExpc3RlbmVyKHJlc3BvbnNlU3RvcmUuUmVzcG9uc2VTdG9yZS5SRVNQT05TRV9TRUFSQ0hfREFUQV9SRUNFSVZFRF9FVkVOVCxcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhdGVTZWFyY2hSZXNwb25zZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogdXNlZCB0byBzZXQgdGhlIHZpc2liaWxpdHkgb2YgbWVudSBXcmFwcGVyXG4gICAgICovXG4gICAgcHJpdmF0ZSBtZW51VmlzaWJpbGl0eSA9IChkb1Zpc2libGU6IGJvb2xlYW4gPSB0cnVlKTogdm9pZCA9PiB7XG5cbiAgICAgICAgbGV0IG1lc3NhZ2UgPSBkb1Zpc2libGUgPyAnT3BlbiBtZW51IGV2ZW50IHRyaWdnZXJlZCcgOiAnQ2xvc2UgbWVudSBldmVudCB0cmlnZ2VyZWQuJztcbiAgICAgICAgbWVzc2FnZSA9IG1lc3NhZ2UgKyAnIEN1cnJlbnQgY29udGFpbmVyID0+ICcgK1xuICAgICAgICAgICAgZW51bXMuUGFnZUNvbnRhaW5lcnNbbmF2aWdhdGlvblN0b3JlLmluc3RhbmNlLmNvbnRhaW5lclBhZ2VdO1xuICAgICAgICAvLyBsb2dnaW5nIG1lbnUgYWN0aW9uIGluIGdvb2dsZSBhbmFseXRpY3Mgb3IgYXBwbGljYXRpb24gaW5zaWdodCBiYXNlZCBvbiB0aGUgY29uZmlndXJhdGlvblxuICAgICAgICBuZXcgYXVkaXRMb2dnaW5nSGVscGVyKCkubG9nSGVscGVyLmxvZ0V2ZW50T25NZW51QWN0aW9uKG1lc3NhZ2UpO1xuXG4gICAgICAgIGlmIChtYXJrZXJPcGVyYXRpb25Nb2RlRmFjdG9yeS5vcGVyYXRpb25Nb2RlLmlzU2V0TWFya2luZ0luUHJvZ3Jlc3NBbmRNYXJrRW50cnlTZWxlY3RlZFJlcXVpcmVkICYmIGRvVmlzaWJsZSkge1xuICAgICAgICAgICAga2V5RG93bkhlbHBlci5pbnN0YW5jZS5EZUFjdGl2YXRlKGVudW1zLk1hcmtFbnRyeURlYWN0aXZhdG9yLk1lbnUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgaXNPcGVuOiBkb1Zpc2libGVcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gTG9nIG9wZW5lZCByZXNwb25zZSBkZXRhaWxzIHRvIGtlZXAgYXMgYXVkaXQuXG4gICAgICAgIHRoaXMubG9nZ2VyLmxvZ1Jlc3BvbnNlT3BlbkF1ZGl0KGxvZ2dlckNvbnN0YW50cy5OQVZJR0FUSU9OX1JFQVNPTl9NRU5VX1NDUkVFTixcbiAgICAgICAgICAgIGxvZ2dlckNvbnN0YW50cy5OQVZJR0FUSU9OX1JFQVNPTl9NRU5VX0NMSUNLLFxuICAgICAgICAgICAgcmVzcG9uc2VTdG9yZSAmJiByZXNwb25zZVN0b3JlLmluc3RhbmNlLnNlbGVjdGVkRGlzcGxheUlkID8gcmVzcG9uc2VTdG9yZS5pbnN0YW5jZS5zZWxlY3RlZERpc3BsYXlJZC50b1N0cmluZygpIDogJycsXG4gICAgICAgICAgICByZXNwb25zZVN0b3JlICYmIHJlc3BvbnNlU3RvcmUuaW5zdGFuY2Uuc2VsZWN0ZWRSZXNwb25zZU1vZGUgIT09IHVuZGVmaW5lZCA/XG4gICAgICAgICAgICAgICAgZW51bXMuUmVzcG9uc2VNb2RlW3Jlc3BvbnNlU3RvcmUuaW5zdGFuY2Uuc2VsZWN0ZWRSZXNwb25zZU1vZGVdLnRvU3RyaW5nKCkgOiAnJyk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIHVzZWQgdG8gY2xvc2UgbWVudSBXcmFwcGVyXG4gICAgICovXG4gICAgcHJpdmF0ZSBjbG9zZU1lbnUgPSAoKTogdm9pZCA9PiB7XG4gICAgICAgIGlmIChtYXJrZXJPcGVyYXRpb25Nb2RlRmFjdG9yeS5vcGVyYXRpb25Nb2RlLmlzU2V0TWFya2luZ0luUHJvZ3Jlc3NBbmRNYXJrRW50cnlTZWxlY3RlZFJlcXVpcmVkKSB7XG4gICAgICAgICAgICBtYXJraW5nQWN0aW9uQ3JlYXRvci5zZXRNYXJrRW50cnlTZWxlY3RlZChmYWxzZSk7XG4gICAgICAgICAgICBrZXlEb3duSGVscGVyLmluc3RhbmNlLkFjdGl2YXRlKGVudW1zLk1hcmtFbnRyeURlYWN0aXZhdG9yLk1lbnUpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IG1lc3NhZ2UgPSAnQ2xvc2UgbWVudSBldmVudCB0cmlnZ2VyZWQuJztcbiAgICAgICAgbWVzc2FnZSA9IG1lc3NhZ2UgKyAnIEN1cnJlbnQgY29udGFpbmVyID0+ICcgK1xuICAgICAgICAgICAgZW51bXMuUGFnZUNvbnRhaW5lcnNbbmF2aWdhdGlvblN0b3JlLmluc3RhbmNlLmNvbnRhaW5lclBhZ2VdO1xuICAgICAgICAvLyBsb2dnaW5nIG1lbnUgYWN0aW9uIGluIGdvb2dsZSBhbmFseXRpY3Mgb3IgYXBwbGljYXRpb24gaW5zaWdodCBiYXNlZCBvbiB0aGUgY29uZmlndXJhdGlvblxuICAgICAgICBuZXcgYXVkaXRMb2dnaW5nSGVscGVyKCkubG9nSGVscGVyLmxvZ0V2ZW50T25NZW51QWN0aW9uKG1lc3NhZ2UpO1xuICAgICAgICAvLyBDbGVhcmVkIHRoZSBzZWFyY2ggdGV4dCB3aGlsZSBjbGlja2luZyBjbG9zZSBidXR0b24uXG4gICAgICAgIHRoaXMuc2VhcmNoVGV4dCA9ICcnO1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIGlzT3BlbjogZmFsc2VcbiAgICAgICAgfSk7XG5cblxuICAgICAgICAvLyBMb2cgb3BlbmVkIHJlc3BvbnNlIGRldGFpbHMgdG8ga2VlcCBhcyBhdWRpdC5cbiAgICAgICAgdGhpcy5sb2dnZXIubG9nUmVzcG9uc2VPcGVuQXVkaXQobG9nZ2VyQ29uc3RhbnRzLk5BVklHQVRJT05fUkVBU09OX01FTlVfU0NSRUVOLFxuICAgICAgICAgICAgbG9nZ2VyQ29uc3RhbnRzLk5BVklHQVRJT05fUkVBU09OX01FTlVfQ0xPU0VfQ0xJQ0ssXG4gICAgICAgICAgICByZXNwb25zZVN0b3JlICYmIHJlc3BvbnNlU3RvcmUuaW5zdGFuY2Uuc2VsZWN0ZWREaXNwbGF5SWQgPyByZXNwb25zZVN0b3JlLmluc3RhbmNlLnNlbGVjdGVkRGlzcGxheUlkLnRvU3RyaW5nKCkgOiAnJyxcbiAgICAgICAgICAgIHJlc3BvbnNlU3RvcmUgJiYgcmVzcG9uc2VTdG9yZS5pbnN0YW5jZS5zZWxlY3RlZFJlc3BvbnNlTW9kZSAhPT0gdW5kZWZpbmVkID9cbiAgICAgICAgICAgICAgICBlbnVtcy5SZXNwb25zZU1vZGVbcmVzcG9uc2VTdG9yZS5pbnN0YW5jZS5zZWxlY3RlZFJlc3BvbnNlTW9kZV0udG9TdHJpbmcoKSA6ICcnKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogdXNlZCB0byBuYXZpZ2F0ZSB0byBwYXJ0aWN1bGFyIGNvbnRhaW5lclxuICAgICAqL1xuICAgIHByaXZhdGUgbmF2aWdhdGVUb0NvbnRhaW5lcihjb250YWluZXI6IGVudW1zLlBhZ2VDb250YWluZXJzKSB7XG4gICAgICAgIGlmICh0aGlzLmRvTmF2aWdhdGVDb250YWluZXIoY29udGFpbmVyKSkge1xuICAgICAgICAgICAgaWYgKGNvbnRhaW5lciAhPT0gZW51bXMuUGFnZUNvbnRhaW5lcnMuUmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICBtYXJraW5nQWN0aW9uQ3JlYXRvci5zZXRNYXJraW5nSW5Qcm9ncmVzcyhmYWxzZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHJlc2V0dGluZyB0aGUgbWFya2luZyBjaGVjayBtb2RlIG9uIG1lbnUgaXRlbSBjbGlja1xuICAgICAgICAgICAgbWFya2luZ0NoZWNrQWN0aW9uQ3JlYXRvci50b2dnbGVNYXJraW5nQ2hlY2tNb2RlKGZhbHNlKTtcblxuICAgICAgICAgICAgLy8gaGFuZGxlIG9mZmxpbmUgd2hlbiB0cnkgdG8gbmF2aWdhdGUgZnJvbSBtZW51XG4gICAgICAgICAgICBpZiAoIWFwcGxpY2F0aW9uU3RvcmUuaW5zdGFuY2UuaXNPbmxpbmUpIHtcbiAgICAgICAgICAgICAgICBhcHBsaWNhdGlvbkFjdGlvbkNyZWF0b3IuY2hlY2tBY3Rpb25JbnRlcnJ1cHRlZCgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGNvbnRhaW5lcikge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIGVudW1zLlBhZ2VDb250YWluZXJzLlFpZ1NlbGVjdG9yOlxuICAgICAgICAgICAgICAgICAgICAgICAgbmF2aWdhdGlvbkhlbHBlci5sb2FkUWlnU2VsZWN0b3IoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIGVudW1zLlBhZ2VDb250YWluZXJzLk1lc3NhZ2U6XG4gICAgICAgICAgICAgICAgICAgICAgICBuYXZpZ2F0aW9uSGVscGVyLmxvYWRNZXNzYWdlUGFnZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgZW51bXMuUGFnZUNvbnRhaW5lcnMuTG9naW46XG4gICAgICAgICAgICAgICAgICAgICAgICBuYXZpZ2F0aW9uSGVscGVyLmxvYWRMb2dpblBhZ2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIGVudW1zLlBhZ2VDb250YWluZXJzLlJlcG9ydHM6XG4gICAgICAgICAgICAgICAgICAgICAgICBuYXZpZ2F0aW9uSGVscGVyLmxvYWRSZXBvcnRzUGFnZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgZW51bXMuUGFnZUNvbnRhaW5lcnMuQXdhcmRpbmc6XG4gICAgICAgICAgICAgICAgICAgICAgICBuYXZpZ2F0aW9uSGVscGVyLmxvYWRBd2FyZGluZ1BhZ2UodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsZXQgbWVzc2FnZSA9ICdTZWxlY3RlZCB0aGUgc2FtZSBjb250YWluZXIgJyArXG4gICAgICAgICAgICAgICAgZW51bXMuUGFnZUNvbnRhaW5lcnNbY29udGFpbmVyXS50b1N0cmluZygpICtcbiAgICAgICAgICAgICAgICAnIGZyb20gbWVudSB3aXRoIENsb3NlIG1lbnUgZXZlbnQgdHJpZ2dlcmVkLic7XG4gICAgICAgICAgICBtZXNzYWdlID0gbWVzc2FnZSArICcgQ3VycmVudCBjb250YWluZXIgPT4gJyArXG4gICAgICAgICAgICAgICAgZW51bXMuUGFnZUNvbnRhaW5lcnNbbmF2aWdhdGlvblN0b3JlLmluc3RhbmNlLmNvbnRhaW5lclBhZ2VdO1xuICAgICAgICAgICAgLy8gbG9nZ2luZyBtZW51IGFjdGlvbiBpbiBnb29nbGUgYW5hbHl0aWNzIG9yIGFwcGxpY2F0aW9uIGluc2lnaHQgYmFzZWQgb24gdGhlIGNvbmZpZ3VyYXRpb25cbiAgICAgICAgICAgIG5ldyBhdWRpdExvZ2dpbmdIZWxwZXIoKS5sb2dIZWxwZXIubG9nRXZlbnRPbk1lbnVBY3Rpb24obWVzc2FnZSk7XG5cbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgIGlzT3BlbjogZmFsc2VcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogcmV0dXJuIGZhbHNlIGlmIGN1cnJlbnQgYW5kIG5hdmlnYXRlVG8gY29uYXRhaW5lciBhcmUgc2FtZVxuICAgICAqL1xuICAgIHByaXZhdGUgZG9OYXZpZ2F0ZUNvbnRhaW5lcihuYXZpZ2F0ZVRvQ29udGFpbmVyOiBlbnVtcy5QYWdlQ29udGFpbmVycyk6IGJvb2xlYW4ge1xuICAgICAgICBsZXQgX2N1cnJlbnRDb250YWluZXI6IGVudW1zLlBhZ2VDb250YWluZXJzID0gZW51bXMuUGFnZUNvbnRhaW5lcnMuTm9uZTtcbiAgICAgICAgX2N1cnJlbnRDb250YWluZXIgPSBuYXZpZ2F0aW9uU3RvcmUuaW5zdGFuY2UuY29udGFpbmVyUGFnZTtcbiAgICAgICAgcmV0dXJuIG5hdmlnYXRlVG9Db250YWluZXIgIT09IF9jdXJyZW50Q29udGFpbmVyO1xuICAgIH1cblxuXG4gICAgcHJpdmF0ZSBnZXQgcmVjZW50SGlzdG9yeSgpIHtcbiAgICAgICAgbGV0IF9yZWNlbnRIaXN0b3J5OiBJbW11dGFibGUuTGlzdDxoaXN0b3J5SXRlbT4gPSBJbW11dGFibGUuTGlzdDxoaXN0b3J5SXRlbT4oKTtcblxuICAgICAgICBsZXQgaGlzdG9yeUl0ZW1zOiBoaXN0b3J5SXRlbVtdID0gW107XG4gICAgICAgIG5hdmlnYXRpb25TdG9yZS5pbnN0YW5jZS5nZXRSZWNlbnRIaXN0b3J5LmZvckVhY2gocWlnSW5IaXN0b3J5ID0+IHtcbiAgICAgICAgICAgIGlmIChxaWdTdG9yZS5pbnN0YW5jZS5IaWRkZW5RSUdzLmluZGV4T2YocWlnSW5IaXN0b3J5LnFpZ0lkKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICBsZXQgcWlnID0gcWlnU3RvcmUuaW5zdGFuY2UuZ2V0UWlnU3VtbWFyeShxaWdJbkhpc3RvcnkucWlnSWQpO1xuICAgICAgICAgICAgICAgIGlmIChxaWdTdG9yZS5pbnN0YW5jZS5nZXRPdmVydmlld0RhdGEuaGFzQW55UWlnV2l0aEhpZGVJbk92ZXJ2aWV3V2hlbk5vV29ya0NDT25cbiAgICAgICAgICAgICAgICAgICAgJiYgcWlnLmlzSGlkZUluT3ZlcnZpZXdXaGVuTm9Xb3JrQ0NPTikge1xuICAgICAgICAgICAgICAgICAgICBxaWdJbkhpc3RvcnkubXlNYXJraW5nID0gcWlnLmlzTWFya2luZ0VuYWJsZWQgPyBxaWdJbkhpc3RvcnkubXlNYXJraW5nIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICBxaWdJbkhpc3RvcnkuaXNNYXJraW5nRW5hYmxlZCA9IHFpZy5pc01hcmtpbmdFbmFibGVkO1xuICAgICAgICAgICAgICAgICAgICBxaWdJbkhpc3RvcnkudGVhbSA9IHFpZy5pc1RlYW1NYW5hZ2VtZW50RW5hYmxlZCA/IHFpZ0luSGlzdG9yeS50ZWFtIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICBxaWdJbkhpc3RvcnkuaXNUZWFtTWFuYWdlbWVudEVuYWJsZWQgPSBxaWcuaXNUZWFtTWFuYWdlbWVudEVuYWJsZWQ7XG4gICAgICAgICAgICAgICAgICAgIHFpZ0luSGlzdG9yeS5pc1N0YW5kYXJkaXNhdGlvblNldHVwRW5hYmxlZCA9IChxaWcuaXNTdGFuZGFyZGlzYXRpb25TZXR1cEJ1dHRvblZpc2libGUgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIHFpZy5pc1N0YW5kYXJkaXNhdGlvblNldHVwTGlua1Zpc2libGUpO1xuICAgICAgICAgICAgICAgICAgICBxaWdJbkhpc3Rvcnkuc3RhbmRhcmRpc2F0aW9uU2V0dXAgPSAocWlnSW5IaXN0b3J5LmlzU3RhbmRhcmRpc2F0aW9uU2V0dXBFbmFibGVkID9cbiAgICAgICAgICAgICAgICAgICAgICAgIHFpZ0luSGlzdG9yeS5zdGFuZGFyZGlzYXRpb25TZXR1cCA6IHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGhpc3RvcnlJdGVtcy5wdXNoKHFpZ0luSGlzdG9yeSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBfcmVjZW50SGlzdG9yeSA9IEltbXV0YWJsZS5MaXN0KGhpc3RvcnlJdGVtcyk7XG4gICAgICAgIGxldCB0aGF0ID0gdGhpcztcbiAgICAgICAgbGV0IHJlY2VudEl0ZW1zID0gX3JlY2VudEhpc3RvcnkubWFwKChyZWNlbnRJdGVtOiBoaXN0b3J5SXRlbSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8TWVudUxpbmtcbiAgICAgICAgICAgICAgICAgICAgbWVudVN0cmluZz17cmVjZW50SXRlbS5xaWdOYW1lfVxuICAgICAgICAgICAgICAgICAgICBvbk15TWFya2luZ0NsaWNrPXtyZWNlbnRJdGVtLm15TWFya2luZyA/XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGF0Lm5hdmlnYXRlVG9SZWNlbnRIaXN0b3J5TXlNYXJraW5nLmJpbmQodGhhdCwgcmVjZW50SXRlbSwgbnVsbCwgbnVsbCkgOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVjZW50SXRlbS5pc01hcmtpbmdFbmFibGVkID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0Lm5hdmlnYXRlVG9SZWNlbnRIaXN0b3J5TXlNYXJraW5nLmJpbmQodGhhdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjZW50SXRlbS5xaWdJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjZW50SXRlbS5xdWVzdGlvblBhcGVyUGFydElkKSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgb25UZWFtTWFuYWdlbWVudENsaWNrPXtyZWNlbnRJdGVtLnRlYW0gP1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5uYXZpZ2F0ZVRvUmVjZW50SGlzdG9yeVRlYW1NYW5hZ2VtZW50LmJpbmQodGhhdCwgcmVjZW50SXRlbSwgbnVsbCwgbnVsbCwgbnVsbCkgOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVjZW50SXRlbS5pc1RlYW1NYW5hZ2VtZW50RW5hYmxlZCA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5uYXZpZ2F0ZVRvUmVjZW50SGlzdG9yeVRlYW1NYW5hZ2VtZW50LmJpbmQodGhhdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjZW50SXRlbS5xaWdJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjZW50SXRlbS5xdWVzdGlvblBhcGVyUGFydElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWNlbnRJdGVtLmV4YW1pbmVyUm9sZUlkKSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbH1cbiAgICAgICAgICAgICAgICAgICAgb25TdGFuZGFyZGlzYXRpb25TZXR1cENsaWNrPXtyZWNlbnRJdGVtLnN0YW5kYXJkaXNhdGlvblNldHVwID9cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQubmF2aWdhdGVUb1JlY2VudEhpc3RvcnlTdGFuZGFyZGlzYXRpb25TZXR1cC5iaW5kKHRoYXQsIHJlY2VudEl0ZW0sIG51bGwpIDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY2VudEl0ZW0uaXNTdGFuZGFyZGlzYXRpb25TZXR1cEVuYWJsZWQgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQubmF2aWdhdGVUb1JlY2VudEhpc3RvcnlTdGFuZGFyZGlzYXRpb25TZXR1cC5iaW5kKHRoYXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY2VudEl0ZW0ucWlnSWQpIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsfVxuICAgICAgICAgICAgICAgICAgICBpc1JlY2VudEhpc3Rvcnk9e3RydWV9XG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkTGFuZ3VhZ2U9e3RoYXQucHJvcHMuc2VsZWN0ZWRMYW5ndWFnZX1cbiAgICAgICAgICAgICAgICAgICAgcmVjZW50SXRlbT17cmVjZW50SXRlbX1cbiAgICAgICAgICAgICAgICAgICAgaWQ9eydtZW51TGlua18nICsgcmVjZW50SXRlbS5xaWdJZH1cbiAgICAgICAgICAgICAgICAgICAga2V5PXsnbWVudUxpbmtfa2V5XycgKyByZWNlbnRJdGVtLnFpZ0lkfS8+KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdyaWdodC1tZW51LWNvbHMnPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdtZW51LXBhZ2UtYmxvY2sgbWVudS1wYWdlLXJlY2VudCc+XG4gICAgICAgICAgICAgICAgPGgyIGlkPSdyZWNlbnQnPntsb2NhbGVTdG9yZS5pbnN0YW5jZS5UcmFuc2xhdGVUZXh0KCdnZW5lcmljLm5hdmlnYXRpb24tbWVudS5yZWNlbnQnKX08L2gyPlxuICAgICAgICAgICAgICAgIDx1bCBjbGFzc05hbWU9J21lbnUtaG9sZGVyIHJlY2VudC1pdGVtcycgaWQ9J21lbnVIb2xkZXInPlxuICAgICAgICAgICAgICAgICAgICB7cmVjZW50SXRlbXN9XG4gICAgICAgICAgICAgICAgPC91bD5cbiAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldCBzZWFyY2hSZXNwb25zZSgpIHtcbiAgICAgICAgbGV0IHNlYXJjaFBhbmVsOiBKU1guRWxlbWVudCA9IHRoaXMuaXNTZWFyY2hQYW5lbFZpc2libGUoKSA/XG4gICAgICAgICAgICAoICA8TWVudVNlYXJjaFBhbmVsXG4gICAgICAgICAgICAgICAgICAgIGlkPSdzZWFyY2gtcGFuZWwnXG4gICAgICAgICAgICAgICAgICAgIGtleT0nc2VhcmNoLXBhbmVsLWtleSdcbiAgICAgICAgICAgICAgICAgICAgb25TZWFyY2g9e3RoaXMub25TZWFyY2h9XG4gICAgICAgICAgICAgICAgICAgIG9uU2VhcmNoQ2xpY2s9e3RoaXMub25TZWFyY2hDbGlja31cbiAgICAgICAgICAgICAgICAgICAgcWlnTmFtZT17dGhpcy5nZXRGb3JtYXR0ZWRRSUdOYW1lKCl9XG4gICAgICAgICAgICAgICAgICAgIHNlYXJjaFRleHQgPSB7dGhpcy5zZWFyY2hUZXh0fVxuICAgICAgICAgICAgICAgIC8+KSA6IG51bGw7XG5cbiAgICAgICAgcmV0dXJuIHNlYXJjaFBhbmVsO1xuICAgIH1cblxuICAgIC8qIENhbGxlZCB3aGVuIHNlYXJjaCB0ZXh0IGNoYW5nZWQgKi9cbiAgICBwcml2YXRlIG9uU2VhcmNoID0gKHNlYXJjaFRleHQ6IHN0cmluZykgPT4ge1xuICAgICAgICB0aGlzLnNlYXJjaFRleHQgPSBzZWFyY2hUZXh0O1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtyZW5kZXJlZE9uOiBEYXRlLm5vdygpfSk7XG4gICAgfVxuXG4gICAgLyogQ2FsbGVkIHdoZW4gc2VhcmNoIGJ1dHRvbiBjbGlja2VkICovXG4gICAgcHJpdmF0ZSBvblNlYXJjaENsaWNrID0gKCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5zZWFyY2hUZXh0ICYmIHRoaXMuc2VhcmNoVGV4dCAhPT0gJycgJiYgdGhpcy5pc1ZhbGlkU2VhcmNoVGV4dCh0aGlzLnNlYXJjaFRleHQpKSB7XG4gICAgICAgICAgICBpZiAocWlnU3RvcmUuaW5zdGFuY2Uuc2VsZWN0ZWRRSUdGb3JNYXJrZXJPcGVyYXRpb24pIHtcbiAgICAgICAgICAgICAgICBsZXQgc2VsZWN0ZWRRSUdGb3JNYXJrZXJPcGVyYXRpb24gPSBxaWdTdG9yZS5pbnN0YW5jZS5zZWxlY3RlZFFJR0Zvck1hcmtlck9wZXJhdGlvbjtcbiAgICAgICAgICAgICAgICBzZWFyY2hSZXNwb25zZUFjdGlvbkNyZWF0b3IuZ2V0U2VhcmNoZWRSZXNwb25zZShcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRRSUdGb3JNYXJrZXJPcGVyYXRpb24ubWFya1NjaGVtZUdyb3VwSWQsXG4gICAgICAgICAgICAgICAgICAgIHFpZ1N0b3JlLmluc3RhbmNlLmdldFNlbGVjdGVkUUlHRm9yVGhlTG9nZ2VkSW5Vc2VyLmV4YW1pbmVyUm9sZUlkLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaFRleHQpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0QnVzeUluZGljYXRvclByb3BlcnRpZXMoZW51bXMuQnVzeUluZGljYXRvckludm9rZXIubG9hZGluZ1Jlc3BvbnNlLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgLy8gVGhlIGJlbG93IGNvbmRpdGlvbiB3aWxsIGJlIHJlbW92ZWQgYXMgcGFydCBvZiBzZWFyY2ggcmlnIGZyb20gcmVzcG9uc2Ugc2NyZWVuXG4gICAgICAgICAgICAgICAgLy8gZmVhdHVyZSBpbXBsZW1lbnRhdGlvbi5cbiAgICAgICAgICAgICAgICBpZiAobmF2aWdhdGlvblN0b3JlLmluc3RhbmNlLmNvbnRhaW5lclBhZ2UgIT09IGVudW1zLlBhZ2VDb250YWluZXJzLlJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBpc0J1c3k6IHRydWUgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuXHRcdFx0XHRzZWFyY2hSZXNwb25zZUFjdGlvbkNyZWF0b3Iuc2hvd09ySGlkZVJpZ05vdEZvdW5kUG9wdXAodHJ1ZSk7XG5cdFx0fVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFZhbGlkYXRlIHRoZSBlbnRlcmVkIHNlYXJjaCB0ZXh0LlxuICAgICAqL1xuXHRwcml2YXRlIGlzVmFsaWRTZWFyY2hUZXh0KHNlYXJjaFRleHQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuXHRcdGxldCBkaXNwbGF5SWQgOiBudW1iZXIgPSBNYXRoLmZsb29yKE51bWJlcihzZWFyY2hUZXh0KSk7XG5cdFx0cmV0dXJuIGRpc3BsYXlJZCAhPT0gSW5maW5pdHkgJiYgU3RyaW5nKGRpc3BsYXlJZCkgPT09IHNlYXJjaFRleHQgJiYgZGlzcGxheUlkID49IDA7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIG5hdmlnYXRlIHRvIHdvcmtsaXN0IGJhc2VkIG9uIGhpc3RvcnkgaXRlbVxuICAgICAqL1xuICAgIHByaXZhdGUgbmF2aWdhdGVUb1JlY2VudEhpc3RvcnlNeU1hcmtpbmcoX2hpc3RvcnlJdGVtPzogaGlzdG9yeUl0ZW0sIF9xaWdJZD86IG51bWJlciwgX3F1ZXN0aW9uUGFwZXJQYXJ0SWQ/OiBudW1iZXIpIHtcbiAgICAgICAgLypIYW5kbGVzIHRoZSBzY2VuYXJpbyB3aGVyZSB1c2VyIGlzIG9mZmxpbmUgb24gY2xpY2tpbmcgb24gaGlzdG9yeSBsaW5rIGluIG1lbnUqL1xuICAgICAgICBpZiAoIWFwcGxpY2F0aW9uU3RvcmUuaW5zdGFuY2UuaXNPbmxpbmUpIHtcbiAgICAgICAgICAgIGFwcGxpY2F0aW9uQWN0aW9uQ3JlYXRvci5jaGVja0FjdGlvbkludGVycnVwdGVkKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBNZW51IGhpc3RvcnkgbmF2aWdhdGlvbiB0byBteSBtYXJraW5nXG4gICAgICAgICAgICB0aGlzLmhpc3RvcnlOYXZpZ2F0aW9uQXJlYSA9IGVudW1zLkhpc3RvcnlOYXZpZ2F0aW9uQXJlYS5NYXJraW5nO1xuXG4gICAgICAgICAgICB0aGlzLl9mYWlsdXJlQ29kZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIC8vIHJlc3BvbnNlIGlzIGdldHRpbmcgY2xvc2VkLCBpbmZvcm0gbW9kdWxlcy5cbiAgICAgICAgICAgIHdvcmtsaXN0QWN0aW9uQ3JlYXRvci5yZXNwb25zZUNsb3NlZCh0cnVlKTtcbiAgICAgICAgICAgIC8vYm9va21hcmtBY3Rpb25DcmVhdG9yLmJvb2ttYXJrQWRkZWQobnVsbCk7XG4gICAgICAgICAgICAvLyByZXNldHRpbmcgdGhlIG1hcmtpbmcgY2hlY2sgbW9kZSBvbiBtZW51IGl0ZW0gY2xpY2tcbiAgICAgICAgICAgIG1hcmtpbmdDaGVja0FjdGlvbkNyZWF0b3IudG9nZ2xlTWFya2luZ0NoZWNrTW9kZShmYWxzZSk7XG5cbiAgICAgICAgICAgIGJ1c3lJbmRpY2F0b3JBY3Rpb25DcmVhdG9yLnNldEJ1c3lJbmRpY2F0b3JJbnZva2VyKGVudW1zLkJ1c3lJbmRpY2F0b3JJbnZva2VyLmxvYWRpbmdIaXN0b3J5RGV0YWlscyk7XG5cbiAgICAgICAgICAgIGxldCBtZXNzYWdlID0gJ1NlbGVjdGVkIE15IE1hcmtpbmcgZnJvbSBtZW51IHdpdGggQ2xvc2UgbWVudSBldmVudCB0cmlnZ2VyZWQuJztcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBtZXNzYWdlICsgJyBDdXJyZW50IGNvbnRhaW5lciA9PiAnICtcbiAgICAgICAgICAgICAgICBlbnVtcy5QYWdlQ29udGFpbmVyc1tuYXZpZ2F0aW9uU3RvcmUuaW5zdGFuY2UuY29udGFpbmVyUGFnZV07XG4gICAgICAgICAgICAvLyBsb2dnaW5nIG1lbnUgYWN0aW9uIGluIGdvb2dsZSBhbmFseXRpY3Mgb3IgYXBwbGljYXRpb24gaW5zaWdodHMgYmFzZWQgb24gdGhlIGNvbmZpZ3VyYXRpb25cbiAgICAgICAgICAgIG5ldyBhdWRpdExvZ2dpbmdIZWxwZXIoKS5sb2dIZWxwZXIubG9nRXZlbnRPbk1lbnVBY3Rpb24obWVzc2FnZSk7XG5cbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBpc09wZW46IGZhbHNlIH0pO1xuICAgICAgICAgICAgbGV0IHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy5faGlzdG9yeUl0ZW0gPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KF9oaXN0b3J5SXRlbSkpO1xuICAgICAgICAgICAgbGV0IHFpZ0lkOiBudW1iZXIgPSBfcWlnSWQgPiAwID8gX3FpZ0lkIDogdGhpcy5faGlzdG9yeUl0ZW0ucWlnSWQ7XG4gICAgICAgICAgICAvLyBzZXQgdGhlIG1hcmtlciBvcGVyYXRpb24gbW9kZSBhcyBNYXJraW5nXG4gICAgICAgICAgICB1c2VySW5mb0FjdGlvbkNyZWF0b3IuY2hhbmdlT3BlcmF0aW9uTW9kZShlbnVtcy5NYXJrZXJPcGVyYXRpb25Nb2RlLk1hcmtpbmcsIGZhbHNlLCB0cnVlKTtcblxuICAgICAgICAgICAgLy8gSW52b2tlIHRoZSBhY3Rpb24gY3JlYXRvciB0byBPcGVuIHRoZSBRSUdcbiAgICAgICAgICAgIGxldCBnZXRRSUdTZWxlY3RvckRhdGFQcm9taXNlID0gcWlnQWN0aW9uQ3JlYXRvci5nZXRRSUdTZWxlY3RvckRhdGEocWlnSWQsIHRydWUsIGZhbHNlLCB0cnVlLCBmYWxzZSwgdHJ1ZSk7XG5cbiAgICAgICAgICAgIFByb21pc2UuUHJvbWlzZS5hbGwoXG4gICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgICBnZXRRSUdTZWxlY3RvckRhdGFQcm9taXNlXG4gICAgICAgICAgICAgICAgXSkudGhlbihmdW5jdGlvbiAocmVzdWx0OiBhbnkpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHNlbGVjdGVkUUlHRm9yTWFya2VyT3BlcmF0aW9uID0gcWlnU3RvcmUuaW5zdGFuY2Uuc2VsZWN0ZWRRSUdGb3JNYXJrZXJPcGVyYXRpb247XG4gICAgICAgICAgICAgICAgICAgIC8vIFRoZSBRaWdzdG9yZSBiZWNvbWUgdW5kZWZpbmVkIHdoZW4gdGhlIG1hcmtlciBpcyB3aXRocmF3biBpbiBiYWNrZ3JvdW5kLC5cbiAgICAgICAgICAgICAgICAgICAgLy8gTmVlZCB0byBzaG93IHdpdGhkcmF3biBwb3VwIHdoaWxlIGNsaWNraW5nIG1hcmtpbmcgbGluayBmcm9tIG1lbnUuXG4gICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZFFJR0Zvck1hcmtlck9wZXJhdGlvbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBMb2FkIHRoZSB3b3JrbGlzdCB3aGlsZSBuYXZpZ2F0aW5nIHRvIHdvcmtsaXN0IGZyb20gaW5ib3ggdGhyb3VnaCBtZW51LlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5hdmlnYXRpb25TdG9yZS5pbnN0YW5jZS5jb250YWluZXJQYWdlID09PSBlbnVtcy5QYWdlQ29udGFpbmVycy5NZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmF2aWdhdGlvbkhlbHBlci5sb2FkV29ya2xpc3QodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB1cGFkdGUgZXhhbWluZXIgc3RvcmUgLCBhbmQgd2l0aGRyYXduIHBvdXAgd2lsbCBiZSBkaXNwbHllZCBmcm9tIGZvb3Rlci5cbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtlckluZm9ybWF0aW9uQWN0aW9uQ3JlYXRvci5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBHZXRNYXJrZXJJbmZvcm1hdGlvbih0aGF0Ll9oaXN0b3J5SXRlbS5leGFtaW5lclJvbGVJZCwgcWlnSWQsIHRydWUsIGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4YW1pbmVyU3RvcmUuaW5zdGFuY2UuZXhhbWluZXJBcHByb3ZhbFN0YXR1cyh0aGF0Ll9oaXN0b3J5SXRlbS5leGFtaW5lclJvbGVJZCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VTZWFyY2hIZWxwZXIub3BlblFJR0RldGFpbHMoXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZFFJR0Zvck1hcmtlck9wZXJhdGlvbi5xdWVzdGlvblBhcGVyUGFydElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRRSUdGb3JNYXJrZXJPcGVyYXRpb24ubWFya1NjaGVtZUdyb3VwSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZFFJR0Zvck1hcmtlck9wZXJhdGlvbi5leGFtaW5lclJvbGVJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFTZXJ2aWNlSGVscGVyLmNhblVzZUNhY2hlKCksXG4gICAgICAgICAgICAgICAgICAgICAgICBleGFtaW5lclN0b3JlLmluc3RhbmNlLmV4YW1pbmVyQXBwcm92YWxTdGF0dXMoc2VsZWN0ZWRRSUdGb3JNYXJrZXJPcGVyYXRpb24uZXhhbWluZXJSb2xlSWQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRRSUdGb3JNYXJrZXJPcGVyYXRpb24ubWFya2luZ01ldGhvZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRRSUdGb3JNYXJrZXJPcGVyYXRpb24uaXNFbGVjdHJvbmljU3RhbmRhcmRpc2F0aW9uVGVhbU1lbWJlcik7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gbG9hZCBzdGFtcHMgZGVmaW5lZCBmb3IgdGhlIHNlbGVjdGVkIG1hcmsgc2NoZW1lIGdyb3VwSWRcbiAgICAgICAgICAgICAgICAgICAgc3RhbXBBY3Rpb25DcmVhdG9yLmdldFN0YW1wRGF0YShxaWdTdG9yZS5pbnN0YW5jZS5zZWxlY3RlZFFJR0Zvck1hcmtlck9wZXJhdGlvbi5tYXJrU2NoZW1lR3JvdXBJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YW1wU3RvcmUuaW5zdGFuY2Uuc3RhbXBJZHNGb3JTZWxlY3RlZFFJRyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHFpZ1N0b3JlLmluc3RhbmNlLnNlbGVjdGVkUUlHRm9yTWFya2VyT3BlcmF0aW9uLm1hcmtpbmdNZXRob2QsXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZUhlbHBlci5pc0Vib29rTWFya2luZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRydWUpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIENhbGxpbmcgdGhlIGhlbHBlciBtZXRob2QgdG8gZm9ybWF0IHRoZSBRSUcgTmFtZVxuICAgICAgICAgICAgICAgICAgICBsZXQgY3VyclFpZ05hbWUgPSBzdHJpbmdGb3JtYXRIZWxwZXIuZm9ybWF0QXdhcmRpbmdCb2R5UUlHKFxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRRSUdGb3JNYXJrZXJPcGVyYXRpb24ubWFya1NjaGVtZUdyb3VwTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkUUlHRm9yTWFya2VyT3BlcmF0aW9uLmFzc2Vzc21lbnRDb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRRSUdGb3JNYXJrZXJPcGVyYXRpb24uc2Vzc2lvbk5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZFFJR0Zvck1hcmtlck9wZXJhdGlvbi5jb21wb25lbnRJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkUUlHRm9yTWFya2VyT3BlcmF0aW9uLnF1ZXN0aW9uUGFwZXJOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRRSUdGb3JNYXJrZXJPcGVyYXRpb24uYXNzZXNzbWVudE5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZFFJR0Zvck1hcmtlck9wZXJhdGlvbi5jb21wb25lbnROYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyaW5nRm9ybWF0SGVscGVyLmdldE92ZXJ2aWV3UUlHTmFtZUZvcm1hdCgpKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBsb2dnaW5nIHFpZyBzZWxlY3Rpb24gaW4gZ29vZ2xlIGFuYWx5dGljcyBvciBhcHBsaWNhdGlvbiBpbnNpZ2h0cyBiYXNlZCBvbiB0aGUgY29uZmlndXJhdGlvbi5cbiAgICAgICAgICAgICAgICAgICAgbmV3IGF1ZGl0TG9nZ2luZ0hlbHBlcigpLmxvZ0hlbHBlci5sb2dFdmVudE9uUWlnU2VsZWN0aW9uKGN1cnJRaWdOYW1lKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAodGhhdC5faGlzdG9yeUl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSB0aGUgd29ya2xpc3Qgc3RvcmUgYmVmb3JlIG5hdmlnYXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGF0Ll9oaXN0b3J5SXRlbS5teU1hcmtpbmcud29ya2xpc3RUeXBlID09PSBlbnVtcy5Xb3JrbGlzdFR5cGUuc2ltdWxhdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmIHNlbGVjdGVkUUlHRm9yTWFya2VyT3BlcmF0aW9uLnN0YW5kYXJkaXNhdGlvblNldHVwQ29tcGxldGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0Ll9oaXN0b3J5SXRlbS5teU1hcmtpbmcud29ya2xpc3RUeXBlID0gZW51bXMuV29ya2xpc3RUeXBlLm5vbmU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB3b3JrbGlzdEFjdGlvbkNyZWF0b3Iuc2V0V29ya2xpc3RIaXN0b3J5SW5mbyh0aGF0Ll9oaXN0b3J5SXRlbSwgZW51bXMuTWFya2VyT3BlcmF0aW9uTW9kZS5NYXJraW5nKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIG5hdmlnYXRpb25IZWxwZXIubG9hZFdvcmtsaXN0KHRydWUpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogbmF2aWdhdGUgdG8gdGVhbSBNYW5hZ2VtZW50IGJhc2VkIG9uIGhpc3RvcnkgaXRlbVxuICAgICAqL1xuICAgIHByaXZhdGUgbmF2aWdhdGVUb1JlY2VudEhpc3RvcnlUZWFtTWFuYWdlbWVudChfaGlzdG9yeUl0ZW0/OiBoaXN0b3J5SXRlbSxcbiAgICAgICAgX3FpZ2lkPzogbnVtYmVyLFxuICAgICAgICBfcXVlc3Rpb25QYXBlclBhcnRJZD86IG51bWJlcixcbiAgICAgICAgX2V4YW1pbmVyUm9sZUlkPzogbnVtYmVyKSB7XG4gICAgICAgIC8qSGFuZGxlcyB0aGUgc2NlbmFyaW8gd2hlcmUgdXNlciBpcyBvZmZsaW5lIG9uIGNsaWNraW5nIG9uIGhpc3RvcnkgbGluayBpbiBtZW51Ki9cbiAgICAgICAgaWYgKCFhcHBsaWNhdGlvblN0b3JlLmluc3RhbmNlLmlzT25saW5lKSB7XG4gICAgICAgICAgICBhcHBsaWNhdGlvbkFjdGlvbkNyZWF0b3IuY2hlY2tBY3Rpb25JbnRlcnJ1cHRlZCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYnVzeUluZGljYXRvckFjdGlvbkNyZWF0b3Iuc2V0QnVzeUluZGljYXRvckludm9rZXIoZW51bXMuQnVzeUluZGljYXRvckludm9rZXIubG9hZGluZ0hpc3RvcnlEZXRhaWxzKTtcblxuICAgICAgICAgICAgLy8gTWVudSBoaXN0b3J5IG5hdmlnYXRpb24gdG8gdGVhbSBtYW5hZ2VtZW50XG4gICAgICAgICAgICB0aGlzLmhpc3RvcnlOYXZpZ2F0aW9uQXJlYSA9IGVudW1zLkhpc3RvcnlOYXZpZ2F0aW9uQXJlYS5UZWFtTWFuYWdlbWVudDtcblxuICAgICAgICAgICAgbGV0IG1lc3NhZ2UgPSAnU2VsZWN0ZWQgVGVhbSBNYW5hZ2VtZW50IGZyb20gbWVudSB3aXRoIENsb3NlIG1lbnUgZXZlbnQgdHJpZ2dlcmVkLic7XG4gICAgICAgICAgICBtZXNzYWdlID0gbWVzc2FnZSArICcgQ3VycmVudCBjb250YWluZXIgPT4gJyArXG4gICAgICAgICAgICAgICAgZW51bXMuUGFnZUNvbnRhaW5lcnNbbmF2aWdhdGlvblN0b3JlLmluc3RhbmNlLmNvbnRhaW5lclBhZ2VdO1xuICAgICAgICAgICAgLy8gbG9nZ2luZyBtZW51IGFjdGlvbiBpbiBnb29nbGUgYW5hbHl0aWNzIG9yIGFwcGxpY2F0aW9uIGluc2lnaHRzIGJhc2VkIG9uIHRoZSBjb25maWd1cmF0aW9uXG4gICAgICAgICAgICBuZXcgYXVkaXRMb2dnaW5nSGVscGVyKCkubG9nSGVscGVyLmxvZ0V2ZW50T25NZW51QWN0aW9uKG1lc3NhZ2UpO1xuXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgaXNPcGVuOiBmYWxzZSB9KTtcbiAgICAgICAgICAgIC8vIHJlc2V0dGluZyB0aGUgbWFya2luZyBjaGVjayBtb2RlIG9uIG1lbnUgaXRlbSBjbGlja1xuICAgICAgICAgICAgbWFya2luZ0NoZWNrQWN0aW9uQ3JlYXRvci50b2dnbGVNYXJraW5nQ2hlY2tNb2RlKGZhbHNlKTtcblxuICAgICAgICAgICAgdGhpcy5faGlzdG9yeUl0ZW0gPSBfaGlzdG9yeUl0ZW0gPyBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KF9oaXN0b3J5SXRlbSkpIDogbnVsbDtcbiAgICAgICAgICAgIHRoaXMuX3FpZ2lkID0gX3FpZ2lkID8gX3FpZ2lkIDogMDtcbiAgICAgICAgICAgIHRoaXMuX3F1ZXN0aW9uUGFwZXJQYXJ0SWQgPSBfcXVlc3Rpb25QYXBlclBhcnRJZCA/IF9xdWVzdGlvblBhcGVyUGFydElkIDogMDtcbiAgICAgICAgICAgIHRoaXMuX2V4YW1pbmVyUm9sZUlkID0gX2V4YW1pbmVyUm9sZUlkID8gX2V4YW1pbmVyUm9sZUlkIDogMDtcblxuICAgICAgICAgICAgaWYgKHRoaXMuX2hpc3RvcnlJdGVtICE9PSBudWxsKSB7XG5cbiAgICAgICAgICAgICAgICAvLyBjbGVhciBteS10ZWFtIGRhdGEgYW5kIGhlbHAtZXhhbWluZXIgZGF0YSBmcm9tIGNhY2hlXG4gICAgICAgICAgICAgICAgdGhpcy5zdG9yYWdlQWRhcHRlckhlbHBlci5jbGVhclRlYW1EYXRhQ2FjaGUodGhpcy5faGlzdG9yeUl0ZW0udGVhbS5zdXBlcnZpc29yRXhhbWluZXJSb2xlSUQsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2hpc3RvcnlJdGVtLnFpZ0lkKTtcbiAgICAgICAgICAgICAgICB0aGlzLnN0b3JhZ2VBZGFwdGVySGVscGVyLmNsZWFyVGVhbURhdGFDYWNoZSh0aGlzLl9oaXN0b3J5SXRlbS50ZWFtLnN1cGVydmlzb3JFeGFtaW5lclJvbGVJRCxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5faGlzdG9yeUl0ZW0ucWlnSWQsIHRydWUpO1xuICAgICAgICAgICAgICAgIGxldCBleGFtaW5lclZhbGlkYXRpb25BcmVhOiBlbnVtcy5FeGFtaW5lclZhbGlkYXRpb25BcmVhID1cbiAgICAgICAgICAgICAgICAgICAgZW51bXMuRXhhbWluZXJWYWxpZGF0aW9uQXJlYS5NeVRlYW07XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2hpc3RvcnlJdGVtLnRlYW0uc2VsZWN0ZWRUYWIgPT09IGVudW1zLlRlYW1NYW5hZ2VtZW50LkhlbHBFeGFtaW5lcnMgJiZcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5faGlzdG9yeUl0ZW0udGVhbS5jdXJyZW50Q29udGFpbmVyID09PSBlbnVtcy5QYWdlQ29udGFpbmVycy5Xb3JrTGlzdCkge1xuICAgICAgICAgICAgICAgICAgICBleGFtaW5lclZhbGlkYXRpb25BcmVhID0gZW51bXMuRXhhbWluZXJWYWxpZGF0aW9uQXJlYS5IZWxwRXhhbWluZXI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIHZhbGlkYXRlcyB0aGUgZXhhbWluZXJcbiAgICAgICAgICAgICAgICB0ZWFtTWFuYWdlbWVudEFjdGlvbkNyZWF0b3IudGVhbU1hbmFnZW1lbnRFeGFtaW5lclZhbGlkYXRpb24odGhpcy5faGlzdG9yeUl0ZW0ucWlnSWQsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2hpc3RvcnlJdGVtLnRlYW0uc3VwZXJ2aXNvckV4YW1pbmVyUm9sZUlELFxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9oaXN0b3J5SXRlbS50ZWFtLnN1Ym9yZGluYXRlRXhhbWluZXJSb2xlSUQsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2hpc3RvcnlJdGVtLnRlYW0uc3Vib3JkaW5hdGVFeGFtaW5lcklELFxuICAgICAgICAgICAgICAgICAgICBleGFtaW5lclZhbGlkYXRpb25BcmVhLFxuICAgICAgICAgICAgICAgICAgICBmYWxzZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRlYW1NYW5hZ2VtZW50QWN0aW9uQ3JlYXRvci50ZWFtTWFuYWdlbWVudEV4YW1pbmVyVmFsaWRhdGlvbih0aGlzLl9xaWdpZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMb2FkIHdvcmtsaXN0XG4gICAgICovXG4gICAgcHJpdmF0ZSBsb2FkUmVjZW50V29ya2xpc3QgPSAoX2hpc3RvcnlJdGVtOiBoaXN0b3J5SXRlbSwgX21hcmtpbmdNb2RlOiBlbnVtcy5NYXJrZXJPcGVyYXRpb25Nb2RlKTogdm9pZCA9PiB7XG4gICAgICAgIGlmIChfbWFya2luZ01vZGUgPT09IGVudW1zLk1hcmtlck9wZXJhdGlvbk1vZGUuTWFya2luZykge1xuICAgICAgICAgICAgbmF2aWdhdGlvbkhlbHBlci5sb2FkV29ya2xpc3QodHJ1ZSk7XG5cbiAgICAgICAgICAgIGxldCBtZXNzYWdlID0gJ0xvYWRpbmcgd29ya2xpc3QgZnJvbSBtZW51IHdpdGggQ2xvc2UgbWVudSBldmVudCB0cmlnZ2VyZWQuJztcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBtZXNzYWdlICsgJyBDdXJyZW50IGNvbnRhaW5lciA9PiAnICtcbiAgICAgICAgICAgICAgICBlbnVtcy5QYWdlQ29udGFpbmVyc1tuYXZpZ2F0aW9uU3RvcmUuaW5zdGFuY2UuY29udGFpbmVyUGFnZV07XG4gICAgICAgICAgICAvLyBsb2dnaW5nIG1lbnUgYWN0aW9uIGluIGdvb2dsZSBhbmFseXRpY3Mgb3IgYXBwbGljYXRpb24gaW5zaWdodHMgYmFzZWQgb24gdGhlIGNvbmZpZ3VyYXRpb25cbiAgICAgICAgICAgIG5ldyBhdWRpdExvZ2dpbmdIZWxwZXIoKS5sb2dIZWxwZXIubG9nRXZlbnRPbk1lbnVBY3Rpb24obWVzc2FnZSk7XG5cbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgIGlzT3BlbjogZmFsc2VcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIGFmdGVyIGV4YW1pbmVyIHZhbGlkYXRpb24gZG8gb3BlcmF0aW9uIGJhc2VkIG9uIGhpc3RvcnkgZGV0YWlsc1xuICAgICAqL1xuICAgIHByaXZhdGUgZXhhbWluZXJWYWxpZGF0ZWQgPSAoZmFpbHVyZUNvZGU6IGVudW1zLkZhaWx1cmVDb2RlID0gZW51bXMuRmFpbHVyZUNvZGUuTm9uZSk6IHZvaWQgPT4ge1xuICAgICAgICB0aGlzLl9mYWlsdXJlQ29kZSA9IGZhaWx1cmVDb2RlO1xuICAgICAgICBidXN5SW5kaWNhdG9yQWN0aW9uQ3JlYXRvci5zZXRCdXN5SW5kaWNhdG9ySW52b2tlcihlbnVtcy5CdXN5SW5kaWNhdG9ySW52b2tlci5sb2FkaW5nSGlzdG9yeURldGFpbHMpO1xuICAgICAgICAvLyBmb3IgdGhlc2UgdHdvIGVycm9yIGNvZGVzIHRoZXJlIGlzIG5vIG5lZWQgdG8gZmV0Y2ggb3RoZXIgZGF0YSdzIHdlIGNhblxuICAgICAgICAvLyBkaXJlY3RseSBuYXZpZ2F0aW5nIHRvIHFpZyBzZWxlY3RvciBieSBjbGVhcmluZyBsYXRlc3QgY2FjaGUgZGF0YVxuICAgICAgICBpZiAodGhpcy5fZmFpbHVyZUNvZGUgPT09IGVudW1zLkZhaWx1cmVDb2RlLldpdGhkcmF3biB8fCB0aGlzLl9mYWlsdXJlQ29kZSA9PT0gZW51bXMuRmFpbHVyZUNvZGUuTm90VGVhbUxlYWQpIHtcbiAgICAgICAgICAgIHRoaXMuc3RvcmFnZUFkYXB0ZXJIZWxwZXIuY2xlYXJDYWNoZUJ5S2V5KCdxaWdzZWxlY3RvcicsICdvdmVydmlld2RhdGEnKTtcbiAgICAgICAgICAgIG5hdmlnYXRpb25IZWxwZXIubG9hZFFpZ1NlbGVjdG9yKCk7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLl9oaXN0b3J5SXRlbSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3FpZ2lkID0gdGhpcy5faGlzdG9yeUl0ZW0ucWlnSWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0ZWFtTWFuYWdlbWVudEFjdGlvbkNyZWF0b3IucmVtb3ZlSGlzdG9yeUl0ZW0odGhpcy5fcWlnaWQsIHRoaXMuX2ZhaWx1cmVDb2RlID09PSBlbnVtcy5GYWlsdXJlQ29kZS5Ob3RUZWFtTGVhZCk7XG5cbiAgICAgICAgICAgIGxldCBtZXNzYWdlID0gJ0xvYWRpbmcgUWlnc2VsZWN0b3IgZnJvbSBtZW51IGFzIHRoZSBleGFtaW5lciBpcyBXaXRoZHJhd24vTm90VGVhbUxlYWQuQ2xvc2UgbWVudSBldmVudCB0cmlnZ2VyZWQuJztcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBtZXNzYWdlICsgJyBDdXJyZW50IGNvbnRhaW5lciA9PiAnICtcbiAgICAgICAgICAgICAgICBlbnVtcy5QYWdlQ29udGFpbmVyc1tuYXZpZ2F0aW9uU3RvcmUuaW5zdGFuY2UuY29udGFpbmVyUGFnZV07XG4gICAgICAgICAgICAvLyBsb2dnaW5nIG1lbnUgYWN0aW9uIGluIGdvb2dsZSBhbmFseXRpY3Mgb3IgYXBwbGljYXRpb24gaW5zaWdodHMgYmFzZWQgb24gdGhlIGNvbmZpZ3VyYXRpb25cbiAgICAgICAgICAgIG5ldyBhdWRpdExvZ2dpbmdIZWxwZXIoKS5sb2dIZWxwZXIubG9nRXZlbnRPbk1lbnVBY3Rpb24obWVzc2FnZSk7XG5cbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBpc09wZW46IGZhbHNlIH0pO1xuICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAvLyByZXNwb25zZSBpcyBnZXR0aW5nIGNsb3NlZCwgaW5mb3JtIG1vZHVsZXMuXG4gICAgICAgICAgICB3b3JrbGlzdEFjdGlvbkNyZWF0b3IucmVzcG9uc2VDbG9zZWQodHJ1ZSk7XG5cbiAgICAgICAgICAgIGxldCBjaGFuZ2VPcGVyYXRpb25Nb2RlUHJvbWlzZTtcbiAgICAgICAgICAgIGlmICh1c2VySW5mb1N0b3JlLmluc3RhbmNlLmN1cnJlbnRPcGVyYXRpb25Nb2RlICE9PSBlbnVtcy5NYXJrZXJPcGVyYXRpb25Nb2RlLlRlYW1NYW5hZ2VtZW50KSB7XG4gICAgICAgICAgICAgICAgY2hhbmdlT3BlcmF0aW9uTW9kZVByb21pc2UgPSB1c2VySW5mb0FjdGlvbkNyZWF0b3IuY2hhbmdlT3BlcmF0aW9uTW9kZShcbiAgICAgICAgICAgICAgICAgICAgZW51bXMuTWFya2VyT3BlcmF0aW9uTW9kZS5UZWFtTWFuYWdlbWVudCwgZmFsc2UsIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLl9oaXN0b3J5SXRlbSAmJiB0aGlzLl9xaWdpZCkge1xuXG4gICAgICAgICAgICAgICAgLy8gd2hpbGUgdGVhbSBtYW5hZ2VtZW50IGlzIG9wZW5lZCBmb3IgZmlyc3QgdGltZSB0aHJvdWdoIG1lbnUgaGlzdG9yeSBsaW5rLHRoZVxuICAgICAgICAgICAgICAgIC8vIGhpc3RvcnkgaXRlbSB2YWx1ZSB3aWxsIGJlIG51bGwsIHNvIHdlIG5lZWQgdG8gZG8gdGhlIGV4YWN0IGFjdGlvblxuICAgICAgICAgICAgICAgIC8vIHdoaWNoIGhhcHBlbnMgd2hpbGUgY2xpY2tpbmcgdGVhbU1hbmFnZW1lbnQgYnV0dG9uIGZyb20gcWlnU2VsZWN0b3JcblxuICAgICAgICAgICAgICAgIGNjQWN0aW9uQ3JlYXRvci5nZXRNYXJrU2NoZW1lR3JvdXBDQ3ModGhpcy5fcWlnaWQsIHRoaXMuX3F1ZXN0aW9uUGFwZXJQYXJ0SWQsIHRydWUsIHRydWUpO1xuXG4gICAgICAgICAgICAgICAgLy8gaWYgdGhlIHVzZXIgaGFzIHRoZSByZW1lbWJlci1xaWcgb3B0aW9uIHRoZW4gJ3FpZ092ZXJ2aWV3RGF0YScgd2lsbCBiZSBudWxsXG4gICAgICAgICAgICAgICAgLy8gaW4gdGhpcyBjYXNlIHdoaWxlIHRoZSB1c2VyIG5hdmlnYXRlcyB0byB0ZWFtbWFuYWdlbWVudCB1c2luZyByZWNlbnQgaGlzdG9yeSBvcHRpb24sXG4gICAgICAgICAgICAgICAgLy8gdGhpcyB2YWx1ZSB3aWxsIGJlIG51bGwsdG8gYXZvaWQgdGhpcyB3ZSBuZWVkIHRvIHVwZGF0ZSB0aGlzIHZhbHVlLlxuICAgICAgICAgICAgICAgIGlmIChxaWdTdG9yZS5pbnN0YW5jZS5nZXRPdmVydmlld0RhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgICAgICAgICBsZXQgb3BlblFpZ1Byb21pc2UgPSBxaWdTZWxlY3RvckFjdGlvbkNyZWF0b3Iub3BlblFJRyh0aGlzLl9xaWdpZCwgZmFsc2UsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBQcm9taXNlLlByb21pc2UuYWxsKFtjaGFuZ2VPcGVyYXRpb25Nb2RlUHJvbWlzZSwgb3BlblFpZ1Byb21pc2VdKS50aGVuKGZ1bmN0aW9uIChpdGVtOiBhbnkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlYW1NYW5hZ2VtZW50QWN0aW9uQ3JlYXRvci5vcGVuVGVhbU1hbmFnZW1lbnQodGhhdC5fZXhhbWluZXJSb2xlSWQsIHRoYXQuX3FpZ2lkLCBmYWxzZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgICAgICAgICAgbGV0IGdldFFJR1NlbGVjdG9yRGF0YVByb21pc2UgPSBxaWdBY3Rpb25DcmVhdG9yLmdldFFJR1NlbGVjdG9yRGF0YSh0aGlzLl9xaWdpZCwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgdHJ1ZSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBQcm9taXNlLlByb21pc2UuYWxsKFtnZXRRSUdTZWxlY3RvckRhdGFQcm9taXNlXSkudGhlbihmdW5jdGlvbiAoaXRlbTogYW55KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZWFtTWFuYWdlbWVudEFjdGlvbkNyZWF0b3Iub3BlblRlYW1NYW5hZ2VtZW50KHRoYXQuX2V4YW1pbmVyUm9sZUlkLCB0aGF0Ll9xaWdpZCwgZmFsc2UsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBsZXQgbWVzc2FnZSA9ICdMb2FkaW5nIFRlYW1NYW5hZ2VtZW50IGZyb20gbWVudSAgd2l0aCBDbG9zZSBtZW51IGV2ZW50IHRyaWdnZXJlZC4nO1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBtZXNzYWdlICsgJyBDdXJyZW50IGNvbnRhaW5lciA9PiAnICtcbiAgICAgICAgICAgICAgICAgICAgZW51bXMuUGFnZUNvbnRhaW5lcnNbbmF2aWdhdGlvblN0b3JlLmluc3RhbmNlLmNvbnRhaW5lclBhZ2VdO1xuICAgICAgICAgICAgICAgIC8vIGxvZ2dpbmcgbWVudSBhY3Rpb24gaW4gZ29vZ2xlIGFuYWx5dGljcyBvciBhcHBsaWNhdGlvbiBpbnNpZ2h0cyBiYXNlZCBvbiB0aGUgY29uZmlndXJhdGlvblxuICAgICAgICAgICAgICAgIG5ldyBhdWRpdExvZ2dpbmdIZWxwZXIoKS5sb2dIZWxwZXIubG9nRXZlbnRPbk1lbnVBY3Rpb24obWVzc2FnZSk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgaXNPcGVuOiBmYWxzZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZXQgY2NBY3Rpb25DcmVhdG9yUHJvbWlzZSA9IGNjQWN0aW9uQ3JlYXRvci5nZXRNYXJrU2NoZW1lR3JvdXBDQ3MoXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2hpc3RvcnlJdGVtLnFpZ0lkLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9oaXN0b3J5SXRlbS5xdWVzdGlvblBhcGVyUGFydElkLFxuICAgICAgICAgICAgICAgICAgICB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB0cnVlKTtcblxuICAgICAgICAgICAgICAgIGxldCB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgICAgICBQcm9taXNlLlByb21pc2UuYWxsKFxuICAgICAgICAgICAgICAgICAgICBbY2hhbmdlT3BlcmF0aW9uTW9kZVByb21pc2UsIGNjQWN0aW9uQ3JlYXRvclByb21pc2VdKS50aGVuKGZ1bmN0aW9uIChpdGVtOiBhbnkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEludm9rZSB0aGUgYWN0aW9uIGNyZWF0b3IgdG8gT3BlbiB0aGUgUUlHIGZvciB0aGUgbG9nZ2VkIGluIHVzZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBnZXRRSUdTZWxlY3RvckRhdGFQcm9taXNlID0gcWlnQWN0aW9uQ3JlYXRvci5nZXRRSUdTZWxlY3RvckRhdGFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhhdC5faGlzdG9yeUl0ZW0ucWlnSWQsIHRydWUsIGZhbHNlLCB0cnVlLCBmYWxzZSwgdHJ1ZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogdXBkYXRlcyBkZXRhaWxzIHRvIHN0b3JlXG4gICAgICovXG4gICAgcHJpdmF0ZSBvblFpZ1NlbGVjdGVkRnJvbUhpc3RvcnkgPSAoKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLmhpc3RvcnlOYXZpZ2F0aW9uQXJlYSA9PT0gZW51bXMuSGlzdG9yeU5hdmlnYXRpb25BcmVhLlN0YW5kYXJkaXNhdGlvblNldHVwKSB7XG4gICAgICAgICAgICAvLyBpZiBuYXZpZ2F0aW5nIGZyb20gaGlzdG9yeSBpdGVtKGllLCBtYXJrZXIgaGFzIG5hdmlnYXRlZCB0byBzc3UpIHRoZW4gc2V0IGhpc3RvcnkgaW5mbyBpbiBzdG9yZVxuICAgICAgICAgICAgaWYgKHRoaXMuX2hpc3RvcnlJdGVtICYmIHRoaXMuX2hpc3RvcnlJdGVtLnN0YW5kYXJkaXNhdGlvblNldHVwKSB7XG4gICAgICAgICAgICAgICAgc3RhbmRhcmRpc2F0aW9uQWN0aW9uQ3JlYXRvci5zZXRTdGFuZGFyZGlzYXRpb25TZXR1cEhpc3RvcnlJbmZvKHRoaXMuX2hpc3RvcnlJdGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEdldCBTdGFuZGFyZGlzYXRpb24gU2V0dXAgUWlnIERldGFpbHNcbiAgICAgICAgICAgIHJlc3BvbnNlU2VhcmNoSGVscGVyLmdldFN0YW5kYXJkaXNhdGlvblNldHVwUWlnRGV0YWlscygpO1xuICAgICAgICAgICAgLy8gTmF2aWdhdGUgdG8gU3RhbmRhcmRpc2F0aW9uIHNldHVwXG4gICAgICAgICAgICBuYXZpZ2F0aW9uSGVscGVyLmxvYWRTdGFuZGFyZGlzYXRpb25TZXR1cCgpO1xuICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICBpZiAoIXRoaXMuX2hpc3RvcnlJdGVtIHx8IHRoaXMuX2ZhaWx1cmVDb2RlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGJ1c3lJbmRpY2F0b3JBY3Rpb25DcmVhdG9yLnNldEJ1c3lJbmRpY2F0b3JJbnZva2VyKGVudW1zLkJ1c3lJbmRpY2F0b3JJbnZva2VyLmxvYWRpbmdIaXN0b3J5RGV0YWlscyk7XG5cbiAgICAgICAgICAgIC8vIGF2b2lkIGdldHRpbmcgd29ya2xpc3QgZGF0YSdzIGZvciB0aGVzZSBlcnJvciBjb2Rlc1xuICAgICAgICAgICAgc3dpdGNoICh0aGlzLl9mYWlsdXJlQ29kZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgZW51bXMuRmFpbHVyZUNvZGUuU3Vib3JkaW5hdGVFeGFtaW5lcldpdGhkcmF3bjpcbiAgICAgICAgICAgICAgICBjYXNlIGVudW1zLkZhaWx1cmVDb2RlLkhpZXJhcmNoeUNoYW5nZWQ6XG4gICAgICAgICAgICAgICAgICAgIHRlYW1NYW5hZ2VtZW50QWN0aW9uQ3JlYXRvci5zZXRUZWFtTWFuYWdlbWVudEhpc3RvcnlJbmZvKHRoaXMuX2hpc3RvcnlJdGVtLFxuICAgICAgICAgICAgICAgICAgICAgICAgZW51bXMuTWFya2VyT3BlcmF0aW9uTW9kZS5UZWFtTWFuYWdlbWVudCwgdGhpcy5fZmFpbHVyZUNvZGUpO1xuXG4gICAgICAgICAgICAgICAgICAgIGxldCBtZXNzYWdlID0gJ0xvYWRpbmcgUWlnc2VsZWN0b3IgZnJvbSBtZW51IGFzIHRoZSBleGFtaW5lciBpcyAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICdTdWJvcmRpbmF0ZUV4YW1pbmVyV2l0aGRyYXduIC8gSGllcmFyY2h5Q2hhbmdlZC5DbG9zZSBtZW51IGV2ZW50IHRyaWdnZXJlZC4nO1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gbWVzc2FnZSArICcgQ3VycmVudCBjb250YWluZXIgPT4gJyArXG4gICAgICAgICAgICAgICAgICAgICAgICBlbnVtcy5QYWdlQ29udGFpbmVyc1tuYXZpZ2F0aW9uU3RvcmUuaW5zdGFuY2UuY29udGFpbmVyUGFnZV07XG4gICAgICAgICAgICAgICAgICAgIC8vIGxvZ2dpbmcgbWVudSBhY3Rpb24gaW4gZ29vZ2xlIGFuYWx5dGljcyBvciBhcHBsaWNhdGlvbiBpbnNpZ2h0cyBiYXNlZCBvbiB0aGUgY29uZmlndXJhdGlvblxuICAgICAgICAgICAgICAgICAgICBuZXcgYXVkaXRMb2dnaW5nSGVscGVyKCkubG9nSGVscGVyLmxvZ0V2ZW50T25NZW51QWN0aW9uKG1lc3NhZ2UpO1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgaXNPcGVuOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyB1cGRhdGUgdGhlIGhpc3RvcnkgZGV0YWlscyB0byBzcGVjaWZpYyBzdG9yZXNcbiAgICAgICAgICAgIGxldCB0ZWFtTWFuYWdlbWVudEhpc3RvcnlQcm9taXNlID1cbiAgICAgICAgICAgICAgICB0ZWFtTWFuYWdlbWVudEFjdGlvbkNyZWF0b3Iuc2V0VGVhbU1hbmFnZW1lbnRIaXN0b3J5SW5mbyh0aGlzLl9oaXN0b3J5SXRlbSwgZW51bXMuTWFya2VyT3BlcmF0aW9uTW9kZS5UZWFtTWFuYWdlbWVudCk7XG5cbiAgICAgICAgICAgIGxldCB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIFByb21pc2UuUHJvbWlzZS5hbGwoW3RlYW1NYW5hZ2VtZW50SGlzdG9yeVByb21pc2VdKS5cbiAgICAgICAgICAgICAgICB0aGVuKGZ1bmN0aW9uIChpdGVtOiBhbnkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoYXQuX2hpc3RvcnlJdGVtLnRlYW0uY3VycmVudENvbnRhaW5lciAhPT0gZW51bXMuUGFnZUNvbnRhaW5lcnMuVGVhbU1hbmFnZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRlYW0gTWFuYWdlbWVudCB3b3JrbGlzdC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGF0Ll9oaXN0b3J5SXRlbS50ZWFtLnNlbGVjdGVkVGFiID09PSBlbnVtcy5UZWFtTWFuYWdlbWVudC5IZWxwRXhhbWluZXJzICYmIGNjaGVscGVyLmdldENoYXJhY3RlcmlzdGljVmFsdWUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2NOYW1lcy5TZW5pb3JFeGFtaW5lclBvb2wsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5faGlzdG9yeUl0ZW0ucWlnSWQgKS50b0xvd2VyQ2FzZSgpID09PSAndHJ1ZScpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNpbmNlIGl0IGZyb20gaGVscCBleGFtaW5lciwgdGhpcyBkYiBjYWxsIGlzIG5lZWRlZCBmb3Igc2hvd2luZyBjaGFuZ2Ugc3RhdHVzIGJ1dHRvbiBpbiB3b3JrbGlzdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBnZXRIZWxwRXhhbWluZXJEYXRhUHJvbWlzZSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlYW1NYW5hZ2VtZW50QWN0aW9uQ3JlYXRvci5HZXRIZWxwRXhtaW5lcnNEYXRhKHRoYXQuX2hpc3RvcnlJdGVtLnRlYW0uc3VwZXJ2aXNvckV4YW1pbmVyUm9sZUlELFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5faGlzdG9yeUl0ZW0ucWlnSWQsIGZhbHNlLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGdldFFJR1NlbGVjdG9yRGF0YVByb21pc2UxID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxaWdBY3Rpb25DcmVhdG9yLmdldFFJR1NlbGVjdG9yRGF0YSh0aGF0Ll9oaXN0b3J5SXRlbS5xaWdJZCwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgdHJ1ZSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgUHJvbWlzZS5Qcm9taXNlLmFsbChbZ2V0UUlHU2VsZWN0b3JEYXRhUHJvbWlzZTFdKS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGVuKGZ1bmN0aW9uIChpdGVtOiBhbnkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5vblFpZ0xvYWRlZEZyb21IaXN0b3J5KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1lc3NhZ2UgPSAnTG9hZGluZyB0aGUgc2FtZSBjb250YWluZXIoVGVhbSBNYW5hZ2VtZW50KSBmcm9tIG1lbnUuIENsb3NlIG1lbnUgZXZlbnQgdHJpZ2dlcmVkLic7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gbWVzc2FnZSArICcgQ3VycmVudCBjb250YWluZXIgPT4gJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW51bXMuUGFnZUNvbnRhaW5lcnNbbmF2aWdhdGlvblN0b3JlLmluc3RhbmNlLmNvbnRhaW5lclBhZ2VdO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbG9nZ2luZyBtZW51IGFjdGlvbiBpbiBnb29nbGUgYW5hbHl0aWNzIG9yIGFwcGxpY2F0aW9uIGluc2lnaHRzIGJhc2VkIG9uIHRoZSBjb25maWd1cmF0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgYXVkaXRMb2dnaW5nSGVscGVyKCkubG9nSGVscGVyLmxvZ0V2ZW50T25NZW51QWN0aW9uKG1lc3NhZ2UpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUZWFtIE1hbmFnZW1lbnQgQ29udGFpbmVyLlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5zZXRTdGF0ZSh7IGlzT3BlbjogZmFsc2UgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBidXN5SW5kaWNhdG9yQWN0aW9uQ3JlYXRvci5zZXRCdXN5SW5kaWNhdG9ySW52b2tlcihlbnVtcy5CdXN5SW5kaWNhdG9ySW52b2tlci5ub25lKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIGxvYWQgZGV0YWlscyBuZWVkZWQgZm9yIHdvcmtsaXN0IGFuZCBuYXZpZ2F0ZVxuICAgICAqL1xuICAgIHByaXZhdGUgb25RaWdMb2FkZWRGcm9tSGlzdG9yeSA9ICgpID0+IHtcbiAgICAgICAgYnVzeUluZGljYXRvckFjdGlvbkNyZWF0b3Iuc2V0QnVzeUluZGljYXRvckludm9rZXIoZW51bXMuQnVzeUluZGljYXRvckludm9rZXIubG9hZGluZ0hpc3RvcnlEZXRhaWxzKTtcbiAgICAgICAgcmVzcG9uc2VTZWFyY2hIZWxwZXIub3BlblFJR0RldGFpbHMoXG4gICAgICAgICAgICB0aGlzLl9oaXN0b3J5SXRlbS5xdWVzdGlvblBhcGVyUGFydElkLFxuICAgICAgICAgICAgdGhpcy5faGlzdG9yeUl0ZW0ucWlnSWQsXG4gICAgICAgICAgICB0aGlzLl9oaXN0b3J5SXRlbS50ZWFtLnN1Ym9yZGluYXRlRXhhbWluZXJSb2xlSUQsXG4gICAgICAgICAgICBkYXRhU2VydmljZUhlbHBlci5jYW5Vc2VDYWNoZSgpLFxuICAgICAgICAgICAgZXhhbWluZXJTdG9yZS5pbnN0YW5jZS5leGFtaW5lckFwcHJvdmFsU3RhdHVzKHRoaXMuX2hpc3RvcnlJdGVtLnRlYW0uc3Vib3JkaW5hdGVFeGFtaW5lclJvbGVJRCksXG4gICAgICAgICAgICB0aGlzLl9oaXN0b3J5SXRlbS5tYXJraW5nTWV0aG9kSWQsXG4gICAgICAgICAgICBmYWxzZSxcbiAgICAgICAgICAgIHRoaXMuX2hpc3RvcnlJdGVtLmlzRWxlY3Ryb25pY1N0YW5kYXJkaXNhdGlvblRlYW1NZW1iZXIpO1xuXG4gICAgICAgIC8vIGxvYWQgc3RhbXBzIGRlZmluZWQgZm9yIHRoZSBzZWxlY3RlZCBtYXJrIHNjaGVtZSBncm91cElkXG4gICAgICAgIHN0YW1wQWN0aW9uQ3JlYXRvci5nZXRTdGFtcERhdGEodGhpcy5faGlzdG9yeUl0ZW0ucWlnSWQsXG4gICAgICAgICAgICBzdGFtcFN0b3JlLmluc3RhbmNlLnN0YW1wSWRzRm9yU2VsZWN0ZWRRSUcsXG4gICAgICAgICAgICB0aGlzLl9oaXN0b3J5SXRlbS5tYXJraW5nTWV0aG9kSWQsXG4gICAgICAgICAgICByZXNwb25zZUhlbHBlci5pc0Vib29rTWFya2luZyxcbiAgICAgICAgICAgIHRydWUpO1xuXG4gICAgICAgIGxldCBtZXNzYWdlID0gJ1FpZyBzZWxlY3RlZCBmcm9tIGhpc3RvcnkuIENsb3NlIG1lbnUgZXZlbnQgdHJpZ2dlcmVkLic7XG4gICAgICAgIG1lc3NhZ2UgPSBtZXNzYWdlICsgJyBDdXJyZW50IGNvbnRhaW5lciA9PiAnICtcbiAgICAgICAgICAgIGVudW1zLlBhZ2VDb250YWluZXJzW25hdmlnYXRpb25TdG9yZS5pbnN0YW5jZS5jb250YWluZXJQYWdlXTtcbiAgICAgICAgLy8gbG9nZ2luZyBtZW51IGFjdGlvbiBpbiBnb29nbGUgYW5hbHl0aWNzIG9yIGFwcGxpY2F0aW9uIGluc2lnaHRzIGJhc2VkIG9uIHRoZSBjb25maWd1cmF0aW9uXG4gICAgICAgIG5ldyBhdWRpdExvZ2dpbmdIZWxwZXIoKS5sb2dIZWxwZXIubG9nRXZlbnRPbk1lbnVBY3Rpb24obWVzc2FnZSk7XG5cbiAgICAgICAgbmF2aWdhdGlvbkhlbHBlci5sb2FkV29ya2xpc3QodHJ1ZSk7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgaXNPcGVuOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgcmVwb3J0cyBpbiBtZW51IGFjY29yZGluZyB0byB0aGUgbG9naW4uXG4gICAgICovXG4gICAgcHJpdmF0ZSBnZXQgY2FuUmVuZGVyUmVwb3J0cygpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIGxvZ2luU2Vzc2lvbi5JU19GQU1JTElBUklTQVRJT05fTE9HSU4gPT09IHRydWUgPyBmYWxzZSA6IGxvZ2luU3RvcmUuaW5zdGFuY2UuaXNSZXBvcnRzVmlzaWJsZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG9wZW5UZWFtTWFuYWdlbWVudEZyb21Qb3B1cCA9ICgpID0+IHtcblxuICAgICAgICBsZXQgbWVzc2FnZSA9ICdPcGVuaW5nIHRlYW0gbWFuYWdlbWVudCBmcm9tIGhpc3RvcnkuIENsb3NlIG1lbnUgZXZlbnQgdHJpZ2dlcmVkLic7XG4gICAgICAgIG1lc3NhZ2UgPSBtZXNzYWdlICsgJyBDdXJyZW50IGNvbnRhaW5lciA9PiAnICtcbiAgICAgICAgICAgIGVudW1zLlBhZ2VDb250YWluZXJzW25hdmlnYXRpb25TdG9yZS5pbnN0YW5jZS5jb250YWluZXJQYWdlXTtcbiAgICAgICAgLy8gbG9nZ2luZyBtZW51IGFjdGlvbiBpbiBnb29nbGUgYW5hbHl0aWNzIG9yIGFwcGxpY2F0aW9uIGluc2lnaHRzIGJhc2VkIG9uIHRoZSBjb25maWd1cmF0aW9uXG4gICAgICAgIG5ldyBhdWRpdExvZ2dpbmdIZWxwZXIoKS5sb2dIZWxwZXIubG9nRXZlbnRPbk1lbnVBY3Rpb24obWVzc2FnZSk7XG5cbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBpc09wZW46IGZhbHNlXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBGb3JtYXR0ZWQgUUlHIE5hbWVcbiAgICAgKi9cbiAgICBwcml2YXRlIGdldEZvcm1hdHRlZFFJR05hbWUoKTogc3RyaW5nIHtcbiAgICAgICAgaWYgKHFpZ1N0b3JlLmluc3RhbmNlLnNlbGVjdGVkUUlHRm9yTWFya2VyT3BlcmF0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxlU3RvcmUuaW5zdGFuY2UuVHJhbnNsYXRlVGV4dCgnc2VhcmNoLXJlc3BvbnNlLnNlYXJjaC1yZXNwb25zZS1jb250ZW50LWFwcGVuZGVyJykgKyAnICcgK1xuXHRcdFx0ICAgIHN0cmluZ0Zvcm1hdEhlbHBlci5mb3JtYXRBd2FyZGluZ0JvZHlRSUcoXG5cdFx0XHRcdHFpZ1N0b3JlLmluc3RhbmNlLnNlbGVjdGVkUUlHRm9yTWFya2VyT3BlcmF0aW9uLm1hcmtTY2hlbWVHcm91cE5hbWUsXG4gICAgICAgICAgICAgICAgcWlnU3RvcmUuaW5zdGFuY2Uuc2VsZWN0ZWRRSUdGb3JNYXJrZXJPcGVyYXRpb24uYXNzZXNzbWVudENvZGUsXG4gICAgICAgICAgICAgICAgcWlnU3RvcmUuaW5zdGFuY2Uuc2VsZWN0ZWRRSUdGb3JNYXJrZXJPcGVyYXRpb24uc2Vzc2lvbk5hbWUsXG4gICAgICAgICAgICAgICAgcWlnU3RvcmUuaW5zdGFuY2Uuc2VsZWN0ZWRRSUdGb3JNYXJrZXJPcGVyYXRpb24uY29tcG9uZW50SWQsXG4gICAgICAgICAgICAgICAgcWlnU3RvcmUuaW5zdGFuY2Uuc2VsZWN0ZWRRSUdGb3JNYXJrZXJPcGVyYXRpb24ucXVlc3Rpb25QYXBlck5hbWUsXG4gICAgICAgICAgICAgICAgcWlnU3RvcmUuaW5zdGFuY2Uuc2VsZWN0ZWRRSUdGb3JNYXJrZXJPcGVyYXRpb24uYXNzZXNzbWVudE5hbWUsXG4gICAgICAgICAgICAgICAgcWlnU3RvcmUuaW5zdGFuY2Uuc2VsZWN0ZWRRSUdGb3JNYXJrZXJPcGVyYXRpb24uY29tcG9uZW50TmFtZSxcbiAgICAgICAgICAgICAgICBzdHJpbmdGb3JtYXRIZWxwZXIuZ2V0T3ZlcnZpZXdRSUdOYW1lRm9ybWF0KCkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgd2hldGhlciB0aGUgc2VhcmNoIHBhbmVsIGlzIHZpc2libGUgb3Igbm90LlxuICAgICAqL1xuICAgIHByaXZhdGUgaXNTZWFyY2hQYW5lbFZpc2libGUoKTogYm9vbGVhbiB7XG4gICAgICAgIGlmICgodXNlckluZm9TdG9yZS5pbnN0YW5jZS5jdXJyZW50T3BlcmF0aW9uTW9kZSA9PT0gZW51bXMuTWFya2VyT3BlcmF0aW9uTW9kZS5NYXJraW5nIHx8XG4gICAgICAgICAgICB1c2VySW5mb1N0b3JlLmluc3RhbmNlLmN1cnJlbnRPcGVyYXRpb25Nb2RlID09PSBlbnVtcy5NYXJrZXJPcGVyYXRpb25Nb2RlLlRlYW1NYW5hZ2VtZW50KSAmJlxuICAgICAgICAgICAgbmF2aWdhdGlvblN0b3JlLmluc3RhbmNlLmNvbnRhaW5lclBhZ2UgIT09IGVudW1zLlBhZ2VDb250YWluZXJzLlFpZ1NlbGVjdG9yICYmXG4gICAgICAgICAgICBuYXZpZ2F0aW9uU3RvcmUuaW5zdGFuY2UuY29udGFpbmVyUGFnZSAhPT0gZW51bXMuUGFnZUNvbnRhaW5lcnMuTWVzc2FnZSAmJlxuICAgICAgICAgICAgbmF2aWdhdGlvblN0b3JlLmluc3RhbmNlLmNvbnRhaW5lclBhZ2UgIT09IGVudW1zLlBhZ2VDb250YWluZXJzLkF3YXJkaW5nICYmXG4gICAgICAgICAgICBuYXZpZ2F0aW9uU3RvcmUuaW5zdGFuY2UuY29udGFpbmVyUGFnZSAhPT0gZW51bXMuUGFnZUNvbnRhaW5lcnMuU3RhbmRhcmRpc2F0aW9uU2V0dXAgJiZcbiAgICAgICAgICAgIG5hdmlnYXRpb25TdG9yZS5pbnN0YW5jZS5jb250YWluZXJQYWdlICE9PSBlbnVtcy5QYWdlQ29udGFpbmVycy5SZXBvcnRzKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEYXRhIFJlY2VpdmVkIEZvciBPcGVuaW5nIHRoZSByZXNwb25zZS5cbiAgICAgKi9cbiAgICBwcml2YXRlIGluaXRpYXRlU2VhcmNoUmVzcG9uc2UgPSAoc2VhcmNoZWRSZXNwb25zZURhdGE6IFNlYXJjaGVkUmVzcG9uc2VEYXRhKSA9PiB7XG4gICAgICAgIGlmIChzZWFyY2hlZFJlc3BvbnNlRGF0YSkge1xuICAgICAgICAgICAgaWYgKHVzZXJJbmZvU3RvcmUuaW5zdGFuY2UuY3VycmVudE9wZXJhdGlvbk1vZGUgPT09IGVudW1zLk1hcmtlck9wZXJhdGlvbk1vZGUuTWFya2luZykge1xuICAgICAgICAgICAgICAgIGlmIChuYXZpZ2F0aW9uU3RvcmUuaW5zdGFuY2UuY29udGFpbmVyUGFnZSA9PT0gZW51bXMuUGFnZUNvbnRhaW5lcnMuV29ya0xpc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzZWFyY2hlZFJlc3BvbnNlRGF0YS5pc1RlYW1NYW5hZ2VtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZW5SZXNwb25zZUZyb21Xb3JrTGlzdChzZWFyY2hlZFJlc3BvbnNlRGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHVzZXJJbmZvU3RvcmUuaW5zdGFuY2UuY3VycmVudE9wZXJhdGlvbk1vZGUgPT09IGVudW1zLk1hcmtlck9wZXJhdGlvbk1vZGUuVGVhbU1hbmFnZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAoc2VhcmNoZWRSZXNwb25zZURhdGEuaXNUZWFtTWFuYWdlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAobmF2aWdhdGlvblN0b3JlLmluc3RhbmNlLmNvbnRhaW5lclBhZ2UgPT09IGVudW1zLlBhZ2VDb250YWluZXJzLldvcmtMaXN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocWlnU3RvcmUuaW5zdGFuY2Uuc2VsZWN0ZWRRSUdGb3JNYXJrZXJPcGVyYXRpb24uZXhhbWluZXJSb2xlSWQgIT09IHNlYXJjaGVkUmVzcG9uc2VEYXRhLmV4YW1pbmVyUm9sZUlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJZiBzZWFyY2hlZCByZXNwb25zZSBpcyBub3QgYmVsb25ncyB0byBjdXJyZW50IG1hcmtlcidzIHdvcmtsaXN0IHR5cGUgb3IgcmVzcG9uc2UgbW9kZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZW4gLCB3ZSBoYXZlIHRvIGZldGNoIG1hcmtlciBpbmZvcm1hdGlvbiwgd29ya2xpc3QgdHlwZSBhbmRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5kaWRhdGUgbWV0YSBkYXRhIHRvIHVwZGF0ZSBzdG9yZSB2YWx1ZXMgYmVmb3JlIG9wZW5pbmcgdGhlIHNlYXJjaGVkIHJlc3BvbnNlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXJJbmZvcm1hdGlvbkFjdGlvbkNyZWF0b3IuR2V0TWFya2VySW5mb3JtYXRpb24oXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaGVkUmVzcG9uc2VEYXRhLmV4YW1pbmVyUm9sZUlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWFyY2hlZFJlc3BvbnNlRGF0YS5tYXJrU2NoZW1lR3JvdXBJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoZWRSZXNwb25zZURhdGEuYXBwcm92YWxTdGF0dXNJZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeVdvcmtsaXN0VHlwZUNoYW5nZShzZWFyY2hlZFJlc3BvbnNlRGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3BlblJlc3BvbnNlRnJvbVdvcmtMaXN0KHNlYXJjaGVkUmVzcG9uc2VEYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChuYXZpZ2F0aW9uU3RvcmUuaW5zdGFuY2UuY29udGFpbmVyUGFnZSA9PT0gZW51bXMuUGFnZUNvbnRhaW5lcnMuVGVhbU1hbmFnZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3BlblJlc3BvbnNlRnJvbVRlYW1NYW5hZ2VtZW50KHNlYXJjaGVkUmVzcG9uc2VEYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8qIFxuICAgICAgICAgICAgICAgSWYgc2VhcmNoZWQgcmVzcG9uc2Ugbm90IGJlbG9uZ3MgdG8gY3VycmVudCBtYXJrZXIncyB3b3JrbGlzdCwgc3Vib3JkaW5hdGUncyB3b3JrbGlzdFxuICAgICAgICAgICAgICAgb3Igbm90IGF2YWlsYWJsZSBmb3IgbWFya2luZyBjaGVjayB0aGVuIFJpZyBub3QgZm91bmQgcG9wdXAgc2hvdWxkIGJlIHNob3duXG4gICAgICAgICAgICAgICBpbnN0ZWFkIG9mIG5hdmlnYXRpbmcgcmVzcG9uc2Ugc2NyZWVuIGFuZCBoaWRlIGJ1c3kgaW5kaWNhdG9yIGZyb20gdGhlbiBtZW51LlxuICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBpc0J1c3k6IGZhbHNlIH0pO1xuICAgICAgICAgICAgc2VhcmNoUmVzcG9uc2VBY3Rpb25DcmVhdG9yLnNob3dPckhpZGVSaWdOb3RGb3VuZFBvcHVwKHRydWUpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIE1ldGhvZCB3aGljaCBzZXRzIHRoZSBidXN5IGluZGljYXRvciBwcm9wZXJ0aWVzXG4gICAgICogQHBhcmFtIGJ1c3lJbmRpY2F0b3JJbnZva2VyXG4gICAgICogQHBhcmFtIHNob3dCYWNrZ3JvdW5kU2NyZWVuT25CdXN5XG4gICAgICovXG4gICAgcHJpdmF0ZSBzZXRCdXN5SW5kaWNhdG9yUHJvcGVydGllcyhidXN5SW5kaWNhdG9ySW52b2tlcjogZW51bXMuQnVzeUluZGljYXRvckludm9rZXIsXG4gICAgICAgIHNob3dCYWNrZ3JvdW5kU2NyZWVuT25CdXN5OiBib29sZWFuKSB7XG4gICAgICAgIHRoaXMuYnVzeUluZGljYXRvckludm9rZXIgPSBidXN5SW5kaWNhdG9ySW52b2tlcjtcbiAgICAgICAgdGhpcy5zaG93QmFja2dyb3VuZFNjcmVlbk9uQnVzeSA9IHNob3dCYWNrZ3JvdW5kU2NyZWVuT25CdXN5O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE5hdmlnYXRlIHRvIHN0YW5kYXJkaXNhdGlvbiBzZXR1cCBmcm9tIHJlY2VudCBoaXN0b3J5XG4gICAgICogQHBhcmFtIF9oaXN0b3J5SXRlbVxuICAgICAqIEBwYXJhbSBfcWlnSWRcbiAgICAgKi9cbiAgICBwcml2YXRlIG5hdmlnYXRlVG9SZWNlbnRIaXN0b3J5U3RhbmRhcmRpc2F0aW9uU2V0dXAoX2hpc3RvcnlJdGVtPzogaGlzdG9yeUl0ZW0sIF9xaWdJZD86IG51bWJlcikge1xuICAgICAgICAvKkhhbmRsZXMgdGhlIHNjZW5hcmlvIHdoZXJlIHVzZXIgaXMgb2ZmbGluZSBvbiBjbGlja2luZyBvbiBoaXN0b3J5IGxpbmsgaW4gbWVudSovXG4gICAgICAgIGlmICghYXBwbGljYXRpb25TdG9yZS5pbnN0YW5jZS5pc09ubGluZSkge1xuICAgICAgICAgICAgYXBwbGljYXRpb25BY3Rpb25DcmVhdG9yLmNoZWNrQWN0aW9uSW50ZXJydXB0ZWQoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIE1lbnUgaGlzdG9yeSBuYXZpZ2F0aW9uIHRvIG15IHN0YW5kYXJkaXNhdGlvbiBzZXR1cFxuICAgICAgICAgICAgdGhpcy5oaXN0b3J5TmF2aWdhdGlvbkFyZWEgPSBlbnVtcy5IaXN0b3J5TmF2aWdhdGlvbkFyZWEuU3RhbmRhcmRpc2F0aW9uU2V0dXA7XG5cbiAgICAgICAgICAgIHRoaXMuX2ZhaWx1cmVDb2RlID0gdW5kZWZpbmVkO1xuXG4gICAgICAgICAgICAvLyByZXNldHRpbmcgdGhlIG1hcmtpbmcgY2hlY2sgbW9kZSBvbiBtZW51IGl0ZW0gY2xpY2tcbiAgICAgICAgICAgIG1hcmtpbmdDaGVja0FjdGlvbkNyZWF0b3IudG9nZ2xlTWFya2luZ0NoZWNrTW9kZShmYWxzZSk7XG5cbiAgICAgICAgICAgIC8vIGJ1c3kgaW5kaWNhdG9yIHdpbGwgYmUgcmVtb3ZlZFxuICAgICAgICAgICAgLy8gYS4gd2hlbiBuYXZpZ2F0b3IgcmVmZXJlc2ggd2hpbGUgbmF2aWdhdGluZyBiZXR3ZWVuIGRpZmZlcmVudCBhcmVhcyBcbiAgICAgICAgICAgIC8vIGIuIHdoZW4gbmF2aWdhdGluZyBmcm9tIG9uZSBTU1UgdG8gYW5vdGhlciBTU1UgLCBpdCB3aWxsIGJlIHJlc2V0IGJ5IFNUQU5EQVJESVNBVElPTl9SRVNQT05TRV9EQVRBX1VQREFURURfRVZFTlRcbiAgICAgICAgICAgIGJ1c3lJbmRpY2F0b3JBY3Rpb25DcmVhdG9yLnNldEJ1c3lJbmRpY2F0b3JJbnZva2VyKGVudW1zLkJ1c3lJbmRpY2F0b3JJbnZva2VyLmxvYWRpbmdIaXN0b3J5RGV0YWlscyk7XG5cbiAgICAgICAgICAgIGxldCBtZXNzYWdlID0gJ1NlbGVjdGVkIFN0YW5kYXJkaXNhdGlvbiBzZXR1cCBmcm9tIG1lbnUgd2l0aCBDbG9zZSBtZW51IGV2ZW50IHRyaWdnZXJlZC4nO1xuICAgICAgICAgICAgbWVzc2FnZSA9IG1lc3NhZ2UgKyAnIEN1cnJlbnQgY29udGFpbmVyID0+ICcgK1xuICAgICAgICAgICAgICAgIGVudW1zLlBhZ2VDb250YWluZXJzW25hdmlnYXRpb25TdG9yZS5pbnN0YW5jZS5jb250YWluZXJQYWdlXTtcbiAgICAgICAgICAgIC8vIGxvZ2dpbmcgbWVudSBhY3Rpb24gaW4gZ29vZ2xlIGFuYWx5dGljcyBvciBhcHBsaWNhdGlvbiBpbnNpZ2h0cyBiYXNlZCBvbiB0aGUgY29uZmlndXJhdGlvblxuICAgICAgICAgICAgbmV3IGF1ZGl0TG9nZ2luZ0hlbHBlcigpLmxvZ0hlbHBlci5sb2dFdmVudE9uTWVudUFjdGlvbihtZXNzYWdlKTtcblxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGlzT3BlbjogZmFsc2UgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuX2hpc3RvcnlJdGVtID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShfaGlzdG9yeUl0ZW0pKTtcbiAgICAgICAgICAgIGxldCBxaWdJZDogbnVtYmVyID0gX3FpZ0lkID4gMCA/IF9xaWdJZCA6IHRoaXMuX2hpc3RvcnlJdGVtLnFpZ0lkO1xuICAgICAgICAgICAgLy8gc2V0IHRoZSBtYXJrZXIgb3BlcmF0aW9uIG1vZGUgYXMgTWFya2luZ1xuICAgICAgICAgICAgdXNlckluZm9BY3Rpb25DcmVhdG9yLmNoYW5nZU9wZXJhdGlvbk1vZGUoZW51bXMuTWFya2VyT3BlcmF0aW9uTW9kZS5TdGFuZGFyZGlzYXRpb25TZXR1cCwgZmFsc2UsIHRydWUpO1xuXG4gICAgICAgICAgICAvLyBJbnZva2UgdGhlIGFjdGlvbiBjcmVhdG9yIHRvIE9wZW4gdGhlIFFJR1xuICAgICAgICAgICAgcWlnQWN0aW9uQ3JlYXRvci5nZXRRSUdTZWxlY3RvckRhdGEocWlnSWQsIHRydWUsIGZhbHNlLCB0cnVlLCBmYWxzZSwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBPcGVuIHNlYXJjaCByZXNwb25zZSBmcm9tIHdvcmtsaXN0XG4gICAgICogQHBhcmFtIHNlYXJjaGVkUmVzcG9uc2VEYXRhXG4gICAgICovXG4gICAgcHJpdmF0ZSBvcGVuUmVzcG9uc2VGcm9tV29ya0xpc3Qoc2VhcmNoZWRSZXNwb25zZURhdGE6IFNlYXJjaGVkUmVzcG9uc2VEYXRhKSB7XG4gICAgICAgIGxldCBzZWxlY3RlZFJlc3BvbnNlV29ya0xpc3RUeXBlID0gcmVzcG9uc2VTZWFyY2hIZWxwZXIuZ2V0V29ya2xpc3RUeXBlQnlNYXJraW5nTW9kZShcbiAgICAgICAgICAgIHNlYXJjaGVkUmVzcG9uc2VEYXRhLm1hcmtpbmdNb2RlSWQsXG4gICAgICAgICAgICBzZWFyY2hlZFJlc3BvbnNlRGF0YS5pc0RpcmVjdGVkUmVtYXJrLFxuICAgICAgICAgICAgc2VhcmNoZWRSZXNwb25zZURhdGEuaXNBdHlwaWNhbFxuICAgICAgICApO1xuICAgICAgICBpZiAoc2VhcmNoZWRSZXNwb25zZURhdGEucmVzcG9uc2VNb2RlID09PSB3b3JrbGlzdFN0b3JlLmluc3RhbmNlLmdldFJlc3BvbnNlTW9kZVxuICAgICAgICAgICAgJiYgIXdvcmtsaXN0U3RvcmUuaW5zdGFuY2UuaXNNYXJraW5nQ2hlY2tNb2RlXG4gICAgICAgICAgICAmJiB3b3JrbGlzdFN0b3JlLmluc3RhbmNlLmN1cnJlbnRXb3JrbGlzdFR5cGUgPT09IHNlbGVjdGVkUmVzcG9uc2VXb3JrTGlzdFR5cGVcbiAgICAgICAgICAgICYmICF3b3JrbGlzdFN0b3JlLmluc3RhbmNlLmlzTWFya2luZ0NoZWNrV29ya2xpc3RBY2Nlc3NQcmVzZW50KSB7XG5cbiAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgICBJZiBzZWFyY2hlZCByZXNwb25zZSdzIHdvcmtsaXN0IHR5cGUgYW5kIHJlc3BvbnNlIG1vZGUgaXMgc2FtZSBhcyBjdXJyZW50IHdvcmtsaXN0IHR5cGUsIHJlc3BvbnNlIG1vZGVcbiAgICAgICAgICAgICAgIGFuZCBhbHNvIHRoZSBzZWFyY2ggcmVzcG9uc2Ugbm90IGJlbG9uZ3MgdG8gbWFya2luZyBjaGVjayB0aGVuIHdlIGhhdmUgdG8gb3BlbiByZXNwb25zZSBkaXJlY2x0eVxuICAgICAgICAgICAgICAgd2l0aG91dCBmZXRjaGluZyB3b3JrbGlzdCB0eXBlIGFuZCByZWxhdGVkIHN0b3JlIHZhbHVlcy5cbiAgICAgICAgICAgICovXG4gICAgICAgICAgICByZXNwb25zZUhlbHBlci5vcGVuUmVzcG9uc2UocGFyc2VJbnQoc2VhcmNoZWRSZXNwb25zZURhdGEuZGlzcGxheUlkKSxcbiAgICAgICAgICAgICAgICBlbnVtcy5SZXNwb25zZU5hdmlnYXRpb24uc3BlY2lmaWMsXG4gICAgICAgICAgICAgICAgc2VhcmNoZWRSZXNwb25zZURhdGEucmVzcG9uc2VNb2RlLFxuICAgICAgICAgICAgICAgIHNlYXJjaGVkUmVzcG9uc2VEYXRhLm1hcmtHcm91cElkLFxuICAgICAgICAgICAgICAgIGVudW1zLlJlc3BvbnNlVmlld01vZGUuem9uZVZpZXcpO1xuICAgICAgICAgICAgbWFya1NjaGVtZUhlbHBlci5nZXRNYXJrcyhwYXJzZUludChzZWFyY2hlZFJlc3BvbnNlRGF0YS5kaXNwbGF5SWQpLFxuICAgICAgICAgICAgICAgIHNlYXJjaGVkUmVzcG9uc2VEYXRhLm1hcmtpbmdNb2RlSWQpO1xuICAgICAgICAgICAgZUNvdXJzZXdvcmtIZWxwZXIuZmV0Y2hFQ291cnNlV29ya0NhbmRpZGF0ZVNjcmlwdE1ldGFkYXRhKHBhcnNlSW50KHNlYXJjaGVkUmVzcG9uc2VEYXRhLmRpc3BsYXlJZCkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgIElmIHNlYXJjaGVkIHJlc3BvbnNlIGlzIG5vdCBiZWxvbmdzIHRvIGN1cnJlbnQgbWFya2VyJ3Mgd29ya2xpc3QgdHlwZSBvciByZXNwb25zZSBtb2RlXG4gICAgICAgICAgICAgICBvciBpdCBpcyBhIG1hcmtpbmcgY2hlY2sgcmVzcG9uc2UgdGhlbiAsIHdlIGhhdmUgdG8gZmV0Y2ggd29ya2xpc3QgdHlwZSBhbmRcbiAgICAgICAgICAgICAgIGNhbmRpZGF0ZSBtZXRhIGRhdGEgdG8gdXBkYXRlIHN0b3JlIHZhbHVlcyBiZWZvcmUgb3BlbmluZyB0aGUgc2VhcmNoZWQgcmVzcG9uc2UuXG4gICAgICAgICAgICAqL1xuICAgICAgICAgICAgdGhpcy5ub3RpZnlXb3JrbGlzdFR5cGVDaGFuZ2Uoc2VhcmNoZWRSZXNwb25zZURhdGEpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogT3BlbiBzZWFyY2ggcmVzcG9uc2UgZnJvbSB0ZWFtIG1hbmFnZW1lbnRcbiAgICAgKiBAcGFyYW0gc2VhcmNoZWRSZXNwb25zZURhdGFcbiAgICAgKi9cbiAgICBwcml2YXRlIG9wZW5SZXNwb25zZUZyb21UZWFtTWFuYWdlbWVudChzZWFyY2hlZFJlc3BvbnNlRGF0YTogU2VhcmNoZWRSZXNwb25zZURhdGEpIHtcbiAgICAgICAgbGV0IGNhblVzZUNhY2hlID1cbiAgICAgICAgICAgIHNlYXJjaGVkUmVzcG9uc2VEYXRhLmV4YW1pbmVySWQgPT09IHNlYXJjaGVkUmVzcG9uc2VEYXRhLmxvZ2dlZEluRXhhbWluZXJJZCAmJlxuICAgICAgICAgICAgcWlnU3RvcmUuaW5zdGFuY2Uuc2VsZWN0ZWRRSUdGb3JNYXJrZXJPcGVyYXRpb24gIT09IHVuZGVmaW5lZDtcbiAgICAgICAgLypcbiAgICAgICAgICAgSWYgc2VhcmNoZWQgcmVzcG9uc2UgYXZhaWxhYmxlIGZvciBzdWJvcmRpbmF0ZSdzIHdvcmtsaXN0IHRoZW4sXG4gICAgICAgICAgIHRoZSBzZWFyY2ggd2lsbCBiZSBhcHBsaWNhYmxlIG9ubHkgZm9yIHNlbGVjdGVkIHFpZywgaGVuY2Ugbm8gbmVlZCB0byBmZXRjaCBxaWcgZGV0YWlscyBiZWZvcmVcbiAgICAgICAgICAgb3BlbmluZyBzdWJvcmRpbmF0ZSByZXNwb25zZS4gQnV0IHdlIGhhdmUgdG8gZmV0Y2ggd29ya2xpc3QgdHlwZSwgY2FuZGlkYXRlIG1ldGEgZGF0YSBhbmQgdXBkYXRlIHN0b3JlXG4gICAgICAgICAgIHZhbHVlcyBiZWZvcmUgbmF2aWdhdGluZyBzdWJvcmRpbmF0ZSByZXNwb25zZS5cbiAgICAgICAqL1xuICAgICAgICByZXNwb25zZVNlYXJjaEhlbHBlci5vcGVuUUlHRGV0YWlscyhcbiAgICAgICAgICAgIHNlYXJjaGVkUmVzcG9uc2VEYXRhLnF1ZXN0aW9uUGFwZXJJZCxcbiAgICAgICAgICAgIHNlYXJjaGVkUmVzcG9uc2VEYXRhLm1hcmtTY2hlbWVHcm91cElkLFxuICAgICAgICAgICAgc2VhcmNoZWRSZXNwb25zZURhdGEuZXhhbWluZXJSb2xlSWQsXG4gICAgICAgICAgICBjYW5Vc2VDYWNoZSxcbiAgICAgICAgICAgIHNlYXJjaGVkUmVzcG9uc2VEYXRhLmFwcHJvdmFsU3RhdHVzSWQsXG4gICAgICAgICAgICBzZWFyY2hlZFJlc3BvbnNlRGF0YS5tYXJraW5nTWV0aG9kSWQsXG4gICAgICAgICAgICB0cnVlLFxuICAgICAgICAgICAgcWlnU3RvcmUuaW5zdGFuY2Uuc2VsZWN0ZWRRSUdGb3JNYXJrZXJPcGVyYXRpb24uaXNFbGVjdHJvbmljU3RhbmRhcmRpc2F0aW9uVGVhbU1lbWJlcixcbiAgICAgICAgICAgIHRydWVcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBOb3RpZnkgd29ya2xpc3QgdHlwZSBjaGFuZ2VcbiAgICAgKiBAcGFyYW0gc2VhcmNoZWRSZXNwb25zZURhdGFcbiAgICAgKi9cbiAgICBwcml2YXRlIG5vdGlmeVdvcmtsaXN0VHlwZUNoYW5nZShzZWFyY2hlZFJlc3BvbnNlRGF0YTogU2VhcmNoZWRSZXNwb25zZURhdGEpIHtcbiAgICAgICAgbGV0IHNlbGVjdGVkUmVzcG9uc2VXb3JrTGlzdFR5cGUgPSByZXNwb25zZVNlYXJjaEhlbHBlci5nZXRXb3JrbGlzdFR5cGVCeU1hcmtpbmdNb2RlKFxuICAgICAgICAgICAgc2VhcmNoZWRSZXNwb25zZURhdGEubWFya2luZ01vZGVJZCxcbiAgICAgICAgICAgIHNlYXJjaGVkUmVzcG9uc2VEYXRhLmlzRGlyZWN0ZWRSZW1hcmssXG4gICAgICAgICAgICBzZWFyY2hlZFJlc3BvbnNlRGF0YS5pc0F0eXBpY2FsXG4gICAgICAgICk7XG4gICAgICAgIHdvcmtsaXN0QWN0aW9uQ3JlYXRvci5ub3RpZnlXb3JrbGlzdFR5cGVDaGFuZ2UoXG4gICAgICAgICAgICBzZWFyY2hlZFJlc3BvbnNlRGF0YS5tYXJrU2NoZW1lR3JvdXBJZCxcbiAgICAgICAgICAgIHNlYXJjaGVkUmVzcG9uc2VEYXRhLmV4YW1pbmVyUm9sZUlkLFxuICAgICAgICAgICAgc2VhcmNoZWRSZXNwb25zZURhdGEucXVlc3Rpb25QYXBlcklkLFxuICAgICAgICAgICAgc2VsZWN0ZWRSZXNwb25zZVdvcmtMaXN0VHlwZSxcbiAgICAgICAgICAgIHNlYXJjaGVkUmVzcG9uc2VEYXRhLnJlc3BvbnNlTW9kZSxcbiAgICAgICAgICAgIHNlYXJjaGVkUmVzcG9uc2VEYXRhLnJlbWFya1JlcXVlc3RUeXBlLFxuICAgICAgICAgICAgc2VhcmNoZWRSZXNwb25zZURhdGEuaXNEaXJlY3RlZFJlbWFyayxcbiAgICAgICAgICAgIHFpZ1N0b3JlLmluc3RhbmNlLnNlbGVjdGVkUUlHRm9yTWFya2VyT3BlcmF0aW9uLmlzRWxlY3Ryb25pY1N0YW5kYXJkaXNhdGlvblRlYW1NZW1iZXJcbiAgICAgICAgKTtcbiAgICB9XG59XG5cbmV4cG9ydCA9IE1lbnVXcmFwcGVyO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vc291cmNlLW1hcC1sb2FkZXIhLi9zcmMvY29tcG9uZW50cy9tZW51L21lbnV3cmFwcGVyLnRzeCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFrQkE7O0FBRUE7QUFDQTtBQUFBO0FBb0JBOzs7O0FBSUE7QUFDQTtBQUFBO0FBakJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF1SEE7O0FBRUE7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFJQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBSUE7QUFDQTtBQWdKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBdUtBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQU1BO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUdBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQVVBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBcUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUlBO0FBQ0E7QUFRQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXZ6QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFBQTtBQUVBO0FBUUE7QUFHQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBSUE7QUFJQTtBQUlBO0FBTUE7QUFFQTtBQUdBO0FBS0E7QUFHQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQXlEQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUlBO0FBRUE7QUFDQTtBQUNBO0FBS0E7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQU1BO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFLQTs7O0FBQUE7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQVNBO0FBQ0E7OztBQUFBO0FBNkJBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQVVBO0FBQ0E7QUFNQTtBQUNBO0FBVUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQW9PQTtBQUhBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFBQTtBQWVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFTQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFrREE7Ozs7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7O0FBR0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7OztBQUlBO0FBQ0E7QUFLQTtBQUVBO0FBQ0E7QUFBQTtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7O0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTs7Ozs7QUFLQTtBQUNBO0FBV0E7QUFFQTs7O0FBR0E7QUFDQTtBQUNBO0FBS0E7QUFVQTtBQUNBO0FBQUE7QUFFQTsiLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),

/***/ 355:
/* no static exports found */
/* all exports used */
/*!********************************************************!*\
  !*** ./src/components/response/responsenavigation.tsx ***!
  \********************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n/* tslint:disable:no-unused-variable */\r\nvar React = __webpack_require__(/*! react */ 0);\r\n/* tslint:enable:no-unused-variable */\r\nvar pureRenderComponent = __webpack_require__(/*! ../base/purerendercomponent */ 227);\r\nvar localeStore = __webpack_require__(/*! ../../stores/locale/localestore */ 226);\r\nvar stringHelper = __webpack_require__(/*! ../../utility/generic/stringhelper */ 254);\r\nvar enums = __webpack_require__(/*! ../utility/enums */ 225);\r\nvar keyCodes = __webpack_require__(/*! ../../utility/keyboardacess/keycodes */ 335);\r\nvar moduleKeyHandler = __webpack_require__(/*! ../../utility/generic/modulekeyhandler */ 323);\r\nvar modulekeys = __webpack_require__(/*! ../../utility/generic/modulekeys */ 318);\r\nvar keyDownHelper = __webpack_require__(/*! ../../utility/generic/keydownhelper */ 258);\r\nvar markingActionCreator = __webpack_require__(/*! ../../actions/marking/markingactioncreator */ 246);\r\nvar markingStore = __webpack_require__(/*! ../../stores/marking/markingstore */ 236);\r\nvar worklistStore = __webpack_require__(/*! ../../stores/worklist/workliststore */ 231);\r\nvar constants = __webpack_require__(/*! ../utility/constants */ 241);\r\nvar qigStore = __webpack_require__(/*! ../../stores/qigselector/qigstore */ 230);\r\nvar markingHelper = __webpack_require__(/*! ../../utility/markscheme/markinghelper */ 267);\r\nvar popupHelper = __webpack_require__(/*! ../utility/popup/popuphelper */ 288);\r\nvar submitStore = __webpack_require__(/*! ../../stores/submit/submitstore */ 293);\r\nvar worklistActionCreator = __webpack_require__(/*! ../../actions/worklist/worklistactioncreator */ 261);\r\nvar responseStore = __webpack_require__(/*! ../../stores/response/responsestore */ 235);\r\nvar navigationHelper = __webpack_require__(/*! ../utility/navigation/navigationhelper */ 248);\r\nvar busyIndicatorActionCreator = __webpack_require__(/*! ../../actions/busyindicator/busyindicatoractioncreator */ 279);\r\nvar qualityfeedbackHelper = __webpack_require__(/*! ../../utility/qualityfeedback/qualityfeedbackhelper */ 309);\r\nvar submitHelper = __webpack_require__(/*! ../utility/submit/submithelper */ 282);\r\nvar markSchemeHelper = __webpack_require__(/*! ../../utility/markscheme/markschemehelper */ 276);\r\nvar responseActionCreator = __webpack_require__(/*! ../../actions/response/responseactioncreator */ 257);\r\nvar markByAnnotationHelper = __webpack_require__(/*! ../utility/marking/markbyannotationhelper */ 334);\r\nvar teamManagementStore = __webpack_require__(/*! ../../stores/teammanagement/teammanagementstore */ 245);\r\nvar loginStore = __webpack_require__(/*! ../../stores/login/loginstore */ 286);\r\nvar responseHelper = __webpack_require__(/*! ../utility/responsehelper/responsehelper */ 249);\r\nvar TagList = __webpack_require__(/*! ./responsescreen/taglist */ 313);\r\nvar tagStore = __webpack_require__(/*! ../../stores/tags/tagstore */ 331);\r\nvar markerOperationModeFactory = __webpack_require__(/*! ../utility/markeroperationmode/markeroperationmodefactory */ 232);\r\nvar awardingStore = __webpack_require__(/*! ../../stores/awarding/awardingstore */ 270);\r\nvar standardisationSetupStore = __webpack_require__(/*! ../../stores/standardisationsetup/standardisationsetupstore */ 237);\r\n/**\r\n * React component for Response navigation.\r\n */\r\nvar ResponseNavigation = /** @class */ (function (_super) {\r\n    __extends(ResponseNavigation, _super);\r\n    /**\r\n     * constructor\r\n     * @param props\r\n     * @param state\r\n     */\r\n    function ResponseNavigation(props, state) {\r\n        var _this = _super.call(this, props, state) || this;\r\n        _this._boundHandleKeyDown = null;\r\n        _this.isResponseNavigationArrowClicked = false;\r\n        /**\r\n         * Go to another response after saving mark if there is any\r\n         */\r\n        _this.navigateAwayFromResponse = function (navigationFrom) {\r\n            if (markingStore.instance.navigateTo === enums.SaveAndNavigate.toResponse) {\r\n                /** For response auto navigation when a response gets 100% marked, the responseNavigationDirection will get undefined  */\r\n                if (markingStore.instance.currentResponseMarkingProgress === 100 && _this.responseNavigationDirection === undefined\r\n                    && navigationFrom !== enums.ResponseNavigation.markScheme) {\r\n                    _this.props.moveCallback(enums.ResponseNavigation.next);\r\n                }\r\n                else {\r\n                    if (!_this.isResponseNavigationArrowClicked) {\r\n                        /** If it is navigating from markscheme then ,set the isNavigationThroughMarkScheme as markScheme  */\r\n                        markingActionCreator.setNavigationThroughMarkscheme(enums.ResponseNavigation.markScheme);\r\n                        if (navigationFrom === enums.ResponseNavigation.markScheme &&\r\n                            !markSchemeHelper.isNextResponseAvailable) {\r\n                            _this.responseNavigationDirection = enums.ResponseNavigation.first;\r\n                        }\r\n                        else if (navigationFrom === enums.ResponseNavigation.markScheme) {\r\n                            _this.responseNavigationDirection = enums.ResponseNavigation.next;\r\n                        }\r\n                    }\r\n                    else {\r\n                        _this.isResponseNavigationArrowClicked = false;\r\n                    }\r\n                    _this.props.moveCallback(_this.responseNavigationDirection);\r\n                }\r\n            }\r\n            else {\r\n                //reset the isResponseNavigationArrowClicked when navigate to current response view\r\n                _this.isResponseNavigationArrowClicked = false;\r\n                /** Set the isNavigationThroughMarkScheme as None ,when we navigate to (inbox,worklist,etc) other than response. */\r\n                markingActionCreator.setNavigationThroughMarkscheme(enums.ResponseNavigation.none);\r\n            }\r\n        };\r\n        /**\r\n         * Navigation of the response after submitting the response from markscheme\r\n         */\r\n        _this.navigateToNextResponseAfterSubmit = function (submittedMarkGroupIds, selectedDisplayId, isFromMarkScheme) {\r\n            // If Marker got withdrawn during the actions. Skip the activities.\r\n            if (qigStore.instance.selectedQIGForMarkerOperation === undefined) {\r\n                return;\r\n            }\r\n            var worklistNavigationRequired = false;\r\n            _this.isWorkListDataRefreshedAfterSubmit = false;\r\n            if (isFromMarkScheme) {\r\n                if (submitStore.instance.getSubmitResponseReturn.hasQualityFeedbackOutstanding) {\r\n                    worklistNavigationRequired = true;\r\n                }\r\n                else {\r\n                    var worklistType = submitStore.instance.getCurrentWorklistType;\r\n                    if ((submitStore.instance.getCurrentWorklistType === enums.WorklistType.standardisation\r\n                        || submitStore.instance.getCurrentWorklistType === enums.WorklistType.secondstandardisation)) {\r\n                        if (submitStore.instance.getSubmitResponseReturn.examinerApprovalStatus === enums.ExaminerApproval.Approved) {\r\n                            // Marker Got Approved during submission. Message is displayed from worklist component helper.\r\n                            // Set The new worklist type as Live and navigate\r\n                            worklistType = enums.WorklistType.live;\r\n                            worklistNavigationRequired = true;\r\n                        }\r\n                    }\r\n                    // Clear the marks and annotations if needed for Reloading the DefinitiveMarks\r\n                    submitHelper.clearMarksAndAnnotations(submittedMarkGroupIds);\r\n                    // If the marker having more than 1 responses in his worklist and he got approved with the first std response,\r\n                    // Publish new marking mode event. To change marking mode to live\r\n                    if (worklistNavigationRequired ||\r\n                        worklistStore.instance.isNextResponseAvailable(selectedDisplayId)\r\n                            && !submitStore.instance.isExaminerApprovalStatusChanged) {\r\n                        var responseMode = enums.ResponseMode.open;\r\n                        var markSchemeGroupId = qigStore.instance.selectedQIGForMarkerOperation.markSchemeGroupId;\r\n                        var examinerRoleId = qigStore.instance.selectedQIGForMarkerOperation.examinerRoleId;\r\n                        var questionPaperPartId = qigStore.instance.selectedQIGForMarkerOperation.questionPaperPartId;\r\n                        var remarkRequestType = worklistStore.instance.getRemarkRequestType;\r\n                        var isDirectedRemark = worklistStore.instance.isDirectedRemark;\r\n                        worklistActionCreator.notifyWorklistTypeChange(markSchemeGroupId, examinerRoleId, questionPaperPartId, worklistType, responseMode, remarkRequestType, isDirectedRemark, qigStore.instance.selectedQIGForMarkerOperation.isElectronicStandardisationTeamMember, false);\r\n                        _this.isWorkListDataRefreshedAfterSubmit = true;\r\n                    }\r\n                    else {\r\n                        worklistNavigationRequired = true;\r\n                    }\r\n                }\r\n                if (worklistNavigationRequired) {\r\n                    navigationHelper.loadWorklist();\r\n                }\r\n            }\r\n        };\r\n        /**\r\n         * Worklist data changed.\r\n         */\r\n        _this.workListDataChanged = function () {\r\n            if (_this.isWorkListDataRefreshedAfterSubmit) {\r\n                _this.isWorkListDataRefreshedAfterSubmit = false;\r\n                _this.navigateResponse(enums.ResponseNavigation.next, true);\r\n            }\r\n        };\r\n        _this._boundHandleKeyDown = _this.handleResponseNavigation.bind(_this, null);\r\n        _this.handlePreviousResponseNavigation = _this.handleResponseNavigation.bind(_this, enums.ResponseNavigation.previous);\r\n        _this.handleNextResponseNavigation = _this.handleResponseNavigation.bind(_this, enums.ResponseNavigation.next);\r\n        _this.workListDataChanged = _this.workListDataChanged.bind(_this);\r\n        _this.markByAnnotationHelper = new markByAnnotationHelper();\r\n        return _this;\r\n    }\r\n    /**\r\n     * Render method\r\n     */\r\n    ResponseNavigation.prototype.render = function () {\r\n        var tags = tagStore.instance.tags;\r\n        var selectedTag = markerOperationModeFactory.operationMode.getTagId(responseStore.instance.selectedDisplayId.toString());\r\n        return (React.createElement(\"div\", { className: 'response-header' },\r\n            React.createElement(\"div\", { className: 'response-header-inner' },\r\n                this.renderResponseNavigationButton(enums.ResponseNavigation.previous),\r\n                React.createElement(\"div\", { className: 'response-title' },\r\n                    React.createElement(\"div\", { id: 'header1', className: 'response-id' },\r\n                        React.createElement(\"h1\", { className: 'reponse-id-label' }, this.setResponseHeaderText()),\r\n                        (selectedTag === undefined) ? null :\r\n                            React.createElement(TagList, { selectedTagId: selectedTag, tagList: tags, selectedLanguage: this.props.selectedLanguage, id: 'tags', key: 'tag_key', renderedOn: Date.now(), isESResponse: markerOperationModeFactory.operationMode.isStandardisationSetupMode, markingMode: markerOperationModeFactory.operationMode.isStandardisationSetupMode ?\r\n                                    enums.MarkingMode.Pre_ES_TeamStandardisation : undefined })),\r\n                    !teamManagementStore.instance.isRedirectFromException ?\r\n                        React.createElement(\"div\", { id: 'header2', className: 'response-position' }, this.setResponseSubHeaderText()) : null),\r\n                this.renderResponseNavigationButton(enums.ResponseNavigation.next))));\r\n    };\r\n    /**\r\n     * Method to set the Response sub header text as per the worklist type\r\n     */\r\n    ResponseNavigation.prototype.setResponseSubHeaderText = function () {\r\n        var responseHeader;\r\n        if (markerOperationModeFactory.operationMode.isAwardingMode) {\r\n            responseHeader = stringHelper.format(localeStore.instance.TranslateText('awarding.response-data.candidateno'), [awardingStore.instance.selectedCandidateData.centreCandidateNo]);\r\n        }\r\n        else if (markerOperationModeFactory.operationMode.isStandardisationSetupMode) {\r\n            switch (standardisationSetupStore.instance.selectedStandardisationSetupWorkList) {\r\n                case enums.StandardisationSetup.SelectResponse:\r\n                    if (standardisationSetupStore.instance.selectedTabInSelectResponse\r\n                        === enums.StandardisationSessionTab.CurrentSession) {\r\n                        responseHeader = stringHelper.format(localeStore.instance.TranslateText('marking.response.navigation-bar.script-position'), [this.props.currentResponse.toString(), this.props.totalResponses.toString(), this.props.centreId]);\r\n                    }\r\n                    else {\r\n                        responseHeader = stringHelper.format(localeStore.instance.TranslateText('marking.response.navigation-bar.response-position-in-worklist'), [this.props.currentResponse.toString(), this.props.totalResponses.toString()]);\r\n                    }\r\n                    break;\r\n                case enums.StandardisationSetup.ClassifiedResponse:\r\n                    var responseHeaderDetail = standardisationSetupStore.instance.getClassifiedResponseHeaderDetail(this.props.responseId);\r\n                    responseHeader = stringHelper.format(localeStore.instance.TranslateText('marking.response.navigation-bar.classified-response-position-in-worklist'), [responseHeaderDetail.currentPosition.toString(),\r\n                        responseHeaderDetail.classifiedWorklistCountByMarkingMode.toString()]);\r\n                    break;\r\n                default:\r\n                    responseHeader = stringHelper.format(localeStore.instance.TranslateText('marking.response.navigation-bar.response-position-in-worklist'), [this.props.currentResponse.toString(), this.props.totalResponses.toString()]);\r\n                    break;\r\n            }\r\n        }\r\n        else {\r\n            responseHeader = stringHelper.format(localeStore.instance.TranslateText('marking.response.navigation-bar.response-position-in-worklist'), [this.props.currentResponse.toString(), this.props.totalResponses.toString()]);\r\n        }\r\n        return responseHeader;\r\n    };\r\n    /**\r\n     * Method to set the Response header text as per the worklist type\r\n     */\r\n    ResponseNavigation.prototype.setResponseHeaderText = function () {\r\n        var workListType = worklistStore.instance.currentWorklistType;\r\n        var markingMode = worklistStore.instance.getMarkingModeByWorkListType(workListType);\r\n        if (standardisationSetupStore.instance.isSelectResponsesWorklist\r\n            || standardisationSetupStore.instance.isSelectedResponsePreviousSessionWorklist) {\r\n            return ((localeStore.instance.TranslateText('marking.worklist.response-data.stm-setup-response-tittle')) + ' 1' +\r\n                this.props.responseId);\r\n        }\r\n        // Set response header text for classified response\r\n        if (markerOperationModeFactory.operationMode.isStandardisationSetupMode &&\r\n            standardisationSetupStore.instance.isClassifiedWorklist) {\r\n            var responseHeaderDetail = standardisationSetupStore.instance.getClassifiedResponseHeaderDetail(this.props.responseId);\r\n            var responseHeader = void 0;\r\n            responseHeader = (localeStore.instance.TranslateText('standardisation-setup.standardisation-setup-worklist.classification-type.'\r\n                + enums.MarkingMode[responseHeaderDetail.markingModeId]));\r\n            responseHeader = responseHeaderDetail.rigOrder && responseHeaderDetail.rigOrder !== 0 ?\r\n                responseHeader + ' ' + responseHeaderDetail.rigOrder.toString() : responseHeader;\r\n            return responseHeader;\r\n        }\r\n        if (markingMode === enums.MarkingMode.ES_TeamApproval) {\r\n            if (qigStore.instance.selectedQIGForMarkerOperation.isElectronicStandardisationTeamMember === true) {\r\n                return ((localeStore.instance.TranslateText('marking.worklist.response-data.stm-standardisation-response-title')) + ' ' +\r\n                    this.props.responseId);\r\n            }\r\n            else {\r\n                return ((localeStore.instance.TranslateText('marking.worklist.response-data.second-standardisation-response-title')) + ' ' +\r\n                    this.props.responseId);\r\n            }\r\n        }\r\n        else if (workListType === enums.WorklistType.practice) {\r\n            return ((localeStore.instance.TranslateText('marking.worklist.response-data.practice-response-title')) + ' ' +\r\n                this.props.responseId);\r\n        }\r\n        else if (workListType === enums.WorklistType.standardisation) {\r\n            return ((localeStore.instance.TranslateText('marking.worklist.response-data.standardisation-response-title')) + ' ' +\r\n                this.props.responseId);\r\n        }\r\n        else if (workListType === enums.WorklistType.secondstandardisation) {\r\n            return ((localeStore.instance.TranslateText('marking.worklist.response-data.second-standardisation-response-title')) + ' ' +\r\n                this.props.responseId);\r\n        }\r\n        else if ((worklistStore.instance.currentWorklistType === enums.WorklistType.directedRemark\r\n            || (worklistStore.instance.currentWorklistType === enums.WorklistType.pooledRemark)\r\n                && worklistStore.instance.getRemarkRequestType !== enums.RemarkRequestType.Unknown)\r\n            && worklistStore.instance.getRemarkRequestType !== enums.RemarkRequestType.QualityRemark) {\r\n            // If Atypical response get the remark string append to atypical indicator\r\n            if (responseHelper.isAtypicalResponse()) {\r\n                return this.atypicalRemarkHeader;\r\n            }\r\n            // Creates string as RemarkRequestType &nbsp; Response Id\r\n            if (loginStore.instance.isAdminRemarker) {\r\n                return (localeStore.instance.TranslateText('generic.remark-types.long-names.AdminRemark')) + ' ' +\r\n                    this.props.responseId;\r\n            }\r\n            else {\r\n                return stringHelper.format(localeStore.instance.TranslateText(this.getDirectedRemarkLocaleKey(worklistStore.instance.getRemarkRequestType)), [constants.NONBREAKING_HYPHEN_UNICODE])\r\n                    + constants.NONBREAKING_WHITE_SPACE + this.props.responseId;\r\n            }\r\n        }\r\n        else if (worklistStore.instance.currentWorklistType === enums.WorklistType.atypical) {\r\n            return ((localeStore.instance.TranslateText('marking.response.navigation-bar.atypical-response-id-label')) + ' ' +\r\n                this.props.responseId);\r\n            /* Response identifier in the top bar shall appear as \"Simulation response\",\r\n            with response ID if the worklist type is simulation.*/\r\n        }\r\n        else if (worklistStore.instance.currentWorklistType === enums.WorklistType.simulation) {\r\n            return ((localeStore.instance.TranslateText('marking.response.navigation-bar.simulation-response-id-label')) + ' ' +\r\n                this.props.responseId);\r\n        }\r\n        else if (markerOperationModeFactory.operationMode.isAwardingMode) {\r\n            return (stringHelper.format(localeStore.instance.TranslateText('awarding.response-data.centrename'), [awardingStore.instance.selectedCandidateData.centreNumber]));\r\n        }\r\n        else {\r\n            return ((localeStore.instance.TranslateText('marking.response.navigation-bar.response-id-label')) + ' ' +\r\n                this.props.responseId);\r\n        }\r\n    };\r\n    Object.defineProperty(ResponseNavigation.prototype, \"atypicalRemarkHeader\", {\r\n        // Gets the atypical remark header text.\r\n        get: function () {\r\n            if (loginStore.instance.isAdminRemarker) {\r\n                return localeStore.instance.TranslateText('marking.response.navigation-bar.atypical-remark-response-id-label') + ' ' +\r\n                    (localeStore.instance.TranslateText('generic.remark-types.long-names.AdminRemark')) + ' ' +\r\n                    this.props.responseId;\r\n            }\r\n            else {\r\n                return stringHelper.format((localeStore.instance.TranslateText('marking.response.navigation-bar.atypical-remark-response-id-label')) + ' ' +\r\n                    localeStore.instance.TranslateText(this.getDirectedRemarkLocaleKey(worklistStore.instance.getRemarkRequestType)), [constants.NONBREAKING_HYPHEN_UNICODE])\r\n                    + constants.NONBREAKING_WHITE_SPACE + this.props.responseId;\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * This method will render response navigation buttons.\r\n     * @param button : navigation button\r\n     */\r\n    ResponseNavigation.prototype.renderResponseNavigationButton = function (button) {\r\n        if (qualityfeedbackHelper.isResponseNavigationBlocked()) {\r\n            return null;\r\n        }\r\n        else {\r\n            if (this.props.isPreviousResponseAvailable && button === enums.ResponseNavigation.previous) {\r\n                return (React.createElement(\"a\", { href: 'javascript:void(0);', onClick: this.handlePreviousResponseNavigation, className: 'response-nav response-nav-prev', title: localeStore.instance.TranslateText('marking.response.navigation-bar.previous-response-button-tooltip') },\r\n                    React.createElement(\"span\", { className: 'sprite-icon left-arrow-light' }, localeStore.instance.TranslateText('marking.response.navigation-bar.previous-response-button-tooltip'))));\r\n            }\r\n            else if (this.props.isNextResponseAvailable && button === enums.ResponseNavigation.next) {\r\n                return (React.createElement(\"a\", { href: 'javascript:void(0);', onClick: this.handleNextResponseNavigation, className: 'response-nav response-nav-next', title: localeStore.instance.TranslateText('marking.response.navigation-bar.next-response-button-tooltip') },\r\n                    React.createElement(\"span\", { className: 'sprite-icon right-arrow-light' }, localeStore.instance.TranslateText('marking.response.navigation-bar.next-response-button-tooltip'))));\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * This function gets invoked when the component is about to be mounted\r\n     */\r\n    ResponseNavigation.prototype.componentDidMount = function () {\r\n        responseActionCreator.reRenderBreadCrumbAfterLoadingResponseID();\r\n        /*Adding global handler */\r\n        var scrollHandler = new moduleKeyHandler(modulekeys.RESPONSE_NAVIGATION, enums.Priority.Third, true, this._boundHandleKeyDown, enums.KeyMode.down);\r\n        keyDownHelper.instance.mountKeyDownHandler(scrollHandler);\r\n        markingStore.instance.addListener(markingStore.MarkingStore.READY_TO_NAVIGATE, this.navigateAwayFromResponse);\r\n        submitStore.instance.addListener(submitStore.SubmitStore.NAVIGATE_AFTER_SUBMIT, this.navigateToNextResponseAfterSubmit);\r\n        worklistStore.instance.addListener(worklistStore.WorkListStore.WORKLIST_MARKING_MODE_CHANGE, this.workListDataChanged);\r\n    };\r\n    /**\r\n     * This function gets invoked when the component is updating\r\n     */\r\n    ResponseNavigation.prototype.componentDidUpdate = function () {\r\n        responseActionCreator.reRenderBreadCrumbAfterLoadingResponseID();\r\n    };\r\n    /**\r\n     * This function gets invoked when the component is about to be unmounted\r\n     */\r\n    ResponseNavigation.prototype.componentWillUnmount = function () {\r\n        keyDownHelper.instance.unmountKeyHandler(modulekeys.RESPONSE_NAVIGATION);\r\n        markingStore.instance.removeListener(markingStore.MarkingStore.READY_TO_NAVIGATE, this.navigateAwayFromResponse);\r\n        submitStore.instance.removeListener(submitStore.SubmitStore.NAVIGATE_AFTER_SUBMIT, this.navigateToNextResponseAfterSubmit);\r\n        worklistStore.instance.removeListener(worklistStore.WorkListStore.WORKLIST_MARKING_MODE_CHANGE, this.workListDataChanged);\r\n    };\r\n    /**\r\n     * This method will handle click events and keyboard events\r\n     */\r\n    ResponseNavigation.prototype.handleResponseNavigation = function (direction, keyEvent) {\r\n        /* If pressed key is not right arrow or left arrow it will skip */\r\n        if (keyEvent.keyCode !== undefined && keyEvent.keyCode === keyCodes.LEFT_KEY) {\r\n            direction = enums.ResponseNavigation.previous;\r\n        }\r\n        else if (keyEvent.keyCode !== undefined && (keyEvent.keyCode === keyCodes.RIGHT_KEY)) {\r\n            direction = enums.ResponseNavigation.next;\r\n        }\r\n        else if (keyEvent.charCode !== undefined) {\r\n            this.responseNavigationDirection = enums.ResponseNavigation.next;\r\n            return;\r\n        }\r\n        this.isResponseNavigationArrowClicked = true;\r\n        this.navigateResponse(direction, false);\r\n    };\r\n    /**\r\n     * This method will handle the navigation\r\n     * @param direction\r\n     * @param isAfterSubmit\r\n     */\r\n    ResponseNavigation.prototype.navigateResponse = function (direction, isAfterSubmit) {\r\n        //set the isNavigationThroughMarkScheme variable as none since it is not navigating from the markscheme\r\n        markingActionCreator.setNavigationThroughMarkscheme(enums.ResponseNavigation.none);\r\n        if (navigationHelper.navigationAllowed(direction, this.props.isNextResponseAvailable, this.props.isPreviousResponseAvailable)) {\r\n            this.responseNavigationDirection = direction;\r\n            var responseNavigationFailureReasons = new Array();\r\n            if (!isAfterSubmit) {\r\n                responseNavigationFailureReasons = markingHelper.canNavigateAwayFromCurrentResponse();\r\n            }\r\n            // If there is any navigation failure reason available then we will show respective popups.\r\n            if (responseNavigationFailureReasons.length > 0) {\r\n                popupHelper.navigateAwayFromResponse(responseNavigationFailureReasons, enums.SaveAndNavigate.toResponse);\r\n            }\r\n            else {\r\n                if (markingStore.instance.isMarkingInProgress) {\r\n                    // if marking progressing and responseNavigationFailureReason contain none only\r\n                    markingActionCreator.saveAndNavigate(enums.SaveAndNavigate.toResponse);\r\n                }\r\n                else if (!markingStore.instance.isMarkingInProgress) {\r\n                    busyIndicatorActionCreator.setBusyIndicatorInvoker(enums.BusyIndicatorInvoker.none);\r\n                    /** navigating from a response which is in view mode doesn't require save marks */\r\n                    this.props.moveCallback(this.responseNavigationDirection, isAfterSubmit);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Get the directed remark locale key according to the directed remark request type.\r\n     * @param {enums.RemarkRequestType} remarkRequestType\r\n     * @returns remark request key\r\n     */\r\n    ResponseNavigation.prototype.getDirectedRemarkLocaleKey = function (remarkRequestType) {\r\n        return 'generic.remark-types.long-names.' + enums.RemarkRequestType[remarkRequestType];\r\n    };\r\n    return ResponseNavigation;\r\n}(pureRenderComponent));\r\nmodule.exports = ResponseNavigation;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzU1LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvcmVzcG9uc2UvcmVzcG9uc2VuYXZpZ2F0aW9uLnRzeD9iYmU2Il0sInNvdXJjZXNDb250ZW50IjpbIi8qIHRzbGludDpkaXNhYmxlOm5vLXVudXNlZC12YXJpYWJsZSAqL1xuaW1wb3J0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbi8qIHRzbGludDplbmFibGU6bm8tdW51c2VkLXZhcmlhYmxlICovXG5pbXBvcnQgcHVyZVJlbmRlckNvbXBvbmVudCA9IHJlcXVpcmUoJy4uL2Jhc2UvcHVyZXJlbmRlcmNvbXBvbmVudCcpO1xuaW1wb3J0IGxvY2FsZVN0b3JlID0gcmVxdWlyZSgnLi4vLi4vc3RvcmVzL2xvY2FsZS9sb2NhbGVzdG9yZScpO1xuaW1wb3J0IHN0cmluZ0hlbHBlciA9IHJlcXVpcmUoJy4uLy4uL3V0aWxpdHkvZ2VuZXJpYy9zdHJpbmdoZWxwZXInKTtcbmltcG9ydCBlbnVtcyA9IHJlcXVpcmUoJy4uL3V0aWxpdHkvZW51bXMnKTtcbmltcG9ydCBrZXlDb2RlcyA9IHJlcXVpcmUoJy4uLy4uL3V0aWxpdHkva2V5Ym9hcmRhY2Vzcy9rZXljb2RlcycpO1xuaW1wb3J0IG1vZHVsZUtleUhhbmRsZXIgPSByZXF1aXJlKCcuLi8uLi91dGlsaXR5L2dlbmVyaWMvbW9kdWxla2V5aGFuZGxlcicpO1xuaW1wb3J0IG1vZHVsZWtleXMgPSByZXF1aXJlKCcuLi8uLi91dGlsaXR5L2dlbmVyaWMvbW9kdWxla2V5cycpO1xuaW1wb3J0IGtleURvd25IZWxwZXIgPSByZXF1aXJlKCcuLi8uLi91dGlsaXR5L2dlbmVyaWMva2V5ZG93bmhlbHBlcicpO1xuaW1wb3J0IG1hcmtpbmdBY3Rpb25DcmVhdG9yID0gcmVxdWlyZSgnLi4vLi4vYWN0aW9ucy9tYXJraW5nL21hcmtpbmdhY3Rpb25jcmVhdG9yJyk7XG5pbXBvcnQgbWFya2luZ1N0b3JlID0gcmVxdWlyZSgnLi4vLi4vc3RvcmVzL21hcmtpbmcvbWFya2luZ3N0b3JlJyk7XG5pbXBvcnQgd29ya2xpc3RTdG9yZSA9IHJlcXVpcmUoJy4uLy4uL3N0b3Jlcy93b3JrbGlzdC93b3JrbGlzdHN0b3JlJyk7XG5pbXBvcnQgY29uc3RhbnRzID0gcmVxdWlyZSgnLi4vdXRpbGl0eS9jb25zdGFudHMnKTtcbmltcG9ydCBxaWdTdG9yZSA9IHJlcXVpcmUoJy4uLy4uL3N0b3Jlcy9xaWdzZWxlY3Rvci9xaWdzdG9yZScpO1xuaW1wb3J0IG1hcmtpbmdIZWxwZXIgPSByZXF1aXJlKCcuLi8uLi91dGlsaXR5L21hcmtzY2hlbWUvbWFya2luZ2hlbHBlcicpO1xuaW1wb3J0IHBvcHVwSGVscGVyID0gcmVxdWlyZSgnLi4vdXRpbGl0eS9wb3B1cC9wb3B1cGhlbHBlcicpO1xuaW1wb3J0IHN1Ym1pdFN0b3JlID0gcmVxdWlyZSgnLi4vLi4vc3RvcmVzL3N1Ym1pdC9zdWJtaXRzdG9yZScpO1xuaW1wb3J0IHdvcmtsaXN0QWN0aW9uQ3JlYXRvciA9IHJlcXVpcmUoJy4uLy4uL2FjdGlvbnMvd29ya2xpc3Qvd29ya2xpc3RhY3Rpb25jcmVhdG9yJyk7XG5pbXBvcnQgcmVzcG9uc2VTdG9yZSA9IHJlcXVpcmUoJy4uLy4uL3N0b3Jlcy9yZXNwb25zZS9yZXNwb25zZXN0b3JlJyk7XG5pbXBvcnQgbmF2aWdhdGlvbkhlbHBlciA9IHJlcXVpcmUoJy4uL3V0aWxpdHkvbmF2aWdhdGlvbi9uYXZpZ2F0aW9uaGVscGVyJyk7XG5pbXBvcnQgcXVhbGl0eUZlZWRiYWNrSGVscGVyID0gcmVxdWlyZSgnLi4vLi4vdXRpbGl0eS9xdWFsaXR5ZmVlZGJhY2svcXVhbGl0eWZlZWRiYWNraGVscGVyJyk7XG5pbXBvcnQgUHJvbWlzZSA9IHJlcXVpcmUoJ2VzNi1wcm9taXNlJyk7XG5pbXBvcnQgYnVzeUluZGljYXRvckFjdGlvbkNyZWF0b3IgPSByZXF1aXJlKCcuLi8uLi9hY3Rpb25zL2J1c3lpbmRpY2F0b3IvYnVzeWluZGljYXRvcmFjdGlvbmNyZWF0b3InKTtcbmltcG9ydCBleGNlcHRpb25BY3Rpb25DcmVhdG9yID0gcmVxdWlyZSgnLi4vLi4vYWN0aW9ucy9leGNlcHRpb24vZXhjZXB0aW9uYWN0aW9uY3JlYXRvcicpO1xuaW1wb3J0IGV4Y2VwdGlvblN0b3JlID0gcmVxdWlyZSgnLi4vLi4vc3RvcmVzL2V4Y2VwdGlvbi9leGNlcHRpb25zdG9yZScpO1xuaW1wb3J0IHF1YWxpdHlmZWVkYmFja0hlbHBlciA9IHJlcXVpcmUoJy4uLy4uL3V0aWxpdHkvcXVhbGl0eWZlZWRiYWNrL3F1YWxpdHlmZWVkYmFja2hlbHBlcicpO1xuaW1wb3J0IHN1Ym1pdEhlbHBlciA9IHJlcXVpcmUoJy4uL3V0aWxpdHkvc3VibWl0L3N1Ym1pdGhlbHBlcicpO1xuaW1wb3J0IHVzZXJPcHRpb25zSGVscGVyID0gcmVxdWlyZSgnLi4vLi4vdXRpbGl0eS91c2Vyb3B0aW9uL3VzZXJvcHRpb25zaGVscGVyJyk7XG5pbXBvcnQgbWFya1NjaGVtZUhlbHBlciA9IHJlcXVpcmUoJy4uLy4uL3V0aWxpdHkvbWFya3NjaGVtZS9tYXJrc2NoZW1laGVscGVyJyk7XG5pbXBvcnQgcmVzcG9uc2VBY3Rpb25DcmVhdG9yID0gcmVxdWlyZSgnLi4vLi4vYWN0aW9ucy9yZXNwb25zZS9yZXNwb25zZWFjdGlvbmNyZWF0b3InKTtcbmltcG9ydCBtYXJrQnlBbm5vdGF0aW9uSGVscGVyID0gcmVxdWlyZSgnLi4vdXRpbGl0eS9tYXJraW5nL21hcmtieWFubm90YXRpb25oZWxwZXInKTtcbmltcG9ydCB0ZWFtTWFuYWdlbWVudFN0b3JlID0gcmVxdWlyZSgnLi4vLi4vc3RvcmVzL3RlYW1tYW5hZ2VtZW50L3RlYW1tYW5hZ2VtZW50c3RvcmUnKTtcbmltcG9ydCBsb2dpblN0b3JlID0gcmVxdWlyZSgnLi4vLi4vc3RvcmVzL2xvZ2luL2xvZ2luc3RvcmUnKTtcbmltcG9ydCByZXNwb25zZUhlbHBlciA9IHJlcXVpcmUoJy4uL3V0aWxpdHkvcmVzcG9uc2VoZWxwZXIvcmVzcG9uc2VoZWxwZXInKTtcbmltcG9ydCBUYWdMaXN0ID0gcmVxdWlyZSgnLi9yZXNwb25zZXNjcmVlbi90YWdsaXN0Jyk7XG5pbXBvcnQgdGFnU3RvcmUgPSByZXF1aXJlKCcuLi8uLi9zdG9yZXMvdGFncy90YWdzdG9yZScpO1xuaW1wb3J0IGltbXV0YWJsZSA9IHJlcXVpcmUoJ2ltbXV0YWJsZScpO1xuaW1wb3J0IG1hcmtlck9wZXJhdGlvbk1vZGVGYWN0b3J5ID0gcmVxdWlyZSgnLi4vdXRpbGl0eS9tYXJrZXJvcGVyYXRpb25tb2RlL21hcmtlcm9wZXJhdGlvbm1vZGVmYWN0b3J5Jyk7XG5pbXBvcnQgYXdhcmRpbmdTdG9yZSA9IHJlcXVpcmUoJy4uLy4uL3N0b3Jlcy9hd2FyZGluZy9hd2FyZGluZ3N0b3JlJyk7XG5pbXBvcnQgc3RhbmRhcmRpc2F0aW9uU2V0dXBTdG9yZSA9IHJlcXVpcmUoJy4uLy4uL3N0b3Jlcy9zdGFuZGFyZGlzYXRpb25zZXR1cC9zdGFuZGFyZGlzYXRpb25zZXR1cHN0b3JlJyk7XG5pbXBvcnQgY2xhc3NpZmllZFJlc3BvbnNlSGVhZGVyRGV0YWlsID0gcmVxdWlyZSgnLi4vLi4vc3RvcmVzL3N0YW5kYXJkaXNhdGlvbnNldHVwL3R5cGluZ3MvY2xhc3NpZmllZFJlc3BvbnNlSGVhZGVyRGV0YWlsJyk7XG5cbi8qKlxuICogUHJvcGVydGllcyBvZiBSZXNwb25zZSBuYXZpZ2F0aW9uIGNvbXBvbmVudC5cbiAqL1xuaW50ZXJmYWNlIFByb3BzIGV4dGVuZHMgTG9jYWxlU2VsZWN0aW9uQmFzZSB7XG4gICAgcmVzcG9uc2VJZDogc3RyaW5nO1xuICAgIGN1cnJlbnRSZXNwb25zZTogbnVtYmVyO1xuICAgIHRvdGFsUmVzcG9uc2VzOiBudW1iZXI7XG4gICAgaXNQcmV2aW91c1Jlc3BvbnNlQXZhaWxhYmxlOiBib29sZWFuO1xuICAgIGlzTmV4dFJlc3BvbnNlQXZhaWxhYmxlOiBib29sZWFuO1xuICAgIG1vdmVDYWxsYmFjazogRnVuY3Rpb247XG4gICAgY2VudHJlSWQ6IHN0cmluZztcbiAgICByZVJlbmRlcjogYm9vbGVhbjtcbn1cblxuLyoqXG4gKiBSZWFjdCBjb21wb25lbnQgZm9yIFJlc3BvbnNlIG5hdmlnYXRpb24uXG4gKi9cbmNsYXNzIFJlc3BvbnNlTmF2aWdhdGlvbiBleHRlbmRzIHB1cmVSZW5kZXJDb21wb25lbnQ8UHJvcHMsIGFueT4ge1xuXG4gICAgcHJpdmF0ZSBfYm91bmRIYW5kbGVLZXlEb3duOiBGdW5jdGlvbiA9IG51bGw7XG4gICAgLyogVGhlIHJlc3BvbnNlIG5hdmlnYXRpb24gZGlyZWN0aW9uICovXG4gICAgcHJpdmF0ZSByZXNwb25zZU5hdmlnYXRpb25EaXJlY3Rpb246IGVudW1zLlJlc3BvbnNlTmF2aWdhdGlvbjtcblxuICAgIC8qKiB2YXJpYWJsZSBmb3IgaG9sZGluZyBmdW5jdGlvbnMgKi9cbiAgICBwcml2YXRlIGhhbmRsZVByZXZpb3VzUmVzcG9uc2VOYXZpZ2F0aW9uOiBhbnk7XG4gICAgcHJpdmF0ZSBoYW5kbGVOZXh0UmVzcG9uc2VOYXZpZ2F0aW9uOiBhbnk7XG4gICAgcHJpdmF0ZSBpc1dvcmtMaXN0RGF0YVJlZnJlc2hlZEFmdGVyU3VibWl0OiBib29sZWFuO1xuICAgIHByaXZhdGUgaXNSZXNwb25zZU5hdmlnYXRpb25BcnJvd0NsaWNrZWQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICBwcml2YXRlIG1hcmtCeUFubm90YXRpb25IZWxwZXI6IG1hcmtCeUFubm90YXRpb25IZWxwZXI7XG5cbiAgICAvKipcbiAgICAgKiBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSBwcm9wc1xuICAgICAqIEBwYXJhbSBzdGF0ZVxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHByb3BzOiBQcm9wcywgc3RhdGU6IGFueSkge1xuICAgICAgICBzdXBlcihwcm9wcywgc3RhdGUpO1xuICAgICAgICB0aGlzLl9ib3VuZEhhbmRsZUtleURvd24gPSB0aGlzLmhhbmRsZVJlc3BvbnNlTmF2aWdhdGlvbi5iaW5kKHRoaXMsIG51bGwpO1xuICAgICAgICB0aGlzLmhhbmRsZVByZXZpb3VzUmVzcG9uc2VOYXZpZ2F0aW9uID0gdGhpcy5oYW5kbGVSZXNwb25zZU5hdmlnYXRpb24uYmluZCh0aGlzLCBlbnVtcy5SZXNwb25zZU5hdmlnYXRpb24ucHJldmlvdXMpO1xuICAgICAgICB0aGlzLmhhbmRsZU5leHRSZXNwb25zZU5hdmlnYXRpb24gPSB0aGlzLmhhbmRsZVJlc3BvbnNlTmF2aWdhdGlvbi5iaW5kKHRoaXMsIGVudW1zLlJlc3BvbnNlTmF2aWdhdGlvbi5uZXh0KTtcbiAgICAgICAgdGhpcy53b3JrTGlzdERhdGFDaGFuZ2VkID0gdGhpcy53b3JrTGlzdERhdGFDaGFuZ2VkLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMubWFya0J5QW5ub3RhdGlvbkhlbHBlciA9IG5ldyBtYXJrQnlBbm5vdGF0aW9uSGVscGVyKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVuZGVyIG1ldGhvZFxuICAgICAqL1xuICAgIHB1YmxpYyByZW5kZXIoKTogSlNYLkVsZW1lbnQge1xuICAgICAgICBsZXQgdGFnczogaW1tdXRhYmxlLkxpc3Q8VGFnPiA9IHRhZ1N0b3JlLmluc3RhbmNlLnRhZ3M7XG4gICAgICAgIGxldCBzZWxlY3RlZFRhZyA9IG1hcmtlck9wZXJhdGlvbk1vZGVGYWN0b3J5Lm9wZXJhdGlvbk1vZGUuZ2V0VGFnSWQocmVzcG9uc2VTdG9yZS5pbnN0YW5jZS5zZWxlY3RlZERpc3BsYXlJZC50b1N0cmluZygpKTtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdyZXNwb25zZS1oZWFkZXInPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdyZXNwb25zZS1oZWFkZXItaW5uZXInPlxuICAgICAgICAgICAgICAgICAgICB7dGhpcy5yZW5kZXJSZXNwb25zZU5hdmlnYXRpb25CdXR0b24oZW51bXMuUmVzcG9uc2VOYXZpZ2F0aW9uLnByZXZpb3VzKX1cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3Jlc3BvbnNlLXRpdGxlJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9J2hlYWRlcjEnIGNsYXNzTmFtZT0ncmVzcG9uc2UtaWQnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9J3JlcG9uc2UtaWQtbGFiZWwnPnt0aGlzLnNldFJlc3BvbnNlSGVhZGVyVGV4dCgpfTwvaDE+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoc2VsZWN0ZWRUYWcgPT09IHVuZGVmaW5lZCkgPyBudWxsIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUYWdMaXN0IHNlbGVjdGVkVGFnSWQ9e3NlbGVjdGVkVGFnfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhZ0xpc3Q9e3RhZ3N9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRMYW5ndWFnZT17dGhpcy5wcm9wcy5zZWxlY3RlZExhbmd1YWdlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPXsndGFncyd9IGtleT17J3RhZ19rZXknfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlcmVkT249e0RhdGUubm93KCl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNFU1Jlc3BvbnNlPXttYXJrZXJPcGVyYXRpb25Nb2RlRmFjdG9yeS5vcGVyYXRpb25Nb2RlLmlzU3RhbmRhcmRpc2F0aW9uU2V0dXBNb2RlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtpbmdNb2RlPXttYXJrZXJPcGVyYXRpb25Nb2RlRmFjdG9yeS5vcGVyYXRpb25Nb2RlLmlzU3RhbmRhcmRpc2F0aW9uU2V0dXBNb2RlID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW51bXMuTWFya2luZ01vZGUuUHJlX0VTX1RlYW1TdGFuZGFyZGlzYXRpb24gOiB1bmRlZmluZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgeyF0ZWFtTWFuYWdlbWVudFN0b3JlLmluc3RhbmNlLmlzUmVkaXJlY3RGcm9tRXhjZXB0aW9uID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPSdoZWFkZXIyJyBjbGFzc05hbWU9J3Jlc3BvbnNlLXBvc2l0aW9uJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3RoaXMuc2V0UmVzcG9uc2VTdWJIZWFkZXJUZXh0KCl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+IDogbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAge3RoaXMucmVuZGVyUmVzcG9uc2VOYXZpZ2F0aW9uQnV0dG9uKGVudW1zLlJlc3BvbnNlTmF2aWdhdGlvbi5uZXh0KX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cblxuXHQvKipcblx0ICogTWV0aG9kIHRvIHNldCB0aGUgUmVzcG9uc2Ugc3ViIGhlYWRlciB0ZXh0IGFzIHBlciB0aGUgd29ya2xpc3QgdHlwZVxuXHQgKi9cbiAgICBwcml2YXRlIHNldFJlc3BvbnNlU3ViSGVhZGVyVGV4dCgpIHtcbiAgICAgICAgbGV0IHJlc3BvbnNlSGVhZGVyOiBzdHJpbmc7XG5cbiAgICAgICAgaWYgKG1hcmtlck9wZXJhdGlvbk1vZGVGYWN0b3J5Lm9wZXJhdGlvbk1vZGUuaXNBd2FyZGluZ01vZGUpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlSGVhZGVyID0gc3RyaW5nSGVscGVyLmZvcm1hdChsb2NhbGVTdG9yZS5pbnN0YW5jZS5UcmFuc2xhdGVUZXh0KCdhd2FyZGluZy5yZXNwb25zZS1kYXRhLmNhbmRpZGF0ZW5vJyksXG4gICAgICAgICAgICAgICAgW2F3YXJkaW5nU3RvcmUuaW5zdGFuY2Uuc2VsZWN0ZWRDYW5kaWRhdGVEYXRhLmNlbnRyZUNhbmRpZGF0ZU5vXSk7XG4gICAgICAgIH0gZWxzZSBpZiAobWFya2VyT3BlcmF0aW9uTW9kZUZhY3Rvcnkub3BlcmF0aW9uTW9kZS5pc1N0YW5kYXJkaXNhdGlvblNldHVwTW9kZSkge1xuXG4gICAgICAgICAgICBzd2l0Y2ggKHN0YW5kYXJkaXNhdGlvblNldHVwU3RvcmUuaW5zdGFuY2Uuc2VsZWN0ZWRTdGFuZGFyZGlzYXRpb25TZXR1cFdvcmtMaXN0KSB7XG4gICAgICAgICAgICAgICAgY2FzZSBlbnVtcy5TdGFuZGFyZGlzYXRpb25TZXR1cC5TZWxlY3RSZXNwb25zZTpcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YW5kYXJkaXNhdGlvblNldHVwU3RvcmUuaW5zdGFuY2Uuc2VsZWN0ZWRUYWJJblNlbGVjdFJlc3BvbnNlXG4gICAgICAgICAgICAgICAgICAgICAgICA9PT0gZW51bXMuU3RhbmRhcmRpc2F0aW9uU2Vzc2lvblRhYi5DdXJyZW50U2Vzc2lvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VIZWFkZXIgPSBzdHJpbmdIZWxwZXIuZm9ybWF0KGxvY2FsZVN0b3JlLmluc3RhbmNlLlRyYW5zbGF0ZVRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoJ21hcmtpbmcucmVzcG9uc2UubmF2aWdhdGlvbi1iYXIuc2NyaXB0LXBvc2l0aW9uJyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgW3RoaXMucHJvcHMuY3VycmVudFJlc3BvbnNlLnRvU3RyaW5nKCksIHRoaXMucHJvcHMudG90YWxSZXNwb25zZXMudG9TdHJpbmcoKSwgdGhpcy5wcm9wcy5jZW50cmVJZF0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VIZWFkZXIgPSBzdHJpbmdIZWxwZXIuZm9ybWF0KGxvY2FsZVN0b3JlLmluc3RhbmNlLlRyYW5zbGF0ZVRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoJ21hcmtpbmcucmVzcG9uc2UubmF2aWdhdGlvbi1iYXIucmVzcG9uc2UtcG9zaXRpb24taW4td29ya2xpc3QnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbdGhpcy5wcm9wcy5jdXJyZW50UmVzcG9uc2UudG9TdHJpbmcoKSwgdGhpcy5wcm9wcy50b3RhbFJlc3BvbnNlcy50b1N0cmluZygpXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBlbnVtcy5TdGFuZGFyZGlzYXRpb25TZXR1cC5DbGFzc2lmaWVkUmVzcG9uc2U6XG4gICAgICAgICAgICAgICAgICAgIGxldCByZXNwb25zZUhlYWRlckRldGFpbDogY2xhc3NpZmllZFJlc3BvbnNlSGVhZGVyRGV0YWlsID1cbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YW5kYXJkaXNhdGlvblNldHVwU3RvcmUuaW5zdGFuY2UuZ2V0Q2xhc3NpZmllZFJlc3BvbnNlSGVhZGVyRGV0YWlsKHRoaXMucHJvcHMucmVzcG9uc2VJZCk7XG5cbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VIZWFkZXIgPSBzdHJpbmdIZWxwZXIuZm9ybWF0KGxvY2FsZVN0b3JlLmluc3RhbmNlLlRyYW5zbGF0ZVRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgICgnbWFya2luZy5yZXNwb25zZS5uYXZpZ2F0aW9uLWJhci5jbGFzc2lmaWVkLXJlc3BvbnNlLXBvc2l0aW9uLWluLXdvcmtsaXN0JyksXG4gICAgICAgICAgICAgICAgICAgICAgICBbcmVzcG9uc2VIZWFkZXJEZXRhaWwuY3VycmVudFBvc2l0aW9uLnRvU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZUhlYWRlckRldGFpbC5jbGFzc2lmaWVkV29ya2xpc3RDb3VudEJ5TWFya2luZ01vZGUudG9TdHJpbmcoKV0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZUhlYWRlciA9IHN0cmluZ0hlbHBlci5mb3JtYXQobG9jYWxlU3RvcmUuaW5zdGFuY2UuVHJhbnNsYXRlVGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgKCdtYXJraW5nLnJlc3BvbnNlLm5hdmlnYXRpb24tYmFyLnJlc3BvbnNlLXBvc2l0aW9uLWluLXdvcmtsaXN0JyksXG4gICAgICAgICAgICAgICAgICAgICAgICBbdGhpcy5wcm9wcy5jdXJyZW50UmVzcG9uc2UudG9TdHJpbmcoKSwgdGhpcy5wcm9wcy50b3RhbFJlc3BvbnNlcy50b1N0cmluZygpXSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzcG9uc2VIZWFkZXIgPSBzdHJpbmdIZWxwZXIuZm9ybWF0KGxvY2FsZVN0b3JlLmluc3RhbmNlLlRyYW5zbGF0ZVRleHRcbiAgICAgICAgICAgICAgICAoJ21hcmtpbmcucmVzcG9uc2UubmF2aWdhdGlvbi1iYXIucmVzcG9uc2UtcG9zaXRpb24taW4td29ya2xpc3QnKSxcbiAgICAgICAgICAgICAgICBbdGhpcy5wcm9wcy5jdXJyZW50UmVzcG9uc2UudG9TdHJpbmcoKSwgdGhpcy5wcm9wcy50b3RhbFJlc3BvbnNlcy50b1N0cmluZygpXSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzcG9uc2VIZWFkZXI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTWV0aG9kIHRvIHNldCB0aGUgUmVzcG9uc2UgaGVhZGVyIHRleHQgYXMgcGVyIHRoZSB3b3JrbGlzdCB0eXBlXG4gICAgICovXG4gICAgcHJpdmF0ZSBzZXRSZXNwb25zZUhlYWRlclRleHQoKSB7XG4gICAgICAgIGxldCB3b3JrTGlzdFR5cGUgPSB3b3JrbGlzdFN0b3JlLmluc3RhbmNlLmN1cnJlbnRXb3JrbGlzdFR5cGU7XG4gICAgICAgIGxldCBtYXJraW5nTW9kZSA9IHdvcmtsaXN0U3RvcmUuaW5zdGFuY2UuZ2V0TWFya2luZ01vZGVCeVdvcmtMaXN0VHlwZSh3b3JrTGlzdFR5cGUpO1xuXG4gICAgICAgIGlmIChzdGFuZGFyZGlzYXRpb25TZXR1cFN0b3JlLmluc3RhbmNlLmlzU2VsZWN0UmVzcG9uc2VzV29ya2xpc3RcbiAgICAgICAgICAgIHx8IHN0YW5kYXJkaXNhdGlvblNldHVwU3RvcmUuaW5zdGFuY2UuaXNTZWxlY3RlZFJlc3BvbnNlUHJldmlvdXNTZXNzaW9uV29ya2xpc3QpIHtcbiAgICAgICAgICAgIHJldHVybiAoKGxvY2FsZVN0b3JlLmluc3RhbmNlLlRyYW5zbGF0ZVRleHRcbiAgICAgICAgICAgICAgICAoJ21hcmtpbmcud29ya2xpc3QucmVzcG9uc2UtZGF0YS5zdG0tc2V0dXAtcmVzcG9uc2UtdGl0dGxlJykpICsgJyAxJyArXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5yZXNwb25zZUlkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNldCByZXNwb25zZSBoZWFkZXIgdGV4dCBmb3IgY2xhc3NpZmllZCByZXNwb25zZVxuICAgICAgICBpZiAobWFya2VyT3BlcmF0aW9uTW9kZUZhY3Rvcnkub3BlcmF0aW9uTW9kZS5pc1N0YW5kYXJkaXNhdGlvblNldHVwTW9kZSAmJlxuICAgICAgICAgICAgc3RhbmRhcmRpc2F0aW9uU2V0dXBTdG9yZS5pbnN0YW5jZS5pc0NsYXNzaWZpZWRXb3JrbGlzdCkge1xuICAgICAgICAgICAgbGV0IHJlc3BvbnNlSGVhZGVyRGV0YWlsOiBjbGFzc2lmaWVkUmVzcG9uc2VIZWFkZXJEZXRhaWwgPVxuICAgICAgICAgICAgICAgIHN0YW5kYXJkaXNhdGlvblNldHVwU3RvcmUuaW5zdGFuY2UuZ2V0Q2xhc3NpZmllZFJlc3BvbnNlSGVhZGVyRGV0YWlsKHRoaXMucHJvcHMucmVzcG9uc2VJZCk7XG4gICAgICAgICAgICBsZXQgcmVzcG9uc2VIZWFkZXI6IHN0cmluZztcbiAgICAgICAgICAgIHJlc3BvbnNlSGVhZGVyID0gKGxvY2FsZVN0b3JlLmluc3RhbmNlLlRyYW5zbGF0ZVRleHRcbiAgICAgICAgICAgICAgICAoJ3N0YW5kYXJkaXNhdGlvbi1zZXR1cC5zdGFuZGFyZGlzYXRpb24tc2V0dXAtd29ya2xpc3QuY2xhc3NpZmljYXRpb24tdHlwZS4nXG4gICAgICAgICAgICAgICAgKyBlbnVtcy5NYXJraW5nTW9kZVtyZXNwb25zZUhlYWRlckRldGFpbC5tYXJraW5nTW9kZUlkXSkpO1xuICAgICAgICAgICAgcmVzcG9uc2VIZWFkZXIgPSByZXNwb25zZUhlYWRlckRldGFpbC5yaWdPcmRlciAmJiByZXNwb25zZUhlYWRlckRldGFpbC5yaWdPcmRlciAhPT0gMCA/XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VIZWFkZXIgKyAnICcgKyByZXNwb25zZUhlYWRlckRldGFpbC5yaWdPcmRlci50b1N0cmluZygpIDogcmVzcG9uc2VIZWFkZXI7XG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2VIZWFkZXI7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobWFya2luZ01vZGUgPT09IGVudW1zLk1hcmtpbmdNb2RlLkVTX1RlYW1BcHByb3ZhbCkge1xuICAgICAgICAgICAgaWYgKHFpZ1N0b3JlLmluc3RhbmNlLnNlbGVjdGVkUUlHRm9yTWFya2VyT3BlcmF0aW9uLmlzRWxlY3Ryb25pY1N0YW5kYXJkaXNhdGlvblRlYW1NZW1iZXIgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKChsb2NhbGVTdG9yZS5pbnN0YW5jZS5UcmFuc2xhdGVUZXh0XG4gICAgICAgICAgICAgICAgICAgICgnbWFya2luZy53b3JrbGlzdC5yZXNwb25zZS1kYXRhLnN0bS1zdGFuZGFyZGlzYXRpb24tcmVzcG9uc2UtdGl0bGUnKSkgKyAnICcgK1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLnJlc3BvbnNlSWQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKChsb2NhbGVTdG9yZS5pbnN0YW5jZS5UcmFuc2xhdGVUZXh0XG4gICAgICAgICAgICAgICAgICAgICgnbWFya2luZy53b3JrbGlzdC5yZXNwb25zZS1kYXRhLnNlY29uZC1zdGFuZGFyZGlzYXRpb24tcmVzcG9uc2UtdGl0bGUnKSkgKyAnICcgK1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLnJlc3BvbnNlSWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHdvcmtMaXN0VHlwZSA9PT0gZW51bXMuV29ya2xpc3RUeXBlLnByYWN0aWNlKSB7XG4gICAgICAgICAgICByZXR1cm4gKChsb2NhbGVTdG9yZS5pbnN0YW5jZS5UcmFuc2xhdGVUZXh0KCdtYXJraW5nLndvcmtsaXN0LnJlc3BvbnNlLWRhdGEucHJhY3RpY2UtcmVzcG9uc2UtdGl0bGUnKSkgKyAnICcgK1xuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMucmVzcG9uc2VJZCk7XG4gICAgICAgIH0gZWxzZSBpZiAod29ya0xpc3RUeXBlID09PSBlbnVtcy5Xb3JrbGlzdFR5cGUuc3RhbmRhcmRpc2F0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm4gKChsb2NhbGVTdG9yZS5pbnN0YW5jZS5UcmFuc2xhdGVUZXh0KCdtYXJraW5nLndvcmtsaXN0LnJlc3BvbnNlLWRhdGEuc3RhbmRhcmRpc2F0aW9uLXJlc3BvbnNlLXRpdGxlJykpICsgJyAnICtcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLnJlc3BvbnNlSWQpO1xuICAgICAgICB9IGVsc2UgaWYgKHdvcmtMaXN0VHlwZSA9PT0gZW51bXMuV29ya2xpc3RUeXBlLnNlY29uZHN0YW5kYXJkaXNhdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuICgobG9jYWxlU3RvcmUuaW5zdGFuY2UuVHJhbnNsYXRlVGV4dFxuICAgICAgICAgICAgICAgICgnbWFya2luZy53b3JrbGlzdC5yZXNwb25zZS1kYXRhLnNlY29uZC1zdGFuZGFyZGlzYXRpb24tcmVzcG9uc2UtdGl0bGUnKSkgKyAnICcgK1xuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMucmVzcG9uc2VJZCk7XG4gICAgICAgIH0gZWxzZSBpZiAoKHdvcmtsaXN0U3RvcmUuaW5zdGFuY2UuY3VycmVudFdvcmtsaXN0VHlwZSA9PT0gZW51bXMuV29ya2xpc3RUeXBlLmRpcmVjdGVkUmVtYXJrXG4gICAgICAgICAgICB8fCAod29ya2xpc3RTdG9yZS5pbnN0YW5jZS5jdXJyZW50V29ya2xpc3RUeXBlID09PSBlbnVtcy5Xb3JrbGlzdFR5cGUucG9vbGVkUmVtYXJrKVxuICAgICAgICAgICAgJiYgd29ya2xpc3RTdG9yZS5pbnN0YW5jZS5nZXRSZW1hcmtSZXF1ZXN0VHlwZSAhPT0gZW51bXMuUmVtYXJrUmVxdWVzdFR5cGUuVW5rbm93bilcbiAgICAgICAgICAgICYmIHdvcmtsaXN0U3RvcmUuaW5zdGFuY2UuZ2V0UmVtYXJrUmVxdWVzdFR5cGUgIT09IGVudW1zLlJlbWFya1JlcXVlc3RUeXBlLlF1YWxpdHlSZW1hcmspIHtcblxuICAgICAgICAgICAgLy8gSWYgQXR5cGljYWwgcmVzcG9uc2UgZ2V0IHRoZSByZW1hcmsgc3RyaW5nIGFwcGVuZCB0byBhdHlwaWNhbCBpbmRpY2F0b3JcbiAgICAgICAgICAgIGlmIChyZXNwb25zZUhlbHBlci5pc0F0eXBpY2FsUmVzcG9uc2UoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmF0eXBpY2FsUmVtYXJrSGVhZGVyO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBDcmVhdGVzIHN0cmluZyBhcyBSZW1hcmtSZXF1ZXN0VHlwZSAmbmJzcDsgUmVzcG9uc2UgSWRcbiAgICAgICAgICAgIGlmIChsb2dpblN0b3JlLmluc3RhbmNlLmlzQWRtaW5SZW1hcmtlcikge1xuICAgICAgICAgICAgICAgIHJldHVybiAobG9jYWxlU3RvcmUuaW5zdGFuY2UuVHJhbnNsYXRlVGV4dFxuICAgICAgICAgICAgICAgICAgICAoJ2dlbmVyaWMucmVtYXJrLXR5cGVzLmxvbmctbmFtZXMuQWRtaW5SZW1hcmsnKSkgKyAnICcgK1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLnJlc3BvbnNlSWQ7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBzdHJpbmdIZWxwZXIuZm9ybWF0KGxvY2FsZVN0b3JlLmluc3RhbmNlLlRyYW5zbGF0ZVRleHQoXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0RGlyZWN0ZWRSZW1hcmtMb2NhbGVLZXkod29ya2xpc3RTdG9yZS5pbnN0YW5jZS5nZXRSZW1hcmtSZXF1ZXN0VHlwZSkpLFxuICAgICAgICAgICAgICAgICAgICBbY29uc3RhbnRzLk5PTkJSRUFLSU5HX0hZUEhFTl9VTklDT0RFXSlcbiAgICAgICAgICAgICAgICAgICAgKyBjb25zdGFudHMuTk9OQlJFQUtJTkdfV0hJVEVfU1BBQ0UgKyB0aGlzLnByb3BzLnJlc3BvbnNlSWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAod29ya2xpc3RTdG9yZS5pbnN0YW5jZS5jdXJyZW50V29ya2xpc3RUeXBlID09PSBlbnVtcy5Xb3JrbGlzdFR5cGUuYXR5cGljYWwpIHtcbiAgICAgICAgICAgIHJldHVybiAoKGxvY2FsZVN0b3JlLmluc3RhbmNlLlRyYW5zbGF0ZVRleHRcbiAgICAgICAgICAgICAgICAoJ21hcmtpbmcucmVzcG9uc2UubmF2aWdhdGlvbi1iYXIuYXR5cGljYWwtcmVzcG9uc2UtaWQtbGFiZWwnKSkgKyAnICcgK1xuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMucmVzcG9uc2VJZCk7XG4gICAgICAgICAgICAvKiBSZXNwb25zZSBpZGVudGlmaWVyIGluIHRoZSB0b3AgYmFyIHNoYWxsIGFwcGVhciBhcyBcIlNpbXVsYXRpb24gcmVzcG9uc2VcIixcbiAgICAgICAgICAgIHdpdGggcmVzcG9uc2UgSUQgaWYgdGhlIHdvcmtsaXN0IHR5cGUgaXMgc2ltdWxhdGlvbi4qL1xuICAgICAgICB9IGVsc2UgaWYgKHdvcmtsaXN0U3RvcmUuaW5zdGFuY2UuY3VycmVudFdvcmtsaXN0VHlwZSA9PT0gZW51bXMuV29ya2xpc3RUeXBlLnNpbXVsYXRpb24pIHtcbiAgICAgICAgICAgIHJldHVybiAoKGxvY2FsZVN0b3JlLmluc3RhbmNlLlRyYW5zbGF0ZVRleHRcbiAgICAgICAgICAgICAgICAoJ21hcmtpbmcucmVzcG9uc2UubmF2aWdhdGlvbi1iYXIuc2ltdWxhdGlvbi1yZXNwb25zZS1pZC1sYWJlbCcpKSArICcgJyArXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5yZXNwb25zZUlkKTtcbiAgICAgICAgfSBlbHNlIGlmIChtYXJrZXJPcGVyYXRpb25Nb2RlRmFjdG9yeS5vcGVyYXRpb25Nb2RlLmlzQXdhcmRpbmdNb2RlKSB7XG4gICAgICAgICAgICByZXR1cm4gKHN0cmluZ0hlbHBlci5mb3JtYXQobG9jYWxlU3RvcmUuaW5zdGFuY2UuVHJhbnNsYXRlVGV4dCgnYXdhcmRpbmcucmVzcG9uc2UtZGF0YS5jZW50cmVuYW1lJyksXG4gICAgICAgICAgICAgICAgW2F3YXJkaW5nU3RvcmUuaW5zdGFuY2Uuc2VsZWN0ZWRDYW5kaWRhdGVEYXRhLmNlbnRyZU51bWJlcl0pKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiAoKGxvY2FsZVN0b3JlLmluc3RhbmNlLlRyYW5zbGF0ZVRleHQoJ21hcmtpbmcucmVzcG9uc2UubmF2aWdhdGlvbi1iYXIucmVzcG9uc2UtaWQtbGFiZWwnKSkgKyAnICcgK1xuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMucmVzcG9uc2VJZCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBHZXRzIHRoZSBhdHlwaWNhbCByZW1hcmsgaGVhZGVyIHRleHQuXG4gICAgcHJpdmF0ZSBnZXQgYXR5cGljYWxSZW1hcmtIZWFkZXIoKTogc3RyaW5nIHtcbiAgICAgICAgaWYgKGxvZ2luU3RvcmUuaW5zdGFuY2UuaXNBZG1pblJlbWFya2VyKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxlU3RvcmUuaW5zdGFuY2UuVHJhbnNsYXRlVGV4dFxuICAgICAgICAgICAgICAgICgnbWFya2luZy5yZXNwb25zZS5uYXZpZ2F0aW9uLWJhci5hdHlwaWNhbC1yZW1hcmstcmVzcG9uc2UtaWQtbGFiZWwnKSArICcgJyArXG4gICAgICAgICAgICAgICAgKGxvY2FsZVN0b3JlLmluc3RhbmNlLlRyYW5zbGF0ZVRleHRcbiAgICAgICAgICAgICAgICAgICAgKCdnZW5lcmljLnJlbWFyay10eXBlcy5sb25nLW5hbWVzLkFkbWluUmVtYXJrJykpICsgJyAnICtcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLnJlc3BvbnNlSWQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gc3RyaW5nSGVscGVyLmZvcm1hdChcbiAgICAgICAgICAgICAgICAobG9jYWxlU3RvcmUuaW5zdGFuY2UuVHJhbnNsYXRlVGV4dFxuICAgICAgICAgICAgICAgICAgICAoJ21hcmtpbmcucmVzcG9uc2UubmF2aWdhdGlvbi1iYXIuYXR5cGljYWwtcmVtYXJrLXJlc3BvbnNlLWlkLWxhYmVsJykpICsgJyAnICtcbiAgICAgICAgICAgICAgICBsb2NhbGVTdG9yZS5pbnN0YW5jZS5UcmFuc2xhdGVUZXh0KFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdldERpcmVjdGVkUmVtYXJrTG9jYWxlS2V5KHdvcmtsaXN0U3RvcmUuaW5zdGFuY2UuZ2V0UmVtYXJrUmVxdWVzdFR5cGUpKSxcbiAgICAgICAgICAgICAgICBbY29uc3RhbnRzLk5PTkJSRUFLSU5HX0hZUEhFTl9VTklDT0RFXSlcbiAgICAgICAgICAgICAgICArIGNvbnN0YW50cy5OT05CUkVBS0lOR19XSElURV9TUEFDRSArIHRoaXMucHJvcHMucmVzcG9uc2VJZDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIHdpbGwgcmVuZGVyIHJlc3BvbnNlIG5hdmlnYXRpb24gYnV0dG9ucy5cbiAgICAgKiBAcGFyYW0gYnV0dG9uIDogbmF2aWdhdGlvbiBidXR0b25cbiAgICAgKi9cbiAgICBwcml2YXRlIHJlbmRlclJlc3BvbnNlTmF2aWdhdGlvbkJ1dHRvbihidXR0b246IGVudW1zLlJlc3BvbnNlTmF2aWdhdGlvbikge1xuXG4gICAgICAgIGlmIChxdWFsaXR5ZmVlZGJhY2tIZWxwZXIuaXNSZXNwb25zZU5hdmlnYXRpb25CbG9ja2VkKCkpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMuaXNQcmV2aW91c1Jlc3BvbnNlQXZhaWxhYmxlICYmIGJ1dHRvbiA9PT0gZW51bXMuUmVzcG9uc2VOYXZpZ2F0aW9uLnByZXZpb3VzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj0namF2YXNjcmlwdDp2b2lkKDApOycgb25DbGljaz17dGhpcy5oYW5kbGVQcmV2aW91c1Jlc3BvbnNlTmF2aWdhdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0ncmVzcG9uc2UtbmF2IHJlc3BvbnNlLW5hdi1wcmV2J1xuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2xvY2FsZVN0b3JlLmluc3RhbmNlLlRyYW5zbGF0ZVRleHQoJ21hcmtpbmcucmVzcG9uc2UubmF2aWdhdGlvbi1iYXIucHJldmlvdXMtcmVzcG9uc2UtYnV0dG9uLXRvb2x0aXAnKX0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J3Nwcml0ZS1pY29uIGxlZnQtYXJyb3ctbGlnaHQnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsb2NhbGVTdG9yZS5pbnN0YW5jZS5UcmFuc2xhdGVUZXh0KCdtYXJraW5nLnJlc3BvbnNlLm5hdmlnYXRpb24tYmFyLnByZXZpb3VzLXJlc3BvbnNlLWJ1dHRvbi10b29sdGlwJyl9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnByb3BzLmlzTmV4dFJlc3BvbnNlQXZhaWxhYmxlICYmIGJ1dHRvbiA9PT0gZW51bXMuUmVzcG9uc2VOYXZpZ2F0aW9uLm5leHQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICA8YSBocmVmPSdqYXZhc2NyaXB0OnZvaWQoMCk7JyBvbkNsaWNrPXt0aGlzLmhhbmRsZU5leHRSZXNwb25zZU5hdmlnYXRpb259XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J3Jlc3BvbnNlLW5hdiByZXNwb25zZS1uYXYtbmV4dCcgdGl0bGU9e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsZVN0b3JlLmluc3RhbmNlLlRyYW5zbGF0ZVRleHQoJ21hcmtpbmcucmVzcG9uc2UubmF2aWdhdGlvbi1iYXIubmV4dC1yZXNwb25zZS1idXR0b24tdG9vbHRpcCcpfT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0nc3ByaXRlLWljb24gcmlnaHQtYXJyb3ctbGlnaHQnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsb2NhbGVTdG9yZS5pbnN0YW5jZS5UcmFuc2xhdGVUZXh0KCdtYXJraW5nLnJlc3BvbnNlLm5hdmlnYXRpb24tYmFyLm5leHQtcmVzcG9uc2UtYnV0dG9uLXRvb2x0aXAnKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIGdldHMgaW52b2tlZCB3aGVuIHRoZSBjb21wb25lbnQgaXMgYWJvdXQgdG8gYmUgbW91bnRlZFxuICAgICAqL1xuICAgIHB1YmxpYyBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgcmVzcG9uc2VBY3Rpb25DcmVhdG9yLnJlUmVuZGVyQnJlYWRDcnVtYkFmdGVyTG9hZGluZ1Jlc3BvbnNlSUQoKTtcbiAgICAgICAgLypBZGRpbmcgZ2xvYmFsIGhhbmRsZXIgKi9cbiAgICAgICAgbGV0IHNjcm9sbEhhbmRsZXI6IG1vZHVsZUtleUhhbmRsZXIgPSBuZXcgbW9kdWxlS2V5SGFuZGxlcihcbiAgICAgICAgICAgIG1vZHVsZWtleXMuUkVTUE9OU0VfTkFWSUdBVElPTixcbiAgICAgICAgICAgIGVudW1zLlByaW9yaXR5LlRoaXJkLCB0cnVlLFxuICAgICAgICAgICAgdGhpcy5fYm91bmRIYW5kbGVLZXlEb3duLFxuICAgICAgICAgICAgZW51bXMuS2V5TW9kZS5kb3duKTtcbiAgICAgICAga2V5RG93bkhlbHBlci5pbnN0YW5jZS5tb3VudEtleURvd25IYW5kbGVyKHNjcm9sbEhhbmRsZXIpO1xuICAgICAgICBtYXJraW5nU3RvcmUuaW5zdGFuY2UuYWRkTGlzdGVuZXIobWFya2luZ1N0b3JlLk1hcmtpbmdTdG9yZS5SRUFEWV9UT19OQVZJR0FURSwgdGhpcy5uYXZpZ2F0ZUF3YXlGcm9tUmVzcG9uc2UpO1xuICAgICAgICBzdWJtaXRTdG9yZS5pbnN0YW5jZS5hZGRMaXN0ZW5lcihzdWJtaXRTdG9yZS5TdWJtaXRTdG9yZS5OQVZJR0FURV9BRlRFUl9TVUJNSVQsIHRoaXMubmF2aWdhdGVUb05leHRSZXNwb25zZUFmdGVyU3VibWl0KTtcbiAgICAgICAgd29ya2xpc3RTdG9yZS5pbnN0YW5jZS5hZGRMaXN0ZW5lcih3b3JrbGlzdFN0b3JlLldvcmtMaXN0U3RvcmUuV09SS0xJU1RfTUFSS0lOR19NT0RFX0NIQU5HRSwgdGhpcy53b3JrTGlzdERhdGFDaGFuZ2VkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIGdldHMgaW52b2tlZCB3aGVuIHRoZSBjb21wb25lbnQgaXMgdXBkYXRpbmdcbiAgICAgKi9cbiAgICBwdWJsaWMgY29tcG9uZW50RGlkVXBkYXRlKCkge1xuICAgICAgICByZXNwb25zZUFjdGlvbkNyZWF0b3IucmVSZW5kZXJCcmVhZENydW1iQWZ0ZXJMb2FkaW5nUmVzcG9uc2VJRCgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgZnVuY3Rpb24gZ2V0cyBpbnZva2VkIHdoZW4gdGhlIGNvbXBvbmVudCBpcyBhYm91dCB0byBiZSB1bm1vdW50ZWRcbiAgICAgKi9cbiAgICBwdWJsaWMgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICAgIGtleURvd25IZWxwZXIuaW5zdGFuY2UudW5tb3VudEtleUhhbmRsZXIobW9kdWxla2V5cy5SRVNQT05TRV9OQVZJR0FUSU9OKTtcbiAgICAgICAgbWFya2luZ1N0b3JlLmluc3RhbmNlLnJlbW92ZUxpc3RlbmVyKG1hcmtpbmdTdG9yZS5NYXJraW5nU3RvcmUuUkVBRFlfVE9fTkFWSUdBVEUsIHRoaXMubmF2aWdhdGVBd2F5RnJvbVJlc3BvbnNlKTtcbiAgICAgICAgc3VibWl0U3RvcmUuaW5zdGFuY2UucmVtb3ZlTGlzdGVuZXIoc3VibWl0U3RvcmUuU3VibWl0U3RvcmUuTkFWSUdBVEVfQUZURVJfU1VCTUlULCB0aGlzLm5hdmlnYXRlVG9OZXh0UmVzcG9uc2VBZnRlclN1Ym1pdCk7XG4gICAgICAgIHdvcmtsaXN0U3RvcmUuaW5zdGFuY2UucmVtb3ZlTGlzdGVuZXIod29ya2xpc3RTdG9yZS5Xb3JrTGlzdFN0b3JlLldPUktMSVNUX01BUktJTkdfTU9ERV9DSEFOR0UsIHRoaXMud29ya0xpc3REYXRhQ2hhbmdlZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2Qgd2lsbCBoYW5kbGUgY2xpY2sgZXZlbnRzIGFuZCBrZXlib2FyZCBldmVudHNcbiAgICAgKi9cbiAgICBwcml2YXRlIGhhbmRsZVJlc3BvbnNlTmF2aWdhdGlvbihkaXJlY3Rpb246IGVudW1zLlJlc3BvbnNlTmF2aWdhdGlvbiwga2V5RXZlbnQ6IEtleWJvYXJkRXZlbnQpIHtcbiAgICAgICAgLyogSWYgcHJlc3NlZCBrZXkgaXMgbm90IHJpZ2h0IGFycm93IG9yIGxlZnQgYXJyb3cgaXQgd2lsbCBza2lwICovXG4gICAgICAgIGlmIChrZXlFdmVudC5rZXlDb2RlICE9PSB1bmRlZmluZWQgJiYga2V5RXZlbnQua2V5Q29kZSA9PT0ga2V5Q29kZXMuTEVGVF9LRVkpIHtcbiAgICAgICAgICAgIGRpcmVjdGlvbiA9IGVudW1zLlJlc3BvbnNlTmF2aWdhdGlvbi5wcmV2aW91cztcbiAgICAgICAgfSBlbHNlIGlmIChrZXlFdmVudC5rZXlDb2RlICE9PSB1bmRlZmluZWQgJiYgKGtleUV2ZW50LmtleUNvZGUgPT09IGtleUNvZGVzLlJJR0hUX0tFWSkpIHtcbiAgICAgICAgICAgIGRpcmVjdGlvbiA9IGVudW1zLlJlc3BvbnNlTmF2aWdhdGlvbi5uZXh0O1xuICAgICAgICB9IGVsc2UgaWYgKGtleUV2ZW50LmNoYXJDb2RlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMucmVzcG9uc2VOYXZpZ2F0aW9uRGlyZWN0aW9uID0gZW51bXMuUmVzcG9uc2VOYXZpZ2F0aW9uLm5leHQ7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmlzUmVzcG9uc2VOYXZpZ2F0aW9uQXJyb3dDbGlja2VkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5uYXZpZ2F0ZVJlc3BvbnNlKGRpcmVjdGlvbiwgZmFsc2UpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIHdpbGwgaGFuZGxlIHRoZSBuYXZpZ2F0aW9uXG4gICAgICogQHBhcmFtIGRpcmVjdGlvblxuICAgICAqIEBwYXJhbSBpc0FmdGVyU3VibWl0XG4gICAgICovXG4gICAgcHJpdmF0ZSBuYXZpZ2F0ZVJlc3BvbnNlKGRpcmVjdGlvbjogZW51bXMuUmVzcG9uc2VOYXZpZ2F0aW9uLCBpc0FmdGVyU3VibWl0KSB7XG5cbiAgICAgICAgLy9zZXQgdGhlIGlzTmF2aWdhdGlvblRocm91Z2hNYXJrU2NoZW1lIHZhcmlhYmxlIGFzIG5vbmUgc2luY2UgaXQgaXMgbm90IG5hdmlnYXRpbmcgZnJvbSB0aGUgbWFya3NjaGVtZVxuICAgICAgICBtYXJraW5nQWN0aW9uQ3JlYXRvci5zZXROYXZpZ2F0aW9uVGhyb3VnaE1hcmtzY2hlbWUoZW51bXMuUmVzcG9uc2VOYXZpZ2F0aW9uLm5vbmUpO1xuICAgICAgICBpZiAobmF2aWdhdGlvbkhlbHBlci5uYXZpZ2F0aW9uQWxsb3dlZChkaXJlY3Rpb24sIHRoaXMucHJvcHMuaXNOZXh0UmVzcG9uc2VBdmFpbGFibGUsXG4gICAgICAgICAgICB0aGlzLnByb3BzLmlzUHJldmlvdXNSZXNwb25zZUF2YWlsYWJsZSkpIHtcbiAgICAgICAgICAgIHRoaXMucmVzcG9uc2VOYXZpZ2F0aW9uRGlyZWN0aW9uID0gZGlyZWN0aW9uO1xuICAgICAgICAgICAgbGV0IHJlc3BvbnNlTmF2aWdhdGlvbkZhaWx1cmVSZWFzb25zOiBBcnJheTxlbnVtcy5SZXNwb25zZU5hdmlnYXRlRmFpbHVyZVJlYXNvbj4gPVxuICAgICAgICAgICAgICAgIG5ldyBBcnJheTxlbnVtcy5SZXNwb25zZU5hdmlnYXRlRmFpbHVyZVJlYXNvbj4oKTtcbiAgICAgICAgICAgIGlmICghaXNBZnRlclN1Ym1pdCkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlTmF2aWdhdGlvbkZhaWx1cmVSZWFzb25zID0gbWFya2luZ0hlbHBlci5jYW5OYXZpZ2F0ZUF3YXlGcm9tQ3VycmVudFJlc3BvbnNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBJZiB0aGVyZSBpcyBhbnkgbmF2aWdhdGlvbiBmYWlsdXJlIHJlYXNvbiBhdmFpbGFibGUgdGhlbiB3ZSB3aWxsIHNob3cgcmVzcGVjdGl2ZSBwb3B1cHMuXG4gICAgICAgICAgICBpZiAocmVzcG9uc2VOYXZpZ2F0aW9uRmFpbHVyZVJlYXNvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHBvcHVwSGVscGVyLm5hdmlnYXRlQXdheUZyb21SZXNwb25zZShyZXNwb25zZU5hdmlnYXRpb25GYWlsdXJlUmVhc29ucywgZW51bXMuU2F2ZUFuZE5hdmlnYXRlLnRvUmVzcG9uc2UpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAobWFya2luZ1N0b3JlLmluc3RhbmNlLmlzTWFya2luZ0luUHJvZ3Jlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgbWFya2luZyBwcm9ncmVzc2luZyBhbmQgcmVzcG9uc2VOYXZpZ2F0aW9uRmFpbHVyZVJlYXNvbiBjb250YWluIG5vbmUgb25seVxuICAgICAgICAgICAgICAgICAgICBtYXJraW5nQWN0aW9uQ3JlYXRvci5zYXZlQW5kTmF2aWdhdGUoZW51bXMuU2F2ZUFuZE5hdmlnYXRlLnRvUmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIW1hcmtpbmdTdG9yZS5pbnN0YW5jZS5pc01hcmtpbmdJblByb2dyZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgIGJ1c3lJbmRpY2F0b3JBY3Rpb25DcmVhdG9yLnNldEJ1c3lJbmRpY2F0b3JJbnZva2VyKGVudW1zLkJ1c3lJbmRpY2F0b3JJbnZva2VyLm5vbmUpO1xuICAgICAgICAgICAgICAgICAgICAvKiogbmF2aWdhdGluZyBmcm9tIGEgcmVzcG9uc2Ugd2hpY2ggaXMgaW4gdmlldyBtb2RlIGRvZXNuJ3QgcmVxdWlyZSBzYXZlIG1hcmtzICovXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMubW92ZUNhbGxiYWNrKHRoaXMucmVzcG9uc2VOYXZpZ2F0aW9uRGlyZWN0aW9uLCBpc0FmdGVyU3VibWl0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHbyB0byBhbm90aGVyIHJlc3BvbnNlIGFmdGVyIHNhdmluZyBtYXJrIGlmIHRoZXJlIGlzIGFueVxuICAgICAqL1xuICAgIHByaXZhdGUgbmF2aWdhdGVBd2F5RnJvbVJlc3BvbnNlID0gKG5hdmlnYXRpb25Gcm9tOiBlbnVtcy5SZXNwb25zZU5hdmlnYXRpb24pOiB2b2lkID0+IHtcbiAgICAgICAgaWYgKG1hcmtpbmdTdG9yZS5pbnN0YW5jZS5uYXZpZ2F0ZVRvID09PSBlbnVtcy5TYXZlQW5kTmF2aWdhdGUudG9SZXNwb25zZSkge1xuICAgICAgICAgICAgLyoqIEZvciByZXNwb25zZSBhdXRvIG5hdmlnYXRpb24gd2hlbiBhIHJlc3BvbnNlIGdldHMgMTAwJSBtYXJrZWQsIHRoZSByZXNwb25zZU5hdmlnYXRpb25EaXJlY3Rpb24gd2lsbCBnZXQgdW5kZWZpbmVkICAqL1xuICAgICAgICAgICAgaWYgKG1hcmtpbmdTdG9yZS5pbnN0YW5jZS5jdXJyZW50UmVzcG9uc2VNYXJraW5nUHJvZ3Jlc3MgPT09IDEwMCAmJiB0aGlzLnJlc3BvbnNlTmF2aWdhdGlvbkRpcmVjdGlvbiA9PT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgJiYgbmF2aWdhdGlvbkZyb20gIT09IGVudW1zLlJlc3BvbnNlTmF2aWdhdGlvbi5tYXJrU2NoZW1lKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5tb3ZlQ2FsbGJhY2soZW51bXMuUmVzcG9uc2VOYXZpZ2F0aW9uLm5leHQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNSZXNwb25zZU5hdmlnYXRpb25BcnJvd0NsaWNrZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgLyoqIElmIGl0IGlzIG5hdmlnYXRpbmcgZnJvbSBtYXJrc2NoZW1lIHRoZW4gLHNldCB0aGUgaXNOYXZpZ2F0aW9uVGhyb3VnaE1hcmtTY2hlbWUgYXMgbWFya1NjaGVtZSAgKi9cbiAgICAgICAgICAgICAgICAgICAgbWFya2luZ0FjdGlvbkNyZWF0b3Iuc2V0TmF2aWdhdGlvblRocm91Z2hNYXJrc2NoZW1lKGVudW1zLlJlc3BvbnNlTmF2aWdhdGlvbi5tYXJrU2NoZW1lKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5hdmlnYXRpb25Gcm9tID09PSBlbnVtcy5SZXNwb25zZU5hdmlnYXRpb24ubWFya1NjaGVtZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgIW1hcmtTY2hlbWVIZWxwZXIuaXNOZXh0UmVzcG9uc2VBdmFpbGFibGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVzcG9uc2VOYXZpZ2F0aW9uRGlyZWN0aW9uID0gZW51bXMuUmVzcG9uc2VOYXZpZ2F0aW9uLmZpcnN0O1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5hdmlnYXRpb25Gcm9tID09PSBlbnVtcy5SZXNwb25zZU5hdmlnYXRpb24ubWFya1NjaGVtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXNwb25zZU5hdmlnYXRpb25EaXJlY3Rpb24gPSBlbnVtcy5SZXNwb25zZU5hdmlnYXRpb24ubmV4dDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNSZXNwb25zZU5hdmlnYXRpb25BcnJvd0NsaWNrZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5tb3ZlQ2FsbGJhY2sodGhpcy5yZXNwb25zZU5hdmlnYXRpb25EaXJlY3Rpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy9yZXNldCB0aGUgaXNSZXNwb25zZU5hdmlnYXRpb25BcnJvd0NsaWNrZWQgd2hlbiBuYXZpZ2F0ZSB0byBjdXJyZW50IHJlc3BvbnNlIHZpZXdcbiAgICAgICAgICAgIHRoaXMuaXNSZXNwb25zZU5hdmlnYXRpb25BcnJvd0NsaWNrZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIC8qKiBTZXQgdGhlIGlzTmF2aWdhdGlvblRocm91Z2hNYXJrU2NoZW1lIGFzIE5vbmUgLHdoZW4gd2UgbmF2aWdhdGUgdG8gKGluYm94LHdvcmtsaXN0LGV0Yykgb3RoZXIgdGhhbiByZXNwb25zZS4gKi9cbiAgICAgICAgICAgIG1hcmtpbmdBY3Rpb25DcmVhdG9yLnNldE5hdmlnYXRpb25UaHJvdWdoTWFya3NjaGVtZShlbnVtcy5SZXNwb25zZU5hdmlnYXRpb24ubm9uZSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBkaXJlY3RlZCByZW1hcmsgbG9jYWxlIGtleSBhY2NvcmRpbmcgdG8gdGhlIGRpcmVjdGVkIHJlbWFyayByZXF1ZXN0IHR5cGUuXG4gICAgICogQHBhcmFtIHtlbnVtcy5SZW1hcmtSZXF1ZXN0VHlwZX0gcmVtYXJrUmVxdWVzdFR5cGVcbiAgICAgKiBAcmV0dXJucyByZW1hcmsgcmVxdWVzdCBrZXlcbiAgICAgKi9cbiAgICBwcml2YXRlIGdldERpcmVjdGVkUmVtYXJrTG9jYWxlS2V5KHJlbWFya1JlcXVlc3RUeXBlOiBlbnVtcy5SZW1hcmtSZXF1ZXN0VHlwZSk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiAnZ2VuZXJpYy5yZW1hcmstdHlwZXMubG9uZy1uYW1lcy4nICsgZW51bXMuUmVtYXJrUmVxdWVzdFR5cGVbcmVtYXJrUmVxdWVzdFR5cGVdO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE5hdmlnYXRpb24gb2YgdGhlIHJlc3BvbnNlIGFmdGVyIHN1Ym1pdHRpbmcgdGhlIHJlc3BvbnNlIGZyb20gbWFya3NjaGVtZVxuICAgICAqL1xuICAgIHByaXZhdGUgbmF2aWdhdGVUb05leHRSZXNwb25zZUFmdGVyU3VibWl0ID0gKHN1Ym1pdHRlZE1hcmtHcm91cElkczogQXJyYXk8bnVtYmVyPixcbiAgICAgICAgc2VsZWN0ZWREaXNwbGF5SWQ6IHN0cmluZyxcbiAgICAgICAgaXNGcm9tTWFya1NjaGVtZTogYm9vbGVhbik6IHZvaWQgPT4ge1xuICAgICAgICAvLyBJZiBNYXJrZXIgZ290IHdpdGhkcmF3biBkdXJpbmcgdGhlIGFjdGlvbnMuIFNraXAgdGhlIGFjdGl2aXRpZXMuXG4gICAgICAgIGlmIChxaWdTdG9yZS5pbnN0YW5jZS5zZWxlY3RlZFFJR0Zvck1hcmtlck9wZXJhdGlvbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgd29ya2xpc3ROYXZpZ2F0aW9uUmVxdWlyZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5pc1dvcmtMaXN0RGF0YVJlZnJlc2hlZEFmdGVyU3VibWl0ID0gZmFsc2U7XG4gICAgICAgIGlmIChpc0Zyb21NYXJrU2NoZW1lKSB7XG4gICAgICAgICAgICBpZiAoc3VibWl0U3RvcmUuaW5zdGFuY2UuZ2V0U3VibWl0UmVzcG9uc2VSZXR1cm4uaGFzUXVhbGl0eUZlZWRiYWNrT3V0c3RhbmRpbmcpIHtcbiAgICAgICAgICAgICAgICB3b3JrbGlzdE5hdmlnYXRpb25SZXF1aXJlZCA9IHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCB3b3JrbGlzdFR5cGUgPSBzdWJtaXRTdG9yZS5pbnN0YW5jZS5nZXRDdXJyZW50V29ya2xpc3RUeXBlO1xuICAgICAgICAgICAgICAgIGlmICgoc3VibWl0U3RvcmUuaW5zdGFuY2UuZ2V0Q3VycmVudFdvcmtsaXN0VHlwZSA9PT0gZW51bXMuV29ya2xpc3RUeXBlLnN0YW5kYXJkaXNhdGlvblxuICAgICAgICAgICAgICAgICAgICB8fCBzdWJtaXRTdG9yZS5pbnN0YW5jZS5nZXRDdXJyZW50V29ya2xpc3RUeXBlID09PSBlbnVtcy5Xb3JrbGlzdFR5cGUuc2Vjb25kc3RhbmRhcmRpc2F0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3VibWl0U3RvcmUuaW5zdGFuY2UuZ2V0U3VibWl0UmVzcG9uc2VSZXR1cm4uZXhhbWluZXJBcHByb3ZhbFN0YXR1cyA9PT0gZW51bXMuRXhhbWluZXJBcHByb3ZhbC5BcHByb3ZlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWFya2VyIEdvdCBBcHByb3ZlZCBkdXJpbmcgc3VibWlzc2lvbi4gTWVzc2FnZSBpcyBkaXNwbGF5ZWQgZnJvbSB3b3JrbGlzdCBjb21wb25lbnQgaGVscGVyLlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2V0IFRoZSBuZXcgd29ya2xpc3QgdHlwZSBhcyBMaXZlIGFuZCBuYXZpZ2F0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgd29ya2xpc3RUeXBlID0gZW51bXMuV29ya2xpc3RUeXBlLmxpdmU7XG4gICAgICAgICAgICAgICAgICAgICAgICB3b3JrbGlzdE5hdmlnYXRpb25SZXF1aXJlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBDbGVhciB0aGUgbWFya3MgYW5kIGFubm90YXRpb25zIGlmIG5lZWRlZCBmb3IgUmVsb2FkaW5nIHRoZSBEZWZpbml0aXZlTWFya3NcbiAgICAgICAgICAgICAgICBzdWJtaXRIZWxwZXIuY2xlYXJNYXJrc0FuZEFubm90YXRpb25zKHN1Ym1pdHRlZE1hcmtHcm91cElkcyk7XG5cbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgbWFya2VyIGhhdmluZyBtb3JlIHRoYW4gMSByZXNwb25zZXMgaW4gaGlzIHdvcmtsaXN0IGFuZCBoZSBnb3QgYXBwcm92ZWQgd2l0aCB0aGUgZmlyc3Qgc3RkIHJlc3BvbnNlLFxuICAgICAgICAgICAgICAgIC8vIFB1Ymxpc2ggbmV3IG1hcmtpbmcgbW9kZSBldmVudC4gVG8gY2hhbmdlIG1hcmtpbmcgbW9kZSB0byBsaXZlXG4gICAgICAgICAgICAgICAgaWYgKHdvcmtsaXN0TmF2aWdhdGlvblJlcXVpcmVkIHx8XG4gICAgICAgICAgICAgICAgICAgIHdvcmtsaXN0U3RvcmUuaW5zdGFuY2UuaXNOZXh0UmVzcG9uc2VBdmFpbGFibGUoc2VsZWN0ZWREaXNwbGF5SWQpXG4gICAgICAgICAgICAgICAgICAgICYmICFzdWJtaXRTdG9yZS5pbnN0YW5jZS5pc0V4YW1pbmVyQXBwcm92YWxTdGF0dXNDaGFuZ2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCByZXNwb25zZU1vZGUgPSBlbnVtcy5SZXNwb25zZU1vZGUub3BlbjtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG1hcmtTY2hlbWVHcm91cElkID0gcWlnU3RvcmUuaW5zdGFuY2Uuc2VsZWN0ZWRRSUdGb3JNYXJrZXJPcGVyYXRpb24ubWFya1NjaGVtZUdyb3VwSWQ7XG4gICAgICAgICAgICAgICAgICAgIGxldCBleGFtaW5lclJvbGVJZCA9IHFpZ1N0b3JlLmluc3RhbmNlLnNlbGVjdGVkUUlHRm9yTWFya2VyT3BlcmF0aW9uLmV4YW1pbmVyUm9sZUlkO1xuICAgICAgICAgICAgICAgICAgICBsZXQgcXVlc3Rpb25QYXBlclBhcnRJZCA9IHFpZ1N0b3JlLmluc3RhbmNlLnNlbGVjdGVkUUlHRm9yTWFya2VyT3BlcmF0aW9uLnF1ZXN0aW9uUGFwZXJQYXJ0SWQ7XG4gICAgICAgICAgICAgICAgICAgIGxldCByZW1hcmtSZXF1ZXN0VHlwZSA9IHdvcmtsaXN0U3RvcmUuaW5zdGFuY2UuZ2V0UmVtYXJrUmVxdWVzdFR5cGU7XG4gICAgICAgICAgICAgICAgICAgIGxldCBpc0RpcmVjdGVkUmVtYXJrID0gd29ya2xpc3RTdG9yZS5pbnN0YW5jZS5pc0RpcmVjdGVkUmVtYXJrO1xuICAgICAgICAgICAgICAgICAgICB3b3JrbGlzdEFjdGlvbkNyZWF0b3Iubm90aWZ5V29ya2xpc3RUeXBlQ2hhbmdlXG4gICAgICAgICAgICAgICAgICAgICAgICAobWFya1NjaGVtZUdyb3VwSWQsIGV4YW1pbmVyUm9sZUlkLCBxdWVzdGlvblBhcGVyUGFydElkLCB3b3JrbGlzdFR5cGUsIHJlc3BvbnNlTW9kZSwgcmVtYXJrUmVxdWVzdFR5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0RpcmVjdGVkUmVtYXJrLFxuICAgICAgICAgICAgICAgICAgICAgICAgcWlnU3RvcmUuaW5zdGFuY2Uuc2VsZWN0ZWRRSUdGb3JNYXJrZXJPcGVyYXRpb24uaXNFbGVjdHJvbmljU3RhbmRhcmRpc2F0aW9uVGVhbU1lbWJlcixcbiAgICAgICAgICAgICAgICAgICAgICAgIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1dvcmtMaXN0RGF0YVJlZnJlc2hlZEFmdGVyU3VibWl0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB3b3JrbGlzdE5hdmlnYXRpb25SZXF1aXJlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAod29ya2xpc3ROYXZpZ2F0aW9uUmVxdWlyZWQpIHtcbiAgICAgICAgICAgICAgICBuYXZpZ2F0aW9uSGVscGVyLmxvYWRXb3JrbGlzdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFdvcmtsaXN0IGRhdGEgY2hhbmdlZC5cbiAgICAgKi9cbiAgICBwcml2YXRlIHdvcmtMaXN0RGF0YUNoYW5nZWQgPSAoKTogdm9pZCA9PiB7XG4gICAgICAgIGlmICh0aGlzLmlzV29ya0xpc3REYXRhUmVmcmVzaGVkQWZ0ZXJTdWJtaXQpIHtcbiAgICAgICAgICAgIHRoaXMuaXNXb3JrTGlzdERhdGFSZWZyZXNoZWRBZnRlclN1Ym1pdCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5uYXZpZ2F0ZVJlc3BvbnNlKGVudW1zLlJlc3BvbnNlTmF2aWdhdGlvbi5uZXh0LCB0cnVlKTtcbiAgICAgICAgfVxuICAgIH07XG5cbn1cbmV4cG9ydCA9IFJlc3BvbnNlTmF2aWdhdGlvbjtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vc291cmNlLW1hcC1sb2FkZXIhLi9zcmMvY29tcG9uZW50cy9yZXNwb25zZS9yZXNwb25zZW5hdmlnYXRpb24udHN4Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQWlCQTs7QUFFQTtBQUNBO0FBQUE7QUFhQTs7OztBQUlBO0FBQ0E7QUFBQTtBQWhCQTtBQVFBO0FBd1VBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVdBOztBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBMWFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFPQTtBQUlBO0FBQ0E7QUFLQTtBQUlBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBR0E7QUFHQTtBQUNBO0FBQ0E7OztBQUFBO0FBRUE7OztBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFJQTtBQUtBO0FBQUE7QUFDQTtBQUlBO0FBS0E7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTs7OztBQUlBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWtDQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBdUVBO0FBQUE7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),

/***/ 356:
/* no static exports found */
/* all exports used */
/*!********************************************************!*\
  !*** ./src/components/response/responsescreen/tag.tsx ***!
  \********************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\n/* tslint:disable:no-unused-variable */\r\nvar React = __webpack_require__(/*! react */ 0);\r\n/* tslint:enable:no-unused-variable */\r\nvar classNames = __webpack_require__(/*! classnames */ 39);\r\nvar localeStore = __webpack_require__(/*! ../../../stores/locale/localestore */ 226);\r\nvar enums = __webpack_require__(/*! ../../utility/enums */ 225);\r\nvar tag = function (props) {\r\n    // For light-green tag, in css class they are using a hyphen(-) but the same cannot be applied to an Enum.\r\n    // So for light Green Tag, we are appending the class name through below condition.\r\n    // For other tags, it works.\r\n    var tagClass = props.tagType === enums.TagType.LightGreen ? ' light-green'\r\n        : enums.getEnumString(enums.TagType, props.tagType).toLocaleLowerCase();\r\n    /**\r\n     * This method gets the title for the tag\r\n     */\r\n    var getTitleForTag = function () {\r\n        var title;\r\n        switch (props.tagType) {\r\n            case enums.TagType.Empty:\r\n                title = localeStore.instance.TranslateText('marking.worklist.tag-tooltips.no-tag');\r\n                if (props.isSelected && props.isInList === false) {\r\n                    title = localeStore.instance.TranslateText('marking.worklist.tag-tooltips.add-tag');\r\n                }\r\n                break;\r\n            default:\r\n                title = localeStore.instance.TranslateText('marking.worklist.tag-tooltips.' +\r\n                    enums.getEnumString(enums.TagType, props.tagType).toLocaleLowerCase());\r\n        }\r\n        return title;\r\n    };\r\n    /**\r\n     * handler for selection of tags from list (Callback).\r\n     */\r\n    var onSelection = function (event) {\r\n        props.onSelection(props.tagType, event);\r\n    };\r\n    /**\r\n     * handler for clicking on the tag to expand/collapse the list (Callback).\r\n     */\r\n    var onClickExpandAndCollapse = function (event) {\r\n        props.onArrowClick(props.tagType, event);\r\n    };\r\n    // SVG element for tag icons\r\n    var svgElements = React.createElement(\"g\", { id: 'tag-icon' },\r\n        React.createElement(\"svg\", { viewBox: '0 0 20 20', preserveAspectRatio: 'xMidYMid meet' },\r\n            React.createElement(\"g\", null,\r\n                React.createElement(\"path\", { d: 'M17.125,2.876l-5.553-0.799l-9.336,9.336l6.35,6.352l9.338-9.337L17.125,2.876z M15.145,7.39c-0.7,0.7-1.835,0.7-2.536,0c-0.7-0.699-0.7-1.833,0-2.532c0.7-0.7,1.836-0.7,2.536,0C15.845,5.557,15.845,6.69,15.145,7.39' }),\r\n                React.createElement(\"path\", { d: 'M17.59,2.41l-6.203-0.892L1.49,11.413l7.095,7.097l9.896-9.896L17.59,2.41z M8.585,17.02L2.98,11.413l8.779-8.776l4.9,0.705l0.704,4.899L8.585,17.02z', fill: 'currentColor' }),\r\n                React.createElement(\"path\", { d: 'M12.237,4.483c-0.904,0.905-0.904,2.374,0,3.278c0.453,0.453,1.045,0.679,1.64,0.679s1.188-0.226,1.64-0.679c0.904-0.904,0.904-2.373,0-3.278C14.614,3.581,13.14,3.579,12.237,4.483z M14.772,7.017c-0.494,0.496-1.296,0.493-1.791,0c-0.492-0.492-0.492-1.295,0-1.788c0.247-0.246,0.572-0.369,0.896-0.369s0.648,0.123,0.895,0.369C15.264,5.722,15.264,6.524,14.772,7.017z', fill: 'currentColor' }),\r\n                React.createElement(\"path\", { d: 'M9.127,8.035c-0.207-0.206-0.54-0.206-0.745,0c-0.207,0.206-0.207,0.539,0,0.745l2.838,2.839c0.103,0.102,0.239,0.153,0.373,0.153c0.136,0,0.27-0.052,0.373-0.153c0.206-0.207,0.206-0.54,0-0.746L9.127,8.035z', fill: 'currentColor' }),\r\n                React.createElement(\"path\", { d: 'M6.69,10.472c-0.206-0.206-0.539-0.206-0.745,0c-0.206,0.206-0.206,0.539,0,0.745l2.838,2.839c0.103,0.103,0.238,0.153,0.373,0.153s0.27-0.051,0.373-0.153c0.206-0.206,0.206-0.54,0-0.746L6.69,10.472z', fill: 'currentColor' }))));\r\n    // SVG elements for highlighted tags\r\n    var svgElementHighlight = React.createElement(\"g\", { id: 'tag-highlight' },\r\n        React.createElement(\"svg\", { viewBox: '0 0 20 20', preserveAspectRatio: 'xMidYMid meet' },\r\n            React.createElement(\"g\", null,\r\n                React.createElement(\"path\", { d: 'M13.877,4.859c-0.323,0-0.648,0.123-0.896,0.369c-0.492,0.493-0.492,1.296,0,1.788c0.494,0.493,1.295,0.496,1.791,0c0.492-0.492,0.492-1.295,0-1.788C14.525,4.982,14.2,4.859,13.877,4.859' }),\r\n                React.createElement(\"path\", { d: 'M19.524,8.464l-0.891-6.203L18.52,1.479l-0.78-0.11l-6.204-0.895L11.014,0.4l-0.373,0.373l-9.896,9.895L0,11.413l0.745,0.745l7.096,7.097L8.586,20l0.745-0.745l9.894-9.896l0.375-0.372L19.524,8.464z M8.586,18.51L1.49,11.413l9.896-9.896l6.203,0.895l0.891,6.201L8.586,18.51z' }))));\r\n    // SVG Elements for no tags\r\n    var svgElementEmpty = React.createElement(\"g\", { id: 'tag-icon-empty' },\r\n        React.createElement(\"svg\", { viewBox: '0 0 20 20', preserveAspectRatio: 'xMidYMid meet' },\r\n            React.createElement(\"g\", null,\r\n                React.createElement(\"path\", { d: 'M17.59,2.41l-6.203-0.892L1.49,11.413l7.095,7.097l9.896-9.896L17.59,2.41z M8.585,17.02L2.98,11.413l8.779-8.776l4.9,0.705l0.704,4.899L8.585,17.02z', fill: 'currentColor' }),\r\n                React.createElement(\"path\", { d: 'M12.237,4.483c-0.904,0.905-0.904,2.374,0,3.278c0.453,0.453,1.045,0.679,1.64,0.679s1.188-0.226,1.64-0.679c0.904-0.904,0.904-2.373,0-3.278C14.614,3.581,13.14,3.579,12.237,4.483z M14.772,7.017c-0.494,0.496-1.296,0.493-1.791,0c-0.492-0.492-0.492-1.295,0-1.788c0.247-0.246,0.572-0.369,0.896-0.369s0.648,0.123,0.895,0.369C15.264,5.722,15.264,6.524,14.772,7.017z', fill: 'currentColor' }))));\r\n    if (props.isInList) {\r\n        return (React.createElement(\"a\", { className: classNames('tag-menu-item-link', { ' current': props.isSelected }), title: getTitleForTag(), id: 'tag_item_' + props.tagType, onClick: onSelection },\r\n            React.createElement(\"span\", { className: 'svg-icon tag' },\r\n                React.createElement(\"svg\", { viewBox: '0 0 20 20', className: ' tag-icon ' + tagClass, id: 'tag_list_' + tagClass },\r\n                    React.createElement(\"use\", { xlinkHref: '#tag-icon' + (props.tagType === enums.TagType.Empty ? '-empty' : '') })))));\r\n    }\r\n    else {\r\n        return (React.createElement(\"a\", { className: 'tag-menu-anchor menu-button', id: (props.isFromWorklist ? ('tag_icon_' + props.id) : 'tag_icon'), title: getTitleForTag(), onClick: onClickExpandAndCollapse },\r\n            React.createElement(\"span\", { className: 'svg-icon tag' },\r\n                React.createElement(\"svg\", { viewBox: '0 0 20 20', className: ' tag-icon ' + tagClass, id: 'tag_color' },\r\n                    React.createElement(\"use\", { xlinkHref: '#tag-icon', className: 'non-empty-tag' }, svgElements),\r\n                    React.createElement(\"use\", { xlinkHref: '#tag-icon-empty', className: 'empty-tag' }, svgElementEmpty),\r\n                    React.createElement(\"use\", { xlinkHref: '#tag-highlight', className: 'highlight-tag' }, svgElementHighlight))),\r\n            React.createElement(\"span\", { className: 'sprite-icon toolexpand-icon' + (props.isFromWorklist ? '-grey' : '') })));\r\n    }\r\n};\r\nmodule.exports = tag;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzU2LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvcmVzcG9uc2UvcmVzcG9uc2VzY3JlZW4vdGFnLnRzeD8wZGEzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIHRzbGludDpkaXNhYmxlOm5vLXVudXNlZC12YXJpYWJsZSAqL1xyXG5pbXBvcnQgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xyXG4vKiB0c2xpbnQ6ZW5hYmxlOm5vLXVudXNlZC12YXJpYWJsZSAqL1xyXG5sZXQgY2xhc3NOYW1lcyA9IHJlcXVpcmUoJ2NsYXNzbmFtZXMnKTtcclxuaW1wb3J0IGxvY2FsZVN0b3JlID0gcmVxdWlyZSgnLi4vLi4vLi4vc3RvcmVzL2xvY2FsZS9sb2NhbGVzdG9yZScpO1xyXG5pbXBvcnQgZW51bXMgPSByZXF1aXJlKCcuLi8uLi91dGlsaXR5L2VudW1zJyk7XHJcblxyXG4vKipcclxuICogQ29tcG9uZW50IHByb3BzXHJcbiAqIEBwYXJhbSB7UHJvcHN9IHByb3BzXHJcbiAqIEBwYXJhbSB7YW55fSBhbnlcclxuICovXHJcbmludGVyZmFjZSBQcm9wcyBleHRlbmRzIFByb3BzQmFzZSwgTG9jYWxlU2VsZWN0aW9uQmFzZSB7XHJcbiAgICBpc1NlbGVjdGVkID86IGJvb2xlYW47XHJcbiAgICB0YWdUeXBlOiBlbnVtcy5UYWdUeXBlO1xyXG4gICAgb25BcnJvd0NsaWNrOiBGdW5jdGlvbjtcclxuICAgIG9uU2VsZWN0aW9uOiBGdW5jdGlvbjtcclxuICAgIGlzSW5MaXN0OiBib29sZWFuO1xyXG4gICAgLy8gV2UgYXJlIGdldHRpbmcgdGhpcyB2YWx1ZSBmcm9tIHRhZyBsaXN0IHdoZXJlIHdlIGFyZSBjaGVja2luZyBmb3IgbWFyayBncm91cCBpZCBwcm9wcyBcclxuICAgIC8vIHdoaWNoIGNvbnRhaW4gdmFsdWUgb25seSBpZiB0aGUgcmVzcG9uc2UgaW4gd29ya2xpc3QuXHJcbiAgICBpc0Zyb21Xb3JrbGlzdCA/OiBib29sZWFuO1xyXG59XHJcblxyXG5jb25zdCB0YWc6IFJlYWN0LlN0YXRlbGVzc0NvbXBvbmVudDxQcm9wcz4gPSAocHJvcHM6IFByb3BzKSA9PiB7XHJcblxyXG4gICAgLy8gRm9yIGxpZ2h0LWdyZWVuIHRhZywgaW4gY3NzIGNsYXNzIHRoZXkgYXJlIHVzaW5nIGEgaHlwaGVuKC0pIGJ1dCB0aGUgc2FtZSBjYW5ub3QgYmUgYXBwbGllZCB0byBhbiBFbnVtLlxyXG4gICAgLy8gU28gZm9yIGxpZ2h0IEdyZWVuIFRhZywgd2UgYXJlIGFwcGVuZGluZyB0aGUgY2xhc3MgbmFtZSB0aHJvdWdoIGJlbG93IGNvbmRpdGlvbi5cclxuICAgIC8vIEZvciBvdGhlciB0YWdzLCBpdCB3b3Jrcy5cclxuICAgIGxldCB0YWdDbGFzcyA9IHByb3BzLnRhZ1R5cGUgPT09IGVudW1zLlRhZ1R5cGUuTGlnaHRHcmVlbiA/ICcgbGlnaHQtZ3JlZW4nXHJcbiAgICAgICAgOiBlbnVtcy5nZXRFbnVtU3RyaW5nKGVudW1zLlRhZ1R5cGUsIHByb3BzLnRhZ1R5cGUpLnRvTG9jYWxlTG93ZXJDYXNlKCk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIG1ldGhvZCBnZXRzIHRoZSB0aXRsZSBmb3IgdGhlIHRhZ1xyXG4gICAgICovXHJcbiAgICBjb25zdCBnZXRUaXRsZUZvclRhZyA9ICgpOiBzdHJpbmcgPT4ge1xyXG4gICAgICAgIGxldCB0aXRsZTogc3RyaW5nO1xyXG4gICAgICAgIHN3aXRjaCAocHJvcHMudGFnVHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlIGVudW1zLlRhZ1R5cGUuRW1wdHk6XHJcbiAgICAgICAgICAgICAgICB0aXRsZSA9IGxvY2FsZVN0b3JlLmluc3RhbmNlLlRyYW5zbGF0ZVRleHQoJ21hcmtpbmcud29ya2xpc3QudGFnLXRvb2x0aXBzLm5vLXRhZycpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHByb3BzLmlzU2VsZWN0ZWQgJiYgcHJvcHMuaXNJbkxpc3QgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGUgPSBsb2NhbGVTdG9yZS5pbnN0YW5jZS5UcmFuc2xhdGVUZXh0KCdtYXJraW5nLndvcmtsaXN0LnRhZy10b29sdGlwcy5hZGQtdGFnJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHRpdGxlID0gbG9jYWxlU3RvcmUuaW5zdGFuY2UuVHJhbnNsYXRlVGV4dCgnbWFya2luZy53b3JrbGlzdC50YWctdG9vbHRpcHMuJyArXHJcbiAgICAgICAgICAgICAgICAgICAgZW51bXMuZ2V0RW51bVN0cmluZyhlbnVtcy5UYWdUeXBlLCBwcm9wcy50YWdUeXBlKS50b0xvY2FsZUxvd2VyQ2FzZSgpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRpdGxlO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIGhhbmRsZXIgZm9yIHNlbGVjdGlvbiBvZiB0YWdzIGZyb20gbGlzdCAoQ2FsbGJhY2spLlxyXG4gICAgICovXHJcbiAgICBjb25zdCBvblNlbGVjdGlvbiA9IChldmVudDogYW55KSA9PiB7XHJcbiAgICAgICAgcHJvcHMub25TZWxlY3Rpb24ocHJvcHMudGFnVHlwZSwgZXZlbnQpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIGhhbmRsZXIgZm9yIGNsaWNraW5nIG9uIHRoZSB0YWcgdG8gZXhwYW5kL2NvbGxhcHNlIHRoZSBsaXN0IChDYWxsYmFjaykuXHJcbiAgICAgKi9cclxuICAgIGNvbnN0IG9uQ2xpY2tFeHBhbmRBbmRDb2xsYXBzZSA9IChldmVudDogYW55KSA9PiB7XHJcbiAgICAgICAgcHJvcHMub25BcnJvd0NsaWNrKHByb3BzLnRhZ1R5cGUsIGV2ZW50KTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gU1ZHIGVsZW1lbnQgZm9yIHRhZyBpY29uc1xyXG4gICAgbGV0IHN2Z0VsZW1lbnRzID0gPGcgaWQ9J3RhZy1pY29uJz5cclxuICAgIFx0PHN2ZyB2aWV3Qm94PScwIDAgMjAgMjAnIHByZXNlcnZlQXNwZWN0UmF0aW89J3hNaWRZTWlkIG1lZXQnPlxyXG5cdFx0XHQ8Zz5cclxuICAgICAgICAgICAgICAgIHsvKiB0c2xpbnQ6ZGlzYWJsZTptYXgtbGluZS1sZW5ndGggKi99XHJcblx0XHRcdDxwYXRoIGQ9J00xNy4xMjUsMi44NzZsLTUuNTUzLTAuNzk5bC05LjMzNiw5LjMzNmw2LjM1LDYuMzUybDkuMzM4LTkuMzM3TDE3LjEyNSwyLjg3NnogTTE1LjE0NSw3LjM5Yy0wLjcsMC43LTEuODM1LDAuNy0yLjUzNiwwYy0wLjctMC42OTktMC43LTEuODMzLDAtMi41MzJjMC43LTAuNywxLjgzNi0wLjcsMi41MzYsMEMxNS44NDUsNS41NTcsMTUuODQ1LDYuNjksMTUuMTQ1LDcuMzknPjwvcGF0aD5cclxuXHRcdFx0PHBhdGggZD0nTTE3LjU5LDIuNDFsLTYuMjAzLTAuODkyTDEuNDksMTEuNDEzbDcuMDk1LDcuMDk3bDkuODk2LTkuODk2TDE3LjU5LDIuNDF6IE04LjU4NSwxNy4wMkwyLjk4LDExLjQxM2w4Ljc3OS04Ljc3Nmw0LjksMC43MDVsMC43MDQsNC44OTlMOC41ODUsMTcuMDJ6JyBmaWxsPSdjdXJyZW50Q29sb3InPjwvcGF0aD5cclxuXHRcdFx0PHBhdGggZD0nTTEyLjIzNyw0LjQ4M2MtMC45MDQsMC45MDUtMC45MDQsMi4zNzQsMCwzLjI3OGMwLjQ1MywwLjQ1MywxLjA0NSwwLjY3OSwxLjY0LDAuNjc5czEuMTg4LTAuMjI2LDEuNjQtMC42NzljMC45MDQtMC45MDQsMC45MDQtMi4zNzMsMC0zLjI3OEMxNC42MTQsMy41ODEsMTMuMTQsMy41NzksMTIuMjM3LDQuNDgzeiBNMTQuNzcyLDcuMDE3Yy0wLjQ5NCwwLjQ5Ni0xLjI5NiwwLjQ5My0xLjc5MSwwYy0wLjQ5Mi0wLjQ5Mi0wLjQ5Mi0xLjI5NSwwLTEuNzg4YzAuMjQ3LTAuMjQ2LDAuNTcyLTAuMzY5LDAuODk2LTAuMzY5czAuNjQ4LDAuMTIzLDAuODk1LDAuMzY5QzE1LjI2NCw1LjcyMiwxNS4yNjQsNi41MjQsMTQuNzcyLDcuMDE3eicgZmlsbD0nY3VycmVudENvbG9yJz48L3BhdGg+XHJcblx0XHRcdDxwYXRoIGQ9J005LjEyNyw4LjAzNWMtMC4yMDctMC4yMDYtMC41NC0wLjIwNi0wLjc0NSwwYy0wLjIwNywwLjIwNi0wLjIwNywwLjUzOSwwLDAuNzQ1bDIuODM4LDIuODM5YzAuMTAzLDAuMTAyLDAuMjM5LDAuMTUzLDAuMzczLDAuMTUzYzAuMTM2LDAsMC4yNy0wLjA1MiwwLjM3My0wLjE1M2MwLjIwNi0wLjIwNywwLjIwNi0wLjU0LDAtMC43NDZMOS4xMjcsOC4wMzV6JyBmaWxsPSdjdXJyZW50Q29sb3InPjwvcGF0aD5cclxuXHRcdFx0PHBhdGggZD0nTTYuNjksMTAuNDcyYy0wLjIwNi0wLjIwNi0wLjUzOS0wLjIwNi0wLjc0NSwwYy0wLjIwNiwwLjIwNi0wLjIwNiwwLjUzOSwwLDAuNzQ1bDIuODM4LDIuODM5YzAuMTAzLDAuMTAzLDAuMjM4LDAuMTUzLDAuMzczLDAuMTUzczAuMjctMC4wNTEsMC4zNzMtMC4xNTNjMC4yMDYtMC4yMDYsMC4yMDYtMC41NCwwLTAuNzQ2TDYuNjksMTAuNDcyeicgZmlsbD0nY3VycmVudENvbG9yJz48L3BhdGg+XHJcbiAgICAgICAgICAgIDwvZz5cclxuICAgICAgICAgICAgey8qIHRzbGludDplbmFibGU6bWF4LWxpbmUtbGVuZ3RoICovfVxyXG5cdFx0PC9zdmc+XHJcblx0PC9nPjtcclxuXHJcbiAgICAvLyBTVkcgZWxlbWVudHMgZm9yIGhpZ2hsaWdodGVkIHRhZ3NcclxuICAgIGxldCBzdmdFbGVtZW50SGlnaGxpZ2h0ID0gPGcgaWQ9J3RhZy1oaWdobGlnaHQnPlxyXG4gICAgXHQ8c3ZnIHZpZXdCb3g9JzAgMCAyMCAyMCcgcHJlc2VydmVBc3BlY3RSYXRpbz0neE1pZFlNaWQgbWVldCc+XHJcbiAgICAgICAgICAgIDxnPlxyXG4gICAgICAgICAgICAgICAgey8qIHRzbGludDpkaXNhYmxlOm1heC1saW5lLWxlbmd0aCAqL31cclxuXHRcdFx0PHBhdGggZD0nTTEzLjg3Nyw0Ljg1OWMtMC4zMjMsMC0wLjY0OCwwLjEyMy0wLjg5NiwwLjM2OWMtMC40OTIsMC40OTMtMC40OTIsMS4yOTYsMCwxLjc4OGMwLjQ5NCwwLjQ5MywxLjI5NSwwLjQ5NiwxLjc5MSwwYzAuNDkyLTAuNDkyLDAuNDkyLTEuMjk1LDAtMS43ODhDMTQuNTI1LDQuOTgyLDE0LjIsNC44NTksMTMuODc3LDQuODU5Jz48L3BhdGg+XHJcbiAgICAgICAgICAgIDxwYXRoIGQ9J00xOS41MjQsOC40NjRsLTAuODkxLTYuMjAzTDE4LjUyLDEuNDc5bC0wLjc4LTAuMTFsLTYuMjA0LTAuODk1TDExLjAxNCwwLjRsLTAuMzczLDAuMzczbC05Ljg5Niw5Ljg5NUwwLDExLjQxM2wwLjc0NSwwLjc0NWw3LjA5Niw3LjA5N0w4LjU4NiwyMGwwLjc0NS0wLjc0NWw5Ljg5NC05Ljg5NmwwLjM3NS0wLjM3MkwxOS41MjQsOC40NjR6IE04LjU4NiwxOC41MUwxLjQ5LDExLjQxM2w5Ljg5Ni05Ljg5Nmw2LjIwMywwLjg5NWwwLjg5MSw2LjIwMUw4LjU4NiwxOC41MXonPjwvcGF0aD5cclxuICAgICAgICAgICAgey8qIHRzbGludDplbmFibGU6bWF4LWxpbmUtbGVuZ3RoICovfVxyXG5cdFx0XHQ8L2c+XHJcblx0XHQ8L3N2Zz5cclxuXHQ8L2c+O1xyXG5cclxuICAgIC8vIFNWRyBFbGVtZW50cyBmb3Igbm8gdGFnc1xyXG4gICAgbGV0IHN2Z0VsZW1lbnRFbXB0eSA9IDxnIGlkPSd0YWctaWNvbi1lbXB0eSc+XHJcbiAgICBcdDxzdmcgdmlld0JveD0nMCAwIDIwIDIwJyBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSd4TWlkWU1pZCBtZWV0Jz5cclxuICAgICAgICAgICAgPGc+XHJcbiAgICAgICAgICAgICAgICB7LyogdHNsaW50OmRpc2FibGU6bWF4LWxpbmUtbGVuZ3RoICovfVxyXG5cdFx0XHQ8cGF0aCBkPSdNMTcuNTksMi40MWwtNi4yMDMtMC44OTJMMS40OSwxMS40MTNsNy4wOTUsNy4wOTdsOS44OTYtOS44OTZMMTcuNTksMi40MXogTTguNTg1LDE3LjAyTDIuOTgsMTEuNDEzbDguNzc5LTguNzc2bDQuOSwwLjcwNWwwLjcwNCw0Ljg5OUw4LjU4NSwxNy4wMnonIGZpbGw9J2N1cnJlbnRDb2xvcic+PC9wYXRoPlxyXG4gICAgICAgICAgICA8cGF0aCBkPSdNMTIuMjM3LDQuNDgzYy0wLjkwNCwwLjkwNS0wLjkwNCwyLjM3NCwwLDMuMjc4YzAuNDUzLDAuNDUzLDEuMDQ1LDAuNjc5LDEuNjQsMC42NzlzMS4xODgtMC4yMjYsMS42NC0wLjY3OWMwLjkwNC0wLjkwNCwwLjkwNC0yLjM3MywwLTMuMjc4QzE0LjYxNCwzLjU4MSwxMy4xNCwzLjU3OSwxMi4yMzcsNC40ODN6IE0xNC43NzIsNy4wMTdjLTAuNDk0LDAuNDk2LTEuMjk2LDAuNDkzLTEuNzkxLDBjLTAuNDkyLTAuNDkyLTAuNDkyLTEuMjk1LDAtMS43ODhjMC4yNDctMC4yNDYsMC41NzItMC4zNjksMC44OTYtMC4zNjlzMC42NDgsMC4xMjMsMC44OTUsMC4zNjlDMTUuMjY0LDUuNzIyLDE1LjI2NCw2LjUyNCwxNC43NzIsNy4wMTd6JyBmaWxsPSdjdXJyZW50Q29sb3InPjwvcGF0aD5cclxuICAgICAgICAgICAgey8qIHRzbGludDplbmFibGU6bWF4LWxpbmUtbGVuZ3RoICovfVxyXG5cdFx0XHQ8L2c+XHJcblx0XHQ8L3N2Zz5cclxuXHQ8L2c+O1xyXG5cclxuICAgIGlmIChwcm9wcy5pc0luTGlzdCkge1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxhIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygndGFnLW1lbnUtaXRlbS1saW5rJywgeyAnIGN1cnJlbnQnOiBwcm9wcy5pc1NlbGVjdGVkIH0pfSB0aXRsZT17Z2V0VGl0bGVGb3JUYWcoKX1cclxuICAgICAgICAgICAgICAgIGlkPXsndGFnX2l0ZW1fJyArIHByb3BzLnRhZ1R5cGV9XHJcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXtvblNlbGVjdGlvbn0+XHJcbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J3N2Zy1pY29uIHRhZyc+XHJcbiAgICAgICAgICAgICAgICAgICAgPHN2ZyB2aWV3Qm94PScwIDAgMjAgMjAnIGNsYXNzTmFtZT17JyB0YWctaWNvbiAnICsgdGFnQ2xhc3N9IGlkPXsndGFnX2xpc3RfJyArIHRhZ0NsYXNzfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHVzZSB4bGlua0hyZWY9eycjdGFnLWljb24nICsgKHByb3BzLnRhZ1R5cGUgPT09IGVudW1zLlRhZ1R5cGUuRW1wdHkgPyAnLWVtcHR5JyA6ICcnKX0+PC91c2U+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9zdmc+XHJcbiAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgIDwvYT5cclxuICAgICAgICApO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8YSBjbGFzc05hbWU9J3RhZy1tZW51LWFuY2hvciBtZW51LWJ1dHRvbicgaWQ9eyhwcm9wcy5pc0Zyb21Xb3JrbGlzdCA/ICgndGFnX2ljb25fJyArIHByb3BzLmlkKSAgOiAndGFnX2ljb24nKX1cclxuICAgICAgICAgICAgICAgIHRpdGxlPXtnZXRUaXRsZUZvclRhZygpfSBvbkNsaWNrPXtvbkNsaWNrRXhwYW5kQW5kQ29sbGFwc2V9PlxyXG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSdzdmctaWNvbiB0YWcnPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzdmcgdmlld0JveD0nMCAwIDIwIDIwJyBjbGFzc05hbWU9eycgdGFnLWljb24gJyArIHRhZ0NsYXNzfSBpZD0ndGFnX2NvbG9yJz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHVzZSB4bGlua0hyZWY9JyN0YWctaWNvbicgY2xhc3NOYW1lPSdub24tZW1wdHktdGFnJz57c3ZnRWxlbWVudHN9PC91c2U+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDx1c2UgeGxpbmtIcmVmPScjdGFnLWljb24tZW1wdHknIGNsYXNzTmFtZT0nZW1wdHktdGFnJz57c3ZnRWxlbWVudEVtcHR5fTwvdXNlPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dXNlIHhsaW5rSHJlZj0nI3RhZy1oaWdobGlnaHQnIGNsYXNzTmFtZT0naGlnaGxpZ2h0LXRhZyc+e3N2Z0VsZW1lbnRIaWdobGlnaHR9PC91c2U+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9zdmc+XHJcbiAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9eydzcHJpdGUtaWNvbiB0b29sZXhwYW5kLWljb24nICsgKHByb3BzLmlzRnJvbVdvcmtsaXN0ID8gJy1ncmV5JyA6ICcnICl9Pjwvc3Bhbj5cclxuICAgICAgICAgICAgPC9hPlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5leHBvcnQgPSB0YWc7XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vc291cmNlLW1hcC1sb2FkZXIhLi9zcmMvY29tcG9uZW50cy9yZXNwb25zZS9yZXNwb25zZXNjcmVlbi90YWcudHN4Il0sIm1hcHBpbmdzIjoiO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBa0JBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQU1BO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFLQTtBQUFBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFHQTtBQUNBO0FBRUE7Iiwic291cmNlUm9vdCI6IiJ9");

/***/ }),

/***/ 357:
/* no static exports found */
/* all exports used */
/*!*********************************************************!*\
  !*** ./src/components/user/userdetails/userdetails.tsx ***!
  \*********************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n/* tslint:disable:no-unused-variable */\r\nvar React = __webpack_require__(/*! react */ 0);\r\n/* tslint:enable:no-unused-variable */\r\nvar pureRenderComponent = __webpack_require__(/*! ../../base/purerendercomponent */ 227);\r\nvar UserOptionSettings = __webpack_require__(/*! ../useroptions/useroptions */ 359);\r\nvar localeStore = __webpack_require__(/*! ../../../stores/locale/localestore */ 226);\r\nvar userInfoStore = __webpack_require__(/*! ../../../stores/userinfo/userinfostore */ 244);\r\nvar UserInfo = __webpack_require__(/*! ../userinfo/userinfo */ 358);\r\nvar userInfoActionCreator = __webpack_require__(/*! ../../../actions/userinfo/userinfoactioncreator */ 255);\r\nvar domManager = __webpack_require__(/*! ../../../utility/generic/domhelper */ 294);\r\nvar userOptionsHelper = __webpack_require__(/*! ../../../utility/useroption/useroptionshelper */ 265);\r\nvar markingActionCreator = __webpack_require__(/*! ../../../actions/marking/markingactioncreator */ 246);\r\nvar applicationStore = __webpack_require__(/*! ../../../stores/applicationoffline/applicationstore */ 247);\r\nvar classNames = __webpack_require__(/*! classnames */ 39);\r\n/**\r\n * Represents the User details\r\n */\r\nvar UserDetails = /** @class */ (function (_super) {\r\n    __extends(UserDetails, _super);\r\n    /**\r\n     * Constructor UserDetails\r\n     * @param props\r\n     * @param state\r\n     */\r\n    function UserDetails(props, state) {\r\n        var _this = _super.call(this, props, state) || this;\r\n        _this._boundHandleOnClick = null;\r\n        /**\r\n         * Handle click events on the window and collapse the user details\r\n         * @param {any} source - The source element\r\n         */\r\n        _this.handleOnClick = function (e) {\r\n            /** check if the clicked element is a child of the user details list item. if not close the open window */\r\n            if (e.target !== undefined &&\r\n                domManager.searchParentNode(e.target, function (el) { return el.id === 'userMenuItem'; }) == null) {\r\n                if (_this.state.isUserInfoOpen !== undefined && _this.state.isUserInfoOpen === true) {\r\n                    /** Saving changed user options if any of them changed */\r\n                    _this.saveUserOptions();\r\n                    markingActionCreator.setMarkEntrySelected();\r\n                    _this.setState({ isUserInfoOpen: false, isEditSettingsOpen: false });\r\n                }\r\n            }\r\n            // both touchend and click event is fired one after other, \r\n            // this avoid resetting store in touchend\r\n            if (_this.state.isUserInfoOpen !== undefined && e.type !== 'touchend') {\r\n                userInfoActionCreator.userInfoClicked(_this.state.isUserInfoOpen);\r\n            }\r\n        };\r\n        /**\r\n         * Update the user information.\r\n         */\r\n        _this.updateUserInformation = function () {\r\n            /** setting the state when user info id loaded to initiate rendering of user info component */\r\n            _this.setState({ isUserInfoLoaded: true });\r\n        };\r\n        /**\r\n         * close user info on offline mode\r\n         */\r\n        _this.onOnlineStatusChanged = function () {\r\n            // in offline mode if the user info panel is open and user details are not loaded yet, then close the panel\r\n            if (_this.state.isUserInfoOpen &&\r\n                !userInfoStore.instance.UserName &&\r\n                !applicationStore.instance.isOnline) {\r\n                _this.openCloseUserDetails(false);\r\n            }\r\n        };\r\n        _this.state = {\r\n            isUserInfoOpen: undefined,\r\n            isEditSettingsOpen: undefined,\r\n            isUserInfoLoaded: false\r\n        };\r\n        _this._boundHandleOnClick = _this.handleOnClick.bind(_this);\r\n        _this.openCloseUserDetails = _this.openCloseUserDetails.bind(_this);\r\n        _this.onEditSettingsClick = _this.onEditSettingsClick.bind(_this);\r\n        return _this;\r\n    }\r\n    /**\r\n     * Open/Close the User details\r\n     * @param {any} source - The source element\r\n     */\r\n    UserDetails.prototype.openCloseUserDetails = function (saveUserOptions) {\r\n        if (saveUserOptions === void 0) { saveUserOptions = true; }\r\n        if (this.state.isUserInfoOpen === undefined || this.state.isUserInfoOpen === false) {\r\n            /** if user details window is open, get the user info details to fill */\r\n            userInfoActionCreator.GetLoggedUserInfo();\r\n            this.setState({ isUserInfoOpen: true });\r\n        }\r\n        else {\r\n            if (saveUserOptions) {\r\n                /** Saving changed user options if any of them changed */\r\n                this.saveUserOptions();\r\n            }\r\n            markingActionCreator.setMarkEntrySelected();\r\n            this.setState({ isUserInfoOpen: false, isEditSettingsOpen: false });\r\n        }\r\n    };\r\n    /**\r\n     *  Open/Close edit user option window\r\n     * @param source - The source element\r\n     */\r\n    UserDetails.prototype.onEditSettingsClick = function (source) {\r\n        if (this.state.isEditSettingsOpen === undefined || this.state.isEditSettingsOpen === false) {\r\n            this.setState({ isEditSettingsOpen: true });\r\n        }\r\n        else {\r\n            this.setState({ isEditSettingsOpen: false });\r\n        }\r\n    };\r\n    /**\r\n     * User options save\r\n     */\r\n    UserDetails.prototype.saveUserOptions = function () {\r\n        /** Saving changed user options if any of them changed */\r\n        userOptionsHelper.InitiateSaveUserOption(false);\r\n    };\r\n    /**\r\n     * Subscribe window click event\r\n     */\r\n    UserDetails.prototype.componentDidMount = function () {\r\n        window.addEventListener('touchend', this._boundHandleOnClick);\r\n        window.addEventListener('click', this._boundHandleOnClick);\r\n        /** subscribe to user info event */\r\n        userInfoStore.instance.addListener(userInfoStore.UserInfoStore.USERINFO_EVENT, this.updateUserInformation);\r\n        userInfoStore.instance.addListener(userInfoStore.UserInfoStore.TOGGLE_USER_INFO_PANEL, this.openCloseUserDetails);\r\n        applicationStore.instance.addListener(applicationStore.ApplicationStore.ONLINE_STATUS_UPDATED_EVENT, this.onOnlineStatusChanged);\r\n    };\r\n    /**\r\n     * Unsubscribe window click event\r\n     */\r\n    UserDetails.prototype.componentWillUnmount = function () {\r\n        // Resetting the useroption status to closed once component is being removed from view.\r\n        userInfoActionCreator.userInfoClicked(false);\r\n        window.removeEventListener('click', this._boundHandleOnClick);\r\n        window.removeEventListener('touchend', this._boundHandleOnClick);\r\n        userInfoStore.instance.removeListener(userInfoStore.UserInfoStore.USERINFO_EVENT, this.updateUserInformation);\r\n        userInfoStore.instance.removeListener(userInfoStore.UserInfoStore.TOGGLE_USER_INFO_PANEL, this.openCloseUserDetails);\r\n        applicationStore.instance.removeListener(applicationStore.ApplicationStore.ONLINE_STATUS_UPDATED_EVENT, this.onOnlineStatusChanged);\r\n    };\r\n    /**\r\n     * Render component\r\n     * @returns\r\n     */\r\n    UserDetails.prototype.render = function () {\r\n        var _this = this;\r\n        return (React.createElement(\"li\", { id: 'userMenuItem', role: 'menuitem', \"aria-haspopup\": 'true', className: classNames('dropdown-wrap user-menu', {\r\n                'open': this.isOpenUserInfo,\r\n                'close': this.state.isUserInfoOpen === undefined ? this.state.isUserInfoOpen : !this.isOpenUserInfo\r\n            }), title: '' },\r\n            React.createElement(\"a\", { href: 'javascript:void(0)', title: localeStore.instance.TranslateText('generic.navigation-bar.user-menu-tooltip'), className: 'menu-button allow-edge-tap', onClick: function () { return _this.openCloseUserDetails(); } },\r\n                React.createElement(\"span\", { className: 'sprite-icon user-icon allow-edge-tap' }, \"User Profile\"),\r\n                React.createElement(\"span\", null),\r\n                React.createElement(\"span\", { className: 'sprite-icon menu-arrow-icon lite allow-edge-tap' })),\r\n            React.createElement(\"div\", { className: 'menu-callout' }),\r\n            React.createElement(\"div\", { role: 'menu', \"aria-hidden\": 'true', className: classNames('menu', { 'expanded': this.state.isEditSettingsOpen }) },\r\n                React.createElement(\"div\", { className: 'user-info-holder' },\r\n                    React.createElement(UserInfo, { isUserInfoLoaded: this.state.isUserInfoLoaded, selectedLanguage: this.props.selectedLanguage, isUserInfoOpen: this.isOpenUserInfo }),\r\n                    React.createElement(\"div\", { className: 'edit-settings-nav-holder' },\r\n                        React.createElement(\"a\", { href: 'javascript:void(0)', onClick: this.onEditSettingsClick, className: 'edit-settings-nav' },\r\n                            localeStore.instance.TranslateText('generic.user-menu.profile-section.edit-settings'),\r\n                            React.createElement(\"span\", { className: 'sprite-icon menu-arrow-icon' })))),\r\n                React.createElement(UserOptionSettings, { selectedLanguage: this.props.selectedLanguage, isUserOptionLoaded: this.props.isUserOptionLoaded }))));\r\n    };\r\n    Object.defineProperty(UserDetails.prototype, \"isOpenUserInfo\", {\r\n        /**\r\n         * gets whether open the user info or not\r\n         */\r\n        get: function () {\r\n            // in offline mode if the user info panel is open and user details are not loaded yet, then close the panel\r\n            // if the user details are loaded, then do not close the panel even if system in offline mode\r\n            return this.state.isUserInfoOpen &&\r\n                ((!userInfoStore.instance.UserName && applicationStore.instance.isOnline) ||\r\n                    (userInfoStore.instance.UserName && userInfoStore.instance.UserName !== ''));\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return UserDetails;\r\n}(pureRenderComponent));\r\nmodule.exports = UserDetails;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzU3LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvdXNlci91c2VyZGV0YWlscy91c2VyZGV0YWlscy50c3g/ZGE3YyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiB0c2xpbnQ6ZGlzYWJsZTpuby11bnVzZWQtdmFyaWFibGUgKi9cclxuaW1wb3J0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcclxuLyogdHNsaW50OmVuYWJsZTpuby11bnVzZWQtdmFyaWFibGUgKi9cclxuaW1wb3J0IHB1cmVSZW5kZXJDb21wb25lbnQgPSByZXF1aXJlKCcuLi8uLi9iYXNlL3B1cmVyZW5kZXJjb21wb25lbnQnKTtcclxuaW1wb3J0IFVzZXJPcHRpb25TZXR0aW5ncyA9IHJlcXVpcmUoJy4uL3VzZXJvcHRpb25zL3VzZXJvcHRpb25zJyk7XHJcbmltcG9ydCBsb2NhbGVTdG9yZSA9IHJlcXVpcmUoJy4uLy4uLy4uL3N0b3Jlcy9sb2NhbGUvbG9jYWxlc3RvcmUnKTtcclxuaW1wb3J0IHVzZXJJbmZvU3RvcmUgPSByZXF1aXJlKCcuLi8uLi8uLi9zdG9yZXMvdXNlcmluZm8vdXNlcmluZm9zdG9yZScpO1xyXG5pbXBvcnQgVXNlckluZm8gPSByZXF1aXJlKCcuLi91c2VyaW5mby91c2VyaW5mbycpO1xyXG5pbXBvcnQgdXNlckluZm9BY3Rpb25DcmVhdG9yID0gcmVxdWlyZSgnLi4vLi4vLi4vYWN0aW9ucy91c2VyaW5mby91c2VyaW5mb2FjdGlvbmNyZWF0b3InKTtcclxuaW1wb3J0IGRvbU1hbmFnZXIgPSByZXF1aXJlKCcuLi8uLi8uLi91dGlsaXR5L2dlbmVyaWMvZG9taGVscGVyJyk7XHJcbmltcG9ydCBjdXN0b21FcnJvciA9IHJlcXVpcmUoJy4uLy4uL2Jhc2UvY3VzdG9tZXJyb3InKTtcclxuaW1wb3J0IHVzZXJPcHRpb25zQWN0aW9uQ3JlYXRvciA9IHJlcXVpcmUoJy4uLy4uLy4uL2FjdGlvbnMvdXNlcm9wdGlvbi91c2Vyb3B0aW9uYWN0aW9uY3JlYXRvcicpO1xyXG5pbXBvcnQgdXNlck9wdGlvbnNIZWxwZXIgPSByZXF1aXJlKCcuLi8uLi8uLi91dGlsaXR5L3VzZXJvcHRpb24vdXNlcm9wdGlvbnNoZWxwZXInKTtcclxuaW1wb3J0IG1hcmtpbmdBY3Rpb25DcmVhdG9yID0gcmVxdWlyZSgnLi4vLi4vLi4vYWN0aW9ucy9tYXJraW5nL21hcmtpbmdhY3Rpb25jcmVhdG9yJyk7XHJcbmltcG9ydCBhcHBsaWNhdGlvblN0b3JlID0gcmVxdWlyZSgnLi4vLi4vLi4vc3RvcmVzL2FwcGxpY2F0aW9ub2ZmbGluZS9hcHBsaWNhdGlvbnN0b3JlJyk7XHJcbmxldCBjbGFzc05hbWVzID0gcmVxdWlyZSgnY2xhc3NuYW1lcycpO1xyXG5cclxuLyoqXHJcbiAqIFN0YXRlIG9mIFVzZXIgZGV0YWlsc1xyXG4gKi9cclxuaW50ZXJmYWNlIFN0YXRlIHtcclxuICAgIGlzVXNlckluZm9PcGVuPzogYm9vbGVhbjtcclxuICAgIGlzRWRpdFNldHRpbmdzT3Blbj86IGJvb2xlYW47XHJcbiAgICBpc1VzZXJJbmZvTG9hZGVkPzogYm9vbGVhbjtcclxufVxyXG5cclxuLyoqXHJcbiAqIFN0YXRlIG9mIFVzZXIgZGV0YWlscyBjb21wb25lbnRcclxuICovXHJcbmludGVyZmFjZSBQcm9wcyBleHRlbmRzIExvY2FsZVNlbGVjdGlvbkJhc2Uge1xyXG4gICAgaXNVc2VyT3B0aW9uTG9hZGVkPzogYm9vbGVhbjtcclxufVxyXG5cclxuLyoqXHJcbiAqIFJlcHJlc2VudHMgdGhlIFVzZXIgZGV0YWlsc1xyXG4gKi9cclxuY2xhc3MgVXNlckRldGFpbHMgZXh0ZW5kcyBwdXJlUmVuZGVyQ29tcG9uZW50PFByb3BzLCBTdGF0ZT4ge1xyXG5cclxuICAgIHByaXZhdGUgX2JvdW5kSGFuZGxlT25DbGljazogRXZlbnRMaXN0ZW5lck9iamVjdCA9IG51bGw7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb25zdHJ1Y3RvciBVc2VyRGV0YWlsc1xyXG4gICAgICogQHBhcmFtIHByb3BzXHJcbiAgICAgKiBAcGFyYW0gc3RhdGVcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IocHJvcHM6IFByb3BzLCBzdGF0ZTogU3RhdGUpIHtcclxuICAgICAgICBzdXBlcihwcm9wcywgc3RhdGUpO1xyXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgICAgICAgIGlzVXNlckluZm9PcGVuOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIGlzRWRpdFNldHRpbmdzT3BlbjogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICBpc1VzZXJJbmZvTG9hZGVkOiBmYWxzZVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuX2JvdW5kSGFuZGxlT25DbGljayA9IHRoaXMuaGFuZGxlT25DbGljay5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMub3BlbkNsb3NlVXNlckRldGFpbHMgPSB0aGlzLm9wZW5DbG9zZVVzZXJEZXRhaWxzLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5vbkVkaXRTZXR0aW5nc0NsaWNrID0gdGhpcy5vbkVkaXRTZXR0aW5nc0NsaWNrLmJpbmQodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAvKipcclxuICAgICogSGFuZGxlIGNsaWNrIGV2ZW50cyBvbiB0aGUgd2luZG93IGFuZCBjb2xsYXBzZSB0aGUgdXNlciBkZXRhaWxzXHJcbiAgICAqIEBwYXJhbSB7YW55fSBzb3VyY2UgLSBUaGUgc291cmNlIGVsZW1lbnRcclxuICAgICovXHJcbiAgICBwcml2YXRlIGhhbmRsZU9uQ2xpY2sgPSAoZTogTW91c2VFdmVudCB8IFRvdWNoRXZlbnQpOiBhbnkgPT4ge1xyXG4gICAgICAgIC8qKiBjaGVjayBpZiB0aGUgY2xpY2tlZCBlbGVtZW50IGlzIGEgY2hpbGQgb2YgdGhlIHVzZXIgZGV0YWlscyBsaXN0IGl0ZW0uIGlmIG5vdCBjbG9zZSB0aGUgb3BlbiB3aW5kb3cgKi9cclxuICAgICAgICBpZiAoZS50YXJnZXQgIT09IHVuZGVmaW5lZCAmJlxyXG4gICAgICAgICAgICBkb21NYW5hZ2VyLnNlYXJjaFBhcmVudE5vZGUoZS50YXJnZXQsIGZ1bmN0aW9uIChlbDogYW55KSB7IHJldHVybiBlbC5pZCA9PT0gJ3VzZXJNZW51SXRlbSc7IH0pID09IG51bGwpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUuaXNVc2VySW5mb09wZW4gIT09IHVuZGVmaW5lZCAmJiB0aGlzLnN0YXRlLmlzVXNlckluZm9PcGVuID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAvKiogU2F2aW5nIGNoYW5nZWQgdXNlciBvcHRpb25zIGlmIGFueSBvZiB0aGVtIGNoYW5nZWQgKi9cclxuICAgICAgICAgICAgICAgIHRoaXMuc2F2ZVVzZXJPcHRpb25zKCk7XHJcbiAgICAgICAgICAgICAgICBtYXJraW5nQWN0aW9uQ3JlYXRvci5zZXRNYXJrRW50cnlTZWxlY3RlZCgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGlzVXNlckluZm9PcGVuOiBmYWxzZSwgaXNFZGl0U2V0dGluZ3NPcGVuOiBmYWxzZSB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gYm90aCB0b3VjaGVuZCBhbmQgY2xpY2sgZXZlbnQgaXMgZmlyZWQgb25lIGFmdGVyIG90aGVyLCBcclxuICAgICAgICAvLyB0aGlzIGF2b2lkIHJlc2V0dGluZyBzdG9yZSBpbiB0b3VjaGVuZFxyXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmlzVXNlckluZm9PcGVuICE9PSB1bmRlZmluZWQgJiYgZS50eXBlICE9PSAndG91Y2hlbmQnKSB7XHJcbiAgICAgICAgICAgIHVzZXJJbmZvQWN0aW9uQ3JlYXRvci51c2VySW5mb0NsaWNrZWQodGhpcy5zdGF0ZS5pc1VzZXJJbmZvT3Blbik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgIC8qKlxyXG4gICAgKiBPcGVuL0Nsb3NlIHRoZSBVc2VyIGRldGFpbHNcclxuICAgICogQHBhcmFtIHthbnl9IHNvdXJjZSAtIFRoZSBzb3VyY2UgZWxlbWVudFxyXG4gICAgKi9cclxuICAgIHByaXZhdGUgb3BlbkNsb3NlVXNlckRldGFpbHMoc2F2ZVVzZXJPcHRpb25zOiBib29sZWFuID0gdHJ1ZSkge1xyXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmlzVXNlckluZm9PcGVuID09PSB1bmRlZmluZWQgfHwgdGhpcy5zdGF0ZS5pc1VzZXJJbmZvT3BlbiA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgLyoqIGlmIHVzZXIgZGV0YWlscyB3aW5kb3cgaXMgb3BlbiwgZ2V0IHRoZSB1c2VyIGluZm8gZGV0YWlscyB0byBmaWxsICovXHJcbiAgICAgICAgICAgIHVzZXJJbmZvQWN0aW9uQ3JlYXRvci5HZXRMb2dnZWRVc2VySW5mbygpO1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgaXNVc2VySW5mb09wZW46IHRydWUgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgIGlmIChzYXZlVXNlck9wdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIC8qKiBTYXZpbmcgY2hhbmdlZCB1c2VyIG9wdGlvbnMgaWYgYW55IG9mIHRoZW0gY2hhbmdlZCAqL1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zYXZlVXNlck9wdGlvbnMoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBtYXJraW5nQWN0aW9uQ3JlYXRvci5zZXRNYXJrRW50cnlTZWxlY3RlZCgpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGlzVXNlckluZm9PcGVuOiBmYWxzZSwgaXNFZGl0U2V0dGluZ3NPcGVuOiBmYWxzZSB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogIE9wZW4vQ2xvc2UgZWRpdCB1c2VyIG9wdGlvbiB3aW5kb3dcclxuICAgICAqIEBwYXJhbSBzb3VyY2UgLSBUaGUgc291cmNlIGVsZW1lbnRcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBvbkVkaXRTZXR0aW5nc0NsaWNrKHNvdXJjZTogYW55KSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuaXNFZGl0U2V0dGluZ3NPcGVuID09PSB1bmRlZmluZWQgfHwgdGhpcy5zdGF0ZS5pc0VkaXRTZXR0aW5nc09wZW4gPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBpc0VkaXRTZXR0aW5nc09wZW46IHRydWUgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGlzRWRpdFNldHRpbmdzT3BlbjogZmFsc2UgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlIHRoZSB1c2VyIGluZm9ybWF0aW9uLlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHVwZGF0ZVVzZXJJbmZvcm1hdGlvbiA9ICgpOiB2b2lkID0+IHtcclxuICAgICAgICAvKiogc2V0dGluZyB0aGUgc3RhdGUgd2hlbiB1c2VyIGluZm8gaWQgbG9hZGVkIHRvIGluaXRpYXRlIHJlbmRlcmluZyBvZiB1c2VyIGluZm8gY29tcG9uZW50ICovXHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGlzVXNlckluZm9Mb2FkZWQ6IHRydWUgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgLyoqXHJcbiAgICAqIFVzZXIgb3B0aW9ucyBzYXZlXHJcbiAgICAqL1xyXG4gICAgcHJpdmF0ZSBzYXZlVXNlck9wdGlvbnMoKTogdm9pZCB7XHJcbiAgICAgICAgLyoqIFNhdmluZyBjaGFuZ2VkIHVzZXIgb3B0aW9ucyBpZiBhbnkgb2YgdGhlbSBjaGFuZ2VkICovXHJcbiAgICAgICAgdXNlck9wdGlvbnNIZWxwZXIuSW5pdGlhdGVTYXZlVXNlck9wdGlvbihmYWxzZSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFN1YnNjcmliZSB3aW5kb3cgY2xpY2sgZXZlbnRcclxuICAgICAqL1xyXG4gICAgIHB1YmxpYyBjb21wb25lbnREaWRNb3VudCgpIHtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB0aGlzLl9ib3VuZEhhbmRsZU9uQ2xpY2spO1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2JvdW5kSGFuZGxlT25DbGljayk7XHJcbiAgICAgICAgLyoqIHN1YnNjcmliZSB0byB1c2VyIGluZm8gZXZlbnQgKi9cclxuICAgICAgICB1c2VySW5mb1N0b3JlLmluc3RhbmNlLmFkZExpc3RlbmVyKHVzZXJJbmZvU3RvcmUuVXNlckluZm9TdG9yZS5VU0VSSU5GT19FVkVOVCwgdGhpcy51cGRhdGVVc2VySW5mb3JtYXRpb24pO1xyXG4gICAgICAgIHVzZXJJbmZvU3RvcmUuaW5zdGFuY2UuYWRkTGlzdGVuZXIodXNlckluZm9TdG9yZS5Vc2VySW5mb1N0b3JlLlRPR0dMRV9VU0VSX0lORk9fUEFORUwsIHRoaXMub3BlbkNsb3NlVXNlckRldGFpbHMpO1xyXG4gICAgICAgIGFwcGxpY2F0aW9uU3RvcmUuaW5zdGFuY2UuYWRkTGlzdGVuZXIoYXBwbGljYXRpb25TdG9yZS5BcHBsaWNhdGlvblN0b3JlLk9OTElORV9TVEFUVVNfVVBEQVRFRF9FVkVOVCwgdGhpcy5vbk9ubGluZVN0YXR1c0NoYW5nZWQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVW5zdWJzY3JpYmUgd2luZG93IGNsaWNrIGV2ZW50XHJcbiAgICAgKi9cclxuICAgICBwdWJsaWMgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XHJcblxyXG4gICAgICAgIC8vIFJlc2V0dGluZyB0aGUgdXNlcm9wdGlvbiBzdGF0dXMgdG8gY2xvc2VkIG9uY2UgY29tcG9uZW50IGlzIGJlaW5nIHJlbW92ZWQgZnJvbSB2aWV3LlxyXG4gICAgICAgIHVzZXJJbmZvQWN0aW9uQ3JlYXRvci51c2VySW5mb0NsaWNrZWQoZmFsc2UpO1xyXG5cclxuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9ib3VuZEhhbmRsZU9uQ2xpY2spO1xyXG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRoaXMuX2JvdW5kSGFuZGxlT25DbGljayk7XHJcbiAgICAgICAgdXNlckluZm9TdG9yZS5pbnN0YW5jZS5yZW1vdmVMaXN0ZW5lcih1c2VySW5mb1N0b3JlLlVzZXJJbmZvU3RvcmUuVVNFUklORk9fRVZFTlQsIHRoaXMudXBkYXRlVXNlckluZm9ybWF0aW9uKTtcclxuICAgICAgICB1c2VySW5mb1N0b3JlLmluc3RhbmNlLnJlbW92ZUxpc3RlbmVyKHVzZXJJbmZvU3RvcmUuVXNlckluZm9TdG9yZS5UT0dHTEVfVVNFUl9JTkZPX1BBTkVMLCB0aGlzLm9wZW5DbG9zZVVzZXJEZXRhaWxzKTtcclxuICAgICAgICBhcHBsaWNhdGlvblN0b3JlLmluc3RhbmNlLnJlbW92ZUxpc3RlbmVyKGFwcGxpY2F0aW9uU3RvcmUuQXBwbGljYXRpb25TdG9yZS5PTkxJTkVfU1RBVFVTX1VQREFURURfRVZFTlQsIHRoaXMub25PbmxpbmVTdGF0dXNDaGFuZ2VkKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlbmRlciBjb21wb25lbnRcclxuICAgICAqIEByZXR1cm5zXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyByZW5kZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPGxpIGlkPSd1c2VyTWVudUl0ZW0nIHJvbGU9J21lbnVpdGVtJyBhcmlhLWhhc3BvcHVwPSd0cnVlJ2NsYXNzTmFtZT17Y2xhc3NOYW1lcygnZHJvcGRvd24td3JhcCB1c2VyLW1lbnUnLCB7XHJcbiAgICAgICAgICAgICAgICAnb3Blbic6IHRoaXMuaXNPcGVuVXNlckluZm8sXHJcbiAgICAgICAgICAgICAgICAnY2xvc2UnOiB0aGlzLnN0YXRlLmlzVXNlckluZm9PcGVuID09PSB1bmRlZmluZWQgPyB0aGlzLnN0YXRlLmlzVXNlckluZm9PcGVuIDogIXRoaXMuaXNPcGVuVXNlckluZm9cclxuICAgICAgICAgICAgfSkgfSB0aXRsZT0gJyc+XHJcbiAgICAgICAgICAgICAgICA8YSBocmVmPSdqYXZhc2NyaXB0OnZvaWQoMCknXHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2xvY2FsZVN0b3JlLmluc3RhbmNlLlRyYW5zbGF0ZVRleHQoJ2dlbmVyaWMubmF2aWdhdGlvbi1iYXIudXNlci1tZW51LXRvb2x0aXAnKSB9XHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdtZW51LWJ1dHRvbiBhbGxvdy1lZGdlLXRhcCdcclxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB0aGlzLm9wZW5DbG9zZVVzZXJEZXRhaWxzKCl9ID5cclxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J3Nwcml0ZS1pY29uIHVzZXItaWNvbiBhbGxvdy1lZGdlLXRhcCc+VXNlciBQcm9maWxlXHJcbiAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuPjwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J3Nwcml0ZS1pY29uIG1lbnUtYXJyb3ctaWNvbiBsaXRlIGFsbG93LWVkZ2UtdGFwJz5cclxuICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8L2E+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbWVudS1jYWxsb3V0Jz48L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxkaXYgcm9sZT0nbWVudScgYXJpYS1oaWRkZW49J3RydWUnXHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdtZW51JywgeyAnZXhwYW5kZWQnOiB0aGlzLnN0YXRlLmlzRWRpdFNldHRpbmdzT3BlbiB9KSB9ID5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndXNlci1pbmZvLWhvbGRlcic+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxVc2VySW5mbyBpc1VzZXJJbmZvTG9hZGVkID0ge3RoaXMuc3RhdGUuaXNVc2VySW5mb0xvYWRlZH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkTGFuZ3VhZ2UgPSB7dGhpcy5wcm9wcy5zZWxlY3RlZExhbmd1YWdlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNVc2VySW5mb09wZW49e3RoaXMuaXNPcGVuVXNlckluZm99IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdlZGl0LXNldHRpbmdzLW5hdi1ob2xkZXInPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj0namF2YXNjcmlwdDp2b2lkKDApJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMub25FZGl0U2V0dGluZ3NDbGlja31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2VkaXQtc2V0dGluZ3MtbmF2Jz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bG9jYWxlU3RvcmUuaW5zdGFuY2UuVHJhbnNsYXRlVGV4dCgnZ2VuZXJpYy51c2VyLW1lbnUucHJvZmlsZS1zZWN0aW9uLmVkaXQtc2V0dGluZ3MnKSB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSdzcHJpdGUtaWNvbiBtZW51LWFycm93LWljb24nPjwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPFVzZXJPcHRpb25TZXR0aW5ncyBzZWxlY3RlZExhbmd1YWdlPXt0aGlzLnByb3BzLnNlbGVjdGVkTGFuZ3VhZ2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzVXNlck9wdGlvbkxvYWRlZD17dGhpcy5wcm9wcy5pc1VzZXJPcHRpb25Mb2FkZWR9IC8+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9saT5cclxuICAgICAgICApO1xyXG4gICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIGNsb3NlIHVzZXIgaW5mbyBvbiBvZmZsaW5lIG1vZGVcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBvbk9ubGluZVN0YXR1c0NoYW5nZWQgPSAoKTogdm9pZCA9PiB7XHJcbiAgICAgICAgLy8gaW4gb2ZmbGluZSBtb2RlIGlmIHRoZSB1c2VyIGluZm8gcGFuZWwgaXMgb3BlbiBhbmQgdXNlciBkZXRhaWxzIGFyZSBub3QgbG9hZGVkIHlldCwgdGhlbiBjbG9zZSB0aGUgcGFuZWxcclxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5pc1VzZXJJbmZvT3BlbiAmJlxyXG4gICAgICAgICAgICAhdXNlckluZm9TdG9yZS5pbnN0YW5jZS5Vc2VyTmFtZSAmJlxyXG4gICAgICAgICAgICAhYXBwbGljYXRpb25TdG9yZS5pbnN0YW5jZS5pc09ubGluZSkge1xyXG4gICAgICAgICAgICB0aGlzLm9wZW5DbG9zZVVzZXJEZXRhaWxzKGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogZ2V0cyB3aGV0aGVyIG9wZW4gdGhlIHVzZXIgaW5mbyBvciBub3RcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBnZXQgaXNPcGVuVXNlckluZm8oKTogYm9vbGVhbiB7XHJcbiAgICAgICAgLy8gaW4gb2ZmbGluZSBtb2RlIGlmIHRoZSB1c2VyIGluZm8gcGFuZWwgaXMgb3BlbiBhbmQgdXNlciBkZXRhaWxzIGFyZSBub3QgbG9hZGVkIHlldCwgdGhlbiBjbG9zZSB0aGUgcGFuZWxcclxuICAgICAgICAvLyBpZiB0aGUgdXNlciBkZXRhaWxzIGFyZSBsb2FkZWQsIHRoZW4gZG8gbm90IGNsb3NlIHRoZSBwYW5lbCBldmVuIGlmIHN5c3RlbSBpbiBvZmZsaW5lIG1vZGVcclxuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZS5pc1VzZXJJbmZvT3BlbiAmJlxyXG4gICAgICAgICAgICAoKCF1c2VySW5mb1N0b3JlLmluc3RhbmNlLlVzZXJOYW1lICYmIGFwcGxpY2F0aW9uU3RvcmUuaW5zdGFuY2UuaXNPbmxpbmUpIHx8XHJcbiAgICAgICAgICAgICAgICAodXNlckluZm9TdG9yZS5pbnN0YW5jZS5Vc2VyTmFtZSAmJiB1c2VySW5mb1N0b3JlLmluc3RhbmNlLlVzZXJOYW1lICE9PSAnJykpO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydCA9IFVzZXJEZXRhaWxzO1xyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L3NvdXJjZS1tYXAtbG9hZGVyIS4vc3JjL2NvbXBvbmVudHMvdXNlci91c2VyZGV0YWlscy91c2VyZGV0YWlscy50c3giXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQWtCQTs7QUFFQTtBQUNBO0FBQUE7QUFJQTs7OztBQUlBO0FBQ0E7QUFBQTtBQVBBO0FBb0JBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFvQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQStFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFuS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7QUFDQTtBQXlCQTs7O0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFVQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7O0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFJQTtBQUtBO0FBaUJBO0FBSEE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTtBQUFBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9");

/***/ }),

/***/ 358:
/* no static exports found */
/* all exports used */
/*!***************************************************!*\
  !*** ./src/components/user/userinfo/userinfo.tsx ***!
  \***************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n/* tslint:disable:no-unused-variable */\r\nvar React = __webpack_require__(/*! react */ 0);\r\nvar pureRenderComponent = __webpack_require__(/*! ../../base/purerendercomponent */ 227);\r\nvar userInfoStore = __webpack_require__(/*! ../../../stores/userinfo/userinfostore */ 244);\r\nvar userInfoActionCreator = __webpack_require__(/*! ../../../actions/userinfo/userinfoactioncreator */ 255);\r\nvar Logout = __webpack_require__(/*! ../../logout/logout */ 350);\r\nvar localeStore = __webpack_require__(/*! ../../../stores/locale/localestore */ 226);\r\nvar enums = __webpack_require__(/*! ../../utility/enums */ 225);\r\nvar classNames = __webpack_require__(/*! classnames */ 39);\r\nvar GenericButton = __webpack_require__(/*! ../../utility/genericbutton */ 290);\r\nvar GenericTextBox = __webpack_require__(/*! ../../utility/generictextbox */ 364);\r\nvar busyIndicatorActionCreator = __webpack_require__(/*! ../../../actions/busyindicator/busyindicatoractioncreator */ 279);\r\nvar emailValidator = __webpack_require__(/*! ../../../utility/genericvalidators/emailvalidator */ 380);\r\nvar keyDownHelper = __webpack_require__(/*! ../../../utility/generic/keydownhelper */ 258);\r\nvar messageStore = __webpack_require__(/*! ../../../stores/message/messagestore */ 240);\r\nvar exceptionStore = __webpack_require__(/*! ../../../stores/exception/exceptionstore */ 277);\r\nvar LoadingIndicator = __webpack_require__(/*! ../../utility/loadingindicator/loadingindicator */ 303);\r\nvar loginSession = __webpack_require__(/*! ../../../app/loginsession */ 252);\r\n/**\r\n * Class for displaying user information\r\n * @returns\r\n */\r\nvar UserInfo = /** @class */ (function (_super) {\r\n    __extends(UserInfo, _super);\r\n    /**\r\n     * Initializing a new instance of UserInfo\r\n     */\r\n    function UserInfo(props) {\r\n        var _this = _super.call(this, props, null) || this;\r\n        _this.userName = '';\r\n        _this.emailAddress = '';\r\n        _this.examinerName = '';\r\n        /**\r\n         * Update the user information.\r\n         */\r\n        _this.updateUserInformation = function () {\r\n            _this.userName = userInfoStore.instance.UserName;\r\n            _this.examinerName = userInfoStore.instance.ExaminerName;\r\n            _this.emailAddress = userInfoStore.instance.EmailAddress;\r\n        };\r\n        /**\r\n         * Fires after email save\r\n         */\r\n        _this.userInfoSaved = function () {\r\n            busyIndicatorActionCreator.setBusyIndicatorInvoker(enums.BusyIndicatorInvoker.none);\r\n            _this.setNormalMode();\r\n        };\r\n        _this.state = {\r\n            operationMode: enums.OperationMode.normal,\r\n            isValidEmail: true\r\n        };\r\n        _this.onEditEmailClick = _this.onEditEmailClick.bind(_this);\r\n        _this.setValues = _this.setValues.bind(_this);\r\n        _this.OnSaveClick = _this.OnSaveClick.bind(_this);\r\n        _this.onCancelClick = _this.onCancelClick.bind(_this);\r\n        _this.switchUserButtonClick = _this.switchUserButtonClick.bind(_this);\r\n        return _this;\r\n    }\r\n    /**\r\n     * Render component\r\n     */\r\n    UserInfo.prototype.render = function () {\r\n        var outPut = undefined;\r\n        if (this.userName === '') {\r\n            outPut =\r\n                (React.createElement(LoadingIndicator, { id: 'loading', key: 'loading', cssClass: 'section-loader loading' }));\r\n        }\r\n        else {\r\n            outPut = (React.createElement(\"div\", null,\r\n                React.createElement(\"div\", { className: 'user-photo-holder user-big-icon sprite-icon' }),\r\n                React.createElement(\"div\", { className: 'user-details' },\r\n                    React.createElement(\"h4\", { className: 'full-name' },\r\n                        \" \",\r\n                        this.examinerName),\r\n                    React.createElement(\"h5\", { className: 'bolder user-name' },\r\n                        localeStore.instance.TranslateText('generic.user-menu.profile-section.user-name'),\r\n                        \": \",\r\n                        this.userName)),\r\n                this.getEmailHolder(),\r\n                React.createElement(\"div\", null,\r\n                    this.getSwitchUserButton(),\r\n                    React.createElement(Logout, { selectedLanguage: this.props.selectedLanguage }))));\r\n        }\r\n        return (React.createElement(\"div\", { className: 'user-info-wrapper' }, outPut));\r\n    };\r\n    /**\r\n     * Component did mount\r\n     */\r\n    UserInfo.prototype.componentDidMount = function () {\r\n        userInfoStore.instance.addListener(userInfoStore.UserInfoStore.USERINFO_EVENT, this.updateUserInformation);\r\n        userInfoStore.instance.addListener(userInfoStore.UserInfoStore.USERINFO_SAVE, this.userInfoSaved);\r\n    };\r\n    /**\r\n     * Component will unmount\r\n     */\r\n    UserInfo.prototype.componentWillUnmount = function () {\r\n        userInfoStore.instance.removeListener(userInfoStore.UserInfoStore.USERINFO_EVENT, this.updateUserInformation);\r\n        userInfoStore.instance.removeListener(userInfoStore.UserInfoStore.USERINFO_SAVE, this.userInfoSaved);\r\n    };\r\n    /**\r\n     * Comparing the props to check the rerender\r\n     * @param {Props} nextProps\r\n     */\r\n    UserInfo.prototype.componentWillReceiveProps = function (nextProps) {\r\n        // If the use info panel has been opened deactivating to set the free flow\r\n        // of the email edit and submit.\r\n        if ((this.props.isUserInfoOpen === false || this.props.isUserInfoOpen === undefined) && nextProps.isUserInfoOpen === true) {\r\n            keyDownHelper.instance.DeActivate(enums.MarkEntryDeactivator.EmailAddress);\r\n        }\r\n        else if (this.props.isUserInfoOpen === true && nextProps.isUserInfoOpen === false\r\n            && (!messageStore.instance.isMessagePanelVisible && !exceptionStore.instance.isExceptionPanelVisible)) {\r\n            keyDownHelper.instance.Activate(enums.MarkEntryDeactivator.EmailAddress);\r\n            this.setState({\r\n                operationMode: enums.OperationMode.normal\r\n            });\r\n        }\r\n    };\r\n    /**\r\n     * Returns the email edit div\r\n     * @returns\r\n     */\r\n    UserInfo.prototype.getEmailHolder = function () {\r\n        if (!this.props.isUserInfoOpen) {\r\n            /** if user clicks outside the user profile, email will be restored from store and\r\n             *  setting the email text box into normal mode\r\n             */\r\n            this.emailAddress = userInfoStore.instance.EmailAddress;\r\n            this.setValues(this.emailAddress);\r\n        }\r\n        return (React.createElement(\"div\", { className: classNames('user-email-holder', {\r\n                ' edit': (this.state.operationMode === enums.OperationMode.edit)\r\n            }) },\r\n            React.createElement(\"a\", { href: 'javascript:void(0)', className: 'email-link-holder', onClick: this.onEditEmailClick },\r\n                React.createElement(\"span\", { className: 'email-address' }, this.emailAddress),\r\n                React.createElement(\"span\", { className: 'add-email-text' }, localeStore.instance.TranslateText('generic.user-menu.profile-section.email-address-placeholder')),\r\n                React.createElement(\"span\", { className: 'edit-small-icon sprite-icon' }),\r\n                React.createElement(\"span\", { className: 'add-small-icon sprite-icon' })),\r\n            React.createElement(GenericTextBox, { id: 'emailId', key: 'emailId', setValue: this.setValues, onEnterKeyDown: this.OnSaveClick, value: this.emailAddress, tabindex: 1 }),\r\n            React.createElement(\"span\", { className: 'bar' }),\r\n            React.createElement(\"div\", { className: 'email-edit-footer', \"aria-hidden\": 'true' },\r\n                this.getEmaiValidationMessage(),\r\n                React.createElement(\"div\", { className: 'save-button-wrapper' },\r\n                    React.createElement(\"button\", { className: 'rounded', id: 'cancelEditEmail', onClick: this.onCancelClick }, localeStore.instance.TranslateText('generic.user-menu.profile-section.cancel-email-button')),\r\n                    React.createElement(\"button\", { className: 'rounded primary', id: 'saveEmail', onClick: this.OnSaveClick }, localeStore.instance.TranslateText('generic.user-menu.profile-section.save-email-button'))))));\r\n    };\r\n    /**\r\n     * Handles the edit click.\r\n     * @param {any} evnt\r\n     */\r\n    UserInfo.prototype.onEditEmailClick = function (evnt) {\r\n        keyDownHelper.instance.DeActivate(enums.MarkEntryDeactivator.EmailAddress);\r\n        this.emailAddress = userInfoStore.instance.EmailAddress;\r\n        this.setState({\r\n            operationMode: enums.OperationMode.edit,\r\n            isValidEmail: true\r\n        });\r\n    };\r\n    /**\r\n     * Handles the cancel click.\r\n     * @param {any} evnt\r\n     */\r\n    UserInfo.prototype.onCancelClick = function (evnt) {\r\n        this.setNormalMode();\r\n    };\r\n    /**\r\n     * Handles the save click\r\n     * @param {any} evnt\r\n     */\r\n    UserInfo.prototype.OnSaveClick = function (evnt) {\r\n        var emailValidatorInstance = new emailValidator();\r\n        var examinerEmailArgument;\r\n        /* If email id is invalid setting the state for re-render */\r\n        if (!emailValidatorInstance.ValidateEmail(this.emailAddress)) {\r\n            this.setState({\r\n                isValidEmail: false\r\n            });\r\n            return;\r\n        }\r\n        /* Setting the examinerEmailArgument */\r\n        examinerEmailArgument = { emailAddress: this.emailAddress };\r\n        var busyIndicatorInvoker;\r\n        busyIndicatorInvoker = enums.BusyIndicatorInvoker.saveEmail;\r\n        /*Show busy indicator on submitting response */\r\n        busyIndicatorActionCreator.setBusyIndicatorInvoker(busyIndicatorInvoker);\r\n        this.setState({\r\n            isValidEmail: true\r\n        });\r\n        userInfoActionCreator.SaveEmailAddress(examinerEmailArgument);\r\n    };\r\n    /**\r\n     * Set value from the Generic textbox component\r\n     * @param {string} value\r\n     */\r\n    UserInfo.prototype.setValues = function (value) {\r\n        this.emailAddress = value;\r\n        // Deactivate MarkEntry only if UserInfo is open\r\n        if (this.props.isUserInfoOpen) {\r\n            keyDownHelper.instance.DeActivate(enums.MarkEntryDeactivator.EmailAddress);\r\n        }\r\n    };\r\n    /**\r\n     * Returns the email validation div\r\n     * @returns\r\n     */\r\n    UserInfo.prototype.getEmaiValidationMessage = function () {\r\n        if (!this.state.isValidEmail) {\r\n            return (React.createElement(\"div\", { className: 'error-holder' },\r\n                React.createElement(\"span\", { className: 'error-alert bubble simple-alert show text-centre' }, localeStore.instance.TranslateText('generic.user-menu.profile-section.email-validation-message'))));\r\n        }\r\n        else {\r\n            return (React.createElement(\"div\", null));\r\n        }\r\n    };\r\n    /**\r\n     * Disabling edit\r\n     */\r\n    UserInfo.prototype.setNormalMode = function () {\r\n        this.emailAddress = userInfoStore.instance.EmailAddress;\r\n        this.setValues(this.emailAddress);\r\n        this.setState({\r\n            operationMode: enums.OperationMode.normal\r\n        });\r\n    };\r\n    /**\r\n     * save email on keypress\r\n     * @param event\r\n     */\r\n    UserInfo.prototype.handleKeyDown = function (event) {\r\n        // enter key keycode\r\n        if ((event.keyCode === 13) && (this.state.operationMode === enums.OperationMode.edit)) {\r\n            this.OnSaveClick(event);\r\n        }\r\n    };\r\n    /**\r\n     * Returns switch user div\r\n     * @returns\r\n     */\r\n    UserInfo.prototype.getSwitchUserButton = function () {\r\n        if (loginSession.IS_SUPPORT_ADMIN_LOGIN) {\r\n            return (React.createElement(GenericButton, { id: 'button-primary-rounded-switch-user-button', key: 'key-button-primary-rounded-switch-user-button', className: 'button primary rounded', title: localeStore.instance.TranslateText('generic.user-menu.profile-section.switch-user-button'), content: localeStore.instance.TranslateText('generic.user-menu.profile-section.switch-user-button'), disabled: false, onClick: this.switchUserButtonClick }));\r\n        }\r\n    };\r\n    /**\r\n     * Switch user button click event.\r\n     */\r\n    UserInfo.prototype.switchUserButtonClick = function () {\r\n        userInfoActionCreator.onSwitchUserButtonClick();\r\n    };\r\n    return UserInfo;\r\n}(pureRenderComponent));\r\nmodule.exports = UserInfo;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzU4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvdXNlci91c2VyaW5mby91c2VyaW5mby50c3g/YTIwNyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiB0c2xpbnQ6ZGlzYWJsZTpuby11bnVzZWQtdmFyaWFibGUgKi9cclxuaW1wb3J0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcclxuaW1wb3J0IHB1cmVSZW5kZXJDb21wb25lbnQgPSByZXF1aXJlKCcuLi8uLi9iYXNlL3B1cmVyZW5kZXJjb21wb25lbnQnKTtcclxuaW1wb3J0IHVzZXJJbmZvU3RvcmUgPSByZXF1aXJlKCcuLi8uLi8uLi9zdG9yZXMvdXNlcmluZm8vdXNlcmluZm9zdG9yZScpO1xyXG5pbXBvcnQgdXNlckluZm9BY3Rpb25DcmVhdG9yID0gcmVxdWlyZSgnLi4vLi4vLi4vYWN0aW9ucy91c2VyaW5mby91c2VyaW5mb2FjdGlvbmNyZWF0b3InKTtcclxuaW1wb3J0IExvZ291dCA9IHJlcXVpcmUoJy4uLy4uL2xvZ291dC9sb2dvdXQnKTtcclxuaW1wb3J0IGxvY2FsZVN0b3JlID0gcmVxdWlyZSgnLi4vLi4vLi4vc3RvcmVzL2xvY2FsZS9sb2NhbGVzdG9yZScpO1xyXG5pbXBvcnQgZW51bXMgPSByZXF1aXJlKCcuLi8uLi91dGlsaXR5L2VudW1zJyk7XHJcbmxldCBjbGFzc05hbWVzID0gcmVxdWlyZSgnY2xhc3NuYW1lcycpO1xyXG5pbXBvcnQgR2VuZXJpY0J1dHRvbiA9IHJlcXVpcmUoJy4uLy4uL3V0aWxpdHkvZ2VuZXJpY2J1dHRvbicpO1xyXG5pbXBvcnQgR2VuZXJpY1RleHRCb3ggPSByZXF1aXJlKCcuLi8uLi91dGlsaXR5L2dlbmVyaWN0ZXh0Ym94Jyk7XHJcbmltcG9ydCBHZW5lcmljRGlhbG9nID0gcmVxdWlyZSgnLi4vLi4vdXRpbGl0eS9nZW5lcmljZGlhbG9nJyk7XHJcbmltcG9ydCBidXN5SW5kaWNhdG9yQWN0aW9uQ3JlYXRvciA9IHJlcXVpcmUoJy4uLy4uLy4uL2FjdGlvbnMvYnVzeWluZGljYXRvci9idXN5aW5kaWNhdG9yYWN0aW9uY3JlYXRvcicpO1xyXG5pbXBvcnQgZW1haWxWYWxpZGF0b3IgPSByZXF1aXJlKCcuLi8uLi8uLi91dGlsaXR5L2dlbmVyaWN2YWxpZGF0b3JzL2VtYWlsdmFsaWRhdG9yJyk7XHJcbmltcG9ydCBrZXlEb3duSGVscGVyID0gcmVxdWlyZSgnLi4vLi4vLi4vdXRpbGl0eS9nZW5lcmljL2tleWRvd25oZWxwZXInKTtcclxuaW1wb3J0IG1lc3NhZ2VTdG9yZSA9IHJlcXVpcmUoJy4uLy4uLy4uL3N0b3Jlcy9tZXNzYWdlL21lc3NhZ2VzdG9yZScpO1xyXG5pbXBvcnQgZXhjZXB0aW9uU3RvcmUgPSByZXF1aXJlKCcuLi8uLi8uLi9zdG9yZXMvZXhjZXB0aW9uL2V4Y2VwdGlvbnN0b3JlJyk7XHJcbmltcG9ydCBMb2FkaW5nSW5kaWNhdG9yID0gcmVxdWlyZSgnLi4vLi4vdXRpbGl0eS9sb2FkaW5naW5kaWNhdG9yL2xvYWRpbmdpbmRpY2F0b3InKTtcclxuaW1wb3J0IGxvZ2luU2Vzc2lvbiA9IHJlcXVpcmUoJy4uLy4uLy4uL2FwcC9sb2dpbnNlc3Npb24nKTtcclxuXHJcbmludGVyZmFjZSBQcm9wcyBleHRlbmRzIExvY2FsZVNlbGVjdGlvbkJhc2Uge1xyXG4gICAgaXNVc2VySW5mb0xvYWRlZDogYm9vbGVhbjtcclxuICAgIGlzVXNlckluZm9PcGVuOiBib29sZWFuO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgU3RhdGUge1xyXG4gICAgb3BlcmF0aW9uTW9kZTogZW51bXMuT3BlcmF0aW9uTW9kZTtcclxuICAgIGlzVmFsaWRFbWFpbDogYm9vbGVhbjtcclxufVxyXG5cclxuLyoqXHJcbiAqIENsYXNzIGZvciBkaXNwbGF5aW5nIHVzZXIgaW5mb3JtYXRpb25cclxuICogQHJldHVybnNcclxuICovXHJcbmNsYXNzIFVzZXJJbmZvIGV4dGVuZHMgcHVyZVJlbmRlckNvbXBvbmVudDxQcm9wcywgYW55PiB7XHJcblxyXG4gICAgcHJpdmF0ZSB1c2VyTmFtZTogc3RyaW5nID0gJyc7XHJcbiAgICBwcml2YXRlIGVtYWlsQWRkcmVzczogc3RyaW5nID0gJyc7XHJcbiAgICBwcml2YXRlIGV4YW1pbmVyTmFtZTogc3RyaW5nID0gJyc7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBJbml0aWFsaXppbmcgYSBuZXcgaW5zdGFuY2Ugb2YgVXNlckluZm9cclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IocHJvcHM6IFByb3BzKSB7XHJcbiAgICAgICAgc3VwZXIocHJvcHMsIG51bGwpO1xyXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgICAgICAgIG9wZXJhdGlvbk1vZGU6IGVudW1zLk9wZXJhdGlvbk1vZGUubm9ybWFsLFxyXG4gICAgICAgICAgICBpc1ZhbGlkRW1haWw6IHRydWVcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLm9uRWRpdEVtYWlsQ2xpY2sgPSB0aGlzLm9uRWRpdEVtYWlsQ2xpY2suYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLnNldFZhbHVlcyA9IHRoaXMuc2V0VmFsdWVzLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5PblNhdmVDbGljayA9IHRoaXMuT25TYXZlQ2xpY2suYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLm9uQ2FuY2VsQ2xpY2sgPSB0aGlzLm9uQ2FuY2VsQ2xpY2suYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLnN3aXRjaFVzZXJCdXR0b25DbGljayA9IHRoaXMuc3dpdGNoVXNlckJ1dHRvbkNsaWNrLmJpbmQodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZW5kZXIgY29tcG9uZW50XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyByZW5kZXIoKSB7XHJcbiAgICAgICAgbGV0IG91dFB1dCA9IHVuZGVmaW5lZDtcclxuICAgICAgICBpZiAodGhpcy51c2VyTmFtZSA9PT0gJycpIHtcclxuICAgICAgICAgICAgb3V0UHV0ID1cclxuICAgICAgICAgICAgICAgICg8TG9hZGluZ0luZGljYXRvciBpZD0nbG9hZGluZycga2V5PSdsb2FkaW5nJyBjc3NDbGFzcz0nc2VjdGlvbi1sb2FkZXIgbG9hZGluZycgLz4pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIG91dFB1dCA9IChcclxuICAgICAgICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3VzZXItcGhvdG8taG9sZGVyIHVzZXItYmlnLWljb24gc3ByaXRlLWljb24nIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3VzZXItZGV0YWlscyc+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzc05hbWU9J2Z1bGwtbmFtZSc+IHt0aGlzLmV4YW1pbmVyTmFtZX08L2g0PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aDUgY2xhc3NOYW1lPSdib2xkZXIgdXNlci1uYW1lJz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsb2NhbGVTdG9yZS5pbnN0YW5jZS5UcmFuc2xhdGVUZXh0KCdnZW5lcmljLnVzZXItbWVudS5wcm9maWxlLXNlY3Rpb24udXNlci1uYW1lJyl9OiB7dGhpcy51c2VyTmFtZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9oNT5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICB7dGhpcy5nZXRFbWFpbEhvbGRlcigpfVxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICAgICAgICAge3RoaXMuZ2V0U3dpdGNoVXNlckJ1dHRvbigpfVxyXG4gICAgICAgICAgICAgICAgICAgIDxMb2dvdXQgc2VsZWN0ZWRMYW5ndWFnZT17dGhpcy5wcm9wcy5zZWxlY3RlZExhbmd1YWdlfSAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgcmV0dXJuICg8ZGl2IGNsYXNzTmFtZT0ndXNlci1pbmZvLXdyYXBwZXInPlxyXG4gICAgICAgICAgICB7b3V0UHV0fVxyXG4gICAgICAgIDwvZGl2Pik7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb21wb25lbnQgZGlkIG1vdW50XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBjb21wb25lbnREaWRNb3VudCgpIHtcclxuICAgICAgICB1c2VySW5mb1N0b3JlLmluc3RhbmNlLmFkZExpc3RlbmVyKHVzZXJJbmZvU3RvcmUuVXNlckluZm9TdG9yZS5VU0VSSU5GT19FVkVOVCwgdGhpcy51cGRhdGVVc2VySW5mb3JtYXRpb24pO1xyXG4gICAgICAgIHVzZXJJbmZvU3RvcmUuaW5zdGFuY2UuYWRkTGlzdGVuZXIodXNlckluZm9TdG9yZS5Vc2VySW5mb1N0b3JlLlVTRVJJTkZPX1NBVkUsIHRoaXMudXNlckluZm9TYXZlZCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb21wb25lbnQgd2lsbCB1bm1vdW50XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcclxuICAgICAgICB1c2VySW5mb1N0b3JlLmluc3RhbmNlLnJlbW92ZUxpc3RlbmVyKHVzZXJJbmZvU3RvcmUuVXNlckluZm9TdG9yZS5VU0VSSU5GT19FVkVOVCwgdGhpcy51cGRhdGVVc2VySW5mb3JtYXRpb24pO1xyXG4gICAgICAgIHVzZXJJbmZvU3RvcmUuaW5zdGFuY2UucmVtb3ZlTGlzdGVuZXIodXNlckluZm9TdG9yZS5Vc2VySW5mb1N0b3JlLlVTRVJJTkZPX1NBVkUsIHRoaXMudXNlckluZm9TYXZlZCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb21wYXJpbmcgdGhlIHByb3BzIHRvIGNoZWNrIHRoZSByZXJlbmRlclxyXG4gICAgICogQHBhcmFtIHtQcm9wc30gbmV4dFByb3BzXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wczogUHJvcHMpIHtcclxuICAgICAgICAvLyBJZiB0aGUgdXNlIGluZm8gcGFuZWwgaGFzIGJlZW4gb3BlbmVkIGRlYWN0aXZhdGluZyB0byBzZXQgdGhlIGZyZWUgZmxvd1xyXG4gICAgICAgIC8vIG9mIHRoZSBlbWFpbCBlZGl0IGFuZCBzdWJtaXQuXHJcbiAgICAgICAgaWYgKCh0aGlzLnByb3BzLmlzVXNlckluZm9PcGVuID09PSBmYWxzZSB8fCB0aGlzLnByb3BzLmlzVXNlckluZm9PcGVuID09PSB1bmRlZmluZWQpICYmIG5leHRQcm9wcy5pc1VzZXJJbmZvT3BlbiA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICBrZXlEb3duSGVscGVyLmluc3RhbmNlLkRlQWN0aXZhdGUoZW51bXMuTWFya0VudHJ5RGVhY3RpdmF0b3IuRW1haWxBZGRyZXNzKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMuaXNVc2VySW5mb09wZW4gPT09IHRydWUgJiYgbmV4dFByb3BzLmlzVXNlckluZm9PcGVuID09PSBmYWxzZVxyXG4gICAgICAgICAgICAmJiAoIW1lc3NhZ2VTdG9yZS5pbnN0YW5jZS5pc01lc3NhZ2VQYW5lbFZpc2libGUgJiYgIWV4Y2VwdGlvblN0b3JlLmluc3RhbmNlLmlzRXhjZXB0aW9uUGFuZWxWaXNpYmxlKSkge1xyXG4gICAgICAgICAgICBrZXlEb3duSGVscGVyLmluc3RhbmNlLkFjdGl2YXRlKGVudW1zLk1hcmtFbnRyeURlYWN0aXZhdG9yLkVtYWlsQWRkcmVzcyk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgb3BlcmF0aW9uTW9kZTogZW51bXMuT3BlcmF0aW9uTW9kZS5ub3JtYWxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgZW1haWwgZWRpdCBkaXZcclxuICAgICAqIEByZXR1cm5zXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZ2V0RW1haWxIb2xkZXIoKTogSlNYLkVsZW1lbnQge1xyXG4gICAgICAgIGlmICghdGhpcy5wcm9wcy5pc1VzZXJJbmZvT3Blbikge1xyXG5cclxuICAgICAgICAgICAgLyoqIGlmIHVzZXIgY2xpY2tzIG91dHNpZGUgdGhlIHVzZXIgcHJvZmlsZSwgZW1haWwgd2lsbCBiZSByZXN0b3JlZCBmcm9tIHN0b3JlIGFuZFxyXG4gICAgICAgICAgICAgKiAgc2V0dGluZyB0aGUgZW1haWwgdGV4dCBib3ggaW50byBub3JtYWwgbW9kZVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgdGhpcy5lbWFpbEFkZHJlc3MgPSB1c2VySW5mb1N0b3JlLmluc3RhbmNlLkVtYWlsQWRkcmVzcztcclxuICAgICAgICAgICAgdGhpcy5zZXRWYWx1ZXModGhpcy5lbWFpbEFkZHJlc3MpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuICg8ZGl2IGNsYXNzTmFtZT17Y2xhc3NOYW1lcygndXNlci1lbWFpbC1ob2xkZXInLCB7XHJcbiAgICAgICAgICAgICcgZWRpdCc6ICh0aGlzLnN0YXRlLm9wZXJhdGlvbk1vZGUgPT09IGVudW1zLk9wZXJhdGlvbk1vZGUuZWRpdClcclxuICAgICAgICB9KX0+XHJcbiAgICAgICAgICAgIDxhIGhyZWY9J2phdmFzY3JpcHQ6dm9pZCgwKScgY2xhc3NOYW1lPSdlbWFpbC1saW5rLWhvbGRlcicgb25DbGljaz17dGhpcy5vbkVkaXRFbWFpbENsaWNrfSA+XHJcbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J2VtYWlsLWFkZHJlc3MnPlxyXG4gICAgICAgICAgICAgICAgICAgIHt0aGlzLmVtYWlsQWRkcmVzc31cclxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0nYWRkLWVtYWlsLXRleHQnPlxyXG4gICAgICAgICAgICAgICAgICAgIHtsb2NhbGVTdG9yZS5pbnN0YW5jZS5UcmFuc2xhdGVUZXh0KCdnZW5lcmljLnVzZXItbWVudS5wcm9maWxlLXNlY3Rpb24uZW1haWwtYWRkcmVzcy1wbGFjZWhvbGRlcicpfVxyXG4gICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSdlZGl0LXNtYWxsLWljb24gc3ByaXRlLWljb24nIC8+XHJcbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J2FkZC1zbWFsbC1pY29uIHNwcml0ZS1pY29uJyAvPlxyXG4gICAgICAgICAgICA8L2E+XHJcbiAgICAgICAgICAgIDxHZW5lcmljVGV4dEJveCBpZD0nZW1haWxJZCdcclxuICAgICAgICAgICAgICAgIGtleT0nZW1haWxJZCdcclxuICAgICAgICAgICAgICAgIHNldFZhbHVlPXt0aGlzLnNldFZhbHVlc31cclxuICAgICAgICAgICAgICAgIG9uRW50ZXJLZXlEb3duPXt0aGlzLk9uU2F2ZUNsaWNrfVxyXG4gICAgICAgICAgICAgICAgdmFsdWU9e3RoaXMuZW1haWxBZGRyZXNzfVxyXG4gICAgICAgICAgICAgICAgdGFiaW5kZXg9ezF9IC8+XHJcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0nYmFyJyAvPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZW1haWwtZWRpdC1mb290ZXInIGFyaWEtaGlkZGVuPSd0cnVlJz5cclxuICAgICAgICAgICAgICAgIHt0aGlzLmdldEVtYWlWYWxpZGF0aW9uTWVzc2FnZSgpfVxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3NhdmUtYnV0dG9uLXdyYXBwZXInPlxyXG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPSdyb3VuZGVkJyBpZD0nY2FuY2VsRWRpdEVtYWlsJyBvbkNsaWNrPXt0aGlzLm9uQ2FuY2VsQ2xpY2t9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7bG9jYWxlU3RvcmUuaW5zdGFuY2UuVHJhbnNsYXRlVGV4dCgnZ2VuZXJpYy51c2VyLW1lbnUucHJvZmlsZS1zZWN0aW9uLmNhbmNlbC1lbWFpbC1idXR0b24nKX1cclxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT0ncm91bmRlZCBwcmltYXJ5JyBpZD0nc2F2ZUVtYWlsJyBvbkNsaWNrPXt0aGlzLk9uU2F2ZUNsaWNrfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAge2xvY2FsZVN0b3JlLmluc3RhbmNlLlRyYW5zbGF0ZVRleHQoJ2dlbmVyaWMudXNlci1tZW51LnByb2ZpbGUtc2VjdGlvbi5zYXZlLWVtYWlsLWJ1dHRvbicpfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2Pik7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGUgdGhlIHVzZXIgaW5mb3JtYXRpb24uXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgdXBkYXRlVXNlckluZm9ybWF0aW9uID0gKCk6IHZvaWQgPT4ge1xyXG4gICAgICAgIHRoaXMudXNlck5hbWUgPSB1c2VySW5mb1N0b3JlLmluc3RhbmNlLlVzZXJOYW1lO1xyXG4gICAgICAgIHRoaXMuZXhhbWluZXJOYW1lID0gdXNlckluZm9TdG9yZS5pbnN0YW5jZS5FeGFtaW5lck5hbWU7XHJcbiAgICAgICAgdGhpcy5lbWFpbEFkZHJlc3MgPSB1c2VySW5mb1N0b3JlLmluc3RhbmNlLkVtYWlsQWRkcmVzcztcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIYW5kbGVzIHRoZSBlZGl0IGNsaWNrLlxyXG4gICAgICogQHBhcmFtIHthbnl9IGV2bnRcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBvbkVkaXRFbWFpbENsaWNrKGV2bnQ6IGFueSkge1xyXG4gICAgICAgIGtleURvd25IZWxwZXIuaW5zdGFuY2UuRGVBY3RpdmF0ZShlbnVtcy5NYXJrRW50cnlEZWFjdGl2YXRvci5FbWFpbEFkZHJlc3MpO1xyXG4gICAgICAgIHRoaXMuZW1haWxBZGRyZXNzID0gdXNlckluZm9TdG9yZS5pbnN0YW5jZS5FbWFpbEFkZHJlc3M7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIG9wZXJhdGlvbk1vZGU6IGVudW1zLk9wZXJhdGlvbk1vZGUuZWRpdCxcclxuICAgICAgICAgICAgaXNWYWxpZEVtYWlsOiB0cnVlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIYW5kbGVzIHRoZSBjYW5jZWwgY2xpY2suXHJcbiAgICAgKiBAcGFyYW0ge2FueX0gZXZudFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIG9uQ2FuY2VsQ2xpY2soZXZudDogYW55KSB7XHJcbiAgICAgICAgdGhpcy5zZXROb3JtYWxNb2RlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIYW5kbGVzIHRoZSBzYXZlIGNsaWNrXHJcbiAgICAgKiBAcGFyYW0ge2FueX0gZXZudFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIE9uU2F2ZUNsaWNrKGV2bnQ6IGFueSkge1xyXG4gICAgICAgIGxldCBlbWFpbFZhbGlkYXRvckluc3RhbmNlID0gbmV3IGVtYWlsVmFsaWRhdG9yKCk7XHJcbiAgICAgICAgbGV0IGV4YW1pbmVyRW1haWxBcmd1bWVudDogRXhhbWluZXJFbWFpbEFyZ3VtZW50O1xyXG4gICAgICAgIC8qIElmIGVtYWlsIGlkIGlzIGludmFsaWQgc2V0dGluZyB0aGUgc3RhdGUgZm9yIHJlLXJlbmRlciAqL1xyXG4gICAgICAgIGlmICghZW1haWxWYWxpZGF0b3JJbnN0YW5jZS5WYWxpZGF0ZUVtYWlsKHRoaXMuZW1haWxBZGRyZXNzKSkge1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgIGlzVmFsaWRFbWFpbDogZmFsc2VcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLyogU2V0dGluZyB0aGUgZXhhbWluZXJFbWFpbEFyZ3VtZW50ICovXHJcbiAgICAgICAgZXhhbWluZXJFbWFpbEFyZ3VtZW50ID0geyBlbWFpbEFkZHJlc3M6IHRoaXMuZW1haWxBZGRyZXNzIH07XHJcbiAgICAgICAgbGV0IGJ1c3lJbmRpY2F0b3JJbnZva2VyOiBlbnVtcy5CdXN5SW5kaWNhdG9ySW52b2tlcjtcclxuICAgICAgICBidXN5SW5kaWNhdG9ySW52b2tlciA9IGVudW1zLkJ1c3lJbmRpY2F0b3JJbnZva2VyLnNhdmVFbWFpbDtcclxuICAgICAgICAvKlNob3cgYnVzeSBpbmRpY2F0b3Igb24gc3VibWl0dGluZyByZXNwb25zZSAqL1xyXG4gICAgICAgIGJ1c3lJbmRpY2F0b3JBY3Rpb25DcmVhdG9yLnNldEJ1c3lJbmRpY2F0b3JJbnZva2VyKGJ1c3lJbmRpY2F0b3JJbnZva2VyKTtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgaXNWYWxpZEVtYWlsOiB0cnVlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdXNlckluZm9BY3Rpb25DcmVhdG9yLlNhdmVFbWFpbEFkZHJlc3MoZXhhbWluZXJFbWFpbEFyZ3VtZW50KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldCB2YWx1ZSBmcm9tIHRoZSBHZW5lcmljIHRleHRib3ggY29tcG9uZW50XHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBzZXRWYWx1ZXModmFsdWU6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuZW1haWxBZGRyZXNzID0gdmFsdWU7XHJcblxyXG4gICAgICAgIC8vIERlYWN0aXZhdGUgTWFya0VudHJ5IG9ubHkgaWYgVXNlckluZm8gaXMgb3BlblxyXG4gICAgICAgIGlmICh0aGlzLnByb3BzLmlzVXNlckluZm9PcGVuKSB7XHJcbiAgICAgICAgICAgIGtleURvd25IZWxwZXIuaW5zdGFuY2UuRGVBY3RpdmF0ZShlbnVtcy5NYXJrRW50cnlEZWFjdGl2YXRvci5FbWFpbEFkZHJlc3MpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIGVtYWlsIHZhbGlkYXRpb24gZGl2XHJcbiAgICAgKiBAcmV0dXJuc1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGdldEVtYWlWYWxpZGF0aW9uTWVzc2FnZSgpOiBKU1guRWxlbWVudCB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnN0YXRlLmlzVmFsaWRFbWFpbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gKDxkaXYgY2xhc3NOYW1lPSdlcnJvci1ob2xkZXInPlxyXG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSdlcnJvci1hbGVydCBidWJibGUgc2ltcGxlLWFsZXJ0IHNob3cgdGV4dC1jZW50cmUnPlxyXG4gICAgICAgICAgICAgICAgICAgIHtsb2NhbGVTdG9yZS5pbnN0YW5jZS5UcmFuc2xhdGVUZXh0KCdnZW5lcmljLnVzZXItbWVudS5wcm9maWxlLXNlY3Rpb24uZW1haWwtdmFsaWRhdGlvbi1tZXNzYWdlJyl9XHJcbiAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgIDwvZGl2Pik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuICg8ZGl2PjwvZGl2Pik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRmlyZXMgYWZ0ZXIgZW1haWwgc2F2ZVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHVzZXJJbmZvU2F2ZWQgPSAoKTogdm9pZCA9PiB7XHJcbiAgICAgICAgYnVzeUluZGljYXRvckFjdGlvbkNyZWF0b3Iuc2V0QnVzeUluZGljYXRvckludm9rZXIoZW51bXMuQnVzeUluZGljYXRvckludm9rZXIubm9uZSk7XHJcbiAgICAgICAgdGhpcy5zZXROb3JtYWxNb2RlKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogRGlzYWJsaW5nIGVkaXRcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBzZXROb3JtYWxNb2RlKCkge1xyXG4gICAgICAgIHRoaXMuZW1haWxBZGRyZXNzID0gdXNlckluZm9TdG9yZS5pbnN0YW5jZS5FbWFpbEFkZHJlc3M7XHJcbiAgICAgICAgdGhpcy5zZXRWYWx1ZXModGhpcy5lbWFpbEFkZHJlc3MpO1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBvcGVyYXRpb25Nb2RlOiBlbnVtcy5PcGVyYXRpb25Nb2RlLm5vcm1hbFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogc2F2ZSBlbWFpbCBvbiBrZXlwcmVzc1xyXG4gICAgICogQHBhcmFtIGV2ZW50XHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgaGFuZGxlS2V5RG93bihldmVudDogS2V5Ym9hcmRFdmVudCkge1xyXG4gICAgICAgIC8vIGVudGVyIGtleSBrZXljb2RlXHJcbiAgICAgICAgaWYgKChldmVudC5rZXlDb2RlID09PSAxMykgJiYgKHRoaXMuc3RhdGUub3BlcmF0aW9uTW9kZSA9PT0gZW51bXMuT3BlcmF0aW9uTW9kZS5lZGl0KSkge1xyXG4gICAgICAgICAgICB0aGlzLk9uU2F2ZUNsaWNrKGV2ZW50KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHN3aXRjaCB1c2VyIGRpdlxyXG4gICAgICogQHJldHVybnNcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBnZXRTd2l0Y2hVc2VyQnV0dG9uKCk6IEpTWC5FbGVtZW50IHtcclxuICAgICAgICBpZiAobG9naW5TZXNzaW9uLklTX1NVUFBPUlRfQURNSU5fTE9HSU4pIHtcclxuICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgIDxHZW5lcmljQnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgaWQ9eydidXR0b24tcHJpbWFyeS1yb3VuZGVkLXN3aXRjaC11c2VyLWJ1dHRvbid9XHJcbiAgICAgICAgICAgICAgICAgICAga2V5PXsna2V5LWJ1dHRvbi1wcmltYXJ5LXJvdW5kZWQtc3dpdGNoLXVzZXItYnV0dG9uJ31cclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9eydidXR0b24gcHJpbWFyeSByb3VuZGVkJ31cclxuICAgICAgICAgICAgICAgICAgICB0aXRsZT17bG9jYWxlU3RvcmUuaW5zdGFuY2UuVHJhbnNsYXRlVGV4dCgnZ2VuZXJpYy51c2VyLW1lbnUucHJvZmlsZS1zZWN0aW9uLnN3aXRjaC11c2VyLWJ1dHRvbicpfVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9e2xvY2FsZVN0b3JlLmluc3RhbmNlLlRyYW5zbGF0ZVRleHQoJ2dlbmVyaWMudXNlci1tZW51LnByb2ZpbGUtc2VjdGlvbi5zd2l0Y2gtdXNlci1idXR0b24nKX1cclxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZmFsc2V9XHJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5zd2l0Y2hVc2VyQnV0dG9uQ2xpY2t9XHJcbiAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAgLyoqXHJcbiAgICAgICogU3dpdGNoIHVzZXIgYnV0dG9uIGNsaWNrIGV2ZW50LlxyXG4gICAgICAqL1xyXG4gICAgcHJpdmF0ZSBzd2l0Y2hVc2VyQnV0dG9uQ2xpY2soKSB7XHJcbiAgICAgICAgdXNlckluZm9BY3Rpb25DcmVhdG9yLm9uU3dpdGNoVXNlckJ1dHRvbkNsaWNrKCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCA9IFVzZXJJbmZvO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vc291cmNlLW1hcC1sb2FkZXIhLi9zcmMvY29tcG9uZW50cy91c2VyL3VzZXJpbmZvL3VzZXJpbmZvLnRzeCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFZQTs7O0FBR0E7QUFDQTtBQUFBO0FBTUE7O0FBRUE7QUFDQTtBQUFBO0FBUEE7QUFDQTtBQUNBO0FBc0lBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQThFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBMU5BO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7QUFBQTtBQUNBO0FBQ0E7O0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBR0E7QUFHQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUdBO0FBQ0E7QUFFQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQU1BO0FBV0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBVUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQVdBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTsiLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),

/***/ 359:
/* no static exports found */
/* all exports used */
/*!*********************************************************!*\
  !*** ./src/components/user/useroptions/useroptions.tsx ***!
  \*********************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\n/* tslint:disable:no-unused-variable */\r\nvar React = __webpack_require__(/*! react */ 0);\r\nvar LanguageSelector = __webpack_require__(/*! ../../utility/locale/languageselector */ 442);\r\nvar localeStore = __webpack_require__(/*! ../../../stores/locale/localestore */ 226);\r\nvar classNames = __webpack_require__(/*! classnames */ 39);\r\nvar LogoutConfirmationDialog = __webpack_require__(/*! ../../logout/logoutconfirmationdialog */ 351);\r\n/**\r\n * Represents the user option\r\n */\r\nvar useroption = function (props) {\r\n    return (React.createElement(\"div\", { className: 'edit-settings-holder', \"aria-hidden\": 'true' },\r\n        React.createElement(\"div\", { className: 'tab-holder horizontal' },\r\n            React.createElement(\"div\", { className: 'tab-content-holder' },\r\n                React.createElement(\"div\", { id: 'settingsTab1', role: 'tabpanel', \"aria-hidden\": 'false', className: classNames('tab-content text-left active') },\r\n                    React.createElement(\"div\", { className: 'language-settings form-field inline' },\r\n                        React.createElement(\"label\", { className: 'label', htmlFor: 'langSelected' }, localeStore.instance.TranslateText('generic.user-menu.user-options.language')),\r\n                        React.createElement(LanguageSelector, { availableLanguages: languageList, selectedLanguage: props.selectedLanguage, isBeforeLogin: false })),\r\n                    React.createElement(LogoutConfirmationDialog, { selectedLanguage: props.selectedLanguage, isUserOptionLoaded: props.isUserOptionLoaded }))))));\r\n};\r\nmodule.exports = useroption;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzU5LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvdXNlci91c2Vyb3B0aW9ucy91c2Vyb3B0aW9ucy50c3g/YWQxNSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiB0c2xpbnQ6ZGlzYWJsZTpuby11bnVzZWQtdmFyaWFibGUgKi9cclxuaW1wb3J0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcclxuLyogdHNsaW50OmVuYWJsZTpuby11bnVzZWQtdmFyaWFibGUgKi9cclxuaW1wb3J0IHB1cmVSZW5kZXJDb21wb25lbnQgPSByZXF1aXJlKCcuLi8uLi9iYXNlL3B1cmVyZW5kZXJjb21wb25lbnQnKTtcclxuaW1wb3J0IExhbmd1YWdlU2VsZWN0b3IgPSByZXF1aXJlKCcuLi8uLi91dGlsaXR5L2xvY2FsZS9sYW5ndWFnZXNlbGVjdG9yJyk7XHJcbmltcG9ydCBsb2NhbGVTdG9yZSA9IHJlcXVpcmUoJy4uLy4uLy4uL3N0b3Jlcy9sb2NhbGUvbG9jYWxlc3RvcmUnKTtcclxubGV0IGNsYXNzTmFtZXMgPSByZXF1aXJlKCdjbGFzc25hbWVzJyk7XHJcbmltcG9ydCBMb2dvdXRDb25maXJtYXRpb25EaWFsb2cgPSByZXF1aXJlKCcuLi8uLi9sb2dvdXQvbG9nb3V0Y29uZmlybWF0aW9uZGlhbG9nJyk7XHJcbmRlY2xhcmUgbGV0IGxhbmd1YWdlTGlzdDogYW55O1xyXG5cclxuIC8qKlxyXG4gICogUHJvcGVydGllcyBvZiBVc2VyIG9wdGlvbnNcclxuICAqL1xyXG5pbnRlcmZhY2UgUHJvcHMgZXh0ZW5kcyBMb2NhbGVTZWxlY3Rpb25CYXNlIHtcclxuICAgIGlzVXNlck9wdGlvbkxvYWRlZD86IGJvb2xlYW47XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZXByZXNlbnRzIHRoZSB1c2VyIG9wdGlvblxyXG4gKi9cclxuY29uc3QgdXNlcm9wdGlvbiA9IChwcm9wczogUHJvcHMpID0+IHtcclxuXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdlZGl0LXNldHRpbmdzLWhvbGRlcicgYXJpYS1oaWRkZW49J3RydWUnPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd0YWItaG9sZGVyIGhvcml6b250YWwnPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndGFiLWNvbnRlbnQtaG9sZGVyJz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9J3NldHRpbmdzVGFiMScgcm9sZT0ndGFicGFuZWwnIGFyaWEtaGlkZGVuPSdmYWxzZSdcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ3RhYi1jb250ZW50IHRleHQtbGVmdCBhY3RpdmUnKSB9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdsYW5ndWFnZS1zZXR0aW5ncyBmb3JtLWZpZWxkIGlubGluZSc+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9J2xhYmVsJyBodG1sRm9yPSdsYW5nU2VsZWN0ZWQnPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2xvY2FsZVN0b3JlLmluc3RhbmNlLlRyYW5zbGF0ZVRleHQoJ2dlbmVyaWMudXNlci1tZW51LnVzZXItb3B0aW9ucy5sYW5ndWFnZScpIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxMYW5ndWFnZVNlbGVjdG9yIGF2YWlsYWJsZUxhbmd1YWdlcyA9IHtsYW5ndWFnZUxpc3R9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZExhbmd1YWdlID0ge3Byb3BzLnNlbGVjdGVkTGFuZ3VhZ2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0JlZm9yZUxvZ2luID0ge2ZhbHNlfSAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8TG9nb3V0Q29uZmlybWF0aW9uRGlhbG9nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkTGFuZ3VhZ2U9e3Byb3BzLnNlbGVjdGVkTGFuZ3VhZ2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzVXNlck9wdGlvbkxvYWRlZD17cHJvcHMuaXNVc2VyT3B0aW9uTG9hZGVkfS8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgKTtcclxufTtcclxuZXhwb3J0ID0gdXNlcm9wdGlvbjtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L3NvdXJjZS1tYXAtbG9hZGVyIS4vc3JjL2NvbXBvbmVudHMvdXNlci91c2Vyb3B0aW9ucy91c2Vyb3B0aW9ucy50c3giXSwibWFwcGluZ3MiOiI7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFVQTs7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFJQTtBQVFBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9");

/***/ }),

/***/ 364:
/* no static exports found */
/* all exports used */
/*!***************************************************!*\
  !*** ./src/components/utility/generictextbox.tsx ***!
  \***************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n/* tslint:disable:no-unused-variable */\r\nvar React = __webpack_require__(/*! react */ 0);\r\n/* tslint:disable:no-unused-variable */\r\nvar pureRenderComponent = __webpack_require__(/*! ../base/purerendercomponent */ 227);\r\n// non-typescript require\r\nvar classNames = __webpack_require__(/*! classnames */ 39);\r\n/**\r\n * React component class for GenericTextBox\r\n */\r\nvar GenericTextBox = /** @class */ (function (_super) {\r\n    __extends(GenericTextBox, _super);\r\n    /**\r\n     * @constructor\r\n     */\r\n    function GenericTextBox(props, state) {\r\n        var _this = _super.call(this, props, state) || this;\r\n        _this.state = {\r\n            currentValue: _this.props.value\r\n        };\r\n        _this.handleChange = _this.handleChange.bind(_this);\r\n        _this.onFocus = _this.onFocus.bind(_this);\r\n        _this.handleKeyDown = _this.handleKeyDown.bind(_this);\r\n        return _this;\r\n    }\r\n    /**\r\n     * Render method\r\n     */\r\n    GenericTextBox.prototype.render = function () {\r\n        return (React.createElement(\"input\", { type: 'text', className: 'text-underline', id: this.props.id, value: this.state.currentValue, onChange: this.handleChange, onFocus: this.onFocus, onKeyDown: this.handleKeyDown, spellCheck: false, \"aria-label\": this.props.id, ref: 'genericTextBox' }));\r\n    };\r\n    /**\r\n     * This method will set value for login form\r\n     * @param e\r\n     */\r\n    GenericTextBox.prototype.handleChange = function (e) {\r\n        this.setState({ currentValue: e.target.value });\r\n        this.props.setValue(e.target.value);\r\n    };\r\n    /**\r\n     * Handles the On focus\r\n     * @param {any} e\r\n     */\r\n    GenericTextBox.prototype.onFocus = function (e) {\r\n        this.setState({ currentValue: e.target.value });\r\n        this.props.setValue(e.target.value);\r\n    };\r\n    /**\r\n     * Checking if Enter key is pressed\r\n     * @param {any} e\r\n     */\r\n    GenericTextBox.prototype.handleKeyDown = function (e) {\r\n        if (e.keyCode === 13) {\r\n            this.props.onEnterKeyDown();\r\n        }\r\n    };\r\n    /**\r\n     * This will set state hasError based on props value\r\n     * @param nxtProps\r\n     */\r\n    GenericTextBox.prototype.componentWillReceiveProps = function (nxtProps) {\r\n        var _this = this;\r\n        this.setState({ currentValue: nxtProps.value }, function () {\r\n            _this.refs.genericTextBox.focus();\r\n        });\r\n    };\r\n    return GenericTextBox;\r\n}(pureRenderComponent));\r\nmodule.exports = GenericTextBox;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzY0LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvdXRpbGl0eS9nZW5lcmljdGV4dGJveC50c3g/OWM2YiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiB0c2xpbnQ6ZGlzYWJsZTpuby11bnVzZWQtdmFyaWFibGUgKi9cclxuaW1wb3J0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcclxuLyogdHNsaW50OmRpc2FibGU6bm8tdW51c2VkLXZhcmlhYmxlICovXHJcbmltcG9ydCBwdXJlUmVuZGVyQ29tcG9uZW50ID0gcmVxdWlyZSgnLi4vYmFzZS9wdXJlcmVuZGVyY29tcG9uZW50Jyk7XHJcbi8vIG5vbi10eXBlc2NyaXB0IHJlcXVpcmVcclxubGV0IGNsYXNzTmFtZXMgPSByZXF1aXJlKCdjbGFzc25hbWVzJyk7XHJcbmltcG9ydCBsb2NhbGVTdG9yZSA9IHJlcXVpcmUoJy4uLy4uL3N0b3Jlcy9sb2NhbGUvbG9jYWxlc3RvcmUnKTtcclxuaW1wb3J0IGVudW1zID0gcmVxdWlyZSgnLi4vdXRpbGl0eS9lbnVtcycpO1xyXG5cclxuLyoqXHJcbiAqIFByb3BlcnRpZXMgb2YgYSBjb21wb25lbnRcclxuICovXHJcbmludGVyZmFjZSBQcm9wcyBleHRlbmRzIExvY2FsZVNlbGVjdGlvbkJhc2UsIFByb3BzQmFzZSB7XHJcbiAgICBzZXRWYWx1ZTogRnVuY3Rpb247XHJcbiAgICB2YWx1ZTogc3RyaW5nO1xyXG4gICAgdGFiaW5kZXg6IG51bWJlcjtcclxuICAgIG9uRW50ZXJLZXlEb3duPzogRnVuY3Rpb247XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBbGwgZmllbGRzIG9wdGlvbmFsIHRvIGFsbG93IHBhcnRpYWwgc3RhdGUgdXBkYXRlcyBpbiBzZXRTdGF0ZVxyXG4gKi9cclxuaW50ZXJmYWNlIFN0YXRlIHtcclxuICAgIGN1cnJlbnRWYWx1ZT86IHN0cmluZztcclxuICAgIGhhc0Vycm9yPzogYm9vbGVhbjtcclxufVxyXG5cclxuLyoqXHJcbiAqIFJlYWN0IGNvbXBvbmVudCBjbGFzcyBmb3IgR2VuZXJpY1RleHRCb3hcclxuICovXHJcbmNsYXNzIEdlbmVyaWNUZXh0Qm94IGV4dGVuZHMgcHVyZVJlbmRlckNvbXBvbmVudDxQcm9wcywgU3RhdGU+IHtcclxuXHJcbiAgICAvKiogcmVmcyAqL1xyXG4gICAgcHVibGljIHJlZnM6IHtcclxuICAgICAgICBba2V5OiBzdHJpbmddOiAoRWxlbWVudCk7XHJcbiAgICAgICAgZ2VuZXJpY1RleHRCb3g6IChIVE1MSW5wdXRFbGVtZW50KTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAY29uc3RydWN0b3JcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IocHJvcHM6IFByb3BzLCBzdGF0ZTogU3RhdGUpIHtcclxuICAgICAgICBzdXBlcihwcm9wcywgc3RhdGUpO1xyXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgICAgICAgIGN1cnJlbnRWYWx1ZTogdGhpcy5wcm9wcy52YWx1ZVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuaGFuZGxlQ2hhbmdlID0gdGhpcy5oYW5kbGVDaGFuZ2UuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLm9uRm9jdXMgPSB0aGlzLm9uRm9jdXMuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLmhhbmRsZUtleURvd24gPSB0aGlzLmhhbmRsZUtleURvd24uYmluZCh0aGlzKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUmVuZGVyIG1ldGhvZFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcmVuZGVyKCkge1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ndGV4dCdcclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J3RleHQtdW5kZXJsaW5lJ1xyXG4gICAgICAgICAgICAgICAgICAgIGlkPXt0aGlzLnByb3BzLmlkfVxyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLmN1cnJlbnRWYWx1ZX1cclxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5oYW5kbGVDaGFuZ2V9XHJcbiAgICAgICAgICAgICAgICAgICAgb25Gb2N1cz17dGhpcy5vbkZvY3VzfVxyXG4gICAgICAgICAgICAgICAgICAgIG9uS2V5RG93bj17dGhpcy5oYW5kbGVLZXlEb3dufVxyXG4gICAgICAgICAgICAgICAgICAgIHNwZWxsQ2hlY2s9e2ZhbHNlfVxyXG4gICAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9e3RoaXMucHJvcHMuaWR9XHJcbiAgICAgICAgICAgICAgICAgICAgcmVmPXsnZ2VuZXJpY1RleHRCb3gnfSAvPlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIG1ldGhvZCB3aWxsIHNldCB2YWx1ZSBmb3IgbG9naW4gZm9ybVxyXG4gICAgICogQHBhcmFtIGVcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBoYW5kbGVDaGFuZ2UoZTogYW55KTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGN1cnJlbnRWYWx1ZTogZS50YXJnZXQudmFsdWUgfSk7XHJcbiAgICAgICAgdGhpcy5wcm9wcy5zZXRWYWx1ZShlLnRhcmdldC52YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIYW5kbGVzIHRoZSBPbiBmb2N1c1xyXG4gICAgICogQHBhcmFtIHthbnl9IGVcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBvbkZvY3VzKGU6IGFueSk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBjdXJyZW50VmFsdWU6IGUudGFyZ2V0LnZhbHVlIH0pO1xyXG4gICAgICAgIHRoaXMucHJvcHMuc2V0VmFsdWUoZS50YXJnZXQudmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2hlY2tpbmcgaWYgRW50ZXIga2V5IGlzIHByZXNzZWRcclxuICAgICAqIEBwYXJhbSB7YW55fSBlXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgaGFuZGxlS2V5RG93bihlOiBhbnkpOiB2b2lkIHtcclxuICAgICAgICBpZiAoZS5rZXlDb2RlID09PSAxMykge1xyXG4gICAgICAgICAgICB0aGlzLnByb3BzLm9uRW50ZXJLZXlEb3duKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhpcyB3aWxsIHNldCBzdGF0ZSBoYXNFcnJvciBiYXNlZCBvbiBwcm9wcyB2YWx1ZVxyXG4gICAgICogQHBhcmFtIG54dFByb3BzXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG54dFByb3BzOiBQcm9wcyk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBjdXJyZW50VmFsdWU6IG54dFByb3BzLnZhbHVlIH0sICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5yZWZzLmdlbmVyaWNUZXh0Qm94LmZvY3VzKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5leHBvcnQgPSBHZW5lcmljVGV4dEJveDtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L3NvdXJjZS1tYXAtbG9hZGVyIS4vc3JjL2NvbXBvbmVudHMvdXRpbGl0eS9nZW5lcmljdGV4dGJveC50c3giXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBc0JBOztBQUVBO0FBQ0E7QUFBQTtBQVFBOztBQUVBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQVlBO0FBRUE7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7O0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBRUE7Iiwic291cmNlUm9vdCI6IiJ9");

/***/ }),

/***/ 366:
/* no static exports found */
/* all exports used */
/*!******************************************************************************!*\
  !*** ./src/components/utility/notification/messagenotificationindicator.tsx ***!
  \******************************************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n/* tslint:disable:no-unused-variable */\r\nvar React = __webpack_require__(/*! react */ 0);\r\n/* tslint:enable:no-unused-variable */\r\nvar pureRenderComponent = __webpack_require__(/*! ../../base/purerendercomponent */ 227);\r\nvar localeStore = __webpack_require__(/*! ../../../stores/locale/localestore */ 226);\r\nvar markingActionCreator = __webpack_require__(/*! ../../../actions/marking/markingactioncreator */ 246);\r\nvar enums = __webpack_require__(/*! ../enums */ 225);\r\nvar navigationHelper = __webpack_require__(/*! ../../utility/navigation/navigationhelper */ 248);\r\nvar markingStore = __webpack_require__(/*! ../../../stores/marking/markingstore */ 236);\r\nvar markingHelper = __webpack_require__(/*! ../../../utility/markscheme/markinghelper */ 267);\r\nvar popupHelper = __webpack_require__(/*! ../popup/popuphelper */ 288);\r\nvar applicationActionCreator = __webpack_require__(/*! ../../../actions/applicationoffline/applicationactioncreator */ 256);\r\nvar responseStore = __webpack_require__(/*! ../../../stores/response/responsestore */ 235);\r\nvar userInfoActionCreator = __webpack_require__(/*! ../../../actions/userinfo/userinfoactioncreator */ 255);\r\nvar navigationStore = __webpack_require__(/*! ../../../stores/navigation/navigationstore */ 275);\r\nvar markerOperationModeFactory = __webpack_require__(/*! ../markeroperationmode/markeroperationmodefactory */ 232);\r\nvar simulationModeHelper = __webpack_require__(/*! ../../../utility/simulation/simulationmodehelper */ 324);\r\nvar qigStore = __webpack_require__(/*! ../../../stores/qigselector/qigstore */ 230);\r\n/**\r\n * Represents the message notification indicator component\r\n */\r\nvar MessageNotificationIndicator = /** @class */ (function (_super) {\r\n    __extends(MessageNotificationIndicator, _super);\r\n    /**\r\n     * @constructor\r\n     */\r\n    function MessageNotificationIndicator(properties, state) {\r\n        var _this = _super.call(this, properties, state) || this;\r\n        /**\r\n         * Handles the click\r\n         * @param {any} source\r\n         * @returns\r\n         */\r\n        _this.handleOnClick = function (source) {\r\n            // If  application is not online and will not be able to navihge, should show message\r\n            // to let the user know that the connection problem\r\n            if (!applicationActionCreator.checkActionInterrupted()) {\r\n                return;\r\n            }\r\n            if (navigationStore.instance.containerPage === enums.PageContainers.WorkList &&\r\n                simulationModeHelper.shouldCheckForStandardisationSetupCompletion()) {\r\n                simulationModeHelper.checkStandardisationSetupCompletion(enums.PageContainers.Message, enums.PageContainers.Message);\r\n            }\r\n            else {\r\n                _this.LoadMessage();\r\n            }\r\n        };\r\n        /**\r\n         * Go to message inbox page after saving mark if there is any\r\n         */\r\n        _this.navigateAwayFromResponse = function () {\r\n            if (markingStore.instance.navigateTo === enums.SaveAndNavigate.toInboxMessagePage) {\r\n                if (markerOperationModeFactory.operationMode.isTeamManagementMode) {\r\n                    // set the marker operation mode as Marking\r\n                    userInfoActionCreator.changeOperationMode(enums.MarkerOperationMode.Marking);\r\n                }\r\n                navigationHelper.loadContainerIfNeeded(navigationStore.instance.containerPage, enums.SaveMarksAndAnnotationsProcessingTriggerPoint.Inbox, _this.context);\r\n            }\r\n        };\r\n        /**\r\n         * On standardisation setup completion\r\n         */\r\n        _this.onStandardisationSetupCompletion = function () {\r\n            if (qigStore.instance.navigateToAfterStdSetupCheck === enums.PageContainers.Message &&\r\n                !qigStore.instance.isStandardisationsetupCompletedForTheQig &&\r\n                !qigStore.instance.selectedQIGForMarkerOperation.standardisationSetupComplete) {\r\n                if (navigationStore.instance.containerPage === enums.PageContainers.WorkList) {\r\n                    _this.LoadMessage();\r\n                }\r\n                else {\r\n                    navigationHelper.loadMessagePage();\r\n                }\r\n            }\r\n        };\r\n        _this.handleOnClick = _this.handleOnClick.bind(_this);\r\n        return _this;\r\n    }\r\n    /**\r\n     * Render method\r\n     */\r\n    MessageNotificationIndicator.prototype.render = function () {\r\n        return (React.createElement(\"li\", { role: 'menuitem' },\r\n            React.createElement(\"a\", { id: this.props.id, href: 'javascript:void(0)', className: 'relative', onClick: this.handleOnClick, title: localeStore.instance.TranslateText('generic.navigation-bar.inbox-tooltip') },\r\n                React.createElement(\"span\", { className: 'relative' },\r\n                    React.createElement(\"span\", { className: 'sprite-icon notification-icon' }, localeStore.instance.TranslateText('generic.navigation-bar.inbox-tooltip')),\r\n                    this.getMessageCountRenderer(),\r\n                    React.createElement(\"span\", { className: 'nav-text' }, localeStore.instance.TranslateText('generic.navigation-bar.inbox'))))));\r\n    };\r\n    /**\r\n     * Component mounted\r\n     */\r\n    MessageNotificationIndicator.prototype.componentDidMount = function () {\r\n        markingStore.instance.addListener(markingStore.MarkingStore.READY_TO_NAVIGATE, this.navigateAwayFromResponse);\r\n        qigStore.instance.addListener(qigStore.QigStore.STANDARDISATION_SETUP_COMPLETED_EVENT, this.onStandardisationSetupCompletion);\r\n    };\r\n    /**\r\n     * Component unmounted\r\n     */\r\n    MessageNotificationIndicator.prototype.componentWillUnmount = function () {\r\n        markingStore.instance.removeListener(markingStore.MarkingStore.READY_TO_NAVIGATE, this.navigateAwayFromResponse);\r\n        qigStore.instance.removeListener(qigStore.QigStore.STANDARDISATION_SETUP_COMPLETED_EVENT, this.onStandardisationSetupCompletion);\r\n    };\r\n    /**\r\n     * Get's the message count span div if unread message is available for the logged in examiner\r\n     */\r\n    MessageNotificationIndicator.prototype.getMessageCountRenderer = function () {\r\n        if (this.props.messageNotificationCount > 0) {\r\n            return React.createElement(\"span\", { className: 'notification-count notification circle', id: 'id_notification_count' }, (this.props.messageNotificationCount).toLocaleString(localeStore.instance.Locale));\r\n        }\r\n    };\r\n    /**\r\n     * Go to Load message inbox page after saving mark if there is any\r\n     */\r\n    MessageNotificationIndicator.prototype.LoadMessage = function () {\r\n        var responseNavigationFailureReasons = markingHelper.canNavigateAwayFromCurrentResponse();\r\n        if (responseNavigationFailureReasons.length > 0) {\r\n            popupHelper.navigateAwayFromResponse(responseNavigationFailureReasons, enums.SaveAndNavigate.toInboxMessagePage);\r\n        }\r\n        else {\r\n            if (markingStore.instance.isMarkingInProgress ||\r\n                responseStore.instance.selectedResponseViewMode === enums.ResponseViewMode.fullResponseView) {\r\n                /* Save the selected mark scheme mark to the mark collection on response move */\r\n                markingActionCreator.saveAndNavigate(enums.SaveAndNavigate.toInboxMessagePage);\r\n            }\r\n            else {\r\n                // set the marker operation mode as Marking\r\n                userInfoActionCreator.changeOperationMode(enums.MarkerOperationMode.Marking);\r\n                navigationHelper.loadMessagePage();\r\n            }\r\n        }\r\n    };\r\n    return MessageNotificationIndicator;\r\n}(pureRenderComponent));\r\nmodule.exports = MessageNotificationIndicator;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzY2LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvdXRpbGl0eS9ub3RpZmljYXRpb24vbWVzc2FnZW5vdGlmaWNhdGlvbmluZGljYXRvci50c3g/NTMzYyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiB0c2xpbnQ6ZGlzYWJsZTpuby11bnVzZWQtdmFyaWFibGUgKi9cclxuaW1wb3J0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcclxuLyogdHNsaW50OmVuYWJsZTpuby11bnVzZWQtdmFyaWFibGUgKi9cclxuaW1wb3J0IHB1cmVSZW5kZXJDb21wb25lbnQgPSByZXF1aXJlKCcuLi8uLi9iYXNlL3B1cmVyZW5kZXJjb21wb25lbnQnKTtcclxuaW1wb3J0IGxvY2FsZVN0b3JlID0gcmVxdWlyZSgnLi4vLi4vLi4vc3RvcmVzL2xvY2FsZS9sb2NhbGVzdG9yZScpO1xyXG5pbXBvcnQgbWFya2luZ0FjdGlvbkNyZWF0b3IgPSByZXF1aXJlKCcuLi8uLi8uLi9hY3Rpb25zL21hcmtpbmcvbWFya2luZ2FjdGlvbmNyZWF0b3InKTtcclxuaW1wb3J0IGVudW1zID0gcmVxdWlyZSgnLi4vZW51bXMnKTtcclxuaW1wb3J0IG5hdmlnYXRpb25IZWxwZXIgPSByZXF1aXJlKCcuLi8uLi91dGlsaXR5L25hdmlnYXRpb24vbmF2aWdhdGlvbmhlbHBlcicpO1xyXG5pbXBvcnQgbWFya2luZ1N0b3JlID0gcmVxdWlyZSgnLi4vLi4vLi4vc3RvcmVzL21hcmtpbmcvbWFya2luZ3N0b3JlJyk7XHJcbmltcG9ydCBtYXJraW5nSGVscGVyID0gcmVxdWlyZSgnLi4vLi4vLi4vdXRpbGl0eS9tYXJrc2NoZW1lL21hcmtpbmdoZWxwZXInKTtcclxuaW1wb3J0IHBvcHVwSGVscGVyID0gcmVxdWlyZSgnLi4vcG9wdXAvcG9wdXBoZWxwZXInKTtcclxuaW1wb3J0IGFwcGxpY2F0aW9uQWN0aW9uQ3JlYXRvciA9IHJlcXVpcmUoJy4uLy4uLy4uL2FjdGlvbnMvYXBwbGljYXRpb25vZmZsaW5lL2FwcGxpY2F0aW9uYWN0aW9uY3JlYXRvcicpO1xyXG5pbXBvcnQgcmVzcG9uc2VTdG9yZSA9IHJlcXVpcmUoJy4uLy4uLy4uL3N0b3Jlcy9yZXNwb25zZS9yZXNwb25zZXN0b3JlJyk7XHJcbmltcG9ydCB1c2VySW5mb0FjdGlvbkNyZWF0b3IgPSByZXF1aXJlKCcuLi8uLi8uLi9hY3Rpb25zL3VzZXJpbmZvL3VzZXJpbmZvYWN0aW9uY3JlYXRvcicpO1xyXG5pbXBvcnQgbmF2aWdhdGlvblN0b3JlID0gcmVxdWlyZSgnLi4vLi4vLi4vc3RvcmVzL25hdmlnYXRpb24vbmF2aWdhdGlvbnN0b3JlJyk7XHJcbmltcG9ydCBtYXJrZXJPcGVyYXRpb25Nb2RlRmFjdG9yeSA9IHJlcXVpcmUoJy4uL21hcmtlcm9wZXJhdGlvbm1vZGUvbWFya2Vyb3BlcmF0aW9ubW9kZWZhY3RvcnknKTtcclxuaW1wb3J0IHNpbXVsYXRpb25Nb2RlSGVscGVyID0gcmVxdWlyZSgnLi4vLi4vLi4vdXRpbGl0eS9zaW11bGF0aW9uL3NpbXVsYXRpb25tb2RlaGVscGVyJyk7XHJcbmltcG9ydCBxaWdTdG9yZSA9IHJlcXVpcmUoJy4uLy4uLy4uL3N0b3Jlcy9xaWdzZWxlY3Rvci9xaWdzdG9yZScpO1xyXG5cclxuLyoqXHJcbiAqIFByb3BlcnRpZXMgb2YgbWVzc2FnZSBub3RpZmljYXRpb24gaW5kaWNhdG9yIGNvbXBvbmVudFxyXG4gKi9cclxuaW50ZXJmYWNlIFByb3BzIGV4dGVuZHMgTG9jYWxlU2VsZWN0aW9uQmFzZSwgUHJvcHNCYXNlIHtcclxuICAgIG1lc3NhZ2VOb3RpZmljYXRpb25Db3VudD86IG51bWJlcjtcclxufVxyXG5cclxuLyoqXHJcbiAqIFJlcHJlc2VudHMgdGhlIG1lc3NhZ2Ugbm90aWZpY2F0aW9uIGluZGljYXRvciBjb21wb25lbnRcclxuICovXHJcbmNsYXNzIE1lc3NhZ2VOb3RpZmljYXRpb25JbmRpY2F0b3IgZXh0ZW5kcyBwdXJlUmVuZGVyQ29tcG9uZW50PFByb3BzLCBhbnk+IHtcclxuICAgIC8qKlxyXG4gICAgICogQGNvbnN0cnVjdG9yXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKHByb3BlcnRpZXM6IFByb3BzLCBzdGF0ZTogYW55KSB7XHJcbiAgICAgICAgc3VwZXIocHJvcGVydGllcywgc3RhdGUpO1xyXG4gICAgICAgIHRoaXMuaGFuZGxlT25DbGljayA9IHRoaXMuaGFuZGxlT25DbGljay5iaW5kKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVuZGVyIG1ldGhvZFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcmVuZGVyKCkge1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxsaSByb2xlPSdtZW51aXRlbSc+XHJcbiAgICAgICAgICAgICAgICA8YSBpZD17dGhpcy5wcm9wcy5pZH1cclxuICAgICAgICAgICAgICAgICAgICBocmVmPSdqYXZhc2NyaXB0OnZvaWQoMCknXHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdyZWxhdGl2ZSdcclxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrID0ge3RoaXMuaGFuZGxlT25DbGljayB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU9IHtsb2NhbGVTdG9yZS5pbnN0YW5jZS5UcmFuc2xhdGVUZXh0KCdnZW5lcmljLm5hdmlnYXRpb24tYmFyLmluYm94LXRvb2x0aXAnKSB9PlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0ncmVsYXRpdmUnPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J3Nwcml0ZS1pY29uIG5vdGlmaWNhdGlvbi1pY29uJz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsb2NhbGVTdG9yZS5pbnN0YW5jZS5UcmFuc2xhdGVUZXh0KCdnZW5lcmljLm5hdmlnYXRpb24tYmFyLmluYm94LXRvb2x0aXAnKSB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgeyB0aGlzLmdldE1lc3NhZ2VDb3VudFJlbmRlcmVyKCkgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWUgPSAnbmF2LXRleHQnPntsb2NhbGVTdG9yZS5pbnN0YW5jZS5UcmFuc2xhdGVUZXh0KCdnZW5lcmljLm5hdmlnYXRpb24tYmFyLmluYm94JykgfTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8L2E+XHJcbiAgICAgICAgICAgIDwvbGk+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbXBvbmVudCBtb3VudGVkXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBjb21wb25lbnREaWRNb3VudCgpIHtcclxuICAgICAgICBtYXJraW5nU3RvcmUuaW5zdGFuY2UuYWRkTGlzdGVuZXIobWFya2luZ1N0b3JlLk1hcmtpbmdTdG9yZS5SRUFEWV9UT19OQVZJR0FURSwgdGhpcy5uYXZpZ2F0ZUF3YXlGcm9tUmVzcG9uc2UpO1xyXG4gICAgICAgIHFpZ1N0b3JlLmluc3RhbmNlLmFkZExpc3RlbmVyKHFpZ1N0b3JlLlFpZ1N0b3JlLlNUQU5EQVJESVNBVElPTl9TRVRVUF9DT01QTEVURURfRVZFTlQsIHRoaXMub25TdGFuZGFyZGlzYXRpb25TZXR1cENvbXBsZXRpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ29tcG9uZW50IHVubW91bnRlZFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XHJcbiAgICAgICAgbWFya2luZ1N0b3JlLmluc3RhbmNlLnJlbW92ZUxpc3RlbmVyKG1hcmtpbmdTdG9yZS5NYXJraW5nU3RvcmUuUkVBRFlfVE9fTkFWSUdBVEUsIHRoaXMubmF2aWdhdGVBd2F5RnJvbVJlc3BvbnNlKTtcclxuICAgICAgICBxaWdTdG9yZS5pbnN0YW5jZS5yZW1vdmVMaXN0ZW5lcihxaWdTdG9yZS5RaWdTdG9yZS5TVEFOREFSRElTQVRJT05fU0VUVVBfQ09NUExFVEVEX0VWRU5ULCB0aGlzLm9uU3RhbmRhcmRpc2F0aW9uU2V0dXBDb21wbGV0aW9uKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEhhbmRsZXMgdGhlIGNsaWNrXHJcbiAgICAgKiBAcGFyYW0ge2FueX0gc291cmNlXHJcbiAgICAgKiBAcmV0dXJuc1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGhhbmRsZU9uQ2xpY2sgPSAoc291cmNlOiBhbnkpOiBhbnkgPT4ge1xyXG5cclxuICAgICAgICAvLyBJZiAgYXBwbGljYXRpb24gaXMgbm90IG9ubGluZSBhbmQgd2lsbCBub3QgYmUgYWJsZSB0byBuYXZpaGdlLCBzaG91bGQgc2hvdyBtZXNzYWdlXHJcbiAgICAgICAgLy8gdG8gbGV0IHRoZSB1c2VyIGtub3cgdGhhdCB0aGUgY29ubmVjdGlvbiBwcm9ibGVtXHJcbiAgICAgICAgaWYgKCFhcHBsaWNhdGlvbkFjdGlvbkNyZWF0b3IuY2hlY2tBY3Rpb25JbnRlcnJ1cHRlZCgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBpZiAobmF2aWdhdGlvblN0b3JlLmluc3RhbmNlLmNvbnRhaW5lclBhZ2UgPT09IGVudW1zLlBhZ2VDb250YWluZXJzLldvcmtMaXN0ICYmXHJcbiAgICAgICAgICAgIHNpbXVsYXRpb25Nb2RlSGVscGVyLnNob3VsZENoZWNrRm9yU3RhbmRhcmRpc2F0aW9uU2V0dXBDb21wbGV0aW9uKCkpIHtcclxuICAgICAgICAgICAgc2ltdWxhdGlvbk1vZGVIZWxwZXIuY2hlY2tTdGFuZGFyZGlzYXRpb25TZXR1cENvbXBsZXRpb24oZW51bXMuUGFnZUNvbnRhaW5lcnMuTWVzc2FnZSwgZW51bXMuUGFnZUNvbnRhaW5lcnMuTWVzc2FnZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5Mb2FkTWVzc2FnZSgpO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCdzIHRoZSBtZXNzYWdlIGNvdW50IHNwYW4gZGl2IGlmIHVucmVhZCBtZXNzYWdlIGlzIGF2YWlsYWJsZSBmb3IgdGhlIGxvZ2dlZCBpbiBleGFtaW5lclxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGdldE1lc3NhZ2VDb3VudFJlbmRlcmVyKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnByb3BzLm1lc3NhZ2VOb3RpZmljYXRpb25Db3VudCA+IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIDxzcGFuIGNsYXNzTmFtZT0nbm90aWZpY2F0aW9uLWNvdW50IG5vdGlmaWNhdGlvbiBjaXJjbGUnIGlkPSdpZF9ub3RpZmljYXRpb25fY291bnQnPlxyXG4gICAgICAgICAgICAgICAgeyh0aGlzLnByb3BzLm1lc3NhZ2VOb3RpZmljYXRpb25Db3VudCkudG9Mb2NhbGVTdHJpbmcobG9jYWxlU3RvcmUuaW5zdGFuY2UuTG9jYWxlKX1cclxuICAgICAgICAgICAgPC9zcGFuPjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEdvIHRvIExvYWQgbWVzc2FnZSBpbmJveCBwYWdlIGFmdGVyIHNhdmluZyBtYXJrIGlmIHRoZXJlIGlzIGFueVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIExvYWRNZXNzYWdlKCkge1xyXG4gICAgICAgIGxldCByZXNwb25zZU5hdmlnYXRpb25GYWlsdXJlUmVhc29uczogQXJyYXk8ZW51bXMuUmVzcG9uc2VOYXZpZ2F0ZUZhaWx1cmVSZWFzb24+ID1cclxuICAgICAgICAgICAgbWFya2luZ0hlbHBlci5jYW5OYXZpZ2F0ZUF3YXlGcm9tQ3VycmVudFJlc3BvbnNlKCk7XHJcbiAgICAgICAgaWYgKHJlc3BvbnNlTmF2aWdhdGlvbkZhaWx1cmVSZWFzb25zLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgcG9wdXBIZWxwZXIubmF2aWdhdGVBd2F5RnJvbVJlc3BvbnNlKHJlc3BvbnNlTmF2aWdhdGlvbkZhaWx1cmVSZWFzb25zLCBlbnVtcy5TYXZlQW5kTmF2aWdhdGUudG9JbmJveE1lc3NhZ2VQYWdlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAobWFya2luZ1N0b3JlLmluc3RhbmNlLmlzTWFya2luZ0luUHJvZ3Jlc3MgfHxcclxuICAgICAgICAgICAgICAgIHJlc3BvbnNlU3RvcmUuaW5zdGFuY2Uuc2VsZWN0ZWRSZXNwb25zZVZpZXdNb2RlID09PSBlbnVtcy5SZXNwb25zZVZpZXdNb2RlLmZ1bGxSZXNwb25zZVZpZXcpIHtcclxuICAgICAgICAgICAgICAgIC8qIFNhdmUgdGhlIHNlbGVjdGVkIG1hcmsgc2NoZW1lIG1hcmsgdG8gdGhlIG1hcmsgY29sbGVjdGlvbiBvbiByZXNwb25zZSBtb3ZlICovXHJcbiAgICAgICAgICAgICAgICBtYXJraW5nQWN0aW9uQ3JlYXRvci5zYXZlQW5kTmF2aWdhdGUoZW51bXMuU2F2ZUFuZE5hdmlnYXRlLnRvSW5ib3hNZXNzYWdlUGFnZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBzZXQgdGhlIG1hcmtlciBvcGVyYXRpb24gbW9kZSBhcyBNYXJraW5nXHJcbiAgICAgICAgICAgICAgICB1c2VySW5mb0FjdGlvbkNyZWF0b3IuY2hhbmdlT3BlcmF0aW9uTW9kZShlbnVtcy5NYXJrZXJPcGVyYXRpb25Nb2RlLk1hcmtpbmcpO1xyXG4gICAgICAgICAgICAgICAgbmF2aWdhdGlvbkhlbHBlci5sb2FkTWVzc2FnZVBhZ2UoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogR28gdG8gbWVzc2FnZSBpbmJveCBwYWdlIGFmdGVyIHNhdmluZyBtYXJrIGlmIHRoZXJlIGlzIGFueVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIG5hdmlnYXRlQXdheUZyb21SZXNwb25zZSA9ICgpOiB2b2lkID0+IHtcclxuICAgICAgICBpZiAobWFya2luZ1N0b3JlLmluc3RhbmNlLm5hdmlnYXRlVG8gPT09IGVudW1zLlNhdmVBbmROYXZpZ2F0ZS50b0luYm94TWVzc2FnZVBhZ2UpIHtcclxuICAgICAgICAgICAgaWYgKG1hcmtlck9wZXJhdGlvbk1vZGVGYWN0b3J5Lm9wZXJhdGlvbk1vZGUuaXNUZWFtTWFuYWdlbWVudE1vZGUpIHtcclxuICAgICAgICAgICAgICAgIC8vIHNldCB0aGUgbWFya2VyIG9wZXJhdGlvbiBtb2RlIGFzIE1hcmtpbmdcclxuICAgICAgICAgICAgICAgIHVzZXJJbmZvQWN0aW9uQ3JlYXRvci5jaGFuZ2VPcGVyYXRpb25Nb2RlKGVudW1zLk1hcmtlck9wZXJhdGlvbk1vZGUuTWFya2luZyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbmF2aWdhdGlvbkhlbHBlci5sb2FkQ29udGFpbmVySWZOZWVkZWQoXHJcbiAgICAgICAgICAgICAgICBuYXZpZ2F0aW9uU3RvcmUuaW5zdGFuY2UuY29udGFpbmVyUGFnZSxcclxuICAgICAgICAgICAgICAgIGVudW1zLlNhdmVNYXJrc0FuZEFubm90YXRpb25zUHJvY2Vzc2luZ1RyaWdnZXJQb2ludC5JbmJveCxcclxuICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIE9uIHN0YW5kYXJkaXNhdGlvbiBzZXR1cCBjb21wbGV0aW9uXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgb25TdGFuZGFyZGlzYXRpb25TZXR1cENvbXBsZXRpb24gPSAoKSA9PiB7XHJcbiAgICAgICAgaWYgKHFpZ1N0b3JlLmluc3RhbmNlLm5hdmlnYXRlVG9BZnRlclN0ZFNldHVwQ2hlY2sgPT09IGVudW1zLlBhZ2VDb250YWluZXJzLk1lc3NhZ2UgJiZcclxuICAgICAgICAgICAgIXFpZ1N0b3JlLmluc3RhbmNlLmlzU3RhbmRhcmRpc2F0aW9uc2V0dXBDb21wbGV0ZWRGb3JUaGVRaWcgJiZcclxuICAgICAgICAgICAgIXFpZ1N0b3JlLmluc3RhbmNlLnNlbGVjdGVkUUlHRm9yTWFya2VyT3BlcmF0aW9uLnN0YW5kYXJkaXNhdGlvblNldHVwQ29tcGxldGUpIHtcclxuICAgICAgICAgICAgaWYgKG5hdmlnYXRpb25TdG9yZS5pbnN0YW5jZS5jb250YWluZXJQYWdlID09PSBlbnVtcy5QYWdlQ29udGFpbmVycy5Xb3JrTGlzdCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5Mb2FkTWVzc2FnZSgpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbmF2aWdhdGlvbkhlbHBlci5sb2FkTWVzc2FnZVBhZ2UoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0ID0gTWVzc2FnZU5vdGlmaWNhdGlvbkluZGljYXRvcjtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L3NvdXJjZS1tYXAtbG9hZGVyIS4vc3JjL2NvbXBvbmVudHMvdXRpbGl0eS9ub3RpZmljYXRpb24vbWVzc2FnZW5vdGlmaWNhdGlvbmluZGljYXRvci50c3giXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBU0E7O0FBRUE7QUFDQTtBQUFBO0FBQ0E7O0FBRUE7QUFDQTtBQUFBO0FBNENBOzs7O0FBSUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUdBO0FBZ0NBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUE3SEE7O0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUtBO0FBQ0E7QUFHQTtBQUNBO0FBS0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTBCQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQStCQTtBQUFBO0FBRUE7Iiwic291cmNlUm9vdCI6IiJ9");

/***/ }),

/***/ 374:
/* no static exports found */
/* all exports used */
/*!**********************************************************************!*\
  !*** ./src/dataservices/searchresponse/searchresponsedataservice.ts ***!
  \**********************************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar urls = __webpack_require__(/*! ../base/urls */ 266);\r\nvar dataServiceBase = __webpack_require__(/*! ../base/dataservicebase */ 287);\r\n/**\r\n * SearchResponse data service class\r\n */\r\nvar SearchResponseDataService = /** @class */ (function (_super) {\r\n    __extends(SearchResponseDataService, _super);\r\n    function SearchResponseDataService() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    /**\r\n     * get SearchResponseDetails from Cache\r\n     *\r\n     * @param markSchemeGroupId\r\n     * @param examinerRoleId\r\n     * @param displayId\r\n     * @param callback\r\n     */\r\n    SearchResponseDataService.prototype.getSearchResponseDetail = function (markSchemeGroupId, examinerRoleId, displayId, callback) {\r\n        var url = urls.SEARCH_RESPONSE_DETAIL + '/' + markSchemeGroupId + '/' + examinerRoleId + '/' + displayId;\r\n        var getsearchResponsePromise = this.makeAJAXCall('GET', url);\r\n        getsearchResponsePromise.then(function (json) {\r\n            callback(true, JSON.parse(json), false);\r\n        }).catch(function (json) {\r\n            callback(false, json, false);\r\n        });\r\n    };\r\n    return SearchResponseDataService;\r\n}(dataServiceBase));\r\nvar searchresponsedataservice = new SearchResponseDataService();\r\nmodule.exports = searchresponsedataservice;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzc0LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2RhdGFzZXJ2aWNlcy9zZWFyY2hyZXNwb25zZS9zZWFyY2hyZXNwb25zZWRhdGFzZXJ2aWNlLnRzP2FmNDkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHVybHMgPSByZXF1aXJlKCcuLi9iYXNlL3VybHMnKTtcclxuaW1wb3J0IGRhdGFTZXJ2aWNlQmFzZSA9IHJlcXVpcmUoJy4uL2Jhc2UvZGF0YXNlcnZpY2ViYXNlJyk7XHJcbmltcG9ydCBzdG9yYWdlQWRhcHRlckZhY3RvcnkgPSByZXF1aXJlKCcuLi9zdG9yYWdlYWRhcHRlcnMvc3RvcmFnZWFkYXB0ZXJmYWN0b3J5Jyk7XHJcbmRlY2xhcmUgbGV0IGNvbmZpZzogYW55O1xyXG5cclxuLyoqXHJcbiAqIFNlYXJjaFJlc3BvbnNlIGRhdGEgc2VydmljZSBjbGFzc1xyXG4gKi9cclxuY2xhc3MgU2VhcmNoUmVzcG9uc2VEYXRhU2VydmljZSBleHRlbmRzIGRhdGFTZXJ2aWNlQmFzZSB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBnZXQgU2VhcmNoUmVzcG9uc2VEZXRhaWxzIGZyb20gQ2FjaGVcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIG1hcmtTY2hlbWVHcm91cElkIFxyXG4gICAgICogQHBhcmFtIGV4YW1pbmVyUm9sZUlkXHJcbiAgICAgKiBAcGFyYW0gZGlzcGxheUlkXHJcbiAgICAgKiBAcGFyYW0gY2FsbGJhY2sgXHJcbiAgICAgKi9cclxuXHJcbiAgICBwdWJsaWMgZ2V0U2VhcmNoUmVzcG9uc2VEZXRhaWwobWFya1NjaGVtZUdyb3VwSWQ6IG51bWJlciwgZXhhbWluZXJSb2xlSWQ6IG51bWJlcixcclxuICAgICAgICBkaXNwbGF5SWQ6IG51bWJlcixcclxuICAgICAgICBjYWxsYmFjazogKChzdWNjZXNzOiBib29sZWFuLCBzZWFyY2hlZFJlc3BvbnNlRGF0YTogYW55LCBpc1Jlc3VsdEZyb21DYWNoZTogYm9vbGVhbikgPT4gdm9pZCkpOiB2b2lkIHtcclxuXHJcbiAgICAgICAgbGV0IHVybCA9IHVybHMuU0VBUkNIX1JFU1BPTlNFX0RFVEFJTCArICcvJyArIG1hcmtTY2hlbWVHcm91cElkICsgJy8nICsgZXhhbWluZXJSb2xlSWQgKyAnLycgKyBkaXNwbGF5SWQ7XHJcbiAgICAgICAgbGV0IGdldHNlYXJjaFJlc3BvbnNlUHJvbWlzZSA9IHRoaXMubWFrZUFKQVhDYWxsKCdHRVQnLCB1cmwpO1xyXG4gICAgICAgIGdldHNlYXJjaFJlc3BvbnNlUHJvbWlzZS50aGVuKGZ1bmN0aW9uIChqc29uOiBhbnkpIHtcclxuICAgICAgICAgICAgY2FsbGJhY2sodHJ1ZSwgSlNPTi5wYXJzZShqc29uKSwgZmFsc2UpO1xyXG4gICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChqc29uOiBhbnkpIHtcclxuICAgICAgICAgICAgY2FsbGJhY2soZmFsc2UsIGpzb24sIGZhbHNlKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9XHJcbn1cclxuXHJcbmxldCBzZWFyY2hyZXNwb25zZWRhdGFzZXJ2aWNlID0gbmV3IFNlYXJjaFJlc3BvbnNlRGF0YVNlcnZpY2UoKTtcclxuZXhwb3J0ID0gc2VhcmNocmVzcG9uc2VkYXRhc2VydmljZTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L3NvdXJjZS1tYXAtbG9hZGVyIS4vc3JjL2RhdGFzZXJ2aWNlcy9zZWFyY2hyZXNwb25zZS9zZWFyY2hyZXNwb25zZWRhdGFzZXJ2aWNlLnRzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFJQTs7QUFFQTtBQUNBO0FBQUE7QUFBQTs7QUF3QkE7QUF0QkE7Ozs7Ozs7QUFPQTtBQUVBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFFQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),

/***/ 375:
/* no static exports found */
/* all exports used */
/*!**************************************************************!*\
  !*** ./src/dataservices/submit/submitresponsedataservice.ts ***!
  \**************************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar dataServiceBase = __webpack_require__(/*! ../base/dataservicebase */ 287);\r\nvar urls = __webpack_require__(/*! ../base/urls */ 266);\r\nvar enums = __webpack_require__(/*! ../../components/utility/enums */ 225);\r\nvar storageAdapterHelper = __webpack_require__(/*! ../storageadapters/storageadapterhelper */ 269);\r\nvar SubmitResponseDataService = /** @class */ (function (_super) {\r\n    __extends(SubmitResponseDataService, _super);\r\n    function SubmitResponseDataService() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.storageAdapterHelper = new storageAdapterHelper();\r\n        return _this;\r\n    }\r\n    /**\r\n     * Method which makes the AJAX call to submit responses\r\n     * @param submitResponseArgument\r\n     * @param markSchemeGroupId\r\n     * @param remarkRequestType\r\n     * @param callback\r\n     */\r\n    SubmitResponseDataService.prototype.submitResponses = function (submitResponseArgument, markSchemeGroupId, worklistType, remarkRequestType, examinerRoleIds, markSchemeGroupIds, callback) {\r\n        /* Clear open/closed/pending cache */\r\n        if (remarkRequestType === void 0) { remarkRequestType = enums.RemarkRequestType.Unknown; }\r\n        if (examinerRoleIds === void 0) { examinerRoleIds = null; }\r\n        if (markSchemeGroupIds === void 0) { markSchemeGroupIds = null; }\r\n        this.storageAdapterHelper.clearCache(markSchemeGroupId, submitResponseArgument.markingMode, remarkRequestType, submitResponseArgument.examinerRoleId, worklistType);\r\n        var url = urls.SUBMIT_RESPONSE;\r\n        var that = this;\r\n        var index = 0;\r\n        //Clearing Cache for Whole Response\r\n        if (markSchemeGroupIds && markSchemeGroupIds.length !== 0) {\r\n            do {\r\n                this.storageAdapterHelper.clearCache(markSchemeGroupIds[index], submitResponseArgument.markingMode, remarkRequestType, examinerRoleIds[index], worklistType);\r\n                index++;\r\n            } while (index < markSchemeGroupIds.length);\r\n        }\r\n        index = 0;\r\n        /**  Making AJAX call to get the examiner progress fata */\r\n        var worklistPromise = this.makeAJAXCall('POST', url, JSON.stringify(submitResponseArgument), true, false);\r\n        worklistPromise.then(function (json) {\r\n            if (callback) {\r\n                var result = JSON.parse(json);\r\n                that.storageAdapterHelper.clearCachePostSubmission(submitResponseArgument.examinerRoleId, submitResponseArgument.markingMode, result);\r\n                //Clearing Cache for Whole Response\r\n                if (examinerRoleIds && examinerRoleIds.length !== 0) {\r\n                    do {\r\n                        that.storageAdapterHelper.clearCachePostSubmission(examinerRoleIds[index], submitResponseArgument.markingMode, result);\r\n                        index++;\r\n                    } while (index < examinerRoleIds.length);\r\n                }\r\n                callback(result.success, result);\r\n            }\r\n        }).catch(function (json) {\r\n            if (callback) {\r\n                callback(false, json);\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * ShareAndClassifyResponse\r\n     */\r\n    SubmitResponseDataService.prototype.ShareAndClassifyResponse = function (submitResponseArgument, callback) {\r\n        var url = urls.SHARE_AND_CLASSIFY_RESPONSE;\r\n        var that = this;\r\n        var index = 0;\r\n        /**  Making AJAX call to get data */\r\n        var worklistPromise = this.makeAJAXCall('POST', url, JSON.stringify(submitResponseArgument), true, false);\r\n        worklistPromise.then(function (json) {\r\n            if (callback) {\r\n                var result = JSON.parse(json);\r\n                callback(true, result);\r\n            }\r\n        }).catch(function (json) {\r\n            if (callback) {\r\n                callback(false, json);\r\n            }\r\n        });\r\n    };\r\n    return SubmitResponseDataService;\r\n}(dataServiceBase));\r\nvar submitResponseDataService = new SubmitResponseDataService();\r\nmodule.exports = submitResponseDataService;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzc1LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2RhdGFzZXJ2aWNlcy9zdWJtaXQvc3VibWl0cmVzcG9uc2VkYXRhc2VydmljZS50cz8xMmM4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBkYXRhU2VydmljZUJhc2UgPSByZXF1aXJlKCcuLi9iYXNlL2RhdGFzZXJ2aWNlYmFzZScpO1xyXG5pbXBvcnQgdXJscyA9IHJlcXVpcmUoJy4uL2Jhc2UvdXJscycpO1xyXG5pbXBvcnQgSW1tdXRhYmxlID0gcmVxdWlyZSgnaW1tdXRhYmxlJyk7XHJcbmRlY2xhcmUgbGV0IGNvbmZpZzogYW55O1xyXG5pbXBvcnQgZW51bXMgPSByZXF1aXJlKCcuLi8uLi9jb21wb25lbnRzL3V0aWxpdHkvZW51bXMnKTtcclxuaW1wb3J0IHN0b3JhZ2VBZGFwdGVySGVscGVyID0gcmVxdWlyZSgnLi4vc3RvcmFnZWFkYXB0ZXJzL3N0b3JhZ2VhZGFwdGVyaGVscGVyJyk7XHJcbmltcG9ydCBTaGFyZUFuZENsYXNzaWZ5UmV0dXJuICA9IHJlcXVpcmUoJy4uLy4uL3N0b3Jlcy9zdWJtaXQvdHlwaW5ncy9zaGFyZUFuZENsYXNzaWZ5UmV0dXJuJyk7XHJcblxyXG5jbGFzcyBTdWJtaXRSZXNwb25zZURhdGFTZXJ2aWNlIGV4dGVuZHMgZGF0YVNlcnZpY2VCYXNlIHtcclxuXHJcbiAgICBwcml2YXRlIHN0b3JhZ2VBZGFwdGVySGVscGVyID0gbmV3IHN0b3JhZ2VBZGFwdGVySGVscGVyKCk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNZXRob2Qgd2hpY2ggbWFrZXMgdGhlIEFKQVggY2FsbCB0byBzdWJtaXQgcmVzcG9uc2VzXHJcbiAgICAgKiBAcGFyYW0gc3VibWl0UmVzcG9uc2VBcmd1bWVudFxyXG4gICAgICogQHBhcmFtIG1hcmtTY2hlbWVHcm91cElkXHJcbiAgICAgKiBAcGFyYW0gcmVtYXJrUmVxdWVzdFR5cGVcclxuICAgICAqIEBwYXJhbSBjYWxsYmFja1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3VibWl0UmVzcG9uc2VzKHN1Ym1pdFJlc3BvbnNlQXJndW1lbnQ6IFN1Ym1pdFJlc3BvbnNlQXJndW1lbnQsIG1hcmtTY2hlbWVHcm91cElkOiBudW1iZXIsXHJcbiAgICAgICAgd29ya2xpc3RUeXBlOiBlbnVtcy5Xb3JrbGlzdFR5cGUsXHJcbiAgICAgICAgcmVtYXJrUmVxdWVzdFR5cGU6IGVudW1zLlJlbWFya1JlcXVlc3RUeXBlID0gZW51bXMuUmVtYXJrUmVxdWVzdFR5cGUuVW5rbm93bixcclxuICAgICAgICBleGFtaW5lclJvbGVJZHM6IEFycmF5PG51bWJlcj4gPSBudWxsLCBtYXJrU2NoZW1lR3JvdXBJZHM6IEFycmF5PG51bWJlcj4gPSBudWxsLFxyXG4gICAgICAgIGNhbGxiYWNrOiAoKHN1Y2Nlc3M6IGJvb2xlYW4sIHN1Ym1pdFJlc3BvbnNlUmV0dXJuOiBTdWJtaXRSZXNwb25zZVJldHVybikgPT4gdm9pZCkpOiB2b2lkIHtcclxuICAgICAgICAvKiBDbGVhciBvcGVuL2Nsb3NlZC9wZW5kaW5nIGNhY2hlICovXHJcblxyXG4gICAgICAgIHRoaXMuc3RvcmFnZUFkYXB0ZXJIZWxwZXIuY2xlYXJDYWNoZShtYXJrU2NoZW1lR3JvdXBJZCwgc3VibWl0UmVzcG9uc2VBcmd1bWVudC5tYXJraW5nTW9kZSxcclxuICAgICAgICAgICAgcmVtYXJrUmVxdWVzdFR5cGUsIHN1Ym1pdFJlc3BvbnNlQXJndW1lbnQuZXhhbWluZXJSb2xlSWQsIHdvcmtsaXN0VHlwZSk7XHJcbiAgICAgICAgbGV0IHVybCA9IHVybHMuU1VCTUlUX1JFU1BPTlNFO1xyXG4gICAgICAgIGxldCB0aGF0ID0gdGhpcztcclxuICAgICAgICBsZXQgaW5kZXg6IG51bWJlciA9IDA7XHJcblxyXG4gICAgICAgIC8vQ2xlYXJpbmcgQ2FjaGUgZm9yIFdob2xlIFJlc3BvbnNlXHJcbiAgICAgICAgaWYgKG1hcmtTY2hlbWVHcm91cElkcyAmJiBtYXJrU2NoZW1lR3JvdXBJZHMubGVuZ3RoICE9PSAwKSB7XHJcbiAgICAgICAgICAgIGRvIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RvcmFnZUFkYXB0ZXJIZWxwZXIuY2xlYXJDYWNoZShtYXJrU2NoZW1lR3JvdXBJZHNbaW5kZXhdLCBzdWJtaXRSZXNwb25zZUFyZ3VtZW50Lm1hcmtpbmdNb2RlLFxyXG4gICAgICAgICAgICAgICAgICAgIHJlbWFya1JlcXVlc3RUeXBlLCBleGFtaW5lclJvbGVJZHNbaW5kZXhdLCB3b3JrbGlzdFR5cGUpO1xyXG4gICAgICAgICAgICAgICAgaW5kZXgrKztcclxuICAgICAgICAgICAgfSB3aGlsZSAoaW5kZXggPCBtYXJrU2NoZW1lR3JvdXBJZHMubGVuZ3RoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW5kZXggPSAwO1xyXG4gICAgICAgIC8qKiAgTWFraW5nIEFKQVggY2FsbCB0byBnZXQgdGhlIGV4YW1pbmVyIHByb2dyZXNzIGZhdGEgKi9cclxuICAgICAgICBsZXQgd29ya2xpc3RQcm9taXNlID0gdGhpcy5tYWtlQUpBWENhbGwoJ1BPU1QnLCB1cmwsIEpTT04uc3RyaW5naWZ5KHN1Ym1pdFJlc3BvbnNlQXJndW1lbnQpLCB0cnVlLCBmYWxzZSk7XHJcbiAgICAgICAgd29ya2xpc3RQcm9taXNlLnRoZW4oZnVuY3Rpb24gKGpzb246IGFueSkge1xyXG4gICAgICAgICAgICBpZiAoY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgIGxldCByZXN1bHQ6IFN1Ym1pdFJlc3BvbnNlUmV0dXJuID0gSlNPTi5wYXJzZShqc29uKTtcclxuICAgICAgICAgICAgICAgIHRoYXQuc3RvcmFnZUFkYXB0ZXJIZWxwZXIuY2xlYXJDYWNoZVBvc3RTdWJtaXNzaW9uKHN1Ym1pdFJlc3BvbnNlQXJndW1lbnQuZXhhbWluZXJSb2xlSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgc3VibWl0UmVzcG9uc2VBcmd1bWVudC5tYXJraW5nTW9kZSwgcmVzdWx0KTtcclxuICAgICAgICAgICAgICAgIC8vQ2xlYXJpbmcgQ2FjaGUgZm9yIFdob2xlIFJlc3BvbnNlXHJcbiAgICAgICAgICAgICAgICBpZiAoZXhhbWluZXJSb2xlSWRzICYmIGV4YW1pbmVyUm9sZUlkcy5sZW5ndGggIT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBkbyB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuc3RvcmFnZUFkYXB0ZXJIZWxwZXIuY2xlYXJDYWNoZVBvc3RTdWJtaXNzaW9uKGV4YW1pbmVyUm9sZUlkc1tpbmRleF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJtaXRSZXNwb25zZUFyZ3VtZW50Lm1hcmtpbmdNb2RlLCByZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleCsrO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gd2hpbGUgKGluZGV4IDwgZXhhbWluZXJSb2xlSWRzLmxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhyZXN1bHQuc3VjY2VzcywgcmVzdWx0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChqc29uOiBhbnkpIHtcclxuICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhmYWxzZSwganNvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNoYXJlQW5kQ2xhc3NpZnlSZXNwb25zZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgU2hhcmVBbmRDbGFzc2lmeVJlc3BvbnNlKFxyXG4gICAgICAgIHN1Ym1pdFJlc3BvbnNlQXJndW1lbnQ6IFN1Ym1pdFJlc3BvbnNlQXJndW1lbnQsXHJcbiAgICAgICAgY2FsbGJhY2s6ICgoc3VjY2VzczogYm9vbGVhbiwgc2hhcmVBbmRDbGFzc2lmeVJlc3BvbnNlUmV0dXJuOiBTaGFyZUFuZENsYXNzaWZ5UmV0dXJuKSA9PiB2b2lkKSk6IHZvaWQge1xyXG4gICAgICAgICAgICBsZXQgdXJsID0gdXJscy5TSEFSRV9BTkRfQ0xBU1NJRllfUkVTUE9OU0U7XHJcbiAgICAgICAgbGV0IHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIGxldCBpbmRleDogbnVtYmVyID0gMDtcclxuXHJcbiAgICAgICAgLyoqICBNYWtpbmcgQUpBWCBjYWxsIHRvIGdldCBkYXRhICovXHJcbiAgICAgICAgbGV0IHdvcmtsaXN0UHJvbWlzZSA9IHRoaXMubWFrZUFKQVhDYWxsKCdQT1NUJywgdXJsLCBKU09OLnN0cmluZ2lmeShzdWJtaXRSZXNwb25zZUFyZ3VtZW50KSwgdHJ1ZSwgZmFsc2UpO1xyXG4gICAgICAgIHdvcmtsaXN0UHJvbWlzZS50aGVuKGZ1bmN0aW9uIChqc29uOiBhbnkpIHtcclxuICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgcmVzdWx0OiBTaGFyZUFuZENsYXNzaWZ5UmV0dXJuID0gSlNPTi5wYXJzZShqc29uKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjayh0cnVlLCByZXN1bHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGpzb246IGFueSkge1xyXG4gICAgICAgICAgICBpZiAoY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGZhbHNlLCBqc29uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG5sZXQgc3VibWl0UmVzcG9uc2VEYXRhU2VydmljZSA9IG5ldyBTdWJtaXRSZXNwb25zZURhdGFTZXJ2aWNlKCk7XHJcbmV4cG9ydCA9IHN1Ym1pdFJlc3BvbnNlRGF0YVNlcnZpY2U7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9zb3VyY2UtbWFwLWxvYWRlciEuL3NyYy9kYXRhc2VydmljZXMvc3VibWl0L3N1Ym1pdHJlc3BvbnNlZGF0YXNlcnZpY2UudHMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQUFBO0FBQUE7QUFBQTtBQUVBOztBQStFQTtBQTdFQTs7Ozs7O0FBTUE7QUFDQTtBQUtBO0FBSEE7QUFDQTtBQUFBO0FBSUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9");

/***/ }),

/***/ 377:
/* no static exports found */
/* all exports used */
/*!****************************************************!*\
  !*** ./src/utility/breadcrumb/breadcrumbhelper.ts ***!
  \****************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar React = __webpack_require__(/*! react */ 0);\r\nvar enums = __webpack_require__(/*! ../../components/utility/enums */ 225);\r\nvar navigationStore = __webpack_require__(/*! ../../stores/navigation/navigationstore */ 275);\r\nvar userInfoStore = __webpack_require__(/*! ../../stores/userinfo/userinfostore */ 244);\r\nvar qigStore = __webpack_require__(/*! ../../stores/qigselector/qigstore */ 230);\r\nvar BreadCrumbItem = __webpack_require__(/*! ../../components/breadcrumb/breadcrumbitem */ 349);\r\nvar localeStore = __webpack_require__(/*! ../../stores/locale/localestore */ 226);\r\nvar examinerStore = __webpack_require__(/*! ../../stores/markerinformation/examinerstore */ 259);\r\nvar teamManagementStore = __webpack_require__(/*! ../../stores/teammanagement/teammanagementstore */ 245);\r\nvar worklistStore = __webpack_require__(/*! ../../stores/worklist/workliststore */ 231);\r\nvar stringFormatHelper = __webpack_require__(/*! ../stringformat/stringformathelper */ 250);\r\nvar standardisationSetupStore = __webpack_require__(/*! ../../stores/standardisationsetup/standardisationsetupstore */ 237);\r\nvar responseStore = __webpack_require__(/*! ../../stores/response/responsestore */ 235);\r\n/**\r\n * BreadCrumb helper\r\n */\r\nvar BreadCrumbHelper = /** @class */ (function () {\r\n    function BreadCrumbHelper() {\r\n    }\r\n    /**\r\n     * This method will return BreadCrumb trail object\r\n     */\r\n    BreadCrumbHelper.getBreadCrumbTrail = function () {\r\n        var _breadCrumbItem = navigationStore.instance.breadCrumbItem;\r\n        var _breadCrumbElements = new Array();\r\n        switch (_breadCrumbItem.container) {\r\n            case enums.PageContainers.Login:\r\n            case enums.PageContainers.QigSelector:\r\n            case enums.PageContainers.AdminSupport:\r\n                this.getbreadCrumbForQigSelector(_breadCrumbElements, _breadCrumbItem.container);\r\n                break;\r\n            case enums.PageContainers.WorkList:\r\n                if (qigStore.instance.selectedQIGForMarkerOperation) {\r\n                    this.getbreadCrumbForWorkList(_breadCrumbElements);\r\n                }\r\n                else {\r\n                    this.getbreadCrumbForQigSelector(_breadCrumbElements, _breadCrumbItem.container);\r\n                }\r\n                break;\r\n            case enums.PageContainers.Response:\r\n                if (userInfoStore.instance.currentOperationMode === enums.MarkerOperationMode.Awarding) {\r\n                    this.getbreadCrumbForAwarding(_breadCrumbElements, _breadCrumbItem.container);\r\n                }\r\n                else if (qigStore.instance.selectedQIGForMarkerOperation) {\r\n                    this.getbreadCrumbForResponse(_breadCrumbElements);\r\n                }\r\n                break;\r\n            case enums.PageContainers.Message:\r\n                this.getbreadCrumbForMessage(_breadCrumbElements);\r\n                break;\r\n            case enums.PageContainers.Reports:\r\n                this.getbreadCrumbForReports(_breadCrumbElements);\r\n                break;\r\n            case enums.PageContainers.TeamManagement:\r\n                this.getbreadCrumbForTeamManagement(_breadCrumbElements);\r\n                break;\r\n            case enums.PageContainers.StandardisationSetup:\r\n                this.getbreadCrumbForStandardisationSetup(_breadCrumbElements);\r\n                break;\r\n            case enums.PageContainers.Awarding:\r\n                this.getbreadCrumbForAwarding(_breadCrumbElements);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        return _breadCrumbElements;\r\n    };\r\n    /**\r\n     * Get Formatted QIG Name based on CC\r\n     */\r\n    BreadCrumbHelper.getFormattedQIGName = function () {\r\n        return stringFormatHelper.formatAwardingBodyQIG(qigStore.instance.selectedQIGForMarkerOperation.markSchemeGroupName, qigStore.instance.selectedQIGForMarkerOperation.assessmentCode, qigStore.instance.selectedQIGForMarkerOperation.sessionName, qigStore.instance.selectedQIGForMarkerOperation.componentId, qigStore.instance.selectedQIGForMarkerOperation.questionPaperName, qigStore.instance.selectedQIGForMarkerOperation.assessmentName, qigStore.instance.selectedQIGForMarkerOperation.componentName, stringFormatHelper.getOverviewQIGNameFormat());\r\n    };\r\n    /**\r\n     * This method will push home breadcrumb item to breadCrumbElements array.\r\n     */\r\n    BreadCrumbHelper.pushHomeBreadCrumbItem = function (_breadCrumbElements, container) {\r\n        var breadCrumbProps = {\r\n            key: 'key_breadcrumb_home',\r\n            id: 'breadcrumb_home',\r\n            selectedLanguage: localeStore.instance.Locale,\r\n            container: container,\r\n            isClickable: true,\r\n            navigateTo: enums.PageContainers.QigSelector,\r\n            breadCrumbString: localeStore.instance.TranslateText('generic.navigation-bar.breadcrumbs.home'),\r\n            isA3Logo: false\r\n        };\r\n        _breadCrumbElements.push(React.createElement(BreadCrumbItem, breadCrumbProps));\r\n        return _breadCrumbElements;\r\n    };\r\n    /**\r\n     * This method will return BreadCrumb for Message\r\n     */\r\n    BreadCrumbHelper.getbreadCrumbForMessage = function (_breadCrumbElements) {\r\n        // adding home breadCrumb item.\r\n        this.pushHomeBreadCrumbItem(_breadCrumbElements, enums.PageContainers.Message);\r\n        var breadCrumbProps = {\r\n            key: 'key_breadcrumb_message',\r\n            id: 'breadcrumb_message',\r\n            selectedLanguage: localeStore.instance.Locale,\r\n            container: enums.PageContainers.Message,\r\n            isClickable: false,\r\n            breadCrumbString: localeStore.instance.TranslateText('generic.navigation-bar.breadcrumbs.inbox'),\r\n            navigateTo: enums.PageContainers.None,\r\n            isA3Logo: false\r\n        };\r\n        _breadCrumbElements.push(React.createElement(BreadCrumbItem, breadCrumbProps));\r\n        return _breadCrumbElements;\r\n    };\r\n    /**\r\n     * This method will return BreadCrumb for QigSelector\r\n     */\r\n    BreadCrumbHelper.getbreadCrumbForQigSelector = function (_breadCrumbElements, container) {\r\n        var isClickable = true;\r\n        if (container === enums.PageContainers.Login ||\r\n            container === enums.PageContainers.QigSelector ||\r\n            (container === enums.PageContainers.WorkList &&\r\n                !qigStore.instance.selectedQIGForMarkerOperation)) {\r\n            isClickable = false;\r\n        }\r\n        var breadCrumbProps = {\r\n            key: 'key_breadcrumb_qig',\r\n            id: 'breadcrumb_qig',\r\n            selectedLanguage: localeStore.instance.Locale,\r\n            container: container,\r\n            isClickable: isClickable,\r\n            isA3Logo: true\r\n        };\r\n        _breadCrumbElements.push(React.createElement(BreadCrumbItem, breadCrumbProps));\r\n        return _breadCrumbElements;\r\n    };\r\n    /**\r\n     * This method will return BreadCrumb for TeamManagement\r\n     */\r\n    BreadCrumbHelper.getbreadCrumbForTeamManagement = function (_breadCrumbElements) {\r\n        // adding home breadCrumb item.\r\n        this.pushHomeBreadCrumbItem(_breadCrumbElements, enums.PageContainers.TeamManagement);\r\n        var breadCrumbProps = {\r\n            key: 'key_breadcrumb_Team',\r\n            id: 'breadcrumb_team',\r\n            selectedLanguage: localeStore.instance.Locale,\r\n            container: enums.PageContainers.TeamManagement,\r\n            isClickable: false,\r\n            breadCrumbString: localeStore.instance.TranslateText('generic.navigation-bar.breadcrumbs.team-management-for') + this.getFormattedQIGName(),\r\n            isA3Logo: false\r\n        };\r\n        _breadCrumbElements.push(React.createElement(BreadCrumbItem, breadCrumbProps));\r\n        return _breadCrumbElements;\r\n    };\r\n    /**\r\n     * This method will return BreadCrumb for Response\r\n     */\r\n    BreadCrumbHelper.getbreadCrumbForResponse = function (_breadCrumbElements) {\r\n        var breadCrumbProps;\r\n        var isMarkingCheckMode = worklistStore.instance.isMarkingCheckMode;\r\n        // adding home breadCrumb item.\r\n        this.pushHomeBreadCrumbItem(_breadCrumbElements, enums.PageContainers.Response);\r\n        if (userInfoStore.instance.currentOperationMode === enums.MarkerOperationMode.Marking\r\n            || userInfoStore.instance.currentOperationMode === enums.MarkerOperationMode.Awarding) {\r\n            breadCrumbProps = {\r\n                key: 'key_breadcrumb_response',\r\n                id: 'breadcrumb_response',\r\n                selectedLanguage: localeStore.instance.Locale,\r\n                container: enums.PageContainers.Response,\r\n                isClickable: true,\r\n                breadCrumbString: localeStore.instance.TranslateText('generic.navigation-bar.breadcrumbs.worklist'),\r\n                navigateTo: enums.PageContainers.WorkList,\r\n                isA3Logo: false\r\n            };\r\n            _breadCrumbElements.push(React.createElement(BreadCrumbItem, breadCrumbProps));\r\n            if (isMarkingCheckMode) {\r\n                // Once in markingcheck worklist the breadcrumb structure will be : Home / Worklist / Marking Check\r\n                // Marking Check will be clickable and will navigate to MarkingCheck Worklist.\r\n                // On clicking Worklist, will navigate to logged in examiner's My Marking screen.\r\n                breadCrumbProps = {\r\n                    key: 'key_breadcrumb_markCheck_worklist_markingCheck',\r\n                    id: 'breadcrumb_markCheck_worklist_markingCheck',\r\n                    selectedLanguage: localeStore.instance.Locale,\r\n                    container: enums.PageContainers.Response,\r\n                    isClickable: true,\r\n                    breadCrumbString: localeStore.instance.TranslateText('generic.navigation-bar.breadcrumbs.marking-check'),\r\n                    isA3Logo: false,\r\n                    navigateTo: enums.PageContainers.MarkingCheckExaminersWorkList\r\n                };\r\n                _breadCrumbElements.push(React.createElement(BreadCrumbItem, breadCrumbProps));\r\n            }\r\n        }\r\n        else if (userInfoStore.instance.currentOperationMode === enums.MarkerOperationMode.StandardisationSetup) {\r\n            var breadCrumbString = void 0;\r\n            var id = void 0;\r\n            var navigateTo = enums.PageContainers.StandardisationSetup;\r\n            switch (standardisationSetupStore.instance.selectedStandardisationSetupWorkList) {\r\n                case enums.StandardisationSetup.SelectResponse:\r\n                    if (standardisationSetupStore.instance.selectedTabInSelectResponse === enums.StandardisationSessionTab.CurrentSession) {\r\n                        breadCrumbString = localeStore.instance.TranslateText('generic.navigation-bar.breadcrumbs.select-responses');\r\n                        id = 'breadcrumb_select_responses';\r\n                    }\r\n                    else {\r\n                        breadCrumbString = localeStore.instance.TranslateText('generic.navigation-bar.breadcrumbs.previous-session');\r\n                        id = 'breadcrumb_reuse_select_responses';\r\n                    }\r\n                    break;\r\n                case enums.StandardisationSetup.UnClassifiedResponse:\r\n                    breadCrumbString = localeStore.instance.TranslateText('generic.navigation-bar.breadcrumbs.unclassified');\r\n                    id = 'breadcrumb_unclassified';\r\n                    break;\r\n                case enums.StandardisationSetup.ClassifiedResponse:\r\n                    breadCrumbString = localeStore.instance.TranslateText('generic.navigation-bar.breadcrumbs.classified');\r\n                    id = 'breadcrumb_classified';\r\n                    break;\r\n                case enums.StandardisationSetup.ProvisionalResponse:\r\n                    // If response is from searchedResponseData we have to check whether the response owner and logged in user are same\r\n                    // If they are not we have to show the breadCrumb as Inbox\r\n                    if (responseStore.instance.searchedResponseData &&\r\n                        responseStore.instance.searchedResponseData.loggedInExaminerRoleId\r\n                            !== responseStore.instance.searchedResponseData.examinerRoleId) {\r\n                        breadCrumbString = localeStore.instance.TranslateText('generic.navigation-bar.breadcrumbs.inbox');\r\n                        id = 'breadcrumb_message';\r\n                        navigateTo = enums.PageContainers.Message;\r\n                    }\r\n                    else {\r\n                        breadCrumbString = localeStore.instance.TranslateText('generic.navigation-bar.breadcrumbs.provisional');\r\n                        id = 'breadcrumb_provisional';\r\n                    }\r\n                    break;\r\n            }\r\n            breadCrumbProps = {\r\n                key: 'key_' + id,\r\n                id: id,\r\n                selectedLanguage: localeStore.instance.Locale,\r\n                container: enums.PageContainers.Response,\r\n                isClickable: true,\r\n                breadCrumbString: breadCrumbString,\r\n                isA3Logo: false,\r\n                navigateTo: navigateTo\r\n            };\r\n            _breadCrumbElements.push(React.createElement(BreadCrumbItem, breadCrumbProps));\r\n        }\r\n        else {\r\n            if (teamManagementStore && teamManagementStore.instance.isRedirectFromException) {\r\n                breadCrumbProps = {\r\n                    key: 'key_breadcrumb_response_team',\r\n                    id: 'breadcrumb_team_response_team',\r\n                    selectedLanguage: localeStore.instance.Locale,\r\n                    container: enums.PageContainers.Response,\r\n                    isClickable: true,\r\n                    breadCrumbString: localeStore.instance.TranslateText('generic.navigation-bar.breadcrumbs.team-management'),\r\n                    navigateTo: enums.PageContainers.TeamManagement,\r\n                    isA3Logo: false\r\n                };\r\n                _breadCrumbElements.push(React.createElement(BreadCrumbItem, breadCrumbProps));\r\n            }\r\n            else {\r\n                breadCrumbProps = {\r\n                    key: 'key_breadcrumb_response_team',\r\n                    id: 'breadcrumb_team_response_team',\r\n                    selectedLanguage: localeStore.instance.Locale,\r\n                    container: enums.PageContainers.Response,\r\n                    isClickable: true,\r\n                    breadCrumbString: localeStore.instance.TranslateText('generic.navigation-bar.breadcrumbs.team'),\r\n                    navigateTo: enums.PageContainers.TeamManagement,\r\n                    isA3Logo: false\r\n                };\r\n                _breadCrumbElements.push(React.createElement(BreadCrumbItem, breadCrumbProps));\r\n                breadCrumbProps = {\r\n                    key: 'key_breadcrumb_response_examiner',\r\n                    id: 'breadcrumb_team_response_examiner',\r\n                    selectedLanguage: localeStore.instance.Locale,\r\n                    container: enums.PageContainers.Response,\r\n                    isClickable: true,\r\n                    breadCrumbString: examinerStore.instance.getMarkerInformation.formattedExaminerName,\r\n                    navigateTo: enums.PageContainers.WorkList,\r\n                    isA3Logo: false\r\n                };\r\n                _breadCrumbElements.push(React.createElement(BreadCrumbItem, breadCrumbProps));\r\n            }\r\n        }\r\n        return _breadCrumbElements;\r\n    };\r\n    /**\r\n     * This method will return BreadCrumb for WorkList\r\n     */\r\n    BreadCrumbHelper.getbreadCrumbForWorkList = function (_breadCrumbElements) {\r\n        var isMarkingCheckMode = worklistStore.instance.isMarkingCheckMode;\r\n        var breadCrumbProps;\r\n        // adding home breadCrumb item.\r\n        this.pushHomeBreadCrumbItem(_breadCrumbElements, enums.PageContainers.WorkList);\r\n        if (userInfoStore.instance.currentOperationMode === enums.MarkerOperationMode.Marking\r\n            || userInfoStore.instance.currentOperationMode === enums.MarkerOperationMode.Awarding) {\r\n            var worklistBreadCrumbKey = 'key_breadcrumb_worklist';\r\n            var worklistBreadCrumbId = 'breadcrumb_worklist';\r\n            var worklistBreadCrumbText = localeStore.instance.TranslateText('generic.navigation-bar.breadcrumbs.worklist-for') + this.getFormattedQIGName();\r\n            if (isMarkingCheckMode) {\r\n                // in marking check worklist we need 'worklist' element as clickable and with different text\r\n                worklistBreadCrumbKey = 'key_breadcrumb_markCheck_worklist';\r\n                worklistBreadCrumbId = 'breadcrumb_markCheck_worklist';\r\n                worklistBreadCrumbText = localeStore.instance.TranslateText('generic.navigation-bar.breadcrumbs.worklist');\r\n            }\r\n            breadCrumbProps = {\r\n                key: worklistBreadCrumbKey,\r\n                id: worklistBreadCrumbId,\r\n                selectedLanguage: localeStore.instance.Locale,\r\n                container: enums.PageContainers.WorkList,\r\n                isClickable: isMarkingCheckMode,\r\n                breadCrumbString: worklistBreadCrumbText,\r\n                isA3Logo: false,\r\n                navigateTo: enums.PageContainers.WorkList\r\n            };\r\n            _breadCrumbElements.push(React.createElement(BreadCrumbItem, breadCrumbProps));\r\n            if (isMarkingCheckMode) {\r\n                // Once in markingcheck worklist the breadcrumb structure will be : Home / Worklist / Marking Check\r\n                // Marking Check will not be clickable\r\n                // On clicking Worklist, will navigate to logged in examiner's My Marking screen.\r\n                breadCrumbProps = {\r\n                    key: 'key_breadcrumb_markCheck_worklist_markingCheck',\r\n                    id: 'breadcrumb_markCheck_worklist_markingCheck',\r\n                    selectedLanguage: localeStore.instance.Locale,\r\n                    container: enums.PageContainers.WorkList,\r\n                    isClickable: false,\r\n                    breadCrumbString: localeStore.instance.TranslateText('generic.navigation-bar.breadcrumbs.marking-check'),\r\n                    isA3Logo: false\r\n                };\r\n                _breadCrumbElements.push(React.createElement(BreadCrumbItem, breadCrumbProps));\r\n            }\r\n        }\r\n        else {\r\n            breadCrumbProps = {\r\n                key: 'key_breadcrumb_Team',\r\n                id: 'breadcrumb_Team',\r\n                selectedLanguage: localeStore.instance.Locale,\r\n                container: enums.PageContainers.WorkList,\r\n                isClickable: true,\r\n                breadCrumbString: localeStore.instance.TranslateText('generic.navigation-bar.breadcrumbs.team'),\r\n                navigateTo: enums.PageContainers.TeamManagement,\r\n                isA3Logo: false\r\n            };\r\n            _breadCrumbElements.push(React.createElement(BreadCrumbItem, breadCrumbProps));\r\n            breadCrumbProps = {\r\n                key: 'key_breadcrumb_Team_Examiner',\r\n                id: 'breadcrumb_Team_Examiner',\r\n                selectedLanguage: localeStore.instance.Locale,\r\n                container: enums.PageContainers.WorkList,\r\n                isClickable: false,\r\n                breadCrumbString: examinerStore.instance.getMarkerInformation.formattedExaminerName,\r\n                isA3Logo: false\r\n            };\r\n            _breadCrumbElements.push(React.createElement(BreadCrumbItem, breadCrumbProps));\r\n        }\r\n        return _breadCrumbElements;\r\n    };\r\n    /**\r\n     * This method will return BreadCrumb for Reports\r\n     */\r\n    BreadCrumbHelper.getbreadCrumbForReports = function (_breadCrumbElements) {\r\n        // adding home breadCrumb item.\r\n        this.pushHomeBreadCrumbItem(_breadCrumbElements, enums.PageContainers.Reports);\r\n        var breadCrumbProps = {\r\n            key: 'key_breadcrumb_reports',\r\n            id: 'breadcrumb_reports',\r\n            selectedLanguage: localeStore.instance.Locale,\r\n            container: enums.PageContainers.Reports,\r\n            isClickable: false,\r\n            breadCrumbString: localeStore.instance.TranslateText('generic.navigation-bar.breadcrumbs.reports'),\r\n            navigateTo: enums.PageContainers.None,\r\n            isA3Logo: false\r\n        };\r\n        _breadCrumbElements.push(React.createElement(BreadCrumbItem, breadCrumbProps));\r\n        return _breadCrumbElements;\r\n    };\r\n    /**\r\n     * This method will return BreadCrumb for Awarding\r\n     */\r\n    BreadCrumbHelper.getbreadCrumbForAwarding = function (_breadCrumbElements, pageContainer) {\r\n        if (pageContainer === void 0) { pageContainer = enums.PageContainers.None; }\r\n        // adding home breadCrumb item.\r\n        this.pushHomeBreadCrumbItem(_breadCrumbElements, enums.PageContainers.StandardisationSetup);\r\n        var breadCrumbProps = {\r\n            key: 'key_breadcrumb_awarding',\r\n            id: 'breadcrumb_awarding',\r\n            selectedLanguage: localeStore.instance.Locale,\r\n            container: enums.PageContainers.Awarding,\r\n            isClickable: pageContainer === enums.PageContainers.Response ? true : false,\r\n            breadCrumbString: localeStore.instance.TranslateText('generic.navigation-bar.breadcrumbs.awarding'),\r\n            navigateTo: enums.PageContainers.Awarding,\r\n            isA3Logo: false\r\n        };\r\n        _breadCrumbElements.push(React.createElement(BreadCrumbItem, breadCrumbProps));\r\n        return _breadCrumbElements;\r\n    };\r\n    /**\r\n     * This method will return BreadCrumb for Standardisation Setup\r\n     */\r\n    BreadCrumbHelper.getbreadCrumbForStandardisationSetup = function (_breadCrumbElements) {\r\n        // adding home breadCrumb item.\r\n        this.pushHomeBreadCrumbItem(_breadCrumbElements, enums.PageContainers.StandardisationSetup);\r\n        var breadCrumbProps = {\r\n            key: 'key_breadcrumb_standardisationsetup',\r\n            id: 'breadcrumb_standardisationsetup',\r\n            selectedLanguage: localeStore.instance.Locale,\r\n            container: enums.PageContainers.StandardisationSetup,\r\n            isClickable: false,\r\n            breadCrumbString: localeStore.instance.TranslateText('generic.navigation-bar.breadcrumbs.standardisation-setup-for')\r\n                + this.getFormattedQIGName(),\r\n            navigateTo: enums.PageContainers.None,\r\n            isA3Logo: false\r\n        };\r\n        _breadCrumbElements.push(React.createElement(BreadCrumbItem, breadCrumbProps));\r\n        return _breadCrumbElements;\r\n    };\r\n    return BreadCrumbHelper;\r\n}());\r\nmodule.exports = BreadCrumbHelper;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzc3LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWxpdHkvYnJlYWRjcnVtYi9icmVhZGNydW1iaGVscGVyLnRzP2FmMTUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcbmltcG9ydCBlbnVtcyA9IHJlcXVpcmUoJy4uLy4uL2NvbXBvbmVudHMvdXRpbGl0eS9lbnVtcycpO1xuaW1wb3J0IG5hdmlnYXRpb25TdG9yZSA9IHJlcXVpcmUoJy4uLy4uL3N0b3Jlcy9uYXZpZ2F0aW9uL25hdmlnYXRpb25zdG9yZScpO1xuaW1wb3J0IHVzZXJJbmZvU3RvcmUgPSByZXF1aXJlKCcuLi8uLi9zdG9yZXMvdXNlcmluZm8vdXNlcmluZm9zdG9yZScpO1xuaW1wb3J0IHFpZ1N0b3JlID0gcmVxdWlyZSgnLi4vLi4vc3RvcmVzL3FpZ3NlbGVjdG9yL3FpZ3N0b3JlJyk7XG5pbXBvcnQgQnJlYWRDcnVtYkl0ZW0gPSByZXF1aXJlKCcuLi8uLi9jb21wb25lbnRzL2JyZWFkY3J1bWIvYnJlYWRjcnVtYml0ZW0nKTtcbmltcG9ydCBicmVhZENydW1iSXRlbUluZm8gPSByZXF1aXJlKCcuL2JyZWFkY3J1bWJpdGVtaW5mbycpO1xuaW1wb3J0IGxvY2FsZVN0b3JlID0gcmVxdWlyZSgnLi4vLi4vc3RvcmVzL2xvY2FsZS9sb2NhbGVzdG9yZScpO1xuaW1wb3J0IGV4YW1pbmVyU3RvcmUgPSByZXF1aXJlKCcuLi8uLi9zdG9yZXMvbWFya2VyaW5mb3JtYXRpb24vZXhhbWluZXJzdG9yZScpO1xuaW1wb3J0IHRlYW1NYW5hZ2VtZW50U3RvcmUgPSByZXF1aXJlKCcuLi8uLi9zdG9yZXMvdGVhbW1hbmFnZW1lbnQvdGVhbW1hbmFnZW1lbnRzdG9yZScpO1xuaW1wb3J0IHdvcmtsaXN0U3RvcmUgPSByZXF1aXJlKCcuLi8uLi9zdG9yZXMvd29ya2xpc3Qvd29ya2xpc3RzdG9yZScpO1xuaW1wb3J0IHN0cmluZ0Zvcm1hdEhlbHBlciA9IHJlcXVpcmUoJy4uL3N0cmluZ2Zvcm1hdC9zdHJpbmdmb3JtYXRoZWxwZXInKTtcbmltcG9ydCBzdGFuZGFyZGlzYXRpb25TZXR1cFN0b3JlID0gcmVxdWlyZSgnLi4vLi4vc3RvcmVzL3N0YW5kYXJkaXNhdGlvbnNldHVwL3N0YW5kYXJkaXNhdGlvbnNldHVwc3RvcmUnKTtcbmltcG9ydCByZXNwb25zZVN0b3JlID0gcmVxdWlyZSgnLi4vLi4vc3RvcmVzL3Jlc3BvbnNlL3Jlc3BvbnNlc3RvcmUnKTtcbmltcG9ydCBhd2FyZGluZ1N0b3JlID0gcmVxdWlyZSgnLi4vLi4vc3RvcmVzL2F3YXJkaW5nL2F3YXJkaW5nc3RvcmUnKTtcblxuLyoqXG4gKiBCcmVhZENydW1iIGhlbHBlclxuICovXG5jbGFzcyBCcmVhZENydW1iSGVscGVyIHtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIHdpbGwgcmV0dXJuIEJyZWFkQ3J1bWIgdHJhaWwgb2JqZWN0XG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyBnZXRCcmVhZENydW1iVHJhaWwoKTogQXJyYXk8SlNYLkVsZW1lbnQ+IHtcblxuICAgICAgICBsZXQgX2JyZWFkQ3J1bWJJdGVtOiBicmVhZENydW1iSXRlbUluZm8gPSBuYXZpZ2F0aW9uU3RvcmUuaW5zdGFuY2UuYnJlYWRDcnVtYkl0ZW07XG4gICAgICAgIGxldCBfYnJlYWRDcnVtYkVsZW1lbnRzOiBBcnJheTxKU1guRWxlbWVudD4gPSBuZXcgQXJyYXk8SlNYLkVsZW1lbnQ+KCk7XG5cbiAgICAgICAgc3dpdGNoIChfYnJlYWRDcnVtYkl0ZW0uY29udGFpbmVyKSB7XG4gICAgICAgICAgICBjYXNlIGVudW1zLlBhZ2VDb250YWluZXJzLkxvZ2luOlxuICAgICAgICAgICAgY2FzZSBlbnVtcy5QYWdlQ29udGFpbmVycy5RaWdTZWxlY3RvcjpcbiAgICAgICAgICAgIGNhc2UgZW51bXMuUGFnZUNvbnRhaW5lcnMuQWRtaW5TdXBwb3J0OlxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0YnJlYWRDcnVtYkZvclFpZ1NlbGVjdG9yKF9icmVhZENydW1iRWxlbWVudHMsIF9icmVhZENydW1iSXRlbS5jb250YWluZXIpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBlbnVtcy5QYWdlQ29udGFpbmVycy5Xb3JrTGlzdDpcbiAgICAgICAgICAgICAgICBpZiAocWlnU3RvcmUuaW5zdGFuY2Uuc2VsZWN0ZWRRSUdGb3JNYXJrZXJPcGVyYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRicmVhZENydW1iRm9yV29ya0xpc3QoX2JyZWFkQ3J1bWJFbGVtZW50cyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRicmVhZENydW1iRm9yUWlnU2VsZWN0b3IoX2JyZWFkQ3J1bWJFbGVtZW50cywgX2JyZWFkQ3J1bWJJdGVtLmNvbnRhaW5lcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBlbnVtcy5QYWdlQ29udGFpbmVycy5SZXNwb25zZTpcbiAgICAgICAgICAgICAgICBpZiAodXNlckluZm9TdG9yZS5pbnN0YW5jZS5jdXJyZW50T3BlcmF0aW9uTW9kZSA9PT0gZW51bXMuTWFya2VyT3BlcmF0aW9uTW9kZS5Bd2FyZGluZykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmdldGJyZWFkQ3J1bWJGb3JBd2FyZGluZyhfYnJlYWRDcnVtYkVsZW1lbnRzLCBfYnJlYWRDcnVtYkl0ZW0uY29udGFpbmVyKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHFpZ1N0b3JlLmluc3RhbmNlLnNlbGVjdGVkUUlHRm9yTWFya2VyT3BlcmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0YnJlYWRDcnVtYkZvclJlc3BvbnNlKF9icmVhZENydW1iRWxlbWVudHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgZW51bXMuUGFnZUNvbnRhaW5lcnMuTWVzc2FnZTpcbiAgICAgICAgICAgICAgICB0aGlzLmdldGJyZWFkQ3J1bWJGb3JNZXNzYWdlKF9icmVhZENydW1iRWxlbWVudHMpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBlbnVtcy5QYWdlQ29udGFpbmVycy5SZXBvcnRzOlxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0YnJlYWRDcnVtYkZvclJlcG9ydHMoX2JyZWFkQ3J1bWJFbGVtZW50cyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIGVudW1zLlBhZ2VDb250YWluZXJzLlRlYW1NYW5hZ2VtZW50OlxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0YnJlYWRDcnVtYkZvclRlYW1NYW5hZ2VtZW50KF9icmVhZENydW1iRWxlbWVudHMpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBlbnVtcy5QYWdlQ29udGFpbmVycy5TdGFuZGFyZGlzYXRpb25TZXR1cDpcbiAgICAgICAgICAgICAgICB0aGlzLmdldGJyZWFkQ3J1bWJGb3JTdGFuZGFyZGlzYXRpb25TZXR1cChfYnJlYWRDcnVtYkVsZW1lbnRzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgZW51bXMuUGFnZUNvbnRhaW5lcnMuQXdhcmRpbmc6XG4gICAgICAgICAgICAgICAgdGhpcy5nZXRicmVhZENydW1iRm9yQXdhcmRpbmcoX2JyZWFkQ3J1bWJFbGVtZW50cyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIF9icmVhZENydW1iRWxlbWVudHM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IEZvcm1hdHRlZCBRSUcgTmFtZSBiYXNlZCBvbiBDQ1xuICAgICAqL1xuICAgIHByaXZhdGUgc3RhdGljIGdldEZvcm1hdHRlZFFJR05hbWUoKSB7XG4gICAgICAgIHJldHVybiBzdHJpbmdGb3JtYXRIZWxwZXIuZm9ybWF0QXdhcmRpbmdCb2R5UUlHKFxuICAgICAgICAgICAgcWlnU3RvcmUuaW5zdGFuY2Uuc2VsZWN0ZWRRSUdGb3JNYXJrZXJPcGVyYXRpb24ubWFya1NjaGVtZUdyb3VwTmFtZSxcbiAgICAgICAgICAgIHFpZ1N0b3JlLmluc3RhbmNlLnNlbGVjdGVkUUlHRm9yTWFya2VyT3BlcmF0aW9uLmFzc2Vzc21lbnRDb2RlLFxuICAgICAgICAgICAgcWlnU3RvcmUuaW5zdGFuY2Uuc2VsZWN0ZWRRSUdGb3JNYXJrZXJPcGVyYXRpb24uc2Vzc2lvbk5hbWUsXG4gICAgICAgICAgICBxaWdTdG9yZS5pbnN0YW5jZS5zZWxlY3RlZFFJR0Zvck1hcmtlck9wZXJhdGlvbi5jb21wb25lbnRJZCxcbiAgICAgICAgICAgIHFpZ1N0b3JlLmluc3RhbmNlLnNlbGVjdGVkUUlHRm9yTWFya2VyT3BlcmF0aW9uLnF1ZXN0aW9uUGFwZXJOYW1lLFxuICAgICAgICAgICAgcWlnU3RvcmUuaW5zdGFuY2Uuc2VsZWN0ZWRRSUdGb3JNYXJrZXJPcGVyYXRpb24uYXNzZXNzbWVudE5hbWUsXG4gICAgICAgICAgICBxaWdTdG9yZS5pbnN0YW5jZS5zZWxlY3RlZFFJR0Zvck1hcmtlck9wZXJhdGlvbi5jb21wb25lbnROYW1lLFxuICAgICAgICAgICAgc3RyaW5nRm9ybWF0SGVscGVyLmdldE92ZXJ2aWV3UUlHTmFtZUZvcm1hdCgpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCB3aWxsIHB1c2ggaG9tZSBicmVhZGNydW1iIGl0ZW0gdG8gYnJlYWRDcnVtYkVsZW1lbnRzIGFycmF5LlxuICAgICAqL1xuICAgIHByaXZhdGUgc3RhdGljIHB1c2hIb21lQnJlYWRDcnVtYkl0ZW0oX2JyZWFkQ3J1bWJFbGVtZW50czogQXJyYXk8SlNYLkVsZW1lbnQ+LCBjb250YWluZXI6IGVudW1zLlBhZ2VDb250YWluZXJzKSB7XG4gICAgICAgIGxldCBicmVhZENydW1iUHJvcHMgPSB7XG4gICAgICAgICAgICBrZXk6ICdrZXlfYnJlYWRjcnVtYl9ob21lJyxcbiAgICAgICAgICAgIGlkOiAnYnJlYWRjcnVtYl9ob21lJyxcbiAgICAgICAgICAgIHNlbGVjdGVkTGFuZ3VhZ2U6IGxvY2FsZVN0b3JlLmluc3RhbmNlLkxvY2FsZSxcbiAgICAgICAgICAgIGNvbnRhaW5lcjogY29udGFpbmVyLFxuICAgICAgICAgICAgaXNDbGlja2FibGU6IHRydWUsXG4gICAgICAgICAgICBuYXZpZ2F0ZVRvOiBlbnVtcy5QYWdlQ29udGFpbmVycy5RaWdTZWxlY3RvcixcbiAgICAgICAgICAgIGJyZWFkQ3J1bWJTdHJpbmc6IGxvY2FsZVN0b3JlLmluc3RhbmNlLlRyYW5zbGF0ZVRleHQoJ2dlbmVyaWMubmF2aWdhdGlvbi1iYXIuYnJlYWRjcnVtYnMuaG9tZScpLFxuICAgICAgICAgICAgaXNBM0xvZ286IGZhbHNlXG4gICAgICAgIH07XG5cbiAgICAgICAgX2JyZWFkQ3J1bWJFbGVtZW50cy5wdXNoKFJlYWN0LmNyZWF0ZUVsZW1lbnQoQnJlYWRDcnVtYkl0ZW0sIGJyZWFkQ3J1bWJQcm9wcykpO1xuXG4gICAgICAgIHJldHVybiBfYnJlYWRDcnVtYkVsZW1lbnRzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIHdpbGwgcmV0dXJuIEJyZWFkQ3J1bWIgZm9yIE1lc3NhZ2VcbiAgICAgKi9cbiAgICBwcml2YXRlIHN0YXRpYyBnZXRicmVhZENydW1iRm9yTWVzc2FnZShfYnJlYWRDcnVtYkVsZW1lbnRzOiBBcnJheTxKU1guRWxlbWVudD4pIHtcbiAgICAgICAgLy8gYWRkaW5nIGhvbWUgYnJlYWRDcnVtYiBpdGVtLlxuICAgICAgICB0aGlzLnB1c2hIb21lQnJlYWRDcnVtYkl0ZW0oX2JyZWFkQ3J1bWJFbGVtZW50cywgZW51bXMuUGFnZUNvbnRhaW5lcnMuTWVzc2FnZSk7XG5cbiAgICAgICAgbGV0IGJyZWFkQ3J1bWJQcm9wcyA9IHtcbiAgICAgICAgICAgIGtleTogJ2tleV9icmVhZGNydW1iX21lc3NhZ2UnLFxuICAgICAgICAgICAgaWQ6ICdicmVhZGNydW1iX21lc3NhZ2UnLFxuICAgICAgICAgICAgc2VsZWN0ZWRMYW5ndWFnZTogbG9jYWxlU3RvcmUuaW5zdGFuY2UuTG9jYWxlLFxuICAgICAgICAgICAgY29udGFpbmVyOiBlbnVtcy5QYWdlQ29udGFpbmVycy5NZXNzYWdlLFxuICAgICAgICAgICAgaXNDbGlja2FibGU6IGZhbHNlLFxuICAgICAgICAgICAgYnJlYWRDcnVtYlN0cmluZzogbG9jYWxlU3RvcmUuaW5zdGFuY2UuVHJhbnNsYXRlVGV4dCgnZ2VuZXJpYy5uYXZpZ2F0aW9uLWJhci5icmVhZGNydW1icy5pbmJveCcpLFxuICAgICAgICAgICAgbmF2aWdhdGVUbzogZW51bXMuUGFnZUNvbnRhaW5lcnMuTm9uZSxcbiAgICAgICAgICAgIGlzQTNMb2dvOiBmYWxzZVxuICAgICAgICB9O1xuXG4gICAgICAgIF9icmVhZENydW1iRWxlbWVudHMucHVzaChSZWFjdC5jcmVhdGVFbGVtZW50KEJyZWFkQ3J1bWJJdGVtLCBicmVhZENydW1iUHJvcHMpKTtcblxuICAgICAgICByZXR1cm4gX2JyZWFkQ3J1bWJFbGVtZW50cztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCB3aWxsIHJldHVybiBCcmVhZENydW1iIGZvciBRaWdTZWxlY3RvclxuICAgICAqL1xuICAgIHByaXZhdGUgc3RhdGljIGdldGJyZWFkQ3J1bWJGb3JRaWdTZWxlY3RvcihfYnJlYWRDcnVtYkVsZW1lbnRzOiBBcnJheTxKU1guRWxlbWVudD4sXG4gICAgICAgIGNvbnRhaW5lcjogZW51bXMuUGFnZUNvbnRhaW5lcnNcbiAgICApIHtcbiAgICAgICAgbGV0IGlzQ2xpY2thYmxlOiBib29sZWFuID0gdHJ1ZTtcbiAgICAgICAgaWYgKGNvbnRhaW5lciA9PT0gZW51bXMuUGFnZUNvbnRhaW5lcnMuTG9naW4gfHxcbiAgICAgICAgICAgIGNvbnRhaW5lciA9PT0gZW51bXMuUGFnZUNvbnRhaW5lcnMuUWlnU2VsZWN0b3IgfHxcbiAgICAgICAgICAgIChjb250YWluZXIgPT09IGVudW1zLlBhZ2VDb250YWluZXJzLldvcmtMaXN0ICYmXG4gICAgICAgICAgICAgICAgIXFpZ1N0b3JlLmluc3RhbmNlLnNlbGVjdGVkUUlHRm9yTWFya2VyT3BlcmF0aW9uKSkge1xuICAgICAgICAgICAgaXNDbGlja2FibGUgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgYnJlYWRDcnVtYlByb3BzID0ge1xuICAgICAgICAgICAga2V5OiAna2V5X2JyZWFkY3J1bWJfcWlnJyxcbiAgICAgICAgICAgIGlkOiAnYnJlYWRjcnVtYl9xaWcnLFxuICAgICAgICAgICAgc2VsZWN0ZWRMYW5ndWFnZTogbG9jYWxlU3RvcmUuaW5zdGFuY2UuTG9jYWxlLFxuICAgICAgICAgICAgY29udGFpbmVyOiBjb250YWluZXIsXG4gICAgICAgICAgICBpc0NsaWNrYWJsZTogaXNDbGlja2FibGUsXG4gICAgICAgICAgICBpc0EzTG9nbzogdHJ1ZVxuICAgICAgICB9O1xuXG4gICAgICAgIF9icmVhZENydW1iRWxlbWVudHMucHVzaChSZWFjdC5jcmVhdGVFbGVtZW50KEJyZWFkQ3J1bWJJdGVtLCBicmVhZENydW1iUHJvcHMpKTtcblxuICAgICAgICByZXR1cm4gX2JyZWFkQ3J1bWJFbGVtZW50cztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCB3aWxsIHJldHVybiBCcmVhZENydW1iIGZvciBUZWFtTWFuYWdlbWVudFxuICAgICAqL1xuICAgIHByaXZhdGUgc3RhdGljIGdldGJyZWFkQ3J1bWJGb3JUZWFtTWFuYWdlbWVudChfYnJlYWRDcnVtYkVsZW1lbnRzOiBBcnJheTxKU1guRWxlbWVudD4pIHtcbiAgICAgICAgLy8gYWRkaW5nIGhvbWUgYnJlYWRDcnVtYiBpdGVtLlxuICAgICAgICB0aGlzLnB1c2hIb21lQnJlYWRDcnVtYkl0ZW0oX2JyZWFkQ3J1bWJFbGVtZW50cywgZW51bXMuUGFnZUNvbnRhaW5lcnMuVGVhbU1hbmFnZW1lbnQpO1xuXG4gICAgICAgIGxldCBicmVhZENydW1iUHJvcHMgPSB7XG4gICAgICAgICAgICBrZXk6ICdrZXlfYnJlYWRjcnVtYl9UZWFtJyxcbiAgICAgICAgICAgIGlkOiAnYnJlYWRjcnVtYl90ZWFtJyxcbiAgICAgICAgICAgIHNlbGVjdGVkTGFuZ3VhZ2U6IGxvY2FsZVN0b3JlLmluc3RhbmNlLkxvY2FsZSxcbiAgICAgICAgICAgIGNvbnRhaW5lcjogZW51bXMuUGFnZUNvbnRhaW5lcnMuVGVhbU1hbmFnZW1lbnQsXG4gICAgICAgICAgICBpc0NsaWNrYWJsZTogZmFsc2UsXG4gICAgICAgICAgICBicmVhZENydW1iU3RyaW5nOiBsb2NhbGVTdG9yZS5pbnN0YW5jZS5UcmFuc2xhdGVUZXh0XG4gICAgICAgICAgICAgICAgKCdnZW5lcmljLm5hdmlnYXRpb24tYmFyLmJyZWFkY3J1bWJzLnRlYW0tbWFuYWdlbWVudC1mb3InKSArIHRoaXMuZ2V0Rm9ybWF0dGVkUUlHTmFtZSgpLFxuICAgICAgICAgICAgaXNBM0xvZ286IGZhbHNlXG4gICAgICAgIH07XG5cbiAgICAgICAgX2JyZWFkQ3J1bWJFbGVtZW50cy5wdXNoKFJlYWN0LmNyZWF0ZUVsZW1lbnQoQnJlYWRDcnVtYkl0ZW0sIGJyZWFkQ3J1bWJQcm9wcykpO1xuXG4gICAgICAgIHJldHVybiBfYnJlYWRDcnVtYkVsZW1lbnRzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIHdpbGwgcmV0dXJuIEJyZWFkQ3J1bWIgZm9yIFJlc3BvbnNlXG4gICAgICovXG4gICAgcHJpdmF0ZSBzdGF0aWMgZ2V0YnJlYWRDcnVtYkZvclJlc3BvbnNlKF9icmVhZENydW1iRWxlbWVudHM6IEFycmF5PEpTWC5FbGVtZW50Pikge1xuICAgICAgICBsZXQgYnJlYWRDcnVtYlByb3BzOiBhbnk7XG5cbiAgICAgICAgbGV0IGlzTWFya2luZ0NoZWNrTW9kZSA9IHdvcmtsaXN0U3RvcmUuaW5zdGFuY2UuaXNNYXJraW5nQ2hlY2tNb2RlO1xuXG4gICAgICAgIC8vIGFkZGluZyBob21lIGJyZWFkQ3J1bWIgaXRlbS5cbiAgICAgICAgdGhpcy5wdXNoSG9tZUJyZWFkQ3J1bWJJdGVtKF9icmVhZENydW1iRWxlbWVudHMsIGVudW1zLlBhZ2VDb250YWluZXJzLlJlc3BvbnNlKTtcblxuICAgICAgICBpZiAodXNlckluZm9TdG9yZS5pbnN0YW5jZS5jdXJyZW50T3BlcmF0aW9uTW9kZSA9PT0gZW51bXMuTWFya2VyT3BlcmF0aW9uTW9kZS5NYXJraW5nXG4gICAgICAgICAgICB8fCB1c2VySW5mb1N0b3JlLmluc3RhbmNlLmN1cnJlbnRPcGVyYXRpb25Nb2RlID09PSBlbnVtcy5NYXJrZXJPcGVyYXRpb25Nb2RlLkF3YXJkaW5nKSB7XG5cbiAgICAgICAgICAgIGJyZWFkQ3J1bWJQcm9wcyA9IHtcbiAgICAgICAgICAgICAgICBrZXk6ICdrZXlfYnJlYWRjcnVtYl9yZXNwb25zZScsXG4gICAgICAgICAgICAgICAgaWQ6ICdicmVhZGNydW1iX3Jlc3BvbnNlJyxcbiAgICAgICAgICAgICAgICBzZWxlY3RlZExhbmd1YWdlOiBsb2NhbGVTdG9yZS5pbnN0YW5jZS5Mb2NhbGUsXG4gICAgICAgICAgICAgICAgY29udGFpbmVyOiBlbnVtcy5QYWdlQ29udGFpbmVycy5SZXNwb25zZSxcbiAgICAgICAgICAgICAgICBpc0NsaWNrYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBicmVhZENydW1iU3RyaW5nOiBsb2NhbGVTdG9yZS5pbnN0YW5jZS5UcmFuc2xhdGVUZXh0KCdnZW5lcmljLm5hdmlnYXRpb24tYmFyLmJyZWFkY3J1bWJzLndvcmtsaXN0JyksXG4gICAgICAgICAgICAgICAgbmF2aWdhdGVUbzogZW51bXMuUGFnZUNvbnRhaW5lcnMuV29ya0xpc3QsXG4gICAgICAgICAgICAgICAgaXNBM0xvZ286IGZhbHNlXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBfYnJlYWRDcnVtYkVsZW1lbnRzLnB1c2goUmVhY3QuY3JlYXRlRWxlbWVudChCcmVhZENydW1iSXRlbSwgYnJlYWRDcnVtYlByb3BzKSk7XG5cbiAgICAgICAgICAgIGlmIChpc01hcmtpbmdDaGVja01vZGUpIHtcblxuICAgICAgICAgICAgICAgIC8vIE9uY2UgaW4gbWFya2luZ2NoZWNrIHdvcmtsaXN0IHRoZSBicmVhZGNydW1iIHN0cnVjdHVyZSB3aWxsIGJlIDogSG9tZSAvIFdvcmtsaXN0IC8gTWFya2luZyBDaGVja1xuICAgICAgICAgICAgICAgIC8vIE1hcmtpbmcgQ2hlY2sgd2lsbCBiZSBjbGlja2FibGUgYW5kIHdpbGwgbmF2aWdhdGUgdG8gTWFya2luZ0NoZWNrIFdvcmtsaXN0LlxuICAgICAgICAgICAgICAgIC8vIE9uIGNsaWNraW5nIFdvcmtsaXN0LCB3aWxsIG5hdmlnYXRlIHRvIGxvZ2dlZCBpbiBleGFtaW5lcidzIE15IE1hcmtpbmcgc2NyZWVuLlxuXG4gICAgICAgICAgICAgICAgYnJlYWRDcnVtYlByb3BzID0ge1xuICAgICAgICAgICAgICAgICAgICBrZXk6ICdrZXlfYnJlYWRjcnVtYl9tYXJrQ2hlY2tfd29ya2xpc3RfbWFya2luZ0NoZWNrJyxcbiAgICAgICAgICAgICAgICAgICAgaWQ6ICdicmVhZGNydW1iX21hcmtDaGVja193b3JrbGlzdF9tYXJraW5nQ2hlY2snLFxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZExhbmd1YWdlOiBsb2NhbGVTdG9yZS5pbnN0YW5jZS5Mb2NhbGUsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcjogZW51bXMuUGFnZUNvbnRhaW5lcnMuUmVzcG9uc2UsXG4gICAgICAgICAgICAgICAgICAgIGlzQ2xpY2thYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBicmVhZENydW1iU3RyaW5nOiBsb2NhbGVTdG9yZS5pbnN0YW5jZS5UcmFuc2xhdGVUZXh0KCdnZW5lcmljLm5hdmlnYXRpb24tYmFyLmJyZWFkY3J1bWJzLm1hcmtpbmctY2hlY2snKSxcbiAgICAgICAgICAgICAgICAgICAgaXNBM0xvZ286IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBuYXZpZ2F0ZVRvOiBlbnVtcy5QYWdlQ29udGFpbmVycy5NYXJraW5nQ2hlY2tFeGFtaW5lcnNXb3JrTGlzdFxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBfYnJlYWRDcnVtYkVsZW1lbnRzLnB1c2goUmVhY3QuY3JlYXRlRWxlbWVudChCcmVhZENydW1iSXRlbSwgYnJlYWRDcnVtYlByb3BzKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSBlbHNlIGlmICh1c2VySW5mb1N0b3JlLmluc3RhbmNlLmN1cnJlbnRPcGVyYXRpb25Nb2RlID09PSBlbnVtcy5NYXJrZXJPcGVyYXRpb25Nb2RlLlN0YW5kYXJkaXNhdGlvblNldHVwKSB7XG5cbiAgICAgICAgICAgIGxldCBicmVhZENydW1iU3RyaW5nOiBzdHJpbmc7XG4gICAgICAgICAgICBsZXQgaWQ6IHN0cmluZztcbiAgICAgICAgICAgIGxldCBuYXZpZ2F0ZVRvOiBlbnVtcy5QYWdlQ29udGFpbmVycyA9IGVudW1zLlBhZ2VDb250YWluZXJzLlN0YW5kYXJkaXNhdGlvblNldHVwO1xuICAgICAgICAgICAgc3dpdGNoIChzdGFuZGFyZGlzYXRpb25TZXR1cFN0b3JlLmluc3RhbmNlLnNlbGVjdGVkU3RhbmRhcmRpc2F0aW9uU2V0dXBXb3JrTGlzdCkge1xuICAgICAgICAgICAgICAgIGNhc2UgZW51bXMuU3RhbmRhcmRpc2F0aW9uU2V0dXAuU2VsZWN0UmVzcG9uc2U6XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGFuZGFyZGlzYXRpb25TZXR1cFN0b3JlLmluc3RhbmNlLnNlbGVjdGVkVGFiSW5TZWxlY3RSZXNwb25zZSA9PT0gZW51bXMuU3RhbmRhcmRpc2F0aW9uU2Vzc2lvblRhYi5DdXJyZW50U2Vzc2lvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWRDcnVtYlN0cmluZyA9IGxvY2FsZVN0b3JlLmluc3RhbmNlLlRyYW5zbGF0ZVRleHQoJ2dlbmVyaWMubmF2aWdhdGlvbi1iYXIuYnJlYWRjcnVtYnMuc2VsZWN0LXJlc3BvbnNlcycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWQgPSAnYnJlYWRjcnVtYl9zZWxlY3RfcmVzcG9uc2VzJztcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFkQ3J1bWJTdHJpbmcgPSBsb2NhbGVTdG9yZS5pbnN0YW5jZS5UcmFuc2xhdGVUZXh0KCdnZW5lcmljLm5hdmlnYXRpb24tYmFyLmJyZWFkY3J1bWJzLnByZXZpb3VzLXNlc3Npb24nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkID0gJ2JyZWFkY3J1bWJfcmV1c2Vfc2VsZWN0X3Jlc3BvbnNlcyc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBlbnVtcy5TdGFuZGFyZGlzYXRpb25TZXR1cC5VbkNsYXNzaWZpZWRSZXNwb25zZTpcbiAgICAgICAgICAgICAgICAgICAgYnJlYWRDcnVtYlN0cmluZyA9IGxvY2FsZVN0b3JlLmluc3RhbmNlLlRyYW5zbGF0ZVRleHQoJ2dlbmVyaWMubmF2aWdhdGlvbi1iYXIuYnJlYWRjcnVtYnMudW5jbGFzc2lmaWVkJyk7XG4gICAgICAgICAgICAgICAgICAgIGlkID0gJ2JyZWFkY3J1bWJfdW5jbGFzc2lmaWVkJztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBlbnVtcy5TdGFuZGFyZGlzYXRpb25TZXR1cC5DbGFzc2lmaWVkUmVzcG9uc2U6XG4gICAgICAgICAgICAgICAgICAgIGJyZWFkQ3J1bWJTdHJpbmcgPSBsb2NhbGVTdG9yZS5pbnN0YW5jZS5UcmFuc2xhdGVUZXh0KCdnZW5lcmljLm5hdmlnYXRpb24tYmFyLmJyZWFkY3J1bWJzLmNsYXNzaWZpZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgaWQgPSAnYnJlYWRjcnVtYl9jbGFzc2lmaWVkJztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBlbnVtcy5TdGFuZGFyZGlzYXRpb25TZXR1cC5Qcm92aXNpb25hbFJlc3BvbnNlOlxuICAgICAgICAgICAgICAgICAgICAvLyBJZiByZXNwb25zZSBpcyBmcm9tIHNlYXJjaGVkUmVzcG9uc2VEYXRhIHdlIGhhdmUgdG8gY2hlY2sgd2hldGhlciB0aGUgcmVzcG9uc2Ugb3duZXIgYW5kIGxvZ2dlZCBpbiB1c2VyIGFyZSBzYW1lXG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZXkgYXJlIG5vdCB3ZSBoYXZlIHRvIHNob3cgdGhlIGJyZWFkQ3J1bWIgYXMgSW5ib3hcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlU3RvcmUuaW5zdGFuY2Uuc2VhcmNoZWRSZXNwb25zZURhdGEgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlU3RvcmUuaW5zdGFuY2Uuc2VhcmNoZWRSZXNwb25zZURhdGEubG9nZ2VkSW5FeGFtaW5lclJvbGVJZFxuICAgICAgICAgICAgICAgICAgICAgICAgIT09IHJlc3BvbnNlU3RvcmUuaW5zdGFuY2Uuc2VhcmNoZWRSZXNwb25zZURhdGEuZXhhbWluZXJSb2xlSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFkQ3J1bWJTdHJpbmcgPSBsb2NhbGVTdG9yZS5pbnN0YW5jZS5UcmFuc2xhdGVUZXh0KCdnZW5lcmljLm5hdmlnYXRpb24tYmFyLmJyZWFkY3J1bWJzLmluYm94Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZCA9ICdicmVhZGNydW1iX21lc3NhZ2UnO1xuICAgICAgICAgICAgICAgICAgICAgICAgbmF2aWdhdGVUbyA9IGVudW1zLlBhZ2VDb250YWluZXJzLk1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhZENydW1iU3RyaW5nID0gbG9jYWxlU3RvcmUuaW5zdGFuY2UuVHJhbnNsYXRlVGV4dCgnZ2VuZXJpYy5uYXZpZ2F0aW9uLWJhci5icmVhZGNydW1icy5wcm92aXNpb25hbCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWQgPSAnYnJlYWRjcnVtYl9wcm92aXNpb25hbCc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGJyZWFkQ3J1bWJQcm9wcyA9IHtcbiAgICAgICAgICAgICAgICBrZXk6ICdrZXlfJyArIGlkLFxuICAgICAgICAgICAgICAgIGlkOiBpZCxcbiAgICAgICAgICAgICAgICBzZWxlY3RlZExhbmd1YWdlOiBsb2NhbGVTdG9yZS5pbnN0YW5jZS5Mb2NhbGUsXG4gICAgICAgICAgICAgICAgY29udGFpbmVyOiBlbnVtcy5QYWdlQ29udGFpbmVycy5SZXNwb25zZSxcbiAgICAgICAgICAgICAgICBpc0NsaWNrYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBicmVhZENydW1iU3RyaW5nOiBicmVhZENydW1iU3RyaW5nLFxuICAgICAgICAgICAgICAgIGlzQTNMb2dvOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBuYXZpZ2F0ZVRvOiBuYXZpZ2F0ZVRvXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBfYnJlYWRDcnVtYkVsZW1lbnRzLnB1c2goUmVhY3QuY3JlYXRlRWxlbWVudChCcmVhZENydW1iSXRlbSwgYnJlYWRDcnVtYlByb3BzKSk7XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0ZWFtTWFuYWdlbWVudFN0b3JlICYmIHRlYW1NYW5hZ2VtZW50U3RvcmUuaW5zdGFuY2UuaXNSZWRpcmVjdEZyb21FeGNlcHRpb24pIHtcbiAgICAgICAgICAgICAgICBicmVhZENydW1iUHJvcHMgPSB7XG4gICAgICAgICAgICAgICAgICAgIGtleTogJ2tleV9icmVhZGNydW1iX3Jlc3BvbnNlX3RlYW0nLFxuICAgICAgICAgICAgICAgICAgICBpZDogJ2JyZWFkY3J1bWJfdGVhbV9yZXNwb25zZV90ZWFtJyxcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRMYW5ndWFnZTogbG9jYWxlU3RvcmUuaW5zdGFuY2UuTG9jYWxlLFxuICAgICAgICAgICAgICAgICAgICBjb250YWluZXI6IGVudW1zLlBhZ2VDb250YWluZXJzLlJlc3BvbnNlLFxuICAgICAgICAgICAgICAgICAgICBpc0NsaWNrYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgYnJlYWRDcnVtYlN0cmluZzogbG9jYWxlU3RvcmUuaW5zdGFuY2UuVHJhbnNsYXRlVGV4dCgnZ2VuZXJpYy5uYXZpZ2F0aW9uLWJhci5icmVhZGNydW1icy50ZWFtLW1hbmFnZW1lbnQnKSxcbiAgICAgICAgICAgICAgICAgICAgbmF2aWdhdGVUbzogZW51bXMuUGFnZUNvbnRhaW5lcnMuVGVhbU1hbmFnZW1lbnQsXG4gICAgICAgICAgICAgICAgICAgIGlzQTNMb2dvOiBmYWxzZVxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBfYnJlYWRDcnVtYkVsZW1lbnRzLnB1c2goUmVhY3QuY3JlYXRlRWxlbWVudChCcmVhZENydW1iSXRlbSwgYnJlYWRDcnVtYlByb3BzKSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGJyZWFkQ3J1bWJQcm9wcyA9IHtcbiAgICAgICAgICAgICAgICAgICAga2V5OiAna2V5X2JyZWFkY3J1bWJfcmVzcG9uc2VfdGVhbScsXG4gICAgICAgICAgICAgICAgICAgIGlkOiAnYnJlYWRjcnVtYl90ZWFtX3Jlc3BvbnNlX3RlYW0nLFxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZExhbmd1YWdlOiBsb2NhbGVTdG9yZS5pbnN0YW5jZS5Mb2NhbGUsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcjogZW51bXMuUGFnZUNvbnRhaW5lcnMuUmVzcG9uc2UsXG4gICAgICAgICAgICAgICAgICAgIGlzQ2xpY2thYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBicmVhZENydW1iU3RyaW5nOiBsb2NhbGVTdG9yZS5pbnN0YW5jZS5UcmFuc2xhdGVUZXh0KCdnZW5lcmljLm5hdmlnYXRpb24tYmFyLmJyZWFkY3J1bWJzLnRlYW0nKSxcbiAgICAgICAgICAgICAgICAgICAgbmF2aWdhdGVUbzogZW51bXMuUGFnZUNvbnRhaW5lcnMuVGVhbU1hbmFnZW1lbnQsXG4gICAgICAgICAgICAgICAgICAgIGlzQTNMb2dvOiBmYWxzZVxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBfYnJlYWRDcnVtYkVsZW1lbnRzLnB1c2goUmVhY3QuY3JlYXRlRWxlbWVudChCcmVhZENydW1iSXRlbSwgYnJlYWRDcnVtYlByb3BzKSk7XG5cbiAgICAgICAgICAgICAgICBicmVhZENydW1iUHJvcHMgPSB7XG4gICAgICAgICAgICAgICAgICAgIGtleTogJ2tleV9icmVhZGNydW1iX3Jlc3BvbnNlX2V4YW1pbmVyJyxcbiAgICAgICAgICAgICAgICAgICAgaWQ6ICdicmVhZGNydW1iX3RlYW1fcmVzcG9uc2VfZXhhbWluZXInLFxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZExhbmd1YWdlOiBsb2NhbGVTdG9yZS5pbnN0YW5jZS5Mb2NhbGUsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcjogZW51bXMuUGFnZUNvbnRhaW5lcnMuUmVzcG9uc2UsXG4gICAgICAgICAgICAgICAgICAgIGlzQ2xpY2thYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBicmVhZENydW1iU3RyaW5nOiBleGFtaW5lclN0b3JlLmluc3RhbmNlLmdldE1hcmtlckluZm9ybWF0aW9uLmZvcm1hdHRlZEV4YW1pbmVyTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgbmF2aWdhdGVUbzogZW51bXMuUGFnZUNvbnRhaW5lcnMuV29ya0xpc3QsXG4gICAgICAgICAgICAgICAgICAgIGlzQTNMb2dvOiBmYWxzZVxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBfYnJlYWRDcnVtYkVsZW1lbnRzLnB1c2goUmVhY3QuY3JlYXRlRWxlbWVudChCcmVhZENydW1iSXRlbSwgYnJlYWRDcnVtYlByb3BzKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBfYnJlYWRDcnVtYkVsZW1lbnRzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIHdpbGwgcmV0dXJuIEJyZWFkQ3J1bWIgZm9yIFdvcmtMaXN0XG4gICAgICovXG4gICAgcHJpdmF0ZSBzdGF0aWMgZ2V0YnJlYWRDcnVtYkZvcldvcmtMaXN0KF9icmVhZENydW1iRWxlbWVudHM6IEFycmF5PEpTWC5FbGVtZW50Pikge1xuICAgICAgICBsZXQgaXNNYXJraW5nQ2hlY2tNb2RlID0gd29ya2xpc3RTdG9yZS5pbnN0YW5jZS5pc01hcmtpbmdDaGVja01vZGU7XG5cbiAgICAgICAgbGV0IGJyZWFkQ3J1bWJQcm9wcztcblxuICAgICAgICAvLyBhZGRpbmcgaG9tZSBicmVhZENydW1iIGl0ZW0uXG4gICAgICAgIHRoaXMucHVzaEhvbWVCcmVhZENydW1iSXRlbShfYnJlYWRDcnVtYkVsZW1lbnRzLCBlbnVtcy5QYWdlQ29udGFpbmVycy5Xb3JrTGlzdCk7XG5cbiAgICAgICAgaWYgKHVzZXJJbmZvU3RvcmUuaW5zdGFuY2UuY3VycmVudE9wZXJhdGlvbk1vZGUgPT09IGVudW1zLk1hcmtlck9wZXJhdGlvbk1vZGUuTWFya2luZ1xuICAgICAgICAgICAgfHwgdXNlckluZm9TdG9yZS5pbnN0YW5jZS5jdXJyZW50T3BlcmF0aW9uTW9kZSA9PT0gZW51bXMuTWFya2VyT3BlcmF0aW9uTW9kZS5Bd2FyZGluZykge1xuXG4gICAgICAgICAgICBsZXQgd29ya2xpc3RCcmVhZENydW1iS2V5OiBzdHJpbmcgPSAna2V5X2JyZWFkY3J1bWJfd29ya2xpc3QnO1xuICAgICAgICAgICAgbGV0IHdvcmtsaXN0QnJlYWRDcnVtYklkOiBzdHJpbmcgPSAnYnJlYWRjcnVtYl93b3JrbGlzdCc7XG4gICAgICAgICAgICBsZXQgd29ya2xpc3RCcmVhZENydW1iVGV4dDogc3RyaW5nID0gbG9jYWxlU3RvcmUuaW5zdGFuY2UuVHJhbnNsYXRlVGV4dFxuICAgICAgICAgICAgICAgICgnZ2VuZXJpYy5uYXZpZ2F0aW9uLWJhci5icmVhZGNydW1icy53b3JrbGlzdC1mb3InKSArIHRoaXMuZ2V0Rm9ybWF0dGVkUUlHTmFtZSgpO1xuXG4gICAgICAgICAgICBpZiAoaXNNYXJraW5nQ2hlY2tNb2RlKSB7XG5cbiAgICAgICAgICAgICAgICAvLyBpbiBtYXJraW5nIGNoZWNrIHdvcmtsaXN0IHdlIG5lZWQgJ3dvcmtsaXN0JyBlbGVtZW50IGFzIGNsaWNrYWJsZSBhbmQgd2l0aCBkaWZmZXJlbnQgdGV4dFxuICAgICAgICAgICAgICAgIHdvcmtsaXN0QnJlYWRDcnVtYktleSA9ICdrZXlfYnJlYWRjcnVtYl9tYXJrQ2hlY2tfd29ya2xpc3QnO1xuICAgICAgICAgICAgICAgIHdvcmtsaXN0QnJlYWRDcnVtYklkID0gJ2JyZWFkY3J1bWJfbWFya0NoZWNrX3dvcmtsaXN0JztcbiAgICAgICAgICAgICAgICB3b3JrbGlzdEJyZWFkQ3J1bWJUZXh0ID0gbG9jYWxlU3RvcmUuaW5zdGFuY2UuVHJhbnNsYXRlVGV4dCgnZ2VuZXJpYy5uYXZpZ2F0aW9uLWJhci5icmVhZGNydW1icy53b3JrbGlzdCcpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBicmVhZENydW1iUHJvcHMgPSB7XG4gICAgICAgICAgICAgICAga2V5OiB3b3JrbGlzdEJyZWFkQ3J1bWJLZXksXG4gICAgICAgICAgICAgICAgaWQ6IHdvcmtsaXN0QnJlYWRDcnVtYklkLFxuICAgICAgICAgICAgICAgIHNlbGVjdGVkTGFuZ3VhZ2U6IGxvY2FsZVN0b3JlLmluc3RhbmNlLkxvY2FsZSxcbiAgICAgICAgICAgICAgICBjb250YWluZXI6IGVudW1zLlBhZ2VDb250YWluZXJzLldvcmtMaXN0LFxuICAgICAgICAgICAgICAgIGlzQ2xpY2thYmxlOiBpc01hcmtpbmdDaGVja01vZGUsXG4gICAgICAgICAgICAgICAgYnJlYWRDcnVtYlN0cmluZzogd29ya2xpc3RCcmVhZENydW1iVGV4dCxcbiAgICAgICAgICAgICAgICBpc0EzTG9nbzogZmFsc2UsXG4gICAgICAgICAgICAgICAgbmF2aWdhdGVUbzogZW51bXMuUGFnZUNvbnRhaW5lcnMuV29ya0xpc3RcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIF9icmVhZENydW1iRWxlbWVudHMucHVzaChSZWFjdC5jcmVhdGVFbGVtZW50KEJyZWFkQ3J1bWJJdGVtLCBicmVhZENydW1iUHJvcHMpKTtcblxuICAgICAgICAgICAgaWYgKGlzTWFya2luZ0NoZWNrTW9kZSkge1xuXG4gICAgICAgICAgICAgICAgLy8gT25jZSBpbiBtYXJraW5nY2hlY2sgd29ya2xpc3QgdGhlIGJyZWFkY3J1bWIgc3RydWN0dXJlIHdpbGwgYmUgOiBIb21lIC8gV29ya2xpc3QgLyBNYXJraW5nIENoZWNrXG4gICAgICAgICAgICAgICAgLy8gTWFya2luZyBDaGVjayB3aWxsIG5vdCBiZSBjbGlja2FibGVcbiAgICAgICAgICAgICAgICAvLyBPbiBjbGlja2luZyBXb3JrbGlzdCwgd2lsbCBuYXZpZ2F0ZSB0byBsb2dnZWQgaW4gZXhhbWluZXIncyBNeSBNYXJraW5nIHNjcmVlbi5cblxuICAgICAgICAgICAgICAgIGJyZWFkQ3J1bWJQcm9wcyA9IHtcbiAgICAgICAgICAgICAgICAgICAga2V5OiAna2V5X2JyZWFkY3J1bWJfbWFya0NoZWNrX3dvcmtsaXN0X21hcmtpbmdDaGVjaycsXG4gICAgICAgICAgICAgICAgICAgIGlkOiAnYnJlYWRjcnVtYl9tYXJrQ2hlY2tfd29ya2xpc3RfbWFya2luZ0NoZWNrJyxcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRMYW5ndWFnZTogbG9jYWxlU3RvcmUuaW5zdGFuY2UuTG9jYWxlLFxuICAgICAgICAgICAgICAgICAgICBjb250YWluZXI6IGVudW1zLlBhZ2VDb250YWluZXJzLldvcmtMaXN0LFxuICAgICAgICAgICAgICAgICAgICBpc0NsaWNrYWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGJyZWFkQ3J1bWJTdHJpbmc6IGxvY2FsZVN0b3JlLmluc3RhbmNlLlRyYW5zbGF0ZVRleHQoJ2dlbmVyaWMubmF2aWdhdGlvbi1iYXIuYnJlYWRjcnVtYnMubWFya2luZy1jaGVjaycpLFxuICAgICAgICAgICAgICAgICAgICBpc0EzTG9nbzogZmFsc2VcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgX2JyZWFkQ3J1bWJFbGVtZW50cy5wdXNoKFJlYWN0LmNyZWF0ZUVsZW1lbnQoQnJlYWRDcnVtYkl0ZW0sIGJyZWFkQ3J1bWJQcm9wcykpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgIGJyZWFkQ3J1bWJQcm9wcyA9IHtcbiAgICAgICAgICAgICAgICBrZXk6ICdrZXlfYnJlYWRjcnVtYl9UZWFtJyxcbiAgICAgICAgICAgICAgICBpZDogJ2JyZWFkY3J1bWJfVGVhbScsXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRMYW5ndWFnZTogbG9jYWxlU3RvcmUuaW5zdGFuY2UuTG9jYWxlLFxuICAgICAgICAgICAgICAgIGNvbnRhaW5lcjogZW51bXMuUGFnZUNvbnRhaW5lcnMuV29ya0xpc3QsXG4gICAgICAgICAgICAgICAgaXNDbGlja2FibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgYnJlYWRDcnVtYlN0cmluZzogbG9jYWxlU3RvcmUuaW5zdGFuY2UuVHJhbnNsYXRlVGV4dCgnZ2VuZXJpYy5uYXZpZ2F0aW9uLWJhci5icmVhZGNydW1icy50ZWFtJyksXG4gICAgICAgICAgICAgICAgbmF2aWdhdGVUbzogZW51bXMuUGFnZUNvbnRhaW5lcnMuVGVhbU1hbmFnZW1lbnQsXG4gICAgICAgICAgICAgICAgaXNBM0xvZ286IGZhbHNlXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBfYnJlYWRDcnVtYkVsZW1lbnRzLnB1c2goUmVhY3QuY3JlYXRlRWxlbWVudChCcmVhZENydW1iSXRlbSwgYnJlYWRDcnVtYlByb3BzKSk7XG5cbiAgICAgICAgICAgIGJyZWFkQ3J1bWJQcm9wcyA9IHtcbiAgICAgICAgICAgICAgICBrZXk6ICdrZXlfYnJlYWRjcnVtYl9UZWFtX0V4YW1pbmVyJyxcbiAgICAgICAgICAgICAgICBpZDogJ2JyZWFkY3J1bWJfVGVhbV9FeGFtaW5lcicsXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRMYW5ndWFnZTogbG9jYWxlU3RvcmUuaW5zdGFuY2UuTG9jYWxlLFxuICAgICAgICAgICAgICAgIGNvbnRhaW5lcjogZW51bXMuUGFnZUNvbnRhaW5lcnMuV29ya0xpc3QsXG4gICAgICAgICAgICAgICAgaXNDbGlja2FibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGJyZWFkQ3J1bWJTdHJpbmc6IGV4YW1pbmVyU3RvcmUuaW5zdGFuY2UuZ2V0TWFya2VySW5mb3JtYXRpb24uZm9ybWF0dGVkRXhhbWluZXJOYW1lLFxuICAgICAgICAgICAgICAgIGlzQTNMb2dvOiBmYWxzZVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgX2JyZWFkQ3J1bWJFbGVtZW50cy5wdXNoKFJlYWN0LmNyZWF0ZUVsZW1lbnQoQnJlYWRDcnVtYkl0ZW0sIGJyZWFkQ3J1bWJQcm9wcykpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIF9icmVhZENydW1iRWxlbWVudHM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2Qgd2lsbCByZXR1cm4gQnJlYWRDcnVtYiBmb3IgUmVwb3J0c1xuICAgICAqL1xuICAgIHByaXZhdGUgc3RhdGljIGdldGJyZWFkQ3J1bWJGb3JSZXBvcnRzKF9icmVhZENydW1iRWxlbWVudHM6IEFycmF5PEpTWC5FbGVtZW50Pikge1xuXG4gICAgICAgIC8vIGFkZGluZyBob21lIGJyZWFkQ3J1bWIgaXRlbS5cbiAgICAgICAgdGhpcy5wdXNoSG9tZUJyZWFkQ3J1bWJJdGVtKF9icmVhZENydW1iRWxlbWVudHMsIGVudW1zLlBhZ2VDb250YWluZXJzLlJlcG9ydHMpO1xuXG4gICAgICAgIGxldCBicmVhZENydW1iUHJvcHMgPSB7XG4gICAgICAgICAgICBrZXk6ICdrZXlfYnJlYWRjcnVtYl9yZXBvcnRzJyxcbiAgICAgICAgICAgIGlkOiAnYnJlYWRjcnVtYl9yZXBvcnRzJyxcbiAgICAgICAgICAgIHNlbGVjdGVkTGFuZ3VhZ2U6IGxvY2FsZVN0b3JlLmluc3RhbmNlLkxvY2FsZSxcbiAgICAgICAgICAgIGNvbnRhaW5lcjogZW51bXMuUGFnZUNvbnRhaW5lcnMuUmVwb3J0cyxcbiAgICAgICAgICAgIGlzQ2xpY2thYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIGJyZWFkQ3J1bWJTdHJpbmc6IGxvY2FsZVN0b3JlLmluc3RhbmNlLlRyYW5zbGF0ZVRleHQoJ2dlbmVyaWMubmF2aWdhdGlvbi1iYXIuYnJlYWRjcnVtYnMucmVwb3J0cycpLFxuICAgICAgICAgICAgbmF2aWdhdGVUbzogZW51bXMuUGFnZUNvbnRhaW5lcnMuTm9uZSxcbiAgICAgICAgICAgIGlzQTNMb2dvOiBmYWxzZVxuICAgICAgICB9O1xuICAgICAgICBfYnJlYWRDcnVtYkVsZW1lbnRzLnB1c2goUmVhY3QuY3JlYXRlRWxlbWVudChCcmVhZENydW1iSXRlbSwgYnJlYWRDcnVtYlByb3BzKSk7XG5cbiAgICAgICAgcmV0dXJuIF9icmVhZENydW1iRWxlbWVudHM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2Qgd2lsbCByZXR1cm4gQnJlYWRDcnVtYiBmb3IgQXdhcmRpbmdcbiAgICAgKi9cbiAgICBwcml2YXRlIHN0YXRpYyBnZXRicmVhZENydW1iRm9yQXdhcmRpbmcoX2JyZWFkQ3J1bWJFbGVtZW50czogQXJyYXk8SlNYLkVsZW1lbnQ+LFxuICAgICAgICBwYWdlQ29udGFpbmVyOiBlbnVtcy5QYWdlQ29udGFpbmVycyA9IGVudW1zLlBhZ2VDb250YWluZXJzLk5vbmUpIHtcblxuICAgICAgICAvLyBhZGRpbmcgaG9tZSBicmVhZENydW1iIGl0ZW0uXG4gICAgICAgIHRoaXMucHVzaEhvbWVCcmVhZENydW1iSXRlbShfYnJlYWRDcnVtYkVsZW1lbnRzLCBlbnVtcy5QYWdlQ29udGFpbmVycy5TdGFuZGFyZGlzYXRpb25TZXR1cCk7XG5cbiAgICAgICAgbGV0IGJyZWFkQ3J1bWJQcm9wcyA9IHtcbiAgICAgICAgICAgIGtleTogJ2tleV9icmVhZGNydW1iX2F3YXJkaW5nJyxcbiAgICAgICAgICAgIGlkOiAnYnJlYWRjcnVtYl9hd2FyZGluZycsXG4gICAgICAgICAgICBzZWxlY3RlZExhbmd1YWdlOiBsb2NhbGVTdG9yZS5pbnN0YW5jZS5Mb2NhbGUsXG4gICAgICAgICAgICBjb250YWluZXI6IGVudW1zLlBhZ2VDb250YWluZXJzLkF3YXJkaW5nLFxuICAgICAgICAgICAgaXNDbGlja2FibGU6IHBhZ2VDb250YWluZXIgPT09IGVudW1zLlBhZ2VDb250YWluZXJzLlJlc3BvbnNlID8gdHJ1ZSA6IGZhbHNlLFxuICAgICAgICAgICAgYnJlYWRDcnVtYlN0cmluZzogbG9jYWxlU3RvcmUuaW5zdGFuY2UuVHJhbnNsYXRlVGV4dCgnZ2VuZXJpYy5uYXZpZ2F0aW9uLWJhci5icmVhZGNydW1icy5hd2FyZGluZycpLFxuICAgICAgICAgICAgbmF2aWdhdGVUbzogZW51bXMuUGFnZUNvbnRhaW5lcnMuQXdhcmRpbmcsXG4gICAgICAgICAgICBpc0EzTG9nbzogZmFsc2VcbiAgICAgICAgfTtcbiAgICAgICAgX2JyZWFkQ3J1bWJFbGVtZW50cy5wdXNoKFJlYWN0LmNyZWF0ZUVsZW1lbnQoQnJlYWRDcnVtYkl0ZW0sIGJyZWFkQ3J1bWJQcm9wcykpO1xuXG4gICAgICAgIHJldHVybiBfYnJlYWRDcnVtYkVsZW1lbnRzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIHdpbGwgcmV0dXJuIEJyZWFkQ3J1bWIgZm9yIFN0YW5kYXJkaXNhdGlvbiBTZXR1cFxuICAgICAqL1xuICAgIHByaXZhdGUgc3RhdGljIGdldGJyZWFkQ3J1bWJGb3JTdGFuZGFyZGlzYXRpb25TZXR1cChfYnJlYWRDcnVtYkVsZW1lbnRzOiBBcnJheTxKU1guRWxlbWVudD4pIHtcblxuICAgICAgICAvLyBhZGRpbmcgaG9tZSBicmVhZENydW1iIGl0ZW0uXG4gICAgICAgIHRoaXMucHVzaEhvbWVCcmVhZENydW1iSXRlbShfYnJlYWRDcnVtYkVsZW1lbnRzLCBlbnVtcy5QYWdlQ29udGFpbmVycy5TdGFuZGFyZGlzYXRpb25TZXR1cCk7XG5cbiAgICAgICAgbGV0IGJyZWFkQ3J1bWJQcm9wcyA9IHtcbiAgICAgICAgICAgIGtleTogJ2tleV9icmVhZGNydW1iX3N0YW5kYXJkaXNhdGlvbnNldHVwJyxcbiAgICAgICAgICAgIGlkOiAnYnJlYWRjcnVtYl9zdGFuZGFyZGlzYXRpb25zZXR1cCcsXG4gICAgICAgICAgICBzZWxlY3RlZExhbmd1YWdlOiBsb2NhbGVTdG9yZS5pbnN0YW5jZS5Mb2NhbGUsXG4gICAgICAgICAgICBjb250YWluZXI6IGVudW1zLlBhZ2VDb250YWluZXJzLlN0YW5kYXJkaXNhdGlvblNldHVwLFxuICAgICAgICAgICAgaXNDbGlja2FibGU6IGZhbHNlLFxuICAgICAgICAgICAgYnJlYWRDcnVtYlN0cmluZzogbG9jYWxlU3RvcmUuaW5zdGFuY2UuVHJhbnNsYXRlVGV4dCgnZ2VuZXJpYy5uYXZpZ2F0aW9uLWJhci5icmVhZGNydW1icy5zdGFuZGFyZGlzYXRpb24tc2V0dXAtZm9yJylcbiAgICAgICAgICAgICAgICArIHRoaXMuZ2V0Rm9ybWF0dGVkUUlHTmFtZSgpLFxuICAgICAgICAgICAgbmF2aWdhdGVUbzogZW51bXMuUGFnZUNvbnRhaW5lcnMuTm9uZSxcbiAgICAgICAgICAgIGlzQTNMb2dvOiBmYWxzZVxuICAgICAgICB9O1xuICAgICAgICBfYnJlYWRDcnVtYkVsZW1lbnRzLnB1c2goUmVhY3QuY3JlYXRlRWxlbWVudChCcmVhZENydW1iSXRlbSwgYnJlYWRDcnVtYlByb3BzKSk7XG5cbiAgICAgICAgcmV0dXJuIF9icmVhZENydW1iRWxlbWVudHM7XG4gICAgfVxufVxuXG5leHBvcnQgPSBCcmVhZENydW1iSGVscGVyO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9zb3VyY2UtbWFwLWxvYWRlciEuL3NyYy91dGlsaXR5L2JyZWFkY3J1bWIvYnJlYWRjcnVtYmhlbHBlci50cyJdLCJtYXBwaW5ncyI6IjtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7O0FBRUE7QUFDQTtBQUFBO0FBa2RBO0FBaGRBOztBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBU0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7Iiwic291cmNlUm9vdCI6IiJ9");

/***/ }),

/***/ 378:
/* no static exports found */
/* all exports used */
/*!*****************************************************!*\
  !*** ./src/utility/breadcrumb/historyitemhelper.ts ***!
  \*****************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar qigStore = __webpack_require__(/*! ../../stores/qigselector/qigstore */ 230);\r\nvar localeStore = __webpack_require__(/*! ../../stores/locale/localestore */ 226);\r\n/**\r\n * Helper for History item\r\n */\r\nvar HistoryItemHelper = /** @class */ (function () {\r\n    function HistoryItemHelper() {\r\n    }\r\n    /**\r\n     * Gets Standardisation Setup Link Text\r\n     * @param qigId\r\n     */\r\n    HistoryItemHelper.getStandardisationSetupLinkText = function (qigId) {\r\n        var qigSummary = qigStore.instance.getQigSummary(qigId);\r\n        var isStandardisationSetupButtonVisible = qigStore.instance.isStandardisationSetupButtonVisible(qigSummary);\r\n        var isStandardisationSetupLinkVisible = qigStore.instance.isStandardisationSetupLinkVisible(qigSummary);\r\n        var linkName = '';\r\n        if (isStandardisationSetupButtonVisible) {\r\n            linkName = localeStore.instance.TranslateText('home.qig-data.standardisation-button');\r\n        }\r\n        else if (isStandardisationSetupLinkVisible) {\r\n            var stdSetupPermission = qigStore.instance.getSSUPermissionsData(qigId).role.permissions;\r\n            if (qigStore.instance.isQigHasBrowseScriptPermissionOnly(qigSummary)) {\r\n                linkName = localeStore.instance.TranslateText('home.qig-data.browse-standardisation-scripts');\r\n            }\r\n            else if (stdSetupPermission.editDefinitives) {\r\n                linkName = localeStore.instance.TranslateText('home.qig-data.manage-definitive-mark-link');\r\n            }\r\n            else if (stdSetupPermission.viewDefinitives) {\r\n                linkName = localeStore.instance.TranslateText('home.qig-data.view-definitive-mark-link');\r\n            }\r\n        }\r\n        return linkName;\r\n    };\r\n    return HistoryItemHelper;\r\n}());\r\nmodule.exports = HistoryItemHelper;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzc4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWxpdHkvYnJlYWRjcnVtYi9oaXN0b3J5aXRlbWhlbHBlci50cz8yOWJlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBlbnVtcyA9IHJlcXVpcmUoJy4uLy4uL2NvbXBvbmVudHMvdXRpbGl0eS9lbnVtcycpO1xuaW1wb3J0IHFpZ1N1bW1hcnkgPSByZXF1aXJlKCcuLi8uLi9zdG9yZXMvcWlnc2VsZWN0b3IvdHlwaW5ncy9xaWdzdW1tYXJ5Jyk7XG5pbXBvcnQgcWlnU3RvcmUgPSByZXF1aXJlKCcuLi8uLi9zdG9yZXMvcWlnc2VsZWN0b3IvcWlnc3RvcmUnKTtcbmltcG9ydCBsb2NhbGVTdG9yZSA9IHJlcXVpcmUoJy4uLy4uL3N0b3Jlcy9sb2NhbGUvbG9jYWxlc3RvcmUnKTtcbmltcG9ydCBwZXJtaXNzaW9ucyA9IHJlcXVpcmUoJy4uLy4uL3N0b3Jlcy9zdGFuZGFyZGlzYXRpb25zZXR1cC90eXBpbmdzL3Blcm1pc3Npb25zJyk7XG5cbi8qKlxuICogSGVscGVyIGZvciBIaXN0b3J5IGl0ZW1cbiAqL1xuY2xhc3MgSGlzdG9yeUl0ZW1IZWxwZXIge1xuXG4gICAvKipcbiAgICAqIEdldHMgU3RhbmRhcmRpc2F0aW9uIFNldHVwIExpbmsgVGV4dFxuICAgICogQHBhcmFtIHFpZ0lkXG4gICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIGdldFN0YW5kYXJkaXNhdGlvblNldHVwTGlua1RleHQocWlnSWQ6IG51bWJlcik6IHN0cmluZyB7XG4gICAgICAgIGxldCBxaWdTdW1tYXJ5OiBxaWdTdW1tYXJ5ID0gcWlnU3RvcmUuaW5zdGFuY2UuZ2V0UWlnU3VtbWFyeShxaWdJZCk7XG4gICAgICAgIGxldCBpc1N0YW5kYXJkaXNhdGlvblNldHVwQnV0dG9uVmlzaWJsZTogYm9vbGVhbiA9IHFpZ1N0b3JlLmluc3RhbmNlLmlzU3RhbmRhcmRpc2F0aW9uU2V0dXBCdXR0b25WaXNpYmxlKHFpZ1N1bW1hcnkpO1xuICAgICAgICBsZXQgaXNTdGFuZGFyZGlzYXRpb25TZXR1cExpbmtWaXNpYmxlOiBib29sZWFuID0gcWlnU3RvcmUuaW5zdGFuY2UuaXNTdGFuZGFyZGlzYXRpb25TZXR1cExpbmtWaXNpYmxlKHFpZ1N1bW1hcnkpO1xuICAgICAgICBsZXQgbGlua05hbWU6IHN0cmluZyA9ICcnO1xuICAgICAgICBpZiAoaXNTdGFuZGFyZGlzYXRpb25TZXR1cEJ1dHRvblZpc2libGUpIHtcbiAgICAgICAgICAgIGxpbmtOYW1lID0gbG9jYWxlU3RvcmUuaW5zdGFuY2UuVHJhbnNsYXRlVGV4dCgnaG9tZS5xaWctZGF0YS5zdGFuZGFyZGlzYXRpb24tYnV0dG9uJyk7XG4gICAgICAgIH0gZWxzZSBpZiAoaXNTdGFuZGFyZGlzYXRpb25TZXR1cExpbmtWaXNpYmxlKSB7XG4gICAgICAgICAgICBsZXQgc3RkU2V0dXBQZXJtaXNzaW9uOiBwZXJtaXNzaW9ucyA9IHFpZ1N0b3JlLmluc3RhbmNlLmdldFNTVVBlcm1pc3Npb25zRGF0YShxaWdJZCkucm9sZS5wZXJtaXNzaW9ucztcbiAgICAgICAgICAgIGlmIChxaWdTdG9yZS5pbnN0YW5jZS5pc1FpZ0hhc0Jyb3dzZVNjcmlwdFBlcm1pc3Npb25Pbmx5KHFpZ1N1bW1hcnkpKSB7XG4gICAgICAgICAgICAgICAgbGlua05hbWUgPSBsb2NhbGVTdG9yZS5pbnN0YW5jZS5UcmFuc2xhdGVUZXh0KCdob21lLnFpZy1kYXRhLmJyb3dzZS1zdGFuZGFyZGlzYXRpb24tc2NyaXB0cycpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChzdGRTZXR1cFBlcm1pc3Npb24uZWRpdERlZmluaXRpdmVzKSB7XG4gICAgICAgICAgICAgICAgbGlua05hbWUgPSBsb2NhbGVTdG9yZS5pbnN0YW5jZS5UcmFuc2xhdGVUZXh0KCdob21lLnFpZy1kYXRhLm1hbmFnZS1kZWZpbml0aXZlLW1hcmstbGluaycpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChzdGRTZXR1cFBlcm1pc3Npb24udmlld0RlZmluaXRpdmVzKSB7XG4gICAgICAgICAgICAgICAgbGlua05hbWUgPSBsb2NhbGVTdG9yZS5pbnN0YW5jZS5UcmFuc2xhdGVUZXh0KCdob21lLnFpZy1kYXRhLnZpZXctZGVmaW5pdGl2ZS1tYXJrLWxpbmsnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbGlua05hbWU7XG4gICAgfVxufVxuXG5leHBvcnQgPSBIaXN0b3J5SXRlbUhlbHBlcjtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L3NvdXJjZS1tYXAtbG9hZGVyIS4vc3JjL3V0aWxpdHkvYnJlYWRjcnVtYi9oaXN0b3J5aXRlbWhlbHBlci50cyJdLCJtYXBwaW5ncyI6IjtBQUVBO0FBQ0E7QUFHQTs7QUFFQTtBQUNBO0FBQUE7QUF5QkE7QUF2QkE7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7Iiwic291cmNlUm9vdCI6IiJ9");

/***/ }),

/***/ 380:
/* no static exports found */
/* all exports used */
/*!*********************************************************!*\
  !*** ./src/utility/genericvalidators/emailvalidator.ts ***!
  \*********************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\n/**\r\n * Email validator.\r\n */\r\nvar EmailValidator = /** @class */ (function () {\r\n    function EmailValidator() {\r\n    }\r\n    /**\r\n     * validate the email\r\n     * @param emailAddress\r\n     */\r\n    EmailValidator.prototype.ValidateEmail = function (emailAddress) {\r\n        /* tslint:disable max-line-length */\r\n        var EMAIL_REG_EX = /^([a-zA-Z0-9_\\.\\-])+\\@(([a-zA-Z0-9\\-])+\\.)+([a-zA-Z0-9]{2,4})+$/;\r\n        /* tslint:disable max-line-length */\r\n        if (EMAIL_REG_EX.test(emailAddress)) {\r\n            return (true);\r\n        }\r\n        return (false);\r\n    };\r\n    return EmailValidator;\r\n}());\r\nmodule.exports = EmailValidator;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzgwLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWxpdHkvZ2VuZXJpY3ZhbGlkYXRvcnMvZW1haWx2YWxpZGF0b3IudHM/ZWQzMCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogRW1haWwgdmFsaWRhdG9yLlxyXG4gKi9cclxuY2xhc3MgRW1haWxWYWxpZGF0b3Ige1xyXG4gICAgLyoqXHJcbiAgICAgKiB2YWxpZGF0ZSB0aGUgZW1haWxcclxuICAgICAqIEBwYXJhbSBlbWFpbEFkZHJlc3NcclxuICAgICAqL1xyXG4gICAgcHVibGljIFZhbGlkYXRlRW1haWwoZW1haWxBZGRyZXNzOiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgICAvKiB0c2xpbnQ6ZGlzYWJsZSBtYXgtbGluZS1sZW5ndGggKi9cclxuICAgICAgICBsZXQgRU1BSUxfUkVHX0VYID0gL14oW2EtekEtWjAtOV9cXC5cXC1dKStcXEAoKFthLXpBLVowLTlcXC1dKStcXC4pKyhbYS16QS1aMC05XXsyLDR9KSskLztcclxuICAgICAgICAvKiB0c2xpbnQ6ZGlzYWJsZSBtYXgtbGluZS1sZW5ndGggKi9cclxuICAgICAgICBpZiAoRU1BSUxfUkVHX0VYLnRlc3QoZW1haWxBZGRyZXNzKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gKHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gKGZhbHNlKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0ID0gRW1haWxWYWxpZGF0b3I7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9zb3VyY2UtbWFwLWxvYWRlciEuL3NyYy91dGlsaXR5L2dlbmVyaWN2YWxpZGF0b3JzL2VtYWlsdmFsaWRhdG9yLnRzIl0sIm1hcHBpbmdzIjoiO0FBQUE7O0FBRUE7QUFDQTtBQUFBO0FBY0E7QUFiQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7Iiwic291cmNlUm9vdCI6IiJ9");

/***/ }),

/***/ 495:
/* no static exports found */
/* all exports used */
/*!******************************************************************************!*\
  !*** ./src/components/utility/responseallocation/allocateresponseshelper.ts ***!
  \******************************************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar enums = __webpack_require__(/*! ../enums */ 225);\r\nvar qigStore = __webpack_require__(/*! ../../../stores/qigselector/qigstore */ 230);\r\nvar busyIndicatorActionCreator = __webpack_require__(/*! ../../../actions/busyindicator/busyindicatoractioncreator */ 279);\r\nvar responseActionCreator = __webpack_require__(/*! ../../../actions/response/responseactioncreator */ 257);\r\nvar targetSummaryStore = __webpack_require__(/*! ../../../stores/worklist/targetsummarystore */ 305);\r\nvar workListStore = __webpack_require__(/*! ../../../stores/worklist/workliststore */ 231);\r\nvar examinerStore = __webpack_require__(/*! ../../../stores/markerinformation/examinerstore */ 259);\r\n/**\r\n * Helper class\r\n */\r\nvar AllocateResponsesHelper = /** @class */ (function () {\r\n    function AllocateResponsesHelper() {\r\n    }\r\n    /**\r\n     * On selecting a qiq if the marking limit is not equal to the total allocated responses count,\r\n     * allocate the rest\r\n     */\r\n    AllocateResponsesHelper.allocateQualificationResponses = function () {\r\n        if (AllocateResponsesHelper.isAllocationNeeded()) {\r\n            busyIndicatorActionCreator.setBusyIndicatorInvoker(enums.BusyIndicatorInvoker.responseAllocation);\r\n            responseActionCreator.allocateResponse(qigStore.instance.selectedQIGForMarkerOperation.examinerRoleId, qigStore.instance.selectedQIGForMarkerOperation.markSchemeGroupId, enums.WorklistType.live, true, qigStore.instance.selectedQIGForMarkerOperation.examSessionId, qigStore.instance.selectedQIGForMarkerOperation.role === enums.ExaminerRole.principalExaminer, qigStore.instance.selectedQIGForMarkerOperation.isElectronicStandardisationTeamMember, examinerStore.instance.getMarkerInformation.examinerId, false, false, enums.RemarkRequestType.Unknown, false, false);\r\n        }\r\n    };\r\n    /**\r\n     * returns whether allocation is needed based on the target\r\n     * @returns true- if allocation need to done, else false\r\n     */\r\n    AllocateResponsesHelper.isAllocationNeeded = function () {\r\n        var currentTarget = targetSummaryStore.instance.getCurrentTarget();\r\n        if (currentTarget === undefined) {\r\n            return false;\r\n        }\r\n        var currentMarkingMode = targetSummaryStore.instance.getCurrentMarkingMode();\r\n        var maximumMarkingLimit = currentTarget.maximumMarkingLimit;\r\n        var openResponseCount = currentTarget.examinerProgress.openResponsesCount\r\n            + (isNaN(currentTarget.examinerProgress.atypicalOpenResponsesCount) ?\r\n                0 : currentTarget.examinerProgress.atypicalOpenResponsesCount);\r\n        var closedResponseCount = currentTarget.examinerProgress.closedResponsesCount;\r\n        if ((currentMarkingMode === enums.MarkingMode.Practice ||\r\n            currentMarkingMode === enums.MarkingMode.Approval ||\r\n            currentMarkingMode === enums.MarkingMode.ES_TeamApproval) &&\r\n            maximumMarkingLimit > (openResponseCount + closedResponseCount)) {\r\n            return true;\r\n        }\r\n        else {\r\n            return false;\r\n        }\r\n    };\r\n    /**\r\n     * returns the worklist type based on the marking mode\r\n     */\r\n    AllocateResponsesHelper.getWorkListTypeByMarkingMode = function (markingMode) {\r\n        var workListType;\r\n        /**\r\n         * set the worklist type from  the marking mode\r\n         */\r\n        switch (markingMode) {\r\n            case enums.MarkingMode.LiveMarking:\r\n                workListType = (workListStore.instance.currentWorklistType === enums.WorklistType.atypical)\r\n                    ? enums.WorklistType.atypical : enums.WorklistType.live;\r\n                break;\r\n            case enums.MarkingMode.Practice:\r\n                workListType = enums.WorklistType.practice;\r\n                break;\r\n            case enums.MarkingMode.Approval:\r\n                workListType = enums.WorklistType.standardisation;\r\n                break;\r\n            case enums.MarkingMode.ES_TeamApproval:\r\n                workListType = enums.WorklistType.secondstandardisation;\r\n                break;\r\n            case enums.MarkingMode.Remarking:\r\n                if (workListStore.instance.isDirectedRemark) {\r\n                    workListType = enums.WorklistType.directedRemark;\r\n                }\r\n                else {\r\n                    workListType = enums.WorklistType.pooledRemark;\r\n                }\r\n                break;\r\n            case enums.MarkingMode.Simulation:\r\n                workListType = enums.WorklistType.simulation;\r\n                break;\r\n        }\r\n        return workListType;\r\n    };\r\n    return AllocateResponsesHelper;\r\n}());\r\nmodule.exports = AllocateResponsesHelper;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDk1LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvdXRpbGl0eS9yZXNwb25zZWFsbG9jYXRpb24vYWxsb2NhdGVyZXNwb25zZXNoZWxwZXIudHM/MjI5YiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZW51bXMgPSByZXF1aXJlKCcuLi9lbnVtcycpO1xyXG5pbXBvcnQgcWlnU3RvcmUgPSByZXF1aXJlKCcuLi8uLi8uLi9zdG9yZXMvcWlnc2VsZWN0b3IvcWlnc3RvcmUnKTtcclxuaW1wb3J0IGJ1c3lJbmRpY2F0b3JBY3Rpb25DcmVhdG9yID0gcmVxdWlyZSgnLi4vLi4vLi4vYWN0aW9ucy9idXN5aW5kaWNhdG9yL2J1c3lpbmRpY2F0b3JhY3Rpb25jcmVhdG9yJyk7XHJcbmltcG9ydCByZXNwb25zZUFjdGlvbkNyZWF0b3IgPSByZXF1aXJlKCcuLi8uLi8uLi9hY3Rpb25zL3Jlc3BvbnNlL3Jlc3BvbnNlYWN0aW9uY3JlYXRvcicpO1xyXG5pbXBvcnQgdGFyZ2V0U3VtbWFyeVN0b3JlID0gcmVxdWlyZSgnLi4vLi4vLi4vc3RvcmVzL3dvcmtsaXN0L3RhcmdldHN1bW1hcnlzdG9yZScpO1xyXG5pbXBvcnQgd29ya0xpc3RTdG9yZSA9IHJlcXVpcmUoJy4uLy4uLy4uL3N0b3Jlcy93b3JrbGlzdC93b3JrbGlzdHN0b3JlJyk7XHJcbmltcG9ydCBleGFtaW5lclN0b3JlID0gcmVxdWlyZSgnLi4vLi4vLi4vc3RvcmVzL21hcmtlcmluZm9ybWF0aW9uL2V4YW1pbmVyc3RvcmUnKTtcclxuXHJcbi8qKlxyXG4gKiBIZWxwZXIgY2xhc3NcclxuICovXHJcbmNsYXNzIEFsbG9jYXRlUmVzcG9uc2VzSGVscGVyIHtcclxuICAgIC8qKlxyXG4gICAgICogT24gc2VsZWN0aW5nIGEgcWlxIGlmIHRoZSBtYXJraW5nIGxpbWl0IGlzIG5vdCBlcXVhbCB0byB0aGUgdG90YWwgYWxsb2NhdGVkIHJlc3BvbnNlcyBjb3VudCxcclxuICAgICAqIGFsbG9jYXRlIHRoZSByZXN0XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgYWxsb2NhdGVRdWFsaWZpY2F0aW9uUmVzcG9uc2VzKCkge1xyXG4gICAgICAgIGlmIChBbGxvY2F0ZVJlc3BvbnNlc0hlbHBlci5pc0FsbG9jYXRpb25OZWVkZWQoKSkge1xyXG4gICAgICAgICAgICBidXN5SW5kaWNhdG9yQWN0aW9uQ3JlYXRvci5zZXRCdXN5SW5kaWNhdG9ySW52b2tlcihlbnVtcy5CdXN5SW5kaWNhdG9ySW52b2tlci5yZXNwb25zZUFsbG9jYXRpb24pO1xyXG4gICAgICAgICAgICByZXNwb25zZUFjdGlvbkNyZWF0b3IuYWxsb2NhdGVSZXNwb25zZShxaWdTdG9yZS5pbnN0YW5jZS5zZWxlY3RlZFFJR0Zvck1hcmtlck9wZXJhdGlvbi5leGFtaW5lclJvbGVJZCxcclxuICAgICAgICAgICAgICAgIHFpZ1N0b3JlLmluc3RhbmNlLnNlbGVjdGVkUUlHRm9yTWFya2VyT3BlcmF0aW9uLm1hcmtTY2hlbWVHcm91cElkLFxyXG4gICAgICAgICAgICAgICAgZW51bXMuV29ya2xpc3RUeXBlLmxpdmUsXHJcbiAgICAgICAgICAgICAgICB0cnVlLFxyXG4gICAgICAgICAgICAgICAgcWlnU3RvcmUuaW5zdGFuY2Uuc2VsZWN0ZWRRSUdGb3JNYXJrZXJPcGVyYXRpb24uZXhhbVNlc3Npb25JZCxcclxuICAgICAgICAgICAgICAgIHFpZ1N0b3JlLmluc3RhbmNlLnNlbGVjdGVkUUlHRm9yTWFya2VyT3BlcmF0aW9uLnJvbGUgPT09IGVudW1zLkV4YW1pbmVyUm9sZS5wcmluY2lwYWxFeGFtaW5lcixcclxuICAgICAgICAgICAgICAgIHFpZ1N0b3JlLmluc3RhbmNlLnNlbGVjdGVkUUlHRm9yTWFya2VyT3BlcmF0aW9uLmlzRWxlY3Ryb25pY1N0YW5kYXJkaXNhdGlvblRlYW1NZW1iZXIsXHJcbiAgICAgICAgICAgICAgICBleGFtaW5lclN0b3JlLmluc3RhbmNlLmdldE1hcmtlckluZm9ybWF0aW9uLmV4YW1pbmVySWQsXHJcbiAgICAgICAgICAgICAgICBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgZW51bXMuUmVtYXJrUmVxdWVzdFR5cGUuVW5rbm93bixcclxuICAgICAgICAgICAgICAgIGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIHJldHVybnMgd2hldGhlciBhbGxvY2F0aW9uIGlzIG5lZWRlZCBiYXNlZCBvbiB0aGUgdGFyZ2V0XHJcbiAgICAgKiBAcmV0dXJucyB0cnVlLSBpZiBhbGxvY2F0aW9uIG5lZWQgdG8gZG9uZSwgZWxzZSBmYWxzZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGlzQWxsb2NhdGlvbk5lZWRlZCgpOiBib29sZWFuIHtcclxuICAgICAgICBsZXQgY3VycmVudFRhcmdldCA9IHRhcmdldFN1bW1hcnlTdG9yZS5pbnN0YW5jZS5nZXRDdXJyZW50VGFyZ2V0KCk7XHJcbiAgICAgICAgaWYgKGN1cnJlbnRUYXJnZXQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgY3VycmVudE1hcmtpbmdNb2RlOiBlbnVtcy5NYXJraW5nTW9kZSA9IHRhcmdldFN1bW1hcnlTdG9yZS5pbnN0YW5jZS5nZXRDdXJyZW50TWFya2luZ01vZGUoKTtcclxuICAgICAgICBsZXQgbWF4aW11bU1hcmtpbmdMaW1pdDogbnVtYmVyID0gY3VycmVudFRhcmdldC5tYXhpbXVtTWFya2luZ0xpbWl0O1xyXG4gICAgICAgIGxldCBvcGVuUmVzcG9uc2VDb3VudDogbnVtYmVyID0gY3VycmVudFRhcmdldC5leGFtaW5lclByb2dyZXNzLm9wZW5SZXNwb25zZXNDb3VudFxyXG4gICAgICAgICAgICArIChpc05hTihjdXJyZW50VGFyZ2V0LmV4YW1pbmVyUHJvZ3Jlc3MuYXR5cGljYWxPcGVuUmVzcG9uc2VzQ291bnQpID9cclxuICAgICAgICAgICAgICAgIDAgOiBjdXJyZW50VGFyZ2V0LmV4YW1pbmVyUHJvZ3Jlc3MuYXR5cGljYWxPcGVuUmVzcG9uc2VzQ291bnQpO1xyXG4gICAgICAgIGxldCBjbG9zZWRSZXNwb25zZUNvdW50OiBudW1iZXIgPSBjdXJyZW50VGFyZ2V0LmV4YW1pbmVyUHJvZ3Jlc3MuY2xvc2VkUmVzcG9uc2VzQ291bnQ7XHJcblxyXG4gICAgICAgIGlmICgoY3VycmVudE1hcmtpbmdNb2RlID09PSBlbnVtcy5NYXJraW5nTW9kZS5QcmFjdGljZSB8fFxyXG4gICAgICAgICAgICBjdXJyZW50TWFya2luZ01vZGUgPT09IGVudW1zLk1hcmtpbmdNb2RlLkFwcHJvdmFsIHx8XHJcbiAgICAgICAgICAgIGN1cnJlbnRNYXJraW5nTW9kZSA9PT0gZW51bXMuTWFya2luZ01vZGUuRVNfVGVhbUFwcHJvdmFsKSAmJlxyXG4gICAgICAgICAgICBtYXhpbXVtTWFya2luZ0xpbWl0ID4gKG9wZW5SZXNwb25zZUNvdW50ICsgY2xvc2VkUmVzcG9uc2VDb3VudCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIHJldHVybnMgdGhlIHdvcmtsaXN0IHR5cGUgYmFzZWQgb24gdGhlIG1hcmtpbmcgbW9kZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldFdvcmtMaXN0VHlwZUJ5TWFya2luZ01vZGUobWFya2luZ01vZGU6IG51bWJlcik6IGFueSB7XHJcbiAgICAgICAgbGV0IHdvcmtMaXN0VHlwZTogZW51bXMuV29ya2xpc3RUeXBlO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBzZXQgdGhlIHdvcmtsaXN0IHR5cGUgZnJvbSAgdGhlIG1hcmtpbmcgbW9kZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHN3aXRjaCAobWFya2luZ01vZGUpIHtcclxuICAgICAgICAgICAgY2FzZSBlbnVtcy5NYXJraW5nTW9kZS5MaXZlTWFya2luZzogd29ya0xpc3RUeXBlID0gKHdvcmtMaXN0U3RvcmUuaW5zdGFuY2UuY3VycmVudFdvcmtsaXN0VHlwZSA9PT0gZW51bXMuV29ya2xpc3RUeXBlLmF0eXBpY2FsKVxyXG4gICAgICAgICAgICAgICAgPyBlbnVtcy5Xb3JrbGlzdFR5cGUuYXR5cGljYWwgOiBlbnVtcy5Xb3JrbGlzdFR5cGUubGl2ZTsgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgZW51bXMuTWFya2luZ01vZGUuUHJhY3RpY2U6IHdvcmtMaXN0VHlwZSA9IGVudW1zLldvcmtsaXN0VHlwZS5wcmFjdGljZTsgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgZW51bXMuTWFya2luZ01vZGUuQXBwcm92YWw6IHdvcmtMaXN0VHlwZSA9IGVudW1zLldvcmtsaXN0VHlwZS5zdGFuZGFyZGlzYXRpb247IGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIGVudW1zLk1hcmtpbmdNb2RlLkVTX1RlYW1BcHByb3ZhbDogd29ya0xpc3RUeXBlID0gZW51bXMuV29ya2xpc3RUeXBlLnNlY29uZHN0YW5kYXJkaXNhdGlvbjsgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgZW51bXMuTWFya2luZ01vZGUuUmVtYXJraW5nOlxyXG4gICAgICAgICAgICAgICAgaWYgKHdvcmtMaXN0U3RvcmUuaW5zdGFuY2UuaXNEaXJlY3RlZFJlbWFyaykge1xyXG4gICAgICAgICAgICAgICAgICAgIHdvcmtMaXN0VHlwZSA9IGVudW1zLldvcmtsaXN0VHlwZS5kaXJlY3RlZFJlbWFyaztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd29ya0xpc3RUeXBlID0gZW51bXMuV29ya2xpc3RUeXBlLnBvb2xlZFJlbWFyaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIGVudW1zLk1hcmtpbmdNb2RlLlNpbXVsYXRpb246IHdvcmtMaXN0VHlwZSA9IGVudW1zLldvcmtsaXN0VHlwZS5zaW11bGF0aW9uOyBicmVhaztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB3b3JrTGlzdFR5cGU7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0ID0gQWxsb2NhdGVSZXNwb25zZXNIZWxwZXI7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9zb3VyY2UtbWFwLWxvYWRlciEuL3NyYy9jb21wb25lbnRzL3V0aWxpdHkvcmVzcG9uc2VhbGxvY2F0aW9uL2FsbG9jYXRlcmVzcG9uc2VzaGVscGVyLnRzIl0sIm1hcHBpbmdzIjoiO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQUE7QUE4RUE7QUE3RUE7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFhQTtBQUNBO0FBRUE7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),

/***/ 528:
/* no static exports found */
/* all exports used */
/*!******************************************************************************!*\
  !*** ./src/components/utility/teammanagement/teammanagementlogginghelper.ts ***!
  \******************************************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar loggerBase = __webpack_require__(/*! ../../base/loggerbase */ 425);\r\nvar logCategory = __webpack_require__(/*! ../auditlogger/auditloggingcategory */ 385);\r\nvar TeamManagementLoggingHelper = /** @class */ (function (_super) {\r\n    __extends(TeamManagementLoggingHelper, _super);\r\n    /**\r\n     * Constructor\r\n     */\r\n    function TeamManagementLoggingHelper() {\r\n        return _super.call(this, logCategory.TEAM_MANAGEMENT_TAB_SWITCH) || this;\r\n    }\r\n    /**\r\n     * Log response open audit details.\r\n     * @param reason\r\n     * @param activity\r\n     * @param statusData\r\n     */\r\n    TeamManagementLoggingHelper.prototype.logSubordinateStatusChange = function (reason, activity, statusData) {\r\n        var logActionObj = {\r\n            'Reason': reason,\r\n            'Activity': activity,\r\n            'statusData': statusData\r\n        };\r\n        var result = this.formatInputAction(logActionObj);\r\n        this.saveAuditLog(result, true);\r\n    };\r\n    /**\r\n     * Log supervisor sampling feedback change actions.\r\n     * @param reason\r\n     * @param activity\r\n     * @param samplingArg\r\n     */\r\n    TeamManagementLoggingHelper.prototype.logSupervisorSamplingChanges = function (reason, activity, samplingArg) {\r\n        var logActionObj = {\r\n            'Reason': reason,\r\n            'Activity': activity,\r\n            'SamplingArg': samplingArg\r\n        };\r\n        var result = this.formatInputAction(logActionObj);\r\n        this.saveAuditLog(result, true);\r\n    };\r\n    return TeamManagementLoggingHelper;\r\n}(loggerBase));\r\nmodule.exports = TeamManagementLoggingHelper;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTI4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvdXRpbGl0eS90ZWFtbWFuYWdlbWVudC90ZWFtbWFuYWdlbWVudGxvZ2dpbmdoZWxwZXIudHM/Yjk1ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbG9nZ2VyQmFzZSA9IHJlcXVpcmUoJy4uLy4uL2Jhc2UvbG9nZ2VyYmFzZScpO1xyXG5pbXBvcnQgbG9nQ2F0ZWdvcnkgPSByZXF1aXJlKCcuLi9hdWRpdGxvZ2dlci9hdWRpdGxvZ2dpbmdjYXRlZ29yeScpO1xyXG5cclxuY2xhc3MgVGVhbU1hbmFnZW1lbnRMb2dnaW5nSGVscGVyIGV4dGVuZHMgbG9nZ2VyQmFzZSB7XHJcblxyXG5cdC8qKlxyXG5cdCAqIENvbnN0cnVjdG9yXHJcblx0ICovXHJcblx0Y29uc3RydWN0b3IoKSB7XHJcblx0XHRzdXBlcihsb2dDYXRlZ29yeS5URUFNX01BTkFHRU1FTlRfVEFCX1NXSVRDSCk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBMb2cgcmVzcG9uc2Ugb3BlbiBhdWRpdCBkZXRhaWxzLlxyXG5cdCAqIEBwYXJhbSByZWFzb25cclxuXHQgKiBAcGFyYW0gYWN0aXZpdHlcclxuXHQgKiBAcGFyYW0gc3RhdHVzRGF0YVxyXG5cdCAqL1xyXG5cdHB1YmxpYyBsb2dTdWJvcmRpbmF0ZVN0YXR1c0NoYW5nZShyZWFzb246IHN0cmluZyxcclxuXHRcdGFjdGl2aXR5OiBzdHJpbmcsXHJcblx0XHRzdGF0dXNEYXRhOiBhbnkpOiB2b2lkIHtcclxuXHJcblx0XHRsZXQgbG9nQWN0aW9uT2JqID0ge1xyXG5cdFx0XHQnUmVhc29uJzogcmVhc29uLFxyXG5cdFx0XHQnQWN0aXZpdHknOiBhY3Rpdml0eSxcclxuXHRcdFx0J3N0YXR1c0RhdGEnOiBzdGF0dXNEYXRhXHJcblx0XHR9O1xyXG5cdFx0bGV0IHJlc3VsdCA9IHRoaXMuZm9ybWF0SW5wdXRBY3Rpb24obG9nQWN0aW9uT2JqKTtcclxuXHRcdHRoaXMuc2F2ZUF1ZGl0TG9nKHJlc3VsdCwgdHJ1ZSk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBMb2cgc3VwZXJ2aXNvciBzYW1wbGluZyBmZWVkYmFjayBjaGFuZ2UgYWN0aW9ucy5cclxuXHQgKiBAcGFyYW0gcmVhc29uXHJcblx0ICogQHBhcmFtIGFjdGl2aXR5XHRcclxuXHQgKiBAcGFyYW0gc2FtcGxpbmdBcmdcclxuXHQgKi9cclxuXHRwdWJsaWMgbG9nU3VwZXJ2aXNvclNhbXBsaW5nQ2hhbmdlcyhyZWFzb246IHN0cmluZyxcclxuXHRcdGFjdGl2aXR5OiBzdHJpbmcsXHJcblx0XHRzYW1wbGluZ0FyZzogYW55KTogdm9pZCB7XHJcblxyXG5cdFx0bGV0IGxvZ0FjdGlvbk9iaiA9IHtcclxuXHRcdFx0J1JlYXNvbic6IHJlYXNvbixcclxuXHRcdFx0J0FjdGl2aXR5JzogYWN0aXZpdHksXHJcblx0XHRcdCdTYW1wbGluZ0FyZyc6IHNhbXBsaW5nQXJnXHJcblx0XHR9O1xyXG5cdFx0bGV0IHJlc3VsdCA9IHRoaXMuZm9ybWF0SW5wdXRBY3Rpb24obG9nQWN0aW9uT2JqKTtcclxuXHRcdHRoaXMuc2F2ZUF1ZGl0TG9nKHJlc3VsdCwgdHJ1ZSk7XHJcblx0fVxyXG59XHJcbmV4cG9ydCA9IFRlYW1NYW5hZ2VtZW50TG9nZ2luZ0hlbHBlcjtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L3NvdXJjZS1tYXAtbG9hZGVyIS4vc3JjL2NvbXBvbmVudHMvdXRpbGl0eS90ZWFtbWFuYWdlbWVudC90ZWFtbWFuYWdlbWVudGxvZ2dpbmdoZWxwZXIudHMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUVBO0FBQUE7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7OztBQUtBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7O0FBS0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9");

/***/ }),

/***/ 532:
/* no static exports found */
/* all exports used */
/*!******************************************************************!*\
  !*** ./src/stores/markinginstruction/markinginstructionstore.ts ***!
  \******************************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar storeBase = __webpack_require__(/*! ../base/storebase */ 285);\r\nvar dispatcher = __webpack_require__(/*! ../../app/dispatcher */ 242);\r\nvar actionType = __webpack_require__(/*! ../../actions/base/actiontypes */ 228);\r\n/**\r\n * Class for Marking Instruction store\r\n */\r\nvar MarkingInstructionStore = /** @class */ (function (_super) {\r\n    __extends(MarkingInstructionStore, _super);\r\n    /**\r\n     * @constructor\r\n     */\r\n    function MarkingInstructionStore() {\r\n        var _this = _super.call(this) || this;\r\n        _this._isMarkingInstructionPanelOpen = false;\r\n        _this._markingInstructionPanelPreviousState = false;\r\n        _this._dispatchToken = dispatcher.register(function (action) {\r\n            switch (action.actionType) {\r\n                case actionType.LOAD_MARKINGINSTRUCTIONS_DATA_ACTION:\r\n                    var _loadmarkinginstructionsdataaction = action;\r\n                    _this._markinginstructionsList = _loadmarkinginstructionsdataaction.markingInstructionsData;\r\n                    _this.emit(MarkingInstructionStore.MARKINGINSTRUCTIONS_DATA_LOADED_EVENT);\r\n                    break;\r\n                case actionType.MARKING_INSTRUCTION_PANEL_CLICK_ACTION:\r\n                    _this._markingInstructionPanelPreviousState = _this._isMarkingInstructionPanelOpen;\r\n                    _this._isMarkingInstructionPanelOpen = action.isMarkingInstructionPanelOpen;\r\n                    if (!_this._isMarkingInstructionPanelOpen &&\r\n                        _this._markingInstructionPanelPreviousState !== _this._isMarkingInstructionPanelOpen) {\r\n                        // emit only if the action is closing and check the previous action action to avoid multiple emits of same action\r\n                        _this.emit(MarkingInstructionStore.MARKINGINSTRUCTION_PANEL_CLOSED_EVENT);\r\n                    }\r\n                    break;\r\n                case actionType.MARKING_INSTRUCTION_UPDATED_ACTION:\r\n                    var _markingInstructionUpdatedAction = action;\r\n                    _this.updateMarkingInstruction(_markingInstructionUpdatedAction.documentId, _markingInstructionUpdatedAction.readStatus);\r\n                    break;\r\n            }\r\n        });\r\n        return _this;\r\n    }\r\n    Object.defineProperty(MarkingInstructionStore.prototype, \"markingInstructionList\", {\r\n        /**\r\n         * Gets the marking instruction list\r\n         */\r\n        get: function () {\r\n            return this._markinginstructionsList;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(MarkingInstructionStore.prototype, \"isMarkingInstructionPanelOpen\", {\r\n        /**\r\n         * Gets is marking instruction panel is open or not\r\n         */\r\n        get: function () {\r\n            return this._isMarkingInstructionPanelOpen;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Update the marking instruction list\r\n     */\r\n    MarkingInstructionStore.prototype.updateMarkingInstruction = function (documentId, readStatus) {\r\n        var markingInstruction = this.markingInstructionList.find(function (x) { return x.documentId === documentId; });\r\n        if (markingInstruction != null && !readStatus) {\r\n            markingInstruction.readStatus = true;\r\n            this.emit(MarkingInstructionStore.MARKINGINSTRUCTIONS_DATA_LOADED_EVENT);\r\n        }\r\n    };\r\n    MarkingInstructionStore.MARKINGINSTRUCTIONS_DATA_LOADED_EVENT = 'markinginstructionsdataloadedevent';\r\n    MarkingInstructionStore.MARKINGINSTRUCTION_PANEL_CLOSED_EVENT = 'markinginstructionpanelclickedevent';\r\n    return MarkingInstructionStore;\r\n}(storeBase));\r\nvar instance = new MarkingInstructionStore();\r\nmodule.exports = { MarkingInstructionStore: MarkingInstructionStore, instance: instance };\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTMyLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL3N0b3Jlcy9tYXJraW5naW5zdHJ1Y3Rpb24vbWFya2luZ2luc3RydWN0aW9uc3RvcmUudHM/ZTc0ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgc3RvcmVCYXNlID0gcmVxdWlyZSgnLi4vYmFzZS9zdG9yZWJhc2UnKTtcclxuaW1wb3J0IGRpc3BhdGNoZXIgPSByZXF1aXJlKCcuLi8uLi9hcHAvZGlzcGF0Y2hlcicpO1xyXG5pbXBvcnQgYWN0aW9uID0gcmVxdWlyZSgnLi4vLi4vYWN0aW9ucy9iYXNlL2FjdGlvbicpO1xyXG5pbXBvcnQgYWN0aW9uVHlwZSA9IHJlcXVpcmUoJy4uLy4uL2FjdGlvbnMvYmFzZS9hY3Rpb250eXBlcycpO1xyXG5pbXBvcnQgbG9hZE1hcmtpbmdJbnN0cnVjdGlvbnNEYXRhQWN0aW9uID0gcmVxdWlyZSgnLi4vLi4vYWN0aW9ucy9tYXJraW5naW5zdHJ1Y3Rpb25zL2xvYWRtYXJraW5naW5zdHJ1Y3Rpb25zZGF0YWFjdGlvbicpO1xyXG5pbXBvcnQgbWFya2luZ0luc3RydWN0aW9uUGFuZWxDbGlja0FjdGlvbiA9IHJlcXVpcmUoJy4uLy4uL2FjdGlvbnMvbWFya2luZ2luc3RydWN0aW9ucy9tYXJraW5naW5zdHJ1Y3Rpb25wYW5lbGNsaWNrYWN0aW9uJyk7XHJcbmltcG9ydCBtYXJraW5nSW5zdHJ1Y3Rpb25VcGRhdGVkQWN0aW9uID0gcmVxdWlyZSgnLi4vLi4vYWN0aW9ucy9tYXJraW5naW5zdHJ1Y3Rpb25zL21hcmtpbmdJbnN0cnVjdGlvblVwZGF0ZWRBY3Rpb24nKTtcclxuXHJcbi8qKlxyXG4gKiBDbGFzcyBmb3IgTWFya2luZyBJbnN0cnVjdGlvbiBzdG9yZVxyXG4gKi9cclxuY2xhc3MgTWFya2luZ0luc3RydWN0aW9uU3RvcmUgZXh0ZW5kcyBzdG9yZUJhc2Uge1xyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgTUFSS0lOR0lOU1RSVUNUSU9OU19EQVRBX0xPQURFRF9FVkVOVCA9ICdtYXJraW5naW5zdHJ1Y3Rpb25zZGF0YWxvYWRlZGV2ZW50JztcclxuICAgIHB1YmxpYyBzdGF0aWMgTUFSS0lOR0lOU1RSVUNUSU9OX1BBTkVMX0NMT1NFRF9FVkVOVCA9ICdtYXJraW5naW5zdHJ1Y3Rpb25wYW5lbGNsaWNrZWRldmVudCc7XHJcblxyXG4gICAgcHJpdmF0ZSBfbWFya2luZ2luc3RydWN0aW9uc0xpc3Q6IEltbXV0YWJsZS5MaXN0PE1hcmtpbmdJbnN0cnVjdGlvbj47XHJcblxyXG4gICAgcHJpdmF0ZSBfaXNNYXJraW5nSW5zdHJ1Y3Rpb25QYW5lbE9wZW46IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIHByaXZhdGUgX21hcmtpbmdJbnN0cnVjdGlvblBhbmVsUHJldmlvdXNTdGF0ZTogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGNvbnN0cnVjdG9yXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5fZGlzcGF0Y2hUb2tlbiA9IGRpc3BhdGNoZXIucmVnaXN0ZXIoKGFjdGlvbjogYWN0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoYWN0aW9uLmFjdGlvblR5cGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgYWN0aW9uVHlwZS5MT0FEX01BUktJTkdJTlNUUlVDVElPTlNfREFUQV9BQ1RJT046XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IF9sb2FkbWFya2luZ2luc3RydWN0aW9uc2RhdGFhY3Rpb24gPSBhY3Rpb24gYXMgbG9hZE1hcmtpbmdJbnN0cnVjdGlvbnNEYXRhQWN0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX21hcmtpbmdpbnN0cnVjdGlvbnNMaXN0ID0gX2xvYWRtYXJraW5naW5zdHJ1Y3Rpb25zZGF0YWFjdGlvbi5tYXJraW5nSW5zdHJ1Y3Rpb25zRGF0YTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoTWFya2luZ0luc3RydWN0aW9uU3RvcmUuTUFSS0lOR0lOU1RSVUNUSU9OU19EQVRBX0xPQURFRF9FVkVOVCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIGFjdGlvblR5cGUuTUFSS0lOR19JTlNUUlVDVElPTl9QQU5FTF9DTElDS19BQ1RJT046XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbWFya2luZ0luc3RydWN0aW9uUGFuZWxQcmV2aW91c1N0YXRlID0gdGhpcy5faXNNYXJraW5nSW5zdHJ1Y3Rpb25QYW5lbE9wZW47XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5faXNNYXJraW5nSW5zdHJ1Y3Rpb25QYW5lbE9wZW4gPSAoYWN0aW9uIGFzIG1hcmtpbmdJbnN0cnVjdGlvblBhbmVsQ2xpY2tBY3Rpb24pLmlzTWFya2luZ0luc3RydWN0aW9uUGFuZWxPcGVuO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5faXNNYXJraW5nSW5zdHJ1Y3Rpb25QYW5lbE9wZW4gJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fbWFya2luZ0luc3RydWN0aW9uUGFuZWxQcmV2aW91c1N0YXRlICE9PSB0aGlzLl9pc01hcmtpbmdJbnN0cnVjdGlvblBhbmVsT3Blbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBlbWl0IG9ubHkgaWYgdGhlIGFjdGlvbiBpcyBjbG9zaW5nIGFuZCBjaGVjayB0aGUgcHJldmlvdXMgYWN0aW9uIGFjdGlvbiB0byBhdm9pZCBtdWx0aXBsZSBlbWl0cyBvZiBzYW1lIGFjdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoTWFya2luZ0luc3RydWN0aW9uU3RvcmUuTUFSS0lOR0lOU1RSVUNUSU9OX1BBTkVMX0NMT1NFRF9FVkVOVCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBhY3Rpb25UeXBlLk1BUktJTkdfSU5TVFJVQ1RJT05fVVBEQVRFRF9BQ1RJT046XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IF9tYXJraW5nSW5zdHJ1Y3Rpb25VcGRhdGVkQWN0aW9uID0gYWN0aW9uIGFzIG1hcmtpbmdJbnN0cnVjdGlvblVwZGF0ZWRBY3Rpb247XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVNYXJraW5nSW5zdHJ1Y3Rpb24oX21hcmtpbmdJbnN0cnVjdGlvblVwZGF0ZWRBY3Rpb24uZG9jdW1lbnRJZCwgX21hcmtpbmdJbnN0cnVjdGlvblVwZGF0ZWRBY3Rpb24ucmVhZFN0YXR1cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldHMgdGhlIG1hcmtpbmcgaW5zdHJ1Y3Rpb24gbGlzdFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IG1hcmtpbmdJbnN0cnVjdGlvbkxpc3QoKTogSW1tdXRhYmxlLkxpc3Q8TWFya2luZ0luc3RydWN0aW9uPiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX21hcmtpbmdpbnN0cnVjdGlvbnNMaXN0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0cyBpcyBtYXJraW5nIGluc3RydWN0aW9uIHBhbmVsIGlzIG9wZW4gb3Igbm90XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgaXNNYXJraW5nSW5zdHJ1Y3Rpb25QYW5lbE9wZW4oKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzTWFya2luZ0luc3RydWN0aW9uUGFuZWxPcGVuO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlIHRoZSBtYXJraW5nIGluc3RydWN0aW9uIGxpc3RcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSB1cGRhdGVNYXJraW5nSW5zdHJ1Y3Rpb24oZG9jdW1lbnRJZDogbnVtYmVyLCByZWFkU3RhdHVzOiBib29sZWFuKSB7XHJcbiAgICAgICAgbGV0IG1hcmtpbmdJbnN0cnVjdGlvbjogTWFya2luZ0luc3RydWN0aW9uID0gdGhpcy5tYXJraW5nSW5zdHJ1Y3Rpb25MaXN0LmZpbmQoeCA9PiB4LmRvY3VtZW50SWQgPT09IGRvY3VtZW50SWQpO1xyXG4gICAgICAgIGlmIChtYXJraW5nSW5zdHJ1Y3Rpb24gIT0gbnVsbCAmJiAhcmVhZFN0YXR1cykge1xyXG4gICAgICAgICAgICBtYXJraW5nSW5zdHJ1Y3Rpb24ucmVhZFN0YXR1cyA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuZW1pdChNYXJraW5nSW5zdHJ1Y3Rpb25TdG9yZS5NQVJLSU5HSU5TVFJVQ1RJT05TX0RBVEFfTE9BREVEX0VWRU5UKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxubGV0IGluc3RhbmNlID0gbmV3IE1hcmtpbmdJbnN0cnVjdGlvblN0b3JlKCk7XHJcbmV4cG9ydCA9IHsgTWFya2luZ0luc3RydWN0aW9uU3RvcmUsIGluc3RhbmNlIH07XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vc291cmNlLW1hcC1sb2FkZXIhLi9zcmMvc3RvcmVzL21hcmtpbmdpbnN0cnVjdGlvbi9tYXJraW5naW5zdHJ1Y3Rpb25zdG9yZS50cyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBRUE7QUFLQTs7QUFFQTtBQUNBO0FBQUE7QUFVQTs7QUFFQTtBQUNBO0FBQUE7QUFOQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFLQTtBQUhBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFBQTtBQUtBO0FBSEE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUFBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTVEQTtBQUNBO0FBNERBO0FBQUE7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),

/***/ 539:
/* no static exports found */
/* all exports used */
/*!****************************************************!*\
  !*** ./src/utility/worklist/worklistdatahelper.ts ***!
  \****************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar enums = __webpack_require__(/*! ../../components/utility/enums */ 225);\r\nvar qigStore = __webpack_require__(/*! ../../stores/qigselector/qigstore */ 230);\r\nvar workListStore = __webpack_require__(/*! ../../stores/worklist/workliststore */ 231);\r\nvar targetSummaryStore = __webpack_require__(/*! ../../stores/worklist/targetsummarystore */ 305);\r\nvar targetHelper = __webpack_require__(/*! ../../utility/target/targethelper */ 300);\r\nvar allocateResponseHelper = __webpack_require__(/*! ../../components/utility/responseallocation/allocateresponseshelper */ 495);\r\nvar markerOperationModeFactory = __webpack_require__(/*! ../../components/utility/markeroperationmode/markeroperationmodefactory */ 232);\r\nvar markingStore = __webpack_require__(/*! ../../stores/marking/markingstore */ 236);\r\nvar worklistActioncreator = __webpack_require__(/*! ../../actions/worklist/worklistactioncreator */ 261);\r\nvar navigationStore = __webpack_require__(/*! ../../stores/navigation/navigationstore */ 275);\r\nvar configurableCharacteristicsNames = __webpack_require__(/*! ../../utility/configurablecharacteristic/configurablecharacteristicsnames */ 234);\r\nvar configurableCharacteristicsHelper = __webpack_require__(/*! ../../utility/configurablecharacteristic/configurablecharacteristicshelper */ 233);\r\nvar WorkListDataHelper = /** @class */ (function () {\r\n    function WorkListDataHelper() {\r\n        var _this = this;\r\n        /**\r\n         * Method to invoke the calls to fetch the related data for the:\r\n         * (i) QIG Selected from the QIG Selector list (OR)\r\n         * (ii) QIG Remembered from the User Options\r\n         */\r\n        this.fetchRelatedDataForQIGAfterMarkSchemeStructureAndCC = function (isInTeamManagement) {\r\n            var workListType;\r\n            var remarkRequestTypeID;\r\n            if (qigStore.instance.selectedQIGForMarkerOperation) {\r\n                /* Default response mode */\r\n                var responseMode = workListStore.instance.getResponseMode ?\r\n                    workListStore.instance.getResponseMode : enums.ResponseMode.open;\r\n                var msgId = qigStore.instance.selectedQIGForMarkerOperation.markSchemeGroupId;\r\n                var erId = qigStore.instance.selectedQIGForMarkerOperation.examinerRoleId;\r\n                var qpId = qigStore.instance.selectedQIGForMarkerOperation.questionPaperPartId;\r\n                var currentTarget = targetSummaryStore.instance.getCurrentTarget();\r\n                var examinerQigStatus = targetHelper.getExaminerQigStatus();\r\n                var isElectronicStandardisationTeamMember = qigStore.instance.selectedQIGForMarkerOperation.isElectronicStandardisationTeamMember;\r\n                // If live marking is completed and the marker has open response in other worklist, then navigate to the correspoding worklist.\r\n                if ((examinerQigStatus === enums.ExaminerQIGStatus.LiveComplete\r\n                    || examinerQigStatus === enums.ExaminerQIGStatus.OverAllTargetCompleted)\r\n                    && currentTarget.examinerProgress.openResponsesCount === 0) {\r\n                    var _markingTargetsSummary_1 = targetSummaryStore.instance.getExaminerMarkingTargetProgress();\r\n                    _markingTargetsSummary_1.findEntry(function (markingTarget) {\r\n                        if (markingTarget.examinerProgress.openResponsesCount > 0) {\r\n                            if (markingTarget.markingModeID === enums.MarkingMode.LiveMarking) {\r\n                                workListType = enums.WorklistType.live;\r\n                                return true;\r\n                            }\r\n                            else if (markingTarget.markingModeID === enums.MarkingMode.Remarking\r\n                                && markingTarget.examinerProgress.isDirectedRemark === true) {\r\n                                if (!workListStore.instance.currentWorklistType ||\r\n                                    workListStore.instance.currentWorklistType === enums.WorklistType.none) {\r\n                                    workListType = enums.WorklistType.directedRemark;\r\n                                    remarkRequestTypeID = !workListStore.instance.getRemarkRequestType\r\n                                        || workListStore.instance.getRemarkRequestType ===\r\n                                            enums.RemarkRequestType.Unknown ?\r\n                                        markingTarget.remarkRequestTypeID : workListStore.instance.getRemarkRequestType;\r\n                                }\r\n                                else {\r\n                                    workListType = workListStore.instance.currentWorklistType;\r\n                                }\r\n                                return true;\r\n                            }\r\n                            else if (markingTarget.examinerProgress.atypicalOpenResponsesCount > 0) {\r\n                                workListType = enums.WorklistType.atypical;\r\n                                return true;\r\n                            }\r\n                        }\r\n                    });\r\n                }\r\n                // Check for selected worklist type is disabled.\r\n                var _markingTargetsSummary = targetSummaryStore.instance.getExaminerMarkingTargetProgress();\r\n                var isTargetDisabled = _this.isSelectedWorklistTypeDisabled(_markingTargetsSummary);\r\n                // If worklist type is set in the store, then fetch data related to the worklist type\r\n                // else get data based on marking mode\r\n                if (workListType === undefined) {\r\n                    if (workListStore.instance.currentWorklistType !== undefined &&\r\n                        workListStore.instance.currentWorklistType !== enums.WorklistType.none && !isTargetDisabled) {\r\n                        workListType = workListStore.instance.currentWorklistType;\r\n                    }\r\n                    else {\r\n                        workListType = allocateResponseHelper.getWorkListTypeByMarkingMode(targetHelper.getSelectedQigMarkingMode());\r\n                    }\r\n                }\r\n                var isCurrentlySelectedWorklistIsLive = _this.isLiveWorklist(workListType);\r\n                var remarkRequestType = (remarkRequestTypeID ===\r\n                    (enums.RemarkRequestType.Unknown || undefined)) ? _this.getRemarkRequestType(workListType) : remarkRequestTypeID;\r\n                var isDirectedRemark = (remarkRequestTypeID ===\r\n                    (enums.RemarkRequestType.Unknown || undefined)) ? _this.getIsDirectedRemarkRequestType(workListType) : false;\r\n                if (allocateResponseHelper.isAllocationNeeded() === false || isCurrentlySelectedWorklistIsLive === true) {\r\n                    responseMode = targetSummaryStore.instance.getCurrentResponseMode(targetHelper.getMarkingModeByWorklistType(workListType), workListType, currentTarget.markingModeID);\r\n                    /* Call to get response details to show in worklist */\r\n                    responseMode = markerOperationModeFactory.operationMode.responseModeBasedOnQualityFeedbackForQigSelector(responseMode, targetHelper.getMarkingModeByWorklistType(workListType), remarkRequestType);\r\n                    /* Submitted second standardisation response is not visible in the closed work list while navigating via Menu panel.\r\n                       When we approved the examiner manually.\r\n                       When an examiner is in the Approved Review state and he has also completed the standardization target.\r\n                       But the response not visible in the closed work list while navigating via the menu panel.\r\n                       So set the response mode as 'closed' to show the closed work list while navigating via the menu panel.\r\n                    */\r\n                    if (navigationStore.instance.isFromMenu &&\r\n                        (qigStore.instance.getSelectedQIGForTheLoggedInUser.examinerApprovalStatus === enums.ExaminerApproval.Approved ||\r\n                            qigStore.instance.getSelectedQIGForTheLoggedInUser.examinerApprovalStatus === enums.ExaminerApproval.ApprovedReview)\r\n                        && (workListType === enums.WorklistType.secondstandardisation || workListType === enums.WorklistType.standardisation)\r\n                        && currentTarget.markingModeID === enums.MarkingMode.LiveMarking) {\r\n                        responseMode = enums.ResponseMode.closed;\r\n                    }\r\n                    var useCache = workListStore.instance.getIsResponseClose === true && !markingStore.instance.isMarksSavedToDb\r\n                        && !workListStore.instance.isMessageStatusChanged && !workListStore.instance.isExceptionStatusChanged\r\n                        && !isInTeamManagement;\r\n                    var hasComplexOptionality = configurableCharacteristicsHelper.getCharacteristicValue(configurableCharacteristicsNames.ComplexOptionality, markingStore.instance.selectedQIGMarkSchemeGroupId).toLowerCase() === 'true' ? true : false;\r\n                    worklistActioncreator.notifyWorklistTypeChange(msgId, erId, qpId, workListType, responseMode, remarkRequestType, isDirectedRemark, isElectronicStandardisationTeamMember, useCache, false, hasComplexOptionality);\r\n                }\r\n                else if (isCurrentlySelectedWorklistIsLive === false) {\r\n                    if (!isInTeamManagement) {\r\n                        /* Allocate the practise/standardisation / directed remark responses */\r\n                        allocateResponseHelper.allocateQualificationResponses();\r\n                    }\r\n                    else {\r\n                        /* If marker in TeamManagement drill-down view then we don't need to perform automatic allocation, so we just\r\n                        load the worklist with empty grid */\r\n                        responseMode = targetSummaryStore.instance.getCurrentResponseMode(targetHelper.getMarkingModeByWorklistType(workListType), workListType, currentTarget.markingModeID);\r\n                        worklistActioncreator.notifyWorklistTypeChange(msgId, erId, qpId, workListType, responseMode, remarkRequestType, isDirectedRemark, isElectronicStandardisationTeamMember, false);\r\n                    }\r\n                }\r\n                /* checking whether this call is triggered by response close or not */\r\n                if (workListStore.instance.getIsResponseClose) {\r\n                    responseMode = workListStore.instance.getResponseMode;\r\n                    /* reseting the isResponseClose flag after getting the selected response mode */\r\n                    worklistActioncreator.responseClosed(false);\r\n                }\r\n            }\r\n        };\r\n        /**\r\n         * Get selected worklist type disabled.\r\n         */\r\n        this.isSelectedWorklistTypeDisabled = function (markingTargetSummary) {\r\n            var isTargetDisabled = false;\r\n            var markingModeByWorklistType = targetHelper.getMarkingModeByWorklistType(workListStore.instance.currentWorklistType);\r\n            if (markingModeByWorklistType) {\r\n                var targetByWorklistType = markingTargetSummary.filter(function (target) { return target.markingModeID === markingModeByWorklistType; }).first();\r\n                isTargetDisabled = markerOperationModeFactory.operationMode.isTargetDisabled(targetByWorklistType, undefined);\r\n            }\r\n            return isTargetDisabled;\r\n        };\r\n    }\r\n    /**\r\n     * Check's if worklist is live\r\n     * @param worklistType\r\n     */\r\n    WorkListDataHelper.prototype.isLiveWorklist = function (worklistType) {\r\n        var _isLiveWorklist = false;\r\n        var markingMode = targetHelper.getWorklistTargetToBeSelected(worklistType);\r\n        switch (markingMode) {\r\n            case enums.MarkingMode.LiveMarking:\r\n                _isLiveWorklist = true;\r\n                break;\r\n        }\r\n        return _isLiveWorklist;\r\n    };\r\n    /**\r\n     * Get remark request type\r\n     * @param worklistType\r\n     */\r\n    WorkListDataHelper.prototype.getRemarkRequestType = function (worklistType) {\r\n        return worklistType === enums.WorklistType.directedRemark || worklistType === enums.WorklistType.pooledRemark ?\r\n            workListStore.instance.getRemarkRequestType : enums.RemarkRequestType.Unknown;\r\n    };\r\n    /**\r\n     * Get is directed remark or not\r\n     * @param worklistType\r\n     */\r\n    WorkListDataHelper.prototype.getIsDirectedRemarkRequestType = function (worklistType) {\r\n        if (worklistType === enums.WorklistType.directedRemark) {\r\n            return workListStore.instance.isDirectedRemark ? workListStore.instance.isDirectedRemark : true;\r\n        }\r\n        return false;\r\n    };\r\n    return WorkListDataHelper;\r\n}());\r\nvar instance = new WorkListDataHelper();\r\nmodule.exports = instance;\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTM5LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWxpdHkvd29ya2xpc3Qvd29ya2xpc3RkYXRhaGVscGVyLnRzPzEyM2UiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGVudW1zID0gcmVxdWlyZSgnLi4vLi4vY29tcG9uZW50cy91dGlsaXR5L2VudW1zJyk7XHJcbmltcG9ydCBxaWdTdG9yZSA9IHJlcXVpcmUoJy4uLy4uL3N0b3Jlcy9xaWdzZWxlY3Rvci9xaWdzdG9yZScpO1xyXG5pbXBvcnQgbWFya2luZ1RhcmdldFN1bW1hcnkgPSByZXF1aXJlKCcuLi8uLi9zdG9yZXMvd29ya2xpc3QvdHlwaW5ncy9tYXJraW5ndGFyZ2V0c3VtbWFyeScpO1xyXG5pbXBvcnQgd29ya0xpc3RTdG9yZSA9IHJlcXVpcmUoJy4uLy4uL3N0b3Jlcy93b3JrbGlzdC93b3JrbGlzdHN0b3JlJyk7XHJcbmltcG9ydCB0YXJnZXRTdW1tYXJ5U3RvcmUgPSByZXF1aXJlKCcuLi8uLi9zdG9yZXMvd29ya2xpc3QvdGFyZ2V0c3VtbWFyeXN0b3JlJyk7XHJcbmltcG9ydCB0YXJnZXRIZWxwZXIgPSByZXF1aXJlKCcuLi8uLi91dGlsaXR5L3RhcmdldC90YXJnZXRoZWxwZXInKTtcclxuaW1wb3J0IGFsbG9jYXRlUmVzcG9uc2VIZWxwZXIgPSByZXF1aXJlKCcuLi8uLi9jb21wb25lbnRzL3V0aWxpdHkvcmVzcG9uc2VhbGxvY2F0aW9uL2FsbG9jYXRlcmVzcG9uc2VzaGVscGVyJyk7XHJcbmltcG9ydCBtYXJrZXJPcGVyYXRpb25Nb2RlRmFjdG9yeSA9IHJlcXVpcmUoJy4uLy4uL2NvbXBvbmVudHMvdXRpbGl0eS9tYXJrZXJvcGVyYXRpb25tb2RlL21hcmtlcm9wZXJhdGlvbm1vZGVmYWN0b3J5Jyk7XHJcbmltcG9ydCBtYXJraW5nU3RvcmUgPSByZXF1aXJlKCcuLi8uLi9zdG9yZXMvbWFya2luZy9tYXJraW5nc3RvcmUnKTtcclxuaW1wb3J0IHdvcmtsaXN0QWN0aW9uY3JlYXRvciA9IHJlcXVpcmUoJy4uLy4uL2FjdGlvbnMvd29ya2xpc3Qvd29ya2xpc3RhY3Rpb25jcmVhdG9yJyk7XHJcbmltcG9ydCBtYXJrZXJQcm9ncmVzc0RhdGEgPSByZXF1aXJlKCcuLi8uLi9zdG9yZXMvd29ya2xpc3QvdHlwaW5ncy9tYXJrZXJwcm9ncmVzc2RhdGEnKTtcclxuaW1wb3J0IG5hdmlnYXRpb25TdG9yZSA9IHJlcXVpcmUoJy4uLy4uL3N0b3Jlcy9uYXZpZ2F0aW9uL25hdmlnYXRpb25zdG9yZScpO1xyXG5pbXBvcnQgY29uZmlndXJhYmxlQ2hhcmFjdGVyaXN0aWNzTmFtZXMgPSByZXF1aXJlKCcuLi8uLi91dGlsaXR5L2NvbmZpZ3VyYWJsZWNoYXJhY3RlcmlzdGljL2NvbmZpZ3VyYWJsZWNoYXJhY3RlcmlzdGljc25hbWVzJyk7XHJcbmltcG9ydCBjb25maWd1cmFibGVDaGFyYWN0ZXJpc3RpY3NIZWxwZXIgPSByZXF1aXJlKCcuLi8uLi91dGlsaXR5L2NvbmZpZ3VyYWJsZWNoYXJhY3RlcmlzdGljL2NvbmZpZ3VyYWJsZWNoYXJhY3RlcmlzdGljc2hlbHBlcicpO1xyXG5cclxuY2xhc3MgV29ya0xpc3REYXRhSGVscGVyIHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIE1ldGhvZCB0byBpbnZva2UgdGhlIGNhbGxzIHRvIGZldGNoIHRoZSByZWxhdGVkIGRhdGEgZm9yIHRoZTpcclxuICAgICAqIChpKSBRSUcgU2VsZWN0ZWQgZnJvbSB0aGUgUUlHIFNlbGVjdG9yIGxpc3QgKE9SKVxyXG4gICAgICogKGlpKSBRSUcgUmVtZW1iZXJlZCBmcm9tIHRoZSBVc2VyIE9wdGlvbnNcclxuICAgICAqL1xyXG4gICAgcHVibGljIGZldGNoUmVsYXRlZERhdGFGb3JRSUdBZnRlck1hcmtTY2hlbWVTdHJ1Y3R1cmVBbmRDQyA9IChpc0luVGVhbU1hbmFnZW1lbnQ6IGJvb2xlYW4pID0+IHtcclxuICAgICAgICBsZXQgd29ya0xpc3RUeXBlOiBlbnVtcy5Xb3JrbGlzdFR5cGU7XHJcbiAgICAgICAgbGV0IHJlbWFya1JlcXVlc3RUeXBlSUQ6IGVudW1zLlJlbWFya1JlcXVlc3RUeXBlO1xyXG4gICAgICAgIGlmIChxaWdTdG9yZS5pbnN0YW5jZS5zZWxlY3RlZFFJR0Zvck1hcmtlck9wZXJhdGlvbikge1xyXG4gICAgICAgICAgICAvKiBEZWZhdWx0IHJlc3BvbnNlIG1vZGUgKi9cclxuICAgICAgICAgICAgbGV0IHJlc3BvbnNlTW9kZSA9IHdvcmtMaXN0U3RvcmUuaW5zdGFuY2UuZ2V0UmVzcG9uc2VNb2RlID9cclxuICAgICAgICAgICAgICAgIHdvcmtMaXN0U3RvcmUuaW5zdGFuY2UuZ2V0UmVzcG9uc2VNb2RlIDogZW51bXMuUmVzcG9uc2VNb2RlLm9wZW47XHJcbiAgICAgICAgICAgIGxldCBtc2dJZCA9IHFpZ1N0b3JlLmluc3RhbmNlLnNlbGVjdGVkUUlHRm9yTWFya2VyT3BlcmF0aW9uLm1hcmtTY2hlbWVHcm91cElkO1xyXG4gICAgICAgICAgICBsZXQgZXJJZCA9IHFpZ1N0b3JlLmluc3RhbmNlLnNlbGVjdGVkUUlHRm9yTWFya2VyT3BlcmF0aW9uLmV4YW1pbmVyUm9sZUlkO1xyXG4gICAgICAgICAgICBsZXQgcXBJZCA9IHFpZ1N0b3JlLmluc3RhbmNlLnNlbGVjdGVkUUlHRm9yTWFya2VyT3BlcmF0aW9uLnF1ZXN0aW9uUGFwZXJQYXJ0SWQ7XHJcbiAgICAgICAgICAgIGxldCBjdXJyZW50VGFyZ2V0OiBtYXJraW5nVGFyZ2V0U3VtbWFyeSA9IHRhcmdldFN1bW1hcnlTdG9yZS5pbnN0YW5jZS5nZXRDdXJyZW50VGFyZ2V0KCk7XHJcbiAgICAgICAgICAgIGxldCBleGFtaW5lclFpZ1N0YXR1czogZW51bXMuRXhhbWluZXJRSUdTdGF0dXMgPSB0YXJnZXRIZWxwZXIuZ2V0RXhhbWluZXJRaWdTdGF0dXMoKTtcclxuICAgICAgICAgICAgbGV0IGlzRWxlY3Ryb25pY1N0YW5kYXJkaXNhdGlvblRlYW1NZW1iZXIgPVxyXG4gICAgICAgICAgICAgICAgcWlnU3RvcmUuaW5zdGFuY2Uuc2VsZWN0ZWRRSUdGb3JNYXJrZXJPcGVyYXRpb24uaXNFbGVjdHJvbmljU3RhbmRhcmRpc2F0aW9uVGVhbU1lbWJlcjtcclxuXHJcbiAgICAgICAgICAgIC8vIElmIGxpdmUgbWFya2luZyBpcyBjb21wbGV0ZWQgYW5kIHRoZSBtYXJrZXIgaGFzIG9wZW4gcmVzcG9uc2UgaW4gb3RoZXIgd29ya2xpc3QsIHRoZW4gbmF2aWdhdGUgdG8gdGhlIGNvcnJlc3BvZGluZyB3b3JrbGlzdC5cclxuICAgICAgICAgICAgaWYgKChleGFtaW5lclFpZ1N0YXR1cyA9PT0gZW51bXMuRXhhbWluZXJRSUdTdGF0dXMuTGl2ZUNvbXBsZXRlXHJcbiAgICAgICAgICAgICAgICB8fCBleGFtaW5lclFpZ1N0YXR1cyA9PT0gZW51bXMuRXhhbWluZXJRSUdTdGF0dXMuT3ZlckFsbFRhcmdldENvbXBsZXRlZClcclxuICAgICAgICAgICAgICAgICYmIGN1cnJlbnRUYXJnZXQuZXhhbWluZXJQcm9ncmVzcy5vcGVuUmVzcG9uc2VzQ291bnQgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIGxldCBfbWFya2luZ1RhcmdldHNTdW1tYXJ5OiBJbW11dGFibGUuTGlzdDxtYXJraW5nVGFyZ2V0U3VtbWFyeT4gPVxyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldFN1bW1hcnlTdG9yZS5pbnN0YW5jZS5nZXRFeGFtaW5lck1hcmtpbmdUYXJnZXRQcm9ncmVzcygpO1xyXG4gICAgICAgICAgICAgICAgX21hcmtpbmdUYXJnZXRzU3VtbWFyeS5maW5kRW50cnkoKG1hcmtpbmdUYXJnZXQ6IG1hcmtpbmdUYXJnZXRTdW1tYXJ5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1hcmtpbmdUYXJnZXQuZXhhbWluZXJQcm9ncmVzcy5vcGVuUmVzcG9uc2VzQ291bnQgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXJraW5nVGFyZ2V0Lm1hcmtpbmdNb2RlSUQgPT09IGVudW1zLk1hcmtpbmdNb2RlLkxpdmVNYXJraW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3b3JrTGlzdFR5cGUgPSBlbnVtcy5Xb3JrbGlzdFR5cGUubGl2ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG1hcmtpbmdUYXJnZXQubWFya2luZ01vZGVJRCA9PT0gZW51bXMuTWFya2luZ01vZGUuUmVtYXJraW5nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiBtYXJraW5nVGFyZ2V0LmV4YW1pbmVyUHJvZ3Jlc3MuaXNEaXJlY3RlZFJlbWFyayA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF3b3JrTGlzdFN0b3JlLmluc3RhbmNlLmN1cnJlbnRXb3JrbGlzdFR5cGUgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3b3JrTGlzdFN0b3JlLmluc3RhbmNlLmN1cnJlbnRXb3JrbGlzdFR5cGUgYXMgZW51bXMuV29ya2xpc3RUeXBlID09PSBlbnVtcy5Xb3JrbGlzdFR5cGUubm9uZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdvcmtMaXN0VHlwZSA9IGVudW1zLldvcmtsaXN0VHlwZS5kaXJlY3RlZFJlbWFyaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1hcmtSZXF1ZXN0VHlwZUlEID0gIXdvcmtMaXN0U3RvcmUuaW5zdGFuY2UuZ2V0UmVtYXJrUmVxdWVzdFR5cGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfHwgd29ya0xpc3RTdG9yZS5pbnN0YW5jZS5nZXRSZW1hcmtSZXF1ZXN0VHlwZSBhcyBlbnVtcy5SZW1hcmtSZXF1ZXN0VHlwZSA9PT1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW51bXMuUmVtYXJrUmVxdWVzdFR5cGUuVW5rbm93biA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtpbmdUYXJnZXQucmVtYXJrUmVxdWVzdFR5cGVJRCA6IHdvcmtMaXN0U3RvcmUuaW5zdGFuY2UuZ2V0UmVtYXJrUmVxdWVzdFR5cGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdvcmtMaXN0VHlwZSA9IHdvcmtMaXN0U3RvcmUuaW5zdGFuY2UuY3VycmVudFdvcmtsaXN0VHlwZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG1hcmtpbmdUYXJnZXQuZXhhbWluZXJQcm9ncmVzcy5hdHlwaWNhbE9wZW5SZXNwb25zZXNDb3VudCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdvcmtMaXN0VHlwZSA9IGVudW1zLldvcmtsaXN0VHlwZS5hdHlwaWNhbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIENoZWNrIGZvciBzZWxlY3RlZCB3b3JrbGlzdCB0eXBlIGlzIGRpc2FibGVkLlxyXG4gICAgICAgICAgICBsZXQgX21hcmtpbmdUYXJnZXRzU3VtbWFyeTogSW1tdXRhYmxlLkxpc3Q8bWFya2luZ1RhcmdldFN1bW1hcnk+ID1cclxuICAgICAgICAgICAgICAgIHRhcmdldFN1bW1hcnlTdG9yZS5pbnN0YW5jZS5nZXRFeGFtaW5lck1hcmtpbmdUYXJnZXRQcm9ncmVzcygpO1xyXG4gICAgICAgICAgICBsZXQgaXNUYXJnZXREaXNhYmxlZDogYm9vbGVhbiA9IHRoaXMuaXNTZWxlY3RlZFdvcmtsaXN0VHlwZURpc2FibGVkKF9tYXJraW5nVGFyZ2V0c1N1bW1hcnkpO1xyXG4gICAgICAgICAgICAvLyBJZiB3b3JrbGlzdCB0eXBlIGlzIHNldCBpbiB0aGUgc3RvcmUsIHRoZW4gZmV0Y2ggZGF0YSByZWxhdGVkIHRvIHRoZSB3b3JrbGlzdCB0eXBlXHJcbiAgICAgICAgICAgIC8vIGVsc2UgZ2V0IGRhdGEgYmFzZWQgb24gbWFya2luZyBtb2RlXHJcbiAgICAgICAgICAgIGlmICh3b3JrTGlzdFR5cGUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHdvcmtMaXN0U3RvcmUuaW5zdGFuY2UuY3VycmVudFdvcmtsaXN0VHlwZSAhPT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgICAgICAgICAgICAgd29ya0xpc3RTdG9yZS5pbnN0YW5jZS5jdXJyZW50V29ya2xpc3RUeXBlICE9PSBlbnVtcy5Xb3JrbGlzdFR5cGUubm9uZSAmJiAhaXNUYXJnZXREaXNhYmxlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHdvcmtMaXN0VHlwZSA9IHdvcmtMaXN0U3RvcmUuaW5zdGFuY2UuY3VycmVudFdvcmtsaXN0VHlwZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd29ya0xpc3RUeXBlID0gYWxsb2NhdGVSZXNwb25zZUhlbHBlci5nZXRXb3JrTGlzdFR5cGVCeU1hcmtpbmdNb2RlKHRhcmdldEhlbHBlci5nZXRTZWxlY3RlZFFpZ01hcmtpbmdNb2RlKCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGxldCBpc0N1cnJlbnRseVNlbGVjdGVkV29ya2xpc3RJc0xpdmU6IGJvb2xlYW4gPSB0aGlzLmlzTGl2ZVdvcmtsaXN0KHdvcmtMaXN0VHlwZSk7XHJcbiAgICAgICAgICAgIGxldCByZW1hcmtSZXF1ZXN0VHlwZTogZW51bXMuUmVtYXJrUmVxdWVzdFR5cGUgPSAocmVtYXJrUmVxdWVzdFR5cGVJRCA9PT1cclxuICAgICAgICAgICAgICAgIChlbnVtcy5SZW1hcmtSZXF1ZXN0VHlwZS5Vbmtub3duIHx8IHVuZGVmaW5lZCkpID8gdGhpcy5nZXRSZW1hcmtSZXF1ZXN0VHlwZSh3b3JrTGlzdFR5cGUpIDogcmVtYXJrUmVxdWVzdFR5cGVJRDtcclxuXHJcbiAgICAgICAgICAgIGxldCBpc0RpcmVjdGVkUmVtYXJrOiBib29sZWFuID0gKHJlbWFya1JlcXVlc3RUeXBlSUQgPT09XHJcbiAgICAgICAgICAgICAgICAoZW51bXMuUmVtYXJrUmVxdWVzdFR5cGUuVW5rbm93biB8fCB1bmRlZmluZWQpKSA/IHRoaXMuZ2V0SXNEaXJlY3RlZFJlbWFya1JlcXVlc3RUeXBlKHdvcmtMaXN0VHlwZSkgOiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIGlmIChhbGxvY2F0ZVJlc3BvbnNlSGVscGVyLmlzQWxsb2NhdGlvbk5lZWRlZCgpID09PSBmYWxzZSB8fCBpc0N1cnJlbnRseVNlbGVjdGVkV29ya2xpc3RJc0xpdmUgPT09IHRydWUpIHtcclxuXHJcbiAgICAgICAgICAgICAgICByZXNwb25zZU1vZGUgPSB0YXJnZXRTdW1tYXJ5U3RvcmUuaW5zdGFuY2UuZ2V0Q3VycmVudFJlc3BvbnNlTW9kZVxyXG4gICAgICAgICAgICAgICAgICAgICh0YXJnZXRIZWxwZXIuZ2V0TWFya2luZ01vZGVCeVdvcmtsaXN0VHlwZSh3b3JrTGlzdFR5cGUpLCB3b3JrTGlzdFR5cGUsIGN1cnJlbnRUYXJnZXQubWFya2luZ01vZGVJRCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLyogQ2FsbCB0byBnZXQgcmVzcG9uc2UgZGV0YWlscyB0byBzaG93IGluIHdvcmtsaXN0ICovXHJcbiAgICAgICAgICAgICAgICByZXNwb25zZU1vZGUgPSBtYXJrZXJPcGVyYXRpb25Nb2RlRmFjdG9yeS5vcGVyYXRpb25Nb2RlLnJlc3BvbnNlTW9kZUJhc2VkT25RdWFsaXR5RmVlZGJhY2tGb3JRaWdTZWxlY3RvcihyZXNwb25zZU1vZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0SGVscGVyLmdldE1hcmtpbmdNb2RlQnlXb3JrbGlzdFR5cGUod29ya0xpc3RUeXBlKSwgcmVtYXJrUmVxdWVzdFR5cGUpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8qIFN1Ym1pdHRlZCBzZWNvbmQgc3RhbmRhcmRpc2F0aW9uIHJlc3BvbnNlIGlzIG5vdCB2aXNpYmxlIGluIHRoZSBjbG9zZWQgd29yayBsaXN0IHdoaWxlIG5hdmlnYXRpbmcgdmlhIE1lbnUgcGFuZWwuXHJcbiAgICAgICAgICAgICAgICAgICBXaGVuIHdlIGFwcHJvdmVkIHRoZSBleGFtaW5lciBtYW51YWxseS5cclxuICAgICAgICAgICAgICAgICAgIFdoZW4gYW4gZXhhbWluZXIgaXMgaW4gdGhlIEFwcHJvdmVkIFJldmlldyBzdGF0ZSBhbmQgaGUgaGFzIGFsc28gY29tcGxldGVkIHRoZSBzdGFuZGFyZGl6YXRpb24gdGFyZ2V0LlxyXG4gICAgICAgICAgICAgICAgICAgQnV0IHRoZSByZXNwb25zZSBub3QgdmlzaWJsZSBpbiB0aGUgY2xvc2VkIHdvcmsgbGlzdCB3aGlsZSBuYXZpZ2F0aW5nIHZpYSB0aGUgbWVudSBwYW5lbC5cclxuICAgICAgICAgICAgICAgICAgIFNvIHNldCB0aGUgcmVzcG9uc2UgbW9kZSBhcyAnY2xvc2VkJyB0byBzaG93IHRoZSBjbG9zZWQgd29yayBsaXN0IHdoaWxlIG5hdmlnYXRpbmcgdmlhIHRoZSBtZW51IHBhbmVsLlxyXG4gICAgICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgICAgIGlmIChuYXZpZ2F0aW9uU3RvcmUuaW5zdGFuY2UuaXNGcm9tTWVudSAmJlxyXG4gICAgICAgICAgICAgICAgICAgIChxaWdTdG9yZS5pbnN0YW5jZS5nZXRTZWxlY3RlZFFJR0ZvclRoZUxvZ2dlZEluVXNlci5leGFtaW5lckFwcHJvdmFsU3RhdHVzID09PSBlbnVtcy5FeGFtaW5lckFwcHJvdmFsLkFwcHJvdmVkIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgIHFpZ1N0b3JlLmluc3RhbmNlLmdldFNlbGVjdGVkUUlHRm9yVGhlTG9nZ2VkSW5Vc2VyLmV4YW1pbmVyQXBwcm92YWxTdGF0dXMgPT09IGVudW1zLkV4YW1pbmVyQXBwcm92YWwuQXBwcm92ZWRSZXZpZXcpXHJcbiAgICAgICAgICAgICAgICAgICAgJiYgKHdvcmtMaXN0VHlwZSA9PT0gZW51bXMuV29ya2xpc3RUeXBlLnNlY29uZHN0YW5kYXJkaXNhdGlvbiB8fCB3b3JrTGlzdFR5cGUgPT09IGVudW1zLldvcmtsaXN0VHlwZS5zdGFuZGFyZGlzYXRpb24pXHJcbiAgICAgICAgICAgICAgICAgICAgJiYgY3VycmVudFRhcmdldC5tYXJraW5nTW9kZUlEID09PSBlbnVtcy5NYXJraW5nTW9kZS5MaXZlTWFya2luZykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlTW9kZSA9IGVudW1zLlJlc3BvbnNlTW9kZS5jbG9zZWQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IHVzZUNhY2hlOiBib29sZWFuID0gd29ya0xpc3RTdG9yZS5pbnN0YW5jZS5nZXRJc1Jlc3BvbnNlQ2xvc2UgPT09IHRydWUgJiYgIW1hcmtpbmdTdG9yZS5pbnN0YW5jZS5pc01hcmtzU2F2ZWRUb0RiXHJcbiAgICAgICAgICAgICAgICAgICAgJiYgIXdvcmtMaXN0U3RvcmUuaW5zdGFuY2UuaXNNZXNzYWdlU3RhdHVzQ2hhbmdlZCAmJiAhd29ya0xpc3RTdG9yZS5pbnN0YW5jZS5pc0V4Y2VwdGlvblN0YXR1c0NoYW5nZWRcclxuICAgICAgICAgICAgICAgICAgICAmJiAhaXNJblRlYW1NYW5hZ2VtZW50O1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBoYXNDb21wbGV4T3B0aW9uYWxpdHkgPSBjb25maWd1cmFibGVDaGFyYWN0ZXJpc3RpY3NIZWxwZXIuZ2V0Q2hhcmFjdGVyaXN0aWNWYWx1ZShcclxuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGVDaGFyYWN0ZXJpc3RpY3NOYW1lcy5Db21wbGV4T3B0aW9uYWxpdHksXHJcbiAgICAgICAgICAgICAgICAgICAgbWFya2luZ1N0b3JlLmluc3RhbmNlLnNlbGVjdGVkUUlHTWFya1NjaGVtZUdyb3VwSWQpLnRvTG93ZXJDYXNlKCkgPT09ICd0cnVlJyA/IHRydWUgOiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHdvcmtsaXN0QWN0aW9uY3JlYXRvci5ub3RpZnlXb3JrbGlzdFR5cGVDaGFuZ2VcclxuICAgICAgICAgICAgICAgICAgICAobXNnSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgZXJJZCxcclxuICAgICAgICAgICAgICAgICAgICBxcElkLFxyXG4gICAgICAgICAgICAgICAgICAgIHdvcmtMaXN0VHlwZSxcclxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZU1vZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgcmVtYXJrUmVxdWVzdFR5cGUsXHJcbiAgICAgICAgICAgICAgICAgICAgaXNEaXJlY3RlZFJlbWFyayxcclxuICAgICAgICAgICAgICAgICAgICBpc0VsZWN0cm9uaWNTdGFuZGFyZGlzYXRpb25UZWFtTWVtYmVyLFxyXG4gICAgICAgICAgICAgICAgICAgIHVzZUNhY2hlLFxyXG4gICAgICAgICAgICAgICAgICAgIGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGhhc0NvbXBsZXhPcHRpb25hbGl0eSk7XHJcblxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlzQ3VycmVudGx5U2VsZWN0ZWRXb3JrbGlzdElzTGl2ZSA9PT0gZmFsc2UpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIWlzSW5UZWFtTWFuYWdlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8qIEFsbG9jYXRlIHRoZSBwcmFjdGlzZS9zdGFuZGFyZGlzYXRpb24gLyBkaXJlY3RlZCByZW1hcmsgcmVzcG9uc2VzICovXHJcbiAgICAgICAgICAgICAgICAgICAgYWxsb2NhdGVSZXNwb25zZUhlbHBlci5hbGxvY2F0ZVF1YWxpZmljYXRpb25SZXNwb25zZXMoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLyogSWYgbWFya2VyIGluIFRlYW1NYW5hZ2VtZW50IGRyaWxsLWRvd24gdmlldyB0aGVuIHdlIGRvbid0IG5lZWQgdG8gcGVyZm9ybSBhdXRvbWF0aWMgYWxsb2NhdGlvbiwgc28gd2UganVzdFxyXG4gICAgICAgICAgICAgICAgICAgIGxvYWQgdGhlIHdvcmtsaXN0IHdpdGggZW1wdHkgZ3JpZCAqL1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlTW9kZSA9IHRhcmdldFN1bW1hcnlTdG9yZS5pbnN0YW5jZS5nZXRDdXJyZW50UmVzcG9uc2VNb2RlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICh0YXJnZXRIZWxwZXIuZ2V0TWFya2luZ01vZGVCeVdvcmtsaXN0VHlwZSh3b3JrTGlzdFR5cGUpLCB3b3JrTGlzdFR5cGUsIGN1cnJlbnRUYXJnZXQubWFya2luZ01vZGVJRCk7XHJcbiAgICAgICAgICAgICAgICAgICAgd29ya2xpc3RBY3Rpb25jcmVhdG9yLm5vdGlmeVdvcmtsaXN0VHlwZUNoYW5nZShtc2dJZCwgZXJJZCwgcXBJZCwgd29ya0xpc3RUeXBlLCByZXNwb25zZU1vZGUsIHJlbWFya1JlcXVlc3RUeXBlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0RpcmVjdGVkUmVtYXJrLCBpc0VsZWN0cm9uaWNTdGFuZGFyZGlzYXRpb25UZWFtTWVtYmVyLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8qIGNoZWNraW5nIHdoZXRoZXIgdGhpcyBjYWxsIGlzIHRyaWdnZXJlZCBieSByZXNwb25zZSBjbG9zZSBvciBub3QgKi9cclxuICAgICAgICAgICAgaWYgKHdvcmtMaXN0U3RvcmUuaW5zdGFuY2UuZ2V0SXNSZXNwb25zZUNsb3NlKSB7XHJcbiAgICAgICAgICAgICAgICByZXNwb25zZU1vZGUgPSB3b3JrTGlzdFN0b3JlLmluc3RhbmNlLmdldFJlc3BvbnNlTW9kZTtcclxuICAgICAgICAgICAgICAgIC8qIHJlc2V0aW5nIHRoZSBpc1Jlc3BvbnNlQ2xvc2UgZmxhZyBhZnRlciBnZXR0aW5nIHRoZSBzZWxlY3RlZCByZXNwb25zZSBtb2RlICovXHJcbiAgICAgICAgICAgICAgICB3b3JrbGlzdEFjdGlvbmNyZWF0b3IucmVzcG9uc2VDbG9zZWQoZmFsc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENoZWNrJ3MgaWYgd29ya2xpc3QgaXMgbGl2ZVxyXG4gICAgICogQHBhcmFtIHdvcmtsaXN0VHlwZVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGlzTGl2ZVdvcmtsaXN0KHdvcmtsaXN0VHlwZTogZW51bXMuV29ya2xpc3RUeXBlKSB7XHJcbiAgICAgICAgbGV0IF9pc0xpdmVXb3JrbGlzdDogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICAgICAgICBsZXQgbWFya2luZ01vZGU6IGVudW1zLk1hcmtpbmdNb2RlID0gdGFyZ2V0SGVscGVyLmdldFdvcmtsaXN0VGFyZ2V0VG9CZVNlbGVjdGVkKHdvcmtsaXN0VHlwZSk7XHJcblxyXG4gICAgICAgIHN3aXRjaCAobWFya2luZ01vZGUpIHtcclxuICAgICAgICAgICAgY2FzZSBlbnVtcy5NYXJraW5nTW9kZS5MaXZlTWFya2luZzpcclxuICAgICAgICAgICAgICAgIF9pc0xpdmVXb3JrbGlzdCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBfaXNMaXZlV29ya2xpc3Q7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgcmVtYXJrIHJlcXVlc3QgdHlwZVxyXG4gICAgICogQHBhcmFtIHdvcmtsaXN0VHlwZVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGdldFJlbWFya1JlcXVlc3RUeXBlKHdvcmtsaXN0VHlwZTogZW51bXMuV29ya2xpc3RUeXBlKTogZW51bXMuUmVtYXJrUmVxdWVzdFR5cGUge1xyXG4gICAgICAgIHJldHVybiB3b3JrbGlzdFR5cGUgPT09IGVudW1zLldvcmtsaXN0VHlwZS5kaXJlY3RlZFJlbWFyayB8fCB3b3JrbGlzdFR5cGUgPT09IGVudW1zLldvcmtsaXN0VHlwZS5wb29sZWRSZW1hcmsgP1xyXG4gICAgICAgICAgICB3b3JrTGlzdFN0b3JlLmluc3RhbmNlLmdldFJlbWFya1JlcXVlc3RUeXBlIDogZW51bXMuUmVtYXJrUmVxdWVzdFR5cGUuVW5rbm93bjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBpcyBkaXJlY3RlZCByZW1hcmsgb3Igbm90XHJcbiAgICAgKiBAcGFyYW0gd29ya2xpc3RUeXBlXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZ2V0SXNEaXJlY3RlZFJlbWFya1JlcXVlc3RUeXBlKHdvcmtsaXN0VHlwZTogZW51bXMuV29ya2xpc3RUeXBlKTogYm9vbGVhbiB7XHJcbiAgICAgICAgaWYgKHdvcmtsaXN0VHlwZSA9PT0gZW51bXMuV29ya2xpc3RUeXBlLmRpcmVjdGVkUmVtYXJrKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB3b3JrTGlzdFN0b3JlLmluc3RhbmNlLmlzRGlyZWN0ZWRSZW1hcmsgPyB3b3JrTGlzdFN0b3JlLmluc3RhbmNlLmlzRGlyZWN0ZWRSZW1hcmsgOiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgc2VsZWN0ZWQgd29ya2xpc3QgdHlwZSBkaXNhYmxlZC5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBpc1NlbGVjdGVkV29ya2xpc3RUeXBlRGlzYWJsZWQgPSAobWFya2luZ1RhcmdldFN1bW1hcnk6IEltbXV0YWJsZS5MaXN0PG1hcmtpbmdUYXJnZXRTdW1tYXJ5Pik6IGJvb2xlYW4gPT4ge1xyXG4gICAgICAgIGxldCBpc1RhcmdldERpc2FibGVkOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICAgICAgbGV0IG1hcmtpbmdNb2RlQnlXb3JrbGlzdFR5cGU6IGVudW1zLk1hcmtpbmdNb2RlID1cclxuICAgICAgICAgICAgdGFyZ2V0SGVscGVyLmdldE1hcmtpbmdNb2RlQnlXb3JrbGlzdFR5cGUod29ya0xpc3RTdG9yZS5pbnN0YW5jZS5jdXJyZW50V29ya2xpc3RUeXBlKTtcclxuICAgICAgICBpZiAobWFya2luZ01vZGVCeVdvcmtsaXN0VHlwZSkge1xyXG4gICAgICAgICAgICBsZXQgdGFyZ2V0QnlXb3JrbGlzdFR5cGU6IGFueSA9XHJcbiAgICAgICAgICAgICAgICBtYXJraW5nVGFyZ2V0U3VtbWFyeS5maWx0ZXIodGFyZ2V0ID0+IHRhcmdldC5tYXJraW5nTW9kZUlEID09PSBtYXJraW5nTW9kZUJ5V29ya2xpc3RUeXBlKS5maXJzdCgpO1xyXG4gICAgICAgICAgICBpc1RhcmdldERpc2FibGVkID0gbWFya2VyT3BlcmF0aW9uTW9kZUZhY3Rvcnkub3BlcmF0aW9uTW9kZS5pc1RhcmdldERpc2FibGVkKHRhcmdldEJ5V29ya2xpc3RUeXBlLCB1bmRlZmluZWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaXNUYXJnZXREaXNhYmxlZDtcclxuICAgIH1cclxufVxyXG5cclxubGV0IGluc3RhbmNlID0gbmV3IFdvcmtMaXN0RGF0YUhlbHBlcigpO1xyXG5leHBvcnQgPSBpbnN0YW5jZTtcclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9zb3VyY2UtbWFwLWxvYWRlciEuL3NyYy91dGlsaXR5L3dvcmtsaXN0L3dvcmtsaXN0ZGF0YWhlbHBlci50cyJdLCJtYXBwaW5ncyI6IjtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUVBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUdBO0FBQ0E7QUFHQTs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQWFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXdDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBcERBOzs7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFnQkE7QUFBQTtBQUVBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9");

/***/ }),

/***/ 597:
/* no static exports found */
/* all exports used */
/*!**********************************************!*\
  !*** ./src/components/worklist/worklist.tsx ***!
  \**********************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("/* WEBPACK VAR INJECTION */(function($) {\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n/* tslint:disable:no-unused-variable */\r\n/** Add new dependencies in loadDependencies() method unless your dependencies are not using in constructor */\r\nvar React = __webpack_require__(/*! react */ 0);\r\n/* tslint:enable:no-unused-variable */\r\nvar pureRenderComponent = __webpack_require__(/*! ../base/purerendercomponent */ 227);\r\nvar configurableCharacteristicsNames = __webpack_require__(/*! ../../utility/configurablecharacteristic/configurablecharacteristicsnames */ 234);\r\nvar configurableCharacteristicsHelper = __webpack_require__(/*! ../../utility/configurablecharacteristic/configurablecharacteristicshelper */ 233);\r\nvar enums = __webpack_require__(/*! ../utility/enums */ 225);\r\nvar Header = __webpack_require__(/*! ../header */ 337);\r\nvar allocateResponseHelper = __webpack_require__(/*! ../utility/responseallocation/allocateresponseshelper */ 495);\r\nvar markerInformationActionCreator = __webpack_require__(/*! ../../actions/markerinformation/markerinformationactioncreator */ 381);\r\nvar responseActionCreator = __webpack_require__(/*! ../../actions/response/responseactioncreator */ 257);\r\nvar BusyIndicator = __webpack_require__(/*! ../utility/busyindicator/busyindicator */ 312);\r\nvar navigationHelper = __webpack_require__(/*! ../utility/navigation/navigationhelper */ 248);\r\nvar Promise = __webpack_require__(/*! es6-promise */ 41);\r\nvar userOptionsHelper = __webpack_require__(/*! ../../utility/useroption/useroptionshelper */ 265);\r\nvar useroptionKeys = __webpack_require__(/*! ../../utility/useroption/useroptionkeys */ 264);\r\nvar userOptionsStore = __webpack_require__(/*! ../../stores/useroption/useroptionstore */ 302);\r\nvar stringHelper = __webpack_require__(/*! ../../utility/generic/stringhelper */ 254);\r\nvar ccStore = __webpack_require__(/*! ../../stores/configurablecharacteristics/configurablecharacteristicsstore */ 341);\r\nvar MarkingInstructionPanel = __webpack_require__(/*! ./markerinformation/markinginstructionpanel */ 1219);\r\nvar urls = __webpack_require__(/*! ../../dataservices/base/urls */ 266);\r\nvar MultiOptionConfirmationDialog = __webpack_require__(/*! ../utility/multioptionconfirmationdialog */ 338);\r\nvar storageAdapterHelper = __webpack_require__(/*! ../../dataservices/storageadapters/storageadapterhelper */ 269);\r\nvar responseHelper = __webpack_require__(/*! ../utility/responsehelper/responsehelper */ 249);\r\nvar markSchemeHelper = __webpack_require__(/*! ../../utility/markscheme/markschemehelper */ 276);\r\nvar dataServiceHelper = __webpack_require__(/*! ../../utility/generic/dataservicehelper */ 433);\r\nvar workListDataHelper = __webpack_require__(/*! ../../utility/worklist/worklistdatahelper */ 539);\r\nvar markerOperationModeFactory = __webpack_require__(/*! ../utility/markeroperationmode/markeroperationmodefactory */ 232);\r\nvar teamManagementAuditHelper = __webpack_require__(/*! ../utility/teammanagement/teammanagementlogginghelper */ 528);\r\nvar loggerConstants = __webpack_require__(/*! ../utility/loggerhelperconstants */ 322);\r\nvar eCourseworkHelper = __webpack_require__(/*! ../utility/ecoursework/ecourseworkhelper */ 238);\r\nvar qigSelectorActionCreator = __webpack_require__(/*! ../../actions/qigselector/qigselectoractioncreator */ 253);\r\nvar simulationModeHelper = __webpack_require__(/*! ../../utility/simulation/simulationmodehelper */ 324);\r\nvar applicationStore = __webpack_require__(/*! ../../stores/applicationoffline/applicationstore */ 247);\r\nvar applicationActionCreator = __webpack_require__(/*! ../../actions/applicationoffline/applicationactioncreator */ 256);\r\nvar teamManagementStore = __webpack_require__(/*! ../../stores/teammanagement/teammanagementstore */ 245);\r\nvar htmlviewerhelper = __webpack_require__(/*! ../utility/responsehelper/htmlviewerhelper */ 474);\r\nvar markingInstructionStore = __webpack_require__(/*! ../../stores/markinginstruction/markinginstructionstore */ 532);\r\nvar MarkingInstructionFilePanel = __webpack_require__(/*! ./markerinformation/markinginstructionfilepanel */ 1218);\r\nvar domManager = __webpack_require__(/*! ../../utility/generic/domhelper */ 294);\r\nvar markingInstructioActionCreator = __webpack_require__(/*! ../../actions/markinginstructions/markinginstructionactioncreator */ 476);\r\nvar markingInstructionArg = __webpack_require__(/*! ../../dataservices/markinginstructions/markinginstrcutionargument */ 1262);\r\nvar responseSearchhelper = __webpack_require__(/*! ../../utility/responsesearch/responsesearchhelper */ 321);\r\n/** Add new dependencies in loadDependencies() method unless your dependencies are not using in constructor */\r\n/* tslint:disable:variable-name */\r\nvar MarkerInformationPanel;\r\nvar localeStore;\r\nvar userOptionActionCreator;\r\nvar qigStore;\r\nvar examinerstore;\r\nvar WorkListMessage;\r\nvar ConfirmationDialog;\r\nvar MarkingProgress;\r\nvar stampStore;\r\nvar responseSearchHelper;\r\nvar Targets;\r\nvar overviewData;\r\nvar qigInfo;\r\nvar markingTarget;\r\nvar targetSummaryStore;\r\nvar markingTargetSummary;\r\nvar userOptionStore;\r\nvar WorkListContainer;\r\nvar worklistStore;\r\nvar markSchemeStructureStore;\r\nvar responseStore;\r\nvar worklistActionCreator;\r\nvar GenericDialog;\r\nvar responseAllocationValidationHelper;\r\nvar responseAllocationValidationParameter;\r\nvar classNames;\r\nvar busyIndicatorStore;\r\nvar submitStore;\r\nvar worklistComponentHelper;\r\nvar submitActionCreator;\r\nvar busyIndicatorActionCreator;\r\nvar scriptImageDownloadHelper;\r\nvar scriptActionCreator;\r\nvar scriptStore;\r\nvar scriptImageDownloader;\r\nvar targetHelper;\r\nvar userInfoStore;\r\nvar backgroundPulseHelper;\r\nvar Footer;\r\nvar gaHelper;\r\nvar stampActionCreator;\r\nvar configurableCharacteristicsStore;\r\nvar configurableCharacteristicsActionCreator;\r\nvar qigActionCreator;\r\nvar exceptionActionCreator;\r\nvar exceptionStore;\r\nvar MessagePopup;\r\nvar messageHelper;\r\nvar messagingActionCreator;\r\nvar messageStore;\r\nvar MarkingCheckPopup;\r\nvar stringFormatHelper;\r\nvar htmlUtilities;\r\nvar loadContainerActionCreator;\r\nvar operationModeHelper;\r\nvar teamManagementActionCreator;\r\nvar MarkCheckExaminers;\r\nvar markingCheckActionCreator;\r\nvar userInfoActionCreator;\r\nvar ExaminerStateChangePopup;\r\nvar helpExaminersDataHelper;\r\nvar warningMessageStore;\r\nvar warningMessageNavigationHelper;\r\nvar markingInstructionActionCreator;\r\n/**\r\n * React component for Worklist/Landing\r\n */\r\nvar WorkList = /** @class */ (function (_super) {\r\n    __extends(WorkList, _super);\r\n    /**\r\n     * @constructor\r\n     */\r\n    function WorkList(props, state) {\r\n        var _this = _super.call(this, props, state) || this;\r\n        /** flag to show busy indicator in worklist tabs */\r\n        _this.isRefreshing = false;\r\n        /* has all the data refresh call succeeded set true initially it need only for standardization*/\r\n        _this.isContentRefreshSucceeded = {\r\n            isMarkingProgressCompleted: false,\r\n            isWorklistRefreshCompleted: false\r\n        };\r\n        /* variable to identify whether the exam body CC is loaded or not */\r\n        _this.isExamBodyCCLoaded = false;\r\n        // this variable will hold the message panel visiblity status.\r\n        _this.isMessagePopupVisible = false;\r\n        _this.subject = '';\r\n        _this.priorityDropdownSelectedItem = enums.MessagePriority.Standard;\r\n        _this.qigListItems = new Array();\r\n        _this.isTouchStarted = false;\r\n        _this.isMouseHovered = false;\r\n        _this.storageAdapterHelper = new storageAdapterHelper();\r\n        _this.failureCode = enums.FailureCode.None;\r\n        _this.warningMessageAction = enums.WarningMessageAction.None;\r\n        _this.isSelectedMenuTargetCompleted = false;\r\n        _this.hasTargetFound = true;\r\n        _this.columnLeftScrollWidth = 0;\r\n        _this._boundHandleOnClick = null;\r\n        /**\r\n         * Prepare work list after initialising worklist data\r\n         */\r\n        _this.worklistInitialisationCompleted = function () {\r\n            // load stamps defined for the selected mark scheme groupId\r\n            stampActionCreator.getStampData(qigStore.instance.selectedQIGForMarkerOperation.markSchemeGroupId, stampStore.instance.stampIdsForSelectedQIG, qigStore.instance.selectedQIGForMarkerOperation.markingMethod, responseHelper.isEbookMarking, true);\r\n            if (worklistStore.instance.isMarkingCheckMode) {\r\n                _this.worklistInitialisationCompletedForMarkingCheck();\r\n            }\r\n            else {\r\n                workListDataHelper.fetchRelatedDataForQIGAfterMarkSchemeStructureAndCC(markerOperationModeFactory.operationMode.isTeamManagementMode);\r\n            }\r\n        };\r\n        /**\r\n         * Handles the action when making check worklist is first loaded on 'here' link click\r\n         */\r\n        _this.markCheckExaminersDataRetrived = function () {\r\n            if (!worklistStore.instance.markingCheckExaminersList ||\r\n                worklistStore.instance.markingCheckExaminersList.count() === 0) {\r\n                navigationHelper.handleNavigation(enums.SaveAndNavigate.toWorklist);\r\n            }\r\n            else if (!responseStore.instance.isSearchResponse) {\r\n                _this.isRefreshing = true;\r\n                responseSearchHelper.openQIGDetails(qigStore.instance.selectedQIGForMarkerOperation.questionPaperPartId, qigStore.instance.selectedQIGForMarkerOperation.markSchemeGroupId, worklistStore.instance.selectedMarkingCheckExaminer.examinerRoleID, false, examinerstore.instance.examinerApprovalStatus(qigStore.instance.selectedQIGForMarkerOperation.examinerRoleId), qigStore.instance.selectedQIGForMarkerOperation.markingMethod, false, qigStore.instance.selectedQIGForMarkerOperation.isElectronicStandardisationTeamMember);\r\n            }\r\n        };\r\n        /**\r\n         * Sets the corresponding marking check requester as selected in worklist store\r\n         * calls getMarkingCheckWorklistForSelectedExaminer after updating selected examiner\r\n         */\r\n        _this.onMarkingCheckRequesterExaminerClick = function (examinerId) {\r\n            worklistActionCreator.onMarkingCheckRequesterExaminerSelected(examinerId);\r\n        };\r\n        /**\r\n         * Selects the corresponding worklist for selected marking check requester examiner\r\n         * when selected examiner in the store is updated\r\n         */\r\n        _this.getMarkingCheckWorklistForSelectedExaminer = function () {\r\n            _this.markCheckExaminersDataRetrived();\r\n        };\r\n        /**\r\n         * Prepare work list after initialising worklist data\r\n         */\r\n        _this.worklistInitialisationCompletedForMarkingCheck = function () {\r\n            var selectedTab = (worklistStore.instance.selectedMarkingCheckExaminer.selectedTab !== null &&\r\n                worklistStore.instance.selectedMarkingCheckExaminer.selectedTab !== undefined &&\r\n                worklistStore.instance.selectedMarkingCheckExaminer.selectedTab !== enums.ResponseMode.none) ?\r\n                worklistStore.instance.selectedMarkingCheckExaminer.selectedTab :\r\n                targetSummaryStore.instance.currentResponseModeForMarkingCheck;\r\n            worklistActionCreator.notifyWorklistTypeChange(qigStore.instance.selectedQIGForMarkerOperation.markSchemeGroupId, worklistStore.instance.selectedMarkingCheckExaminer.examinerRoleID, qigStore.instance.selectedQIGForMarkerOperation.questionPaperPartId, enums.WorklistType.live, selectedTab, enums.RemarkRequestType.Unknown, worklistStore.instance.isDirectedRemark, qigStore.instance.selectedQIGForMarkerOperation.isElectronicStandardisationTeamMember, false, worklistStore.instance.isMarkingCheckMode);\r\n        };\r\n        /**\r\n         * Method to be invoked when a ExamBody CC is loaded.\r\n         */\r\n        _this.onExamBodyCCLoaded = function () {\r\n            _this.isExamBodyCCLoaded = true;\r\n        };\r\n        /**\r\n         * Called after saving the user options\r\n         */\r\n        _this.onUserOptionsLoaded = function () {\r\n            var isMarkerInfoPanelExpanded;\r\n            isMarkerInfoPanelExpanded = userOptionsHelper.getUserOptionByName(useroptionKeys.MARKER_INFO_PANEL_EXPANDED) === 'false' ? false : true;\r\n            if (worklistStore.instance.isMarkingCheckMode) {\r\n                _this.markCheckExaminersDataRetrived();\r\n            }\r\n            else {\r\n                simulationModeHelper.checkStandardisationSetupCompletion(enums.PageContainers.WorkList, enums.PageContainers.WorkList);\r\n                var isMultiQig = markerOperationModeFactory.operationMode.isTeamManagementMode ?\r\n                    teamManagementStore.instance.multiQigSelectedDetail &&\r\n                        teamManagementStore.instance.multiQigSelectedDetail.qigId ? true : false : false;\r\n                qigActionCreator.getQIGSelectorData(markerOperationModeFactory.operationMode.getQigId, false, false, false, false, true, isMultiQig);\r\n            }\r\n            _this.setState({ enableNavigationPanelVisibility: isMarkerInfoPanelExpanded });\r\n        };\r\n        /**\r\n         * refresh target progress for Examiner\r\n         */\r\n        _this.refreshTargetProgress = function () {\r\n            _this.worklistTabDetails = [];\r\n            /** Getting  markingTargetsSummary from worklist store,\r\n             * it will be updated if the worklist response collection changes\r\n             */\r\n            _this.markingTargetsSummary = targetHelper.getExaminerMarkingTargetProgress;\r\n            var currentTarget = targetSummaryStore.instance.getCurrentTarget();\r\n            // If the current target is simulation for the marker  then clear the simulation exited qigs cache\r\n            // Since, on each home click while in simulation the simulation target completed qig list needs to be shown,\r\n            // whenever the current target is simulation the cache is cleared.\r\n            if (currentTarget.markingModeID === enums.MarkingMode.Simulation) {\r\n                _this.storageAdapterHelper.clearCacheByKey('simulationexitedqigs', 'qigdata');\r\n            }\r\n            _this.worklistTabDetails = worklistComponentHelper.getWorklistTabDetails(worklistStore.instance.getMarkingModeByWorkListType(worklistStore.instance.currentWorklistType), true);\r\n            if (_this.isContentRefreshStarted) {\r\n                _this.isContentRefreshSucceeded.isMarkingProgressCompleted = true;\r\n            }\r\n            _this.checkIfContentRefreshCompleted();\r\n            // Checks whether the current worklist type is disabled.\r\n            var isTargetDisabled = _this.isSelectedWorklistTypeDisabled();\r\n            if (isTargetDisabled) {\r\n                _this.notifyWorklistTypeChange(allocateResponseHelper.getWorkListTypeByMarkingMode(targetHelper.getSelectedQigMarkingMode()), enums.ResponseMode.open);\r\n            }\r\n            var _worklistType = worklistStore.instance.currentWorklistType && !isTargetDisabled ?\r\n                worklistStore.instance.currentWorklistType :\r\n                allocateResponseHelper.getWorkListTypeByMarkingMode(targetHelper.getSelectedQigMarkingMode());\r\n            var isWorklistTypeChanged = false;\r\n            var remarkRequestType = worklistComponentHelper.getRemarkRequestType(_worklistType);\r\n            // While submiting practice response allocate next target automatically.\r\n            if (_this.isSubmitCompleted && allocateResponseHelper.isAllocationNeeded()) {\r\n                /* Allocate the practise/standardisation responses */\r\n                allocateResponseHelper.allocateQualificationResponses();\r\n                _worklistType = allocateResponseHelper.getWorkListTypeByMarkingMode(targetHelper.getSelectedQigMarkingMode());\r\n            }\r\n            else if (_this.isSubmitCompleted || _this.isAllocationCompleted || _this.isSecondStandardisationTargetReceived) {\r\n                /** Call to get response details to show in worklist */\r\n                _worklistType = allocateResponseHelper.getWorkListTypeByMarkingMode(targetHelper.getSelectedQigMarkingMode());\r\n                isWorklistTypeChanged = true;\r\n            }\r\n            var responseMode = targetSummaryStore.instance.getCurrentResponseMode(targetHelper.getMarkingModeByWorklistType(_worklistType), _worklistType, currentTarget.markingModeID);\r\n            _this.isSelectedMenuTargetCompleted = targetHelper.isSelectedMenuCompleted((worklistStore.instance.getMarkingModeByWorkListType(worklistStore.instance.currentWorklistType)));\r\n            // Reset responseMode only if current responsemode is not none and submitted response is not in QualityFeedbackOutstanding\r\n            if (responseMode === enums.ResponseMode.none || qigStore.instance.selectedQIGForMarkerOperation.hasQualityFeedbackOutstanding) {\r\n                _this.responseMode = _this.responseMode === undefined ? enums.ResponseMode.open : _this.responseMode;\r\n            }\r\n            else {\r\n                _this.responseMode = responseMode;\r\n            }\r\n            /*\r\n             * Sets the response mode based on quality feedback.\r\n             */\r\n            _this.responseMode = markerOperationModeFactory.operationMode.responseModeBasedOnQualityFeedbackForWorklist(_this.responseMode, targetHelper.getMarkingModeByWorklistType(_worklistType), remarkRequestType);\r\n            if (_this.props.isFromMenu) {\r\n                if ((_worklistType === enums.WorklistType.practice || _worklistType === enums.WorklistType.standardisation ||\r\n                    _worklistType === enums.WorklistType.secondstandardisation) &&\r\n                    _this.isSelectedMenuTargetCompleted) {\r\n                    if (targetHelper.getExaminerQigStatus() === enums.ExaminerQIGStatus.LiveMarking) {\r\n                        isWorklistTypeChanged = true;\r\n                        _this.responseMode = enums.ResponseMode.closed;\r\n                    }\r\n                }\r\n                if (_worklistType === enums.WorklistType.simulation) {\r\n                    simulationModeHelper.checkStandardisationSetupCompletion(enums.PageContainers.WorkList, enums.PageContainers.WorkList, true);\r\n                }\r\n            }\r\n            /**\r\n             * isWorklistTypeChanged is set on scenarios after Submit and Allocation when Worklist needs refresh.\r\n             * worklist call NOT needed in QIG selection where isWorklistTypeChanged will be False.\r\n             */\r\n            if (isWorklistTypeChanged === true) {\r\n                _this.notifyWorklistTypeChange(_worklistType, _this.responseMode);\r\n            }\r\n            /** resetting the allocation,submit completed flag after loading the worklist */\r\n            _this.isAllocationCompleted = false;\r\n            _this.isSubmitCompleted = false;\r\n            // If the marker is in live marking and does not have the limit specified, no need to set the worklist. Avoid busy indicator.\r\n            if (_worklistType === undefined &&\r\n                currentTarget.markingModeID === enums.MarkingMode.LiveMarking &&\r\n                currentTarget.maximumMarkingLimit === 0) {\r\n                _this.hasTargetFound = false;\r\n            }\r\n            _this.setState({\r\n                targetRenderedOn: Date.now(),\r\n                renderedOn: Date.now()\r\n            });\r\n        };\r\n        /**\r\n         * this will shows the confirmation popup on logout based on the ask on logout value.\r\n         */\r\n        _this.showLogoutConfirmation = function () {\r\n            _this.setState({ isLogoutConfirmationPopupDisplaying: true });\r\n        };\r\n        /**\r\n         * Handles the action event while atypical search is triggered.\r\n         */\r\n        _this.atypicalSearchClick = function (result) {\r\n            var messageKey = '';\r\n            var messageHeaderKey = '';\r\n            _this.atypicalPopupContent = localeStore.instance.\r\n                TranslateText('marking.worklist.atypical-search-error-dialog.atypical-search-error-' + result.searchResultCode);\r\n            if (result.searchResultCode === enums.SearchResultCode.AllocatedToAnotherMarker) {\r\n                _this.atypicalPopupContent = stringHelper.format(localeStore.instance.\r\n                    TranslateText('marking.worklist.atypical-search-error-dialog.atypical-search-error-' +\r\n                    enums.SearchResultCode.AllocationPossible), [String(result.centreNumber),\r\n                    String(result.candidateNumber),\r\n                    String(result.candidateName).toUpperCase()]);\r\n                _this.setState({ isAtypicalSearchResultPopupDisplaying: true });\r\n            }\r\n            else if (result.searchResultCode === enums.SearchResultCode.AllocationPossible) {\r\n                _this.atypicalPopupContent = stringHelper.format(localeStore.instance.\r\n                    TranslateText('marking.worklist.atypical-search-error-dialog.atypical-search-error-' + result.searchResultCode), [String(result.centreNumber),\r\n                    String(result.candidateNumber),\r\n                    String(result.candidateName).toUpperCase()]);\r\n                _this.setState({ isAtypicalSearchResultPopupDisplaying: true });\r\n            }\r\n            else if (result.searchResultCode === enums.SearchResultCode.MarkerNotApproved ||\r\n                result.searchResultCode === enums.SearchResultCode.MarkerSuspended) {\r\n                markerInformationActionCreator.\r\n                    GetMarkerInformation(qigStore.instance.selectedQIGForMarkerOperation.examinerRoleId, qigStore.instance.selectedQIGForMarkerOperation.markSchemeGroupId, true, false, examinerstore.instance.getMarkerInformation.approvalStatus);\r\n                _this.setState({\r\n                    isResponseAllocationErrorDialogDisplaying: true,\r\n                    renderedOn: Date.now(),\r\n                    errorDialogHeaderText: localeStore.instance.\r\n                        TranslateText('marking.worklist.response-allocation-error-dialog.response-allocation-error-header'),\r\n                    errorDialogContentText: localeStore.instance.TranslateText('marking.worklist.approval-status-changed-dialog.body'),\r\n                    isBusy: false\r\n                });\r\n            }\r\n            else if (result.searchResultCode === enums.SearchResultCode.MarkerWithdrawn) {\r\n                _this.storageAdapterHelper.clearCacheByKey('qigselector', 'overviewdata');\r\n                markerInformationActionCreator.\r\n                    GetMarkerInformation(qigStore.instance.selectedQIGForMarkerOperation.examinerRoleId, qigStore.instance.selectedQIGForMarkerOperation.markSchemeGroupId, true, false, examinerstore.instance.getMarkerInformation.approvalStatus);\r\n            }\r\n            else {\r\n                _this.setState({ isAtypicalSearchFailurePopupDisplaying: true });\r\n            }\r\n        };\r\n        /**\r\n         * This function is called on 'Cancel' click of atypical response search dialog.\r\n         * This will close the popup.\r\n         */\r\n        _this.atypicalSearchCancelClick = function () {\r\n            _this.setState({ isAtypicalSearchResultPopupDisplaying: false });\r\n        };\r\n        /**\r\n         * This function is called on 'Ok' click of atypical response search failure dialog.\r\n         * This will close the popup.\r\n         */\r\n        _this.atypicalSearchfailureClick = function () {\r\n            _this.setState({ isAtypicalSearchFailurePopupDisplaying: false });\r\n        };\r\n        /**\r\n         * This function is called on 'MoveToWorklist' click of atypical response search dialog.\r\n         */\r\n        _this.atypicalSearchMoveToClick = function () {\r\n            _this.setState({ isAtypicalSearchResultPopupDisplaying: false });\r\n            if (responseStore.instance._atypicalSearchResult.searchResultCode !== enums.SearchResultCode.AllocatedToAnotherMarker) {\r\n                var isCandidatePrioritisationCCON = configurableCharacteristicsHelper.getCharacteristicValue(configurableCharacteristicsNames.CandidatePrioritisation).toLowerCase() === 'true' ? true : false;\r\n                responseActionCreator.moveAtypicalResponseToWorklist(responseStore.instance._atypicalSearchResult.examinerRoleId, responseStore.instance._atypicalSearchResult.markSchemeGroupId, enums.WorklistType.atypical, false, qigStore.instance.selectedQIGForMarkerOperation.examSessionId, qigStore.instance.selectedQIGForMarkerOperation.role === enums.ExaminerRole.principalExaminer, qigStore.instance.selectedQIGForMarkerOperation.isElectronicStandardisationTeamMember, examinerstore.instance.getMarkerInformation.examinerId, isCandidatePrioritisationCCON, worklistStore.instance.getRemarkRequestType, true, responseStore.instance._atypicalSearchResult.candidateScriptId);\r\n                // Invoking onBusy method\r\n                busyIndicatorActionCreator.setBusyIndicatorInvoker(enums.BusyIndicatorInvoker.responseAllocation);\r\n            }\r\n            else {\r\n                _this.atypicalPopupContent = localeStore.instance.\r\n                    TranslateText('marking.worklist.atypical-search-error-dialog.atypical-search-error-' +\r\n                    enums.SearchResultCode.AllocatedToAnotherMarker);\r\n                _this.setState({ isAtypicalSearchFailurePopupDisplaying: true });\r\n            }\r\n        };\r\n        /**\r\n         * This function is called on 'MarkNow' click of atypical response search dialog.\r\n         */\r\n        _this.atypicalSearchMarkNowClick = function () {\r\n            _this.setState({ isAtypicalSearchResultPopupDisplaying: false });\r\n            if (responseStore.instance._atypicalSearchResult.searchResultCode !== enums.SearchResultCode.AllocatedToAnotherMarker) {\r\n                var isCandidatePrioritisationCCON = configurableCharacteristicsHelper.getCharacteristicValue(configurableCharacteristicsNames.CandidatePrioritisation).toLowerCase() === 'true' ? true : false;\r\n                responseActionCreator.markNowAtypicalResponse(responseStore.instance._atypicalSearchResult.examinerRoleId, responseStore.instance._atypicalSearchResult.markSchemeGroupId, enums.WorklistType.atypical, false, qigStore.instance.selectedQIGForMarkerOperation.examSessionId, qigStore.instance.selectedQIGForMarkerOperation.role === enums.ExaminerRole.principalExaminer, qigStore.instance.selectedQIGForMarkerOperation.isElectronicStandardisationTeamMember, examinerstore.instance.getMarkerInformation.examinerId, isCandidatePrioritisationCCON, worklistStore.instance.getRemarkRequestType, true, responseStore.instance._atypicalSearchResult.candidateScriptId);\r\n                // Invoking onBusy method\r\n                busyIndicatorActionCreator.setBusyIndicatorInvoker(enums.BusyIndicatorInvoker.responseAllocation);\r\n            }\r\n            else {\r\n                _this.atypicalPopupContent = localeStore.instance.\r\n                    TranslateText('marking.worklist.atypical-search-error-dialog.atypical-search-error-' +\r\n                    enums.SearchResultCode.AllocatedToAnotherMarker);\r\n                _this.setState({ isAtypicalSearchFailurePopupDisplaying: true });\r\n            }\r\n        };\r\n        /**\r\n         * Updates the Marker information panel.\r\n         */\r\n        _this.updateMarkerInformationPanel = function () {\r\n            // if marker information is updated through background pulse\r\n            _this.markerInformation = examinerstore.instance.getMarkerInformation;\r\n            if (_this.doRenderMarkerInformationPanel()) {\r\n                _this.setState({ renderedOn: Date.now(), isBusy: false });\r\n            }\r\n            // Update the Marking Check Access status\r\n            if (qigStore.instance.selectedQIGForMarkerOperation &&\r\n                !markerOperationModeFactory.operationMode.isTeamManagementMode &&\r\n                configurableCharacteristicsHelper.getCharacteristicValue(configurableCharacteristicsNames.RequestMarkingCheck, qigStore.instance.selectedQIGForMarkerOperation.markSchemeGroupId).toLowerCase() === 'true') {\r\n                worklistActionCreator.getMarkingCheckWorklistAccessStatus(qigStore.instance.selectedQIGForMarkerOperation.markSchemeGroupId);\r\n            }\r\n            _this.checkIfContentRefreshCompleted();\r\n        };\r\n        /**\r\n         * When live/atypical/supervisor remark selected\r\n         * If we open a response and close that then we need to take the response mode from response store( selected response mode)\r\n         * otherwise It will take the response mode from worklist store.\r\n         */\r\n        _this.markingModeChanged = function (markSchemeGroupId, questionPaperPartId) {\r\n            if (!responseStore.instance.isSearchResponse) {\r\n                if (worklistStore.instance.getSuccess) {\r\n                    _this.worklistType = worklistStore.instance.currentWorklistType;\r\n                    _this.responseMode = responseStore.instance.selectedResponseMode !== undefined\r\n                        ? responseStore.instance.selectedResponseMode\r\n                        : worklistStore.instance.getResponseMode;\r\n                    // load inbox messages to sync with worklist data\r\n                    _this.forceLoadInboxMessages();\r\n                    if (markerOperationModeFactory.operationMode.isTeamManagementMode) {\r\n                        // resetting responsemode while target has been dynamically changed through backend (AI)\r\n                        // case : standardisation target has been completed by examiner(subordinate) and waiting for review\r\n                        // and then supervisor logged in and navigates through Myteam -> subordinate's worklist (closed worklist)\r\n                        // which is yet to be reviewed now target has been changed through AI and the supervisor opens the response and\r\n                        // clicking set as reviewed and then it autonavigates\r\n                        // to worklist.In this scenario response mode need to be resetted to closed.\r\n                        _this.responseMode = targetHelper.doResetResponseMode((worklistStore.instance.getMarkingModeByWorkListType(worklistStore.instance.currentWorklistType)), _this.responseMode);\r\n                    }\r\n                    _this.remarkRequestType = worklistStore.instance.getRemarkRequestType;\r\n                    _this.isDirectedRemark = worklistStore.instance.isDirectedRemark;\r\n                    // set candidate script info collection.\r\n                    worklistStore.instance.setCandidateScriptInfoCollection = scriptImageDownloadHelper.constructCandidateScriptInfo(worklistStore.instance.getCurrentWorklistResponseBaseDetails().toArray());\r\n                    var isMarkByQuestionModeSet = userOptionsHelper.getUserOptionByName(useroptionKeys.IS_MBQ_SELECTED, qigStore.instance.getSelectedQIGForTheLoggedInUser.examinerRoleId) === 'true';\r\n                    var isEbookMarking = (configurableCharacteristicsHelper.getExamSessionCCValue(configurableCharacteristicsNames.eBookmarking, qigStore.instance.selectedQIGForMarkerOperation.examSessionId)\r\n                        .toLowerCase() === 'true');\r\n                    // initial call for fetching candidate script meta data.\r\n                    var candidateScriptMetadataPromise = scriptActionCreator.fetchCandidateScriptMetadata(worklistStore.instance.getCandidateScriptInfoCollection, qigStore.instance.selectedQIGForMarkerOperation.questionPaperPartId, qigStore.instance.selectedQIGForMarkerOperation.markSchemeGroupId, !isMarkByQuestionModeSet, false, // TODO: pass includeRelatedQigs value as true, if anyone of the candidate script is whole response.\r\n                    false, eCourseworkHelper ? eCourseworkHelper.isECourseworkComponent : false, isEbookMarking, enums.StandardisationSetup.None, false, false, qigStore.instance.selectedQIGForMarkerOperation.markingMethod === enums.MarkingMethod.MarkFromObject);\r\n                    var that_1 = _this;\r\n                    Promise.Promise.all([candidateScriptMetadataPromise]).\r\n                        then(function (resultList) {\r\n                        that_1.unloadWorklistRefreshIndicatorToShowWorklist();\r\n                    });\r\n                    // Set interval for background pulse\r\n                    backgroundPulseHelper.setInterval(config.general.SCRIPT_METADATA_LOAD_TIMER_INTERVAL, backgroundPulseHelper.handleCandidateScriptMetaDataLoad, null);\r\n                    //set background call for processing save marks and annotations queue.\r\n                    backgroundPulseHelper.setInterval(config.marksandannotationsconfig.MARKS_AND_ANNOTATIONS_SAVE_TIMER_INTERVAL, backgroundPulseHelper.processMarksAndAnnotationsQueue, null);\r\n                    if (eCourseworkHelper.isECourseworkComponent) {\r\n                        backgroundPulseHelper.handleECourseWorkFileMetaDataLoad();\r\n                        backgroundPulseHelper.setInterval(config.general.ECOURSEFILE_METADATA_LOAD_TIMER_INTERVAL, backgroundPulseHelper.handleECourseWorkFileMetaDataLoad, null);\r\n                    }\r\n                    if (markerOperationModeFactory.operationMode.canInitiateMarkAndAnnotationsBackgroundDownload(_this.responseMode)) {\r\n                        backgroundPulseHelper.handleCandidateMarksAndAnnotationsDataLoad();\r\n                        // Set interval for background pulse\r\n                        backgroundPulseHelper.setInterval(config.marksandannotationsconfig.MARKS_AND_ANNOTATIONS_LOAD_TIMER_INTERVAL, backgroundPulseHelper.handleCandidateMarksAndAnnotationsDataLoad, null);\r\n                    }\r\n                    // Logic to load image zones if ebookmarking component.\r\n                    // This will happen after Marks and Annoattion Load\r\n                    if (isEbookMarking) {\r\n                        backgroundPulseHelper.handleEbookMarkingImageZoneLoad();\r\n                        backgroundPulseHelper.setInterval(config.general.SCRIPT_METADATA_LOAD_TIMER_INTERVAL, backgroundPulseHelper.handleEbookMarkingImageZoneLoad, null);\r\n                    }\r\n                    // This will load the favorite stamps against selected Qig.\r\n                    responseSearchHelper.loadFavoriteStampForSelectedQig();\r\n                    /* Logging tab swith in google analytics */\r\n                    gaHelper.logEventOnTabSwitch(_this.worklistType, worklistStore.instance.getResponseMode, qigStore.instance.qigName, qigStore.instance.isTeamManagemement, qigStore.instance.selectedQIGForMarkerOperation.examinerRoleId);\r\n                }\r\n                else {\r\n                    _this.unloadWorklistRefreshIndicatorToShowWorklist();\r\n                }\r\n                /** set this to true to show loadinng indicator */\r\n                _this.isRefreshing = true;\r\n                if (_this.doRenderMarkerInformationPanel()) {\r\n                    _this.setState({\r\n                        targetRenderedOn: Date.now(),\r\n                        renderedOn: Date.now()\r\n                    });\r\n                }\r\n            }\r\n            else {\r\n                responseSearchhelper.onWorkListSelected(markSchemeGroupId, questionPaperPartId);\r\n            }\r\n        };\r\n        /**\r\n         * This will open the response item\r\n         */\r\n        _this.openResponse = function () {\r\n            // Check for standardisation setup completion.\r\n            simulationModeHelper.checkStandardisationSetupCompletion(enums.PageContainers.WorkList, enums.PageContainers.WorkList);\r\n            navigationHelper.loadResponsePage();\r\n        };\r\n        /**\r\n         * Gets called once the response allocation request is completed\r\n         */\r\n        _this.onResponseAllocated = function (responseAllocationErrorCode, allocatedResponseCount, success, approvalStatus, openAtypicalResponse, responseData) {\r\n            // Check the Marker approval status is with drawn, If so display the withdrawn message\r\n            if (approvalStatus === enums.ExaminerApproval.Withdrawn) {\r\n                _this.handleWithDrawnError();\r\n                return;\r\n            }\r\n            if (success) {\r\n                _this.initiateContentRefresh();\r\n                _this.isAllocationCompleted = true;\r\n            }\r\n            if (responseAllocationErrorCode !== enums.ResponseAllocationErrorCode.none) {\r\n                var responseAllocationValidationParameter_1;\r\n                responseAllocationValidationParameter_1 = responseAllocationValidationHelper.Validate(responseAllocationErrorCode, allocatedResponseCount, approvalStatus);\r\n                gaHelper.logEventOnResponseAllocation(true);\r\n                _this.setState({\r\n                    isResponseAllocationErrorDialogDisplaying: true,\r\n                    renderedOn: Date.now(),\r\n                    errorDialogHeaderText: responseAllocationValidationParameter_1.ErrorDialogHeaderText,\r\n                    errorDialogContentText: responseAllocationValidationParameter_1.ErrorDialogContentText,\r\n                    isBusy: false\r\n                });\r\n            }\r\n            else {\r\n                gaHelper.logEventOnResponseAllocation(false, allocatedResponseCount);\r\n                _this.setState({ isBusy: false, renderedOn: Date.now() });\r\n            }\r\n        };\r\n        /**\r\n         * Show busy indicator when submit is clicked in live open worklist\r\n         */\r\n        _this.setBusyIndicator = function () {\r\n            /* if any error occurs set the variable to false and content refresh has started */\r\n            if (busyIndicatorStore.instance.getBusyIndicatorInvoker === enums.BusyIndicatorInvoker.none &&\r\n                _this.isContentRefreshStarted) {\r\n                _this.resetContentRefreshStatuses();\r\n            }\r\n            _this.setState({\r\n                isBusy: busyIndicatorStore.instance.getBusyIndicatorInvoker === enums.BusyIndicatorInvoker.none ? false : true\r\n            });\r\n        };\r\n        /**\r\n         * On response submission completed\r\n         */\r\n        _this.onSubmitResponseCompleted = function (fromMarkScheme, submittedMarkGroupIds) {\r\n            _this.isSubmitCompleted = true;\r\n            /* start the data refresh */\r\n            _this.isContentRefreshStarted = true;\r\n            _this.setState({ isBusy: false });\r\n        };\r\n        /**\r\n         * Gets called on retrieval of candidate response metadata which aids for the Script background download\r\n         * No need to fetch the Suppressed pages\r\n         */\r\n        _this.onCandidateResponseMetadataRetrieved = function (isAutoRefresh) {\r\n            // TO DO: We have to remove the isTeamManagementMode check while doing the responses opening from team management story.\r\n            if (!responseStore.instance.isSearchResponse) {\r\n                if (((isAutoRefresh && scriptStore.instance.filteredCandidateResponseMetadata.scriptImageList.size > 0)\r\n                    || (!isAutoRefresh)) && !markerOperationModeFactory.operationMode.isTeamManagementMode) {\r\n                    // Checks if the background download of images can be initiated based on the current\r\n                    //selected worklist type and response mode\r\n                    if (scriptImageDownloadHelper.canInitiateScriptImageBackgroundDownload(_this.worklistType, _this.responseMode)) {\r\n                        // Populating the request objects for performing background download of script images\r\n                        var scriptImageDownloadRequests = scriptImageDownloadHelper.populateBackgroundScriptImageDownloadRequests(isAutoRefresh ? scriptStore.instance.filteredCandidateResponseMetadata :\r\n                            scriptStore.instance.getCandidateResponseMetadata);\r\n                        // Initiating the background download of images based on the config\r\n                        if (config.backgroundworkerrefreshconfig.BACKGROUND_IMAGES_DOWNLOAD_ENABLED === true\r\n                            && !htmlviewerhelper.isHtmlComponent) {\r\n                            new scriptImageDownloader().initiateBackgroundImageDownload(scriptImageDownloadRequests);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                responseSearchHelper.openResponse();\r\n            }\r\n        };\r\n        /**\r\n         * This method will be called if count of responses in the\r\n         * Worklist is not equal to the count showing in Tab header and Live Progress status\r\n         */\r\n        _this.updateResponseCount = function () {\r\n            _this.markingTargetsSummary =\r\n                worklistStore.instance.getExaminerMarkingTargetProgress(markerOperationModeFactory.operationMode.isSelectedExaminerPEOrAPE);\r\n            _this.setState({ targetRenderedOn: Date.now() });\r\n        };\r\n        /**\r\n         * Set busy indicator when a QIG is selected\r\n         */\r\n        _this.onQigSelection = function (isDataFromSearch, isDataFromHistory) {\r\n            if (isDataFromSearch === void 0) { isDataFromSearch = false; }\r\n            if (isDataFromHistory === void 0) { isDataFromHistory = false; }\r\n            _this.isRefreshing = true;\r\n            if (isDataFromHistory) {\r\n                return;\r\n            }\r\n            responseSearchHelper.openQIGDetails(qigStore.instance.selectedQIGForMarkerOperation.questionPaperPartId, qigStore.instance.selectedQIGForMarkerOperation.markSchemeGroupId, qigStore.instance.selectedQIGForMarkerOperation.examinerRoleId, dataServiceHelper.canUseCache(), examinerstore.instance.examinerApprovalStatus(qigStore.instance.selectedQIGForMarkerOperation.examinerRoleId), qigStore.instance.selectedQIGForMarkerOperation.markingMethod, false, qigStore.instance.selectedQIGForMarkerOperation.isElectronicStandardisationTeamMember);\r\n            _this.setState({ renderedOn: Date.now() });\r\n        };\r\n        /**\r\n         * Callback function for message panel close\r\n         */\r\n        _this.onCloseMessagePopup = function (navigateTo) {\r\n            _this.isMessagePopupVisible = false;\r\n            _this.resetvariables();\r\n            /* Defect:24608 - seting focus back to subject on message close for fixing cursor and onscreen keyboard displaying issue in ipad */\r\n            if (htmlUtilities.isIPadDevice) {\r\n                htmlUtilities.setFocusToElement('message-subject');\r\n                htmlUtilities.blurElement('message-subject');\r\n            }\r\n            //We need to call the close action when navigating to inbox and when the close button is clicked\r\n            // in other scenarios the close action is called from messagebase\r\n            if (!navigateTo || navigateTo === enums.SaveAndNavigate.toInboxMessagePage) {\r\n                messagingActionCreator.messageAction(enums.MessageViewAction.Close);\r\n            }\r\n            _this.setState({ renderedOn: Date.now() });\r\n        };\r\n        /**\r\n         * Event fired on clicking send message.\r\n         */\r\n        _this.onSendMessageClicked = function () {\r\n            // On clicking Send message button from  information MarkerInformationPanel\r\n            // Please check whether application is online.\r\n            // If yes, proceed with composing Message otherwise interrupt action.\r\n            if (applicationStore.instance.isOnline) {\r\n                if (!markerOperationModeFactory.operationMode.isTeamManagementMode) {\r\n                    _this.isMessagePopupVisible = true;\r\n                    _this.setState({ renderedOn: Date.now() });\r\n                    messagingActionCreator.messageAction(enums.MessageViewAction.Open, enums.MessageType.WorklistCompose);\r\n                }\r\n                else {\r\n                    messagingActionCreator.messageAction(enums.MessageViewAction.Open, enums.MessageType.TeamCompose);\r\n                }\r\n            }\r\n            else {\r\n                applicationActionCreator.checkActionInterrupted();\r\n            }\r\n        };\r\n        /**\r\n         * Reset private variables\r\n         */\r\n        _this.resetvariables = function () {\r\n            _this.subject = '';\r\n            _this.priorityDropdownSelectedItem = enums.MessagePriority.Standard;\r\n            _this.selectedQigItemId = undefined;\r\n            _this.messageBody = '';\r\n        };\r\n        /**\r\n         * Method to show examiner state change popup.\r\n         */\r\n        _this.showExaminerStateChangePopup = function () {\r\n            // Check message is active, If so check for dirty content else proceed\r\n            if (!messageStore.instance.isMessagePanelActive) {\r\n                teamManagementActionCreator.doVisibleChangeStatusPopup(true);\r\n            }\r\n            else {\r\n                var messageNavigationArguments = {\r\n                    responseId: undefined,\r\n                    canNavigate: false,\r\n                    navigateTo: enums.MessageNavigation.ChangeStatus,\r\n                    navigationConfirmed: false,\r\n                    hasMessageContainsDirtyValue: undefined,\r\n                    triggerPoint: enums.TriggerPoint.None\r\n                };\r\n                messagingActionCreator.canMessageNavigate(messageNavigationArguments);\r\n            }\r\n        };\r\n        /**\r\n         * Handles the action event on examiner change status received.\r\n         */\r\n        _this.examinerChangeStatusReceived = function () {\r\n            var examinerChangeStatus = teamManagementStore.instance.examinerStatusDetails;\r\n            if (examinerChangeStatus) {\r\n                if (examinerChangeStatus.approvalOutcome === enums.ApprovalOutcome.Success) {\r\n                    _this.setState({ renderedOn: Date.now() });\r\n                }\r\n            }\r\n            // Log examiner status change data.\r\n            new teamManagementAuditHelper().logSubordinateStatusChange(loggerConstants.TEAMMANAGEMENT_REASON_SUPERVISOR_ACTION, loggerConstants.TEAMMANAGEMENT_TYPE_SUBOORDINATES_STATUS_CHANGED_ACTION, examinerChangeStatus);\r\n        };\r\n        /**\r\n         * This method will call on mouse hover and leave for setting hovered class.\r\n         */\r\n        _this.onMouseHoverOrMouseLeave = function (isMouseHover) {\r\n            // condition to re-render only if change present. avoid renders on every mouse move.\r\n            if (_this.isMouseHovered !== isMouseHover) {\r\n                _this.isMouseHovered = isMouseHover;\r\n                _this.setState({ renderedOn: Date.now() });\r\n            }\r\n        };\r\n        /**\r\n         * Handles the action event on second standardisation received.\r\n         */\r\n        _this.secondStandardisationReceived = function () {\r\n            var secondStandardisationReturn = teamManagementStore.instance.secondStandardisationReturn;\r\n            if (secondStandardisationReturn) {\r\n                qigActionCreator.getQIGSelectorData(operationModeHelper.markSchemeGroupId);\r\n                _this.isSecondStandardisationTargetReceived = true;\r\n                worklistActionCreator.getWorklistMarkerProgressData(qigStore.instance.selectedQIGForMarkerOperation.examinerRoleId, qigStore.instance.selectedQIGForMarkerOperation.markSchemeGroupId, qigStore.instance.selectedQIGForMarkerOperation.isElectronicStandardisationTeamMember);\r\n                // Log examiner status change data.\r\n                new teamManagementAuditHelper().logSubordinateStatusChange(loggerConstants.TEAMMANAGEMENT_REASON_SUPERVISOR_ACTION, loggerConstants.TEAMMANAGEMENT_TYPE_SECONDSTANDARDISATION, secondStandardisationReturn);\r\n            }\r\n        };\r\n        /**\r\n         * SEP Action return callback.\r\n         */\r\n        _this.onApprovalManagementActionExecuted = function (actionIdentifier, sepApprovalManagementActionResults) {\r\n            var sepApprovalManagementActionResult;\r\n            sepApprovalManagementActionResult = sepApprovalManagementActionResults.first();\r\n            if (actionIdentifier !== enums.SEPAction.ViewResponse &&\r\n                actionIdentifier !== enums.SEPAction.SendMessage) {\r\n                navigationHelper.loadTeamManagement();\r\n                // Log examiner set sep.\r\n                new teamManagementAuditHelper().logSubordinateStatusChange(loggerConstants.TEAMMANAGEMENT_REASON_SUPERVISOR_ACTION, loggerConstants.TEAMMANAGEMENT_TYPE_SEP_MANAGEMENT, sepApprovalManagementActionResult);\r\n            }\r\n        };\r\n        /**\r\n         * Method called when the message navigation is confirmed by the user\r\n         * @param messageNavigationArguments\r\n         */\r\n        _this.onMessageNavigation = function (messageNavigationArguments) {\r\n            if (messageNavigationArguments.canNavigate && messageNavigationArguments.navigateTo === enums.MessageNavigation.ChangeStatus) {\r\n                teamManagementActionCreator.doVisibleChangeStatusPopup(true);\r\n            }\r\n        };\r\n        /**\r\n         * rendering worklist\r\n         */\r\n        _this.onSimulationTargetCompletion = function () {\r\n            // Invoke the action creator to Open the QIG\r\n            qigSelectorActionCreator.openQIG(qigStore.instance.selectedQIGForMarkerOperation.markSchemeGroupId);\r\n        };\r\n        /**\r\n         * Get selected worklist type disabled.\r\n         */\r\n        _this.isSelectedWorklistTypeDisabled = function () {\r\n            var isTargetDisabled = false;\r\n            var markingModeByWorklistType = targetHelper.getMarkingModeByWorklistType(worklistStore.instance.currentWorklistType);\r\n            if (markingModeByWorklistType) {\r\n                var targetByWorklistType = _this.markingTargetsSummary.filter(function (target) { return target.markingModeID === markingModeByWorklistType; }).first();\r\n                isTargetDisabled = markerOperationModeFactory.operationMode.isTargetDisabled(targetByWorklistType, undefined);\r\n            }\r\n            return isTargetDisabled;\r\n        };\r\n        /**\r\n         * on click or touch evnet\r\n         */\r\n        _this.onMarkingInstructonClickHandler = function (e) {\r\n            /** check if the clicked element is a child of the user details list item. if not close the open window */\r\n            if (e.target !== undefined &&\r\n                domManager.searchParentNode(e.target, function (el) {\r\n                    return el.id === 'markinginstructionlink' || el.id === 'markingInstructionMenu';\r\n                }) == null) {\r\n                if (_this.state.isMarkingInstructionPanelOpen !== undefined && _this.state.isMarkingInstructionPanelOpen) {\r\n                    _this.setState({ isMarkingInstructionPanelOpen: false });\r\n                    markingInstructioActionCreator.markingInstructionPanelOpenActionCreator(false);\r\n                }\r\n            }\r\n        };\r\n        /**\r\n         * rendering worklist\r\n         */\r\n        _this.onMarkingInstructionsLoaded = function () {\r\n            _this.setState({\r\n                markingInstructionPanelRenderedOn: Date.now()\r\n            });\r\n        };\r\n        /**\r\n         * refresh on closing marking instruction panel by clicking on worklist type\r\n         */\r\n        _this.onMarkingInstrucionPanleClosed = function () {\r\n            if (_this.state.isMarkingInstructionPanelOpen) {\r\n                _this.setState({\r\n                    isMarkingInstructionPanelOpen: false\r\n                });\r\n            }\r\n        };\r\n        _this.worklistType = enums.WorklistType.none;\r\n        /* binding the parent(current) context to showLogoutConfirmation which is passed as prop to child and executing inside child */\r\n        /* On navigating to worklist from response screen, prevent animation of the expand/collapse if we have user options loaded */\r\n        var isMarkerInfoPanelExpanded = true;\r\n        if (userOptionsStore.instance.isLoaded) {\r\n            isMarkerInfoPanelExpanded = userOptionsHelper.getUserOptionByName(useroptionKeys.MARKER_INFO_PANEL_EXPANDED) === 'false' ? false : true;\r\n        }\r\n        _this.state = {\r\n            isLogoutConfirmationPopupDisplaying: false,\r\n            isWorkListUpdated: false,\r\n            renderedOn: _this.props.renderedOn,\r\n            enableNavigationPanelVisibility: isMarkerInfoPanelExpanded,\r\n            isResponseAllocationErrorDialogDisplaying: false,\r\n            errorDialogHeaderText: '',\r\n            errorDialogContentText: '',\r\n            isBusy: false,\r\n            modulesLoaded: false,\r\n            isAtypicalSearchResultPopupDisplaying: false,\r\n            isAtypicalSearchFailurePopupDisplaying: false,\r\n            isMarkingInstructionPanelOpen: false,\r\n            isMarkingInstructionPanelClicked: false,\r\n            markingInstructionPanelRenderedOn: _this.props.renderedOn\r\n        };\r\n        _this.onOkClickOfResponseAllocationErrorDialog = _this.onOkClickOfResponseAllocationErrorDialog.bind(_this);\r\n        _this.showLogoutConfirmation = _this.showLogoutConfirmation.bind(_this);\r\n        _this.resetLogoutConfirmationSatus = _this.resetLogoutConfirmationSatus.bind(_this);\r\n        _this.toggleLeftPanel = _this.toggleLeftPanel.bind(_this);\r\n        _this.switchTab = _this.switchTab.bind(_this);\r\n        _this.showExaminerStateChangePopup = _this.showExaminerStateChangePopup.bind(_this);\r\n        _this.examinerChangeStatusReceived = _this.examinerChangeStatusReceived.bind(_this);\r\n        _this.secondStandardisationReceived = _this.secondStandardisationReceived.bind(_this);\r\n        _this.refreshTargetProgress = _this.refreshTargetProgress.bind(_this);\r\n        _this.onMarkInstructionFileClick = _this.onMarkInstructionFileClick.bind(_this);\r\n        _this.onMarkInstructionPanelClick = _this.onMarkInstructionPanelClick.bind(_this);\r\n        _this.isSecondStandardisationTargetReceived = false;\r\n        _this._boundHandleOnClick = _this.onMarkingInstructonClickHandler.bind(_this);\r\n        return _this;\r\n    }\r\n    /**\r\n     * Render method\r\n     */\r\n    WorkList.prototype.render = function () {\r\n        if (this.state.modulesLoaded) {\r\n            var responseAllocationErrorDialog = (React.createElement(GenericDialog, { content: this.state.errorDialogContentText, header: this.state.errorDialogHeaderText, displayPopup: this.state.isResponseAllocationErrorDialogDisplaying, okButtonText: localeStore.instance.TranslateText('marking.worklist.response-allocation-error-dialog.ok-button'), onOkClick: this.onOkClickOfResponseAllocationErrorDialog, id: 'responseallocationerrordialog', key: 'responseallocationerrordialog', popupDialogType: enums.PopupDialogType.ResponseAllocationError }));\r\n            var popUpContent = [];\r\n            popUpContent.push(React.createElement(\"p\", null, this.atypicalPopupContent));\r\n            var atypicalSearchDialog = (this.state.isAtypicalSearchFailurePopupDisplaying) ?\r\n                (React.createElement(GenericDialog, { content: this.atypicalPopupContent, header: localeStore.instance.TranslateText('marking.worklist.worklist-headers.atypical'), displayPopup: this.state.isAtypicalSearchFailurePopupDisplaying, okButtonText: localeStore.instance.TranslateText('marking.worklist.response-allocation-error-dialog.ok-button'), onOkClick: this.atypicalSearchfailureClick, id: 'atypicalresponseallocationerrordialog', key: 'atypicalresponseallocationerrordialog', popupDialogType: enums.PopupDialogType.ResponseAllocationError }))\r\n                : (React.createElement(MultiOptionConfirmationDialog, { content: popUpContent, header: localeStore.instance.TranslateText('marking.worklist.atypical-allocation-dialog.header'), displayPopup: this.state.isAtypicalSearchResultPopupDisplaying, onCancelClick: this.atypicalSearchCancelClick, onYesClick: this.atypicalSearchMarkNowClick, onNoClick: this.atypicalSearchMoveToClick, isKeyBoardSupportEnabled: true, selectedLanguage: this.props.selectedLanguage, popupSize: enums.PopupSize.Medium, popupType: enums.PopUpType.AtypicalSearch, buttonCancelText: localeStore.instance.TranslateText('marking.worklist.atypical-allocation-dialog.cancel'), buttonYesText: localeStore.instance.TranslateText('marking.worklist.atypical-allocation-dialog.mark-now'), buttonNoText: localeStore.instance.TranslateText('marking.worklist.atypical-allocation-dialog.move-to-worklist'), displayNoButton: true }));\r\n            var busyIndicator = (React.createElement(BusyIndicator, { id: 'busyIndicator', key: 'busyIndicator', isBusy: this.state.isBusy, busyIndicatorInvoker: busyIndicatorStore.instance.getBusyIndicatorInvoker }));\r\n            var header = (React.createElement(Header, { selectedLanguage: this.props.selectedLanguage, containerPage: enums.PageContainers.WorkList, isInTeamManagement: markerOperationModeFactory.operationMode.isTeamManagementMode, examinerName: this.markerInformation ? this.markerInformation.formattedExaminerName : '' }));\r\n            var footer = (React.createElement(Footer, { selectedLanguage: this.props.selectedLanguage, footerType: enums.FooterType.Worklist, isLogoutConfirmationPopupDisplaying: this.state.isLogoutConfirmationPopupDisplaying, resetLogoutConfirmationSatus: this.resetLogoutConfirmationSatus }));\r\n            var examinerStateChangePopup = void 0;\r\n            if (ExaminerStateChangePopup) {\r\n                examinerStateChangePopup = ((markerOperationModeFactory.operationMode.isTeamManagementMode &&\r\n                    qigStore.instance.selectedQIGForMarkerOperation && this.markerInformation) ?\r\n                    React.createElement(ExaminerStateChangePopup, { id: 'change_examiner_status_popup', key: 'change_examiner_status_popup', selectedLanguage: this.props.selectedLanguage, currentState: this.markerInformation.approvalStatus, markerInformation: this.markerInformation }) : null);\r\n            }\r\n            var markingCheckPopup = (React.createElement(MarkingCheckPopup, null));\r\n            return (React.createElement(\"div\", { className: classNames('worklist-wrapper', { 'loading': this.state.renderedOn !== 0 && this.state.isBusy }, { 'hide-left': !this.state.enableNavigationPanelVisibility }) },\r\n                examinerStateChangePopup,\r\n                markingCheckPopup,\r\n                busyIndicator,\r\n                responseAllocationErrorDialog,\r\n                atypicalSearchDialog,\r\n                header,\r\n                footer,\r\n                this.renderDetails()));\r\n        }\r\n        else {\r\n            return (React.createElement(BusyIndicator, { id: 'modulesLoadingBusyIndicator', key: 'modulesLoadingBusyIndicator', isBusy: true, busyIndicatorInvoker: enums.BusyIndicatorInvoker.loadingModules }));\r\n        }\r\n    };\r\n    /**\r\n     * Render the details for the worklist.\r\n     */\r\n    WorkList.prototype.renderDetails = function () {\r\n        var _this = this;\r\n        var _isMarkingCheckMode = worklistStore.instance.isMarkingCheckMode;\r\n        // Message popup\r\n        var messagePopup;\r\n        if (qigStore.instance.selectedQIGForMarkerOperation &&\r\n            !markerOperationModeFactory.operationMode.isTeamManagementMode && this.isExamBodyCCLoaded) {\r\n            messagePopup = (React.createElement(MessagePopup, { isOpen: this.isMessagePopupVisible, closeMessagePanel: this.onCloseMessagePopup, messageType: enums.MessageType.WorklistCompose, selectedLanguage: this.props.selectedLanguage, selectedQigItemId: qigStore.instance.selectedQIGForMarkerOperation.markSchemeGroupId, selectedQigItem: messageHelper.getCurrentQIGName(), qigItemsList: this.qigListItems, supervisorId: this.markerInformation ? this.markerInformation.supervisorExaminerId : 0, qigName: messageHelper.getCurrentQIGName(), supervisorName: this.markerInformation ? this.markerInformation.formattedSupervisorName : '', subject: this.subject, priorityDropDownSelectedItem: this.priorityDropdownSelectedItem, onQigItemSelected: qigStore.instance.selectedQIGForMarkerOperation.questionPaperPartId, messageBody: this.messageBody, questionPaperPartId: qigStore.instance.selectedQIGForMarkerOperation.questionPaperPartId }));\r\n        }\r\n        var leftPanel;\r\n        if (_isMarkingCheckMode) {\r\n            if (worklistStore.instance.markingCheckExaminersList && worklistStore.instance.markingCheckExaminersList.first().toExaminer) {\r\n                leftPanel = (React.createElement(MarkCheckExaminers, { selectedLanguage: this.props.selectedLanguage, markCheckExaminers: worklistStore.instance.markingCheckExaminersList, id: 'markCheckExaminers', key: 'key_markCheckExaminers', onExaminerClick: this.onMarkingCheckRequesterExaminerClick }));\r\n            }\r\n        }\r\n        else {\r\n            leftPanel = (React.createElement(\"div\", { className: 'column-left-inner' },\r\n                React.createElement(MarkerInformationPanel, { renderedOn: this.state.renderedOn, markerInformation: this.markerInformation, selectedLanguage: this.props.selectedLanguage, showMessagePopup: this.onSendMessageClicked, isTeamManagementMode: markerOperationModeFactory.operationMode.isTeamManagementMode, showExaminerStateChangePopup: this.showExaminerStateChangePopup, showMessageLink: this.isSendMessageLinkVisible() }),\r\n                this.getMarkingInstructionLinkVisible(),\r\n                React.createElement(Targets, { renderedOn: this.state.renderedOn, markingTargetsSummary: this.markingTargetsSummary, selectedLanguage: this.props.selectedLanguage, liveTargetRenderedOn: this.state.targetRenderedOn, isTeamManagementMode: markerOperationModeFactory.operationMode.isTeamManagementMode })));\r\n        }\r\n        // Render all components for the worklist\r\n        return (React.createElement(\"div\", { className: classNames('content-wrapper', { 'relative': !_isMarkingCheckMode }, { 'check-marking': _isMarkingCheckMode }) },\r\n            this.markingInstructionFileListPanle,\r\n            React.createElement(\"div\", { id: 'column-left', onMouseOver: function () { _this.onMouseHoverOrMouseLeave(true); }, onMouseLeave: function () { _this.onMouseHoverOrMouseLeave(false); }, className: classNames('column-left', { 'hovered': this.isMouseHovered }, { 'check-examiner-info': _isMarkingCheckMode }) }, leftPanel),\r\n            React.createElement(WorkListContainer, { id: 'worklistcontainer_' + this.props.id, key: 'worklistcontainer_key_' + this.props.id, selectedLanguage: this.props.selectedLanguage, worklistType: this.worklistType, responseMode: this.responseMode, remarkRequestType: this.remarkRequestType, isDirectedRemark: this.isDirectedRemark, worklistTabDetails: this.worklistTabDetails, toggleLeftPanel: this.toggleLeftPanel, switchTab: this.switchTab, isRefreshing: this.isRefreshing, selectedTab: this.responseMode, isMarkingCheckWorklistAccessPresent: worklistStore.instance.isMarkingCheckWorklistAccessPresent, isTeamManagementMode: markerOperationModeFactory.operationMode.isTeamManagementMode, isMarkingCheckMode: _isMarkingCheckMode, hasTargetFound: this.hasTargetFound }),\r\n            messagePopup));\r\n    };\r\n    /**\r\n     * Show the markinginstruction panel only when pdf uploaded against that QIG.\r\n     */\r\n    WorkList.prototype.getMarkingInstructionLinkVisible = function () {\r\n        if ((markerOperationModeFactory.operationMode.isMarkingInstructionLinkVisible) && !(this.markerInformation == null) &&\r\n            markingInstructionStore.instance.markingInstructionList &&\r\n            markingInstructionStore.instance.markingInstructionList.size > 0) {\r\n            return (React.createElement(MarkingInstructionPanel, { id: 'marking-instruction-holder', key: 'marking-instruction-holder', onMarkInstructionFileClick: this.onMarkInstructionFileClick, onMarkInstructionPanelClick: this.onMarkInstructionPanelClick, onMarkingInstructonClickHandler: this.onMarkingInstructonClickHandler, renderedOn: this.state.markingInstructionPanelRenderedOn }));\r\n        }\r\n    };\r\n    /**\r\n     * Switch tab before data service call to get the data\r\n     * @param responseMode\r\n     */\r\n    WorkList.prototype.switchTab = function (responseMode) {\r\n        worklistActionCreator.responseModeChanged(responseMode, worklistStore.instance.isMarkingCheckMode);\r\n        if (responseMode !== this.responseMode && applicationStore.instance.isOnline) {\r\n            this.responseMode = responseMode;\r\n            /** set this to true to show loadinng indicator */\r\n            this.isRefreshing = true;\r\n            this.setState({ renderedOn: Date.now() });\r\n        }\r\n    };\r\n    /**\r\n     * Subscribe to language change event\r\n     */\r\n    WorkList.prototype.componentDidMount = function () {\r\n        this.loadDependencies();\r\n        window.addEventListener('touchend', this._boundHandleOnClick);\r\n        window.addEventListener('click', this._boundHandleOnClick);\r\n    };\r\n    /**\r\n     * Subscribing component updated event.\r\n     */\r\n    WorkList.prototype.componentDidUpdate = function () {\r\n        if (!this.state.modulesLoaded || this.state.isBusy || this.worklistType === enums.WorklistType.none) {\r\n            this.props.setOfflineContainer(true);\r\n        }\r\n    };\r\n    /**\r\n     * Hook all event listeners here, It will be called after loading depencies\r\n     * We required this type of implementation for the initial routing page like worklist, responsecontainer etc.\r\n     */\r\n    WorkList.prototype.addEventListeners = function () {\r\n        configurableCharacteristicsActionCreator.getExamBodyCCs(configurableCharacteristicsStore.instance.isExamBodyCCLoaded);\r\n        examinerstore.instance.addListener(examinerstore.ExaminerStore.MARKER_INFO_UPDATED_EVENT, this.updateMarkerInformationPanel);\r\n        targetSummaryStore.instance.addListener(targetSummaryStore.TargetSummaryStore.MARKING_PROGRESS_EVENT, this.refreshTargetProgress);\r\n        /* subscribing to worklist marking mode change event */\r\n        worklistStore.instance.addListener(worklistStore.WorkListStore.WORKLIST_MARKING_MODE_CHANGE, this.markingModeChanged);\r\n        responseStore.instance.addListener(responseStore.ResponseStore.RESPONSE_OPENED, this.openResponse);\r\n        responseStore.instance.addListener(responseStore.ResponseStore.RESPONSE_ALLOCATED_EVENT, this.onResponseAllocated);\r\n        // TODO need to remove. This is added to test the store as part of user story.\r\n        busyIndicatorStore.instance.addListener(busyIndicatorStore.BusyIndicatorStore.BUSY_INDICATOR, this.setBusyIndicator);\r\n        submitStore.instance.addListener(submitStore.SubmitStore.SUBMIT_RESPONSE_COMPLETED, this.onSubmitResponseCompleted);\r\n        userInfoStore.instance.addListener(userInfoStore.UserInfoStore.SHOW_LOGOUT_POPUP_EVENT, this.showLogoutConfirmation);\r\n        scriptStore.instance.addListener(scriptStore.ScriptStore.CANDIDATE_RESPONSE_METADATA_RETRIEVAL_EVENT, this.onCandidateResponseMetadataRetrieved);\r\n        worklistStore.instance.addListener(worklistStore.WorkListStore.WORKLIST_COUNT_CHANGE, this.updateResponseCount);\r\n        userOptionsStore.instance.addListener(userOptionsStore.UseroptionStore.USER_OPTION_GET_EVENT, this.onUserOptionsLoaded);\r\n        qigStore.instance.addListener(qigStore.QigStore.QIG_SELECTED_EVENT, this.onQigSelection);\r\n        messageStore.instance.addListener(messageStore.MessageStore.MESSAGE_CLOSE_EVENT, this.onCloseMessagePopup);\r\n        messageStore.instance.addListener(messageStore.MessageStore.MESSAGE_NAVIGATION_EVENT, this.onMessageNavigation);\r\n        stampStore.instance.addListener(stampStore.StampStore.STAMPS_LOADED_EVENT, responseSearchHelper.loadFavoriteStampForSelectedQig);\r\n        ccStore.instance.addListener(ccStore.ConfigurableCharacteristicsStore.EXAM_BODY_CC_GET, this.onExamBodyCCLoaded);\r\n        responseStore.instance.addListener(responseStore.ResponseStore.ATYPICAL_SEARCH_RESULT_EVENT, this.atypicalSearchClick);\r\n        worklistStore.instance.addListener(worklistStore.WorkListStore.MARKING_CHECK_EXAMINER_SELECTION_UPDATED, this.getMarkingCheckWorklistForSelectedExaminer);\r\n        worklistStore.instance.addListener(worklistStore.WorkListStore.MARK_CHECK_EXAMINERS_DATA_RETRIVED, this.markCheckExaminersDataRetrived);\r\n        targetSummaryStore.instance.addListener(targetSummaryStore.TargetSummaryStore.WORKLIST_INITIALISATION_COMPLETED, this.worklistInitialisationCompleted);\r\n        warningMessageStore.instance.addListener(warningMessageStore.WarningMessageStore.WARNING_MESSAGE_NAVIGATION_EVENT, warningMessageNavigationHelper.handleWarningMessageNavigation);\r\n        worklistStore.instance.addListener(worklistStore.WorkListStore.SIMULATION_TARGET_COMPLETED_EVENT, this.onSimulationTargetCompletion);\r\n        markingInstructionStore.instance.addListener(markingInstructionStore.MarkingInstructionStore.MARKINGINSTRUCTIONS_DATA_LOADED_EVENT, this.onMarkingInstructionsLoaded);\r\n        markingInstructionStore.instance.addListener(markingInstructionStore.MarkingInstructionStore.MARKINGINSTRUCTION_PANEL_CLOSED_EVENT, this.onMarkingInstrucionPanleClosed);\r\n    };\r\n    /**\r\n     * Hook all event listeners for team management here, It will be called after loading depencies\r\n     * We required this type of implementation for the initial routing page like worklist, responsecontainer etc.\r\n     */\r\n    WorkList.prototype.addEventListenersForTeamManagement = function () {\r\n        if (markerOperationModeFactory && markerOperationModeFactory.operationMode.isTeamManagementMode) {\r\n            teamManagementStore.instance.addListener(teamManagementStore.TeamManagementStore.CHANGE_EXAMINER_STATUS_UPDATED, this.examinerChangeStatusReceived);\r\n            teamManagementStore.instance.addListener(teamManagementStore.TeamManagementStore.PROVIDE_SECOND_STANDARDISATION_UPDATED, this.secondStandardisationReceived);\r\n            teamManagementStore.instance.addListener(teamManagementStore.TeamManagementStore.APPROVAL_MANAGEMENT_ACTION_EXECUTED, this.onApprovalManagementActionExecuted);\r\n        }\r\n    };\r\n    /**\r\n     * Remove all event listeners for team management here.\r\n     */\r\n    WorkList.prototype.removeEventListenersForTeamManagement = function () {\r\n        if (markerOperationModeFactory && markerOperationModeFactory.operationMode.isTeamManagementMode && teamManagementStore) {\r\n            teamManagementStore.instance.removeListener(teamManagementStore.TeamManagementStore.CHANGE_EXAMINER_STATUS_UPDATED, this.examinerChangeStatusReceived);\r\n            teamManagementStore.instance.removeListener(teamManagementStore.TeamManagementStore.PROVIDE_SECOND_STANDARDISATION_UPDATED, this.secondStandardisationReceived);\r\n            teamManagementStore.instance.removeListener(teamManagementStore.TeamManagementStore.APPROVAL_MANAGEMENT_ACTION_EXECUTED, this.onApprovalManagementActionExecuted);\r\n        }\r\n    };\r\n    /**\r\n     * Unsubscribe language change event\r\n     */\r\n    WorkList.prototype.componentWillUnmount = function () {\r\n        examinerstore.instance.removeListener(examinerstore.ExaminerStore.MARKER_INFO_UPDATED_EVENT, this.updateMarkerInformationPanel);\r\n        targetSummaryStore.instance.removeListener(targetSummaryStore.TargetSummaryStore.MARKING_PROGRESS_EVENT, this.refreshTargetProgress);\r\n        /* unsubscribing to worklist marking mode change event */\r\n        worklistStore.instance.removeListener(worklistStore.WorkListStore.WORKLIST_MARKING_MODE_CHANGE, this.markingModeChanged);\r\n        responseStore.instance.removeListener(responseStore.ResponseStore.RESPONSE_OPENED, this.openResponse);\r\n        responseStore.instance.removeListener(responseStore.ResponseStore.RESPONSE_ALLOCATED_EVENT, this.onResponseAllocated);\r\n        submitStore.instance.removeListener(submitStore.SubmitStore.SUBMIT_RESPONSE_COMPLETED, this.onSubmitResponseCompleted);\r\n        busyIndicatorStore.instance.removeListener(busyIndicatorStore.BusyIndicatorStore.BUSY_INDICATOR, this.setBusyIndicator);\r\n        userInfoStore.instance.removeListener(userInfoStore.UserInfoStore.SHOW_LOGOUT_POPUP_EVENT, this.showLogoutConfirmation);\r\n        scriptStore.instance.removeListener(scriptStore.ScriptStore.CANDIDATE_RESPONSE_METADATA_RETRIEVAL_EVENT, this.onCandidateResponseMetadataRetrieved);\r\n        worklistStore.instance.removeListener(worklistStore.WorkListStore.WORKLIST_COUNT_CHANGE, this.updateResponseCount);\r\n        userOptionsStore.instance.removeListener(userOptionsStore.UseroptionStore.USER_OPTION_GET_EVENT, this.onUserOptionsLoaded);\r\n        qigStore.instance.removeListener(qigStore.QigStore.QIG_SELECTED_EVENT, this.onQigSelection);\r\n        messageStore.instance.removeListener(messageStore.MessageStore.MESSAGE_CLOSE_EVENT, this.onCloseMessagePopup);\r\n        messageStore.instance.removeListener(messageStore.MessageStore.MESSAGE_NAVIGATION_EVENT, this.onMessageNavigation);\r\n        stampStore.instance.removeListener(stampStore.StampStore.STAMPS_LOADED_EVENT, responseSearchHelper.loadFavoriteStampForSelectedQig);\r\n        ccStore.instance.removeListener(ccStore.ConfigurableCharacteristicsStore.EXAM_BODY_CC_GET, this.onExamBodyCCLoaded);\r\n        this.removeEventListenersForTeamManagement();\r\n        responseStore.instance.removeListener(responseStore.ResponseStore.ATYPICAL_SEARCH_RESULT_EVENT, this.atypicalSearchClick);\r\n        worklistStore.instance.removeListener(worklistStore.WorkListStore.MARKING_CHECK_EXAMINER_SELECTION_UPDATED, this.getMarkingCheckWorklistForSelectedExaminer);\r\n        worklistStore.instance.removeListener(worklistStore.WorkListStore.MARK_CHECK_EXAMINERS_DATA_RETRIVED, this.markCheckExaminersDataRetrived);\r\n        targetSummaryStore.instance.removeListener(targetSummaryStore.TargetSummaryStore.WORKLIST_INITIALISATION_COMPLETED, this.worklistInitialisationCompleted);\r\n        warningMessageStore.instance.removeListener(warningMessageStore.WarningMessageStore.WARNING_MESSAGE_NAVIGATION_EVENT, warningMessageNavigationHelper.handleWarningMessageNavigation);\r\n        worklistStore.instance.removeListener(worklistStore.WorkListStore.SIMULATION_TARGET_COMPLETED_EVENT, this.onSimulationTargetCompletion);\r\n        markingInstructionStore.instance.removeListener(markingInstructionStore.MarkingInstructionStore.MARKINGINSTRUCTIONS_DATA_LOADED_EVENT, this.onMarkingInstructionsLoaded);\r\n        markingInstructionStore.instance.removeListener(markingInstructionStore.MarkingInstructionStore.\r\n            MARKINGINSTRUCTION_PANEL_CLOSED_EVENT, this.onMarkingInstrucionPanleClosed);\r\n        window.removeEventListener('click', this._boundHandleOnClick);\r\n        window.removeEventListener('touchend', this._boundHandleOnClick);\r\n    };\r\n    /**\r\n     * component will receive props\r\n     */\r\n    WorkList.prototype.componentWillReceiveProps = function (nextProps) {\r\n        if (this.props !== nextProps) {\r\n            this.setState({\r\n                renderedOn: nextProps.renderedOn\r\n            });\r\n        }\r\n    };\r\n    /**\r\n     * Reseting the confirmation dialog's state to make it invisible.\r\n     */\r\n    WorkList.prototype.resetLogoutConfirmationSatus = function () {\r\n        this.setState({ isLogoutConfirmationPopupDisplaying: false });\r\n    };\r\n    /**\r\n     * This method will toggle side panel for devices.\r\n     */\r\n    WorkList.prototype.toggleLeftPanel = function () {\r\n        var panelToggleState = !this.state.enableNavigationPanelVisibility;\r\n        this.setState({ enableNavigationPanelVisibility: panelToggleState });\r\n        userOptionsHelper.save(useroptionKeys.MARKER_INFO_PANEL_EXPANDED, String(panelToggleState));\r\n    };\r\n    /**\r\n     * Load all messages to sync with worklist\r\n     */\r\n    WorkList.prototype.forceLoadInboxMessages = function () {\r\n        var args = {\r\n            recentMessageTime: null,\r\n            messageFolderType: enums.MessageFolderType.Inbox,\r\n            forceLoadMessages: true,\r\n            candidateResponseId: null,\r\n            isTeamManagementView: markerOperationModeFactory.operationMode.isTeamManagementMode,\r\n            hiddenQigList: qigStore.instance.HiddenQIGs\r\n        };\r\n        messagingActionCreator.getMessages(args, false);\r\n    };\r\n    /**\r\n     * return true if we need to render the personal information panel\r\n     */\r\n    WorkList.prototype.doRenderMarkerInformationPanel = function () {\r\n        if (this.markerInformation === undefined) {\r\n            return false;\r\n        }\r\n        return this.markerInformation.approvalStatus !== enums.ExaminerApproval.None\r\n            && this.markerInformation.markerRoleID !== enums.ExaminerRole.none;\r\n    };\r\n    /**\r\n     * Method to unload the refresh indicator inorder to show the worklist\r\n     */\r\n    WorkList.prototype.unloadWorklistRefreshIndicatorToShowWorklist = function () {\r\n        /** Resetting the refresh variable to show actual data instead of loading indicator */\r\n        this.isRefreshing = false;\r\n        if (this.isContentRefreshStarted) {\r\n            this.isContentRefreshSucceeded.isWorklistRefreshCompleted = true;\r\n        }\r\n        this.checkIfContentRefreshCompleted();\r\n        this.worklistTabDetails = worklistComponentHelper.getWorklistTabDetails(worklistStore.instance.getMarkingModeByWorkListType(worklistStore.instance.currentWorklistType));\r\n        this.setState({ renderedOn: Date.now() });\r\n        if (responseStore.instance._openAtypicalResponse) {\r\n            var allocatedResponseItems = responseStore.instance.responseData.allocatedResponseItems;\r\n            var responseData_1 = undefined;\r\n            if (allocatedResponseItems) {\r\n                // identify the markgroup for which display id can be found\r\n                // this is required for whole response atypical mark now, which creates multiple markgroupids\r\n                // among which only one can find the display id from the worklist data.\r\n                allocatedResponseItems.forEach(function (item) {\r\n                    if (responseData_1 === undefined &&\r\n                        worklistStore.instance.getResponseDetailsByMarkGroupId(item.markGroupId) &&\r\n                        worklistStore.instance.getResponseDetailsByMarkGroupId(item.markGroupId).displayId) {\r\n                        responseData_1 = item;\r\n                    }\r\n                });\r\n            }\r\n            if (responseData_1) {\r\n                responseHelper.openResponse(parseInt('6' + responseData_1.displayID.toString()), enums.ResponseNavigation.specific, worklistStore.instance.getResponseMode, responseData_1.markGroupId, enums.ResponseViewMode.zoneView);\r\n                markSchemeHelper.getMarks(parseInt('6' + responseData_1.displayID.toString()), enums.MarkingMode.LiveMarking);\r\n                responseStore.instance.resetOpenAtypicalFlag();\r\n                eCourseworkHelper.fetchECourseWorkCandidateScriptMetadata(responseData_1.displayID);\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * This function is called on 'OK' click of response allocation error dialog.\r\n     * This will close the popup.\r\n     */\r\n    WorkList.prototype.onOkClickOfResponseAllocationErrorDialog = function () {\r\n        if (examinerstore.instance.getMarkerInformation.approvalStatus === enums.ExaminerApproval.Withdrawn) {\r\n            qigActionCreator.getQIGSelectorData(0);\r\n            loadContainerActionCreator.loadContainer(enums.PageContainers.QigSelector);\r\n        }\r\n        this.setState({\r\n            isResponseAllocationErrorDialogDisplaying: false,\r\n            renderedOn: Date.now()\r\n        });\r\n    };\r\n    /**\r\n     * if data refresh is completed, hide busy indicator\r\n     */\r\n    WorkList.prototype.checkIfContentRefreshCompleted = function () {\r\n        if (this.isContentRefreshSucceeded &&\r\n            this.isContentRefreshSucceeded.isMarkingProgressCompleted &&\r\n            this.isContentRefreshSucceeded.isWorklistRefreshCompleted) {\r\n            this.resetContentRefreshStatuses();\r\n            /* Reset the busy indicator */\r\n            busyIndicatorActionCreator.setBusyIndicatorInvoker(enums.BusyIndicatorInvoker.none);\r\n            /** if WorklistType is standardisation, approval status may change on response submission */\r\n            /*\r\n            if ((submitStore.instance.getCurrentWorklistType === enums.WorklistType.standardisation\r\n                || submitStore.instance.getCurrentWorklistType === enums.WorklistType.secondstandardisation)\r\n                && this.isSubmitCompleted) {\r\n                this.isSubmitCompleted = false;\r\n                this.markerInformation = examinerstore.instance.getMarkerInformation;\r\n                if (this.markerInformation.approvalStatus === enums.ExaminerApproval.Approved) {\r\n                    this.setState(\r\n                        {\r\n                            renderedOn: Date.now(),\r\n                            isAutoApprovalDialogDisplaying: true\r\n                        }\r\n                    );\r\n                } else if (this.markerInformation.approvalStatus === enums.ExaminerApproval.Suspended) {\r\n                    this.markerInformation = examinerstore.instance.getMarkerInformation;\r\n                    this.setState({ renderedOn: Date.now() });\r\n                }\r\n            }\r\n            */\r\n        }\r\n    };\r\n    /**\r\n     * Reset content refresh statuses\r\n     */\r\n    WorkList.prototype.resetContentRefreshStatuses = function () {\r\n        this.isContentRefreshSucceeded.isMarkingProgressCompleted = false;\r\n        this.isContentRefreshSucceeded.isWorklistRefreshCompleted = false;\r\n        this.isContentRefreshStarted = false;\r\n    };\r\n    /**\r\n     * Handle the Withdrwan popup\r\n     */\r\n    WorkList.prototype.handleWithDrawnError = function () {\r\n        this.setState({\r\n            isResponseAllocationErrorDialogDisplaying: true,\r\n            renderedOn: Date.now(),\r\n            errorDialogHeaderText: localeStore.instance.TranslateText('marking.worklist.response-allocation-error-dialog.response-allocation-error-header-withdrawnMarker'),\r\n            errorDialogContentText: localeStore.instance.TranslateText('marking.worklist.response-allocation-error-dialog.response-allocation-error-withdrawnMarker'),\r\n            isBusy: false\r\n        });\r\n    };\r\n    /**\r\n     * Start the content refresh\r\n     */\r\n    WorkList.prototype.initiateContentRefresh = function () {\r\n        var _worklistType = allocateResponseHelper.getWorkListTypeByMarkingMode(targetHelper.getSelectedQigMarkingMode());\r\n        // Load the marking progress\r\n        worklistActionCreator.getWorklistMarkerProgressData(qigStore.instance.selectedQIGForMarkerOperation.examinerRoleId, qigStore.instance.selectedQIGForMarkerOperation.markSchemeGroupId, qigStore.instance.selectedQIGForMarkerOperation.isElectronicStandardisationTeamMember);\r\n        // Load marking instructions \r\n        if (markerOperationModeFactory.operationMode.isMarkingInstructionLinkVisible) {\r\n            markingInstructionActionCreator.getMarkingInstructionsActionCreator(qigStore.instance.selectedQIGForMarkerOperation.markSchemeGroupId, configurableCharacteristicsHelper.markingInstructionCCValue, false);\r\n        }\r\n    };\r\n    /**\r\n     *  This will load the dependencies dynamically during component mount.\r\n     */\r\n    WorkList.prototype.loadDependencies = function () {\r\n        __webpack_require__.e/* require.ensure */(3).then((function () {\r\n            MarkerInformationPanel = __webpack_require__(/*! ./markerinformation/markerinformationpanel */ 588);\r\n            localeStore = __webpack_require__(/*! ../../stores/locale/localestore */ 226);\r\n            qigStore = __webpack_require__(/*! ../../stores/qigselector/qigstore */ 230);\r\n            examinerstore = __webpack_require__(/*! ../../stores/markerinformation/examinerstore */ 259);\r\n            WorkListMessage = __webpack_require__(/*! ./shared/worklistmessage */ 530);\r\n            ConfirmationDialog = __webpack_require__(/*! ../utility/confirmationdialog */ 408);\r\n            Targets = __webpack_require__(/*! ./targetsummary/targets */ 596);\r\n            overviewData = __webpack_require__(/*! ../../stores/qigselector/typings/overviewdata */ 607);\r\n            qigInfo = __webpack_require__(/*! ../../stores/qigselector/typings/qigsummary */ 608);\r\n            markingTarget = __webpack_require__(/*! ../../stores/qigselector/typings/markingtarget */ 606);\r\n            targetSummaryStore = __webpack_require__(/*! ../../stores/worklist/targetsummarystore */ 305);\r\n            markingTargetSummary = __webpack_require__(/*! ../../stores/worklist/typings/markingtargetsummary */ 611);\r\n            WorkListContainer = __webpack_require__(/*! ./worklistcontainer */ 598);\r\n            worklistStore = __webpack_require__(/*! ../../stores/worklist/workliststore */ 231);\r\n            markSchemeStructureStore = __webpack_require__(/*! ../../stores/markschemestructure/markschemestructurestore */ 460);\r\n            responseStore = __webpack_require__(/*! ../../stores/response/responsestore */ 235);\r\n            worklistActionCreator = __webpack_require__(/*! ../../actions/worklist/worklistactioncreator */ 261);\r\n            GenericDialog = __webpack_require__(/*! ../utility/genericdialog */ 317);\r\n            responseAllocationValidationHelper = __webpack_require__(/*! ../utility/responseallocation/responseallocationvalidationhelper */ 584);\r\n            responseAllocationValidationParameter = __webpack_require__(/*! ../utility/responseallocation/responseallocationvalidationparameter */ 522);\r\n            classNames = __webpack_require__(/*! classnames */ 39);\r\n            busyIndicatorStore = __webpack_require__(/*! ../../stores/busyindicator/busyindicatorstore */ 326);\r\n            submitStore = __webpack_require__(/*! ../../stores/submit/submitstore */ 293);\r\n            worklistComponentHelper = __webpack_require__(/*! ./worklistcomponenthelper */ 373);\r\n            submitActionCreator = __webpack_require__(/*! ../../actions/submit/submitactioncreator */ 297);\r\n            busyIndicatorActionCreator = __webpack_require__(/*! ../../actions/busyindicator/busyindicatoractioncreator */ 279);\r\n            scriptImageDownloadHelper = __webpack_require__(/*! ../utility/backgroundworker/scriptimagedownloadhelper */ 481);\r\n            scriptActionCreator = __webpack_require__(/*! ../../actions/script/scriptactioncreator */ 435);\r\n            scriptStore = __webpack_require__(/*! ../../stores/script/scriptstore */ 417);\r\n            scriptImageDownloader = __webpack_require__(/*! ../../utility/backgroundworkers/scriptimagedownloader/scriptimagedownloader */ 498);\r\n            targetHelper = __webpack_require__(/*! ../../utility/target/targethelper */ 300);\r\n            userInfoStore = __webpack_require__(/*! ../../stores/userinfo/userinfostore */ 244);\r\n            backgroundPulseHelper = __webpack_require__(/*! ../../utility/backgroundpulse/backgroundpulsehelper */ 535);\r\n            Footer = __webpack_require__(/*! ../footer */ 382);\r\n            gaHelper = __webpack_require__(/*! ../../utility/googleanalytics/gahelper */ 537);\r\n            stampActionCreator = __webpack_require__(/*! ../../actions/stamp/stampactioncreator */ 284);\r\n            configurableCharacteristicsStore = __webpack_require__(/*! ../../stores/configurablecharacteristics/configurablecharacteristicsstore */ 341);\r\n            configurableCharacteristicsActionCreator =\r\n                __webpack_require__(/*! ../../actions/configurablecharacteristics/configurablecharacteristicsactioncreator */ 310);\r\n            qigActionCreator = __webpack_require__(/*! ../../actions/qigselector/qigselectoractioncreator */ 253);\r\n            stampStore = __webpack_require__(/*! ../../stores/stamp/stampstore */ 260);\r\n            exceptionActionCreator = __webpack_require__(/*! ../../actions/exception/exceptionactioncreator */ 428);\r\n            exceptionStore = __webpack_require__(/*! ../../stores/exception/exceptionstore */ 277);\r\n            MessagePopup = __webpack_require__(/*! ../message/messagepopup */ 457);\r\n            messageHelper = __webpack_require__(/*! ../utility/message/messagehelper */ 283);\r\n            messagingActionCreator = __webpack_require__(/*! ../../actions/messaging/messagingactioncreator */ 268);\r\n            messageStore = __webpack_require__(/*! ../../stores/message/messagestore */ 240);\r\n            MarkingCheckPopup = __webpack_require__(/*! ./markerinformation/markingcheckpopup */ 589);\r\n            stringFormatHelper = __webpack_require__(/*! ../../utility/stringformat/stringformathelper */ 250);\r\n            responseSearchHelper = __webpack_require__(/*! ../../utility/responsesearch/responsesearchhelper */ 321);\r\n            htmlUtilities = __webpack_require__(/*! ../../utility/generic/htmlutilities */ 243);\r\n            loadContainerActionCreator = __webpack_require__(/*! ../../actions/navigation/loadcontaineractioncreator */ 397);\r\n            operationModeHelper = __webpack_require__(/*! ../utility/userdetails/userinfo/operationmodehelper */ 289);\r\n            MarkCheckExaminers = __webpack_require__(/*! ./markcheck/markcheckexaminers */ 586);\r\n            markingCheckActionCreator = __webpack_require__(/*! ../../actions/markingcheck/markingcheckactioncreator */ 311);\r\n            userInfoActionCreator = __webpack_require__(/*! ../../actions/userinfo/userinfoactioncreator */ 255);\r\n            helpExaminersDataHelper = __webpack_require__(/*! ../../utility/teammanagement/helpers/helpexaminersdatahelper */ 486);\r\n            warningMessageStore = __webpack_require__(/*! ../../stores/teammanagement/warningmessagestore */ 327);\r\n            warningMessageNavigationHelper = __webpack_require__(/*! ../../utility/teammanagement/helpers/warningmessagenavigationhelper */ 475);\r\n            markingInstructionActionCreator = __webpack_require__(/*! ../../actions/markinginstructions/markinginstructionactioncreator */ 476);\r\n            this._warningMessageNavigationHelper = new warningMessageNavigationHelper();\r\n            // ensuring that all the dependencies are loaded at the begining\r\n            this.loadDependenciesForTeamManagement();\r\n            this.addEventListeners();\r\n            /* Load the unread mandatory message status for displaying mandatory messages */\r\n            messagingActionCreator.getUnreadMandatoryMessageStatus(enums.TriggerPoint.Worklist);\r\n            this.setState({ modulesLoaded: true, selectedLanguage: localeStore.instance ? localeStore.instance.Locale : '' });\r\n        }.bind(this)).bind(null, __webpack_require__)).catch(__webpack_require__.oe);\r\n    };\r\n    /**\r\n     *  This will load the dependencies for team management dynamically during component mount.\r\n     */\r\n    WorkList.prototype.loadDependenciesForTeamManagement = function () {\r\n        __webpack_require__.e/* require.ensure */(15).then((function () {\r\n            teamManagementActionCreator = __webpack_require__(/*! ../../actions/teammanagement/teammanagementactioncreator */ 263);\r\n            ExaminerStateChangePopup = __webpack_require__(/*! ./markerinformation/examinerstatechangepopup */ 587);\r\n            this.addEventListenersForTeamManagement();\r\n        }.bind(this)).bind(null, __webpack_require__)).catch(__webpack_require__.oe);\r\n    };\r\n    /**\r\n     * In help examiners view the message link has to be shown based on the SEP action items\r\n     */\r\n    WorkList.prototype.isSendMessageLinkVisible = function () {\r\n        if (markerOperationModeFactory.operationMode.isHelpExaminersView && qigStore.instance.selectedQIGForMarkerOperation) {\r\n            var sepActions = new helpExaminersDataHelper().getSEPActions(qigStore.instance.selectedQIGForMarkerOperation.examinerRoleId);\r\n            if (sepActions && (sepActions.indexOf(enums.SEPAction.SendMessage) > -1)) {\r\n                return true;\r\n            }\r\n            return false;\r\n        }\r\n        return true;\r\n    };\r\n    /**\r\n     * notify worklist type change.\r\n     */\r\n    WorkList.prototype.notifyWorklistTypeChange = function (worklistType, responseMode) {\r\n        worklistActionCreator.notifyWorklistTypeChange(qigStore.instance.selectedQIGForMarkerOperation.markSchemeGroupId, qigStore.instance.selectedQIGForMarkerOperation.examinerRoleId, qigStore.instance.selectedQIGForMarkerOperation.questionPaperPartId, worklistType, responseMode, worklistComponentHelper.getRemarkRequestType(worklistType), worklistComponentHelper.getIsDirectedRemark(worklistType), qigStore.instance.selectedQIGForMarkerOperation.isElectronicStandardisationTeamMember, false);\r\n    };\r\n    /**\r\n     * On MarkInstruction File\r\n     * @param {any} source - The source element\r\n     */\r\n    WorkList.prototype.onMarkInstructionFileClick = function (documentId) {\r\n        var questionPaperId = qigStore.instance.selectedQIGForMarkerOperation.questionPaperPartId;\r\n        var msgId = qigStore.instance.selectedQIGForMarkerOperation.markSchemeGroupId;\r\n        var markingInstructionLevel = configurableCharacteristicsHelper.markingInstructionCCValue;\r\n        var markingInstruction = markingInstructionStore.instance.markingInstructionList.find(function (x) { return x.documentId === documentId; });\r\n        var markingInstructionReadStatus = markingInstruction.readStatus;\r\n        var markingInstructionId = markingInstruction.markingInstructionId;\r\n        var arg = new markingInstructionArg(documentId, questionPaperId, msgId, markingInstructionLevel, markingInstructionId, markingInstructionReadStatus);\r\n        markingInstructioActionCreator.updateMarkingInstruction(documentId, markingInstructionReadStatus);\r\n        window.open(urls.MARKING_INSTRUCTION_GET_URL + '?' + $.param(arg));\r\n    };\r\n    /**\r\n     * On Mark InstructionPanel Click\r\n     * @param {any} source - The source element\r\n     */\r\n    WorkList.prototype.onMarkInstructionPanelClick = function () {\r\n        if (markingInstructionStore.instance.markingInstructionList &&\r\n            markingInstructionStore.instance.markingInstructionList.count() === 1) {\r\n            this.onMarkInstructionFileClick(markingInstructionStore.instance.markingInstructionList.first().documentId);\r\n        }\r\n        else {\r\n            if (!this.state.isMarkingInstructionPanelOpen) {\r\n                // calculate scroll width of column-let while opening the marking instruction popup, to set the margin-left\r\n                this.columnLeftScrollWidth = htmlUtilities.getElementById('column-left') ?\r\n                    htmlUtilities.getElementById('column-left').offsetWidth - htmlUtilities.getElementById('column-left').clientWidth\r\n                    : 0;\r\n            }\r\n            markingInstructioActionCreator.markingInstructionPanelOpenActionCreator(!this.state.isMarkingInstructionPanelOpen);\r\n            if (!this.state.isMarkingInstructionPanelOpen) {\r\n                var markinInstructionMenu = document.getElementById('marking-instruction-menu');\r\n                if (markinInstructionMenu) {\r\n                    // reset the scroll position when popup is opened\r\n                    markinInstructionMenu.scrollTop = 0;\r\n                }\r\n            }\r\n            this.setState({\r\n                markingInstructionPanelRenderedOn: Date.now(),\r\n                isMarkingInstructionPanelOpen: !this.state.isMarkingInstructionPanelOpen,\r\n                isMarkingInstructionPanelClicked: true\r\n            });\r\n        }\r\n    };\r\n    Object.defineProperty(WorkList.prototype, \"markingInstructionFileListPanle\", {\r\n        /**\r\n         * Gets the marking instruction file list panel,\r\n         * render in worklist instead of marking instruction component to handle jerking/hovering issues in worklist\r\n         */\r\n        get: function () {\r\n            var _this = this;\r\n            // list of marking instruction files element\r\n            var fileList = (markingInstructionStore.instance.markingInstructionList ?\r\n                markingInstructionStore.instance.markingInstructionList.map(function (markingInstruction, index) {\r\n                    var liClass = 'marking-instruction-item';\r\n                    if (markingInstruction.readStatus === false) {\r\n                        liClass = 'marking-instruction-item unread';\r\n                    }\r\n                    return (React.createElement(\"li\", { id: 'marking-instruction-item_' + markingInstruction.documentName, className: liClass },\r\n                        React.createElement(MarkingInstructionFilePanel, { id: 'id_markinginstructionlink_' + markingInstruction.documentId, key: 'key_markinginstructionlink_' + markingInstruction.documentId, documentId: markingInstruction.documentId, documentName: markingInstruction.documentName, onMarkInstructionFileClick: _this.onMarkInstructionFileClick.bind(_this), renderedOn: _this.state.markingInstructionPanelRenderedOn })));\r\n                }) : null);\r\n            // gets the top of marking instruction holder\r\n            var markingInstructionHolder = htmlUtilities.getElementById('markinginstructionlink');\r\n            var markingInstructionHolderTop = markingInstructionHolder ? markingInstructionHolder.getBoundingClientRect().top : 0;\r\n            // css style for marking instruction file menu and set top with top of marking instruction holder\r\n            // consider scroll width  of column left while setting margin left \r\n            var markingInstructionFileListStyle = {\r\n                top: markingInstructionHolderTop + 'px',\r\n                marginLeft: (-1 * this.columnLeftScrollWidth) + 'px'\r\n            };\r\n            // set the height of drop down        \r\n            var markingInstructionDropDownHeight = window.innerHeight - markingInstructionHolderTop;\r\n            var markingInstructionMenuStyle = {\r\n                maxHeight: markingInstructionDropDownHeight + 'px'\r\n            };\r\n            // marking instruction files list panel\r\n            var markingInstructionFileList = (React.createElement(\"div\", { className: classNames('dropdown-wrap  marking-instruction-menu left-column-menu', {\r\n                    'open': this.state.isMarkingInstructionPanelOpen && this.state.isMarkingInstructionPanelClicked,\r\n                    'close': !this.state.isMarkingInstructionPanelOpen && this.state.isMarkingInstructionPanelClicked,\r\n                    '': !this.state.isMarkingInstructionPanelClicked\r\n                }), style: markingInstructionFileListStyle, id: 'markingInstructionMenu' },\r\n                React.createElement(\"ul\", { id: 'marking-instruction-menu', className: 'menu', style: markingInstructionMenuStyle }, fileList)));\r\n            return markingInstructionFileList;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return WorkList;\r\n}(pureRenderComponent));\r\nmodule.exports = WorkList;\r\n\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! jquery */ 42)))//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTk3LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvd29ya2xpc3Qvd29ya2xpc3QudHN4P2JkN2YiXSwic291cmNlc0NvbnRlbnQiOlsiLyogdHNsaW50OmRpc2FibGU6bm8tdW51c2VkLXZhcmlhYmxlICovXHJcbi8qKiBBZGQgbmV3IGRlcGVuZGVuY2llcyBpbiBsb2FkRGVwZW5kZW5jaWVzKCkgbWV0aG9kIHVubGVzcyB5b3VyIGRlcGVuZGVuY2llcyBhcmUgbm90IHVzaW5nIGluIGNvbnN0cnVjdG9yICovXHJcbmltcG9ydCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XHJcbi8qIHRzbGludDplbmFibGU6bm8tdW51c2VkLXZhcmlhYmxlICovXHJcbmltcG9ydCBwdXJlUmVuZGVyQ29tcG9uZW50ID0gcmVxdWlyZSgnLi4vYmFzZS9wdXJlcmVuZGVyY29tcG9uZW50Jyk7XHJcbmltcG9ydCBjb25maWd1cmFibGVDaGFyYWN0ZXJpc3RpY3NOYW1lcyA9IHJlcXVpcmUoJy4uLy4uL3V0aWxpdHkvY29uZmlndXJhYmxlY2hhcmFjdGVyaXN0aWMvY29uZmlndXJhYmxlY2hhcmFjdGVyaXN0aWNzbmFtZXMnKTtcclxuaW1wb3J0IGNvbmZpZ3VyYWJsZUNoYXJhY3RlcmlzdGljc0hlbHBlciA9IHJlcXVpcmUoJy4uLy4uL3V0aWxpdHkvY29uZmlndXJhYmxlY2hhcmFjdGVyaXN0aWMvY29uZmlndXJhYmxlY2hhcmFjdGVyaXN0aWNzaGVscGVyJyk7XHJcbmltcG9ydCBlbnVtcyA9IHJlcXVpcmUoJy4uL3V0aWxpdHkvZW51bXMnKTtcclxuaW1wb3J0IGNhbmRpZGF0ZVNjcmlwdEluZm8gPSByZXF1aXJlKCcuLi8uLi9kYXRhc2VydmljZXMvc2NyaXB0L3R5cGluZ3MvY2FuZGlkYXRlc2NyaXB0aW5mbycpO1xyXG5pbXBvcnQgSW1tdXRhYmxlID0gcmVxdWlyZSgnaW1tdXRhYmxlJyk7XHJcbmltcG9ydCBIZWFkZXIgPSByZXF1aXJlKCcuLi9oZWFkZXInKTtcclxuaW1wb3J0IGFsbG9jYXRlUmVzcG9uc2VIZWxwZXIgPSByZXF1aXJlKCcuLi91dGlsaXR5L3Jlc3BvbnNlYWxsb2NhdGlvbi9hbGxvY2F0ZXJlc3BvbnNlc2hlbHBlcicpO1xyXG5pbXBvcnQgbWFya2VycHJvZ3Jlc3NkYXRhID0gcmVxdWlyZSgnLi4vLi4vc3RvcmVzL3dvcmtsaXN0L3R5cGluZ3MvbWFya2VycHJvZ3Jlc3NkYXRhJyk7XHJcbmltcG9ydCBtYXJrZXJJbmZvcm1hdGlvbkFjdGlvbkNyZWF0b3IgPSByZXF1aXJlKCcuLi8uLi9hY3Rpb25zL21hcmtlcmluZm9ybWF0aW9uL21hcmtlcmluZm9ybWF0aW9uYWN0aW9uY3JlYXRvcicpO1xyXG5pbXBvcnQgcmVzcG9uc2VBY3Rpb25DcmVhdG9yID0gcmVxdWlyZSgnLi4vLi4vYWN0aW9ucy9yZXNwb25zZS9yZXNwb25zZWFjdGlvbmNyZWF0b3InKTtcclxuaW1wb3J0IEJ1c3lJbmRpY2F0b3IgPSByZXF1aXJlKCcuLi91dGlsaXR5L2J1c3lpbmRpY2F0b3IvYnVzeWluZGljYXRvcicpO1xyXG5kZWNsYXJlIGxldCBjb25maWc6IGFueTtcclxuaW1wb3J0IG5hdmlnYXRpb25IZWxwZXIgPSByZXF1aXJlKCcuLi91dGlsaXR5L25hdmlnYXRpb24vbmF2aWdhdGlvbmhlbHBlcicpO1xyXG5pbXBvcnQgUHJvbWlzZSA9IHJlcXVpcmUoJ2VzNi1wcm9taXNlJyk7XHJcbmltcG9ydCB1c2VyT3B0aW9uc0hlbHBlciA9IHJlcXVpcmUoJy4uLy4uL3V0aWxpdHkvdXNlcm9wdGlvbi91c2Vyb3B0aW9uc2hlbHBlcicpO1xyXG5pbXBvcnQgdXNlcm9wdGlvbktleXMgPSByZXF1aXJlKCcuLi8uLi91dGlsaXR5L3VzZXJvcHRpb24vdXNlcm9wdGlvbmtleXMnKTtcclxuaW1wb3J0IHVzZXJPcHRpb25zU3RvcmUgPSByZXF1aXJlKCcuLi8uLi9zdG9yZXMvdXNlcm9wdGlvbi91c2Vyb3B0aW9uc3RvcmUnKTtcclxuaW1wb3J0IHN0cmluZ0hlbHBlciA9IHJlcXVpcmUoJy4uLy4uL3V0aWxpdHkvZ2VuZXJpYy9zdHJpbmdoZWxwZXInKTtcclxuaW1wb3J0IG1hcmtlckluZm9ybWF0aW9uID0gcmVxdWlyZSgnLi4vLi4vc3RvcmVzL21hcmtlcmluZm9ybWF0aW9uL3R5cGluZ3MvbWFya2VyaW5mb3JtYXRpb24nKTtcclxuaW1wb3J0IGdldEV4Y2VwdGlvblR5cGVzQXJndW1lbnRzID0gcmVxdWlyZSgnLi4vLi4vZGF0YXNlcnZpY2VzL2V4Y2VwdGlvbi9nZXRleGNlcHRpb250eXBlc2FyZ3VtZW50cycpO1xyXG5pbXBvcnQgY2NTdG9yZSA9IHJlcXVpcmUoJy4uLy4uL3N0b3Jlcy9jb25maWd1cmFibGVjaGFyYWN0ZXJpc3RpY3MvY29uZmlndXJhYmxlY2hhcmFjdGVyaXN0aWNzc3RvcmUnKTtcclxuaW1wb3J0IHN1Ym1pdEhlbHBlciA9IHJlcXVpcmUoJy4uL3V0aWxpdHkvc3VibWl0L3N1Ym1pdGhlbHBlcicpO1xyXG5pbXBvcnQgTWFya2luZ0luc3RydWN0aW9uUGFuZWwgPSByZXF1aXJlKCcuL21hcmtlcmluZm9ybWF0aW9uL21hcmtpbmdpbnN0cnVjdGlvbnBhbmVsJyk7XHJcbmltcG9ydCB1cmxzID0gcmVxdWlyZSgnLi4vLi4vZGF0YXNlcnZpY2VzL2Jhc2UvdXJscycpO1xyXG5pbXBvcnQgTXVsdGlPcHRpb25Db25maXJtYXRpb25EaWFsb2cgPSByZXF1aXJlKCcuLi91dGlsaXR5L211bHRpb3B0aW9uY29uZmlybWF0aW9uZGlhbG9nJyk7XHJcbmltcG9ydCBhdHlwaWNhbFJlc3BvbnNlU2VhcmNoUmVzdWx0ID0gcmVxdWlyZSgnLi4vLi4vZGF0YXNlcnZpY2VzL3Jlc3BvbnNlL2F0eXBpY2FscmVzcG9uc2VzZWFyY2hyZXN1bHQnKTtcclxuaW1wb3J0IHN0b3JhZ2VBZGFwdGVySGVscGVyID0gcmVxdWlyZSgnLi4vLi4vZGF0YXNlcnZpY2VzL3N0b3JhZ2VhZGFwdGVycy9zdG9yYWdlYWRhcHRlcmhlbHBlcicpO1xyXG5pbXBvcnQgYWxsb2NhdGVkUmVzcG9uc2VEYXRhID0gcmVxdWlyZSgnLi4vLi4vc3RvcmVzL3Jlc3BvbnNlL3R5cGluZ3MvYWxsb2NhdGVkcmVzcG9uc2VkYXRhJyk7XHJcbmltcG9ydCByZXNwb25zZUhlbHBlciA9IHJlcXVpcmUoJy4uL3V0aWxpdHkvcmVzcG9uc2VoZWxwZXIvcmVzcG9uc2VoZWxwZXInKTtcclxuaW1wb3J0IG1hcmtTY2hlbWVIZWxwZXIgPSByZXF1aXJlKCcuLi8uLi91dGlsaXR5L21hcmtzY2hlbWUvbWFya3NjaGVtZWhlbHBlcicpO1xyXG5pbXBvcnQgZGF0YVNlcnZpY2VIZWxwZXIgPSByZXF1aXJlKCcuLi8uLi91dGlsaXR5L2dlbmVyaWMvZGF0YXNlcnZpY2VoZWxwZXInKTtcclxuaW1wb3J0IHdvcmtMaXN0RGF0YUhlbHBlciA9IHJlcXVpcmUoJy4uLy4uL3V0aWxpdHkvd29ya2xpc3Qvd29ya2xpc3RkYXRhaGVscGVyJyk7XHJcbmltcG9ydCBtYXJrZXJPcGVyYXRpb25Nb2RlRmFjdG9yeSA9IHJlcXVpcmUoJy4uL3V0aWxpdHkvbWFya2Vyb3BlcmF0aW9ubW9kZS9tYXJrZXJvcGVyYXRpb25tb2RlZmFjdG9yeScpO1xyXG5pbXBvcnQgdGVhbU1hbmFnZW1lbnRBdWRpdEhlbHBlciA9IHJlcXVpcmUoJy4uL3V0aWxpdHkvdGVhbW1hbmFnZW1lbnQvdGVhbW1hbmFnZW1lbnRsb2dnaW5naGVscGVyJyk7XHJcbmltcG9ydCBsb2dnZXJDb25zdGFudHMgPSByZXF1aXJlKCcuLi91dGlsaXR5L2xvZ2dlcmhlbHBlcmNvbnN0YW50cycpO1xyXG5pbXBvcnQgZWNvdXJzZXdvcmtmaWxlc3RvcmUgPSByZXF1aXJlKCcuLi8uLi9zdG9yZXMvcmVzcG9uc2UvZGlnaXRhbC9lY291cnNld29ya2ZpbGVzdG9yZScpO1xyXG5pbXBvcnQgc2NyaXB0SW1hZ2VEb3dubG9hZFJlcXVlc3QgPSByZXF1aXJlKCcuLi8uLi91dGlsaXR5L2JhY2tncm91bmR3b3JrZXJzL3NjcmlwdGltYWdlZG93bmxvYWRlci9zY3JpcHRpbWFnZWRvd25sb2FkcmVxdWVzdCcpO1xyXG5pbXBvcnQgZUNvdXJzZXdvcmtIZWxwZXIgPSByZXF1aXJlKCcuLi91dGlsaXR5L2Vjb3Vyc2V3b3JrL2Vjb3Vyc2V3b3JraGVscGVyJyk7XHJcbmltcG9ydCBxaWdTZWxlY3RvckFjdGlvbkNyZWF0b3IgPSByZXF1aXJlKCcuLi8uLi9hY3Rpb25zL3FpZ3NlbGVjdG9yL3FpZ3NlbGVjdG9yYWN0aW9uY3JlYXRvcicpO1xyXG5pbXBvcnQgc2ltdWxhdGlvbk1vZGVIZWxwZXIgPSByZXF1aXJlKCcuLi8uLi91dGlsaXR5L3NpbXVsYXRpb24vc2ltdWxhdGlvbm1vZGVoZWxwZXInKTtcclxuaW1wb3J0IGFwcGxpY2F0aW9uU3RvcmUgPSByZXF1aXJlKCcuLi8uLi9zdG9yZXMvYXBwbGljYXRpb25vZmZsaW5lL2FwcGxpY2F0aW9uc3RvcmUnKTtcclxuaW1wb3J0IGFwcGxpY2F0aW9uQWN0aW9uQ3JlYXRvciA9IHJlcXVpcmUoJy4uLy4uL2FjdGlvbnMvYXBwbGljYXRpb25vZmZsaW5lL2FwcGxpY2F0aW9uYWN0aW9uY3JlYXRvcicpO1xyXG5pbXBvcnQgdGVhbU1hbmFnZW1lbnRTdG9yZSA9IHJlcXVpcmUoJy4uLy4uL3N0b3Jlcy90ZWFtbWFuYWdlbWVudC90ZWFtbWFuYWdlbWVudHN0b3JlJyk7XHJcbmltcG9ydCBsb2FkTWVzc2FnZUFyZ3VtZW50cyA9IHJlcXVpcmUoJy4uLy4uL2RhdGFzZXJ2aWNlcy9tZXNzYWdpbmcvbG9hZG1lc3NhZ2VzYXJndW1lbnRzJyk7XHJcbmltcG9ydCBhbGxvY2F0ZWRSZXNwb25zZSA9IHJlcXVpcmUoJy4uLy4uL3N0b3Jlcy9yZXNwb25zZS90eXBpbmdzL2FsbG9jYXRlZHJlc3BvbnNlJyk7XHJcbmltcG9ydCBodG1sdmlld2VyaGVscGVyID0gcmVxdWlyZSgnLi4vdXRpbGl0eS9yZXNwb25zZWhlbHBlci9odG1sdmlld2VyaGVscGVyJyk7XHJcbmltcG9ydCBtYXJraW5nSW5zdHJ1Y3Rpb25TdG9yZSA9IHJlcXVpcmUoJy4uLy4uL3N0b3Jlcy9tYXJraW5naW5zdHJ1Y3Rpb24vbWFya2luZ2luc3RydWN0aW9uc3RvcmUnKTtcclxuaW1wb3J0IE1hcmtpbmdJbnN0cnVjdGlvbkZpbGVQYW5lbCA9IHJlcXVpcmUoJy4vbWFya2VyaW5mb3JtYXRpb24vbWFya2luZ2luc3RydWN0aW9uZmlsZXBhbmVsJyk7XHJcbmltcG9ydCBkb21NYW5hZ2VyID0gcmVxdWlyZSgnLi4vLi4vdXRpbGl0eS9nZW5lcmljL2RvbWhlbHBlcicpO1xyXG5pbXBvcnQgbWFya2luZ0luc3RydWN0aW9BY3Rpb25DcmVhdG9yID0gcmVxdWlyZSgnLi4vLi4vYWN0aW9ucy9tYXJraW5naW5zdHJ1Y3Rpb25zL21hcmtpbmdpbnN0cnVjdGlvbmFjdGlvbmNyZWF0b3InKTtcclxuaW1wb3J0IG1hcmtpbmdJbnN0cnVjdGlvbkFyZyA9IHJlcXVpcmUoJy4uLy4uL2RhdGFzZXJ2aWNlcy9tYXJraW5naW5zdHJ1Y3Rpb25zL21hcmtpbmdpbnN0cmN1dGlvbmFyZ3VtZW50Jyk7XHJcbmltcG9ydCByZXNwb25zZVNlYXJjaGhlbHBlciA9IHJlcXVpcmUoJy4uLy4uL3V0aWxpdHkvcmVzcG9uc2VzZWFyY2gvcmVzcG9uc2VzZWFyY2hoZWxwZXInKTtcclxuLyoqIEFkZCBuZXcgZGVwZW5kZW5jaWVzIGluIGxvYWREZXBlbmRlbmNpZXMoKSBtZXRob2QgdW5sZXNzIHlvdXIgZGVwZW5kZW5jaWVzIGFyZSBub3QgdXNpbmcgaW4gY29uc3RydWN0b3IgKi9cclxuXHJcbi8qIHRzbGludDpkaXNhYmxlOnZhcmlhYmxlLW5hbWUgKi9cclxubGV0IE1hcmtlckluZm9ybWF0aW9uUGFuZWw7XHJcbmxldCBsb2NhbGVTdG9yZTtcclxubGV0IHVzZXJPcHRpb25BY3Rpb25DcmVhdG9yO1xyXG5sZXQgcWlnU3RvcmU7XHJcbmxldCBleGFtaW5lcnN0b3JlO1xyXG5sZXQgV29ya0xpc3RNZXNzYWdlO1xyXG5sZXQgQ29uZmlybWF0aW9uRGlhbG9nO1xyXG5sZXQgTWFya2luZ1Byb2dyZXNzO1xyXG5sZXQgc3RhbXBTdG9yZTtcclxubGV0IHJlc3BvbnNlU2VhcmNoSGVscGVyO1xyXG5sZXQgVGFyZ2V0cztcclxubGV0IG92ZXJ2aWV3RGF0YTtcclxubGV0IHFpZ0luZm87XHJcbmxldCBtYXJraW5nVGFyZ2V0O1xyXG5sZXQgdGFyZ2V0U3VtbWFyeVN0b3JlO1xyXG5sZXQgbWFya2luZ1RhcmdldFN1bW1hcnk7XHJcbmxldCB1c2VyT3B0aW9uU3RvcmU7XHJcbmxldCBXb3JrTGlzdENvbnRhaW5lcjtcclxubGV0IHdvcmtsaXN0U3RvcmU7XHJcbmxldCBtYXJrU2NoZW1lU3RydWN0dXJlU3RvcmU7XHJcbmxldCByZXNwb25zZVN0b3JlO1xyXG5sZXQgd29ya2xpc3RBY3Rpb25DcmVhdG9yO1xyXG5sZXQgR2VuZXJpY0RpYWxvZztcclxubGV0IHJlc3BvbnNlQWxsb2NhdGlvblZhbGlkYXRpb25IZWxwZXI7XHJcbmxldCByZXNwb25zZUFsbG9jYXRpb25WYWxpZGF0aW9uUGFyYW1ldGVyO1xyXG5sZXQgY2xhc3NOYW1lcztcclxubGV0IGJ1c3lJbmRpY2F0b3JTdG9yZTtcclxubGV0IHN1Ym1pdFN0b3JlO1xyXG5sZXQgd29ya2xpc3RDb21wb25lbnRIZWxwZXI7XHJcbmxldCBzdWJtaXRBY3Rpb25DcmVhdG9yO1xyXG5sZXQgYnVzeUluZGljYXRvckFjdGlvbkNyZWF0b3I7XHJcbmxldCBzY3JpcHRJbWFnZURvd25sb2FkSGVscGVyO1xyXG5sZXQgc2NyaXB0QWN0aW9uQ3JlYXRvcjtcclxubGV0IHNjcmlwdFN0b3JlO1xyXG5sZXQgc2NyaXB0SW1hZ2VEb3dubG9hZGVyO1xyXG5sZXQgdGFyZ2V0SGVscGVyO1xyXG5sZXQgdXNlckluZm9TdG9yZTtcclxubGV0IGJhY2tncm91bmRQdWxzZUhlbHBlcjtcclxubGV0IEZvb3RlcjtcclxubGV0IGdhSGVscGVyO1xyXG5sZXQgc3RhbXBBY3Rpb25DcmVhdG9yO1xyXG5sZXQgY29uZmlndXJhYmxlQ2hhcmFjdGVyaXN0aWNzU3RvcmU7XHJcbmxldCBjb25maWd1cmFibGVDaGFyYWN0ZXJpc3RpY3NBY3Rpb25DcmVhdG9yO1xyXG5sZXQgcWlnQWN0aW9uQ3JlYXRvcjtcclxubGV0IGV4Y2VwdGlvbkFjdGlvbkNyZWF0b3I7XHJcbmxldCBleGNlcHRpb25TdG9yZTtcclxubGV0IE1lc3NhZ2VQb3B1cDtcclxubGV0IG1lc3NhZ2VIZWxwZXI7XHJcbmxldCBtZXNzYWdpbmdBY3Rpb25DcmVhdG9yO1xyXG5sZXQgbWVzc2FnZVN0b3JlO1xyXG5sZXQgTWFya2luZ0NoZWNrUG9wdXA7XHJcbmxldCBzdHJpbmdGb3JtYXRIZWxwZXI7XHJcbmxldCBodG1sVXRpbGl0aWVzO1xyXG5sZXQgbG9hZENvbnRhaW5lckFjdGlvbkNyZWF0b3I7XHJcbmxldCBvcGVyYXRpb25Nb2RlSGVscGVyO1xyXG5sZXQgdGVhbU1hbmFnZW1lbnRBY3Rpb25DcmVhdG9yO1xyXG5sZXQgTWFya0NoZWNrRXhhbWluZXJzO1xyXG5sZXQgbWFya2luZ0NoZWNrQWN0aW9uQ3JlYXRvcjtcclxubGV0IHVzZXJJbmZvQWN0aW9uQ3JlYXRvcjtcclxubGV0IEV4YW1pbmVyU3RhdGVDaGFuZ2VQb3B1cDtcclxubGV0IGhlbHBFeGFtaW5lcnNEYXRhSGVscGVyO1xyXG5sZXQgd2FybmluZ01lc3NhZ2VTdG9yZTtcclxubGV0IHdhcm5pbmdNZXNzYWdlTmF2aWdhdGlvbkhlbHBlcjtcclxubGV0IG1hcmtpbmdJbnN0cnVjdGlvbkFjdGlvbkNyZWF0b3I7XHJcblxyXG4vKiB0c2xpbnQ6ZW5hYmxlOnZhcmlhYmxlLW5hbWUgKi9cclxuXHJcbi8qIHRzbGludDpkaXNhYmxlOm5vLWVtcHR5LWludGVyZmFjZXMgKi9cclxuLyoqXHJcbiAqIFByb3BlcnRpZXMgb2YgYSBjb21wb25lbnRcclxuICovXHJcbmludGVyZmFjZSBQcm9wcyBleHRlbmRzIFByb3BzQmFzZSwgTG9jYWxlU2VsZWN0aW9uQmFzZSB7XHJcbiAgICBkb3dubG9hZFVybDogc3RyaW5nO1xyXG4gICAgaXNGcm9tTWVudTogYm9vbGVhbjtcclxuICAgIHJlbmRlcmVkT24/OiBudW1iZXI7XHJcbn1cclxuLyogdHNsaW50OmRpc2FibGU6bm8tZW1wdHktaW50ZXJmYWNlcyAqL1xyXG5cclxuLyoqXHJcbiAqIFN0YXRlIG9mIGEgY29tcG9uZW50XHJcbiAqL1xyXG5pbnRlcmZhY2UgU3RhdGUge1xyXG4gICAgaXNMb2dvdXRDb25maXJtYXRpb25Qb3B1cERpc3BsYXlpbmc/OiBib29sZWFuO1xyXG4gICAgaXNXb3JrTGlzdFVwZGF0ZWQ/OiBib29sZWFuO1xyXG4gICAgcmVuZGVyZWRPbj86IG51bWJlcjtcclxuICAgIHRhcmdldFJlbmRlcmVkT24/OiBudW1iZXI7XHJcbiAgICBlbmFibGVOYXZpZ2F0aW9uUGFuZWxWaXNpYmlsaXR5PzogYm9vbGVhbjtcclxuICAgIGlzUmVzcG9uc2VBbGxvY2F0aW9uRXJyb3JEaWFsb2dEaXNwbGF5aW5nPzogYm9vbGVhbjtcclxuICAgIGVycm9yRGlhbG9nSGVhZGVyVGV4dD86IHN0cmluZztcclxuICAgIGVycm9yRGlhbG9nQ29udGVudFRleHQ/OiBzdHJpbmc7XHJcbiAgICBpc0J1c3k/OiBib29sZWFuO1xyXG4gICAgbW9kdWxlc0xvYWRlZD86IGJvb2xlYW47XHJcbiAgICBpc0F0eXBpY2FsU2VhcmNoUmVzdWx0UG9wdXBEaXNwbGF5aW5nPzogYm9vbGVhbjtcclxuICAgIGlzQXR5cGljYWxTZWFyY2hGYWlsdXJlUG9wdXBEaXNwbGF5aW5nPzogYm9vbGVhbjtcclxuICAgIGlzTWFya2luZ0luc3RydWN0aW9uUGFuZWxPcGVuPzogYm9vbGVhbjtcclxuICAgIGlzTWFya2luZ0luc3RydWN0aW9uUGFuZWxDbGlja2VkPzogYm9vbGVhbjtcclxuICAgIG1hcmtpbmdJbnN0cnVjdGlvblBhbmVsUmVuZGVyZWRPbj86IG51bWJlcjtcclxufVxyXG5cclxuaW50ZXJmYWNlIEl0ZW0ge1xyXG4gICAgaWQ6IG51bWJlcjtcclxuICAgIG5hbWU6IHN0cmluZztcclxuICAgIHBhcmVudEV4YW1pbmVyRGlzcGxheU5hbWU6IHN0cmluZztcclxuICAgIHBhcmVudEV4YW1pbmVySWQ6IG51bWJlcjtcclxuICAgIHF1ZXN0aW9uUGFwZXJQYXJ0SWQ6IG51bWJlcjtcclxufVxyXG4vKipcclxuICogUmVhY3QgY29tcG9uZW50IGZvciBXb3JrbGlzdC9MYW5kaW5nXHJcbiAqL1xyXG5jbGFzcyBXb3JrTGlzdCBleHRlbmRzIHB1cmVSZW5kZXJDb21wb25lbnQ8UHJvcHMsIFN0YXRlPiB7XHJcblxyXG4gICAgcHJpdmF0ZSBtYXJrZXJJbmZvcm1hdGlvbjogbWFya2VySW5mb3JtYXRpb247XHJcbiAgICBwcml2YXRlIG1hcmtpbmdUYXJnZXRzU3VtbWFyeTogSW1tdXRhYmxlLkxpc3Q8YW55PjtcclxuICAgIHByaXZhdGUgd29ya2xpc3RUeXBlOiBlbnVtcy5Xb3JrbGlzdFR5cGU7XHJcbiAgICBwcml2YXRlIHJlc3BvbnNlTW9kZTogZW51bXMuUmVzcG9uc2VNb2RlO1xyXG4gICAgcHJpdmF0ZSB3b3JrbGlzdFRhYkRldGFpbHM6IEFycmF5PFdvcmtsaXN0VGFiRGV0YWlscz47XHJcbiAgICBwcml2YXRlIHJlbWFya1JlcXVlc3RUeXBlOiBlbnVtcy5SZW1hcmtSZXF1ZXN0VHlwZTtcclxuICAgIHByaXZhdGUgaXNEaXJlY3RlZFJlbWFyazogYm9vbGVhbjtcclxuICAgIC8qKiBmbGFnIHRvIHNob3cgYnVzeSBpbmRpY2F0b3IgaW4gd29ya2xpc3QgdGFicyAqL1xyXG4gICAgcHJpdmF0ZSBpc1JlZnJlc2hpbmc6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIC8qIGhhcyBkYXRhIHJlZnJlc2ggc3RhcnRlZCAqL1xyXG4gICAgcHJpdmF0ZSBpc0NvbnRlbnRSZWZyZXNoU3RhcnRlZDogYm9vbGVhbjtcclxuICAgIC8qIGhhcyBhbGwgdGhlIGRhdGEgcmVmcmVzaCBjYWxsIHN1Y2NlZWRlZCBzZXQgdHJ1ZSBpbml0aWFsbHkgaXQgbmVlZCBvbmx5IGZvciBzdGFuZGFyZGl6YXRpb24qL1xyXG4gICAgcHJpdmF0ZSBpc0NvbnRlbnRSZWZyZXNoU3VjY2VlZGVkID0ge1xyXG4gICAgICAgIGlzTWFya2luZ1Byb2dyZXNzQ29tcGxldGVkOiBmYWxzZSxcclxuICAgICAgICBpc1dvcmtsaXN0UmVmcmVzaENvbXBsZXRlZDogZmFsc2VcclxuICAgIH07XHJcbiAgICAvKiB2YXJpYWJsZSB0byBpZGVudGlmeSB3aGV0aGVyIHRoZSBleGFtIGJvZHkgQ0MgaXMgbG9hZGVkIG9yIG5vdCAqL1xyXG4gICAgcHJpdmF0ZSBpc0V4YW1Cb2R5Q0NMb2FkZWQ6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIHByaXZhdGUgaXNTdWJtaXRDb21wbGV0ZWQ6IGJvb2xlYW47XHJcbiAgICBwcml2YXRlIGlzQWxsb2NhdGlvbkNvbXBsZXRlZDogYm9vbGVhbjtcclxuICAgIC8vIHRoaXMgdmFyaWFibGUgd2lsbCBob2xkIHRoZSBtZXNzYWdlIHBhbmVsIHZpc2libGl0eSBzdGF0dXMuXHJcbiAgICBwcml2YXRlIGlzTWVzc2FnZVBvcHVwVmlzaWJsZTogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBzdWJqZWN0OiBzdHJpbmcgPSAnJztcclxuICAgIHByaXZhdGUgcHJpb3JpdHlEcm9wZG93blNlbGVjdGVkSXRlbTogZW51bXMuTWVzc2FnZVByaW9yaXR5ID0gZW51bXMuTWVzc2FnZVByaW9yaXR5LlN0YW5kYXJkO1xyXG4gICAgcHJpdmF0ZSBzZWxlY3RlZFFpZ0l0ZW1JZDogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBtZXNzYWdlQm9keTogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSBxaWdMaXN0SXRlbXM6IEFycmF5PEl0ZW0+ID0gbmV3IEFycmF5PEl0ZW0+KCk7XHJcbiAgICBwcml2YXRlIGlzVG91Y2hTdGFydGVkOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIGlzTW91c2VIb3ZlcmVkOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIGlzU2Vjb25kU3RhbmRhcmRpc2F0aW9uVGFyZ2V0UmVjZWl2ZWQ6IGJvb2xlYW47XHJcbiAgICBwcml2YXRlIGF0eXBpY2FsUG9wdXBDb250ZW50OiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIHN0b3JhZ2VBZGFwdGVySGVscGVyID0gbmV3IHN0b3JhZ2VBZGFwdGVySGVscGVyKCk7XHJcbiAgICBwcml2YXRlIF93YXJuaW5nTWVzc2FnZU5hdmlnYXRpb25IZWxwZXI7XHJcbiAgICBwcml2YXRlIGZhaWx1cmVDb2RlOiBlbnVtcy5GYWlsdXJlQ29kZSA9IGVudW1zLkZhaWx1cmVDb2RlLk5vbmU7XHJcbiAgICBwcml2YXRlIHdhcm5pbmdNZXNzYWdlQWN0aW9uOiBlbnVtcy5XYXJuaW5nTWVzc2FnZUFjdGlvbiA9IGVudW1zLldhcm5pbmdNZXNzYWdlQWN0aW9uLk5vbmU7XHJcbiAgICBwcml2YXRlIGlzU2VsZWN0ZWRNZW51VGFyZ2V0Q29tcGxldGVkOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIGhhc1RhcmdldEZvdW5kOiBib29sZWFuID0gdHJ1ZTtcclxuICAgIHByaXZhdGUgY29sdW1uTGVmdFNjcm9sbFdpZHRoOiBudW1iZXIgPSAwO1xyXG4gICAgcHJpdmF0ZSBfYm91bmRIYW5kbGVPbkNsaWNrOiBFdmVudExpc3RlbmVyT2JqZWN0ID0gbnVsbDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBjb25zdHJ1Y3RvclxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9wczogUHJvcHMsIHN0YXRlOiBTdGF0ZSkge1xyXG4gICAgICAgIHN1cGVyKHByb3BzLCBzdGF0ZSk7XHJcbiAgICAgICAgdGhpcy53b3JrbGlzdFR5cGUgPSBlbnVtcy5Xb3JrbGlzdFR5cGUubm9uZTtcclxuICAgICAgICAvKiBiaW5kaW5nIHRoZSBwYXJlbnQoY3VycmVudCkgY29udGV4dCB0byBzaG93TG9nb3V0Q29uZmlybWF0aW9uIHdoaWNoIGlzIHBhc3NlZCBhcyBwcm9wIHRvIGNoaWxkIGFuZCBleGVjdXRpbmcgaW5zaWRlIGNoaWxkICovXHJcbiAgICAgICAgLyogT24gbmF2aWdhdGluZyB0byB3b3JrbGlzdCBmcm9tIHJlc3BvbnNlIHNjcmVlbiwgcHJldmVudCBhbmltYXRpb24gb2YgdGhlIGV4cGFuZC9jb2xsYXBzZSBpZiB3ZSBoYXZlIHVzZXIgb3B0aW9ucyBsb2FkZWQgKi9cclxuICAgICAgICBsZXQgaXNNYXJrZXJJbmZvUGFuZWxFeHBhbmRlZDogYm9vbGVhbiA9IHRydWU7XHJcbiAgICAgICAgaWYgKHVzZXJPcHRpb25zU3RvcmUuaW5zdGFuY2UuaXNMb2FkZWQpIHtcclxuICAgICAgICAgICAgaXNNYXJrZXJJbmZvUGFuZWxFeHBhbmRlZCA9IHVzZXJPcHRpb25zSGVscGVyLmdldFVzZXJPcHRpb25CeU5hbWVcclxuICAgICAgICAgICAgICAgICh1c2Vyb3B0aW9uS2V5cy5NQVJLRVJfSU5GT19QQU5FTF9FWFBBTkRFRCkgPT09ICdmYWxzZScgPyBmYWxzZSA6IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgICAgICAgIGlzTG9nb3V0Q29uZmlybWF0aW9uUG9wdXBEaXNwbGF5aW5nOiBmYWxzZSxcclxuICAgICAgICAgICAgaXNXb3JrTGlzdFVwZGF0ZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICByZW5kZXJlZE9uOiB0aGlzLnByb3BzLnJlbmRlcmVkT24sXHJcbiAgICAgICAgICAgIGVuYWJsZU5hdmlnYXRpb25QYW5lbFZpc2liaWxpdHk6IGlzTWFya2VySW5mb1BhbmVsRXhwYW5kZWQsXHJcbiAgICAgICAgICAgIGlzUmVzcG9uc2VBbGxvY2F0aW9uRXJyb3JEaWFsb2dEaXNwbGF5aW5nOiBmYWxzZSxcclxuICAgICAgICAgICAgZXJyb3JEaWFsb2dIZWFkZXJUZXh0OiAnJyxcclxuICAgICAgICAgICAgZXJyb3JEaWFsb2dDb250ZW50VGV4dDogJycsXHJcbiAgICAgICAgICAgIGlzQnVzeTogZmFsc2UsXHJcbiAgICAgICAgICAgIG1vZHVsZXNMb2FkZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICBpc0F0eXBpY2FsU2VhcmNoUmVzdWx0UG9wdXBEaXNwbGF5aW5nOiBmYWxzZSxcclxuICAgICAgICAgICAgaXNBdHlwaWNhbFNlYXJjaEZhaWx1cmVQb3B1cERpc3BsYXlpbmc6IGZhbHNlLFxyXG4gICAgICAgICAgICBpc01hcmtpbmdJbnN0cnVjdGlvblBhbmVsT3BlbjogZmFsc2UsXHJcbiAgICAgICAgICAgIGlzTWFya2luZ0luc3RydWN0aW9uUGFuZWxDbGlja2VkOiBmYWxzZSxcclxuICAgICAgICAgICAgbWFya2luZ0luc3RydWN0aW9uUGFuZWxSZW5kZXJlZE9uOiB0aGlzLnByb3BzLnJlbmRlcmVkT25cclxuXHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLm9uT2tDbGlja09mUmVzcG9uc2VBbGxvY2F0aW9uRXJyb3JEaWFsb2cgPSB0aGlzLm9uT2tDbGlja09mUmVzcG9uc2VBbGxvY2F0aW9uRXJyb3JEaWFsb2cuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLnNob3dMb2dvdXRDb25maXJtYXRpb24gPSB0aGlzLnNob3dMb2dvdXRDb25maXJtYXRpb24uYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLnJlc2V0TG9nb3V0Q29uZmlybWF0aW9uU2F0dXMgPSB0aGlzLnJlc2V0TG9nb3V0Q29uZmlybWF0aW9uU2F0dXMuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLnRvZ2dsZUxlZnRQYW5lbCA9IHRoaXMudG9nZ2xlTGVmdFBhbmVsLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5zd2l0Y2hUYWIgPSB0aGlzLnN3aXRjaFRhYi5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuc2hvd0V4YW1pbmVyU3RhdGVDaGFuZ2VQb3B1cCA9IHRoaXMuc2hvd0V4YW1pbmVyU3RhdGVDaGFuZ2VQb3B1cC5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuZXhhbWluZXJDaGFuZ2VTdGF0dXNSZWNlaXZlZCA9IHRoaXMuZXhhbWluZXJDaGFuZ2VTdGF0dXNSZWNlaXZlZC5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuc2Vjb25kU3RhbmRhcmRpc2F0aW9uUmVjZWl2ZWQgPSB0aGlzLnNlY29uZFN0YW5kYXJkaXNhdGlvblJlY2VpdmVkLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5yZWZyZXNoVGFyZ2V0UHJvZ3Jlc3MgPSB0aGlzLnJlZnJlc2hUYXJnZXRQcm9ncmVzcy5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMub25NYXJrSW5zdHJ1Y3Rpb25GaWxlQ2xpY2sgPSB0aGlzLm9uTWFya0luc3RydWN0aW9uRmlsZUNsaWNrLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5vbk1hcmtJbnN0cnVjdGlvblBhbmVsQ2xpY2sgPSB0aGlzLm9uTWFya0luc3RydWN0aW9uUGFuZWxDbGljay5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuaXNTZWNvbmRTdGFuZGFyZGlzYXRpb25UYXJnZXRSZWNlaXZlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX2JvdW5kSGFuZGxlT25DbGljayA9IHRoaXMub25NYXJraW5nSW5zdHJ1Y3RvbkNsaWNrSGFuZGxlci5iaW5kKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVuZGVyIG1ldGhvZFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcmVuZGVyKCk6IEpTWC5FbGVtZW50IHtcclxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5tb2R1bGVzTG9hZGVkKSB7XHJcbiAgICAgICAgICAgIGxldCByZXNwb25zZUFsbG9jYXRpb25FcnJvckRpYWxvZyA9IChcclxuICAgICAgICAgICAgICAgIDxHZW5lcmljRGlhbG9nIGNvbnRlbnQ9e3RoaXMuc3RhdGUuZXJyb3JEaWFsb2dDb250ZW50VGV4dH1cclxuICAgICAgICAgICAgICAgICAgICBoZWFkZXI9e3RoaXMuc3RhdGUuZXJyb3JEaWFsb2dIZWFkZXJUZXh0fVxyXG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXlQb3B1cD17dGhpcy5zdGF0ZS5pc1Jlc3BvbnNlQWxsb2NhdGlvbkVycm9yRGlhbG9nRGlzcGxheWluZ31cclxuICAgICAgICAgICAgICAgICAgICBva0J1dHRvblRleHQ9e2xvY2FsZVN0b3JlLmluc3RhbmNlLlRyYW5zbGF0ZVRleHQoJ21hcmtpbmcud29ya2xpc3QucmVzcG9uc2UtYWxsb2NhdGlvbi1lcnJvci1kaWFsb2cub2stYnV0dG9uJyl9XHJcbiAgICAgICAgICAgICAgICAgICAgb25Pa0NsaWNrPXt0aGlzLm9uT2tDbGlja09mUmVzcG9uc2VBbGxvY2F0aW9uRXJyb3JEaWFsb2d9XHJcbiAgICAgICAgICAgICAgICAgICAgaWQ9J3Jlc3BvbnNlYWxsb2NhdGlvbmVycm9yZGlhbG9nJ1xyXG4gICAgICAgICAgICAgICAgICAgIGtleT0ncmVzcG9uc2VhbGxvY2F0aW9uZXJyb3JkaWFsb2cnXHJcbiAgICAgICAgICAgICAgICAgICAgcG9wdXBEaWFsb2dUeXBlPXtlbnVtcy5Qb3B1cERpYWxvZ1R5cGUuUmVzcG9uc2VBbGxvY2F0aW9uRXJyb3J9IC8+XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGxldCBwb3BVcENvbnRlbnQ6IEpTWC5FbGVtZW50W10gPSBbXTtcclxuICAgICAgICAgICAgcG9wVXBDb250ZW50LnB1c2goPHA+e3RoaXMuYXR5cGljYWxQb3B1cENvbnRlbnR9PC9wPik7XHJcbiAgICAgICAgICAgIGxldCBhdHlwaWNhbFNlYXJjaERpYWxvZyA9ICh0aGlzLnN0YXRlLmlzQXR5cGljYWxTZWFyY2hGYWlsdXJlUG9wdXBEaXNwbGF5aW5nKSA/XHJcbiAgICAgICAgICAgICAgICAoPEdlbmVyaWNEaWFsb2dcclxuICAgICAgICAgICAgICAgICAgICBjb250ZW50PXt0aGlzLmF0eXBpY2FsUG9wdXBDb250ZW50fVxyXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcj17bG9jYWxlU3RvcmUuaW5zdGFuY2UuVHJhbnNsYXRlVGV4dCgnbWFya2luZy53b3JrbGlzdC53b3JrbGlzdC1oZWFkZXJzLmF0eXBpY2FsJyl9XHJcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheVBvcHVwPXt0aGlzLnN0YXRlLmlzQXR5cGljYWxTZWFyY2hGYWlsdXJlUG9wdXBEaXNwbGF5aW5nfVxyXG4gICAgICAgICAgICAgICAgICAgIG9rQnV0dG9uVGV4dD17bG9jYWxlU3RvcmUuaW5zdGFuY2UuVHJhbnNsYXRlVGV4dCgnbWFya2luZy53b3JrbGlzdC5yZXNwb25zZS1hbGxvY2F0aW9uLWVycm9yLWRpYWxvZy5vay1idXR0b24nKX1cclxuICAgICAgICAgICAgICAgICAgICBvbk9rQ2xpY2s9e3RoaXMuYXR5cGljYWxTZWFyY2hmYWlsdXJlQ2xpY2t9XHJcbiAgICAgICAgICAgICAgICAgICAgaWQ9J2F0eXBpY2FscmVzcG9uc2VhbGxvY2F0aW9uZXJyb3JkaWFsb2cnXHJcbiAgICAgICAgICAgICAgICAgICAga2V5PSdhdHlwaWNhbHJlc3BvbnNlYWxsb2NhdGlvbmVycm9yZGlhbG9nJ1xyXG4gICAgICAgICAgICAgICAgICAgIHBvcHVwRGlhbG9nVHlwZT17ZW51bXMuUG9wdXBEaWFsb2dUeXBlLlJlc3BvbnNlQWxsb2NhdGlvbkVycm9yfSAvPilcclxuICAgICAgICAgICAgICAgIDogKDxNdWx0aU9wdGlvbkNvbmZpcm1hdGlvbkRpYWxvZ1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ9e3BvcFVwQ29udGVudH1cclxuICAgICAgICAgICAgICAgICAgICBoZWFkZXI9e2xvY2FsZVN0b3JlLmluc3RhbmNlLlRyYW5zbGF0ZVRleHQoJ21hcmtpbmcud29ya2xpc3QuYXR5cGljYWwtYWxsb2NhdGlvbi1kaWFsb2cuaGVhZGVyJyl9XHJcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheVBvcHVwPXt0aGlzLnN0YXRlLmlzQXR5cGljYWxTZWFyY2hSZXN1bHRQb3B1cERpc3BsYXlpbmd9XHJcbiAgICAgICAgICAgICAgICAgICAgb25DYW5jZWxDbGljaz17dGhpcy5hdHlwaWNhbFNlYXJjaENhbmNlbENsaWNrfVxyXG4gICAgICAgICAgICAgICAgICAgIG9uWWVzQ2xpY2s9e3RoaXMuYXR5cGljYWxTZWFyY2hNYXJrTm93Q2xpY2t9XHJcbiAgICAgICAgICAgICAgICAgICAgb25Ob0NsaWNrPXt0aGlzLmF0eXBpY2FsU2VhcmNoTW92ZVRvQ2xpY2t9XHJcbiAgICAgICAgICAgICAgICAgICAgaXNLZXlCb2FyZFN1cHBvcnRFbmFibGVkPXt0cnVlfVxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkTGFuZ3VhZ2U9e3RoaXMucHJvcHMuc2VsZWN0ZWRMYW5ndWFnZX1cclxuICAgICAgICAgICAgICAgICAgICBwb3B1cFNpemU9e2VudW1zLlBvcHVwU2l6ZS5NZWRpdW19XHJcbiAgICAgICAgICAgICAgICAgICAgcG9wdXBUeXBlPXtlbnVtcy5Qb3BVcFR5cGUuQXR5cGljYWxTZWFyY2h9XHJcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uQ2FuY2VsVGV4dD17bG9jYWxlU3RvcmUuaW5zdGFuY2UuVHJhbnNsYXRlVGV4dCgnbWFya2luZy53b3JrbGlzdC5hdHlwaWNhbC1hbGxvY2F0aW9uLWRpYWxvZy5jYW5jZWwnKX1cclxuICAgICAgICAgICAgICAgICAgICBidXR0b25ZZXNUZXh0PXtsb2NhbGVTdG9yZS5pbnN0YW5jZS5UcmFuc2xhdGVUZXh0KCdtYXJraW5nLndvcmtsaXN0LmF0eXBpY2FsLWFsbG9jYXRpb24tZGlhbG9nLm1hcmstbm93Jyl9XHJcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uTm9UZXh0PXtsb2NhbGVTdG9yZS5pbnN0YW5jZS5UcmFuc2xhdGVUZXh0KCdtYXJraW5nLndvcmtsaXN0LmF0eXBpY2FsLWFsbG9jYXRpb24tZGlhbG9nLm1vdmUtdG8td29ya2xpc3QnKX1cclxuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5Tm9CdXR0b249e3RydWV9XHJcbiAgICAgICAgICAgICAgICAvPik7XHJcblxyXG4gICAgICAgICAgICBsZXQgYnVzeUluZGljYXRvciA9IChcclxuICAgICAgICAgICAgICAgIDxCdXN5SW5kaWNhdG9yXHJcbiAgICAgICAgICAgICAgICAgICAgaWQ9J2J1c3lJbmRpY2F0b3InXHJcbiAgICAgICAgICAgICAgICAgICAga2V5PSdidXN5SW5kaWNhdG9yJ1xyXG4gICAgICAgICAgICAgICAgICAgIGlzQnVzeT17dGhpcy5zdGF0ZS5pc0J1c3l9XHJcbiAgICAgICAgICAgICAgICAgICAgYnVzeUluZGljYXRvckludm9rZXI9e2J1c3lJbmRpY2F0b3JTdG9yZS5pbnN0YW5jZS5nZXRCdXN5SW5kaWNhdG9ySW52b2tlcn1cclxuICAgICAgICAgICAgICAgIC8+KTtcclxuICAgICAgICAgICAgbGV0IGhlYWRlciA9IChcclxuICAgICAgICAgICAgICAgIDxIZWFkZXIgc2VsZWN0ZWRMYW5ndWFnZT17dGhpcy5wcm9wcy5zZWxlY3RlZExhbmd1YWdlfSBjb250YWluZXJQYWdlPXtlbnVtcy5QYWdlQ29udGFpbmVycy5Xb3JrTGlzdH1cclxuICAgICAgICAgICAgICAgICAgICBpc0luVGVhbU1hbmFnZW1lbnQ9e21hcmtlck9wZXJhdGlvbk1vZGVGYWN0b3J5Lm9wZXJhdGlvbk1vZGUuaXNUZWFtTWFuYWdlbWVudE1vZGV9XHJcbiAgICAgICAgICAgICAgICAgICAgZXhhbWluZXJOYW1lPXt0aGlzLm1hcmtlckluZm9ybWF0aW9uID8gdGhpcy5tYXJrZXJJbmZvcm1hdGlvbi5mb3JtYXR0ZWRFeGFtaW5lck5hbWUgOiAnJ30gLz5cclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIGxldCBmb290ZXIgPSAoPEZvb3RlciBzZWxlY3RlZExhbmd1YWdlPXt0aGlzLnByb3BzLnNlbGVjdGVkTGFuZ3VhZ2V9XHJcbiAgICAgICAgICAgICAgICBmb290ZXJUeXBlPXtlbnVtcy5Gb290ZXJUeXBlLldvcmtsaXN0fVxyXG4gICAgICAgICAgICAgICAgaXNMb2dvdXRDb25maXJtYXRpb25Qb3B1cERpc3BsYXlpbmc9e3RoaXMuc3RhdGUuaXNMb2dvdXRDb25maXJtYXRpb25Qb3B1cERpc3BsYXlpbmd9XHJcbiAgICAgICAgICAgICAgICByZXNldExvZ291dENvbmZpcm1hdGlvblNhdHVzPXt0aGlzLnJlc2V0TG9nb3V0Q29uZmlybWF0aW9uU2F0dXN9IC8+KTtcclxuXHJcbiAgICAgICAgICAgIGxldCBleGFtaW5lclN0YXRlQ2hhbmdlUG9wdXA7XHJcbiAgICAgICAgICAgIGlmIChFeGFtaW5lclN0YXRlQ2hhbmdlUG9wdXApIHtcclxuICAgICAgICAgICAgICAgIGV4YW1pbmVyU3RhdGVDaGFuZ2VQb3B1cCA9ICgobWFya2VyT3BlcmF0aW9uTW9kZUZhY3Rvcnkub3BlcmF0aW9uTW9kZS5pc1RlYW1NYW5hZ2VtZW50TW9kZSAmJlxyXG4gICAgICAgICAgICAgICAgICAgIHFpZ1N0b3JlLmluc3RhbmNlLnNlbGVjdGVkUUlHRm9yTWFya2VyT3BlcmF0aW9uICYmIHRoaXMubWFya2VySW5mb3JtYXRpb24pID9cclxuICAgICAgICAgICAgICAgICAgICA8RXhhbWluZXJTdGF0ZUNoYW5nZVBvcHVwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdjaGFuZ2VfZXhhbWluZXJfc3RhdHVzX3BvcHVwJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk9J2NoYW5nZV9leGFtaW5lcl9zdGF0dXNfcG9wdXAnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkTGFuZ3VhZ2U9e3RoaXMucHJvcHMuc2VsZWN0ZWRMYW5ndWFnZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFN0YXRlPXt0aGlzLm1hcmtlckluZm9ybWF0aW9uLmFwcHJvdmFsU3RhdHVzfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXJJbmZvcm1hdGlvbj17dGhpcy5tYXJrZXJJbmZvcm1hdGlvbn0gLz4gOiBudWxsKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbGV0IG1hcmtpbmdDaGVja1BvcHVwID0gKDxNYXJraW5nQ2hlY2tQb3B1cCAvPik7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ3dvcmtsaXN0LXdyYXBwZXInLCB7ICdsb2FkaW5nJzogdGhpcy5zdGF0ZS5yZW5kZXJlZE9uICE9PSAwICYmIHRoaXMuc3RhdGUuaXNCdXN5IH0sXHJcbiAgICAgICAgICAgICAgICAgICAgeyAnaGlkZS1sZWZ0JzogIXRoaXMuc3RhdGUuZW5hYmxlTmF2aWdhdGlvblBhbmVsVmlzaWJpbGl0eSB9KX0+XHJcbiAgICAgICAgICAgICAgICAgICAge2V4YW1pbmVyU3RhdGVDaGFuZ2VQb3B1cH1cclxuICAgICAgICAgICAgICAgICAgICB7bWFya2luZ0NoZWNrUG9wdXB9XHJcbiAgICAgICAgICAgICAgICAgICAge2J1c3lJbmRpY2F0b3J9XHJcbiAgICAgICAgICAgICAgICAgICAge3Jlc3BvbnNlQWxsb2NhdGlvbkVycm9yRGlhbG9nfVxyXG4gICAgICAgICAgICAgICAgICAgIHthdHlwaWNhbFNlYXJjaERpYWxvZ31cclxuICAgICAgICAgICAgICAgICAgICB7aGVhZGVyfVxyXG4gICAgICAgICAgICAgICAgICAgIHtmb290ZXJ9XHJcbiAgICAgICAgICAgICAgICAgICAge3RoaXMucmVuZGVyRGV0YWlscygpfVxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gKDxCdXN5SW5kaWNhdG9yXHJcbiAgICAgICAgICAgICAgICBpZD0nbW9kdWxlc0xvYWRpbmdCdXN5SW5kaWNhdG9yJ1xyXG4gICAgICAgICAgICAgICAga2V5PSdtb2R1bGVzTG9hZGluZ0J1c3lJbmRpY2F0b3InXHJcbiAgICAgICAgICAgICAgICBpc0J1c3k9e3RydWV9XHJcbiAgICAgICAgICAgICAgICBidXN5SW5kaWNhdG9ySW52b2tlcj17ZW51bXMuQnVzeUluZGljYXRvckludm9rZXIubG9hZGluZ01vZHVsZXN9IC8+KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZW5kZXIgdGhlIGRldGFpbHMgZm9yIHRoZSB3b3JrbGlzdC5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSByZW5kZXJEZXRhaWxzKCkge1xyXG5cclxuICAgICAgICBsZXQgX2lzTWFya2luZ0NoZWNrTW9kZTogYm9vbGVhbiA9IHdvcmtsaXN0U3RvcmUuaW5zdGFuY2UuaXNNYXJraW5nQ2hlY2tNb2RlO1xyXG5cclxuICAgICAgICAvLyBNZXNzYWdlIHBvcHVwXHJcbiAgICAgICAgbGV0IG1lc3NhZ2VQb3B1cDogSlNYLkVsZW1lbnQ7XHJcbiAgICAgICAgaWYgKHFpZ1N0b3JlLmluc3RhbmNlLnNlbGVjdGVkUUlHRm9yTWFya2VyT3BlcmF0aW9uICYmXHJcbiAgICAgICAgICAgICFtYXJrZXJPcGVyYXRpb25Nb2RlRmFjdG9yeS5vcGVyYXRpb25Nb2RlLmlzVGVhbU1hbmFnZW1lbnRNb2RlICYmIHRoaXMuaXNFeGFtQm9keUNDTG9hZGVkKSB7XHJcbiAgICAgICAgICAgIG1lc3NhZ2VQb3B1cCA9ICg8TWVzc2FnZVBvcHVwIGlzT3Blbj17dGhpcy5pc01lc3NhZ2VQb3B1cFZpc2libGV9XHJcbiAgICAgICAgICAgICAgICBjbG9zZU1lc3NhZ2VQYW5lbD17dGhpcy5vbkNsb3NlTWVzc2FnZVBvcHVwfVxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZVR5cGU9e2VudW1zLk1lc3NhZ2VUeXBlLldvcmtsaXN0Q29tcG9zZX1cclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkTGFuZ3VhZ2U9e3RoaXMucHJvcHMuc2VsZWN0ZWRMYW5ndWFnZX1cclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkUWlnSXRlbUlkPXtxaWdTdG9yZS5pbnN0YW5jZS5zZWxlY3RlZFFJR0Zvck1hcmtlck9wZXJhdGlvbi5tYXJrU2NoZW1lR3JvdXBJZH1cclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkUWlnSXRlbT17bWVzc2FnZUhlbHBlci5nZXRDdXJyZW50UUlHTmFtZSgpfVxyXG4gICAgICAgICAgICAgICAgcWlnSXRlbXNMaXN0PXt0aGlzLnFpZ0xpc3RJdGVtc31cclxuICAgICAgICAgICAgICAgIHN1cGVydmlzb3JJZD17dGhpcy5tYXJrZXJJbmZvcm1hdGlvbiA/IHRoaXMubWFya2VySW5mb3JtYXRpb24uc3VwZXJ2aXNvckV4YW1pbmVySWQgOiAwfVxyXG4gICAgICAgICAgICAgICAgcWlnTmFtZT17bWVzc2FnZUhlbHBlci5nZXRDdXJyZW50UUlHTmFtZSgpfVxyXG4gICAgICAgICAgICAgICAgc3VwZXJ2aXNvck5hbWU9e3RoaXMubWFya2VySW5mb3JtYXRpb24gPyB0aGlzLm1hcmtlckluZm9ybWF0aW9uLmZvcm1hdHRlZFN1cGVydmlzb3JOYW1lIDogJyd9XHJcbiAgICAgICAgICAgICAgICBzdWJqZWN0PXt0aGlzLnN1YmplY3R9XHJcbiAgICAgICAgICAgICAgICBwcmlvcml0eURyb3BEb3duU2VsZWN0ZWRJdGVtPXt0aGlzLnByaW9yaXR5RHJvcGRvd25TZWxlY3RlZEl0ZW19XHJcbiAgICAgICAgICAgICAgICBvblFpZ0l0ZW1TZWxlY3RlZD17cWlnU3RvcmUuaW5zdGFuY2Uuc2VsZWN0ZWRRSUdGb3JNYXJrZXJPcGVyYXRpb24ucXVlc3Rpb25QYXBlclBhcnRJZH1cclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VCb2R5PXt0aGlzLm1lc3NhZ2VCb2R5fVxyXG4gICAgICAgICAgICAgICAgcXVlc3Rpb25QYXBlclBhcnRJZD17cWlnU3RvcmUuaW5zdGFuY2Uuc2VsZWN0ZWRRSUdGb3JNYXJrZXJPcGVyYXRpb24ucXVlc3Rpb25QYXBlclBhcnRJZH1cclxuICAgICAgICAgICAgLz4pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGxlZnRQYW5lbDogSlNYLkVsZW1lbnQ7XHJcbiAgICAgICAgaWYgKF9pc01hcmtpbmdDaGVja01vZGUpIHtcclxuICAgICAgICAgICAgaWYgKHdvcmtsaXN0U3RvcmUuaW5zdGFuY2UubWFya2luZ0NoZWNrRXhhbWluZXJzTGlzdCAmJiB3b3JrbGlzdFN0b3JlLmluc3RhbmNlLm1hcmtpbmdDaGVja0V4YW1pbmVyc0xpc3QuZmlyc3QoKS50b0V4YW1pbmVyKSB7XHJcbiAgICAgICAgICAgICAgICBsZWZ0UGFuZWwgPSAoPE1hcmtDaGVja0V4YW1pbmVyc1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkTGFuZ3VhZ2U9e3RoaXMucHJvcHMuc2VsZWN0ZWRMYW5ndWFnZX1cclxuICAgICAgICAgICAgICAgICAgICBtYXJrQ2hlY2tFeGFtaW5lcnM9e3dvcmtsaXN0U3RvcmUuaW5zdGFuY2UubWFya2luZ0NoZWNrRXhhbWluZXJzTGlzdH1cclxuICAgICAgICAgICAgICAgICAgICBpZD17J21hcmtDaGVja0V4YW1pbmVycyd9XHJcbiAgICAgICAgICAgICAgICAgICAga2V5PXsna2V5X21hcmtDaGVja0V4YW1pbmVycyd9XHJcbiAgICAgICAgICAgICAgICAgICAgb25FeGFtaW5lckNsaWNrPXt0aGlzLm9uTWFya2luZ0NoZWNrUmVxdWVzdGVyRXhhbWluZXJDbGlja31cclxuICAgICAgICAgICAgICAgIC8+KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsZWZ0UGFuZWwgPSAoPGRpdiBjbGFzc05hbWU9J2NvbHVtbi1sZWZ0LWlubmVyJz5cclxuICAgICAgICAgICAgICAgIDxNYXJrZXJJbmZvcm1hdGlvblBhbmVsIHJlbmRlcmVkT249e3RoaXMuc3RhdGUucmVuZGVyZWRPbn0gbWFya2VySW5mb3JtYXRpb249e3RoaXMubWFya2VySW5mb3JtYXRpb259XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRMYW5ndWFnZT17dGhpcy5wcm9wcy5zZWxlY3RlZExhbmd1YWdlfVxyXG4gICAgICAgICAgICAgICAgICAgIHNob3dNZXNzYWdlUG9wdXA9e3RoaXMub25TZW5kTWVzc2FnZUNsaWNrZWR9XHJcbiAgICAgICAgICAgICAgICAgICAgaXNUZWFtTWFuYWdlbWVudE1vZGU9e21hcmtlck9wZXJhdGlvbk1vZGVGYWN0b3J5Lm9wZXJhdGlvbk1vZGUuaXNUZWFtTWFuYWdlbWVudE1vZGV9XHJcbiAgICAgICAgICAgICAgICAgICAgc2hvd0V4YW1pbmVyU3RhdGVDaGFuZ2VQb3B1cD17dGhpcy5zaG93RXhhbWluZXJTdGF0ZUNoYW5nZVBvcHVwfVxyXG4gICAgICAgICAgICAgICAgICAgIHNob3dNZXNzYWdlTGluaz17dGhpcy5pc1NlbmRNZXNzYWdlTGlua1Zpc2libGUoKX0gLz5cclxuICAgICAgICAgICAgICAgIHt0aGlzLmdldE1hcmtpbmdJbnN0cnVjdGlvbkxpbmtWaXNpYmxlKCl9XHJcbiAgICAgICAgICAgICAgICA8VGFyZ2V0cyByZW5kZXJlZE9uPXt0aGlzLnN0YXRlLnJlbmRlcmVkT259IG1hcmtpbmdUYXJnZXRzU3VtbWFyeT17dGhpcy5tYXJraW5nVGFyZ2V0c1N1bW1hcnl9XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRMYW5ndWFnZT17dGhpcy5wcm9wcy5zZWxlY3RlZExhbmd1YWdlfVxyXG4gICAgICAgICAgICAgICAgICAgIGxpdmVUYXJnZXRSZW5kZXJlZE9uPXt0aGlzLnN0YXRlLnRhcmdldFJlbmRlcmVkT259XHJcbiAgICAgICAgICAgICAgICAgICAgaXNUZWFtTWFuYWdlbWVudE1vZGU9e21hcmtlck9wZXJhdGlvbk1vZGVGYWN0b3J5Lm9wZXJhdGlvbk1vZGUuaXNUZWFtTWFuYWdlbWVudE1vZGV9PlxyXG4gICAgICAgICAgICAgICAgPC9UYXJnZXRzPlxyXG4gICAgICAgICAgICA8L2Rpdj4pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUmVuZGVyIGFsbCBjb21wb25lbnRzIGZvciB0aGUgd29ya2xpc3RcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17XHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWVzKCdjb250ZW50LXdyYXBwZXInLFxyXG4gICAgICAgICAgICAgICAgICAgIHsgJ3JlbGF0aXZlJzogIV9pc01hcmtpbmdDaGVja01vZGUgfSxcclxuICAgICAgICAgICAgICAgICAgICB7ICdjaGVjay1tYXJraW5nJzogX2lzTWFya2luZ0NoZWNrTW9kZSB9XHJcbiAgICAgICAgICAgICAgICApfSA+XHJcbiAgICAgICAgICAgICAgICB7dGhpcy5tYXJraW5nSW5zdHJ1Y3Rpb25GaWxlTGlzdFBhbmxlfVxyXG4gICAgICAgICAgICAgICAgPGRpdiBpZD0nY29sdW1uLWxlZnQnXHJcbiAgICAgICAgICAgICAgICAgICAgb25Nb3VzZU92ZXI9eygpID0+IHsgdGhpcy5vbk1vdXNlSG92ZXJPck1vdXNlTGVhdmUodHJ1ZSk7IH19XHJcbiAgICAgICAgICAgICAgICAgICAgb25Nb3VzZUxlYXZlPXsoKSA9PiB7IHRoaXMub25Nb3VzZUhvdmVyT3JNb3VzZUxlYXZlKGZhbHNlKTsgfX1cclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ2NvbHVtbi1sZWZ0JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgeyAnaG92ZXJlZCc6IHRoaXMuaXNNb3VzZUhvdmVyZWQgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgeyAnY2hlY2stZXhhbWluZXItaW5mbyc6IF9pc01hcmtpbmdDaGVja01vZGUgfVxyXG4gICAgICAgICAgICAgICAgICAgICl9ID5cclxuICAgICAgICAgICAgICAgICAgICB7bGVmdFBhbmVsfVxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8V29ya0xpc3RDb250YWluZXIgaWQ9eyd3b3JrbGlzdGNvbnRhaW5lcl8nICsgdGhpcy5wcm9wcy5pZH1cclxuICAgICAgICAgICAgICAgICAgICBrZXk9eyd3b3JrbGlzdGNvbnRhaW5lcl9rZXlfJyArIHRoaXMucHJvcHMuaWR9XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRMYW5ndWFnZT17dGhpcy5wcm9wcy5zZWxlY3RlZExhbmd1YWdlfVxyXG4gICAgICAgICAgICAgICAgICAgIHdvcmtsaXN0VHlwZT17dGhpcy53b3JrbGlzdFR5cGV9XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VNb2RlPXt0aGlzLnJlc3BvbnNlTW9kZX1cclxuICAgICAgICAgICAgICAgICAgICByZW1hcmtSZXF1ZXN0VHlwZT17dGhpcy5yZW1hcmtSZXF1ZXN0VHlwZX1cclxuICAgICAgICAgICAgICAgICAgICBpc0RpcmVjdGVkUmVtYXJrPXt0aGlzLmlzRGlyZWN0ZWRSZW1hcmt9XHJcbiAgICAgICAgICAgICAgICAgICAgd29ya2xpc3RUYWJEZXRhaWxzPXt0aGlzLndvcmtsaXN0VGFiRGV0YWlsc31cclxuICAgICAgICAgICAgICAgICAgICB0b2dnbGVMZWZ0UGFuZWw9e3RoaXMudG9nZ2xlTGVmdFBhbmVsfVxyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaFRhYj17dGhpcy5zd2l0Y2hUYWJ9XHJcbiAgICAgICAgICAgICAgICAgICAgaXNSZWZyZXNoaW5nPXt0aGlzLmlzUmVmcmVzaGluZ31cclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZFRhYj17dGhpcy5yZXNwb25zZU1vZGV9XHJcbiAgICAgICAgICAgICAgICAgICAgaXNNYXJraW5nQ2hlY2tXb3JrbGlzdEFjY2Vzc1ByZXNlbnQ9e3dvcmtsaXN0U3RvcmUuaW5zdGFuY2UuaXNNYXJraW5nQ2hlY2tXb3JrbGlzdEFjY2Vzc1ByZXNlbnR9XHJcbiAgICAgICAgICAgICAgICAgICAgaXNUZWFtTWFuYWdlbWVudE1vZGU9e21hcmtlck9wZXJhdGlvbk1vZGVGYWN0b3J5Lm9wZXJhdGlvbk1vZGUuaXNUZWFtTWFuYWdlbWVudE1vZGV9XHJcbiAgICAgICAgICAgICAgICAgICAgaXNNYXJraW5nQ2hlY2tNb2RlPXtfaXNNYXJraW5nQ2hlY2tNb2RlfVxyXG4gICAgICAgICAgICAgICAgICAgIGhhc1RhcmdldEZvdW5kPXt0aGlzLmhhc1RhcmdldEZvdW5kfVxyXG4gICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgIHttZXNzYWdlUG9wdXB9XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTaG93IHRoZSBtYXJraW5naW5zdHJ1Y3Rpb24gcGFuZWwgb25seSB3aGVuIHBkZiB1cGxvYWRlZCBhZ2FpbnN0IHRoYXQgUUlHLlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGdldE1hcmtpbmdJbnN0cnVjdGlvbkxpbmtWaXNpYmxlKCkge1xyXG4gICAgICAgIGlmICgobWFya2VyT3BlcmF0aW9uTW9kZUZhY3Rvcnkub3BlcmF0aW9uTW9kZS5pc01hcmtpbmdJbnN0cnVjdGlvbkxpbmtWaXNpYmxlKSAmJiAhKHRoaXMubWFya2VySW5mb3JtYXRpb24gPT0gbnVsbCkgJiZcclxuICAgICAgICAgICAgbWFya2luZ0luc3RydWN0aW9uU3RvcmUuaW5zdGFuY2UubWFya2luZ0luc3RydWN0aW9uTGlzdCAmJlxyXG4gICAgICAgICAgICBtYXJraW5nSW5zdHJ1Y3Rpb25TdG9yZS5pbnN0YW5jZS5tYXJraW5nSW5zdHJ1Y3Rpb25MaXN0LnNpemUgPiAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoPE1hcmtpbmdJbnN0cnVjdGlvblBhbmVsXHJcbiAgICAgICAgICAgICAgICBpZD0nbWFya2luZy1pbnN0cnVjdGlvbi1ob2xkZXInXHJcbiAgICAgICAgICAgICAgICBrZXk9J21hcmtpbmctaW5zdHJ1Y3Rpb24taG9sZGVyJ1xyXG4gICAgICAgICAgICAgICAgb25NYXJrSW5zdHJ1Y3Rpb25GaWxlQ2xpY2s9e3RoaXMub25NYXJrSW5zdHJ1Y3Rpb25GaWxlQ2xpY2t9XHJcbiAgICAgICAgICAgICAgICBvbk1hcmtJbnN0cnVjdGlvblBhbmVsQ2xpY2s9e3RoaXMub25NYXJrSW5zdHJ1Y3Rpb25QYW5lbENsaWNrfVxyXG4gICAgICAgICAgICAgICAgb25NYXJraW5nSW5zdHJ1Y3RvbkNsaWNrSGFuZGxlcj17dGhpcy5vbk1hcmtpbmdJbnN0cnVjdG9uQ2xpY2tIYW5kbGVyfVxyXG4gICAgICAgICAgICAgICAgcmVuZGVyZWRPbj17dGhpcy5zdGF0ZS5tYXJraW5nSW5zdHJ1Y3Rpb25QYW5lbFJlbmRlcmVkT259PlxyXG4gICAgICAgICAgICA8L01hcmtpbmdJbnN0cnVjdGlvblBhbmVsPik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBTd2l0Y2ggdGFiIGJlZm9yZSBkYXRhIHNlcnZpY2UgY2FsbCB0byBnZXQgdGhlIGRhdGFcclxuICAgICAqIEBwYXJhbSByZXNwb25zZU1vZGVcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBzd2l0Y2hUYWIocmVzcG9uc2VNb2RlOiBlbnVtcy5SZXNwb25zZU1vZGUpIHtcclxuICAgICAgICB3b3JrbGlzdEFjdGlvbkNyZWF0b3IucmVzcG9uc2VNb2RlQ2hhbmdlZChyZXNwb25zZU1vZGUsIHdvcmtsaXN0U3RvcmUuaW5zdGFuY2UuaXNNYXJraW5nQ2hlY2tNb2RlKTtcclxuICAgICAgICBpZiAocmVzcG9uc2VNb2RlICE9PSB0aGlzLnJlc3BvbnNlTW9kZSAmJiBhcHBsaWNhdGlvblN0b3JlLmluc3RhbmNlLmlzT25saW5lKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVzcG9uc2VNb2RlID0gcmVzcG9uc2VNb2RlO1xyXG4gICAgICAgICAgICAvKiogc2V0IHRoaXMgdG8gdHJ1ZSB0byBzaG93IGxvYWRpbm5nIGluZGljYXRvciAqL1xyXG4gICAgICAgICAgICB0aGlzLmlzUmVmcmVzaGluZyA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyByZW5kZXJlZE9uOiBEYXRlLm5vdygpIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFN1YnNjcmliZSB0byBsYW5ndWFnZSBjaGFuZ2UgZXZlbnRcclxuICAgICAqL1xyXG4gICAgcHVibGljIGNvbXBvbmVudERpZE1vdW50KCkge1xyXG4gICAgICAgIHRoaXMubG9hZERlcGVuZGVuY2llcygpO1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRoaXMuX2JvdW5kSGFuZGxlT25DbGljayk7XHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5fYm91bmRIYW5kbGVPbkNsaWNrKTtcclxuICAgIH1cclxuXHJcblx0LyoqXHJcblx0ICogU3Vic2NyaWJpbmcgY29tcG9uZW50IHVwZGF0ZWQgZXZlbnQuXHJcblx0ICovXHJcbiAgICBwdWJsaWMgY29tcG9uZW50RGlkVXBkYXRlKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5zdGF0ZS5tb2R1bGVzTG9hZGVkIHx8IHRoaXMuc3RhdGUuaXNCdXN5IHx8IHRoaXMud29ya2xpc3RUeXBlID09PSBlbnVtcy5Xb3JrbGlzdFR5cGUubm9uZSkge1xyXG4gICAgICAgICAgICB0aGlzLnByb3BzLnNldE9mZmxpbmVDb250YWluZXIodHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSG9vayBhbGwgZXZlbnQgbGlzdGVuZXJzIGhlcmUsIEl0IHdpbGwgYmUgY2FsbGVkIGFmdGVyIGxvYWRpbmcgZGVwZW5jaWVzXHJcbiAgICAgKiBXZSByZXF1aXJlZCB0aGlzIHR5cGUgb2YgaW1wbGVtZW50YXRpb24gZm9yIHRoZSBpbml0aWFsIHJvdXRpbmcgcGFnZSBsaWtlIHdvcmtsaXN0LCByZXNwb25zZWNvbnRhaW5lciBldGMuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgYWRkRXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgY29uZmlndXJhYmxlQ2hhcmFjdGVyaXN0aWNzQWN0aW9uQ3JlYXRvci5nZXRFeGFtQm9keUNDcyhjb25maWd1cmFibGVDaGFyYWN0ZXJpc3RpY3NTdG9yZS5pbnN0YW5jZS5pc0V4YW1Cb2R5Q0NMb2FkZWQpO1xyXG4gICAgICAgIGV4YW1pbmVyc3RvcmUuaW5zdGFuY2UuYWRkTGlzdGVuZXIoZXhhbWluZXJzdG9yZS5FeGFtaW5lclN0b3JlLk1BUktFUl9JTkZPX1VQREFURURfRVZFTlQsXHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlTWFya2VySW5mb3JtYXRpb25QYW5lbCk7XHJcbiAgICAgICAgdGFyZ2V0U3VtbWFyeVN0b3JlLmluc3RhbmNlLmFkZExpc3RlbmVyKHRhcmdldFN1bW1hcnlTdG9yZS5UYXJnZXRTdW1tYXJ5U3RvcmUuTUFSS0lOR19QUk9HUkVTU19FVkVOVCxcclxuICAgICAgICAgICAgdGhpcy5yZWZyZXNoVGFyZ2V0UHJvZ3Jlc3MpO1xyXG4gICAgICAgIC8qIHN1YnNjcmliaW5nIHRvIHdvcmtsaXN0IG1hcmtpbmcgbW9kZSBjaGFuZ2UgZXZlbnQgKi9cclxuICAgICAgICB3b3JrbGlzdFN0b3JlLmluc3RhbmNlLmFkZExpc3RlbmVyKHdvcmtsaXN0U3RvcmUuV29ya0xpc3RTdG9yZS5XT1JLTElTVF9NQVJLSU5HX01PREVfQ0hBTkdFLCB0aGlzLm1hcmtpbmdNb2RlQ2hhbmdlZCk7XHJcbiAgICAgICAgcmVzcG9uc2VTdG9yZS5pbnN0YW5jZS5hZGRMaXN0ZW5lcihyZXNwb25zZVN0b3JlLlJlc3BvbnNlU3RvcmUuUkVTUE9OU0VfT1BFTkVELCB0aGlzLm9wZW5SZXNwb25zZSk7XHJcbiAgICAgICAgcmVzcG9uc2VTdG9yZS5pbnN0YW5jZS5hZGRMaXN0ZW5lcihyZXNwb25zZVN0b3JlLlJlc3BvbnNlU3RvcmUuUkVTUE9OU0VfQUxMT0NBVEVEX0VWRU5ULCB0aGlzLm9uUmVzcG9uc2VBbGxvY2F0ZWQpO1xyXG4gICAgICAgIC8vIFRPRE8gbmVlZCB0byByZW1vdmUuIFRoaXMgaXMgYWRkZWQgdG8gdGVzdCB0aGUgc3RvcmUgYXMgcGFydCBvZiB1c2VyIHN0b3J5LlxyXG4gICAgICAgIGJ1c3lJbmRpY2F0b3JTdG9yZS5pbnN0YW5jZS5hZGRMaXN0ZW5lcihidXN5SW5kaWNhdG9yU3RvcmUuQnVzeUluZGljYXRvclN0b3JlLkJVU1lfSU5ESUNBVE9SLCB0aGlzLnNldEJ1c3lJbmRpY2F0b3IpO1xyXG4gICAgICAgIHN1Ym1pdFN0b3JlLmluc3RhbmNlLmFkZExpc3RlbmVyKHN1Ym1pdFN0b3JlLlN1Ym1pdFN0b3JlLlNVQk1JVF9SRVNQT05TRV9DT01QTEVURUQsIHRoaXMub25TdWJtaXRSZXNwb25zZUNvbXBsZXRlZCk7XHJcbiAgICAgICAgdXNlckluZm9TdG9yZS5pbnN0YW5jZS5hZGRMaXN0ZW5lcih1c2VySW5mb1N0b3JlLlVzZXJJbmZvU3RvcmUuU0hPV19MT0dPVVRfUE9QVVBfRVZFTlQsIHRoaXMuc2hvd0xvZ291dENvbmZpcm1hdGlvbik7XHJcbiAgICAgICAgc2NyaXB0U3RvcmUuaW5zdGFuY2UuYWRkTGlzdGVuZXIoXHJcbiAgICAgICAgICAgIHNjcmlwdFN0b3JlLlNjcmlwdFN0b3JlLkNBTkRJREFURV9SRVNQT05TRV9NRVRBREFUQV9SRVRSSUVWQUxfRVZFTlQsXHJcbiAgICAgICAgICAgIHRoaXMub25DYW5kaWRhdGVSZXNwb25zZU1ldGFkYXRhUmV0cmlldmVkXHJcbiAgICAgICAgKTtcclxuICAgICAgICB3b3JrbGlzdFN0b3JlLmluc3RhbmNlLmFkZExpc3RlbmVyKHdvcmtsaXN0U3RvcmUuV29ya0xpc3RTdG9yZS5XT1JLTElTVF9DT1VOVF9DSEFOR0UsIHRoaXMudXBkYXRlUmVzcG9uc2VDb3VudCk7XHJcbiAgICAgICAgdXNlck9wdGlvbnNTdG9yZS5pbnN0YW5jZS5hZGRMaXN0ZW5lcih1c2VyT3B0aW9uc1N0b3JlLlVzZXJvcHRpb25TdG9yZS5VU0VSX09QVElPTl9HRVRfRVZFTlQsIHRoaXMub25Vc2VyT3B0aW9uc0xvYWRlZCk7XHJcbiAgICAgICAgcWlnU3RvcmUuaW5zdGFuY2UuYWRkTGlzdGVuZXIocWlnU3RvcmUuUWlnU3RvcmUuUUlHX1NFTEVDVEVEX0VWRU5ULFxyXG4gICAgICAgICAgICB0aGlzLm9uUWlnU2VsZWN0aW9uKTtcclxuICAgICAgICBtZXNzYWdlU3RvcmUuaW5zdGFuY2UuYWRkTGlzdGVuZXIobWVzc2FnZVN0b3JlLk1lc3NhZ2VTdG9yZS5NRVNTQUdFX0NMT1NFX0VWRU5ULCB0aGlzLm9uQ2xvc2VNZXNzYWdlUG9wdXApO1xyXG4gICAgICAgIG1lc3NhZ2VTdG9yZS5pbnN0YW5jZS5hZGRMaXN0ZW5lcihtZXNzYWdlU3RvcmUuTWVzc2FnZVN0b3JlLk1FU1NBR0VfTkFWSUdBVElPTl9FVkVOVCwgdGhpcy5vbk1lc3NhZ2VOYXZpZ2F0aW9uKTtcclxuICAgICAgICBzdGFtcFN0b3JlLmluc3RhbmNlLmFkZExpc3RlbmVyXHJcbiAgICAgICAgICAgIChzdGFtcFN0b3JlLlN0YW1wU3RvcmUuU1RBTVBTX0xPQURFRF9FVkVOVCwgcmVzcG9uc2VTZWFyY2hIZWxwZXIubG9hZEZhdm9yaXRlU3RhbXBGb3JTZWxlY3RlZFFpZyk7XHJcbiAgICAgICAgY2NTdG9yZS5pbnN0YW5jZS5hZGRMaXN0ZW5lcihjY1N0b3JlLkNvbmZpZ3VyYWJsZUNoYXJhY3RlcmlzdGljc1N0b3JlLkVYQU1fQk9EWV9DQ19HRVQsXHJcbiAgICAgICAgICAgIHRoaXMub25FeGFtQm9keUNDTG9hZGVkKTtcclxuICAgICAgICByZXNwb25zZVN0b3JlLmluc3RhbmNlLmFkZExpc3RlbmVyKHJlc3BvbnNlU3RvcmUuUmVzcG9uc2VTdG9yZS5BVFlQSUNBTF9TRUFSQ0hfUkVTVUxUX0VWRU5ULCB0aGlzLmF0eXBpY2FsU2VhcmNoQ2xpY2spO1xyXG4gICAgICAgIHdvcmtsaXN0U3RvcmUuaW5zdGFuY2UuYWRkTGlzdGVuZXIod29ya2xpc3RTdG9yZS5Xb3JrTGlzdFN0b3JlLk1BUktJTkdfQ0hFQ0tfRVhBTUlORVJfU0VMRUNUSU9OX1VQREFURUQsXHJcbiAgICAgICAgICAgIHRoaXMuZ2V0TWFya2luZ0NoZWNrV29ya2xpc3RGb3JTZWxlY3RlZEV4YW1pbmVyKTtcclxuICAgICAgICB3b3JrbGlzdFN0b3JlLmluc3RhbmNlLmFkZExpc3RlbmVyKHdvcmtsaXN0U3RvcmUuV29ya0xpc3RTdG9yZS5NQVJLX0NIRUNLX0VYQU1JTkVSU19EQVRBX1JFVFJJVkVELFxyXG4gICAgICAgICAgICB0aGlzLm1hcmtDaGVja0V4YW1pbmVyc0RhdGFSZXRyaXZlZCk7XHJcbiAgICAgICAgdGFyZ2V0U3VtbWFyeVN0b3JlLmluc3RhbmNlLmFkZExpc3RlbmVyXHJcbiAgICAgICAgICAgICh0YXJnZXRTdW1tYXJ5U3RvcmUuVGFyZ2V0U3VtbWFyeVN0b3JlLldPUktMSVNUX0lOSVRJQUxJU0FUSU9OX0NPTVBMRVRFRCxcclxuICAgICAgICAgICAgdGhpcy53b3JrbGlzdEluaXRpYWxpc2F0aW9uQ29tcGxldGVkKTtcclxuICAgICAgICB3YXJuaW5nTWVzc2FnZVN0b3JlLmluc3RhbmNlLmFkZExpc3RlbmVyKFxyXG4gICAgICAgICAgICB3YXJuaW5nTWVzc2FnZVN0b3JlLldhcm5pbmdNZXNzYWdlU3RvcmUuV0FSTklOR19NRVNTQUdFX05BVklHQVRJT05fRVZFTlQsXHJcbiAgICAgICAgICAgIHdhcm5pbmdNZXNzYWdlTmF2aWdhdGlvbkhlbHBlci5oYW5kbGVXYXJuaW5nTWVzc2FnZU5hdmlnYXRpb24pO1xyXG4gICAgICAgIHdvcmtsaXN0U3RvcmUuaW5zdGFuY2UuYWRkTGlzdGVuZXIod29ya2xpc3RTdG9yZS5Xb3JrTGlzdFN0b3JlLlNJTVVMQVRJT05fVEFSR0VUX0NPTVBMRVRFRF9FVkVOVCxcclxuICAgICAgICAgICAgdGhpcy5vblNpbXVsYXRpb25UYXJnZXRDb21wbGV0aW9uKTtcclxuICAgICAgICBtYXJraW5nSW5zdHJ1Y3Rpb25TdG9yZS5pbnN0YW5jZS5hZGRMaXN0ZW5lcihtYXJraW5nSW5zdHJ1Y3Rpb25TdG9yZS5NYXJraW5nSW5zdHJ1Y3Rpb25TdG9yZS5NQVJLSU5HSU5TVFJVQ1RJT05TX0RBVEFfTE9BREVEX0VWRU5ULFxyXG4gICAgICAgICAgICB0aGlzLm9uTWFya2luZ0luc3RydWN0aW9uc0xvYWRlZCk7XHJcbiAgICAgICAgbWFya2luZ0luc3RydWN0aW9uU3RvcmUuaW5zdGFuY2UuYWRkTGlzdGVuZXIobWFya2luZ0luc3RydWN0aW9uU3RvcmUuTWFya2luZ0luc3RydWN0aW9uU3RvcmUuTUFSS0lOR0lOU1RSVUNUSU9OX1BBTkVMX0NMT1NFRF9FVkVOVCxcclxuICAgICAgICAgICAgdGhpcy5vbk1hcmtpbmdJbnN0cnVjaW9uUGFubGVDbG9zZWQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSG9vayBhbGwgZXZlbnQgbGlzdGVuZXJzIGZvciB0ZWFtIG1hbmFnZW1lbnQgaGVyZSwgSXQgd2lsbCBiZSBjYWxsZWQgYWZ0ZXIgbG9hZGluZyBkZXBlbmNpZXNcclxuICAgICAqIFdlIHJlcXVpcmVkIHRoaXMgdHlwZSBvZiBpbXBsZW1lbnRhdGlvbiBmb3IgdGhlIGluaXRpYWwgcm91dGluZyBwYWdlIGxpa2Ugd29ya2xpc3QsIHJlc3BvbnNlY29udGFpbmVyIGV0Yy5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBhZGRFdmVudExpc3RlbmVyc0ZvclRlYW1NYW5hZ2VtZW50KCkge1xyXG4gICAgICAgIGlmIChtYXJrZXJPcGVyYXRpb25Nb2RlRmFjdG9yeSAmJiBtYXJrZXJPcGVyYXRpb25Nb2RlRmFjdG9yeS5vcGVyYXRpb25Nb2RlLmlzVGVhbU1hbmFnZW1lbnRNb2RlKSB7XHJcbiAgICAgICAgICAgIHRlYW1NYW5hZ2VtZW50U3RvcmUuaW5zdGFuY2UuYWRkTGlzdGVuZXIodGVhbU1hbmFnZW1lbnRTdG9yZS5UZWFtTWFuYWdlbWVudFN0b3JlLkNIQU5HRV9FWEFNSU5FUl9TVEFUVVNfVVBEQVRFRCxcclxuICAgICAgICAgICAgICAgIHRoaXMuZXhhbWluZXJDaGFuZ2VTdGF0dXNSZWNlaXZlZCk7XHJcbiAgICAgICAgICAgIHRlYW1NYW5hZ2VtZW50U3RvcmUuaW5zdGFuY2UuYWRkTGlzdGVuZXIodGVhbU1hbmFnZW1lbnRTdG9yZS5UZWFtTWFuYWdlbWVudFN0b3JlLlBST1ZJREVfU0VDT05EX1NUQU5EQVJESVNBVElPTl9VUERBVEVELFxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWNvbmRTdGFuZGFyZGlzYXRpb25SZWNlaXZlZCk7XHJcbiAgICAgICAgICAgIHRlYW1NYW5hZ2VtZW50U3RvcmUuaW5zdGFuY2UuYWRkTGlzdGVuZXIodGVhbU1hbmFnZW1lbnRTdG9yZS5UZWFtTWFuYWdlbWVudFN0b3JlLkFQUFJPVkFMX01BTkFHRU1FTlRfQUNUSU9OX0VYRUNVVEVELFxyXG4gICAgICAgICAgICAgICAgdGhpcy5vbkFwcHJvdmFsTWFuYWdlbWVudEFjdGlvbkV4ZWN1dGVkKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmUgYWxsIGV2ZW50IGxpc3RlbmVycyBmb3IgdGVhbSBtYW5hZ2VtZW50IGhlcmUuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgcmVtb3ZlRXZlbnRMaXN0ZW5lcnNGb3JUZWFtTWFuYWdlbWVudCgpIHtcclxuICAgICAgICBpZiAobWFya2VyT3BlcmF0aW9uTW9kZUZhY3RvcnkgJiYgbWFya2VyT3BlcmF0aW9uTW9kZUZhY3Rvcnkub3BlcmF0aW9uTW9kZS5pc1RlYW1NYW5hZ2VtZW50TW9kZSAmJiB0ZWFtTWFuYWdlbWVudFN0b3JlKSB7XHJcbiAgICAgICAgICAgIHRlYW1NYW5hZ2VtZW50U3RvcmUuaW5zdGFuY2UucmVtb3ZlTGlzdGVuZXIodGVhbU1hbmFnZW1lbnRTdG9yZS5UZWFtTWFuYWdlbWVudFN0b3JlLkNIQU5HRV9FWEFNSU5FUl9TVEFUVVNfVVBEQVRFRCxcclxuICAgICAgICAgICAgICAgIHRoaXMuZXhhbWluZXJDaGFuZ2VTdGF0dXNSZWNlaXZlZCk7XHJcbiAgICAgICAgICAgIHRlYW1NYW5hZ2VtZW50U3RvcmUuaW5zdGFuY2UucmVtb3ZlTGlzdGVuZXIodGVhbU1hbmFnZW1lbnRTdG9yZS5UZWFtTWFuYWdlbWVudFN0b3JlLlBST1ZJREVfU0VDT05EX1NUQU5EQVJESVNBVElPTl9VUERBVEVELFxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWNvbmRTdGFuZGFyZGlzYXRpb25SZWNlaXZlZCk7XHJcbiAgICAgICAgICAgIHRlYW1NYW5hZ2VtZW50U3RvcmUuaW5zdGFuY2UucmVtb3ZlTGlzdGVuZXIodGVhbU1hbmFnZW1lbnRTdG9yZS5UZWFtTWFuYWdlbWVudFN0b3JlLkFQUFJPVkFMX01BTkFHRU1FTlRfQUNUSU9OX0VYRUNVVEVELFxyXG4gICAgICAgICAgICAgICAgdGhpcy5vbkFwcHJvdmFsTWFuYWdlbWVudEFjdGlvbkV4ZWN1dGVkKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVbnN1YnNjcmliZSBsYW5ndWFnZSBjaGFuZ2UgZXZlbnRcclxuICAgICAqL1xyXG4gICAgcHVibGljIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xyXG4gICAgICAgIGV4YW1pbmVyc3RvcmUuaW5zdGFuY2UucmVtb3ZlTGlzdGVuZXIoZXhhbWluZXJzdG9yZS5FeGFtaW5lclN0b3JlLk1BUktFUl9JTkZPX1VQREFURURfRVZFTlQsIHRoaXMudXBkYXRlTWFya2VySW5mb3JtYXRpb25QYW5lbCk7XHJcbiAgICAgICAgdGFyZ2V0U3VtbWFyeVN0b3JlLmluc3RhbmNlLnJlbW92ZUxpc3RlbmVyKFxyXG4gICAgICAgICAgICB0YXJnZXRTdW1tYXJ5U3RvcmUuVGFyZ2V0U3VtbWFyeVN0b3JlLk1BUktJTkdfUFJPR1JFU1NfRVZFTlQsXHJcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaFRhcmdldFByb2dyZXNzXHJcbiAgICAgICAgKTtcclxuICAgICAgICAvKiB1bnN1YnNjcmliaW5nIHRvIHdvcmtsaXN0IG1hcmtpbmcgbW9kZSBjaGFuZ2UgZXZlbnQgKi9cclxuICAgICAgICB3b3JrbGlzdFN0b3JlLmluc3RhbmNlLnJlbW92ZUxpc3RlbmVyKHdvcmtsaXN0U3RvcmUuV29ya0xpc3RTdG9yZS5XT1JLTElTVF9NQVJLSU5HX01PREVfQ0hBTkdFLCB0aGlzLm1hcmtpbmdNb2RlQ2hhbmdlZCk7XHJcbiAgICAgICAgcmVzcG9uc2VTdG9yZS5pbnN0YW5jZS5yZW1vdmVMaXN0ZW5lcihyZXNwb25zZVN0b3JlLlJlc3BvbnNlU3RvcmUuUkVTUE9OU0VfT1BFTkVELCB0aGlzLm9wZW5SZXNwb25zZSk7XHJcbiAgICAgICAgcmVzcG9uc2VTdG9yZS5pbnN0YW5jZS5yZW1vdmVMaXN0ZW5lcihyZXNwb25zZVN0b3JlLlJlc3BvbnNlU3RvcmUuUkVTUE9OU0VfQUxMT0NBVEVEX0VWRU5ULCB0aGlzLm9uUmVzcG9uc2VBbGxvY2F0ZWQpO1xyXG4gICAgICAgIHN1Ym1pdFN0b3JlLmluc3RhbmNlLnJlbW92ZUxpc3RlbmVyKHN1Ym1pdFN0b3JlLlN1Ym1pdFN0b3JlLlNVQk1JVF9SRVNQT05TRV9DT01QTEVURUQsIHRoaXMub25TdWJtaXRSZXNwb25zZUNvbXBsZXRlZCk7XHJcbiAgICAgICAgYnVzeUluZGljYXRvclN0b3JlLmluc3RhbmNlLnJlbW92ZUxpc3RlbmVyKGJ1c3lJbmRpY2F0b3JTdG9yZS5CdXN5SW5kaWNhdG9yU3RvcmUuQlVTWV9JTkRJQ0FUT1IsIHRoaXMuc2V0QnVzeUluZGljYXRvcik7XHJcbiAgICAgICAgdXNlckluZm9TdG9yZS5pbnN0YW5jZS5yZW1vdmVMaXN0ZW5lcih1c2VySW5mb1N0b3JlLlVzZXJJbmZvU3RvcmUuU0hPV19MT0dPVVRfUE9QVVBfRVZFTlQsIHRoaXMuc2hvd0xvZ291dENvbmZpcm1hdGlvbik7XHJcbiAgICAgICAgc2NyaXB0U3RvcmUuaW5zdGFuY2UucmVtb3ZlTGlzdGVuZXIoXHJcbiAgICAgICAgICAgIHNjcmlwdFN0b3JlLlNjcmlwdFN0b3JlLkNBTkRJREFURV9SRVNQT05TRV9NRVRBREFUQV9SRVRSSUVWQUxfRVZFTlQsXHJcbiAgICAgICAgICAgIHRoaXMub25DYW5kaWRhdGVSZXNwb25zZU1ldGFkYXRhUmV0cmlldmVkXHJcbiAgICAgICAgKTtcclxuICAgICAgICB3b3JrbGlzdFN0b3JlLmluc3RhbmNlLnJlbW92ZUxpc3RlbmVyKHdvcmtsaXN0U3RvcmUuV29ya0xpc3RTdG9yZS5XT1JLTElTVF9DT1VOVF9DSEFOR0UsIHRoaXMudXBkYXRlUmVzcG9uc2VDb3VudCk7XHJcbiAgICAgICAgdXNlck9wdGlvbnNTdG9yZS5pbnN0YW5jZS5yZW1vdmVMaXN0ZW5lcih1c2VyT3B0aW9uc1N0b3JlLlVzZXJvcHRpb25TdG9yZS5VU0VSX09QVElPTl9HRVRfRVZFTlQsIHRoaXMub25Vc2VyT3B0aW9uc0xvYWRlZCk7XHJcbiAgICAgICAgcWlnU3RvcmUuaW5zdGFuY2UucmVtb3ZlTGlzdGVuZXIocWlnU3RvcmUuUWlnU3RvcmUuUUlHX1NFTEVDVEVEX0VWRU5ULFxyXG4gICAgICAgICAgICB0aGlzLm9uUWlnU2VsZWN0aW9uKTtcclxuICAgICAgICBtZXNzYWdlU3RvcmUuaW5zdGFuY2UucmVtb3ZlTGlzdGVuZXIobWVzc2FnZVN0b3JlLk1lc3NhZ2VTdG9yZS5NRVNTQUdFX0NMT1NFX0VWRU5ULCB0aGlzLm9uQ2xvc2VNZXNzYWdlUG9wdXApO1xyXG4gICAgICAgIG1lc3NhZ2VTdG9yZS5pbnN0YW5jZS5yZW1vdmVMaXN0ZW5lcihtZXNzYWdlU3RvcmUuTWVzc2FnZVN0b3JlLk1FU1NBR0VfTkFWSUdBVElPTl9FVkVOVCwgdGhpcy5vbk1lc3NhZ2VOYXZpZ2F0aW9uKTtcclxuICAgICAgICBzdGFtcFN0b3JlLmluc3RhbmNlLnJlbW92ZUxpc3RlbmVyXHJcbiAgICAgICAgICAgIChzdGFtcFN0b3JlLlN0YW1wU3RvcmUuU1RBTVBTX0xPQURFRF9FVkVOVCwgcmVzcG9uc2VTZWFyY2hIZWxwZXIubG9hZEZhdm9yaXRlU3RhbXBGb3JTZWxlY3RlZFFpZyk7XHJcbiAgICAgICAgY2NTdG9yZS5pbnN0YW5jZS5yZW1vdmVMaXN0ZW5lcihjY1N0b3JlLkNvbmZpZ3VyYWJsZUNoYXJhY3RlcmlzdGljc1N0b3JlLkVYQU1fQk9EWV9DQ19HRVQsXHJcbiAgICAgICAgICAgIHRoaXMub25FeGFtQm9keUNDTG9hZGVkKTtcclxuXHJcbiAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyc0ZvclRlYW1NYW5hZ2VtZW50KCk7XHJcbiAgICAgICAgcmVzcG9uc2VTdG9yZS5pbnN0YW5jZS5yZW1vdmVMaXN0ZW5lcihyZXNwb25zZVN0b3JlLlJlc3BvbnNlU3RvcmUuQVRZUElDQUxfU0VBUkNIX1JFU1VMVF9FVkVOVCxcclxuICAgICAgICAgICAgdGhpcy5hdHlwaWNhbFNlYXJjaENsaWNrKTtcclxuICAgICAgICB3b3JrbGlzdFN0b3JlLmluc3RhbmNlLnJlbW92ZUxpc3RlbmVyKHdvcmtsaXN0U3RvcmUuV29ya0xpc3RTdG9yZS5NQVJLSU5HX0NIRUNLX0VYQU1JTkVSX1NFTEVDVElPTl9VUERBVEVELFxyXG4gICAgICAgICAgICB0aGlzLmdldE1hcmtpbmdDaGVja1dvcmtsaXN0Rm9yU2VsZWN0ZWRFeGFtaW5lcik7XHJcbiAgICAgICAgd29ya2xpc3RTdG9yZS5pbnN0YW5jZS5yZW1vdmVMaXN0ZW5lcih3b3JrbGlzdFN0b3JlLldvcmtMaXN0U3RvcmUuTUFSS19DSEVDS19FWEFNSU5FUlNfREFUQV9SRVRSSVZFRCxcclxuICAgICAgICAgICAgdGhpcy5tYXJrQ2hlY2tFeGFtaW5lcnNEYXRhUmV0cml2ZWQpO1xyXG4gICAgICAgIHRhcmdldFN1bW1hcnlTdG9yZS5pbnN0YW5jZS5yZW1vdmVMaXN0ZW5lclxyXG4gICAgICAgICAgICAodGFyZ2V0U3VtbWFyeVN0b3JlLlRhcmdldFN1bW1hcnlTdG9yZS5XT1JLTElTVF9JTklUSUFMSVNBVElPTl9DT01QTEVURUQsXHJcbiAgICAgICAgICAgIHRoaXMud29ya2xpc3RJbml0aWFsaXNhdGlvbkNvbXBsZXRlZCk7XHJcbiAgICAgICAgd2FybmluZ01lc3NhZ2VTdG9yZS5pbnN0YW5jZS5yZW1vdmVMaXN0ZW5lcihcclxuICAgICAgICAgICAgd2FybmluZ01lc3NhZ2VTdG9yZS5XYXJuaW5nTWVzc2FnZVN0b3JlLldBUk5JTkdfTUVTU0FHRV9OQVZJR0FUSU9OX0VWRU5ULFxyXG4gICAgICAgICAgICB3YXJuaW5nTWVzc2FnZU5hdmlnYXRpb25IZWxwZXIuaGFuZGxlV2FybmluZ01lc3NhZ2VOYXZpZ2F0aW9uKTtcclxuICAgICAgICB3b3JrbGlzdFN0b3JlLmluc3RhbmNlLnJlbW92ZUxpc3RlbmVyKHdvcmtsaXN0U3RvcmUuV29ya0xpc3RTdG9yZS5TSU1VTEFUSU9OX1RBUkdFVF9DT01QTEVURURfRVZFTlQsXHJcbiAgICAgICAgICAgIHRoaXMub25TaW11bGF0aW9uVGFyZ2V0Q29tcGxldGlvbik7XHJcbiAgICAgICAgbWFya2luZ0luc3RydWN0aW9uU3RvcmUuaW5zdGFuY2UucmVtb3ZlTGlzdGVuZXIoXHJcbiAgICAgICAgICAgIG1hcmtpbmdJbnN0cnVjdGlvblN0b3JlLk1hcmtpbmdJbnN0cnVjdGlvblN0b3JlLk1BUktJTkdJTlNUUlVDVElPTlNfREFUQV9MT0FERURfRVZFTlQsXHJcbiAgICAgICAgICAgIHRoaXMub25NYXJraW5nSW5zdHJ1Y3Rpb25zTG9hZGVkKTtcclxuICAgICAgICBtYXJraW5nSW5zdHJ1Y3Rpb25TdG9yZS5pbnN0YW5jZS5yZW1vdmVMaXN0ZW5lcihtYXJraW5nSW5zdHJ1Y3Rpb25TdG9yZS5NYXJraW5nSW5zdHJ1Y3Rpb25TdG9yZS5cclxuICAgICAgICAgICAgTUFSS0lOR0lOU1RSVUNUSU9OX1BBTkVMX0NMT1NFRF9FVkVOVCxcclxuICAgICAgICAgICAgdGhpcy5vbk1hcmtpbmdJbnN0cnVjaW9uUGFubGVDbG9zZWQpO1xyXG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2JvdW5kSGFuZGxlT25DbGljayk7XHJcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5fYm91bmRIYW5kbGVPbkNsaWNrKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIGNvbXBvbmVudCB3aWxsIHJlY2VpdmUgcHJvcHNcclxuICAgICAqL1xyXG4gICAgcHVibGljIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzOiBQcm9wcykge1xyXG4gICAgICAgIGlmICh0aGlzLnByb3BzICE9PSBuZXh0UHJvcHMpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICByZW5kZXJlZE9uOiBuZXh0UHJvcHMucmVuZGVyZWRPblxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQcmVwYXJlIHdvcmsgbGlzdCBhZnRlciBpbml0aWFsaXNpbmcgd29ya2xpc3QgZGF0YVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHdvcmtsaXN0SW5pdGlhbGlzYXRpb25Db21wbGV0ZWQgPSAoKTogdm9pZCA9PiB7XHJcbiAgICAgICAgLy8gbG9hZCBzdGFtcHMgZGVmaW5lZCBmb3IgdGhlIHNlbGVjdGVkIG1hcmsgc2NoZW1lIGdyb3VwSWRcclxuICAgICAgICBzdGFtcEFjdGlvbkNyZWF0b3IuZ2V0U3RhbXBEYXRhKHFpZ1N0b3JlLmluc3RhbmNlLnNlbGVjdGVkUUlHRm9yTWFya2VyT3BlcmF0aW9uLm1hcmtTY2hlbWVHcm91cElkLFxyXG4gICAgICAgICAgICBzdGFtcFN0b3JlLmluc3RhbmNlLnN0YW1wSWRzRm9yU2VsZWN0ZWRRSUcsXHJcbiAgICAgICAgICAgIHFpZ1N0b3JlLmluc3RhbmNlLnNlbGVjdGVkUUlHRm9yTWFya2VyT3BlcmF0aW9uLm1hcmtpbmdNZXRob2QsXHJcbiAgICAgICAgICAgIHJlc3BvbnNlSGVscGVyLmlzRWJvb2tNYXJraW5nLFxyXG4gICAgICAgICAgICB0cnVlKTtcclxuICAgICAgICBpZiAod29ya2xpc3RTdG9yZS5pbnN0YW5jZS5pc01hcmtpbmdDaGVja01vZGUpIHtcclxuICAgICAgICAgICAgdGhpcy53b3JrbGlzdEluaXRpYWxpc2F0aW9uQ29tcGxldGVkRm9yTWFya2luZ0NoZWNrKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgd29ya0xpc3REYXRhSGVscGVyLmZldGNoUmVsYXRlZERhdGFGb3JRSUdBZnRlck1hcmtTY2hlbWVTdHJ1Y3R1cmVBbmRDQyhcclxuICAgICAgICAgICAgICAgIG1hcmtlck9wZXJhdGlvbk1vZGVGYWN0b3J5Lm9wZXJhdGlvbk1vZGUuaXNUZWFtTWFuYWdlbWVudE1vZGUpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIYW5kbGVzIHRoZSBhY3Rpb24gd2hlbiBtYWtpbmcgY2hlY2sgd29ya2xpc3QgaXMgZmlyc3QgbG9hZGVkIG9uICdoZXJlJyBsaW5rIGNsaWNrXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgbWFya0NoZWNrRXhhbWluZXJzRGF0YVJldHJpdmVkID0gKCk6IHZvaWQgPT4ge1xyXG4gICAgICAgIGlmICghd29ya2xpc3RTdG9yZS5pbnN0YW5jZS5tYXJraW5nQ2hlY2tFeGFtaW5lcnNMaXN0IHx8XHJcbiAgICAgICAgICAgIHdvcmtsaXN0U3RvcmUuaW5zdGFuY2UubWFya2luZ0NoZWNrRXhhbWluZXJzTGlzdC5jb3VudCgpID09PSAwKSB7XHJcbiAgICAgICAgICAgIG5hdmlnYXRpb25IZWxwZXIuaGFuZGxlTmF2aWdhdGlvbihlbnVtcy5TYXZlQW5kTmF2aWdhdGUudG9Xb3JrbGlzdCk7XHJcbiAgICAgICAgfSBlbHNlIGlmICghcmVzcG9uc2VTdG9yZS5pbnN0YW5jZS5pc1NlYXJjaFJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaXNSZWZyZXNoaW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgcmVzcG9uc2VTZWFyY2hIZWxwZXIub3BlblFJR0RldGFpbHMoXHJcbiAgICAgICAgICAgICAgICBxaWdTdG9yZS5pbnN0YW5jZS5zZWxlY3RlZFFJR0Zvck1hcmtlck9wZXJhdGlvbi5xdWVzdGlvblBhcGVyUGFydElkLFxyXG4gICAgICAgICAgICAgICAgcWlnU3RvcmUuaW5zdGFuY2Uuc2VsZWN0ZWRRSUdGb3JNYXJrZXJPcGVyYXRpb24ubWFya1NjaGVtZUdyb3VwSWQsXHJcbiAgICAgICAgICAgICAgICB3b3JrbGlzdFN0b3JlLmluc3RhbmNlLnNlbGVjdGVkTWFya2luZ0NoZWNrRXhhbWluZXIuZXhhbWluZXJSb2xlSUQsXHJcbiAgICAgICAgICAgICAgICBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGV4YW1pbmVyc3RvcmUuaW5zdGFuY2UuZXhhbWluZXJBcHByb3ZhbFN0YXR1cyhxaWdTdG9yZS5pbnN0YW5jZS5zZWxlY3RlZFFJR0Zvck1hcmtlck9wZXJhdGlvbi5leGFtaW5lclJvbGVJZCksXHJcbiAgICAgICAgICAgICAgICBxaWdTdG9yZS5pbnN0YW5jZS5zZWxlY3RlZFFJR0Zvck1hcmtlck9wZXJhdGlvbi5tYXJraW5nTWV0aG9kLFxyXG4gICAgICAgICAgICAgICAgZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBxaWdTdG9yZS5pbnN0YW5jZS5zZWxlY3RlZFFJR0Zvck1hcmtlck9wZXJhdGlvbi5pc0VsZWN0cm9uaWNTdGFuZGFyZGlzYXRpb25UZWFtTWVtYmVyKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgY29ycmVzcG9uZGluZyBtYXJraW5nIGNoZWNrIHJlcXVlc3RlciBhcyBzZWxlY3RlZCBpbiB3b3JrbGlzdCBzdG9yZVxyXG4gICAgICogY2FsbHMgZ2V0TWFya2luZ0NoZWNrV29ya2xpc3RGb3JTZWxlY3RlZEV4YW1pbmVyIGFmdGVyIHVwZGF0aW5nIHNlbGVjdGVkIGV4YW1pbmVyXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgb25NYXJraW5nQ2hlY2tSZXF1ZXN0ZXJFeGFtaW5lckNsaWNrID0gKGV4YW1pbmVySWQ6IG51bWJlcik6IHZvaWQgPT4ge1xyXG4gICAgICAgIHdvcmtsaXN0QWN0aW9uQ3JlYXRvci5vbk1hcmtpbmdDaGVja1JlcXVlc3RlckV4YW1pbmVyU2VsZWN0ZWQoZXhhbWluZXJJZCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2VsZWN0cyB0aGUgY29ycmVzcG9uZGluZyB3b3JrbGlzdCBmb3Igc2VsZWN0ZWQgbWFya2luZyBjaGVjayByZXF1ZXN0ZXIgZXhhbWluZXJcclxuICAgICAqIHdoZW4gc2VsZWN0ZWQgZXhhbWluZXIgaW4gdGhlIHN0b3JlIGlzIHVwZGF0ZWRcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBnZXRNYXJraW5nQ2hlY2tXb3JrbGlzdEZvclNlbGVjdGVkRXhhbWluZXIgPSAoKTogdm9pZCA9PiB7XHJcblxyXG4gICAgICAgIHRoaXMubWFya0NoZWNrRXhhbWluZXJzRGF0YVJldHJpdmVkKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUHJlcGFyZSB3b3JrIGxpc3QgYWZ0ZXIgaW5pdGlhbGlzaW5nIHdvcmtsaXN0IGRhdGFcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSB3b3JrbGlzdEluaXRpYWxpc2F0aW9uQ29tcGxldGVkRm9yTWFya2luZ0NoZWNrID0gKCk6IHZvaWQgPT4ge1xyXG5cclxuICAgICAgICBsZXQgc2VsZWN0ZWRUYWI6IGVudW1zLlJlc3BvbnNlTW9kZSA9IChcclxuICAgICAgICAgICAgd29ya2xpc3RTdG9yZS5pbnN0YW5jZS5zZWxlY3RlZE1hcmtpbmdDaGVja0V4YW1pbmVyLnNlbGVjdGVkVGFiICE9PSBudWxsICYmXHJcbiAgICAgICAgICAgIHdvcmtsaXN0U3RvcmUuaW5zdGFuY2Uuc2VsZWN0ZWRNYXJraW5nQ2hlY2tFeGFtaW5lci5zZWxlY3RlZFRhYiAhPT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgICAgIHdvcmtsaXN0U3RvcmUuaW5zdGFuY2Uuc2VsZWN0ZWRNYXJraW5nQ2hlY2tFeGFtaW5lci5zZWxlY3RlZFRhYiAhPT0gZW51bXMuUmVzcG9uc2VNb2RlLm5vbmUpID9cclxuICAgICAgICAgICAgd29ya2xpc3RTdG9yZS5pbnN0YW5jZS5zZWxlY3RlZE1hcmtpbmdDaGVja0V4YW1pbmVyLnNlbGVjdGVkVGFiIDpcclxuICAgICAgICAgICAgdGFyZ2V0U3VtbWFyeVN0b3JlLmluc3RhbmNlLmN1cnJlbnRSZXNwb25zZU1vZGVGb3JNYXJraW5nQ2hlY2s7XHJcblxyXG4gICAgICAgIHdvcmtsaXN0QWN0aW9uQ3JlYXRvci5ub3RpZnlXb3JrbGlzdFR5cGVDaGFuZ2UoXHJcbiAgICAgICAgICAgIHFpZ1N0b3JlLmluc3RhbmNlLnNlbGVjdGVkUUlHRm9yTWFya2VyT3BlcmF0aW9uLm1hcmtTY2hlbWVHcm91cElkLFxyXG4gICAgICAgICAgICB3b3JrbGlzdFN0b3JlLmluc3RhbmNlLnNlbGVjdGVkTWFya2luZ0NoZWNrRXhhbWluZXIuZXhhbWluZXJSb2xlSUQsXHJcbiAgICAgICAgICAgIHFpZ1N0b3JlLmluc3RhbmNlLnNlbGVjdGVkUUlHRm9yTWFya2VyT3BlcmF0aW9uLnF1ZXN0aW9uUGFwZXJQYXJ0SWQsXHJcbiAgICAgICAgICAgIGVudW1zLldvcmtsaXN0VHlwZS5saXZlLFxyXG4gICAgICAgICAgICBzZWxlY3RlZFRhYixcclxuICAgICAgICAgICAgZW51bXMuUmVtYXJrUmVxdWVzdFR5cGUuVW5rbm93bixcclxuICAgICAgICAgICAgd29ya2xpc3RTdG9yZS5pbnN0YW5jZS5pc0RpcmVjdGVkUmVtYXJrLFxyXG4gICAgICAgICAgICBxaWdTdG9yZS5pbnN0YW5jZS5zZWxlY3RlZFFJR0Zvck1hcmtlck9wZXJhdGlvbi5pc0VsZWN0cm9uaWNTdGFuZGFyZGlzYXRpb25UZWFtTWVtYmVyLFxyXG4gICAgICAgICAgICBmYWxzZSxcclxuICAgICAgICAgICAgd29ya2xpc3RTdG9yZS5pbnN0YW5jZS5pc01hcmtpbmdDaGVja01vZGUpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIE1ldGhvZCB0byBiZSBpbnZva2VkIHdoZW4gYSBFeGFtQm9keSBDQyBpcyBsb2FkZWQuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgb25FeGFtQm9keUNDTG9hZGVkID0gKCk6IHZvaWQgPT4ge1xyXG4gICAgICAgIHRoaXMuaXNFeGFtQm9keUNDTG9hZGVkID0gdHJ1ZTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDYWxsZWQgYWZ0ZXIgc2F2aW5nIHRoZSB1c2VyIG9wdGlvbnNcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBvblVzZXJPcHRpb25zTG9hZGVkID0gKCk6IHZvaWQgPT4ge1xyXG4gICAgICAgIGxldCBpc01hcmtlckluZm9QYW5lbEV4cGFuZGVkOiBib29sZWFuO1xyXG4gICAgICAgIGlzTWFya2VySW5mb1BhbmVsRXhwYW5kZWQgPSB1c2VyT3B0aW9uc0hlbHBlci5nZXRVc2VyT3B0aW9uQnlOYW1lXHJcbiAgICAgICAgICAgICh1c2Vyb3B0aW9uS2V5cy5NQVJLRVJfSU5GT19QQU5FTF9FWFBBTkRFRCkgPT09ICdmYWxzZScgPyBmYWxzZSA6IHRydWU7XHJcbiAgICAgICAgaWYgKHdvcmtsaXN0U3RvcmUuaW5zdGFuY2UuaXNNYXJraW5nQ2hlY2tNb2RlKSB7XHJcbiAgICAgICAgICAgIHRoaXMubWFya0NoZWNrRXhhbWluZXJzRGF0YVJldHJpdmVkKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc2ltdWxhdGlvbk1vZGVIZWxwZXIuY2hlY2tTdGFuZGFyZGlzYXRpb25TZXR1cENvbXBsZXRpb24oZW51bXMuUGFnZUNvbnRhaW5lcnMuV29ya0xpc3QsIGVudW1zLlBhZ2VDb250YWluZXJzLldvcmtMaXN0KTtcclxuXHJcbiAgICAgICAgICAgIGxldCBpc011bHRpUWlnOiBib29sZWFuID0gbWFya2VyT3BlcmF0aW9uTW9kZUZhY3Rvcnkub3BlcmF0aW9uTW9kZS5pc1RlYW1NYW5hZ2VtZW50TW9kZSA/XHJcbiAgICAgICAgICAgICAgICB0ZWFtTWFuYWdlbWVudFN0b3JlLmluc3RhbmNlLm11bHRpUWlnU2VsZWN0ZWREZXRhaWwgJiZcclxuICAgICAgICAgICAgICAgICAgICB0ZWFtTWFuYWdlbWVudFN0b3JlLmluc3RhbmNlLm11bHRpUWlnU2VsZWN0ZWREZXRhaWwucWlnSWQgPyB0cnVlIDogZmFsc2UgOiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHFpZ0FjdGlvbkNyZWF0b3IuZ2V0UUlHU2VsZWN0b3JEYXRhKG1hcmtlck9wZXJhdGlvbk1vZGVGYWN0b3J5Lm9wZXJhdGlvbk1vZGUuZ2V0UWlnSWQsIGZhbHNlLCBmYWxzZSwgZmFsc2UsIGZhbHNlLCB0cnVlLFxyXG4gICAgICAgICAgICAgICAgaXNNdWx0aVFpZyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBlbmFibGVOYXZpZ2F0aW9uUGFuZWxWaXNpYmlsaXR5OiBpc01hcmtlckluZm9QYW5lbEV4cGFuZGVkIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIHJlZnJlc2ggdGFyZ2V0IHByb2dyZXNzIGZvciBFeGFtaW5lclxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHJlZnJlc2hUYXJnZXRQcm9ncmVzcyA9ICgpOiB2b2lkID0+IHtcclxuICAgICAgICB0aGlzLndvcmtsaXN0VGFiRGV0YWlscyA9IFtdO1xyXG5cclxuICAgICAgICAvKiogR2V0dGluZyAgbWFya2luZ1RhcmdldHNTdW1tYXJ5IGZyb20gd29ya2xpc3Qgc3RvcmUsXHJcbiAgICAgICAgICogaXQgd2lsbCBiZSB1cGRhdGVkIGlmIHRoZSB3b3JrbGlzdCByZXNwb25zZSBjb2xsZWN0aW9uIGNoYW5nZXNcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLm1hcmtpbmdUYXJnZXRzU3VtbWFyeSA9IHRhcmdldEhlbHBlci5nZXRFeGFtaW5lck1hcmtpbmdUYXJnZXRQcm9ncmVzcztcclxuXHJcbiAgICAgICAgbGV0IGN1cnJlbnRUYXJnZXQ6IGFueSA9IHRhcmdldFN1bW1hcnlTdG9yZS5pbnN0YW5jZS5nZXRDdXJyZW50VGFyZ2V0KCk7XHJcblxyXG4gICAgICAgIC8vIElmIHRoZSBjdXJyZW50IHRhcmdldCBpcyBzaW11bGF0aW9uIGZvciB0aGUgbWFya2VyICB0aGVuIGNsZWFyIHRoZSBzaW11bGF0aW9uIGV4aXRlZCBxaWdzIGNhY2hlXHJcbiAgICAgICAgLy8gU2luY2UsIG9uIGVhY2ggaG9tZSBjbGljayB3aGlsZSBpbiBzaW11bGF0aW9uIHRoZSBzaW11bGF0aW9uIHRhcmdldCBjb21wbGV0ZWQgcWlnIGxpc3QgbmVlZHMgdG8gYmUgc2hvd24sXHJcbiAgICAgICAgLy8gd2hlbmV2ZXIgdGhlIGN1cnJlbnQgdGFyZ2V0IGlzIHNpbXVsYXRpb24gdGhlIGNhY2hlIGlzIGNsZWFyZWQuXHJcbiAgICAgICAgaWYgKGN1cnJlbnRUYXJnZXQubWFya2luZ01vZGVJRCA9PT0gZW51bXMuTWFya2luZ01vZGUuU2ltdWxhdGlvbikge1xyXG4gICAgICAgICAgICB0aGlzLnN0b3JhZ2VBZGFwdGVySGVscGVyLmNsZWFyQ2FjaGVCeUtleSgnc2ltdWxhdGlvbmV4aXRlZHFpZ3MnLCAncWlnZGF0YScpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy53b3JrbGlzdFRhYkRldGFpbHMgPSB3b3JrbGlzdENvbXBvbmVudEhlbHBlci5nZXRXb3JrbGlzdFRhYkRldGFpbHNcclxuICAgICAgICAgICAgKHdvcmtsaXN0U3RvcmUuaW5zdGFuY2UuZ2V0TWFya2luZ01vZGVCeVdvcmtMaXN0VHlwZSh3b3JrbGlzdFN0b3JlLmluc3RhbmNlLmN1cnJlbnRXb3JrbGlzdFR5cGUpLCB0cnVlKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuaXNDb250ZW50UmVmcmVzaFN0YXJ0ZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5pc0NvbnRlbnRSZWZyZXNoU3VjY2VlZGVkLmlzTWFya2luZ1Byb2dyZXNzQ29tcGxldGVkID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jaGVja0lmQ29udGVudFJlZnJlc2hDb21wbGV0ZWQoKTtcclxuXHJcbiAgICAgICAgLy8gQ2hlY2tzIHdoZXRoZXIgdGhlIGN1cnJlbnQgd29ya2xpc3QgdHlwZSBpcyBkaXNhYmxlZC5cclxuICAgICAgICBsZXQgaXNUYXJnZXREaXNhYmxlZDogYm9vbGVhbiA9IHRoaXMuaXNTZWxlY3RlZFdvcmtsaXN0VHlwZURpc2FibGVkKCk7XHJcbiAgICAgICAgaWYgKGlzVGFyZ2V0RGlzYWJsZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5ub3RpZnlXb3JrbGlzdFR5cGVDaGFuZ2UoXHJcbiAgICAgICAgICAgICAgICBhbGxvY2F0ZVJlc3BvbnNlSGVscGVyLmdldFdvcmtMaXN0VHlwZUJ5TWFya2luZ01vZGUodGFyZ2V0SGVscGVyLmdldFNlbGVjdGVkUWlnTWFya2luZ01vZGUoKSksIGVudW1zLlJlc3BvbnNlTW9kZS5vcGVuKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IF93b3JrbGlzdFR5cGU6IGVudW1zLldvcmtsaXN0VHlwZSA9IHdvcmtsaXN0U3RvcmUuaW5zdGFuY2UuY3VycmVudFdvcmtsaXN0VHlwZSAmJiAhaXNUYXJnZXREaXNhYmxlZCA/XHJcbiAgICAgICAgICAgIHdvcmtsaXN0U3RvcmUuaW5zdGFuY2UuY3VycmVudFdvcmtsaXN0VHlwZSA6XHJcbiAgICAgICAgICAgIGFsbG9jYXRlUmVzcG9uc2VIZWxwZXIuZ2V0V29ya0xpc3RUeXBlQnlNYXJraW5nTW9kZSh0YXJnZXRIZWxwZXIuZ2V0U2VsZWN0ZWRRaWdNYXJraW5nTW9kZSgpKTtcclxuICAgICAgICBsZXQgaXNXb3JrbGlzdFR5cGVDaGFuZ2VkOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICAgICAgbGV0IHJlbWFya1JlcXVlc3RUeXBlOiBlbnVtcy5SZW1hcmtSZXF1ZXN0VHlwZSA9IHdvcmtsaXN0Q29tcG9uZW50SGVscGVyLmdldFJlbWFya1JlcXVlc3RUeXBlKF93b3JrbGlzdFR5cGUpO1xyXG5cclxuICAgICAgICAvLyBXaGlsZSBzdWJtaXRpbmcgcHJhY3RpY2UgcmVzcG9uc2UgYWxsb2NhdGUgbmV4dCB0YXJnZXQgYXV0b21hdGljYWxseS5cclxuICAgICAgICBpZiAodGhpcy5pc1N1Ym1pdENvbXBsZXRlZCAmJiBhbGxvY2F0ZVJlc3BvbnNlSGVscGVyLmlzQWxsb2NhdGlvbk5lZWRlZCgpKSB7XHJcbiAgICAgICAgICAgIC8qIEFsbG9jYXRlIHRoZSBwcmFjdGlzZS9zdGFuZGFyZGlzYXRpb24gcmVzcG9uc2VzICovXHJcbiAgICAgICAgICAgIGFsbG9jYXRlUmVzcG9uc2VIZWxwZXIuYWxsb2NhdGVRdWFsaWZpY2F0aW9uUmVzcG9uc2VzKCk7XHJcbiAgICAgICAgICAgIF93b3JrbGlzdFR5cGUgPSBhbGxvY2F0ZVJlc3BvbnNlSGVscGVyLmdldFdvcmtMaXN0VHlwZUJ5TWFya2luZ01vZGUoXHJcbiAgICAgICAgICAgICAgICB0YXJnZXRIZWxwZXIuZ2V0U2VsZWN0ZWRRaWdNYXJraW5nTW9kZSgpKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaXNTdWJtaXRDb21wbGV0ZWQgfHwgdGhpcy5pc0FsbG9jYXRpb25Db21wbGV0ZWQgfHwgdGhpcy5pc1NlY29uZFN0YW5kYXJkaXNhdGlvblRhcmdldFJlY2VpdmVkKSB7XHJcbiAgICAgICAgICAgIC8qKiBDYWxsIHRvIGdldCByZXNwb25zZSBkZXRhaWxzIHRvIHNob3cgaW4gd29ya2xpc3QgKi9cclxuICAgICAgICAgICAgX3dvcmtsaXN0VHlwZSA9IGFsbG9jYXRlUmVzcG9uc2VIZWxwZXIuZ2V0V29ya0xpc3RUeXBlQnlNYXJraW5nTW9kZShcclxuICAgICAgICAgICAgICAgIHRhcmdldEhlbHBlci5nZXRTZWxlY3RlZFFpZ01hcmtpbmdNb2RlKCkpO1xyXG4gICAgICAgICAgICBpc1dvcmtsaXN0VHlwZUNoYW5nZWQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHJlc3BvbnNlTW9kZTogZW51bXMuUmVzcG9uc2VNb2RlID0gdGFyZ2V0U3VtbWFyeVN0b3JlLmluc3RhbmNlLmdldEN1cnJlbnRSZXNwb25zZU1vZGVcclxuICAgICAgICAgICAgKHRhcmdldEhlbHBlci5nZXRNYXJraW5nTW9kZUJ5V29ya2xpc3RUeXBlKF93b3JrbGlzdFR5cGUpLCBfd29ya2xpc3RUeXBlLCBjdXJyZW50VGFyZ2V0Lm1hcmtpbmdNb2RlSUQpO1xyXG5cclxuICAgICAgICB0aGlzLmlzU2VsZWN0ZWRNZW51VGFyZ2V0Q29tcGxldGVkID0gdGFyZ2V0SGVscGVyLmlzU2VsZWN0ZWRNZW51Q29tcGxldGVkKFxyXG4gICAgICAgICAgICAod29ya2xpc3RTdG9yZS5pbnN0YW5jZS5nZXRNYXJraW5nTW9kZUJ5V29ya0xpc3RUeXBlKFxyXG4gICAgICAgICAgICAgICAgd29ya2xpc3RTdG9yZS5pbnN0YW5jZS5jdXJyZW50V29ya2xpc3RUeXBlKSkpO1xyXG4gICAgICAgIC8vIFJlc2V0IHJlc3BvbnNlTW9kZSBvbmx5IGlmIGN1cnJlbnQgcmVzcG9uc2Vtb2RlIGlzIG5vdCBub25lIGFuZCBzdWJtaXR0ZWQgcmVzcG9uc2UgaXMgbm90IGluIFF1YWxpdHlGZWVkYmFja091dHN0YW5kaW5nXHJcbiAgICAgICAgaWYgKHJlc3BvbnNlTW9kZSA9PT0gZW51bXMuUmVzcG9uc2VNb2RlLm5vbmUgfHwgcWlnU3RvcmUuaW5zdGFuY2Uuc2VsZWN0ZWRRSUdGb3JNYXJrZXJPcGVyYXRpb24uaGFzUXVhbGl0eUZlZWRiYWNrT3V0c3RhbmRpbmcpIHtcclxuICAgICAgICAgICAgdGhpcy5yZXNwb25zZU1vZGUgPSB0aGlzLnJlc3BvbnNlTW9kZSA9PT0gdW5kZWZpbmVkID8gZW51bXMuUmVzcG9uc2VNb2RlLm9wZW4gOiB0aGlzLnJlc3BvbnNlTW9kZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnJlc3BvbnNlTW9kZSA9IHJlc3BvbnNlTW9kZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLypcclxuICAgICAgICAgKiBTZXRzIHRoZSByZXNwb25zZSBtb2RlIGJhc2VkIG9uIHF1YWxpdHkgZmVlZGJhY2suXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIHRoaXMucmVzcG9uc2VNb2RlID0gbWFya2VyT3BlcmF0aW9uTW9kZUZhY3Rvcnkub3BlcmF0aW9uTW9kZS5yZXNwb25zZU1vZGVCYXNlZE9uUXVhbGl0eUZlZWRiYWNrRm9yV29ya2xpc3QodGhpcy5yZXNwb25zZU1vZGUsXHJcbiAgICAgICAgICAgIHRhcmdldEhlbHBlci5nZXRNYXJraW5nTW9kZUJ5V29ya2xpc3RUeXBlKF93b3JrbGlzdFR5cGUpLFxyXG4gICAgICAgICAgICByZW1hcmtSZXF1ZXN0VHlwZSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnByb3BzLmlzRnJvbU1lbnUpIHtcclxuXHJcbiAgICAgICAgICAgIGlmICgoX3dvcmtsaXN0VHlwZSA9PT0gZW51bXMuV29ya2xpc3RUeXBlLnByYWN0aWNlIHx8IF93b3JrbGlzdFR5cGUgPT09IGVudW1zLldvcmtsaXN0VHlwZS5zdGFuZGFyZGlzYXRpb24gfHxcclxuICAgICAgICAgICAgICAgIF93b3JrbGlzdFR5cGUgPT09IGVudW1zLldvcmtsaXN0VHlwZS5zZWNvbmRzdGFuZGFyZGlzYXRpb24pICYmXHJcbiAgICAgICAgICAgICAgICB0aGlzLmlzU2VsZWN0ZWRNZW51VGFyZ2V0Q29tcGxldGVkKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0SGVscGVyLmdldEV4YW1pbmVyUWlnU3RhdHVzKCkgPT09IGVudW1zLkV4YW1pbmVyUUlHU3RhdHVzLkxpdmVNYXJraW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXNXb3JrbGlzdFR5cGVDaGFuZ2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc3BvbnNlTW9kZSA9IGVudW1zLlJlc3BvbnNlTW9kZS5jbG9zZWQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKF93b3JrbGlzdFR5cGUgPT09IGVudW1zLldvcmtsaXN0VHlwZS5zaW11bGF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBzaW11bGF0aW9uTW9kZUhlbHBlci5jaGVja1N0YW5kYXJkaXNhdGlvblNldHVwQ29tcGxldGlvbihlbnVtcy5QYWdlQ29udGFpbmVycy5Xb3JrTGlzdCwgZW51bXMuUGFnZUNvbnRhaW5lcnMuV29ya0xpc3RcclxuICAgICAgICAgICAgICAgICAgICAsIHRydWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIGlzV29ya2xpc3RUeXBlQ2hhbmdlZCBpcyBzZXQgb24gc2NlbmFyaW9zIGFmdGVyIFN1Ym1pdCBhbmQgQWxsb2NhdGlvbiB3aGVuIFdvcmtsaXN0IG5lZWRzIHJlZnJlc2guXHJcbiAgICAgICAgICogd29ya2xpc3QgY2FsbCBOT1QgbmVlZGVkIGluIFFJRyBzZWxlY3Rpb24gd2hlcmUgaXNXb3JrbGlzdFR5cGVDaGFuZ2VkIHdpbGwgYmUgRmFsc2UuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgaWYgKGlzV29ya2xpc3RUeXBlQ2hhbmdlZCA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLm5vdGlmeVdvcmtsaXN0VHlwZUNoYW5nZShfd29ya2xpc3RUeXBlLCB0aGlzLnJlc3BvbnNlTW9kZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKiogcmVzZXR0aW5nIHRoZSBhbGxvY2F0aW9uLHN1Ym1pdCBjb21wbGV0ZWQgZmxhZyBhZnRlciBsb2FkaW5nIHRoZSB3b3JrbGlzdCAqL1xyXG4gICAgICAgIHRoaXMuaXNBbGxvY2F0aW9uQ29tcGxldGVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5pc1N1Ym1pdENvbXBsZXRlZCA9IGZhbHNlO1xyXG5cclxuICAgICAgICAvLyBJZiB0aGUgbWFya2VyIGlzIGluIGxpdmUgbWFya2luZyBhbmQgZG9lcyBub3QgaGF2ZSB0aGUgbGltaXQgc3BlY2lmaWVkLCBubyBuZWVkIHRvIHNldCB0aGUgd29ya2xpc3QuIEF2b2lkIGJ1c3kgaW5kaWNhdG9yLlxyXG4gICAgICAgIGlmIChfd29ya2xpc3RUeXBlID09PSB1bmRlZmluZWQgJiZcclxuICAgICAgICAgICAgY3VycmVudFRhcmdldC5tYXJraW5nTW9kZUlEID09PSBlbnVtcy5NYXJraW5nTW9kZS5MaXZlTWFya2luZyAmJlxyXG4gICAgICAgICAgICBjdXJyZW50VGFyZ2V0Lm1heGltdW1NYXJraW5nTGltaXQgPT09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5oYXNUYXJnZXRGb3VuZCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIHRhcmdldFJlbmRlcmVkT246IERhdGUubm93KCksXHJcbiAgICAgICAgICAgIHJlbmRlcmVkT246IERhdGUubm93KClcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiB0aGlzIHdpbGwgc2hvd3MgdGhlIGNvbmZpcm1hdGlvbiBwb3B1cCBvbiBsb2dvdXQgYmFzZWQgb24gdGhlIGFzayBvbiBsb2dvdXQgdmFsdWUuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgc2hvd0xvZ291dENvbmZpcm1hdGlvbiA9ICgpOiB2b2lkID0+IHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHsgaXNMb2dvdXRDb25maXJtYXRpb25Qb3B1cERpc3BsYXlpbmc6IHRydWUgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGFuZGxlcyB0aGUgYWN0aW9uIGV2ZW50IHdoaWxlIGF0eXBpY2FsIHNlYXJjaCBpcyB0cmlnZ2VyZWQuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgYXR5cGljYWxTZWFyY2hDbGljayA9IChyZXN1bHQ6IGF0eXBpY2FsUmVzcG9uc2VTZWFyY2hSZXN1bHQpOiB2b2lkID0+IHtcclxuICAgICAgICBsZXQgbWVzc2FnZUtleTogc3RyaW5nID0gJyc7XHJcbiAgICAgICAgbGV0IG1lc3NhZ2VIZWFkZXJLZXk6IHN0cmluZyA9ICcnO1xyXG4gICAgICAgIHRoaXMuYXR5cGljYWxQb3B1cENvbnRlbnQgPSBsb2NhbGVTdG9yZS5pbnN0YW5jZS5cclxuICAgICAgICAgICAgVHJhbnNsYXRlVGV4dCgnbWFya2luZy53b3JrbGlzdC5hdHlwaWNhbC1zZWFyY2gtZXJyb3ItZGlhbG9nLmF0eXBpY2FsLXNlYXJjaC1lcnJvci0nICsgcmVzdWx0LnNlYXJjaFJlc3VsdENvZGUpO1xyXG4gICAgICAgIGlmIChyZXN1bHQuc2VhcmNoUmVzdWx0Q29kZSA9PT0gZW51bXMuU2VhcmNoUmVzdWx0Q29kZS5BbGxvY2F0ZWRUb0Fub3RoZXJNYXJrZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5hdHlwaWNhbFBvcHVwQ29udGVudCA9IHN0cmluZ0hlbHBlci5mb3JtYXQobG9jYWxlU3RvcmUuaW5zdGFuY2UuXHJcbiAgICAgICAgICAgICAgICBUcmFuc2xhdGVUZXh0KCdtYXJraW5nLndvcmtsaXN0LmF0eXBpY2FsLXNlYXJjaC1lcnJvci1kaWFsb2cuYXR5cGljYWwtc2VhcmNoLWVycm9yLScgK1xyXG4gICAgICAgICAgICAgICAgICAgIGVudW1zLlNlYXJjaFJlc3VsdENvZGUuQWxsb2NhdGlvblBvc3NpYmxlKSxcclxuICAgICAgICAgICAgICAgIFtTdHJpbmcocmVzdWx0LmNlbnRyZU51bWJlciksXHJcbiAgICAgICAgICAgICAgICBTdHJpbmcocmVzdWx0LmNhbmRpZGF0ZU51bWJlciksXHJcbiAgICAgICAgICAgICAgICBTdHJpbmcocmVzdWx0LmNhbmRpZGF0ZU5hbWUpLnRvVXBwZXJDYXNlKCldKTtcclxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGlzQXR5cGljYWxTZWFyY2hSZXN1bHRQb3B1cERpc3BsYXlpbmc6IHRydWUgfSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChyZXN1bHQuc2VhcmNoUmVzdWx0Q29kZSA9PT0gZW51bXMuU2VhcmNoUmVzdWx0Q29kZS5BbGxvY2F0aW9uUG9zc2libGUpIHtcclxuICAgICAgICAgICAgdGhpcy5hdHlwaWNhbFBvcHVwQ29udGVudCA9IHN0cmluZ0hlbHBlci5mb3JtYXQobG9jYWxlU3RvcmUuaW5zdGFuY2UuXHJcbiAgICAgICAgICAgICAgICBUcmFuc2xhdGVUZXh0KCdtYXJraW5nLndvcmtsaXN0LmF0eXBpY2FsLXNlYXJjaC1lcnJvci1kaWFsb2cuYXR5cGljYWwtc2VhcmNoLWVycm9yLScgKyByZXN1bHQuc2VhcmNoUmVzdWx0Q29kZSksXHJcbiAgICAgICAgICAgICAgICBbU3RyaW5nKHJlc3VsdC5jZW50cmVOdW1iZXIpLFxyXG4gICAgICAgICAgICAgICAgU3RyaW5nKHJlc3VsdC5jYW5kaWRhdGVOdW1iZXIpLFxyXG4gICAgICAgICAgICAgICAgU3RyaW5nKHJlc3VsdC5jYW5kaWRhdGVOYW1lKS50b1VwcGVyQ2FzZSgpXSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBpc0F0eXBpY2FsU2VhcmNoUmVzdWx0UG9wdXBEaXNwbGF5aW5nOiB0cnVlIH0pO1xyXG4gICAgICAgIH0gZWxzZSBpZiAocmVzdWx0LnNlYXJjaFJlc3VsdENvZGUgPT09IGVudW1zLlNlYXJjaFJlc3VsdENvZGUuTWFya2VyTm90QXBwcm92ZWQgfHxcclxuICAgICAgICAgICAgcmVzdWx0LnNlYXJjaFJlc3VsdENvZGUgPT09IGVudW1zLlNlYXJjaFJlc3VsdENvZGUuTWFya2VyU3VzcGVuZGVkKSB7XHJcbiAgICAgICAgICAgIG1hcmtlckluZm9ybWF0aW9uQWN0aW9uQ3JlYXRvci5cclxuICAgICAgICAgICAgICAgIEdldE1hcmtlckluZm9ybWF0aW9uKHFpZ1N0b3JlLmluc3RhbmNlLnNlbGVjdGVkUUlHRm9yTWFya2VyT3BlcmF0aW9uLmV4YW1pbmVyUm9sZUlkLFxyXG4gICAgICAgICAgICAgICAgICAgIHFpZ1N0b3JlLmluc3RhbmNlLnNlbGVjdGVkUUlHRm9yTWFya2VyT3BlcmF0aW9uLm1hcmtTY2hlbWVHcm91cElkLFxyXG4gICAgICAgICAgICAgICAgICAgIHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgZXhhbWluZXJzdG9yZS5pbnN0YW5jZS5nZXRNYXJrZXJJbmZvcm1hdGlvbi5hcHByb3ZhbFN0YXR1cyk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgIGlzUmVzcG9uc2VBbGxvY2F0aW9uRXJyb3JEaWFsb2dEaXNwbGF5aW5nOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgcmVuZGVyZWRPbjogRGF0ZS5ub3coKSxcclxuICAgICAgICAgICAgICAgIGVycm9yRGlhbG9nSGVhZGVyVGV4dDogbG9jYWxlU3RvcmUuaW5zdGFuY2UuXHJcbiAgICAgICAgICAgICAgICAgICAgVHJhbnNsYXRlVGV4dCgnbWFya2luZy53b3JrbGlzdC5yZXNwb25zZS1hbGxvY2F0aW9uLWVycm9yLWRpYWxvZy5yZXNwb25zZS1hbGxvY2F0aW9uLWVycm9yLWhlYWRlcicpLFxyXG4gICAgICAgICAgICAgICAgZXJyb3JEaWFsb2dDb250ZW50VGV4dDpcclxuICAgICAgICAgICAgICAgICAgICBsb2NhbGVTdG9yZS5pbnN0YW5jZS5UcmFuc2xhdGVUZXh0KCdtYXJraW5nLndvcmtsaXN0LmFwcHJvdmFsLXN0YXR1cy1jaGFuZ2VkLWRpYWxvZy5ib2R5JyksXHJcbiAgICAgICAgICAgICAgICBpc0J1c3k6IGZhbHNlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSBpZiAocmVzdWx0LnNlYXJjaFJlc3VsdENvZGUgPT09IGVudW1zLlNlYXJjaFJlc3VsdENvZGUuTWFya2VyV2l0aGRyYXduKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RvcmFnZUFkYXB0ZXJIZWxwZXIuY2xlYXJDYWNoZUJ5S2V5KCdxaWdzZWxlY3RvcicsICdvdmVydmlld2RhdGEnKTtcclxuICAgICAgICAgICAgbWFya2VySW5mb3JtYXRpb25BY3Rpb25DcmVhdG9yLlxyXG4gICAgICAgICAgICAgICAgR2V0TWFya2VySW5mb3JtYXRpb24ocWlnU3RvcmUuaW5zdGFuY2Uuc2VsZWN0ZWRRSUdGb3JNYXJrZXJPcGVyYXRpb24uZXhhbWluZXJSb2xlSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgcWlnU3RvcmUuaW5zdGFuY2Uuc2VsZWN0ZWRRSUdGb3JNYXJrZXJPcGVyYXRpb24ubWFya1NjaGVtZUdyb3VwSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBleGFtaW5lcnN0b3JlLmluc3RhbmNlLmdldE1hcmtlckluZm9ybWF0aW9uLmFwcHJvdmFsU3RhdHVzKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgaXNBdHlwaWNhbFNlYXJjaEZhaWx1cmVQb3B1cERpc3BsYXlpbmc6IHRydWUgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkIG9uICdDYW5jZWwnIGNsaWNrIG9mIGF0eXBpY2FsIHJlc3BvbnNlIHNlYXJjaCBkaWFsb2cuXHJcbiAgICAgKiBUaGlzIHdpbGwgY2xvc2UgdGhlIHBvcHVwLlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGF0eXBpY2FsU2VhcmNoQ2FuY2VsQ2xpY2sgPSAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGlzQXR5cGljYWxTZWFyY2hSZXN1bHRQb3B1cERpc3BsYXlpbmc6IGZhbHNlIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkIG9uICdPaycgY2xpY2sgb2YgYXR5cGljYWwgcmVzcG9uc2Ugc2VhcmNoIGZhaWx1cmUgZGlhbG9nLlxyXG4gICAgICogVGhpcyB3aWxsIGNsb3NlIHRoZSBwb3B1cC5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBhdHlwaWNhbFNlYXJjaGZhaWx1cmVDbGljayA9ICgpID0+IHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHsgaXNBdHlwaWNhbFNlYXJjaEZhaWx1cmVQb3B1cERpc3BsYXlpbmc6IGZhbHNlIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkIG9uICdNb3ZlVG9Xb3JrbGlzdCcgY2xpY2sgb2YgYXR5cGljYWwgcmVzcG9uc2Ugc2VhcmNoIGRpYWxvZy5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBhdHlwaWNhbFNlYXJjaE1vdmVUb0NsaWNrID0gKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBpc0F0eXBpY2FsU2VhcmNoUmVzdWx0UG9wdXBEaXNwbGF5aW5nOiBmYWxzZSB9KTtcclxuICAgICAgICBpZiAocmVzcG9uc2VTdG9yZS5pbnN0YW5jZS5fYXR5cGljYWxTZWFyY2hSZXN1bHQuc2VhcmNoUmVzdWx0Q29kZSAhPT0gZW51bXMuU2VhcmNoUmVzdWx0Q29kZS5BbGxvY2F0ZWRUb0Fub3RoZXJNYXJrZXIpIHtcclxuICAgICAgICAgICAgbGV0IGlzQ2FuZGlkYXRlUHJpb3JpdGlzYXRpb25DQ09OID0gY29uZmlndXJhYmxlQ2hhcmFjdGVyaXN0aWNzSGVscGVyLmdldENoYXJhY3RlcmlzdGljVmFsdWUoXHJcbiAgICAgICAgICAgICAgICBjb25maWd1cmFibGVDaGFyYWN0ZXJpc3RpY3NOYW1lcy5DYW5kaWRhdGVQcmlvcml0aXNhdGlvbikudG9Mb3dlckNhc2UoKSA9PT0gJ3RydWUnID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgICAgICAgICByZXNwb25zZUFjdGlvbkNyZWF0b3IubW92ZUF0eXBpY2FsUmVzcG9uc2VUb1dvcmtsaXN0KFxyXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VTdG9yZS5pbnN0YW5jZS5fYXR5cGljYWxTZWFyY2hSZXN1bHQuZXhhbWluZXJSb2xlSWQsXHJcbiAgICAgICAgICAgICAgICByZXNwb25zZVN0b3JlLmluc3RhbmNlLl9hdHlwaWNhbFNlYXJjaFJlc3VsdC5tYXJrU2NoZW1lR3JvdXBJZCxcclxuICAgICAgICAgICAgICAgIGVudW1zLldvcmtsaXN0VHlwZS5hdHlwaWNhbCxcclxuICAgICAgICAgICAgICAgIGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgcWlnU3RvcmUuaW5zdGFuY2Uuc2VsZWN0ZWRRSUdGb3JNYXJrZXJPcGVyYXRpb24uZXhhbVNlc3Npb25JZCxcclxuICAgICAgICAgICAgICAgIHFpZ1N0b3JlLmluc3RhbmNlLnNlbGVjdGVkUUlHRm9yTWFya2VyT3BlcmF0aW9uLnJvbGUgPT09IGVudW1zLkV4YW1pbmVyUm9sZS5wcmluY2lwYWxFeGFtaW5lcixcclxuICAgICAgICAgICAgICAgIHFpZ1N0b3JlLmluc3RhbmNlLnNlbGVjdGVkUUlHRm9yTWFya2VyT3BlcmF0aW9uLmlzRWxlY3Ryb25pY1N0YW5kYXJkaXNhdGlvblRlYW1NZW1iZXIsXHJcbiAgICAgICAgICAgICAgICBleGFtaW5lcnN0b3JlLmluc3RhbmNlLmdldE1hcmtlckluZm9ybWF0aW9uLmV4YW1pbmVySWQsXHJcbiAgICAgICAgICAgICAgICBpc0NhbmRpZGF0ZVByaW9yaXRpc2F0aW9uQ0NPTixcclxuICAgICAgICAgICAgICAgIHdvcmtsaXN0U3RvcmUuaW5zdGFuY2UuZ2V0UmVtYXJrUmVxdWVzdFR5cGUsXHJcbiAgICAgICAgICAgICAgICB0cnVlLFxyXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VTdG9yZS5pbnN0YW5jZS5fYXR5cGljYWxTZWFyY2hSZXN1bHQuY2FuZGlkYXRlU2NyaXB0SWQpO1xyXG4gICAgICAgICAgICAvLyBJbnZva2luZyBvbkJ1c3kgbWV0aG9kXHJcbiAgICAgICAgICAgIGJ1c3lJbmRpY2F0b3JBY3Rpb25DcmVhdG9yLnNldEJ1c3lJbmRpY2F0b3JJbnZva2VyKGVudW1zLkJ1c3lJbmRpY2F0b3JJbnZva2VyLnJlc3BvbnNlQWxsb2NhdGlvbik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5hdHlwaWNhbFBvcHVwQ29udGVudCA9IGxvY2FsZVN0b3JlLmluc3RhbmNlLlxyXG4gICAgICAgICAgICAgICAgVHJhbnNsYXRlVGV4dCgnbWFya2luZy53b3JrbGlzdC5hdHlwaWNhbC1zZWFyY2gtZXJyb3ItZGlhbG9nLmF0eXBpY2FsLXNlYXJjaC1lcnJvci0nICtcclxuICAgICAgICAgICAgICAgICAgICBlbnVtcy5TZWFyY2hSZXN1bHRDb2RlLkFsbG9jYXRlZFRvQW5vdGhlck1hcmtlcik7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBpc0F0eXBpY2FsU2VhcmNoRmFpbHVyZVBvcHVwRGlzcGxheWluZzogdHJ1ZSB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkIG9uICdNYXJrTm93JyBjbGljayBvZiBhdHlwaWNhbCByZXNwb25zZSBzZWFyY2ggZGlhbG9nLlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGF0eXBpY2FsU2VhcmNoTWFya05vd0NsaWNrID0gKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBpc0F0eXBpY2FsU2VhcmNoUmVzdWx0UG9wdXBEaXNwbGF5aW5nOiBmYWxzZSB9KTtcclxuICAgICAgICBpZiAocmVzcG9uc2VTdG9yZS5pbnN0YW5jZS5fYXR5cGljYWxTZWFyY2hSZXN1bHQuc2VhcmNoUmVzdWx0Q29kZSAhPT0gZW51bXMuU2VhcmNoUmVzdWx0Q29kZS5BbGxvY2F0ZWRUb0Fub3RoZXJNYXJrZXIpIHtcclxuICAgICAgICAgICAgbGV0IGlzQ2FuZGlkYXRlUHJpb3JpdGlzYXRpb25DQ09OID0gY29uZmlndXJhYmxlQ2hhcmFjdGVyaXN0aWNzSGVscGVyLmdldENoYXJhY3RlcmlzdGljVmFsdWUoXHJcbiAgICAgICAgICAgICAgICBjb25maWd1cmFibGVDaGFyYWN0ZXJpc3RpY3NOYW1lcy5DYW5kaWRhdGVQcmlvcml0aXNhdGlvbikudG9Mb3dlckNhc2UoKSA9PT0gJ3RydWUnID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgICAgICAgICByZXNwb25zZUFjdGlvbkNyZWF0b3IubWFya05vd0F0eXBpY2FsUmVzcG9uc2UoXHJcbiAgICAgICAgICAgICAgICByZXNwb25zZVN0b3JlLmluc3RhbmNlLl9hdHlwaWNhbFNlYXJjaFJlc3VsdC5leGFtaW5lclJvbGVJZCxcclxuICAgICAgICAgICAgICAgIHJlc3BvbnNlU3RvcmUuaW5zdGFuY2UuX2F0eXBpY2FsU2VhcmNoUmVzdWx0Lm1hcmtTY2hlbWVHcm91cElkLFxyXG4gICAgICAgICAgICAgICAgZW51bXMuV29ya2xpc3RUeXBlLmF0eXBpY2FsLFxyXG4gICAgICAgICAgICAgICAgZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBxaWdTdG9yZS5pbnN0YW5jZS5zZWxlY3RlZFFJR0Zvck1hcmtlck9wZXJhdGlvbi5leGFtU2Vzc2lvbklkLFxyXG4gICAgICAgICAgICAgICAgcWlnU3RvcmUuaW5zdGFuY2Uuc2VsZWN0ZWRRSUdGb3JNYXJrZXJPcGVyYXRpb24ucm9sZSA9PT0gZW51bXMuRXhhbWluZXJSb2xlLnByaW5jaXBhbEV4YW1pbmVyLFxyXG4gICAgICAgICAgICAgICAgcWlnU3RvcmUuaW5zdGFuY2Uuc2VsZWN0ZWRRSUdGb3JNYXJrZXJPcGVyYXRpb24uaXNFbGVjdHJvbmljU3RhbmRhcmRpc2F0aW9uVGVhbU1lbWJlcixcclxuICAgICAgICAgICAgICAgIGV4YW1pbmVyc3RvcmUuaW5zdGFuY2UuZ2V0TWFya2VySW5mb3JtYXRpb24uZXhhbWluZXJJZCxcclxuICAgICAgICAgICAgICAgIGlzQ2FuZGlkYXRlUHJpb3JpdGlzYXRpb25DQ09OLFxyXG4gICAgICAgICAgICAgICAgd29ya2xpc3RTdG9yZS5pbnN0YW5jZS5nZXRSZW1hcmtSZXF1ZXN0VHlwZSxcclxuICAgICAgICAgICAgICAgIHRydWUsXHJcbiAgICAgICAgICAgICAgICByZXNwb25zZVN0b3JlLmluc3RhbmNlLl9hdHlwaWNhbFNlYXJjaFJlc3VsdC5jYW5kaWRhdGVTY3JpcHRJZCk7XHJcbiAgICAgICAgICAgIC8vIEludm9raW5nIG9uQnVzeSBtZXRob2RcclxuICAgICAgICAgICAgYnVzeUluZGljYXRvckFjdGlvbkNyZWF0b3Iuc2V0QnVzeUluZGljYXRvckludm9rZXIoZW51bXMuQnVzeUluZGljYXRvckludm9rZXIucmVzcG9uc2VBbGxvY2F0aW9uKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmF0eXBpY2FsUG9wdXBDb250ZW50ID0gbG9jYWxlU3RvcmUuaW5zdGFuY2UuXHJcbiAgICAgICAgICAgICAgICBUcmFuc2xhdGVUZXh0KCdtYXJraW5nLndvcmtsaXN0LmF0eXBpY2FsLXNlYXJjaC1lcnJvci1kaWFsb2cuYXR5cGljYWwtc2VhcmNoLWVycm9yLScgK1xyXG4gICAgICAgICAgICAgICAgICAgIGVudW1zLlNlYXJjaFJlc3VsdENvZGUuQWxsb2NhdGVkVG9Bbm90aGVyTWFya2VyKTtcclxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGlzQXR5cGljYWxTZWFyY2hGYWlsdXJlUG9wdXBEaXNwbGF5aW5nOiB0cnVlIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXNldGluZyB0aGUgY29uZmlybWF0aW9uIGRpYWxvZydzIHN0YXRlIHRvIG1ha2UgaXQgaW52aXNpYmxlLlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHJlc2V0TG9nb3V0Q29uZmlybWF0aW9uU2F0dXMoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGlzTG9nb3V0Q29uZmlybWF0aW9uUG9wdXBEaXNwbGF5aW5nOiBmYWxzZSB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFVwZGF0ZXMgdGhlIE1hcmtlciBpbmZvcm1hdGlvbiBwYW5lbC5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSB1cGRhdGVNYXJrZXJJbmZvcm1hdGlvblBhbmVsID0gKCk6IHZvaWQgPT4ge1xyXG4gICAgICAgIC8vIGlmIG1hcmtlciBpbmZvcm1hdGlvbiBpcyB1cGRhdGVkIHRocm91Z2ggYmFja2dyb3VuZCBwdWxzZVxyXG4gICAgICAgIHRoaXMubWFya2VySW5mb3JtYXRpb24gPSBleGFtaW5lcnN0b3JlLmluc3RhbmNlLmdldE1hcmtlckluZm9ybWF0aW9uO1xyXG4gICAgICAgIGlmICh0aGlzLmRvUmVuZGVyTWFya2VySW5mb3JtYXRpb25QYW5lbCgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyByZW5kZXJlZE9uOiBEYXRlLm5vdygpLCBpc0J1c3k6IGZhbHNlIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gVXBkYXRlIHRoZSBNYXJraW5nIENoZWNrIEFjY2VzcyBzdGF0dXNcclxuICAgICAgICBpZiAocWlnU3RvcmUuaW5zdGFuY2Uuc2VsZWN0ZWRRSUdGb3JNYXJrZXJPcGVyYXRpb24gJiZcclxuICAgICAgICAgICAgIW1hcmtlck9wZXJhdGlvbk1vZGVGYWN0b3J5Lm9wZXJhdGlvbk1vZGUuaXNUZWFtTWFuYWdlbWVudE1vZGUgJiZcclxuICAgICAgICAgICAgY29uZmlndXJhYmxlQ2hhcmFjdGVyaXN0aWNzSGVscGVyLmdldENoYXJhY3RlcmlzdGljVmFsdWUoY29uZmlndXJhYmxlQ2hhcmFjdGVyaXN0aWNzTmFtZXMuUmVxdWVzdE1hcmtpbmdDaGVjayxcclxuICAgICAgICAgICAgICAgIHFpZ1N0b3JlLmluc3RhbmNlLnNlbGVjdGVkUUlHRm9yTWFya2VyT3BlcmF0aW9uLm1hcmtTY2hlbWVHcm91cElkKS50b0xvd2VyQ2FzZSgpID09PSAndHJ1ZScpIHtcclxuICAgICAgICAgICAgd29ya2xpc3RBY3Rpb25DcmVhdG9yLmdldE1hcmtpbmdDaGVja1dvcmtsaXN0QWNjZXNzU3RhdHVzKFxyXG4gICAgICAgICAgICAgICAgcWlnU3RvcmUuaW5zdGFuY2Uuc2VsZWN0ZWRRSUdGb3JNYXJrZXJPcGVyYXRpb24ubWFya1NjaGVtZUdyb3VwSWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNoZWNrSWZDb250ZW50UmVmcmVzaENvbXBsZXRlZCgpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgbWV0aG9kIHdpbGwgdG9nZ2xlIHNpZGUgcGFuZWwgZm9yIGRldmljZXMuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgdG9nZ2xlTGVmdFBhbmVsKCkge1xyXG4gICAgICAgIGxldCBwYW5lbFRvZ2dsZVN0YXRlOiBib29sZWFuID0gIXRoaXMuc3RhdGUuZW5hYmxlTmF2aWdhdGlvblBhbmVsVmlzaWJpbGl0eTtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHsgZW5hYmxlTmF2aWdhdGlvblBhbmVsVmlzaWJpbGl0eTogcGFuZWxUb2dnbGVTdGF0ZSB9KTtcclxuICAgICAgICB1c2VyT3B0aW9uc0hlbHBlci5zYXZlKHVzZXJvcHRpb25LZXlzLk1BUktFUl9JTkZPX1BBTkVMX0VYUEFOREVELCBTdHJpbmcocGFuZWxUb2dnbGVTdGF0ZSkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTG9hZCBhbGwgbWVzc2FnZXMgdG8gc3luYyB3aXRoIHdvcmtsaXN0XHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZm9yY2VMb2FkSW5ib3hNZXNzYWdlcygpOiB2b2lkIHtcclxuXHJcbiAgICAgICAgbGV0IGFyZ3M6IGxvYWRNZXNzYWdlQXJndW1lbnRzID0ge1xyXG4gICAgICAgICAgICByZWNlbnRNZXNzYWdlVGltZTogbnVsbCxcclxuICAgICAgICAgICAgbWVzc2FnZUZvbGRlclR5cGU6IGVudW1zLk1lc3NhZ2VGb2xkZXJUeXBlLkluYm94LFxyXG4gICAgICAgICAgICBmb3JjZUxvYWRNZXNzYWdlczogdHJ1ZSxcclxuICAgICAgICAgICAgY2FuZGlkYXRlUmVzcG9uc2VJZDogbnVsbCxcclxuICAgICAgICAgICAgaXNUZWFtTWFuYWdlbWVudFZpZXc6IG1hcmtlck9wZXJhdGlvbk1vZGVGYWN0b3J5Lm9wZXJhdGlvbk1vZGUuaXNUZWFtTWFuYWdlbWVudE1vZGUsXHJcbiAgICAgICAgICAgIGhpZGRlblFpZ0xpc3Q6IHFpZ1N0b3JlLmluc3RhbmNlLkhpZGRlblFJR3NcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBtZXNzYWdpbmdBY3Rpb25DcmVhdG9yLmdldE1lc3NhZ2VzKGFyZ3MsIGZhbHNlKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFdoZW4gbGl2ZS9hdHlwaWNhbC9zdXBlcnZpc29yIHJlbWFyayBzZWxlY3RlZFxyXG4gICAgICogSWYgd2Ugb3BlbiBhIHJlc3BvbnNlIGFuZCBjbG9zZSB0aGF0IHRoZW4gd2UgbmVlZCB0byB0YWtlIHRoZSByZXNwb25zZSBtb2RlIGZyb20gcmVzcG9uc2Ugc3RvcmUoIHNlbGVjdGVkIHJlc3BvbnNlIG1vZGUpXHJcbiAgICAgKiBvdGhlcndpc2UgSXQgd2lsbCB0YWtlIHRoZSByZXNwb25zZSBtb2RlIGZyb20gd29ya2xpc3Qgc3RvcmUuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgbWFya2luZ01vZGVDaGFuZ2VkID0gKG1hcmtTY2hlbWVHcm91cElkOiBudW1iZXIsIHF1ZXN0aW9uUGFwZXJQYXJ0SWQ6IG51bWJlcik6IHZvaWQgPT4ge1xyXG4gICAgICAgIGlmICghcmVzcG9uc2VTdG9yZS5pbnN0YW5jZS5pc1NlYXJjaFJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIGlmICh3b3JrbGlzdFN0b3JlLmluc3RhbmNlLmdldFN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMud29ya2xpc3RUeXBlID0gd29ya2xpc3RTdG9yZS5pbnN0YW5jZS5jdXJyZW50V29ya2xpc3RUeXBlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNwb25zZU1vZGUgPSByZXNwb25zZVN0b3JlLmluc3RhbmNlLnNlbGVjdGVkUmVzcG9uc2VNb2RlICE9PSB1bmRlZmluZWRcclxuICAgICAgICAgICAgICAgICAgICA/IHJlc3BvbnNlU3RvcmUuaW5zdGFuY2Uuc2VsZWN0ZWRSZXNwb25zZU1vZGVcclxuICAgICAgICAgICAgICAgICAgICA6IHdvcmtsaXN0U3RvcmUuaW5zdGFuY2UuZ2V0UmVzcG9uc2VNb2RlO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIGxvYWQgaW5ib3ggbWVzc2FnZXMgdG8gc3luYyB3aXRoIHdvcmtsaXN0IGRhdGFcclxuICAgICAgICAgICAgICAgIHRoaXMuZm9yY2VMb2FkSW5ib3hNZXNzYWdlcygpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChtYXJrZXJPcGVyYXRpb25Nb2RlRmFjdG9yeS5vcGVyYXRpb25Nb2RlLmlzVGVhbU1hbmFnZW1lbnRNb2RlKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlc2V0dGluZyByZXNwb25zZW1vZGUgd2hpbGUgdGFyZ2V0IGhhcyBiZWVuIGR5bmFtaWNhbGx5IGNoYW5nZWQgdGhyb3VnaCBiYWNrZW5kIChBSSlcclxuICAgICAgICAgICAgICAgICAgICAvLyBjYXNlIDogc3RhbmRhcmRpc2F0aW9uIHRhcmdldCBoYXMgYmVlbiBjb21wbGV0ZWQgYnkgZXhhbWluZXIoc3Vib3JkaW5hdGUpIGFuZCB3YWl0aW5nIGZvciByZXZpZXdcclxuICAgICAgICAgICAgICAgICAgICAvLyBhbmQgdGhlbiBzdXBlcnZpc29yIGxvZ2dlZCBpbiBhbmQgbmF2aWdhdGVzIHRocm91Z2ggTXl0ZWFtIC0+IHN1Ym9yZGluYXRlJ3Mgd29ya2xpc3QgKGNsb3NlZCB3b3JrbGlzdClcclxuICAgICAgICAgICAgICAgICAgICAvLyB3aGljaCBpcyB5ZXQgdG8gYmUgcmV2aWV3ZWQgbm93IHRhcmdldCBoYXMgYmVlbiBjaGFuZ2VkIHRocm91Z2ggQUkgYW5kIHRoZSBzdXBlcnZpc29yIG9wZW5zIHRoZSByZXNwb25zZSBhbmRcclxuICAgICAgICAgICAgICAgICAgICAvLyBjbGlja2luZyBzZXQgYXMgcmV2aWV3ZWQgYW5kIHRoZW4gaXQgYXV0b25hdmlnYXRlc1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRvIHdvcmtsaXN0LkluIHRoaXMgc2NlbmFyaW8gcmVzcG9uc2UgbW9kZSBuZWVkIHRvIGJlIHJlc2V0dGVkIHRvIGNsb3NlZC5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc3BvbnNlTW9kZSA9IHRhcmdldEhlbHBlci5kb1Jlc2V0UmVzcG9uc2VNb2RlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAod29ya2xpc3RTdG9yZS5pbnN0YW5jZS5nZXRNYXJraW5nTW9kZUJ5V29ya0xpc3RUeXBlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd29ya2xpc3RTdG9yZS5pbnN0YW5jZS5jdXJyZW50V29ya2xpc3RUeXBlKSksIHRoaXMucmVzcG9uc2VNb2RlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMucmVtYXJrUmVxdWVzdFR5cGUgPSB3b3JrbGlzdFN0b3JlLmluc3RhbmNlLmdldFJlbWFya1JlcXVlc3RUeXBlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pc0RpcmVjdGVkUmVtYXJrID0gd29ya2xpc3RTdG9yZS5pbnN0YW5jZS5pc0RpcmVjdGVkUmVtYXJrO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIHNldCBjYW5kaWRhdGUgc2NyaXB0IGluZm8gY29sbGVjdGlvbi5cclxuICAgICAgICAgICAgICAgIHdvcmtsaXN0U3RvcmUuaW5zdGFuY2Uuc2V0Q2FuZGlkYXRlU2NyaXB0SW5mb0NvbGxlY3Rpb24gPSBzY3JpcHRJbWFnZURvd25sb2FkSGVscGVyLmNvbnN0cnVjdENhbmRpZGF0ZVNjcmlwdEluZm8oXHJcbiAgICAgICAgICAgICAgICAgICAgd29ya2xpc3RTdG9yZS5pbnN0YW5jZS5nZXRDdXJyZW50V29ya2xpc3RSZXNwb25zZUJhc2VEZXRhaWxzKCkudG9BcnJheSgpXHJcbiAgICAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBpc01hcmtCeVF1ZXN0aW9uTW9kZVNldDogYm9vbGVhbiA9IHVzZXJPcHRpb25zSGVscGVyLmdldFVzZXJPcHRpb25CeU5hbWUodXNlcm9wdGlvbktleXMuSVNfTUJRX1NFTEVDVEVELFxyXG4gICAgICAgICAgICAgICAgICAgIHFpZ1N0b3JlLmluc3RhbmNlLmdldFNlbGVjdGVkUUlHRm9yVGhlTG9nZ2VkSW5Vc2VyLmV4YW1pbmVyUm9sZUlkKSA9PT0gJ3RydWUnO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBpc0Vib29rTWFya2luZzogYm9vbGVhbiA9IChjb25maWd1cmFibGVDaGFyYWN0ZXJpc3RpY3NIZWxwZXIuZ2V0RXhhbVNlc3Npb25DQ1ZhbHVlXHJcbiAgICAgICAgICAgICAgICAgICAgKGNvbmZpZ3VyYWJsZUNoYXJhY3RlcmlzdGljc05hbWVzLmVCb29rbWFya2luZywgcWlnU3RvcmUuaW5zdGFuY2Uuc2VsZWN0ZWRRSUdGb3JNYXJrZXJPcGVyYXRpb24uZXhhbVNlc3Npb25JZClcclxuICAgICAgICAgICAgICAgICAgICAudG9Mb3dlckNhc2UoKSA9PT0gJ3RydWUnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBpbml0aWFsIGNhbGwgZm9yIGZldGNoaW5nIGNhbmRpZGF0ZSBzY3JpcHQgbWV0YSBkYXRhLlxyXG4gICAgICAgICAgICAgICAgbGV0IGNhbmRpZGF0ZVNjcmlwdE1ldGFkYXRhUHJvbWlzZSA9IHNjcmlwdEFjdGlvbkNyZWF0b3IuZmV0Y2hDYW5kaWRhdGVTY3JpcHRNZXRhZGF0YShcclxuICAgICAgICAgICAgICAgICAgICB3b3JrbGlzdFN0b3JlLmluc3RhbmNlLmdldENhbmRpZGF0ZVNjcmlwdEluZm9Db2xsZWN0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgIHFpZ1N0b3JlLmluc3RhbmNlLnNlbGVjdGVkUUlHRm9yTWFya2VyT3BlcmF0aW9uLnF1ZXN0aW9uUGFwZXJQYXJ0SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgcWlnU3RvcmUuaW5zdGFuY2Uuc2VsZWN0ZWRRSUdGb3JNYXJrZXJPcGVyYXRpb24ubWFya1NjaGVtZUdyb3VwSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgIWlzTWFya0J5UXVlc3Rpb25Nb2RlU2V0LFxyXG4gICAgICAgICAgICAgICAgICAgIGZhbHNlLCAvLyBUT0RPOiBwYXNzIGluY2x1ZGVSZWxhdGVkUWlncyB2YWx1ZSBhcyB0cnVlLCBpZiBhbnlvbmUgb2YgdGhlIGNhbmRpZGF0ZSBzY3JpcHQgaXMgd2hvbGUgcmVzcG9uc2UuXHJcbiAgICAgICAgICAgICAgICAgICAgZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgZUNvdXJzZXdvcmtIZWxwZXIgPyBlQ291cnNld29ya0hlbHBlci5pc0VDb3Vyc2V3b3JrQ29tcG9uZW50IDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgaXNFYm9va01hcmtpbmcsXHJcbiAgICAgICAgICAgICAgICAgICAgZW51bXMuU3RhbmRhcmRpc2F0aW9uU2V0dXAuTm9uZSxcclxuICAgICAgICAgICAgICAgICAgICBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBxaWdTdG9yZS5pbnN0YW5jZS5zZWxlY3RlZFFJR0Zvck1hcmtlck9wZXJhdGlvbi5tYXJraW5nTWV0aG9kID09PSBlbnVtcy5NYXJraW5nTWV0aG9kLk1hcmtGcm9tT2JqZWN0XHJcbiAgICAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCB0aGF0ID0gdGhpcztcclxuICAgICAgICAgICAgICAgIFByb21pc2UuUHJvbWlzZS5hbGwoW2NhbmRpZGF0ZVNjcmlwdE1ldGFkYXRhUHJvbWlzZV0pLlxyXG4gICAgICAgICAgICAgICAgICAgIHRoZW4oZnVuY3Rpb24gKHJlc3VsdExpc3Q6IGFueSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGF0LnVubG9hZFdvcmtsaXN0UmVmcmVzaEluZGljYXRvclRvU2hvd1dvcmtsaXN0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gU2V0IGludGVydmFsIGZvciBiYWNrZ3JvdW5kIHB1bHNlXHJcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kUHVsc2VIZWxwZXIuc2V0SW50ZXJ2YWwoXHJcbiAgICAgICAgICAgICAgICAgICAgY29uZmlnLmdlbmVyYWwuU0NSSVBUX01FVEFEQVRBX0xPQURfVElNRVJfSU5URVJWQUwgYXMgbnVtYmVyLFxyXG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRQdWxzZUhlbHBlci5oYW5kbGVDYW5kaWRhdGVTY3JpcHRNZXRhRGF0YUxvYWQsXHJcbiAgICAgICAgICAgICAgICAgICAgbnVsbFxyXG4gICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvL3NldCBiYWNrZ3JvdW5kIGNhbGwgZm9yIHByb2Nlc3Npbmcgc2F2ZSBtYXJrcyBhbmQgYW5ub3RhdGlvbnMgcXVldWUuXHJcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kUHVsc2VIZWxwZXIuc2V0SW50ZXJ2YWwoXHJcbiAgICAgICAgICAgICAgICAgICAgY29uZmlnLm1hcmtzYW5kYW5ub3RhdGlvbnNjb25maWcuTUFSS1NfQU5EX0FOTk9UQVRJT05TX1NBVkVfVElNRVJfSU5URVJWQUwsXHJcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZFB1bHNlSGVscGVyLnByb2Nlc3NNYXJrc0FuZEFubm90YXRpb25zUXVldWUsXHJcbiAgICAgICAgICAgICAgICAgICAgbnVsbFxyXG4gICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZUNvdXJzZXdvcmtIZWxwZXIuaXNFQ291cnNld29ya0NvbXBvbmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRQdWxzZUhlbHBlci5oYW5kbGVFQ291cnNlV29ya0ZpbGVNZXRhRGF0YUxvYWQoKTtcclxuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kUHVsc2VIZWxwZXIuc2V0SW50ZXJ2YWwoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZy5nZW5lcmFsLkVDT1VSU0VGSUxFX01FVEFEQVRBX0xPQURfVElNRVJfSU5URVJWQUwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRQdWxzZUhlbHBlci5oYW5kbGVFQ291cnNlV29ya0ZpbGVNZXRhRGF0YUxvYWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG51bGxcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChtYXJrZXJPcGVyYXRpb25Nb2RlRmFjdG9yeS5vcGVyYXRpb25Nb2RlLmNhbkluaXRpYXRlTWFya0FuZEFubm90YXRpb25zQmFja2dyb3VuZERvd25sb2FkKHRoaXMucmVzcG9uc2VNb2RlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRQdWxzZUhlbHBlci5oYW5kbGVDYW5kaWRhdGVNYXJrc0FuZEFubm90YXRpb25zRGF0YUxvYWQoKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBTZXQgaW50ZXJ2YWwgZm9yIGJhY2tncm91bmQgcHVsc2VcclxuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kUHVsc2VIZWxwZXIuc2V0SW50ZXJ2YWwoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZy5tYXJrc2FuZGFubm90YXRpb25zY29uZmlnLk1BUktTX0FORF9BTk5PVEFUSU9OU19MT0FEX1RJTUVSX0lOVEVSVkFMLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kUHVsc2VIZWxwZXIuaGFuZGxlQ2FuZGlkYXRlTWFya3NBbmRBbm5vdGF0aW9uc0RhdGFMb2FkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBudWxsXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBMb2dpYyB0byBsb2FkIGltYWdlIHpvbmVzIGlmIGVib29rbWFya2luZyBjb21wb25lbnQuXHJcbiAgICAgICAgICAgICAgICAvLyBUaGlzIHdpbGwgaGFwcGVuIGFmdGVyIE1hcmtzIGFuZCBBbm5vYXR0aW9uIExvYWRcclxuICAgICAgICAgICAgICAgIGlmIChpc0Vib29rTWFya2luZykge1xyXG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRQdWxzZUhlbHBlci5oYW5kbGVFYm9va01hcmtpbmdJbWFnZVpvbmVMb2FkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZFB1bHNlSGVscGVyLnNldEludGVydmFsKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25maWcuZ2VuZXJhbC5TQ1JJUFRfTUVUQURBVEFfTE9BRF9USU1FUl9JTlRFUlZBTCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZFB1bHNlSGVscGVyLmhhbmRsZUVib29rTWFya2luZ0ltYWdlWm9uZUxvYWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG51bGxcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIFRoaXMgd2lsbCBsb2FkIHRoZSBmYXZvcml0ZSBzdGFtcHMgYWdhaW5zdCBzZWxlY3RlZCBRaWcuXHJcbiAgICAgICAgICAgICAgICByZXNwb25zZVNlYXJjaEhlbHBlci5sb2FkRmF2b3JpdGVTdGFtcEZvclNlbGVjdGVkUWlnKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLyogTG9nZ2luZyB0YWIgc3dpdGggaW4gZ29vZ2xlIGFuYWx5dGljcyAqL1xyXG4gICAgICAgICAgICAgICAgZ2FIZWxwZXIubG9nRXZlbnRPblRhYlN3aXRjaCh0aGlzLndvcmtsaXN0VHlwZSxcclxuICAgICAgICAgICAgICAgICAgICB3b3JrbGlzdFN0b3JlLmluc3RhbmNlLmdldFJlc3BvbnNlTW9kZSxcclxuICAgICAgICAgICAgICAgICAgICBxaWdTdG9yZS5pbnN0YW5jZS5xaWdOYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIHFpZ1N0b3JlLmluc3RhbmNlLmlzVGVhbU1hbmFnZW1lbWVudCxcclxuICAgICAgICAgICAgICAgICAgICBxaWdTdG9yZS5pbnN0YW5jZS5zZWxlY3RlZFFJR0Zvck1hcmtlck9wZXJhdGlvbi5leGFtaW5lclJvbGVJZFxyXG4gICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVubG9hZFdvcmtsaXN0UmVmcmVzaEluZGljYXRvclRvU2hvd1dvcmtsaXN0KCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICAvKiogc2V0IHRoaXMgdG8gdHJ1ZSB0byBzaG93IGxvYWRpbm5nIGluZGljYXRvciAqL1xyXG4gICAgICAgICAgICB0aGlzLmlzUmVmcmVzaGluZyA9IHRydWU7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmRvUmVuZGVyTWFya2VySW5mb3JtYXRpb25QYW5lbCgpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXRSZW5kZXJlZE9uOiBEYXRlLm5vdygpLFxyXG4gICAgICAgICAgICAgICAgICAgIHJlbmRlcmVkT246IERhdGUubm93KClcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmVzcG9uc2VTZWFyY2hoZWxwZXIub25Xb3JrTGlzdFNlbGVjdGVkKG1hcmtTY2hlbWVHcm91cElkLCBxdWVzdGlvblBhcGVyUGFydElkKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogcmV0dXJuIHRydWUgaWYgd2UgbmVlZCB0byByZW5kZXIgdGhlIHBlcnNvbmFsIGluZm9ybWF0aW9uIHBhbmVsXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZG9SZW5kZXJNYXJrZXJJbmZvcm1hdGlvblBhbmVsKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGlmICh0aGlzLm1hcmtlckluZm9ybWF0aW9uID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMubWFya2VySW5mb3JtYXRpb24uYXBwcm92YWxTdGF0dXMgIT09IGVudW1zLkV4YW1pbmVyQXBwcm92YWwuTm9uZVxyXG4gICAgICAgICAgICAmJiB0aGlzLm1hcmtlckluZm9ybWF0aW9uLm1hcmtlclJvbGVJRCAhPT0gZW51bXMuRXhhbWluZXJSb2xlLm5vbmU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNZXRob2QgdG8gdW5sb2FkIHRoZSByZWZyZXNoIGluZGljYXRvciBpbm9yZGVyIHRvIHNob3cgdGhlIHdvcmtsaXN0XHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgdW5sb2FkV29ya2xpc3RSZWZyZXNoSW5kaWNhdG9yVG9TaG93V29ya2xpc3QoKSB7XHJcblxyXG4gICAgICAgIC8qKiBSZXNldHRpbmcgdGhlIHJlZnJlc2ggdmFyaWFibGUgdG8gc2hvdyBhY3R1YWwgZGF0YSBpbnN0ZWFkIG9mIGxvYWRpbmcgaW5kaWNhdG9yICovXHJcbiAgICAgICAgdGhpcy5pc1JlZnJlc2hpbmcgPSBmYWxzZTtcclxuICAgICAgICBpZiAodGhpcy5pc0NvbnRlbnRSZWZyZXNoU3RhcnRlZCkge1xyXG4gICAgICAgICAgICB0aGlzLmlzQ29udGVudFJlZnJlc2hTdWNjZWVkZWQuaXNXb3JrbGlzdFJlZnJlc2hDb21wbGV0ZWQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNoZWNrSWZDb250ZW50UmVmcmVzaENvbXBsZXRlZCgpO1xyXG4gICAgICAgIHRoaXMud29ya2xpc3RUYWJEZXRhaWxzID0gd29ya2xpc3RDb21wb25lbnRIZWxwZXIuZ2V0V29ya2xpc3RUYWJEZXRhaWxzXHJcbiAgICAgICAgICAgICh3b3JrbGlzdFN0b3JlLmluc3RhbmNlLmdldE1hcmtpbmdNb2RlQnlXb3JrTGlzdFR5cGUod29ya2xpc3RTdG9yZS5pbnN0YW5jZS5jdXJyZW50V29ya2xpc3RUeXBlKSk7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHJlbmRlcmVkT246IERhdGUubm93KCkgfSk7XHJcblxyXG4gICAgICAgIGlmIChyZXNwb25zZVN0b3JlLmluc3RhbmNlLl9vcGVuQXR5cGljYWxSZXNwb25zZSkge1xyXG4gICAgICAgICAgICBsZXQgYWxsb2NhdGVkUmVzcG9uc2VJdGVtcyA9IHJlc3BvbnNlU3RvcmUuaW5zdGFuY2UucmVzcG9uc2VEYXRhLmFsbG9jYXRlZFJlc3BvbnNlSXRlbXM7XHJcbiAgICAgICAgICAgIGxldCByZXNwb25zZURhdGE6IGFsbG9jYXRlZFJlc3BvbnNlID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICBpZiAoYWxsb2NhdGVkUmVzcG9uc2VJdGVtcykge1xyXG4gICAgICAgICAgICAgICAgLy8gaWRlbnRpZnkgdGhlIG1hcmtncm91cCBmb3Igd2hpY2ggZGlzcGxheSBpZCBjYW4gYmUgZm91bmRcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMgaXMgcmVxdWlyZWQgZm9yIHdob2xlIHJlc3BvbnNlIGF0eXBpY2FsIG1hcmsgbm93LCB3aGljaCBjcmVhdGVzIG11bHRpcGxlIG1hcmtncm91cGlkc1xyXG4gICAgICAgICAgICAgICAgLy8gYW1vbmcgd2hpY2ggb25seSBvbmUgY2FuIGZpbmQgdGhlIGRpc3BsYXkgaWQgZnJvbSB0aGUgd29ya2xpc3QgZGF0YS5cclxuICAgICAgICAgICAgICAgIGFsbG9jYXRlZFJlc3BvbnNlSXRlbXMuZm9yRWFjaCgoaXRlbTogYWxsb2NhdGVkUmVzcG9uc2UpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2VEYXRhID09PSB1bmRlZmluZWQgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgd29ya2xpc3RTdG9yZS5pbnN0YW5jZS5nZXRSZXNwb25zZURldGFpbHNCeU1hcmtHcm91cElkKGl0ZW0ubWFya0dyb3VwSWQpICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdvcmtsaXN0U3RvcmUuaW5zdGFuY2UuZ2V0UmVzcG9uc2VEZXRhaWxzQnlNYXJrR3JvdXBJZChpdGVtLm1hcmtHcm91cElkKS5kaXNwbGF5SWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VEYXRhID0gaXRlbTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlRGF0YSkge1xyXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VIZWxwZXIub3BlblJlc3BvbnNlKHBhcnNlSW50KCc2JyArIHJlc3BvbnNlRGF0YS5kaXNwbGF5SUQudG9TdHJpbmcoKSksXHJcbiAgICAgICAgICAgICAgICAgICAgZW51bXMuUmVzcG9uc2VOYXZpZ2F0aW9uLnNwZWNpZmljLFxyXG4gICAgICAgICAgICAgICAgICAgIHdvcmtsaXN0U3RvcmUuaW5zdGFuY2UuZ2V0UmVzcG9uc2VNb2RlLFxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlRGF0YS5tYXJrR3JvdXBJZCxcclxuICAgICAgICAgICAgICAgICAgICBlbnVtcy5SZXNwb25zZVZpZXdNb2RlLnpvbmVWaWV3KTtcclxuICAgICAgICAgICAgICAgIG1hcmtTY2hlbWVIZWxwZXIuZ2V0TWFya3MocGFyc2VJbnQoJzYnICsgcmVzcG9uc2VEYXRhLmRpc3BsYXlJRC50b1N0cmluZygpKSxcclxuICAgICAgICAgICAgICAgICAgICBlbnVtcy5NYXJraW5nTW9kZS5MaXZlTWFya2luZyk7XHJcbiAgICAgICAgICAgICAgICByZXNwb25zZVN0b3JlLmluc3RhbmNlLnJlc2V0T3BlbkF0eXBpY2FsRmxhZygpO1xyXG4gICAgICAgICAgICAgICAgZUNvdXJzZXdvcmtIZWxwZXIuZmV0Y2hFQ291cnNlV29ya0NhbmRpZGF0ZVNjcmlwdE1ldGFkYXRhKHJlc3BvbnNlRGF0YS5kaXNwbGF5SUQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhpcyB3aWxsIG9wZW4gdGhlIHJlc3BvbnNlIGl0ZW1cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBvcGVuUmVzcG9uc2UgPSAoKTogdm9pZCA9PiB7XHJcbiAgICAgICAgLy8gQ2hlY2sgZm9yIHN0YW5kYXJkaXNhdGlvbiBzZXR1cCBjb21wbGV0aW9uLlxyXG4gICAgICAgIHNpbXVsYXRpb25Nb2RlSGVscGVyLmNoZWNrU3RhbmRhcmRpc2F0aW9uU2V0dXBDb21wbGV0aW9uKGVudW1zLlBhZ2VDb250YWluZXJzLldvcmtMaXN0LCBlbnVtcy5QYWdlQ29udGFpbmVycy5Xb3JrTGlzdCk7XHJcbiAgICAgICAgbmF2aWdhdGlvbkhlbHBlci5sb2FkUmVzcG9uc2VQYWdlKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgb24gJ09LJyBjbGljayBvZiByZXNwb25zZSBhbGxvY2F0aW9uIGVycm9yIGRpYWxvZy5cclxuICAgICAqIFRoaXMgd2lsbCBjbG9zZSB0aGUgcG9wdXAuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgb25Pa0NsaWNrT2ZSZXNwb25zZUFsbG9jYXRpb25FcnJvckRpYWxvZygpIHtcclxuICAgICAgICBpZiAoZXhhbWluZXJzdG9yZS5pbnN0YW5jZS5nZXRNYXJrZXJJbmZvcm1hdGlvbi5hcHByb3ZhbFN0YXR1cyA9PT0gZW51bXMuRXhhbWluZXJBcHByb3ZhbC5XaXRoZHJhd24pIHtcclxuICAgICAgICAgICAgcWlnQWN0aW9uQ3JlYXRvci5nZXRRSUdTZWxlY3RvckRhdGEoMCk7XHJcbiAgICAgICAgICAgIGxvYWRDb250YWluZXJBY3Rpb25DcmVhdG9yLmxvYWRDb250YWluZXIoZW51bXMuUGFnZUNvbnRhaW5lcnMuUWlnU2VsZWN0b3IpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIGlzUmVzcG9uc2VBbGxvY2F0aW9uRXJyb3JEaWFsb2dEaXNwbGF5aW5nOiBmYWxzZSxcclxuICAgICAgICAgICAgcmVuZGVyZWRPbjogRGF0ZS5ub3coKVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0cyBjYWxsZWQgb25jZSB0aGUgcmVzcG9uc2UgYWxsb2NhdGlvbiByZXF1ZXN0IGlzIGNvbXBsZXRlZFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIG9uUmVzcG9uc2VBbGxvY2F0ZWQgPSAocmVzcG9uc2VBbGxvY2F0aW9uRXJyb3JDb2RlOiBlbnVtcy5SZXNwb25zZUFsbG9jYXRpb25FcnJvckNvZGUsXHJcbiAgICAgICAgYWxsb2NhdGVkUmVzcG9uc2VDb3VudDogbnVtYmVyLFxyXG4gICAgICAgIHN1Y2Nlc3M6IGJvb2xlYW4sXHJcbiAgICAgICAgYXBwcm92YWxTdGF0dXM6IGVudW1zLkV4YW1pbmVyQXBwcm92YWwsXHJcbiAgICAgICAgb3BlbkF0eXBpY2FsUmVzcG9uc2U6IGJvb2xlYW4sXHJcbiAgICAgICAgcmVzcG9uc2VEYXRhOiBhbGxvY2F0ZWRSZXNwb25zZURhdGEpOiB2b2lkID0+IHtcclxuXHJcbiAgICAgICAgLy8gQ2hlY2sgdGhlIE1hcmtlciBhcHByb3ZhbCBzdGF0dXMgaXMgd2l0aCBkcmF3biwgSWYgc28gZGlzcGxheSB0aGUgd2l0aGRyYXduIG1lc3NhZ2VcclxuICAgICAgICBpZiAoYXBwcm92YWxTdGF0dXMgPT09IGVudW1zLkV4YW1pbmVyQXBwcm92YWwuV2l0aGRyYXduKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlV2l0aERyYXduRXJyb3IoKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgdGhpcy5pbml0aWF0ZUNvbnRlbnRSZWZyZXNoKCk7XHJcbiAgICAgICAgICAgIHRoaXMuaXNBbGxvY2F0aW9uQ29tcGxldGVkID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBpZiAocmVzcG9uc2VBbGxvY2F0aW9uRXJyb3JDb2RlICE9PSBlbnVtcy5SZXNwb25zZUFsbG9jYXRpb25FcnJvckNvZGUubm9uZSkge1xyXG4gICAgICAgICAgICBsZXQgcmVzcG9uc2VBbGxvY2F0aW9uVmFsaWRhdGlvblBhcmFtZXRlcjogYW55O1xyXG4gICAgICAgICAgICByZXNwb25zZUFsbG9jYXRpb25WYWxpZGF0aW9uUGFyYW1ldGVyID0gcmVzcG9uc2VBbGxvY2F0aW9uVmFsaWRhdGlvbkhlbHBlci5WYWxpZGF0ZShyZXNwb25zZUFsbG9jYXRpb25FcnJvckNvZGUsXHJcbiAgICAgICAgICAgICAgICBhbGxvY2F0ZWRSZXNwb25zZUNvdW50LFxyXG4gICAgICAgICAgICAgICAgYXBwcm92YWxTdGF0dXMpO1xyXG4gICAgICAgICAgICBnYUhlbHBlci5sb2dFdmVudE9uUmVzcG9uc2VBbGxvY2F0aW9uKHRydWUpO1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgIGlzUmVzcG9uc2VBbGxvY2F0aW9uRXJyb3JEaWFsb2dEaXNwbGF5aW5nOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgcmVuZGVyZWRPbjogRGF0ZS5ub3coKSxcclxuICAgICAgICAgICAgICAgIGVycm9yRGlhbG9nSGVhZGVyVGV4dDogcmVzcG9uc2VBbGxvY2F0aW9uVmFsaWRhdGlvblBhcmFtZXRlci5FcnJvckRpYWxvZ0hlYWRlclRleHQsXHJcbiAgICAgICAgICAgICAgICBlcnJvckRpYWxvZ0NvbnRlbnRUZXh0OiByZXNwb25zZUFsbG9jYXRpb25WYWxpZGF0aW9uUGFyYW1ldGVyLkVycm9yRGlhbG9nQ29udGVudFRleHQsXHJcbiAgICAgICAgICAgICAgICBpc0J1c3k6IGZhbHNlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGdhSGVscGVyLmxvZ0V2ZW50T25SZXNwb25zZUFsbG9jYXRpb24oZmFsc2UsIGFsbG9jYXRlZFJlc3BvbnNlQ291bnQpO1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgaXNCdXN5OiBmYWxzZSwgcmVuZGVyZWRPbjogRGF0ZS5ub3coKSB9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2hvdyBidXN5IGluZGljYXRvciB3aGVuIHN1Ym1pdCBpcyBjbGlja2VkIGluIGxpdmUgb3BlbiB3b3JrbGlzdFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHNldEJ1c3lJbmRpY2F0b3IgPSAoKTogdm9pZCA9PiB7XHJcbiAgICAgICAgLyogaWYgYW55IGVycm9yIG9jY3VycyBzZXQgdGhlIHZhcmlhYmxlIHRvIGZhbHNlIGFuZCBjb250ZW50IHJlZnJlc2ggaGFzIHN0YXJ0ZWQgKi9cclxuICAgICAgICBpZiAoYnVzeUluZGljYXRvclN0b3JlLmluc3RhbmNlLmdldEJ1c3lJbmRpY2F0b3JJbnZva2VyID09PSBlbnVtcy5CdXN5SW5kaWNhdG9ySW52b2tlci5ub25lICYmXHJcbiAgICAgICAgICAgIHRoaXMuaXNDb250ZW50UmVmcmVzaFN0YXJ0ZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5yZXNldENvbnRlbnRSZWZyZXNoU3RhdHVzZXMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBpc0J1c3k6IGJ1c3lJbmRpY2F0b3JTdG9yZS5pbnN0YW5jZS5nZXRCdXN5SW5kaWNhdG9ySW52b2tlciA9PT0gZW51bXMuQnVzeUluZGljYXRvckludm9rZXIubm9uZSA/IGZhbHNlIDogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIGlmIGRhdGEgcmVmcmVzaCBpcyBjb21wbGV0ZWQsIGhpZGUgYnVzeSBpbmRpY2F0b3JcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBjaGVja0lmQ29udGVudFJlZnJlc2hDb21wbGV0ZWQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNDb250ZW50UmVmcmVzaFN1Y2NlZWRlZCAmJlxyXG4gICAgICAgICAgICB0aGlzLmlzQ29udGVudFJlZnJlc2hTdWNjZWVkZWQuaXNNYXJraW5nUHJvZ3Jlc3NDb21wbGV0ZWQgJiZcclxuICAgICAgICAgICAgdGhpcy5pc0NvbnRlbnRSZWZyZXNoU3VjY2VlZGVkLmlzV29ya2xpc3RSZWZyZXNoQ29tcGxldGVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVzZXRDb250ZW50UmVmcmVzaFN0YXR1c2VzKCk7XHJcblxyXG4gICAgICAgICAgICAvKiBSZXNldCB0aGUgYnVzeSBpbmRpY2F0b3IgKi9cclxuICAgICAgICAgICAgYnVzeUluZGljYXRvckFjdGlvbkNyZWF0b3Iuc2V0QnVzeUluZGljYXRvckludm9rZXIoZW51bXMuQnVzeUluZGljYXRvckludm9rZXIubm9uZSk7XHJcblxyXG4gICAgICAgICAgICAvKiogaWYgV29ya2xpc3RUeXBlIGlzIHN0YW5kYXJkaXNhdGlvbiwgYXBwcm92YWwgc3RhdHVzIG1heSBjaGFuZ2Ugb24gcmVzcG9uc2Ugc3VibWlzc2lvbiAqL1xyXG4gICAgICAgICAgICAvKlxyXG4gICAgICAgICAgICBpZiAoKHN1Ym1pdFN0b3JlLmluc3RhbmNlLmdldEN1cnJlbnRXb3JrbGlzdFR5cGUgPT09IGVudW1zLldvcmtsaXN0VHlwZS5zdGFuZGFyZGlzYXRpb25cclxuICAgICAgICAgICAgICAgIHx8IHN1Ym1pdFN0b3JlLmluc3RhbmNlLmdldEN1cnJlbnRXb3JrbGlzdFR5cGUgPT09IGVudW1zLldvcmtsaXN0VHlwZS5zZWNvbmRzdGFuZGFyZGlzYXRpb24pXHJcbiAgICAgICAgICAgICAgICAmJiB0aGlzLmlzU3VibWl0Q29tcGxldGVkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmlzU3VibWl0Q29tcGxldGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1hcmtlckluZm9ybWF0aW9uID0gZXhhbWluZXJzdG9yZS5pbnN0YW5jZS5nZXRNYXJrZXJJbmZvcm1hdGlvbjtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm1hcmtlckluZm9ybWF0aW9uLmFwcHJvdmFsU3RhdHVzID09PSBlbnVtcy5FeGFtaW5lckFwcHJvdmFsLkFwcHJvdmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyZWRPbjogRGF0ZS5ub3coKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQXV0b0FwcHJvdmFsRGlhbG9nRGlzcGxheWluZzogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5tYXJrZXJJbmZvcm1hdGlvbi5hcHByb3ZhbFN0YXR1cyA9PT0gZW51bXMuRXhhbWluZXJBcHByb3ZhbC5TdXNwZW5kZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1hcmtlckluZm9ybWF0aW9uID0gZXhhbWluZXJzdG9yZS5pbnN0YW5jZS5nZXRNYXJrZXJJbmZvcm1hdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgcmVuZGVyZWRPbjogRGF0ZS5ub3coKSB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAqL1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlc2V0IGNvbnRlbnQgcmVmcmVzaCBzdGF0dXNlc1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHJlc2V0Q29udGVudFJlZnJlc2hTdGF0dXNlcygpIHtcclxuICAgICAgICB0aGlzLmlzQ29udGVudFJlZnJlc2hTdWNjZWVkZWQuaXNNYXJraW5nUHJvZ3Jlc3NDb21wbGV0ZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmlzQ29udGVudFJlZnJlc2hTdWNjZWVkZWQuaXNXb3JrbGlzdFJlZnJlc2hDb21wbGV0ZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmlzQ29udGVudFJlZnJlc2hTdGFydGVkID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBPbiByZXNwb25zZSBzdWJtaXNzaW9uIGNvbXBsZXRlZFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIG9uU3VibWl0UmVzcG9uc2VDb21wbGV0ZWQgPSAoZnJvbU1hcmtTY2hlbWU6IGJvb2xlYW4sIHN1Ym1pdHRlZE1hcmtHcm91cElkczogQXJyYXk8bnVtYmVyPik6IHZvaWQgPT4ge1xyXG5cclxuXHJcbiAgICAgICAgdGhpcy5pc1N1Ym1pdENvbXBsZXRlZCA9IHRydWU7XHJcbiAgICAgICAgLyogc3RhcnQgdGhlIGRhdGEgcmVmcmVzaCAqL1xyXG4gICAgICAgIHRoaXMuaXNDb250ZW50UmVmcmVzaFN0YXJ0ZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICB0aGlzLnNldFN0YXRlKHsgaXNCdXN5OiBmYWxzZSB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIYW5kbGUgdGhlIFdpdGhkcndhbiBwb3B1cFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGhhbmRsZVdpdGhEcmF3bkVycm9yKCkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBpc1Jlc3BvbnNlQWxsb2NhdGlvbkVycm9yRGlhbG9nRGlzcGxheWluZzogdHJ1ZSxcclxuICAgICAgICAgICAgcmVuZGVyZWRPbjogRGF0ZS5ub3coKSxcclxuICAgICAgICAgICAgZXJyb3JEaWFsb2dIZWFkZXJUZXh0OlxyXG4gICAgICAgICAgICAgICAgbG9jYWxlU3RvcmUuaW5zdGFuY2UuVHJhbnNsYXRlVGV4dFxyXG4gICAgICAgICAgICAgICAgICAgICgnbWFya2luZy53b3JrbGlzdC5yZXNwb25zZS1hbGxvY2F0aW9uLWVycm9yLWRpYWxvZy5yZXNwb25zZS1hbGxvY2F0aW9uLWVycm9yLWhlYWRlci13aXRoZHJhd25NYXJrZXInKSxcclxuICAgICAgICAgICAgZXJyb3JEaWFsb2dDb250ZW50VGV4dDpcclxuICAgICAgICAgICAgICAgIGxvY2FsZVN0b3JlLmluc3RhbmNlLlRyYW5zbGF0ZVRleHRcclxuICAgICAgICAgICAgICAgICAgICAoJ21hcmtpbmcud29ya2xpc3QucmVzcG9uc2UtYWxsb2NhdGlvbi1lcnJvci1kaWFsb2cucmVzcG9uc2UtYWxsb2NhdGlvbi1lcnJvci13aXRoZHJhd25NYXJrZXInKSxcclxuICAgICAgICAgICAgaXNCdXN5OiBmYWxzZVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU3RhcnQgdGhlIGNvbnRlbnQgcmVmcmVzaFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGluaXRpYXRlQ29udGVudFJlZnJlc2goKSB7XHJcbiAgICAgICAgbGV0IF93b3JrbGlzdFR5cGUgPSBhbGxvY2F0ZVJlc3BvbnNlSGVscGVyLmdldFdvcmtMaXN0VHlwZUJ5TWFya2luZ01vZGUoXHJcbiAgICAgICAgICAgIHRhcmdldEhlbHBlci5nZXRTZWxlY3RlZFFpZ01hcmtpbmdNb2RlKCkpO1xyXG4gICAgICAgIC8vIExvYWQgdGhlIG1hcmtpbmcgcHJvZ3Jlc3NcclxuICAgICAgICB3b3JrbGlzdEFjdGlvbkNyZWF0b3IuZ2V0V29ya2xpc3RNYXJrZXJQcm9ncmVzc0RhdGEoXHJcbiAgICAgICAgICAgIHFpZ1N0b3JlLmluc3RhbmNlLnNlbGVjdGVkUUlHRm9yTWFya2VyT3BlcmF0aW9uLmV4YW1pbmVyUm9sZUlkLFxyXG4gICAgICAgICAgICBxaWdTdG9yZS5pbnN0YW5jZS5zZWxlY3RlZFFJR0Zvck1hcmtlck9wZXJhdGlvbi5tYXJrU2NoZW1lR3JvdXBJZCxcclxuICAgICAgICAgICAgcWlnU3RvcmUuaW5zdGFuY2Uuc2VsZWN0ZWRRSUdGb3JNYXJrZXJPcGVyYXRpb24uaXNFbGVjdHJvbmljU3RhbmRhcmRpc2F0aW9uVGVhbU1lbWJlcik7XHJcblxyXG4gICAgICAgIC8vIExvYWQgbWFya2luZyBpbnN0cnVjdGlvbnMgXHJcbiAgICAgICAgaWYgKG1hcmtlck9wZXJhdGlvbk1vZGVGYWN0b3J5Lm9wZXJhdGlvbk1vZGUuaXNNYXJraW5nSW5zdHJ1Y3Rpb25MaW5rVmlzaWJsZSkge1xyXG4gICAgICAgICAgICBtYXJraW5nSW5zdHJ1Y3Rpb25BY3Rpb25DcmVhdG9yLmdldE1hcmtpbmdJbnN0cnVjdGlvbnNBY3Rpb25DcmVhdG9yKFxyXG4gICAgICAgICAgICAgICAgcWlnU3RvcmUuaW5zdGFuY2Uuc2VsZWN0ZWRRSUdGb3JNYXJrZXJPcGVyYXRpb24ubWFya1NjaGVtZUdyb3VwSWQsXHJcbiAgICAgICAgICAgICAgICBjb25maWd1cmFibGVDaGFyYWN0ZXJpc3RpY3NIZWxwZXIubWFya2luZ0luc3RydWN0aW9uQ0NWYWx1ZSwgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqICBUaGlzIHdpbGwgbG9hZCB0aGUgZGVwZW5kZW5jaWVzIGR5bmFtaWNhbGx5IGR1cmluZyBjb21wb25lbnQgbW91bnQuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgbG9hZERlcGVuZGVuY2llcygpIHtcclxuICAgICAgICByZXF1aXJlLmVuc3VyZShbJy4vbWFya2VyaW5mb3JtYXRpb24vbWFya2VyaW5mb3JtYXRpb25wYW5lbCcsICcuLi8uLi9zdG9yZXMvbG9jYWxlL2xvY2FsZXN0b3JlJyxcclxuICAgICAgICAgICAgJy4uLy4uL3N0b3Jlcy9xaWdzZWxlY3Rvci9xaWdzdG9yZScsICcuLi8uLi9zdG9yZXMvbWFya2VyaW5mb3JtYXRpb24vZXhhbWluZXJzdG9yZScsICcuL3NoYXJlZC93b3JrbGlzdG1lc3NhZ2UnLFxyXG4gICAgICAgICAgICAnLi4vdXRpbGl0eS9jb25maXJtYXRpb25kaWFsb2cnLFxyXG4gICAgICAgICAgICAnLi9zaGFyZWQvbWFya2luZ3Byb2dyZXNzJyxcclxuICAgICAgICAgICAgJy4vdGFyZ2V0c3VtbWFyeS90YXJnZXRzJywgJy4uLy4uL3N0b3Jlcy9xaWdzZWxlY3Rvci90eXBpbmdzL292ZXJ2aWV3ZGF0YScsICcuLi8uLi9zdG9yZXMvcWlnc2VsZWN0b3IvdHlwaW5ncy9xaWdzdW1tYXJ5JyxcclxuICAgICAgICAgICAgJy4uLy4uL3N0b3Jlcy9xaWdzZWxlY3Rvci90eXBpbmdzL21hcmtpbmd0YXJnZXQnLCAnLi4vLi4vc3RvcmVzL3dvcmtsaXN0L3RhcmdldHN1bW1hcnlzdG9yZScsXHJcbiAgICAgICAgICAgICcuLi8uLi9zdG9yZXMvd29ya2xpc3QvdHlwaW5ncy9tYXJraW5ndGFyZ2V0c3VtbWFyeScsXHJcbiAgICAgICAgICAgICcuL3dvcmtsaXN0Y29udGFpbmVyJywgJy4uLy4uL3N0b3Jlcy93b3JrbGlzdC93b3JrbGlzdHN0b3JlJyxcclxuICAgICAgICAgICAgJy4uLy4uL3N0b3Jlcy9yZXNwb25zZS9yZXNwb25zZXN0b3JlJyxcclxuICAgICAgICAgICAgJy4uLy4uL2FjdGlvbnMvd29ya2xpc3Qvd29ya2xpc3RhY3Rpb25jcmVhdG9yJywgJy4uL3V0aWxpdHkvZ2VuZXJpY2RpYWxvZycsXHJcbiAgICAgICAgICAgICcuLi91dGlsaXR5L3Jlc3BvbnNlYWxsb2NhdGlvbi9yZXNwb25zZWFsbG9jYXRpb252YWxpZGF0aW9uaGVscGVyJyxcclxuICAgICAgICAgICAgJy4uL3V0aWxpdHkvcmVzcG9uc2VhbGxvY2F0aW9uL3Jlc3BvbnNlYWxsb2NhdGlvbnZhbGlkYXRpb25wYXJhbWV0ZXInLCAnY2xhc3NuYW1lcycsXHJcbiAgICAgICAgICAgICcuLi8uLi9zdG9yZXMvYnVzeWluZGljYXRvci9idXN5aW5kaWNhdG9yc3RvcmUnLCAnLi4vLi4vc3RvcmVzL3N1Ym1pdC9zdWJtaXRzdG9yZScsXHJcbiAgICAgICAgICAgICcuL3dvcmtsaXN0Y29tcG9uZW50aGVscGVyJywgJy4uLy4uL2FjdGlvbnMvc3VibWl0L3N1Ym1pdGFjdGlvbmNyZWF0b3InLFxyXG4gICAgICAgICAgICAnLi4vLi4vYWN0aW9ucy9idXN5aW5kaWNhdG9yL2J1c3lpbmRpY2F0b3JhY3Rpb25jcmVhdG9yJywgJy4uL3V0aWxpdHkvYmFja2dyb3VuZHdvcmtlci9zY3JpcHRpbWFnZWRvd25sb2FkaGVscGVyJyxcclxuICAgICAgICAgICAgJy4uLy4uL2FjdGlvbnMvc2NyaXB0L3NjcmlwdGFjdGlvbmNyZWF0b3InLCAnLi4vLi4vc3RvcmVzL3NjcmlwdC9zY3JpcHRzdG9yZScsXHJcbiAgICAgICAgICAgICcuLi8uLi91dGlsaXR5L2JhY2tncm91bmR3b3JrZXJzL3NjcmlwdGltYWdlZG93bmxvYWRlci9zY3JpcHRpbWFnZWRvd25sb2FkZXInLFxyXG4gICAgICAgICAgICAnLi4vLi4vdXRpbGl0eS9iYWNrZ3JvdW5kcHVsc2UvYmFja2dyb3VuZHB1bHNlaGVscGVyJywgJy4uL2Zvb3RlcicsICcuLi8uLi91dGlsaXR5L2dvb2dsZWFuYWx5dGljcy9nYWhlbHBlcicsXHJcbiAgICAgICAgICAgICcuLi8uLi9hY3Rpb25zL3N0YW1wL3N0YW1wYWN0aW9uY3JlYXRvcicsICcuLi8uLi9zdG9yZXMvY29uZmlndXJhYmxlY2hhcmFjdGVyaXN0aWNzL2NvbmZpZ3VyYWJsZWNoYXJhY3RlcmlzdGljc3N0b3JlJyxcclxuICAgICAgICAgICAgJy4uLy4uL2FjdGlvbnMvY29uZmlndXJhYmxlY2hhcmFjdGVyaXN0aWNzL2NvbmZpZ3VyYWJsZWNoYXJhY3RlcmlzdGljc2FjdGlvbmNyZWF0b3InLFxyXG4gICAgICAgICAgICAnLi4vLi4vYWN0aW9ucy9xaWdzZWxlY3Rvci9xaWdzZWxlY3RvcmFjdGlvbmNyZWF0b3InLCAnLi4vLi4vc3RvcmVzL3N0YW1wL3N0YW1wc3RvcmUnLFxyXG4gICAgICAgICAgICAnLi4vLi4vYWN0aW9ucy9leGNlcHRpb24vZXhjZXB0aW9uYWN0aW9uY3JlYXRvcicsXHJcbiAgICAgICAgICAgICcuLi8uLi9zdG9yZXMvZXhjZXB0aW9uL2V4Y2VwdGlvbnN0b3JlJyxcclxuICAgICAgICAgICAgJy4uL21lc3NhZ2UvbWVzc2FnZXBvcHVwJywgJy4uL3V0aWxpdHkvbWVzc2FnZS9tZXNzYWdlaGVscGVyJywgJy4uLy4uL2FjdGlvbnMvbWVzc2FnaW5nL21lc3NhZ2luZ2FjdGlvbmNyZWF0b3InLFxyXG4gICAgICAgICAgICAnLi4vLi4vc3RvcmVzL21lc3NhZ2UvbWVzc2FnZXN0b3JlJywgJy4uLy4uL3V0aWxpdHkvc3RyaW5nZm9ybWF0L3N0cmluZ2Zvcm1hdGhlbHBlcicsXHJcbiAgICAgICAgICAgICcuL21hcmtlcmluZm9ybWF0aW9uL21hcmtpbmdjaGVja3BvcHVwJyxcclxuICAgICAgICAgICAgJy4uLy4uL3V0aWxpdHkvcmVzcG9uc2VzZWFyY2gvcmVzcG9uc2VzZWFyY2hoZWxwZXInLFxyXG4gICAgICAgICAgICAnLi4vdXRpbGl0eS9leGNlcHRpb24vZXhjZXB0aW9uaGVscGVyJywgJy4uLy4uL3V0aWxpdHkvZ2VuZXJpYy9odG1sdXRpbGl0aWVzJyxcclxuICAgICAgICAgICAgJy4uLy4uL2FjdGlvbnMvbmF2aWdhdGlvbi9sb2FkY29udGFpbmVyYWN0aW9uY3JlYXRvcicsXHJcbiAgICAgICAgICAgICcuLi91dGlsaXR5L3VzZXJkZXRhaWxzL3VzZXJpbmZvL29wZXJhdGlvbm1vZGVoZWxwZXInLFxyXG4gICAgICAgICAgICAnLi9tYXJrY2hlY2svbWFya2NoZWNrZXhhbWluZXJzJyxcclxuICAgICAgICAgICAgJy4uLy4uL2FjdGlvbnMvbWFya2luZ2NoZWNrL21hcmtpbmdjaGVja2FjdGlvbmNyZWF0b3InLFxyXG4gICAgICAgICAgICAnLi4vLi4vYWN0aW9ucy91c2VyaW5mby91c2VyaW5mb2FjdGlvbmNyZWF0b3InLFxyXG4gICAgICAgICAgICAnLi4vLi4vdXRpbGl0eS90ZWFtbWFuYWdlbWVudC9oZWxwZXJzL2hlbHBleGFtaW5lcnNkYXRhaGVscGVyJyxcclxuICAgICAgICAgICAgJy4uLy4uL3N0b3Jlcy90ZWFtbWFuYWdlbWVudC93YXJuaW5nbWVzc2FnZXN0b3JlJyxcclxuICAgICAgICAgICAgJy4uLy4uL3V0aWxpdHkvdGVhbW1hbmFnZW1lbnQvaGVscGVycy93YXJuaW5nbWVzc2FnZW5hdmlnYXRpb25oZWxwZXInLFxyXG4gICAgICAgICAgICAnLi4vLi4vYWN0aW9ucy9tYXJraW5naW5zdHJ1Y3Rpb25zL21hcmtpbmdpbnN0cnVjdGlvbmFjdGlvbmNyZWF0b3InXSxcclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIE1hcmtlckluZm9ybWF0aW9uUGFuZWwgPSByZXF1aXJlKCcuL21hcmtlcmluZm9ybWF0aW9uL21hcmtlcmluZm9ybWF0aW9ucGFuZWwnKTtcclxuICAgICAgICAgICAgICAgIGxvY2FsZVN0b3JlID0gcmVxdWlyZSgnLi4vLi4vc3RvcmVzL2xvY2FsZS9sb2NhbGVzdG9yZScpO1xyXG4gICAgICAgICAgICAgICAgcWlnU3RvcmUgPSByZXF1aXJlKCcuLi8uLi9zdG9yZXMvcWlnc2VsZWN0b3IvcWlnc3RvcmUnKTtcclxuICAgICAgICAgICAgICAgIGV4YW1pbmVyc3RvcmUgPSByZXF1aXJlKCcuLi8uLi9zdG9yZXMvbWFya2VyaW5mb3JtYXRpb24vZXhhbWluZXJzdG9yZScpO1xyXG4gICAgICAgICAgICAgICAgV29ya0xpc3RNZXNzYWdlID0gcmVxdWlyZSgnLi9zaGFyZWQvd29ya2xpc3RtZXNzYWdlJyk7XHJcbiAgICAgICAgICAgICAgICBDb25maXJtYXRpb25EaWFsb2cgPSByZXF1aXJlKCcuLi91dGlsaXR5L2NvbmZpcm1hdGlvbmRpYWxvZycpO1xyXG4gICAgICAgICAgICAgICAgVGFyZ2V0cyA9IHJlcXVpcmUoJy4vdGFyZ2V0c3VtbWFyeS90YXJnZXRzJyk7XHJcbiAgICAgICAgICAgICAgICBvdmVydmlld0RhdGEgPSByZXF1aXJlKCcuLi8uLi9zdG9yZXMvcWlnc2VsZWN0b3IvdHlwaW5ncy9vdmVydmlld2RhdGEnKTtcclxuICAgICAgICAgICAgICAgIHFpZ0luZm8gPSByZXF1aXJlKCcuLi8uLi9zdG9yZXMvcWlnc2VsZWN0b3IvdHlwaW5ncy9xaWdzdW1tYXJ5Jyk7XHJcbiAgICAgICAgICAgICAgICBtYXJraW5nVGFyZ2V0ID0gcmVxdWlyZSgnLi4vLi4vc3RvcmVzL3FpZ3NlbGVjdG9yL3R5cGluZ3MvbWFya2luZ3RhcmdldCcpO1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0U3VtbWFyeVN0b3JlID0gcmVxdWlyZSgnLi4vLi4vc3RvcmVzL3dvcmtsaXN0L3RhcmdldHN1bW1hcnlzdG9yZScpO1xyXG4gICAgICAgICAgICAgICAgbWFya2luZ1RhcmdldFN1bW1hcnkgPSByZXF1aXJlKCcuLi8uLi9zdG9yZXMvd29ya2xpc3QvdHlwaW5ncy9tYXJraW5ndGFyZ2V0c3VtbWFyeScpO1xyXG4gICAgICAgICAgICAgICAgV29ya0xpc3RDb250YWluZXIgPSByZXF1aXJlKCcuL3dvcmtsaXN0Y29udGFpbmVyJyk7XHJcbiAgICAgICAgICAgICAgICB3b3JrbGlzdFN0b3JlID0gcmVxdWlyZSgnLi4vLi4vc3RvcmVzL3dvcmtsaXN0L3dvcmtsaXN0c3RvcmUnKTtcclxuICAgICAgICAgICAgICAgIG1hcmtTY2hlbWVTdHJ1Y3R1cmVTdG9yZSA9IHJlcXVpcmUoJy4uLy4uL3N0b3Jlcy9tYXJrc2NoZW1lc3RydWN0dXJlL21hcmtzY2hlbWVzdHJ1Y3R1cmVzdG9yZScpO1xyXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VTdG9yZSA9IHJlcXVpcmUoJy4uLy4uL3N0b3Jlcy9yZXNwb25zZS9yZXNwb25zZXN0b3JlJyk7XHJcbiAgICAgICAgICAgICAgICB3b3JrbGlzdEFjdGlvbkNyZWF0b3IgPSByZXF1aXJlKCcuLi8uLi9hY3Rpb25zL3dvcmtsaXN0L3dvcmtsaXN0YWN0aW9uY3JlYXRvcicpO1xyXG4gICAgICAgICAgICAgICAgR2VuZXJpY0RpYWxvZyA9IHJlcXVpcmUoJy4uL3V0aWxpdHkvZ2VuZXJpY2RpYWxvZycpO1xyXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VBbGxvY2F0aW9uVmFsaWRhdGlvbkhlbHBlciA9IHJlcXVpcmUoJy4uL3V0aWxpdHkvcmVzcG9uc2VhbGxvY2F0aW9uL3Jlc3BvbnNlYWxsb2NhdGlvbnZhbGlkYXRpb25oZWxwZXInKTtcclxuICAgICAgICAgICAgICAgIHJlc3BvbnNlQWxsb2NhdGlvblZhbGlkYXRpb25QYXJhbWV0ZXIgPSByZXF1aXJlKCcuLi91dGlsaXR5L3Jlc3BvbnNlYWxsb2NhdGlvbi9yZXNwb25zZWFsbG9jYXRpb252YWxpZGF0aW9ucGFyYW1ldGVyJyk7XHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWVzID0gcmVxdWlyZSgnY2xhc3NuYW1lcycpO1xyXG4gICAgICAgICAgICAgICAgYnVzeUluZGljYXRvclN0b3JlID0gcmVxdWlyZSgnLi4vLi4vc3RvcmVzL2J1c3lpbmRpY2F0b3IvYnVzeWluZGljYXRvcnN0b3JlJyk7XHJcbiAgICAgICAgICAgICAgICBzdWJtaXRTdG9yZSA9IHJlcXVpcmUoJy4uLy4uL3N0b3Jlcy9zdWJtaXQvc3VibWl0c3RvcmUnKTtcclxuICAgICAgICAgICAgICAgIHdvcmtsaXN0Q29tcG9uZW50SGVscGVyID0gcmVxdWlyZSgnLi93b3JrbGlzdGNvbXBvbmVudGhlbHBlcicpO1xyXG4gICAgICAgICAgICAgICAgc3VibWl0QWN0aW9uQ3JlYXRvciA9IHJlcXVpcmUoJy4uLy4uL2FjdGlvbnMvc3VibWl0L3N1Ym1pdGFjdGlvbmNyZWF0b3InKTtcclxuICAgICAgICAgICAgICAgIGJ1c3lJbmRpY2F0b3JBY3Rpb25DcmVhdG9yID0gcmVxdWlyZSgnLi4vLi4vYWN0aW9ucy9idXN5aW5kaWNhdG9yL2J1c3lpbmRpY2F0b3JhY3Rpb25jcmVhdG9yJyk7XHJcbiAgICAgICAgICAgICAgICBzY3JpcHRJbWFnZURvd25sb2FkSGVscGVyID0gcmVxdWlyZSgnLi4vdXRpbGl0eS9iYWNrZ3JvdW5kd29ya2VyL3NjcmlwdGltYWdlZG93bmxvYWRoZWxwZXInKTtcclxuICAgICAgICAgICAgICAgIHNjcmlwdEFjdGlvbkNyZWF0b3IgPSByZXF1aXJlKCcuLi8uLi9hY3Rpb25zL3NjcmlwdC9zY3JpcHRhY3Rpb25jcmVhdG9yJyk7XHJcbiAgICAgICAgICAgICAgICBzY3JpcHRTdG9yZSA9IHJlcXVpcmUoJy4uLy4uL3N0b3Jlcy9zY3JpcHQvc2NyaXB0c3RvcmUnKTtcclxuICAgICAgICAgICAgICAgIHNjcmlwdEltYWdlRG93bmxvYWRlciA9IHJlcXVpcmUoJy4uLy4uL3V0aWxpdHkvYmFja2dyb3VuZHdvcmtlcnMvc2NyaXB0aW1hZ2Vkb3dubG9hZGVyL3NjcmlwdGltYWdlZG93bmxvYWRlcicpO1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0SGVscGVyID0gcmVxdWlyZSgnLi4vLi4vdXRpbGl0eS90YXJnZXQvdGFyZ2V0aGVscGVyJyk7XHJcbiAgICAgICAgICAgICAgICB1c2VySW5mb1N0b3JlID0gcmVxdWlyZSgnLi4vLi4vc3RvcmVzL3VzZXJpbmZvL3VzZXJpbmZvc3RvcmUnKTtcclxuICAgICAgICAgICAgICAgIGJhY2tncm91bmRQdWxzZUhlbHBlciA9IHJlcXVpcmUoJy4uLy4uL3V0aWxpdHkvYmFja2dyb3VuZHB1bHNlL2JhY2tncm91bmRwdWxzZWhlbHBlcicpO1xyXG4gICAgICAgICAgICAgICAgRm9vdGVyID0gcmVxdWlyZSgnLi4vZm9vdGVyJyk7XHJcbiAgICAgICAgICAgICAgICBnYUhlbHBlciA9IHJlcXVpcmUoJy4uLy4uL3V0aWxpdHkvZ29vZ2xlYW5hbHl0aWNzL2dhaGVscGVyJyk7XHJcbiAgICAgICAgICAgICAgICBzdGFtcEFjdGlvbkNyZWF0b3IgPSByZXF1aXJlKCcuLi8uLi9hY3Rpb25zL3N0YW1wL3N0YW1wYWN0aW9uY3JlYXRvcicpO1xyXG4gICAgICAgICAgICAgICAgY29uZmlndXJhYmxlQ2hhcmFjdGVyaXN0aWNzU3RvcmUgPSByZXF1aXJlKCcuLi8uLi9zdG9yZXMvY29uZmlndXJhYmxlY2hhcmFjdGVyaXN0aWNzL2NvbmZpZ3VyYWJsZWNoYXJhY3RlcmlzdGljc3N0b3JlJyk7XHJcbiAgICAgICAgICAgICAgICBjb25maWd1cmFibGVDaGFyYWN0ZXJpc3RpY3NBY3Rpb25DcmVhdG9yID1cclxuICAgICAgICAgICAgICAgICAgICByZXF1aXJlKCcuLi8uLi9hY3Rpb25zL2NvbmZpZ3VyYWJsZWNoYXJhY3RlcmlzdGljcy9jb25maWd1cmFibGVjaGFyYWN0ZXJpc3RpY3NhY3Rpb25jcmVhdG9yJyk7XHJcbiAgICAgICAgICAgICAgICBxaWdBY3Rpb25DcmVhdG9yID0gcmVxdWlyZSgnLi4vLi4vYWN0aW9ucy9xaWdzZWxlY3Rvci9xaWdzZWxlY3RvcmFjdGlvbmNyZWF0b3InKTtcclxuICAgICAgICAgICAgICAgIHN0YW1wU3RvcmUgPSByZXF1aXJlKCcuLi8uLi9zdG9yZXMvc3RhbXAvc3RhbXBzdG9yZScpO1xyXG4gICAgICAgICAgICAgICAgZXhjZXB0aW9uQWN0aW9uQ3JlYXRvciA9IHJlcXVpcmUoJy4uLy4uL2FjdGlvbnMvZXhjZXB0aW9uL2V4Y2VwdGlvbmFjdGlvbmNyZWF0b3InKTtcclxuICAgICAgICAgICAgICAgIGV4Y2VwdGlvblN0b3JlID0gcmVxdWlyZSgnLi4vLi4vc3RvcmVzL2V4Y2VwdGlvbi9leGNlcHRpb25zdG9yZScpO1xyXG4gICAgICAgICAgICAgICAgTWVzc2FnZVBvcHVwID0gcmVxdWlyZSgnLi4vbWVzc2FnZS9tZXNzYWdlcG9wdXAnKTtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VIZWxwZXIgPSByZXF1aXJlKCcuLi91dGlsaXR5L21lc3NhZ2UvbWVzc2FnZWhlbHBlcicpO1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnaW5nQWN0aW9uQ3JlYXRvciA9IHJlcXVpcmUoJy4uLy4uL2FjdGlvbnMvbWVzc2FnaW5nL21lc3NhZ2luZ2FjdGlvbmNyZWF0b3InKTtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VTdG9yZSA9IHJlcXVpcmUoJy4uLy4uL3N0b3Jlcy9tZXNzYWdlL21lc3NhZ2VzdG9yZScpO1xyXG4gICAgICAgICAgICAgICAgTWFya2luZ0NoZWNrUG9wdXAgPSByZXF1aXJlKCcuL21hcmtlcmluZm9ybWF0aW9uL21hcmtpbmdjaGVja3BvcHVwJyk7XHJcbiAgICAgICAgICAgICAgICBzdHJpbmdGb3JtYXRIZWxwZXIgPSByZXF1aXJlKCcuLi8uLi91dGlsaXR5L3N0cmluZ2Zvcm1hdC9zdHJpbmdmb3JtYXRoZWxwZXInKTtcclxuICAgICAgICAgICAgICAgIHJlc3BvbnNlU2VhcmNoSGVscGVyID0gcmVxdWlyZSgnLi4vLi4vdXRpbGl0eS9yZXNwb25zZXNlYXJjaC9yZXNwb25zZXNlYXJjaGhlbHBlcicpO1xyXG4gICAgICAgICAgICAgICAgaHRtbFV0aWxpdGllcyA9IHJlcXVpcmUoJy4uLy4uL3V0aWxpdHkvZ2VuZXJpYy9odG1sdXRpbGl0aWVzJyk7XHJcbiAgICAgICAgICAgICAgICBsb2FkQ29udGFpbmVyQWN0aW9uQ3JlYXRvciA9IHJlcXVpcmUoJy4uLy4uL2FjdGlvbnMvbmF2aWdhdGlvbi9sb2FkY29udGFpbmVyYWN0aW9uY3JlYXRvcicpO1xyXG4gICAgICAgICAgICAgICAgb3BlcmF0aW9uTW9kZUhlbHBlciA9IHJlcXVpcmUoJy4uL3V0aWxpdHkvdXNlcmRldGFpbHMvdXNlcmluZm8vb3BlcmF0aW9ubW9kZWhlbHBlcicpO1xyXG4gICAgICAgICAgICAgICAgTWFya0NoZWNrRXhhbWluZXJzID0gcmVxdWlyZSgnLi9tYXJrY2hlY2svbWFya2NoZWNrZXhhbWluZXJzJyk7XHJcbiAgICAgICAgICAgICAgICBtYXJraW5nQ2hlY2tBY3Rpb25DcmVhdG9yID0gcmVxdWlyZSgnLi4vLi4vYWN0aW9ucy9tYXJraW5nY2hlY2svbWFya2luZ2NoZWNrYWN0aW9uY3JlYXRvcicpO1xyXG4gICAgICAgICAgICAgICAgdXNlckluZm9BY3Rpb25DcmVhdG9yID0gcmVxdWlyZSgnLi4vLi4vYWN0aW9ucy91c2VyaW5mby91c2VyaW5mb2FjdGlvbmNyZWF0b3InKTtcclxuICAgICAgICAgICAgICAgIGhlbHBFeGFtaW5lcnNEYXRhSGVscGVyID0gcmVxdWlyZSgnLi4vLi4vdXRpbGl0eS90ZWFtbWFuYWdlbWVudC9oZWxwZXJzL2hlbHBleGFtaW5lcnNkYXRhaGVscGVyJyk7XHJcbiAgICAgICAgICAgICAgICB3YXJuaW5nTWVzc2FnZVN0b3JlID0gcmVxdWlyZSgnLi4vLi4vc3RvcmVzL3RlYW1tYW5hZ2VtZW50L3dhcm5pbmdtZXNzYWdlc3RvcmUnKTtcclxuICAgICAgICAgICAgICAgIHdhcm5pbmdNZXNzYWdlTmF2aWdhdGlvbkhlbHBlciA9IHJlcXVpcmUoJy4uLy4uL3V0aWxpdHkvdGVhbW1hbmFnZW1lbnQvaGVscGVycy93YXJuaW5nbWVzc2FnZW5hdmlnYXRpb25oZWxwZXInKTtcclxuICAgICAgICAgICAgICAgIG1hcmtpbmdJbnN0cnVjdGlvbkFjdGlvbkNyZWF0b3IgPSByZXF1aXJlKCcuLi8uLi9hY3Rpb25zL21hcmtpbmdpbnN0cnVjdGlvbnMvbWFya2luZ2luc3RydWN0aW9uYWN0aW9uY3JlYXRvcicpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuX3dhcm5pbmdNZXNzYWdlTmF2aWdhdGlvbkhlbHBlciA9IG5ldyB3YXJuaW5nTWVzc2FnZU5hdmlnYXRpb25IZWxwZXIoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBlbnN1cmluZyB0aGF0IGFsbCB0aGUgZGVwZW5kZW5jaWVzIGFyZSBsb2FkZWQgYXQgdGhlIGJlZ2luaW5nXHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvYWREZXBlbmRlbmNpZXNGb3JUZWFtTWFuYWdlbWVudCgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8qIExvYWQgdGhlIHVucmVhZCBtYW5kYXRvcnkgbWVzc2FnZSBzdGF0dXMgZm9yIGRpc3BsYXlpbmcgbWFuZGF0b3J5IG1lc3NhZ2VzICovXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdpbmdBY3Rpb25DcmVhdG9yLmdldFVucmVhZE1hbmRhdG9yeU1lc3NhZ2VTdGF0dXMoZW51bXMuVHJpZ2dlclBvaW50LldvcmtsaXN0KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBtb2R1bGVzTG9hZGVkOiB0cnVlLCBzZWxlY3RlZExhbmd1YWdlOiBsb2NhbGVTdG9yZS5pbnN0YW5jZSA/IGxvY2FsZVN0b3JlLmluc3RhbmNlLkxvY2FsZSA6ICcnIH0pO1xyXG5cclxuICAgICAgICAgICAgfS5iaW5kKHRoaXMpKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqICBUaGlzIHdpbGwgbG9hZCB0aGUgZGVwZW5kZW5jaWVzIGZvciB0ZWFtIG1hbmFnZW1lbnQgZHluYW1pY2FsbHkgZHVyaW5nIGNvbXBvbmVudCBtb3VudC5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBsb2FkRGVwZW5kZW5jaWVzRm9yVGVhbU1hbmFnZW1lbnQoKSB7XHJcbiAgICAgICAgcmVxdWlyZS5lbnN1cmUoW1xyXG4gICAgICAgICAgICAnLi4vLi4vYWN0aW9ucy90ZWFtbWFuYWdlbWVudC90ZWFtbWFuYWdlbWVudGFjdGlvbmNyZWF0b3InLFxyXG4gICAgICAgICAgICAnLi9tYXJrZXJpbmZvcm1hdGlvbi9leGFtaW5lcnN0YXRlY2hhbmdlcG9wdXAnXSxcclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHRlYW1NYW5hZ2VtZW50QWN0aW9uQ3JlYXRvciA9IHJlcXVpcmUoJy4uLy4uL2FjdGlvbnMvdGVhbW1hbmFnZW1lbnQvdGVhbW1hbmFnZW1lbnRhY3Rpb25jcmVhdG9yJyk7XHJcbiAgICAgICAgICAgICAgICBFeGFtaW5lclN0YXRlQ2hhbmdlUG9wdXAgPSByZXF1aXJlKCcuL21hcmtlcmluZm9ybWF0aW9uL2V4YW1pbmVyc3RhdGVjaGFuZ2Vwb3B1cCcpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyc0ZvclRlYW1NYW5hZ2VtZW50KCk7XHJcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXRzIGNhbGxlZCBvbiByZXRyaWV2YWwgb2YgY2FuZGlkYXRlIHJlc3BvbnNlIG1ldGFkYXRhIHdoaWNoIGFpZHMgZm9yIHRoZSBTY3JpcHQgYmFja2dyb3VuZCBkb3dubG9hZFxyXG4gICAgICogTm8gbmVlZCB0byBmZXRjaCB0aGUgU3VwcHJlc3NlZCBwYWdlc1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIG9uQ2FuZGlkYXRlUmVzcG9uc2VNZXRhZGF0YVJldHJpZXZlZCA9IChpc0F1dG9SZWZyZXNoOiBib29sZWFuKTogdm9pZCA9PiB7XHJcbiAgICAgICAgLy8gVE8gRE86IFdlIGhhdmUgdG8gcmVtb3ZlIHRoZSBpc1RlYW1NYW5hZ2VtZW50TW9kZSBjaGVjayB3aGlsZSBkb2luZyB0aGUgcmVzcG9uc2VzIG9wZW5pbmcgZnJvbSB0ZWFtIG1hbmFnZW1lbnQgc3RvcnkuXHJcbiAgICAgICAgaWYgKCFyZXNwb25zZVN0b3JlLmluc3RhbmNlLmlzU2VhcmNoUmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgaWYgKCgoaXNBdXRvUmVmcmVzaCAmJiBzY3JpcHRTdG9yZS5pbnN0YW5jZS5maWx0ZXJlZENhbmRpZGF0ZVJlc3BvbnNlTWV0YWRhdGEuc2NyaXB0SW1hZ2VMaXN0LnNpemUgPiAwKVxyXG4gICAgICAgICAgICAgICAgfHwgKCFpc0F1dG9SZWZyZXNoKSkgJiYgIW1hcmtlck9wZXJhdGlvbk1vZGVGYWN0b3J5Lm9wZXJhdGlvbk1vZGUuaXNUZWFtTWFuYWdlbWVudE1vZGUpIHtcclxuICAgICAgICAgICAgICAgIC8vIENoZWNrcyBpZiB0aGUgYmFja2dyb3VuZCBkb3dubG9hZCBvZiBpbWFnZXMgY2FuIGJlIGluaXRpYXRlZCBiYXNlZCBvbiB0aGUgY3VycmVudFxyXG4gICAgICAgICAgICAgICAgLy9zZWxlY3RlZCB3b3JrbGlzdCB0eXBlIGFuZCByZXNwb25zZSBtb2RlXHJcbiAgICAgICAgICAgICAgICBpZiAoc2NyaXB0SW1hZ2VEb3dubG9hZEhlbHBlci5jYW5Jbml0aWF0ZVNjcmlwdEltYWdlQmFja2dyb3VuZERvd25sb2FkKHRoaXMud29ya2xpc3RUeXBlLCB0aGlzLnJlc3BvbnNlTW9kZSkpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gUG9wdWxhdGluZyB0aGUgcmVxdWVzdCBvYmplY3RzIGZvciBwZXJmb3JtaW5nIGJhY2tncm91bmQgZG93bmxvYWQgb2Ygc2NyaXB0IGltYWdlc1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBzY3JpcHRJbWFnZURvd25sb2FkUmVxdWVzdHMgPSBzY3JpcHRJbWFnZURvd25sb2FkSGVscGVyLnBvcHVsYXRlQmFja2dyb3VuZFNjcmlwdEltYWdlRG93bmxvYWRSZXF1ZXN0cyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNBdXRvUmVmcmVzaCA/IHNjcmlwdFN0b3JlLmluc3RhbmNlLmZpbHRlcmVkQ2FuZGlkYXRlUmVzcG9uc2VNZXRhZGF0YSA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JpcHRTdG9yZS5pbnN0YW5jZS5nZXRDYW5kaWRhdGVSZXNwb25zZU1ldGFkYXRhXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSW5pdGlhdGluZyB0aGUgYmFja2dyb3VuZCBkb3dubG9hZCBvZiBpbWFnZXMgYmFzZWQgb24gdGhlIGNvbmZpZ1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb25maWcuYmFja2dyb3VuZHdvcmtlcnJlZnJlc2hjb25maWcuQkFDS0dST1VORF9JTUFHRVNfRE9XTkxPQURfRU5BQkxFRCA9PT0gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAmJiAhaHRtbHZpZXdlcmhlbHBlci5pc0h0bWxDb21wb25lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IHNjcmlwdEltYWdlRG93bmxvYWRlcigpLmluaXRpYXRlQmFja2dyb3VuZEltYWdlRG93bmxvYWQoc2NyaXB0SW1hZ2VEb3dubG9hZFJlcXVlc3RzKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXNwb25zZVNlYXJjaEhlbHBlci5vcGVuUmVzcG9uc2UoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhpcyBtZXRob2Qgd2lsbCBiZSBjYWxsZWQgaWYgY291bnQgb2YgcmVzcG9uc2VzIGluIHRoZVxyXG4gICAgICogV29ya2xpc3QgaXMgbm90IGVxdWFsIHRvIHRoZSBjb3VudCBzaG93aW5nIGluIFRhYiBoZWFkZXIgYW5kIExpdmUgUHJvZ3Jlc3Mgc3RhdHVzXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgdXBkYXRlUmVzcG9uc2VDb3VudCA9ICgpOiB2b2lkID0+IHtcclxuICAgICAgICB0aGlzLm1hcmtpbmdUYXJnZXRzU3VtbWFyeSA9XHJcbiAgICAgICAgICAgIHdvcmtsaXN0U3RvcmUuaW5zdGFuY2UuZ2V0RXhhbWluZXJNYXJraW5nVGFyZ2V0UHJvZ3Jlc3NcclxuICAgICAgICAgICAgICAgIChtYXJrZXJPcGVyYXRpb25Nb2RlRmFjdG9yeS5vcGVyYXRpb25Nb2RlLmlzU2VsZWN0ZWRFeGFtaW5lclBFT3JBUEUpO1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyB0YXJnZXRSZW5kZXJlZE9uOiBEYXRlLm5vdygpIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldCBidXN5IGluZGljYXRvciB3aGVuIGEgUUlHIGlzIHNlbGVjdGVkXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgb25RaWdTZWxlY3Rpb24gPSAoaXNEYXRhRnJvbVNlYXJjaDogYm9vbGVhbiA9IGZhbHNlLFxyXG4gICAgICAgIGlzRGF0YUZyb21IaXN0b3J5OiBib29sZWFuID0gZmFsc2UpOiB2b2lkID0+IHtcclxuICAgICAgICB0aGlzLmlzUmVmcmVzaGluZyA9IHRydWU7XHJcbiAgICAgICAgaWYgKGlzRGF0YUZyb21IaXN0b3J5KSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmVzcG9uc2VTZWFyY2hIZWxwZXIub3BlblFJR0RldGFpbHMoXHJcbiAgICAgICAgICAgIHFpZ1N0b3JlLmluc3RhbmNlLnNlbGVjdGVkUUlHRm9yTWFya2VyT3BlcmF0aW9uLnF1ZXN0aW9uUGFwZXJQYXJ0SWQsXHJcbiAgICAgICAgICAgIHFpZ1N0b3JlLmluc3RhbmNlLnNlbGVjdGVkUUlHRm9yTWFya2VyT3BlcmF0aW9uLm1hcmtTY2hlbWVHcm91cElkLFxyXG4gICAgICAgICAgICBxaWdTdG9yZS5pbnN0YW5jZS5zZWxlY3RlZFFJR0Zvck1hcmtlck9wZXJhdGlvbi5leGFtaW5lclJvbGVJZCxcclxuICAgICAgICAgICAgZGF0YVNlcnZpY2VIZWxwZXIuY2FuVXNlQ2FjaGUoKSxcclxuICAgICAgICAgICAgZXhhbWluZXJzdG9yZS5pbnN0YW5jZS5leGFtaW5lckFwcHJvdmFsU3RhdHVzKHFpZ1N0b3JlLmluc3RhbmNlLnNlbGVjdGVkUUlHRm9yTWFya2VyT3BlcmF0aW9uLmV4YW1pbmVyUm9sZUlkKSxcclxuICAgICAgICAgICAgcWlnU3RvcmUuaW5zdGFuY2Uuc2VsZWN0ZWRRSUdGb3JNYXJrZXJPcGVyYXRpb24ubWFya2luZ01ldGhvZCxcclxuICAgICAgICAgICAgZmFsc2UsXHJcbiAgICAgICAgICAgIHFpZ1N0b3JlLmluc3RhbmNlLnNlbGVjdGVkUUlHRm9yTWFya2VyT3BlcmF0aW9uLmlzRWxlY3Ryb25pY1N0YW5kYXJkaXNhdGlvblRlYW1NZW1iZXIpO1xyXG5cclxuICAgICAgICB0aGlzLnNldFN0YXRlKHsgcmVuZGVyZWRPbjogRGF0ZS5ub3coKSB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDYWxsYmFjayBmdW5jdGlvbiBmb3IgbWVzc2FnZSBwYW5lbCBjbG9zZVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIG9uQ2xvc2VNZXNzYWdlUG9wdXAgPSAobmF2aWdhdGVUbzogZW51bXMuU2F2ZUFuZE5hdmlnYXRlKSA9PiB7XHJcbiAgICAgICAgdGhpcy5pc01lc3NhZ2VQb3B1cFZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnJlc2V0dmFyaWFibGVzKCk7XHJcbiAgICAgICAgLyogRGVmZWN0OjI0NjA4IC0gc2V0aW5nIGZvY3VzIGJhY2sgdG8gc3ViamVjdCBvbiBtZXNzYWdlIGNsb3NlIGZvciBmaXhpbmcgY3Vyc29yIGFuZCBvbnNjcmVlbiBrZXlib2FyZCBkaXNwbGF5aW5nIGlzc3VlIGluIGlwYWQgKi9cclxuICAgICAgICBpZiAoaHRtbFV0aWxpdGllcy5pc0lQYWREZXZpY2UpIHtcclxuICAgICAgICAgICAgaHRtbFV0aWxpdGllcy5zZXRGb2N1c1RvRWxlbWVudCgnbWVzc2FnZS1zdWJqZWN0Jyk7XHJcbiAgICAgICAgICAgIGh0bWxVdGlsaXRpZXMuYmx1ckVsZW1lbnQoJ21lc3NhZ2Utc3ViamVjdCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL1dlIG5lZWQgdG8gY2FsbCB0aGUgY2xvc2UgYWN0aW9uIHdoZW4gbmF2aWdhdGluZyB0byBpbmJveCBhbmQgd2hlbiB0aGUgY2xvc2UgYnV0dG9uIGlzIGNsaWNrZWRcclxuICAgICAgICAvLyBpbiBvdGhlciBzY2VuYXJpb3MgdGhlIGNsb3NlIGFjdGlvbiBpcyBjYWxsZWQgZnJvbSBtZXNzYWdlYmFzZVxyXG4gICAgICAgIGlmICghbmF2aWdhdGVUbyB8fCBuYXZpZ2F0ZVRvID09PSBlbnVtcy5TYXZlQW5kTmF2aWdhdGUudG9JbmJveE1lc3NhZ2VQYWdlKSB7XHJcbiAgICAgICAgICAgIG1lc3NhZ2luZ0FjdGlvbkNyZWF0b3IubWVzc2FnZUFjdGlvbihlbnVtcy5NZXNzYWdlVmlld0FjdGlvbi5DbG9zZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyByZW5kZXJlZE9uOiBEYXRlLm5vdygpIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEV2ZW50IGZpcmVkIG9uIGNsaWNraW5nIHNlbmQgbWVzc2FnZS5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBvblNlbmRNZXNzYWdlQ2xpY2tlZCA9ICgpID0+IHtcclxuICAgICAgICAvLyBPbiBjbGlja2luZyBTZW5kIG1lc3NhZ2UgYnV0dG9uIGZyb20gIGluZm9ybWF0aW9uIE1hcmtlckluZm9ybWF0aW9uUGFuZWxcclxuICAgICAgICAvLyBQbGVhc2UgY2hlY2sgd2hldGhlciBhcHBsaWNhdGlvbiBpcyBvbmxpbmUuXHJcbiAgICAgICAgLy8gSWYgeWVzLCBwcm9jZWVkIHdpdGggY29tcG9zaW5nIE1lc3NhZ2Ugb3RoZXJ3aXNlIGludGVycnVwdCBhY3Rpb24uXHJcbiAgICAgICAgaWYgKGFwcGxpY2F0aW9uU3RvcmUuaW5zdGFuY2UuaXNPbmxpbmUpIHtcclxuICAgICAgICAgICAgaWYgKCFtYXJrZXJPcGVyYXRpb25Nb2RlRmFjdG9yeS5vcGVyYXRpb25Nb2RlLmlzVGVhbU1hbmFnZW1lbnRNb2RlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmlzTWVzc2FnZVBvcHVwVmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgcmVuZGVyZWRPbjogRGF0ZS5ub3coKSB9KTtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2luZ0FjdGlvbkNyZWF0b3IubWVzc2FnZUFjdGlvbihlbnVtcy5NZXNzYWdlVmlld0FjdGlvbi5PcGVuLCBlbnVtcy5NZXNzYWdlVHlwZS5Xb3JrbGlzdENvbXBvc2UpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnaW5nQWN0aW9uQ3JlYXRvci5tZXNzYWdlQWN0aW9uKGVudW1zLk1lc3NhZ2VWaWV3QWN0aW9uLk9wZW4sIGVudW1zLk1lc3NhZ2VUeXBlLlRlYW1Db21wb3NlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGFwcGxpY2F0aW9uQWN0aW9uQ3JlYXRvci5jaGVja0FjdGlvbkludGVycnVwdGVkKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlc2V0IHByaXZhdGUgdmFyaWFibGVzXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgcmVzZXR2YXJpYWJsZXMgPSAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5zdWJqZWN0ID0gJyc7XHJcbiAgICAgICAgdGhpcy5wcmlvcml0eURyb3Bkb3duU2VsZWN0ZWRJdGVtID0gZW51bXMuTWVzc2FnZVByaW9yaXR5LlN0YW5kYXJkO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRRaWdJdGVtSWQgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5tZXNzYWdlQm9keSA9ICcnO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIE1ldGhvZCB0byBzaG93IGV4YW1pbmVyIHN0YXRlIGNoYW5nZSBwb3B1cC5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBzaG93RXhhbWluZXJTdGF0ZUNoYW5nZVBvcHVwID0gKCkgPT4ge1xyXG4gICAgICAgIC8vIENoZWNrIG1lc3NhZ2UgaXMgYWN0aXZlLCBJZiBzbyBjaGVjayBmb3IgZGlydHkgY29udGVudCBlbHNlIHByb2NlZWRcclxuICAgICAgICBpZiAoIW1lc3NhZ2VTdG9yZS5pbnN0YW5jZS5pc01lc3NhZ2VQYW5lbEFjdGl2ZSkge1xyXG4gICAgICAgICAgICB0ZWFtTWFuYWdlbWVudEFjdGlvbkNyZWF0b3IuZG9WaXNpYmxlQ2hhbmdlU3RhdHVzUG9wdXAodHJ1ZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbGV0IG1lc3NhZ2VOYXZpZ2F0aW9uQXJndW1lbnRzOiBNZXNzYWdlTmF2aWdhdGlvbkFyZ3VtZW50cyA9IHtcclxuICAgICAgICAgICAgICAgIHJlc3BvbnNlSWQ6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgIGNhbk5hdmlnYXRlOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIG5hdmlnYXRlVG86IGVudW1zLk1lc3NhZ2VOYXZpZ2F0aW9uLkNoYW5nZVN0YXR1cyxcclxuICAgICAgICAgICAgICAgIG5hdmlnYXRpb25Db25maXJtZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgaGFzTWVzc2FnZUNvbnRhaW5zRGlydHlWYWx1ZTogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgdHJpZ2dlclBvaW50OiBlbnVtcy5UcmlnZ2VyUG9pbnQuTm9uZVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBtZXNzYWdpbmdBY3Rpb25DcmVhdG9yLmNhbk1lc3NhZ2VOYXZpZ2F0ZShtZXNzYWdlTmF2aWdhdGlvbkFyZ3VtZW50cyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEhhbmRsZXMgdGhlIGFjdGlvbiBldmVudCBvbiBleGFtaW5lciBjaGFuZ2Ugc3RhdHVzIHJlY2VpdmVkLlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGV4YW1pbmVyQ2hhbmdlU3RhdHVzUmVjZWl2ZWQgPSAoKSA9PiB7XHJcbiAgICAgICAgbGV0IGV4YW1pbmVyQ2hhbmdlU3RhdHVzID0gdGVhbU1hbmFnZW1lbnRTdG9yZS5pbnN0YW5jZS5leGFtaW5lclN0YXR1c0RldGFpbHM7XHJcbiAgICAgICAgaWYgKGV4YW1pbmVyQ2hhbmdlU3RhdHVzKSB7XHJcbiAgICAgICAgICAgIGlmIChleGFtaW5lckNoYW5nZVN0YXR1cy5hcHByb3ZhbE91dGNvbWUgPT09IGVudW1zLkFwcHJvdmFsT3V0Y29tZS5TdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgcmVuZGVyZWRPbjogRGF0ZS5ub3coKSB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gTG9nIGV4YW1pbmVyIHN0YXR1cyBjaGFuZ2UgZGF0YS5cclxuICAgICAgICBuZXcgdGVhbU1hbmFnZW1lbnRBdWRpdEhlbHBlcigpLmxvZ1N1Ym9yZGluYXRlU3RhdHVzQ2hhbmdlKGxvZ2dlckNvbnN0YW50cy5URUFNTUFOQUdFTUVOVF9SRUFTT05fU1VQRVJWSVNPUl9BQ1RJT04sXHJcbiAgICAgICAgICAgIGxvZ2dlckNvbnN0YW50cy5URUFNTUFOQUdFTUVOVF9UWVBFX1NVQk9PUkRJTkFURVNfU1RBVFVTX0NIQU5HRURfQUNUSU9OLFxyXG4gICAgICAgICAgICBleGFtaW5lckNoYW5nZVN0YXR1cyk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhpcyBtZXRob2Qgd2lsbCBjYWxsIG9uIG1vdXNlIGhvdmVyIGFuZCBsZWF2ZSBmb3Igc2V0dGluZyBob3ZlcmVkIGNsYXNzLlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIG9uTW91c2VIb3Zlck9yTW91c2VMZWF2ZSA9IChpc01vdXNlSG92ZXI6IGJvb2xlYW4pID0+IHtcclxuICAgICAgICAvLyBjb25kaXRpb24gdG8gcmUtcmVuZGVyIG9ubHkgaWYgY2hhbmdlIHByZXNlbnQuIGF2b2lkIHJlbmRlcnMgb24gZXZlcnkgbW91c2UgbW92ZS5cclxuICAgICAgICBpZiAodGhpcy5pc01vdXNlSG92ZXJlZCAhPT0gaXNNb3VzZUhvdmVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaXNNb3VzZUhvdmVyZWQgPSBpc01vdXNlSG92ZXI7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyByZW5kZXJlZE9uOiBEYXRlLm5vdygpIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIYW5kbGVzIHRoZSBhY3Rpb24gZXZlbnQgb24gc2Vjb25kIHN0YW5kYXJkaXNhdGlvbiByZWNlaXZlZC5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBzZWNvbmRTdGFuZGFyZGlzYXRpb25SZWNlaXZlZCA9ICgpID0+IHtcclxuICAgICAgICBsZXQgc2Vjb25kU3RhbmRhcmRpc2F0aW9uUmV0dXJuID0gdGVhbU1hbmFnZW1lbnRTdG9yZS5pbnN0YW5jZS5zZWNvbmRTdGFuZGFyZGlzYXRpb25SZXR1cm47XHJcbiAgICAgICAgaWYgKHNlY29uZFN0YW5kYXJkaXNhdGlvblJldHVybikge1xyXG4gICAgICAgICAgICBxaWdBY3Rpb25DcmVhdG9yLmdldFFJR1NlbGVjdG9yRGF0YShvcGVyYXRpb25Nb2RlSGVscGVyLm1hcmtTY2hlbWVHcm91cElkKTtcclxuICAgICAgICAgICAgdGhpcy5pc1NlY29uZFN0YW5kYXJkaXNhdGlvblRhcmdldFJlY2VpdmVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgd29ya2xpc3RBY3Rpb25DcmVhdG9yLmdldFdvcmtsaXN0TWFya2VyUHJvZ3Jlc3NEYXRhKHFpZ1N0b3JlLmluc3RhbmNlLnNlbGVjdGVkUUlHRm9yTWFya2VyT3BlcmF0aW9uLmV4YW1pbmVyUm9sZUlkLFxyXG4gICAgICAgICAgICAgICAgcWlnU3RvcmUuaW5zdGFuY2Uuc2VsZWN0ZWRRSUdGb3JNYXJrZXJPcGVyYXRpb24ubWFya1NjaGVtZUdyb3VwSWQsXHJcbiAgICAgICAgICAgICAgICBxaWdTdG9yZS5pbnN0YW5jZS5zZWxlY3RlZFFJR0Zvck1hcmtlck9wZXJhdGlvbi5pc0VsZWN0cm9uaWNTdGFuZGFyZGlzYXRpb25UZWFtTWVtYmVyKTtcclxuXHJcbiAgICAgICAgICAgIC8vIExvZyBleGFtaW5lciBzdGF0dXMgY2hhbmdlIGRhdGEuXHJcbiAgICAgICAgICAgIG5ldyB0ZWFtTWFuYWdlbWVudEF1ZGl0SGVscGVyKCkubG9nU3Vib3JkaW5hdGVTdGF0dXNDaGFuZ2UobG9nZ2VyQ29uc3RhbnRzLlRFQU1NQU5BR0VNRU5UX1JFQVNPTl9TVVBFUlZJU09SX0FDVElPTixcclxuICAgICAgICAgICAgICAgIGxvZ2dlckNvbnN0YW50cy5URUFNTUFOQUdFTUVOVF9UWVBFX1NFQ09ORFNUQU5EQVJESVNBVElPTixcclxuICAgICAgICAgICAgICAgIHNlY29uZFN0YW5kYXJkaXNhdGlvblJldHVybik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFNFUCBBY3Rpb24gcmV0dXJuIGNhbGxiYWNrLlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIG9uQXBwcm92YWxNYW5hZ2VtZW50QWN0aW9uRXhlY3V0ZWQgPSAoYWN0aW9uSWRlbnRpZmllcjogbnVtYmVyLCBzZXBBcHByb3ZhbE1hbmFnZW1lbnRBY3Rpb25SZXN1bHRzOlxyXG4gICAgICAgIEltbXV0YWJsZS5MaXN0PERvU0VQQXBwcm92YWxNYW5hZ2VtZW50QWN0aW9uUmVzdWx0PikgPT4ge1xyXG4gICAgICAgIGxldCBzZXBBcHByb3ZhbE1hbmFnZW1lbnRBY3Rpb25SZXN1bHQ6IERvU0VQQXBwcm92YWxNYW5hZ2VtZW50QWN0aW9uUmVzdWx0O1xyXG4gICAgICAgIHNlcEFwcHJvdmFsTWFuYWdlbWVudEFjdGlvblJlc3VsdCA9IHNlcEFwcHJvdmFsTWFuYWdlbWVudEFjdGlvblJlc3VsdHMuZmlyc3QoKTtcclxuICAgICAgICBpZiAoYWN0aW9uSWRlbnRpZmllciAhPT0gZW51bXMuU0VQQWN0aW9uLlZpZXdSZXNwb25zZSAmJlxyXG4gICAgICAgICAgICBhY3Rpb25JZGVudGlmaWVyICE9PSBlbnVtcy5TRVBBY3Rpb24uU2VuZE1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgbmF2aWdhdGlvbkhlbHBlci5sb2FkVGVhbU1hbmFnZW1lbnQoKTtcclxuXHJcbiAgICAgICAgICAgIC8vIExvZyBleGFtaW5lciBzZXQgc2VwLlxyXG4gICAgICAgICAgICBuZXcgdGVhbU1hbmFnZW1lbnRBdWRpdEhlbHBlcigpLmxvZ1N1Ym9yZGluYXRlU3RhdHVzQ2hhbmdlKGxvZ2dlckNvbnN0YW50cy5URUFNTUFOQUdFTUVOVF9SRUFTT05fU1VQRVJWSVNPUl9BQ1RJT04sXHJcbiAgICAgICAgICAgICAgICBsb2dnZXJDb25zdGFudHMuVEVBTU1BTkFHRU1FTlRfVFlQRV9TRVBfTUFOQUdFTUVOVCxcclxuICAgICAgICAgICAgICAgIHNlcEFwcHJvdmFsTWFuYWdlbWVudEFjdGlvblJlc3VsdCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIE1ldGhvZCBjYWxsZWQgd2hlbiB0aGUgbWVzc2FnZSBuYXZpZ2F0aW9uIGlzIGNvbmZpcm1lZCBieSB0aGUgdXNlclxyXG4gICAgICogQHBhcmFtIG1lc3NhZ2VOYXZpZ2F0aW9uQXJndW1lbnRzXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgb25NZXNzYWdlTmF2aWdhdGlvbiA9IChtZXNzYWdlTmF2aWdhdGlvbkFyZ3VtZW50czogTWVzc2FnZU5hdmlnYXRpb25Bcmd1bWVudHMpID0+IHtcclxuICAgICAgICBpZiAobWVzc2FnZU5hdmlnYXRpb25Bcmd1bWVudHMuY2FuTmF2aWdhdGUgJiYgbWVzc2FnZU5hdmlnYXRpb25Bcmd1bWVudHMubmF2aWdhdGVUbyA9PT0gZW51bXMuTWVzc2FnZU5hdmlnYXRpb24uQ2hhbmdlU3RhdHVzKSB7XHJcbiAgICAgICAgICAgIHRlYW1NYW5hZ2VtZW50QWN0aW9uQ3JlYXRvci5kb1Zpc2libGVDaGFuZ2VTdGF0dXNQb3B1cCh0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogSW4gaGVscCBleGFtaW5lcnMgdmlldyB0aGUgbWVzc2FnZSBsaW5rIGhhcyB0byBiZSBzaG93biBiYXNlZCBvbiB0aGUgU0VQIGFjdGlvbiBpdGVtc1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGlzU2VuZE1lc3NhZ2VMaW5rVmlzaWJsZSgpOiBib29sZWFuIHtcclxuICAgICAgICBpZiAobWFya2VyT3BlcmF0aW9uTW9kZUZhY3Rvcnkub3BlcmF0aW9uTW9kZS5pc0hlbHBFeGFtaW5lcnNWaWV3ICYmIHFpZ1N0b3JlLmluc3RhbmNlLnNlbGVjdGVkUUlHRm9yTWFya2VyT3BlcmF0aW9uKSB7XHJcbiAgICAgICAgICAgIGxldCBzZXBBY3Rpb25zID0gbmV3IGhlbHBFeGFtaW5lcnNEYXRhSGVscGVyKCkuZ2V0U0VQQWN0aW9ucyhxaWdTdG9yZS5pbnN0YW5jZS5zZWxlY3RlZFFJR0Zvck1hcmtlck9wZXJhdGlvbi5leGFtaW5lclJvbGVJZCk7XHJcbiAgICAgICAgICAgIGlmIChzZXBBY3Rpb25zICYmIChzZXBBY3Rpb25zLmluZGV4T2YoZW51bXMuU0VQQWN0aW9uLlNlbmRNZXNzYWdlKSA+IC0xKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIHJlbmRlcmluZyB3b3JrbGlzdFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIG9uU2ltdWxhdGlvblRhcmdldENvbXBsZXRpb24gPSAoKTogdm9pZCA9PiB7XHJcblxyXG4gICAgICAgIC8vIEludm9rZSB0aGUgYWN0aW9uIGNyZWF0b3IgdG8gT3BlbiB0aGUgUUlHXHJcbiAgICAgICAgcWlnU2VsZWN0b3JBY3Rpb25DcmVhdG9yLm9wZW5RSUcocWlnU3RvcmUuaW5zdGFuY2Uuc2VsZWN0ZWRRSUdGb3JNYXJrZXJPcGVyYXRpb24ubWFya1NjaGVtZUdyb3VwSWQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogbm90aWZ5IHdvcmtsaXN0IHR5cGUgY2hhbmdlLlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIG5vdGlmeVdvcmtsaXN0VHlwZUNoYW5nZSh3b3JrbGlzdFR5cGU6IGVudW1zLldvcmtsaXN0VHlwZSwgcmVzcG9uc2VNb2RlOiBlbnVtcy5SZXNwb25zZU1vZGUpIHtcclxuICAgICAgICB3b3JrbGlzdEFjdGlvbkNyZWF0b3Iubm90aWZ5V29ya2xpc3RUeXBlQ2hhbmdlKHFpZ1N0b3JlLmluc3RhbmNlLnNlbGVjdGVkUUlHRm9yTWFya2VyT3BlcmF0aW9uLm1hcmtTY2hlbWVHcm91cElkLFxyXG4gICAgICAgICAgICBxaWdTdG9yZS5pbnN0YW5jZS5zZWxlY3RlZFFJR0Zvck1hcmtlck9wZXJhdGlvbi5leGFtaW5lclJvbGVJZCxcclxuICAgICAgICAgICAgcWlnU3RvcmUuaW5zdGFuY2Uuc2VsZWN0ZWRRSUdGb3JNYXJrZXJPcGVyYXRpb24ucXVlc3Rpb25QYXBlclBhcnRJZCxcclxuICAgICAgICAgICAgd29ya2xpc3RUeXBlLFxyXG4gICAgICAgICAgICByZXNwb25zZU1vZGUsXHJcbiAgICAgICAgICAgIHdvcmtsaXN0Q29tcG9uZW50SGVscGVyLmdldFJlbWFya1JlcXVlc3RUeXBlKHdvcmtsaXN0VHlwZSksXHJcbiAgICAgICAgICAgIHdvcmtsaXN0Q29tcG9uZW50SGVscGVyLmdldElzRGlyZWN0ZWRSZW1hcmsod29ya2xpc3RUeXBlKSxcclxuICAgICAgICAgICAgcWlnU3RvcmUuaW5zdGFuY2Uuc2VsZWN0ZWRRSUdGb3JNYXJrZXJPcGVyYXRpb24uaXNFbGVjdHJvbmljU3RhbmRhcmRpc2F0aW9uVGVhbU1lbWJlcixcclxuICAgICAgICAgICAgZmFsc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IHNlbGVjdGVkIHdvcmtsaXN0IHR5cGUgZGlzYWJsZWQuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgaXNTZWxlY3RlZFdvcmtsaXN0VHlwZURpc2FibGVkID0gKCk6IGJvb2xlYW4gPT4ge1xyXG4gICAgICAgIGxldCBpc1RhcmdldERpc2FibGVkOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICAgICAgbGV0IG1hcmtpbmdNb2RlQnlXb3JrbGlzdFR5cGU6IGVudW1zLk1hcmtpbmdNb2RlID1cclxuICAgICAgICAgICAgdGFyZ2V0SGVscGVyLmdldE1hcmtpbmdNb2RlQnlXb3JrbGlzdFR5cGUod29ya2xpc3RTdG9yZS5pbnN0YW5jZS5jdXJyZW50V29ya2xpc3RUeXBlKTtcclxuICAgICAgICBpZiAobWFya2luZ01vZGVCeVdvcmtsaXN0VHlwZSkge1xyXG4gICAgICAgICAgICBsZXQgdGFyZ2V0QnlXb3JrbGlzdFR5cGU6IGFueSA9XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1hcmtpbmdUYXJnZXRzU3VtbWFyeS5maWx0ZXIodGFyZ2V0ID0+IHRhcmdldC5tYXJraW5nTW9kZUlEID09PSBtYXJraW5nTW9kZUJ5V29ya2xpc3RUeXBlKS5maXJzdCgpO1xyXG4gICAgICAgICAgICBpc1RhcmdldERpc2FibGVkID0gbWFya2VyT3BlcmF0aW9uTW9kZUZhY3Rvcnkub3BlcmF0aW9uTW9kZS5pc1RhcmdldERpc2FibGVkKHRhcmdldEJ5V29ya2xpc3RUeXBlLCB1bmRlZmluZWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaXNUYXJnZXREaXNhYmxlZDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIE9uIE1hcmtJbnN0cnVjdGlvbiBGaWxlXHJcbiAgICAgKiBAcGFyYW0ge2FueX0gc291cmNlIC0gVGhlIHNvdXJjZSBlbGVtZW50XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBvbk1hcmtJbnN0cnVjdGlvbkZpbGVDbGljayhkb2N1bWVudElkOiBudW1iZXIpIHtcclxuICAgICAgICBsZXQgcXVlc3Rpb25QYXBlcklkOiBudW1iZXIgPSBxaWdTdG9yZS5pbnN0YW5jZS5zZWxlY3RlZFFJR0Zvck1hcmtlck9wZXJhdGlvbi5xdWVzdGlvblBhcGVyUGFydElkO1xyXG4gICAgICAgIGxldCBtc2dJZDogbnVtYmVyID0gcWlnU3RvcmUuaW5zdGFuY2Uuc2VsZWN0ZWRRSUdGb3JNYXJrZXJPcGVyYXRpb24ubWFya1NjaGVtZUdyb3VwSWQ7XHJcbiAgICAgICAgbGV0IG1hcmtpbmdJbnN0cnVjdGlvbkxldmVsOiBudW1iZXIgPSBjb25maWd1cmFibGVDaGFyYWN0ZXJpc3RpY3NIZWxwZXIubWFya2luZ0luc3RydWN0aW9uQ0NWYWx1ZTtcclxuICAgICAgICBsZXQgbWFya2luZ0luc3RydWN0aW9uOiBNYXJraW5nSW5zdHJ1Y3Rpb24gPVxyXG5cdFx0bWFya2luZ0luc3RydWN0aW9uU3RvcmUuaW5zdGFuY2UubWFya2luZ0luc3RydWN0aW9uTGlzdC5maW5kKHggPT4geC5kb2N1bWVudElkID09PSBkb2N1bWVudElkKTtcclxuICAgICAgICBsZXQgbWFya2luZ0luc3RydWN0aW9uUmVhZFN0YXR1czogYm9vbGVhbiA9IG1hcmtpbmdJbnN0cnVjdGlvbi5yZWFkU3RhdHVzO1xyXG4gICAgICAgIGxldCBtYXJraW5nSW5zdHJ1Y3Rpb25JZDogbnVtYmVyID0gbWFya2luZ0luc3RydWN0aW9uLm1hcmtpbmdJbnN0cnVjdGlvbklkO1xyXG4gICAgICAgIGxldCBhcmc6IG1hcmtpbmdJbnN0cnVjdGlvbkFyZyA9XHJcbiAgICAgICAgICAgIG5ldyBtYXJraW5nSW5zdHJ1Y3Rpb25BcmcoZG9jdW1lbnRJZCwgcXVlc3Rpb25QYXBlcklkLCBtc2dJZCwgbWFya2luZ0luc3RydWN0aW9uTGV2ZWwsXHJcbiAgICAgICAgICAgICAgICBtYXJraW5nSW5zdHJ1Y3Rpb25JZCwgbWFya2luZ0luc3RydWN0aW9uUmVhZFN0YXR1cyk7XHJcblxyXG4gICAgICAgIG1hcmtpbmdJbnN0cnVjdGlvQWN0aW9uQ3JlYXRvci51cGRhdGVNYXJraW5nSW5zdHJ1Y3Rpb24oZG9jdW1lbnRJZCwgbWFya2luZ0luc3RydWN0aW9uUmVhZFN0YXR1cyk7XHJcblxyXG4gICAgICAgIHdpbmRvdy5vcGVuKHVybHMuTUFSS0lOR19JTlNUUlVDVElPTl9HRVRfVVJMICsgJz8nICsgJC5wYXJhbShhcmcpKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIE9uIE1hcmsgSW5zdHJ1Y3Rpb25QYW5lbCBDbGlja1xyXG4gICAgICogQHBhcmFtIHthbnl9IHNvdXJjZSAtIFRoZSBzb3VyY2UgZWxlbWVudFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgb25NYXJrSW5zdHJ1Y3Rpb25QYW5lbENsaWNrKCkge1xyXG4gICAgICAgIGlmIChtYXJraW5nSW5zdHJ1Y3Rpb25TdG9yZS5pbnN0YW5jZS5tYXJraW5nSW5zdHJ1Y3Rpb25MaXN0ICYmXHJcbiAgICAgICAgICAgIG1hcmtpbmdJbnN0cnVjdGlvblN0b3JlLmluc3RhbmNlLm1hcmtpbmdJbnN0cnVjdGlvbkxpc3QuY291bnQoKSA9PT0gMSkge1xyXG4gICAgICAgICAgICB0aGlzLm9uTWFya0luc3RydWN0aW9uRmlsZUNsaWNrKG1hcmtpbmdJbnN0cnVjdGlvblN0b3JlLmluc3RhbmNlLm1hcmtpbmdJbnN0cnVjdGlvbkxpc3QuZmlyc3QoKS5kb2N1bWVudElkKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuc3RhdGUuaXNNYXJraW5nSW5zdHJ1Y3Rpb25QYW5lbE9wZW4pIHtcclxuICAgICAgICAgICAgICAgIC8vIGNhbGN1bGF0ZSBzY3JvbGwgd2lkdGggb2YgY29sdW1uLWxldCB3aGlsZSBvcGVuaW5nIHRoZSBtYXJraW5nIGluc3RydWN0aW9uIHBvcHVwLCB0byBzZXQgdGhlIG1hcmdpbi1sZWZ0XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbHVtbkxlZnRTY3JvbGxXaWR0aCA9IGh0bWxVdGlsaXRpZXMuZ2V0RWxlbWVudEJ5SWQoJ2NvbHVtbi1sZWZ0JykgP1xyXG4gICAgICAgICAgICAgICAgICAgIGh0bWxVdGlsaXRpZXMuZ2V0RWxlbWVudEJ5SWQoJ2NvbHVtbi1sZWZ0Jykub2Zmc2V0V2lkdGggLSBodG1sVXRpbGl0aWVzLmdldEVsZW1lbnRCeUlkKCdjb2x1bW4tbGVmdCcpLmNsaWVudFdpZHRoXHJcbiAgICAgICAgICAgICAgICAgICAgOiAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG1hcmtpbmdJbnN0cnVjdGlvQWN0aW9uQ3JlYXRvci5tYXJraW5nSW5zdHJ1Y3Rpb25QYW5lbE9wZW5BY3Rpb25DcmVhdG9yKCF0aGlzLnN0YXRlLmlzTWFya2luZ0luc3RydWN0aW9uUGFuZWxPcGVuKTtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLnN0YXRlLmlzTWFya2luZ0luc3RydWN0aW9uUGFuZWxPcGVuKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgbWFya2luSW5zdHJ1Y3Rpb25NZW51ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcmtpbmctaW5zdHJ1Y3Rpb24tbWVudScpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1hcmtpbkluc3RydWN0aW9uTWVudSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlc2V0IHRoZSBzY3JvbGwgcG9zaXRpb24gd2hlbiBwb3B1cCBpcyBvcGVuZWRcclxuICAgICAgICAgICAgICAgICAgICBtYXJraW5JbnN0cnVjdGlvbk1lbnUuc2Nyb2xsVG9wID0gMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgIG1hcmtpbmdJbnN0cnVjdGlvblBhbmVsUmVuZGVyZWRPbjogRGF0ZS5ub3coKSxcclxuICAgICAgICAgICAgICAgIGlzTWFya2luZ0luc3RydWN0aW9uUGFuZWxPcGVuOiAhdGhpcy5zdGF0ZS5pc01hcmtpbmdJbnN0cnVjdGlvblBhbmVsT3BlbixcclxuICAgICAgICAgICAgICAgIGlzTWFya2luZ0luc3RydWN0aW9uUGFuZWxDbGlja2VkOiB0cnVlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIG9uIGNsaWNrIG9yIHRvdWNoIGV2bmV0XHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgb25NYXJraW5nSW5zdHJ1Y3RvbkNsaWNrSGFuZGxlciA9IChlOiBNb3VzZUV2ZW50IHwgVG91Y2hFdmVudCk6IGFueSA9PiB7XHJcbiAgICAgICAgLyoqIGNoZWNrIGlmIHRoZSBjbGlja2VkIGVsZW1lbnQgaXMgYSBjaGlsZCBvZiB0aGUgdXNlciBkZXRhaWxzIGxpc3QgaXRlbS4gaWYgbm90IGNsb3NlIHRoZSBvcGVuIHdpbmRvdyAqL1xyXG4gICAgICAgIGlmIChlLnRhcmdldCAhPT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgICAgIGRvbU1hbmFnZXIuc2VhcmNoUGFyZW50Tm9kZShlLnRhcmdldCwgZnVuY3Rpb24gKGVsOiBhbnkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlbC5pZCA9PT0gJ21hcmtpbmdpbnN0cnVjdGlvbmxpbmsnIHx8IGVsLmlkID09PSAnbWFya2luZ0luc3RydWN0aW9uTWVudSc7XHJcbiAgICAgICAgICAgIH0pID09IG51bGwpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUuaXNNYXJraW5nSW5zdHJ1Y3Rpb25QYW5lbE9wZW4gIT09IHVuZGVmaW5lZCAmJiB0aGlzLnN0YXRlLmlzTWFya2luZ0luc3RydWN0aW9uUGFuZWxPcGVuKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgaXNNYXJraW5nSW5zdHJ1Y3Rpb25QYW5lbE9wZW46IGZhbHNlIH0pO1xyXG4gICAgICAgICAgICAgICAgbWFya2luZ0luc3RydWN0aW9BY3Rpb25DcmVhdG9yLm1hcmtpbmdJbnN0cnVjdGlvblBhbmVsT3BlbkFjdGlvbkNyZWF0b3IoZmFsc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIHJlbmRlcmluZyB3b3JrbGlzdFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIG9uTWFya2luZ0luc3RydWN0aW9uc0xvYWRlZCA9ICgpOiB2b2lkID0+IHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgbWFya2luZ0luc3RydWN0aW9uUGFuZWxSZW5kZXJlZE9uOiBEYXRlLm5vdygpXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXRzIHRoZSBtYXJraW5nIGluc3RydWN0aW9uIGZpbGUgbGlzdCBwYW5lbCxcclxuICAgICAqIHJlbmRlciBpbiB3b3JrbGlzdCBpbnN0ZWFkIG9mIG1hcmtpbmcgaW5zdHJ1Y3Rpb24gY29tcG9uZW50IHRvIGhhbmRsZSBqZXJraW5nL2hvdmVyaW5nIGlzc3VlcyBpbiB3b3JrbGlzdFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGdldCBtYXJraW5nSW5zdHJ1Y3Rpb25GaWxlTGlzdFBhbmxlKCkge1xyXG4gICAgICAgIC8vIGxpc3Qgb2YgbWFya2luZyBpbnN0cnVjdGlvbiBmaWxlcyBlbGVtZW50XHJcbiAgICAgICAgbGV0IGZpbGVMaXN0ID0gKG1hcmtpbmdJbnN0cnVjdGlvblN0b3JlLmluc3RhbmNlLm1hcmtpbmdJbnN0cnVjdGlvbkxpc3QgP1xyXG4gICAgICAgICAgICBtYXJraW5nSW5zdHJ1Y3Rpb25TdG9yZS5pbnN0YW5jZS5tYXJraW5nSW5zdHJ1Y3Rpb25MaXN0Lm1hcChcclxuICAgICAgICAgICAgICAgIChtYXJraW5nSW5zdHJ1Y3Rpb246IE1hcmtpbmdJbnN0cnVjdGlvbiwgaW5kZXg6IG51bWJlcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBsaUNsYXNzOiBzdHJpbmcgPSAnbWFya2luZy1pbnN0cnVjdGlvbi1pdGVtJztcclxuICAgICAgICAgICAgICAgICAgICBpZiAobWFya2luZ0luc3RydWN0aW9uLnJlYWRTdGF0dXMgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpQ2xhc3MgPSAnbWFya2luZy1pbnN0cnVjdGlvbi1pdGVtIHVucmVhZCc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBpZD17J21hcmtpbmctaW5zdHJ1Y3Rpb24taXRlbV8nICsgbWFya2luZ0luc3RydWN0aW9uLmRvY3VtZW50TmFtZX0gY2xhc3NOYW1lPXtsaUNsYXNzfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxNYXJraW5nSW5zdHJ1Y3Rpb25GaWxlUGFuZWwgaWQ9eydpZF9tYXJraW5naW5zdHJ1Y3Rpb25saW5rXycgKyBtYXJraW5nSW5zdHJ1Y3Rpb24uZG9jdW1lbnRJZH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9eydrZXlfbWFya2luZ2luc3RydWN0aW9ubGlua18nICsgbWFya2luZ0luc3RydWN0aW9uLmRvY3VtZW50SWR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnRJZD17bWFya2luZ0luc3RydWN0aW9uLmRvY3VtZW50SWR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnROYW1lPXttYXJraW5nSW5zdHJ1Y3Rpb24uZG9jdW1lbnROYW1lfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uTWFya0luc3RydWN0aW9uRmlsZUNsaWNrPXt0aGlzLm9uTWFya0luc3RydWN0aW9uRmlsZUNsaWNrLmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyZWRPbj17dGhpcy5zdGF0ZS5tYXJraW5nSW5zdHJ1Y3Rpb25QYW5lbFJlbmRlcmVkT259PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9NYXJraW5nSW5zdHJ1Y3Rpb25GaWxlUGFuZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+KTtcclxuICAgICAgICAgICAgICAgIH0pIDogbnVsbCk7XHJcblxyXG4gICAgICAgIC8vIGdldHMgdGhlIHRvcCBvZiBtYXJraW5nIGluc3RydWN0aW9uIGhvbGRlclxyXG4gICAgICAgIGxldCBtYXJraW5nSW5zdHJ1Y3Rpb25Ib2xkZXIgPSBodG1sVXRpbGl0aWVzLmdldEVsZW1lbnRCeUlkKCdtYXJraW5naW5zdHJ1Y3Rpb25saW5rJyk7XHJcbiAgICAgICAgbGV0IG1hcmtpbmdJbnN0cnVjdGlvbkhvbGRlclRvcCA9IG1hcmtpbmdJbnN0cnVjdGlvbkhvbGRlciA/IG1hcmtpbmdJbnN0cnVjdGlvbkhvbGRlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AgOiAwO1xyXG5cclxuICAgICAgICAvLyBjc3Mgc3R5bGUgZm9yIG1hcmtpbmcgaW5zdHJ1Y3Rpb24gZmlsZSBtZW51IGFuZCBzZXQgdG9wIHdpdGggdG9wIG9mIG1hcmtpbmcgaW5zdHJ1Y3Rpb24gaG9sZGVyXHJcbiAgICAgICAgLy8gY29uc2lkZXIgc2Nyb2xsIHdpZHRoICBvZiBjb2x1bW4gbGVmdCB3aGlsZSBzZXR0aW5nIG1hcmdpbiBsZWZ0IFxyXG4gICAgICAgIGxldCBtYXJraW5nSW5zdHJ1Y3Rpb25GaWxlTGlzdFN0eWxlOiBSZWFjdC5DU1NQcm9wZXJ0aWVzID0ge1xyXG4gICAgICAgICAgICB0b3A6IG1hcmtpbmdJbnN0cnVjdGlvbkhvbGRlclRvcCArICdweCcsXHJcbiAgICAgICAgICAgIG1hcmdpbkxlZnQ6ICgtMSAqIHRoaXMuY29sdW1uTGVmdFNjcm9sbFdpZHRoKSArICdweCdcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBzZXQgdGhlIGhlaWdodCBvZiBkcm9wIGRvd24gICAgICAgIFxyXG4gICAgICAgIGxldCBtYXJraW5nSW5zdHJ1Y3Rpb25Ecm9wRG93bkhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodCAtIG1hcmtpbmdJbnN0cnVjdGlvbkhvbGRlclRvcDtcclxuICAgICAgICBsZXQgbWFya2luZ0luc3RydWN0aW9uTWVudVN0eWxlOiBSZWFjdC5DU1NQcm9wZXJ0aWVzID0ge1xyXG4gICAgICAgICAgICBtYXhIZWlnaHQ6IG1hcmtpbmdJbnN0cnVjdGlvbkRyb3BEb3duSGVpZ2h0ICsgJ3B4J1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIG1hcmtpbmcgaW5zdHJ1Y3Rpb24gZmlsZXMgbGlzdCBwYW5lbFxyXG4gICAgICAgIGxldCBtYXJraW5nSW5zdHJ1Y3Rpb25GaWxlTGlzdCA9XHJcbiAgICAgICAgICAgICg8ZGl2IGNsYXNzTmFtZT17XHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWVzKCdkcm9wZG93bi13cmFwICBtYXJraW5nLWluc3RydWN0aW9uLW1lbnUgbGVmdC1jb2x1bW4tbWVudScsXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnb3Blbic6IHRoaXMuc3RhdGUuaXNNYXJraW5nSW5zdHJ1Y3Rpb25QYW5lbE9wZW4gJiYgdGhpcy5zdGF0ZS5pc01hcmtpbmdJbnN0cnVjdGlvblBhbmVsQ2xpY2tlZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ2Nsb3NlJzogIXRoaXMuc3RhdGUuaXNNYXJraW5nSW5zdHJ1Y3Rpb25QYW5lbE9wZW4gJiYgdGhpcy5zdGF0ZS5pc01hcmtpbmdJbnN0cnVjdGlvblBhbmVsQ2xpY2tlZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJyc6ICF0aGlzLnN0YXRlLmlzTWFya2luZ0luc3RydWN0aW9uUGFuZWxDbGlja2VkXHJcbiAgICAgICAgICAgICAgICAgICAgfSl9XHJcbiAgICAgICAgICAgICAgICBzdHlsZT17bWFya2luZ0luc3RydWN0aW9uRmlsZUxpc3RTdHlsZX1cclxuICAgICAgICAgICAgICAgIGlkPSdtYXJraW5nSW5zdHJ1Y3Rpb25NZW51Jz5cclxuICAgICAgICAgICAgICAgIDx1bCBpZD0nbWFya2luZy1pbnN0cnVjdGlvbi1tZW51J1xyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nbWVudSdcclxuICAgICAgICAgICAgICAgICAgICBzdHlsZT17bWFya2luZ0luc3RydWN0aW9uTWVudVN0eWxlfT5cclxuICAgICAgICAgICAgICAgICAgICB7ZmlsZUxpc3R9XHJcbiAgICAgICAgICAgICAgICA8L3VsID5cclxuICAgICAgICAgICAgPC9kaXY+KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG1hcmtpbmdJbnN0cnVjdGlvbkZpbGVMaXN0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogcmVmcmVzaCBvbiBjbG9zaW5nIG1hcmtpbmcgaW5zdHJ1Y3Rpb24gcGFuZWwgYnkgY2xpY2tpbmcgb24gd29ya2xpc3QgdHlwZVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIG9uTWFya2luZ0luc3RydWNpb25QYW5sZUNsb3NlZCA9ICgpOiB2b2lkID0+IHtcclxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5pc01hcmtpbmdJbnN0cnVjdGlvblBhbmVsT3Blbikge1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgIGlzTWFya2luZ0luc3RydWN0aW9uUGFuZWxPcGVuOiBmYWxzZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCA9IFdvcmtMaXN0O1xyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L3NvdXJjZS1tYXAtbG9hZGVyIS4vc3JjL2NvbXBvbmVudHMvd29ya2xpc3Qvd29ya2xpc3QudHN4Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUEyQ0E7O0FBRUE7QUFDQTtBQUFBO0FBMENBOztBQUVBO0FBQ0E7QUFBQTtBQXBDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBd2JBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFTQTtBQUNBO0FBRUE7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7OztBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQVdBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUdBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUVBO0FBSUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQWFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBYUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFTQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUE0QkE7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBSUE7QUFHQTtBQUVBO0FBRUE7QUFDQTtBQU1BO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFNQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBS0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFPQTtBQUFBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBMkRBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWtCQTs7QUFFQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUE4Q0E7O0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUEyS0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFVQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFnQkE7O0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQWlCQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQXNEQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWlFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBbHVEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBU0E7QUFpQkE7QUFPQTtBQU1BO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBRUE7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUFBO0FBQ0E7QUFLQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUFBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBZ0JBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFPQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQU1BO0FBRUE7QUFDQTtBQU1BO0FBQ0E7QUFTQTtBQWlCQTtBQUdBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUUE7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUdBO0FBR0E7QUFFQTtBQUVBO0FBRUE7QUFFQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFHQTtBQUdBO0FBRUE7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTZXQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQXVCQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUE0SUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUtBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVdBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBMERBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFrQkE7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBZUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFHQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQSwyREFvQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsNERBRUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBa05BOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFXQTs7QUFFQTtBQUNBO0FBQ0E7QUFTQTtBQWlCQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBSUE7QUFFQTtBQUNBO0FBRUE7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBK0JBO0FBSkE7OztBQUdBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQVFBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBT0E7QUFDQTs7O0FBQUE7QUFZQTtBQUFBO0FBRUE7O0EiLCJzb3VyY2VSb290IjoiIn0=");

/***/ })

});